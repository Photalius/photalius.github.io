var Lz=Object.defineProperty;var Fz=(ht,Pt,Vr)=>Pt in ht?Lz(ht,Pt,{enumerable:!0,configurable:!0,writable:!0,value:Vr}):ht[Pt]=Vr;var Ce=(ht,Pt,Vr)=>(Fz(ht,typeof Pt!="symbol"?Pt+"":Pt,Vr),Vr);(function(ht,Pt){typeof exports=="object"&&typeof module<"u"?module.exports=Pt():typeof define=="function"&&define.amd?define(Pt):(ht=typeof globalThis<"u"?globalThis:ht||self,ht.Photalius=Pt())})(this,function(){var oS,sS,aS;"use strict";var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vr(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var E={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),cS=Symbol.for("react.portal"),uS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),pS=Symbol.for("react.context"),gS=Symbol.for("react.forward_ref"),mS=Symbol.for("react.suspense"),vS=Symbol.for("react.memo"),yS=Symbol.for("react.lazy"),jg=Symbol.iterator;function bS(t){return t===null||typeof t!="object"?null:(t=jg&&t[jg]||t["@@iterator"],typeof t=="function"?t:null)}var Bg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vg=Object.assign,$g={};function Di(t,e,n){this.props=t,this.context=e,this.refs=$g,this.updater=n||Bg}Di.prototype.isReactComponent={},Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ug(){}Ug.prototype=Di.prototype;function Pu(t,e,n){this.props=t,this.context=e,this.refs=$g,this.updater=n||Bg}var Mu=Pu.prototype=new Ug;Mu.constructor=Pu,Vg(Mu,Di.prototype),Mu.isPureReactComponent=!0;var Hg=Array.isArray,Wg=Object.prototype.hasOwnProperty,Au={current:null},Yg={key:!0,ref:!0,__self:!0,__source:!0};function Xg(t,e,n){var r,i={},s=null,d=null;if(e!=null)for(r in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(s=""+e.key),e)Wg.call(e,r)&&!Yg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xo,type:t,key:s,ref:d,props:i,_owner:Au.current}}function wS(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Du(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function xS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gg=/\/+/g;function Ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xS(""+t.key):e.toString(36)}function Ia(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(s){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Xo:case cS:d=!0}}if(d)return d=t,i=i(d),t=r===""?"."+Ru(d,0):r,Hg(i)?(n="",t!=null&&(n=t.replace(Gg,"$&/")+"/"),Ia(i,e,n,"",function(c){return c})):i!=null&&(Du(i)&&(i=wS(i,n+(!i.key||d&&d.key===i.key?"":(""+i.key).replace(Gg,"$&/")+"/")+t)),e.push(i)),1;if(d=0,r=r===""?".":r+":",Hg(t))for(var a=0;a<t.length;a++){s=t[a];var o=r+Ru(s,a);d+=Ia(s,e,n,o,i)}else if(o=bS(t),typeof o=="function")for(t=o.call(t),a=0;!(s=t.next()).done;)s=s.value,o=r+Ru(s,a++),d+=Ia(s,e,n,o,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function La(t,e,n){if(t==null)return t;var r=[],i=0;return Ia(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _S(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Fa={transition:null},SS={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Fa,ReactCurrentOwner:Au};Ee.Children={map:La,forEach:function(t,e,n){La(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return La(t,function(){e++}),e},toArray:function(t){return La(t,function(e){return e})||[]},only:function(t){if(!Du(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Ee.Component=Di,Ee.Fragment=uS,Ee.Profiler=hS,Ee.PureComponent=Pu,Ee.StrictMode=fS,Ee.Suspense=mS,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS,Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vg({},t.props),i=t.key,s=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,d=Au.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)Wg.call(e,o)&&!Yg.hasOwnProperty(o)&&(r[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xo,type:t.type,key:i,ref:s,props:r,_owner:d}},Ee.createContext=function(t){return t={$$typeof:pS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dS,_context:t},t.Consumer=t},Ee.createElement=Xg,Ee.createFactory=function(t){var e=Xg.bind(null,t);return e.type=t,e},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(t){return{$$typeof:gS,render:t}},Ee.isValidElement=Du,Ee.lazy=function(t){return{$$typeof:yS,_payload:{_status:-1,_result:t},_init:_S}},Ee.memo=function(t,e){return{$$typeof:vS,type:t,compare:e===void 0?null:e}},Ee.startTransition=function(t){var e=Fa.transition;Fa.transition={};try{t()}finally{Fa.transition=e}},Ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ee.useCallback=function(t,e){return xt.current.useCallback(t,e)},Ee.useContext=function(t){return xt.current.useContext(t)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(t){return xt.current.useDeferredValue(t)},Ee.useEffect=function(t,e){return xt.current.useEffect(t,e)},Ee.useId=function(){return xt.current.useId()},Ee.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)},Ee.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)},Ee.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)},Ee.useMemo=function(t,e){return xt.current.useMemo(t,e)},Ee.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)},Ee.useRef=function(t){return xt.current.useRef(t)},Ee.useState=function(t){return xt.current.useState(t)},Ee.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)},Ee.useTransition=function(){return xt.current.useTransition()},Ee.version="18.2.0",function(t){t.exports=Ee}(E);const he=Pt(E.exports);function CS(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}function Iu(t,e){return e===void 0&&(e=15),+parseFloat(Number(t).toPrecision(e))}function Sn(t){var e=t.toString().split(/[eE]/),n=(e[0].split(".")[1]||"").length-+(e[1]||0);return n>0?n:0}function Go(t){if(t.toString().indexOf("e")===-1)return Number(t.toString().replace(".",""));var e=Sn(t);return e>0?Iu(Number(t)*Math.pow(10,e)):Number(t)}function Lu(t){qg&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function za(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e.slice(1);return i.reduce(function(s,d){return t(s,d)},r)}}var er=za(function(t,e){var n=Go(t),r=Go(e),i=Sn(t)+Sn(e),s=n*r;return Lu(s),s/Math.pow(10,i)}),TS=za(function(t,e){var n=Math.pow(10,Math.max(Sn(t),Sn(e)));return(er(t,n)+er(e,n))/n}),kS=za(function(t,e){var n=Math.pow(10,Math.max(Sn(t),Sn(e)));return(er(t,n)-er(e,n))/n}),Kg=za(function(t,e){var n=Go(t),r=Go(e);return Lu(n),Lu(r),er(n/r,Iu(Math.pow(10,Sn(e)-Sn(t))))});function ES(t,e){var n=Math.pow(10,e),r=Kg(Math.round(Math.abs(er(t,n))),n);return t<0&&r!==0&&(r=er(r,-1)),r}var qg=!0;function OS(t){t===void 0&&(t=!0),qg=t}var Fu={strip:Iu,plus:TS,minus:kS,times:er,divide:Kg,round:ES,digitLength:Sn,float2Fixed:Go,enableBoundaryChecking:OS};const Zg=Object.prototype.toString;function Qg(t){switch(Zg.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Li(t,Error)}}function Ri(t,e){return Zg.call(t)===`[object ${e}]`}function Jg(t){return Ri(t,"ErrorEvent")}function em(t){return Ri(t,"DOMError")}function PS(t){return Ri(t,"DOMException")}function $r(t){return Ri(t,"String")}function tm(t){return t===null||typeof t!="object"&&typeof t!="function"}function Ii(t){return Ri(t,"Object")}function zu(t){return typeof Event<"u"&&Li(t,Event)}function MS(t){return typeof Element<"u"&&Li(t,Element)}function AS(t){return Ri(t,"RegExp")}function Nu(t){return Boolean(t&&t.then&&typeof t.then=="function")}function DS(t){return Ii(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function RS(t){return typeof t=="number"&&t!==t}function Li(t,e){try{return t instanceof e}catch{return!1}}function Na(t){return t&&t.Math==Math?t:void 0}const en=typeof globalThis=="object"&&Na(globalThis)||typeof window=="object"&&Na(window)||typeof self=="object"&&Na(self)||typeof global=="object"&&Na(global)||function(){return this}()||{};function Ko(){return en}function ju(t,e,n){const r=n||en,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const IS=Ko(),LS=80;function Bu(t,e={}){try{let n=t;const r=5,i=[];let s=0,d=0;const a=" > ",o=a.length;let c;const h=Array.isArray(e)?e:e.keyAttrs,l=!Array.isArray(e)&&e.maxStringLength||LS;for(;n&&s++<r&&(c=FS(n,h),!(c==="html"||s>1&&d+i.length*o+c.length>=l));)i.push(c),d+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function FS(t,e){const n=t,r=[];let i,s,d,a,o;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const c=e&&e.length?e.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(c&&c.length)c.forEach(l=>{r.push(`[${l[0]}="${l[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&$r(i))for(s=i.split(/\s+/),o=0;o<s.length;o++)r.push(`.${s[o]}`);const h=["aria-label","type","name","title","alt"];for(o=0;o<h.length;o++)d=h[o],a=n.getAttribute(d),a&&r.push(`[${d}="${a}"]`);return r.join("")}function zS(){try{return IS.document.location.href}catch{return""}}class dt extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}const NS=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function jS(t){return t==="http"||t==="https"}function ja(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:d,protocol:a,publicKey:o}=t;return`${a}://${o}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${d}`}function BS(t){const e=NS.exec(t);if(!e)throw new dt(`Invalid Sentry Dsn: ${t}`);const[n,r,i="",s,d="",a]=e.slice(1);let o="",c=a;const h=c.split("/");if(h.length>1&&(o=h.slice(0,-1).join("/"),c=h.pop()),c){const l=c.match(/^\d+/);l&&(c=l[0])}return nm({host:s,pass:i,path:o,projectId:c,port:d,protocol:n,publicKey:r})}function nm(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function VS(t){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;const{port:e,projectId:n,protocol:r}=t;if(["protocol","publicKey","host","projectId"].forEach(s=>{if(!t[s])throw new dt(`Invalid Sentry Dsn: ${s} missing`)}),!n.match(/^\d+$/))throw new dt(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!jS(r))throw new dt(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(e&&isNaN(parseInt(e,10)))throw new dt(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function $S(t){const e=typeof t=="string"?BS(t):nm(t);return VS(e),e}const US="Sentry Logger ",Ba=["debug","info","warn","error","log","assert","trace"];function rm(t){if(!("console"in en))return t();const e=en.console,n={};Ba.forEach(r=>{const i=e[r]&&e[r].__sentry_original__;r in e&&i&&(n[r]=e[r],e[r]=i)});try{return t()}finally{Object.keys(n).forEach(r=>{e[r]=n[r]})}}function im(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Ba.forEach(n=>{e[n]=(...r)=>{t&&rm(()=>{en.console[n](`${US}[${n}]:`,...r)})}}):Ba.forEach(n=>{e[n]=()=>{}}),e}let Te;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Te=ju("logger",im):Te=im();function qo(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function om(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function HS(t,e,n=!1){return $r(t)?AS(e)?e.test(t):$r(e)?n?t===e:t.includes(e):!1:!1}function Va(t,e=[],n=!1){return e.some(r=>HS(t,r,n))}function at(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);if(typeof i=="function")try{sm(i,r)}catch{}t[e]=i}function Vu(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function sm(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,Vu(t,"__sentry_original__",e)}function $u(t){return t.__sentry_original__}function WS(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function am(t){if(Qg(t))return{message:t.message,name:t.name,stack:t.stack,...cm(t)};if(zu(t)){const e={type:t.type,target:lm(t.target),currentTarget:lm(t.currentTarget),...cm(t)};return typeof CustomEvent<"u"&&Li(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function lm(t){try{return MS(t)?Bu(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function cm(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function YS(t,e=40){const n=Object.keys(am(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return qo(n[0],e);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:qo(i,e)}return""}function Uu(t){return Hu(t,new Map)}function Hu(t,e){if(Ii(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))typeof t[i]<"u"&&(r[i]=Hu(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Hu(i,e))}),r}return t}const um=50,fm=/\(error: (.*)\)/;function hm(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],s=n.split(`
`);for(let d=r;d<s.length;d++){const a=s[d];if(a.length>1024)continue;const o=fm.test(a)?a.replace(fm,"$1"):a;if(!o.match(/\S*Error: /)){for(const c of e){const h=c(o);if(h){i.push(h);break}}if(i.length>=um)break}}return GS(i)}}function XS(t){return Array.isArray(t)?hm(...t):t}function GS(t){if(!t.length)return[];const e=t.slice(0,um),n=e[e.length-1].function;n&&/sentryWrapped/.test(n)&&e.pop(),e.reverse();const r=e[e.length-1].function;return r&&/captureMessage|captureException/.test(r)&&e.pop(),e.map(i=>({...i,filename:i.filename||e[e.length-1].filename,function:i.function||"?"}))}const Wu="<anonymous>";function tr(t){try{return!t||typeof t!="function"?Wu:t.name||Wu}catch{return Wu}}const Yu=Ko();function dm(){if(!("fetch"in Yu))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Xu(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function KS(){if(!dm())return!1;if(Xu(Yu.fetch))return!0;let t=!1;const e=Yu.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Xu(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}const $a=Ko();function qS(){const t=$a.chrome,e=t&&t.app&&t.app.runtime,n="history"in $a&&!!$a.history.pushState&&!!$a.history.replaceState;return!e&&n}const je=Ko(),Zo="__sentry_xhr_v2__",Qo={},pm={};function ZS(t){if(!pm[t])switch(pm[t]=!0,t){case"console":QS();break;case"dom":sC();break;case"xhr":tC();break;case"fetch":JS();break;case"history":nC();break;case"error":aC();break;case"unhandledrejection":lC();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("unknown instrumentation type:",t);return}}function nr(t,e){Qo[t]=Qo[t]||[],Qo[t].push(e),ZS(t)}function fn(t,e){if(!(!t||!Qo[t]))for(const n of Qo[t]||[])try{n(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${tr(n)}
Error:`,r)}}function QS(){"console"in je&&Ba.forEach(function(t){t in je.console&&at(je.console,t,function(e){return function(...n){fn("console",{args:n,level:t}),e&&e.apply(je.console,n)}})})}function JS(){!KS()||at(je,"fetch",function(t){return function(...e){const{method:n,url:r}=eC(e),i={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return fn("fetch",{...i}),t.apply(je,e).then(s=>(fn("fetch",{...i,endTimestamp:Date.now(),response:s}),s),s=>{throw fn("fetch",{...i,endTimestamp:Date.now(),error:s}),s})}})}function Gu(t,e){return!!t&&typeof t=="object"&&!!t[e]}function gm(t){return typeof t=="string"?t:t?Gu(t,"url")?t.url:t.toString?t.toString():"":""}function eC(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:gm(n),method:Gu(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:gm(e),method:Gu(e,"method")?String(e.method).toUpperCase():"GET"}}function tC(){if(!("XMLHttpRequest"in je))return;const t=XMLHttpRequest.prototype;at(t,"open",function(e){return function(...n){const r=n[1],i=this[Zo]={method:$r(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};$r(r)&&i.method==="POST"&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const d=this[Zo];if(!!d&&this.readyState===4){try{d.status_code=this.status}catch{}fn("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?at(this,"onreadystatechange",function(d){return function(...a){return s(),d.apply(this,a)}}):this.addEventListener("readystatechange",s),at(this,"setRequestHeader",function(d){return function(...a){const[o,c]=a,h=this[Zo];return h&&(h.request_headers[o.toLowerCase()]=c),d.apply(this,a)}}),e.apply(this,n)}}),at(t,"send",function(e){return function(...n){const r=this[Zo];return r&&n[0]!==void 0&&(r.body=n[0]),fn("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),e.apply(this,n)}})}let Ua;function nC(){if(!qS())return;const t=je.onpopstate;je.onpopstate=function(...n){const r=je.location.href,i=Ua;if(Ua=r,fn("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Ua,d=String(i);Ua=d,fn("history",{from:s,to:d})}return n.apply(this,r)}}at(je.history,"pushState",e),at(je.history,"replaceState",e)}const rC=1e3;let Ha,Wa;function iC(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function oC(t){if(t.type!=="keypress")return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function mm(t,e=!1){return n=>{if(!n||Wa===n||oC(n))return;const r=n.type==="keypress"?"input":n.type;Ha===void 0?(t({event:n,name:r,global:e}),Wa=n):iC(Wa,n)&&(t({event:n,name:r,global:e}),Wa=n),clearTimeout(Ha),Ha=je.setTimeout(()=>{Ha=void 0},rC)}}function sC(){if(!("document"in je))return;const t=fn.bind(null,"dom"),e=mm(t,!0);je.document.addEventListener("click",e,!1),je.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=je[n]&&je[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(at(r,"addEventListener",function(i){return function(s,d,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},h=c[s]=c[s]||{refCount:0};if(!h.handler){const l=mm(t);h.handler=l,i.call(this,s,l,a)}h.refCount++}catch{}return i.call(this,s,d,a)}}),at(r,"removeEventListener",function(i){return function(s,d,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__||{},h=c[s];h&&(h.refCount--,h.refCount<=0&&(i.call(this,s,h.handler,a),h.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete o.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,d,a)}}))})}let Ya=null;function aC(){Ya=je.onerror,je.onerror=function(t,e,n,r,i){return fn("error",{column:r,error:i,line:n,msg:t,url:e}),Ya&&!Ya.__SENTRY_LOADER__?Ya.apply(this,arguments):!1},je.onerror.__SENTRY_INSTRUMENTED__=!0}let Xa=null;function lC(){Xa=je.onunhandledrejection,je.onunhandledrejection=function(t){return fn("unhandledrejection",t),Xa&&!Xa.__SENTRY_LOADER__?Xa.apply(this,arguments):!0},je.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function cC(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function Fi(){const t=en,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function vm(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function rr(t){const{message:e,event_id:n}=t;if(e)return e;const r=vm(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ku(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function Jo(t,e){const n=vm(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};n.mechanism.data=s}}function ym(t){if(t&&t.__sentry_captured__)return!0;try{Vu(t,"__sentry_captured__",!0)}catch{}return!1}function bm(t){return Array.isArray(t)?t:[t]}function uC(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function fC(){return"npm"}function hC(){return!uC()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function dC(t,e){return t.require(e)}function ir(t,e=100,n=1/0){try{return qu("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function wm(t,e=3,n=100*1024){const r=ir(t,e);return vC(r)>n?wm(t,e-1,n):r}function qu(t,e,n=1/0,r=1/0,i=cC()){const[s,d]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!RS(e))return e;const a=pC(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const o=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(o===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const f=c.toJSON();return qu("",f,o-1,r,i)}catch{}const h=Array.isArray(e)?[]:{};let l=0;const u=am(e);for(const f in u){if(!Object.prototype.hasOwnProperty.call(u,f))continue;if(l>=r){h[f]="[MaxProperties ~]";break}const p=u[f];h[f]=qu(f,p,o-1,r,i),l++}return d(e),h}function pC(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(DS(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${tr(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=gC(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function gC(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function mC(t){return~-encodeURI(t).split(/%..|./).length}function vC(t){return mC(JSON.stringify(t))}var Ln;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Ln||(Ln={}));function Ur(t){return new _t(e=>{e(t)})}function Ga(t){return new _t((e,n)=>{n(t)})}class _t{__init(){this._state=Ln.PENDING}__init2(){this._handlers=[]}constructor(e){_t.prototype.__init.call(this),_t.prototype.__init2.call(this),_t.prototype.__init3.call(this),_t.prototype.__init4.call(this),_t.prototype.__init5.call(this),_t.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new _t((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(d){i(d)}},s=>{if(!n)i(s);else try{r(n(s))}catch(d){i(d)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new _t((n,r)=>{let i,s;return this.then(d=>{s=!1,i=d,e&&e()},d=>{s=!0,i=d,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init3(){this._resolve=e=>{this._setResult(Ln.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(Ln.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{if(this._state===Ln.PENDING){if(Nu(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===Ln.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Ln.RESOLVED&&n[1](this._value),this._state===Ln.REJECTED&&n[2](this._value),n[0]=!0)})}}}function yC(t){const e=[];function n(){return t===void 0||e.length<t}function r(d){return e.splice(e.indexOf(d),1)[0]}function i(d){if(!n())return Ga(new dt("Not adding Promise because buffer limit was reached."));const a=d();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(d){return new _t((a,o)=>{let c=e.length;if(!c)return a(!0);const h=setTimeout(()=>{d&&d>0&&a(!1)},d);e.forEach(l=>{Ur(l).then(()=>{--c||(clearTimeout(h),a(!0))},o)})})}return{$:e,add:i,drain:s}}function Zu(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const bC=["fatal","error","warning","log","info","debug"];function wC(t){return t==="warn"?"warning":bC.includes(t)?t:"log"}const xm=Ko(),Qu={nowSeconds:()=>Date.now()/1e3};function xC(){const{performance:t}=xm;if(!t||!t.now)return;const e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function _C(){try{return dC(module,"perf_hooks").performance}catch{return}}const Ju=hC()?_C():xC(),_m=Ju===void 0?Qu:{nowSeconds:()=>(Ju.timeOrigin+Ju.now())/1e3},Ka=Qu.nowSeconds.bind(Qu),Sm=_m.nowSeconds.bind(_m);(()=>{const{performance:t}=xm;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,d=t.timing&&t.timing.navigationStart,o=typeof d=="number"?Math.abs(d+n-r):e,c=o<e;return s||c?i<=o?t.timeOrigin:d:r})();function es(t,e=[]){return[t,e]}function SC(t,e){const[n,r]=t;return[n,[...r,e]]}function Cm(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function ef(t,e){return(e||new TextEncoder).encode(t)}function CC(t,e){const[n,r]=t;let i=JSON.stringify(n);function s(d){typeof i=="string"?i=typeof d=="string"?i+d:[ef(i,e),d]:i.push(typeof d=="string"?ef(d,e):d)}for(const d of r){const[a,o]=d;if(s(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)s(o);else{let c;try{c=JSON.stringify(o)}catch{c=JSON.stringify(ir(o))}s(c)}}return typeof i=="string"?i:TC(i)}function TC(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function kC(t,e){const n=typeof t.data=="string"?ef(t.data,e):t.data;return[Uu({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const EC={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Tm(t){return EC[t]}function km(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function OC(t,e,n,r){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&{dsn:ja(r)},...i&&{trace:Uu({...i})}}}function PC(t,e,n){const r=[{type:"client_report"},{timestamp:n||Ka(),discarded_events:t}];return es(e?{dsn:e}:{},[r])}const MC=60*1e3;function AC(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?MC:r-e}function DC(t,e){return t[e]||t.all||0}function RC(t,e,n=Date.now()){return DC(t,e)>n}function IC(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],d=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[o,c]=a.split(":",2),h=parseInt(o,10),l=(isNaN(h)?60:h)*1e3;if(!c)i.all=r+l;else for(const u of c.split(";"))i[u]=r+l}else d?i.all=r+AC(d,r):e===429&&(i.all=r+60*1e3);return i}const Em="production";function LC(t){const e=Sm(),n={sid:Fi(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>zC(n)};return t&&zi(n,t),n}function zi(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Sm(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Fi()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function FC(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),zi(t,n)}function zC(t){return Uu({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const NC=100;class Hr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const n=new Hr;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&zi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof Hr?n:this}return e instanceof Hr?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Ii(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,n){const r=typeof n=="number"?n:NC;if(r<=0)return this;const i={timestamp:Ka(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction;if(r){e.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const i=r.name;i&&(e.tags={transaction:i,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Om(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,n,r,i=0){return new _t((s,d)=>{const a=e[i];if(n===null||typeof a!="function")s(n);else{const o=a({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&o===null&&Te.log(`Event processor "${a.id}" dropped event`),Nu(o)?o.then(c=>this._notifyEventProcessors(e,c,r,i+1).then(s)).then(null,d):this._notifyEventProcessors(e,o,r,i+1).then(s).then(null,d)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?bm(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Om(){return ju("globalEventProcessors",()=>[])}function tf(t){Om().push(t)}const Pm=4,jC=100;class Mm{constructor(e,n=new Hr,r=Pm){this._version=r,this._stack=[{scope:n}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Hr.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Fi(),i=new Error("Sentry syntheticException");return this._withClient((s,d)=>{s.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},d)}),r}captureMessage(e,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Fi(),s=new Error(e);return this._withClient((d,a)=>{d.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Fi();return e.type||(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(e,{...n,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:d=jC}=i.getOptions&&i.getOptions()||{};if(d<=0)return;const o={timestamp:Ka(),...e},c=s?rm(()=>s(o,n)):o;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,d))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=Am(this);try{e(this)}finally{Am(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!r&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&FC(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=Em}=r&&r.getOptions()||{},{userAgent:d}=en.navigator||{},a=LC({release:i,environment:s,user:n.getUser(),...d&&{userAgent:d},...e}),o=n.getSession&&n.getSession();return o&&o.status==="ok"&&zi(o,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return Boolean(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){const{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){const i=qa().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function qa(){return en.__SENTRY__=en.__SENTRY__||{extensions:{},hub:void 0},en}function Am(t){const e=qa(),n=nf(e);return Dm(e,t),n}function rt(){const t=qa();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return BC(t)}function BC(t=qa()){return(!VC(t)||nf(t).isOlderThan(Pm))&&Dm(t,new Mm),nf(t)}function VC(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function nf(t){return ju("hub",()=>new Mm,t)}function Dm(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function $C(t,e){return rt().captureException(t,{captureContext:e})}function UC(t){rt().withScope(t)}const HC="7";function WC(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function YC(t){return`${WC(t)}${t.projectId}/envelope/`}function XC(t,e){return WS({sentry_key:t.publicKey,sentry_version:HC,...e&&{sentry_client:`${e.name}/${e.version}`}})}function GC(t,e={}){const n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${YC(t)}?${XC(t,r)}`}function KC(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function qC(t,e,n,r){const i=km(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:ja(e)}},d="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t];return es(s,[d])}function ZC(t,e,n,r){const i=km(n),s=t.type&&t.type!=="replay_event"?t.type:"event";KC(t,n&&n.sdk);const d=OC(t,i,r,e);return delete t.sdkProcessingMetadata,es(d,[[{type:s},t]])}const Rm=[];function QC(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.keys(e).map(n=>e[n])}function JC(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(d=>{d.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=bm(n(e)):r=e;const i=QC(r),s=tT(i,d=>d.name==="Debug");if(s!==-1){const[d]=i.splice(s,1);i.push(d)}return i}function eT(t){const e={};return t.forEach(n=>{n&&Im(n,e)}),e}function Im(t,e){e[t.name]=t,Rm.indexOf(t.name)===-1&&(t.setupOnce(tf,rt),Rm.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log(`Integration installed: ${t.name}`))}function tT(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function nT(t,e,n,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=t,d={...e,event_id:e.event_id||n.event_id||Fi(),timestamp:e.timestamp||Ka()},a=n.integrations||t.integrations.map(h=>h.name);rT(d,t),oT(d,a),e.type===void 0&&iT(d,t.stackParser);let o=r;n.captureContext&&(o=Hr.clone(o).update(n.captureContext));let c=Ur(d);if(o){if(o.getAttachments){const h=[...n.attachments||[],...o.getAttachments()];h.length&&(n.attachments=h)}c=o.applyToEvent(d,n)}return c.then(h=>typeof i=="number"&&i>0?sT(h,i,s):h)}function rT(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?n:Em),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&i!==void 0&&(t.dist=i),t.message&&(t.message=qo(t.message,s));const d=t.exception&&t.exception.values&&t.exception.values[0];d&&d.value&&(d.value=qo(d.value,s));const a=t.request;a&&a.url&&(a.url=qo(a.url,s))}const Lm=new WeakMap;function iT(t,e){const n=en._sentryDebugIds;if(!n)return;let r;const i=Lm.get(e);i?r=i:(r=new Map,Lm.set(e,r));const s=Object.keys(n).reduce((o,c)=>{let h;const l=r.get(c);l?h=l:(h=e(c),r.set(c,h));for(let u=h.length-1;u>=0;u--){const f=h[u];if(f.filename){o[f.filename]=n[c];break}}return o},{}),d=new Set;try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(c=>{c.filename&&d.add(c.filename)})})}catch{}t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const a=t.debug_meta.images;d.forEach(o=>{s[o]&&a.push({type:"sourcemap",code_file:o,debug_id:s[o]})})}function oT(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function sT(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:ir(i.data,e,n)}}))},...t.user&&{user:ir(t.user,e,n)},...t.contexts&&{contexts:ir(t.contexts,e,n)},...t.extra&&{extra:ir(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=ir(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>(i.data&&(i.data=ir(i.data,e,n)),i))),r}const Fm="Not capturing exception because it's already been captured.";class Wr{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(Wr.prototype.__init.call(this),Wr.prototype.__init2.call(this),Wr.prototype.__init3.call(this),Wr.prototype.__init4.call(this),Wr.prototype.__init5.call(this),this._options=e,e.dsn){this._dsn=$S(e.dsn);const n=GC(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("No DSN provided, client will not do anything.")}captureException(e,n,r){if(ym(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log(Fm);return}let i=n&&n.event_id;return this._process(this.eventFromException(e,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(e,n,r,i){let s=r&&r.event_id;const d=tm(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(d.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(e,n,r){if(n&&n.originalException&&ym(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log(Fm);return}let i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(s=>{i=s})),i}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),zi(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i)):Ur(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=eT(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Im(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let r=ZC(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=SC(r,kC(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}}sendSession(e){if(this._dsn){const n=qC(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const o of s){const c=o.mechanism;if(c&&c.handled===!1){r=!0;break}}}const d=e.status==="ok";(d&&e.errors===0||d&&r)&&(zi(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new _t(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,r){const i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),nT(i,e,n,r)}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const s=i;s.logLevel==="log"?Te.log(s.message):Te.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i;if(!this._isEnabled())return Ga(new dt("SDK not enabled, will not capture event.","log"));const d=Nm(e),a=zm(e),o=e.type||"error",c=`before send for type \`${o}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),Ga(new dt(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const h=o==="replay_event"?"replay":o;return this._prepareEvent(e,n,r).then(l=>{if(l===null)throw this.recordDroppedEvent("event_processor",h,e),new dt("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return l;const f=lT(i,l,n);return aT(f,c)}).then(l=>{if(l===null)throw this.recordDroppedEvent("before_send",h,e),new dt(`${c} returned \`null\`, will not send event.`,"log");const u=r&&r.getSession();!d&&u&&this._updateSessionFromEvent(u,l);const f=l.transaction_info;if(d&&f&&l.transaction!==e.transaction){const p="custom";l.transaction_info={...f,source:p}}return this.sendEvent(l,n),l}).then(null,l=>{throw l instanceof dt?l:(this.captureException(l,{data:{__sentry__:!0},originalException:l}),new dt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${l}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:e[n]}})}}function aT(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Nu(t))return t.then(r=>{if(!Ii(r)&&r!==null)throw new dt(n);return r},r=>{throw new dt(`${e} rejected with ${r}`)});if(!Ii(t)&&t!==null)throw new dt(n);return t}function lT(t,e,n){const{beforeSend:r,beforeSendTransaction:i}=t;return zm(e)&&r?r(e,n):Nm(e)&&i?i(e,n):e}function zm(t){return t.type===void 0}function Nm(t){return t.type==="transaction"}function cT(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Te.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=rt();n.getScope().update(e.initialScope);const i=new t(e);n.bindClient(i)}const uT=30;function jm(t,e,n=yC(t.bufferSize||uT)){let r={};const i=d=>n.drain(d);function s(d){const a=[];if(Cm(d,(l,u)=>{const f=Tm(u);if(RC(r,f)){const p=Bm(l,u);t.recordDroppedEvent("ratelimit_backoff",f,p)}else a.push(l)}),a.length===0)return Ur();const o=es(d[0],a),c=l=>{Cm(o,(u,f)=>{const p=Bm(u,f);t.recordDroppedEvent(l,Tm(f),p)})},h=()=>e({body:CC(o,t.textEncoder)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=IC(r,l),l),l=>{throw c("network_error"),l});return n.add(h).then(l=>l,l=>{if(l instanceof dt)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error("Skipped sending event because buffer is full."),c("queue_overflow"),Ur();throw l})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function Bm(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}const Za="7.52.1";let Vm;class ts{constructor(){ts.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=ts.id}setupOnce(){Vm=Function.prototype.toString;try{Function.prototype.toString=function(...e){const n=$u(this)||this;return Vm.apply(n,e)}}catch{}}}ts.__initStatic();const fT=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class Ni{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Ni.id}constructor(e={}){this._options=e,Ni.prototype.__init.call(this)}setupOnce(e,n){const r=i=>{const s=n();if(s){const d=s.getIntegration(Ni);if(d){const a=s.getClient(),o=a?a.getOptions():{},c=hT(d._options,o);return dT(i,c)?null:i}}return i};r.id=this.name,e(r)}}Ni.__initStatic();function hT(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...fT],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function dT(t,e){return e.ignoreInternal&&bT(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Event dropped due to being internal Sentry Error.
Event: ${rr(t)}`),!0):pT(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${rr(t)}`),!0):gT(t,e.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${rr(t)}`),!0):mT(t,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${rr(t)}.
Url: ${Qa(t)}`),!0):vT(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${rr(t)}.
Url: ${Qa(t)}`),!0)}function pT(t,e){return t.type||!e||!e.length?!1:yT(t).some(n=>Va(n,e))}function gT(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?Va(n,e):!1}function mT(t,e){if(!e||!e.length)return!1;const n=Qa(t);return n?Va(n,e):!1}function vT(t,e){if(!e||!e.length)return!0;const n=Qa(t);return n?Va(n,e):!0}function yT(t){if(t.message)return[t.message];if(t.exception){const{values:e}=t.exception;try{const{type:n="",value:r=""}=e&&e[e.length-1]||{};return[`${r}`,`${n}: ${r}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error(`Cannot extract message for event ${rr(t)}`),[]}}return[]}function bT(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function wT(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Qa(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?wT(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.error(`Cannot extract url for event ${rr(t)}`),null}}const Ie=en;let rf=0;function $m(){return rf>0}function xT(){rf++,setTimeout(()=>{rf--})}function ji(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return i;if($u(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(d=>ji(d,e));return t.apply(this,s)}catch(s){throw xT(),UC(d=>{d.addEventProcessor(a=>(e.mechanism&&(Ku(a,void 0,void 0),Jo(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),$C(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}sm(r,t),Vu(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function Um(t,e){const n=sf(t,e),r={type:e&&e.name,value:TT(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function _T(t,e,n,r){const s=rt().getClient(),d=s&&s.getOptions().normalizeDepth,a={exception:{values:[{type:zu(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${YS(e)}`}]},extra:{__serialized__:wm(e,d)}};if(n){const o=sf(t,n);o.length&&(a.exception.values[0].stacktrace={frames:o})}return a}function of(t,e){return{exception:{values:[Um(t,e)]}}}function sf(t,e){const n=e.stacktrace||e.stack||"",r=CT(e);try{return t(n,r)}catch{}return[]}const ST=/Minified React error #\d+;/i;function CT(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(ST.test(t.message))return 1}return 0}function TT(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function kT(t,e,n,r){const i=n&&n.syntheticException||void 0,s=af(t,e,i,r);return Jo(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Ur(s)}function ET(t,e,n="info",r,i){const s=r&&r.syntheticException||void 0,d=lf(t,e,s,i);return d.level=n,r&&r.event_id&&(d.event_id=r.event_id),Ur(d)}function af(t,e,n,r,i){let s;if(Jg(e)&&e.error)return of(t,e.error);if(em(e)||PS(e)){const d=e;if("stack"in e)s=of(t,e);else{const a=d.name||(em(d)?"DOMError":"DOMException"),o=d.message?`${a}: ${d.message}`:a;s=lf(t,o,n,r),Ku(s,o)}return"code"in d&&(s.tags={...s.tags,"DOMException.code":`${d.code}`}),s}return Qg(e)?of(t,e):Ii(e)||zu(e)?(s=_T(t,e,n,i),Jo(s,{synthetic:!0}),s):(s=lf(t,e,n,r),Ku(s,`${e}`,void 0),Jo(s,{synthetic:!0}),s)}function lf(t,e,n,r){const i={message:e};if(r&&n){const s=sf(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}return i}const Ja=1024,Hm="Breadcrumbs";class ns{static __initStatic(){this.id=Hm}__init(){this.name=ns.id}constructor(e){ns.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&nr("console",PT),this.options.dom&&nr("dom",OT(this.options.dom)),this.options.xhr&&nr("xhr",MT),this.options.fetch&&nr("fetch",AT),this.options.history&&nr("history",DT)}addSentryBreadcrumb(e){this.options.sentry&&rt().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:rr(e)},{event:e})}}ns.__initStatic();function OT(t){function e(n){let r,i=typeof t=="object"?t.serializeAttribute:void 0,s=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;s&&s>Ja&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn(`\`dom.maxStringLength\` cannot exceed ${Ja}, but a value of ${s} was configured. Sentry will use ${Ja} instead.`),s=Ja),typeof i=="string"&&(i=[i]);try{const d=n.event;r=RT(d)?Bu(d.target,{keyAttrs:i,maxStringLength:s}):Bu(d,{keyAttrs:i,maxStringLength:s})}catch{r="<unknown>"}r.length!==0&&rt().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return e}function PT(t){for(let n=0;n<t.args.length;n++)if(t.args[n]==="ref=Ref<"){t.args[n+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:wC(t.level),message:om(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${om(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;rt().addBreadcrumb(e,{input:t.args,level:t.level})}function MT(t){const{startTimestamp:e,endTimestamp:n}=t,r=t.xhr[Zo];if(!e||!n||!r)return;const{method:i,url:s,status_code:d,body:a}=r,o={method:i,url:s,status_code:d},c={xhr:t.xhr,input:a,startTimestamp:e,endTimestamp:n};rt().addBreadcrumb({category:"xhr",data:o,type:"http"},c)}function AT(t){const{startTimestamp:e,endTimestamp:n}=t;if(!!n&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const r=t.fetchData,i={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};rt().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{const r={...t.fetchData,status_code:t.response&&t.response.status},i={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};rt().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}function DT(t){let e=t.from,n=t.to;const r=Zu(Ie.location.href);let i=Zu(e);const s=Zu(n);i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(n=s.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),rt().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}function RT(t){return t&&!!t.target}function IT(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:ja(r)}},s=LT(t);return es(i,[s])}function LT(t){return[{type:"user_report"},t]}class FT extends Wr{constructor(e){const n=Ie.SENTRY_SDK_SOURCE||fC();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Za}],version:Za},super(e),e.sendClientReports&&Ie.document&&Ie.document.addEventListener("visibilitychange",()=>{Ie.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return kT(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return ET(this._options.stackParser,e,n,r,this._options.attachStacktrace)}sendEvent(e,n){const r=this.getIntegrationById(Hm);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,n)}captureUserFeedback(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("SDK not enabled, will not capture user feedback.");return}const n=IT(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log("Sending outcomes:",e);const n=PC(e,this._options.tunnel&&ja(this._dsn));this._sendEnvelope(n)}}let rs;function zT(){if(rs)return rs;if(Xu(Ie.fetch))return rs=Ie.fetch.bind(Ie);const t=Ie.document;let e=Ie.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return rs=e.bind(Ie)}function NT(){rs=void 0}function jT(t,e=zT()){let n=0,r=0;function i(s){const d=s.body.length;n+=d,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,a).then(o=>(n-=d,r--,{statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return NT(),n-=d,r--,Ga(o)}}return jm(t,i)}const BT=4;function VT(t){function e(n){return new _t((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===BT&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",t.url);for(const d in t.headers)Object.prototype.hasOwnProperty.call(t.headers,d)&&s.setRequestHeader(d,t.headers[d]);s.send(n.body)})}return jm(t,e)}const el="?",$T=30,UT=40,HT=50;function cf(t,e,n,r){const i={filename:t,function:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const WT=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,YT=/\((\S*)(?::(\d+))(?::(\d+))\)/,XT=[$T,t=>{const e=WT.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const s=YT.exec(e[2]);s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3])}const[r,i]=Wm(e[1]||el,e[2]);return cf(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],GT=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,KT=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qT=[HT,t=>{const e=GT.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=KT.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||el;return[i,r]=Wm(i,r),cf(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],ZT=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,QT=hm(...[XT,qT,[UT,t=>{const e=ZT.exec(t);return e?cf(e[2],e[1]||el,+e[3],e[4]?+e[4]:void 0):void 0}]]),Wm=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:el,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};class or{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=or.id}__init2(){this._installFunc={onerror:JT,onunhandledrejection:ek}}constructor(e){or.prototype.__init.call(this),or.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const r=this._installFunc[n];r&&e[n]&&(rk(n),r(),this._installFunc[n]=void 0)}}}or.__initStatic();function JT(){nr("error",t=>{const[e,n,r]=Gm();if(!e.getIntegration(or))return;const{msg:i,url:s,line:d,column:a,error:o}=t;if($m()||o&&o.__sentry_own_request__)return;const c=o===void 0&&$r(i)?nk(i,s,d,a):Ym(af(n,o||i,void 0,r,!1),s,d,a);c.level="error",Xm(e,o,c,"onerror")})}function ek(){nr("unhandledrejection",t=>{const[e,n,r]=Gm();if(!e.getIntegration(or))return;let i=t;try{"reason"in t?i=t.reason:"detail"in t&&"reason"in t.detail&&(i=t.detail.reason)}catch{}if($m()||i&&i.__sentry_own_request__)return!0;const s=tm(i)?tk(i):af(n,i,void 0,r,!0);s.level="error",Xm(e,i,s,"onunhandledrejection")})}function tk(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function nk(t,e,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=Jg(t)?t.message:t,d="Error";const a=s.match(i);return a&&(d=a[1],s=a[2]),Ym({exception:{values:[{type:d,value:s}]}},e,n,r)}function Ym(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],d=s[0]=s[0]||{},a=d.stacktrace=d.stacktrace||{},o=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,l=$r(e)&&e.length>0?e:zS();return o.length===0&&o.push({colno:c,filename:l,function:"?",in_app:!0,lineno:h}),t}function rk(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.log(`Global Handler attached: ${t}`)}function Xm(t,e,n,r){Jo(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function Gm(){const t=rt(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}const ik=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class is{static __initStatic(){this.id="TryCatch"}__init(){this.name=is.id}constructor(e){is.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&at(Ie,"setTimeout",Km),this._options.setInterval&&at(Ie,"setInterval",Km),this._options.requestAnimationFrame&&at(Ie,"requestAnimationFrame",ok),this._options.XMLHttpRequest&&"XMLHttpRequest"in Ie&&at(XMLHttpRequest.prototype,"send",sk);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:ik).forEach(ak)}}is.__initStatic();function Km(t){return function(...e){const n=e[0];return e[0]=ji(n,{mechanism:{data:{function:tr(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function ok(t){return function(e){return t.apply(this,[ji(e,{mechanism:{data:{function:"requestAnimationFrame",handler:tr(t)},handled:!0,type:"instrument"}})])}}function sk(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&at(n,i,function(s){const d={mechanism:{data:{function:i,handler:tr(s)},handled:!0,type:"instrument"}},a=$u(s);return a&&(d.mechanism.data.handler=tr(a)),ji(s,d)})}),t.apply(this,e)}}function ak(t){const e=Ie,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(at(n,"addEventListener",function(r){return function(i,s,d){try{typeof s.handleEvent=="function"&&(s.handleEvent=ji(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:tr(s),target:t},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,ji(s,{mechanism:{data:{function:"addEventListener",handler:tr(s),target:t},handled:!0,type:"instrument"}}),d])}}),at(n,"removeEventListener",function(r){return function(i,s,d){const a=s;try{const o=a&&a.__sentry_wrapped__;o&&r.call(this,i,o,d)}catch{}return r.call(this,i,a,d)}}))}const lk="cause",ck=5;class Bi{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Bi.id}constructor(e={}){Bi.prototype.__init.call(this),this._key=e.key||lk,this._limit=e.limit||ck}setupOnce(){const e=rt().getClient();!e||tf((n,r)=>{const i=rt().getIntegration(Bi);return i?uk(e.getOptions().stackParser,i._key,i._limit,n,r):n})}}Bi.__initStatic();function uk(t,e,n,r,i){if(!r.exception||!r.exception.values||!i||!Li(i.originalException,Error))return r;const s=qm(t,n,i.originalException,e);return r.exception.values=[...s,...r.exception.values],r}function qm(t,e,n,r,i=[]){if(!Li(n[r],Error)||i.length+1>=e)return i;const s=Um(t,n[r]);return qm(t,e,n[r],r,[s,...i])}class Vi{constructor(){Vi.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Vi.id}setupOnce(){tf(e=>{if(rt().getIntegration(Vi)){if(!Ie.navigator&&!Ie.location&&!Ie.document)return e;const n=e.request&&e.request.url||Ie.location&&Ie.location.href,{referrer:r}=Ie.document||{},{userAgent:i}=Ie.navigator||{},s={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},d={...e.request,...n&&{url:n},headers:s};return{...e,request:d}}return e})}}Vi.__initStatic();class $i{constructor(){$i.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=$i.id}setupOnce(e,n){const r=i=>{if(i.type)return i;const s=n().getIntegration($i);if(s){try{if(fk(i,s._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return s._previousEvent=i}return s._previousEvent=i}return i};r.id=this.name,e(r)}}$i.__initStatic();function fk(t,e){return e?!!(hk(t,e)||dk(t,e)):!1}function hk(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Qm(t,e)||!Zm(t,e))}function dk(t,e){const n=Jm(e),r=Jm(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Qm(t,e)||!Zm(t,e))}function Zm(t,e){let n=ev(t),r=ev(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],d=n[i];if(s.filename!==d.filename||s.lineno!==d.lineno||s.colno!==d.colno||s.function!==d.function)return!1}return!0}function Qm(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Jm(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ev(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const pk=[new Ni,new ts,new is,new ns,new or,new Bi,new $i,new Vi];function gk(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=pk),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),Ie.SENTRY_RELEASE&&Ie.SENTRY_RELEASE.id&&(t.release=Ie.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:XS(t.stackParser||QT),integrations:JC(t),transport:t.transport||(dm()?jT:VT)};cT(FT,e),t.autoSessionTracking&&mk()}function tv(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function mk(){if(typeof Ie.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Te.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const t=rt();!t.captureSession||(tv(t),nr("history",({from:e,to:n})=>{e===void 0||e===n||tv(rt())}))}function vk(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.react",packages:[{name:"npm:@sentry/react",version:Za}],version:Za},gk(t)}var tl={exports:{}},nl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=E.exports,bk=Symbol.for("react.element"),wk=Symbol.for("react.fragment"),xk=Object.prototype.hasOwnProperty,_k=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sk={key:!0,ref:!0,__self:!0,__source:!0};function nv(t,e,n){var r,i={},s=null,d=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(d=e.ref);for(r in e)xk.call(e,r)&&!Sk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bk,type:t,key:s,ref:d,props:i,_owner:_k.current}}nl.Fragment=wk,nl.jsx=nv,nl.jsxs=nv,function(t){t.exports=nl}(tl);const rl=tl.exports.Fragment,_=tl.exports.jsx,oe=tl.exports.jsxs;var uf=(t=>(t.INLINE="inline",t.OVERLAY="overlay",t))(uf||{}),rv=(t=>(t.TOP="top",t.BOTTOM="bottom",t.HIDDEN="",t))(rv||{});const Ck=[{name:"circle",type:"Circle"},{name:"square",type:"Rect",options:{lockUniScaling:!1}},{name:"triangle",type:"Triangle"},{name:"ellipse",type:"Ellipse",options:{lockUniScaling:!1}},{name:"Arrow #1",type:"Path",options:{path:"M 294.9 16.4 l 15.7 42.2 c -171.4 70.3 -294 242.3 -289.1 437.4 l 14.7 -1 c 9.1 -0.6 18.1 -1.2 27.1 -1.9 l 14.7 -1 c -4.3 -170.1 102.5 -320 252 -381.3 l 15.7 42.2 c 34.7 -40.5 83.1 -76.6 144.8 -99.8 c -58.1 -26.2 -124.9 -39.6 -195.6 -36.8 z"}},{name:"Arrow #2",type:"Path",options:{path:"M 16 248.4 v 14.9 h 447.5 l -93.2 82.5 l 11.9 10.5 l 113.8 -100.2 l -113.6 -100.4 l -11.8 10.5 l 92.9 82.2 z"}},{name:"Arrow #3",type:"Path",options:{path:"M 496 256 l -118.6 -66 v 40.8 h -361.4 v 50.4 h 361.4 v 40.8 l 118.6 -66 z"}},{name:"Line",type:"Path",options:{path:"M 16 256 h 480",strokeWidth:10,stroke:"#000",padding:10}},{name:"Star",type:"Path",options:{path:"M 256 406.3 l 148.3 78 l -28.3 -165.2 l 120 -117 l -165.8 -24.1 l -74.2 -150.3 l -74.2 150.3 l -165.8 24.1 l 120 117 l -28.3 165.2 z"}},{name:"Polygon",type:"Path",options:{path:"M 256 19.6 l 156.6 57.1 l 83.4 144.3 l -28.9 164.2 l -127.7 107.2 h -166.8 l -127.7 -107.2 l -28.9 -164.2 l 83.4 -144.3 z"}},{name:"Badge",type:"Path",options:{path:"M 257.3 16.2 s -148 58.2 -204.4 81.4 c 0 75.7 -16.8 303.5 204.4 398.2 c 218.7 -94.6 201.9 -322.4 201.9 -398.2 c -62.1 -23.6 -201.9 -81.4 -201.9 -81.4 z"}}],Tk=["afro-1","afro","agent","alien-1","alien","angel","angry-1","angry-2","angry-3","angry-4","angry-5","angry","arguing","arrogant","asian-1","asian","avatar","baby-1","baby-2","baby","bully","burglar","businessman","cheeky-1","cheeky","clown","confused-1","confused-2","confused-3","confused","creepy","crying-1","crying-2","crying-3","crying","dazed-1","dazed-2","dazed-3","dazed","dead-1","dead-2","dead-3","dead-4","dead-5","dead-6","dead","desperate-1","desperate","detective","dissapointment","doctor","drunk","dumb","emo-1","emo-2","emo","emoticon","evil","faint-1","faint","flirt-1","flirt-2","flirt","flirty","gangster","geek-1","geek","gentleman-1","gentleman-2","gentleman-3","gentleman-4","gentleman","ginger","girl-1","girl","goofy-1","goofy-2","goofy-3","goofy-4","goofy","grubby-1","grubby","happy-1","happy-10","happy-11","happy-12","happy-13","happy-14","happy-15","happy-16","happy-2","happy-3","happy-4","happy-5","happy-6","happy-7","happy-8","happy-9","happy","harry-potter","heisenberg","hipster-1","hipster-2","hipster","in-love-1","in-love-2","in-love-3","in-love-4","in-love-5","in-love-6","in-love","japan","jew","joyful-1","joyful-2","joyful","kiss-1","kiss-2","kiss-3","kiss-4","kiss","laughing-1","laughing-2","laughing-3","laughing","listening","love","manly","miserly-1","miserly","nerd-1","nerd-2","nerd-3","nerd-4","nerd","ninja","pirate-1","pirate-2","pirate","punk-1","punk-2","punk","rapper","relieved","rich-1","rich-2","rich","rockstar","sad-1","sad-2","sad-3","sad-4","sad-5","sad-6","sad","scared-1","scared-2","scared-3","scared","sceptic-1","sceptic-2","sceptic-3","sceptic-4","sceptic-5","sceptic-6","sceptic-7","sceptic","secret","shocked-1","shocked-2","shocked-3","shocked","sick-1","sick-2","sick-3","sick-4","sick","silent","skeleton","smile","smiling-1","smiling","smoked","smug-1","smug-2","smug-3","smug-4","smug-5","smug-6","smug","sporty","stunned","superhero-1","superhero-2","superhero-3","superhero-4","superhero","surprised-1","surprised","thinking","tired-1","tired-2","tired-3","tired","tough-1","tough","trendy","vampire-1","vampire","wink-1","wink-2","wink","winking-1","winking","yawning-1","yawning-2","yawning-3","yawning","yelling","zombie"];function se(t,e){return{...e,message:t}}const kk=[{name:"emoticons",list:Tk,type:"svg",thumbnailUrl:"images/stickers/categories/emoticon.svg"},{name:"doodles",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/doodles.svg"},{name:"landmarks",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/landmark.svg",invertPreview:!0},{name:"bubbles",items:104,type:"png",thumbnailUrl:"images/stickers/categories/speech-bubble.svg"},{name:"transportation",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/transportation.svg",invertPreview:!0},{name:"beach",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/beach.svg",invertPreview:!0}],Ek={emoticons:se("Emoticons"),doodles:se("Doodles"),landmarks:se("Landmarks"),bubbles:se("Bubbles"),transportation:se("Transportation"),beach:se("Beach")},ff={fill:"#1565C0",opacity:1,backgroundColor:null,strokeWidth:.05,stroke:"#000"},Ok=["PencilBrush","EraserBrush","SprayBrush","CircleBrush","DiamondBrush","VLineBrush","HLineBrush","SquareBrush"],iv=[1,8,15,20,25];var il=(t=>(t.DARK="dark",t.LIGHT="light",t))(il||{});const hf=[{name:il.LIGHT,colors:{"--be-foreground-base":"0 0 0","--be-primary-light":"191 219 254","--be-primary":"59 130 246","--be-primary-dark":"37 99 235","--be-on-primary":"255 255 255","--be-danger":"179 38 30","--be-on-danger":"255 255 255","--be-background":"255 255 255","--be-background-alt":"250 250 250","--be-paper":"255 255 255","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"26%","--be-hover-opacity":"4%","--be-focus-opacity":"12%","--be-selected-opacity":"8%","--be-text-main-opacity":"87%","--be-text-muted-opacity":"60%","--be-divider-opacity":"12%"}},{name:il.DARK,isDark:!0,colors:{"--be-foreground-base":"255 255 255","--be-primary-light":"239 246 255","--be-primary":"191 219 254","--be-primary-dark":"147 197 253","--be-on-primary":"56 30 114","--be-danger":"242 184 181","--be-on-danger":"96 20 16","--be-background":"20 21 23","--be-background-alt":"26 27 30","--be-paper":"44 46 51","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"30%","--be-hover-opacity":"8%","--be-focus-opacity":"12%","--be-selected-opacity":"16%","--be-text-main-opacity":"100%","--be-text-muted-opacity":"70%","--be-divider-opacity":"12%"}}];var Me=(t=>(t.FILTER="filter",t.RESIZE="resize",t.CROP="crop",t.DRAW="draw",t.TEXT="text",t.SHAPES="shapes",t.STICKERS="stickers",t.FRAME="frame",t.CORNERS="corners",t.MERGE="merge",t))(Me||{});function ov(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ov(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function fe(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=ov(t))&&(r&&(r+=" "),r+=e);return r}const Pk=E.exports.forwardRef((t,e)=>{const{attr:n,size:r,title:i,className:s,color:d,style:a,children:o,viewBox:c,width:h,height:l,...u}=t;return oe("svg",{"aria-hidden":!i,focusable:!1,xmlns:"http://www.w3.org/2000/svg",viewBox:c||"0 0 24 24",...n,...u,className:fe("svg-icon",s,Mk(r)),style:{color:d,...a},ref:e,height:l||"1em",width:h||"1em",children:[i&&_("title",{children:i}),o]})});function Mk(t){switch(t){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-md";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return t}}function ye(t,e="",n){const r=(i,s)=>_(Pk,{"data-testid":`${e}Icon`,ref:s,viewBox:n,...i,size:i.size||"md",children:t});return he.memo(he.forwardRef(r))}function Ak(t,e=""){const n=sv(t);return ye(n,e)}function sv(t){return(t==null?void 0:t.map)&&t.map((e,n)=>he.createElement(e.tag,{key:n,...e.attr},sv(e.child)))}const av=ye(_("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),Dk=ye(_("path",{d:"M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z"}),"PhotoSizeSelectLargeOutlined"),Rk=ye(_("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"}),"CropOutlined"),Ik=ye(_("path",{d:"M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"}),"TextFieldsOutlined"),Lk=ye(_("path",{d:"M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z"}),"ExtensionOutlined"),Fk=ye(_("path",{d:"M10.25 13c0 .69-.56 1.25-1.25 1.25S7.75 13.69 7.75 13s.56-1.25 1.25-1.25 1.25.56 1.25 1.25zM15 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm7 .25c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zM10.66 4.12C12.06 6.44 14.6 8 17.5 8c.46 0 .91-.05 1.34-.12C17.44 5.56 14.9 4 12 4c-.46 0-.91.05-1.34.12zM4.42 9.47c1.71-.97 3.03-2.55 3.66-4.44C6.37 6 5.05 7.58 4.42 9.47zM20 12c0-.78-.12-1.53-.33-2.24-.7.15-1.42.24-2.17.24-3.13 0-5.92-1.44-7.76-3.69C8.69 8.87 6.6 10.88 4 11.86c.01.04 0 .09 0 .14 0 4.41 3.59 8 8 8s8-3.59 8-8z"}),"FaceOutlined"),zk=ye(_("path",{d:"M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM6 18h12V8H6v10zm2-8h8v6H8v-6z"}),"FilterFramesOutlined"),Nk=ye(_("path",{d:"M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41 6.41 21z"}),"MergeOutlined"),jk=ye(_("path",{d:"M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"}),"RoundedCornerOutlined"),lv=ye(_("path",{d:"M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"PhotoLibraryOutlined"),cv=ye(_("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"}),"HistoryOutlined"),Bk=ye([_("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z"},"0"),_("circle",{cx:"11",cy:"9",r:"1"},"1"),_("path",{d:"M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"},"2")],"StyleOutlined"),Vk=ye(_("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),$k=ye(_("path",{d:"M18.85,10.39l1.06-1.06c0.78-0.78,0.78-2.05,0-2.83L18.5,5.09c-0.78-0.78-2.05-0.78-2.83,0l-1.06,1.06L18.85,10.39z M14.61,11.81L7.41,19H6v-1.41l7.19-7.19L14.61,11.81z M13.19,7.56L4,16.76V21h4.24l9.19-9.19L13.19,7.56L13.19,7.56z M19,17.5 c0,2.19-2.54,3.5-5,3.5c-0.55,0-1-0.45-1-1s0.45-1,1-1c1.54,0,3-0.73,3-1.5c0-0.47-0.48-0.87-1.23-1.2l1.48-1.48 C18.32,15.45,19,16.29,19,17.5z M4.58,13.35C3.61,12.79,3,12.06,3,11c0-1.8,1.89-2.63,3.56-3.36C7.59,7.18,9,6.56,9,6 c0-0.41-0.78-1-2-1C5.74,5,5.2,5.61,5.17,5.64C4.82,6.05,4.19,6.1,3.77,5.76C3.36,5.42,3.28,4.81,3.62,4.38C3.73,4.24,4.76,3,7,3 c2.24,0,4,1.32,4,3c0,1.87-1.93,2.72-3.64,3.47C6.42,9.88,5,10.5,5,11c0,0.31,0.43,0.6,1.07,0.86L4.58,13.35z"}),"Draw"),Uk=ye(_("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3 2 12h3v8h6v-6h2v6h6v-8h3L12 3z"}),"HomeOutlined"),sr={[Me.FILTER]:{name:se("Applied Filters"),icon:av},[Me.RESIZE]:{name:se("Resized Image"),icon:Dk},[Me.CROP]:{name:se("Cropped Image"),icon:Rk},[Me.DRAW]:{name:se("Added Drawing"),icon:$k},[Me.TEXT]:{name:se("Added Text"),icon:Ik},[Me.SHAPES]:{name:se("Added Shape"),icon:Lk},[Me.STICKERS]:{name:se("Added Sticker"),icon:Fk},[Me.FRAME]:{name:se("Added Frame"),icon:zk},[Me.MERGE]:{name:se("Merged Objects"),icon:Nk},[Me.CORNERS]:{name:se("Rounded Corner"),icon:jk},bgImage:{name:se("Replaced Background Image"),icon:lv},overlayImage:{name:se("Added Image"),icon:lv},initial:{name:se("Initial"),icon:Uk},loadedState:{name:se("Loaded State"),icon:cv},objectStyle:{name:se("Changed Style"),icon:Bk},deletedObject:{name:se("Deleted object"),icon:Vk}},Hk=Object.values(Me).map(t=>({name:t,icon:sr[t].icon,action:t===Me.MERGE?e=>{e.tools.merge.apply()}:t})),Wk={filter:se("Filter"),resize:se("Resize"),crop:se("Crop"),draw:se("Draw"),text:se("Text"),shapes:se("Shapes"),Stickers:se("Stickers"),frame:se("Frame"),corners:se("Corners"),merge:se("Merge")},Yk=ye(_("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),Xk={name:"photalius",version:"3.0.4",main:"dist/photalius.umd.js",module:"dist/photalius.es.js",types:"dist/types/src/photalius.d.ts",private:!0,exports:{".":{import:"./dist/photalius.es.js",require:"./dist/photalius.umd.js"}},files:["dist"],scripts:{dev:"vite --host",build:"vite build && npm run build-umd && npm run types && npm run build-cc",types:"tsc --skipLibCheck --emitDeclarationOnly --noEmit false --declarationMap false","build-umd":"vite build --config scripts/vite-umd.config.ts","build-cc":"./scripts/build-cc.sh",serve:"vite preview",extract:"node ./scripts/extract-translations.js"},dependencies:{"@floating-ui/react-dom":"^1.0.0","@internationalized/date":"^3.0.1","@internationalized/number":"^3.0.3","@react-aria/focus":"3.7.0","@react-aria/interactions":"^3.11.0","@react-aria/overlays":"^3.10.1","@react-aria/ssr":"^3.3.0","@react-aria/utils":"^3.15.0","@react-stately/color":"^3.3.0","@react-stately/utils":"^3.5.1","@sentry/react":"^7.43.0","@sentry/tracing":"^7.43.0","@tailwindcss/container-queries":"^0.1.1","@tanstack/react-query":"^4.3.4","@tanstack/react-virtual":"^3.0.0-beta.34","@use-gesture/react":"^10.2.20",axios:"^0.27.2","axios-retry":"^3.3.1",clsx:"^1.2.1",color:"^4.2.3","deep-object-diff":"^1.1.7",deepmerge:"^4.2.2","dot-object":"^2.1.4",fabric:"^5.2.4","file-saver":"^2.0.5","framer-motion":"^10.8.4",immer:"^9.0.15","linkify-string":"^4.1.0","mime-match":"^1.0.2","nano-memoize":"^1.3.0",nanoid:"^4.0.0","number-precision":"^1.5.1",react:">=18.2.0","react-ace":"^10.1.0","react-colorful":"^5.6.1","react-dom":">=18.2.0","react-hook-form":"^7.36.1","react-merge-refs":"^2.0.1","react-router-dom":"^6.4.1","react-textarea-autosize":"^8.3.3","react-use-clipboard":"^1.0.7","react-use-cookie":"^1.4.0",slugify:"^1.6.5","style-inject":"^0.3.0","tus-js-client":"^3.0.1",zustand:"^4.1.1"},peerDependencies:{react:">=18.2.0","react-dom":">=18.2.0"},devDependencies:{"@faker-js/faker":"^7.5.0","@tailwindcss/typography":"^0.5.7","@types/color":"^3.0.2","@types/dot-object":"^2.1.2","@types/fabric":"^4.5.12","@types/file-saver":"^2.0.4","@types/lodash.debounce":"^4.0.6","@types/node":"^18.15.11","@types/react":"^18.0.21","@types/react-dom":"^18.0.6","@types/react-recaptcha-v3":"^1.1.2","@types/swagger-ui-react":"^4.11.0","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0","@vitejs/plugin-react":"^2.1.0",autoprefixer:"^10.4.12",cssnano:"^5.1.13",eslint:"8.22","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.25.2","eslint-plugin-jsx-a11y":"^6.6.1","eslint-plugin-react":"^7.31.8","eslint-plugin-react-hooks":"^4.6.0","fast-glob":"^3.2.12","fast-xml-parser":"^4.0.10","fs-extra":"^10.1.0",postcss:"^8.4.16",prettier:"^2.7.1","rollup-plugin-visualizer":"^5.8.1",tailwindcss:"^3.1.8",typescript:"^4.8.3","utility-types":"^3.10.0",vite:"^3.1.3","vite-plugin-checker":"^0.5.1","vite-tsconfig-paths":"^3.6.0"}}.version,uv={selector:"photalius-editor",textureSize:4096,activeLanguage:"en",ui:{visible:!0,mode:uf.INLINE,forceOverlayModeOnMobile:!0,activeTheme:il.LIGHT,themes:hf,allowEditorClose:!0,menubar:{items:[{type:"undoWidget",align:"left"},{type:"zoomWidget",align:"center",desktopOnly:!0},{type:"button",icon:cv,align:"right",desktopOnly:!0,action:t=>{t.togglePanel("history")}},{type:"button",icon:Yk,label:se("Done"),align:"right",action:t=>{var e;(e=t.state.config.ui)!=null&&e.showExportPanel?t.state.togglePanel("export",!0):t.tools.export.save("image")}}]},nav:{position:rv.BOTTOM,items:[...Hk]},openImageDialog:{show:!0,sampleImages:[{url:"images/samples/sample1.jpg",thumbnail:"images/samples/sample1_thumbnail.jpg"},{url:"images/samples/sample2.jpg",thumbnail:"images/samples/sample2_thumbnail.jpg"},{url:"images/samples/sample3.jpg",thumbnail:"images/samples/sample3_thumbnail.jpg"}]},colorPresets:{items:["rgb(0,0,0)","rgb(255, 255, 255)","rgb(242, 38, 19)","rgb(249, 105, 14)","rgb(253, 227, 167)","rgb(4, 147, 114)","rgb(30, 139, 195)","rgb(142, 68, 173)"]}},objectDefaults:{global:{...ff},sticker:{fill:void 0},text:{textAlign:"initial",underline:!1,linethrough:!1,fontStyle:"normal",fontFamily:"Times New Roman",fontWeight:"normal",stroke:void 0,fontSize:40}},tools:{filter:{items:["grayscale","blackWhite","sharpen","invert","vintage","polaroid","kodachrome","technicolor","brownie","sepia","removeColor","brightness","gamma","noise","pixelate","blur","emboss","blendColor"]},zoom:{allowUserZoom:!0,fitImageToScreen:!0},crop:{allowCustomRatio:!0,defaultRatio:"1:1",presets:[{ratio:null,name:"Custom"},{ratio:"1:1",name:"Square"},{ratio:"4:3"},{ratio:"16:9"},{ratio:"5:3"},{ratio:"5:4"},{ratio:"6:4"},{ratio:"7:5"},{ratio:"10:8"}]},text:{defaultText:"Double click to edit",controlsPadding:6,items:[{family:"Roboto",src:"fonts/open-sans-v27-latin-ext_latin-regular.woff2"},{family:"Shabnam (fa)",src:"fonts/shabnam/Shabnam.woff2"},{family:"Shabnam Bold (fa)",src:"fonts/shabnam/Shabnam-Bold.woff2"},{family:"Shabnam Light (fa)",src:"fonts/shabnam/Shabnam-Light.woff2"},{family:"Shabnam Medium (fa)",src:"fonts/shabnam/Shabnam-Medium.woff2"},{family:"Shabnam Thin (fa)",src:"fonts/shabnam/Shabnam-Thin.woff2"},{family:"Fuzzy Bubbles",src:"fonts/fuzzy-bubbles-v3-latin-700.woff2",descriptors:{weight:"700"}},{family:"Aleo Bold",src:"fonts/aleo-v4-latin-ext_latin-700.woff2",descriptors:{weight:"700"}},{family:"Vazirmatn Bold (fa)",src:"fonts/vazirmatn/Vazirmatn-Bold.woff2"},{family:"Vazirmatn Light (fa)",src:"fonts/vazirmatn/Vazirmatn-Light.woff2"},{family:"Vazirmatn Medium (fa)",src:"fonts/vazirmatn/Vazirmatn-Medium.woff2"},{family:"Vazirmatn Regular (fa)",src:"fonts/vazirmatn/Vazirmatn-Regular.woff2"},{family:"Vazirmatn Thin (fa)",src:"fonts/vazirmatn/Vazirmatn-Thin.woff2"},{family:"Amatic SC",src:"fonts/amatic-sc-v16-latin-ext_latin-regular.woff2"},{family:"Tanha (fa)",src:"fonts/Tanha.woff2"},{family:"Gandom (fa)",src:"fonts/Gandom.woff2"},{family:"Nahid (fa)",src:"fonts/Nahid.woff2"},{family:"Corinthia Bold",src:"fonts/corinthia-v7-latin-ext_latin-700.woff2"},{family:"Bungee Inline",src:"fonts/bungee-inline-v6-latin-ext_latin-regular.woff2"},{family:"Robot Slab Bold",src:"fonts/roboto-slab-v16-latin-ext_latin-500.woff2"},{family:"Carter One",src:"fonts/carter-one-v12-latin-regular.woff2"},{family:"Cody Star",src:"fonts/codystar-v10-latin-ext_latin-regular.woff2"},{family:"Fira Sans",src:"fonts/fira-sans-v11-latin-ext_latin_cyrillic-regular.woff2"},{family:"Krona One",src:"fonts/krona-one-v9-latin-ext_latin-regular.woff2"},{family:"Kumar One Outline",src:"fonts/kumar-one-outline-v8-latin-ext_latin-regular.woff2"},{family:"Lobster Two",src:"fonts/lobster-two-v13-latin-regular.woff2"},{family:"Molle Italic",src:"fonts/molle-v11-latin-ext_latin-italic.woff2"},{family:"Monoton",src:"fonts/monoton-v10-latin-regular.woff2"},{family:"Nixie One",src:"fonts/nixie-one-v11-latin-regular.woff2"},{family:"Permanent Marker",src:"fonts/permanent-marker-v10-latin-regular.woff2"},{family:"Sancreek",src:"fonts/sancreek-v13-latin-ext_latin-regular.woff2"},{family:"Stint Ultra Expanded",src:"fonts/stint-ultra-expanded-v10-latin-regular.woff2"},{family:"VT323",src:"fonts/vt323-v12-latin-ext_latin-regular.woff2"},{family:"Trash Hand",src:"fonts/TrashHand.ttf"}]},draw:{brushSizes:iv,brushTypes:Ok},shapes:{items:Ck.slice()},stickers:{items:kk},import:{validImgExtensions:["png","jpg","jpeg","svg","gif","webp"],fitOverlayToScreen:!0,openDroppedImageAsBackground:!1},export:{defaultFormat:"png",defaultQuality:1,defaultName:"photalius"},frame:{items:[{name:"basic",mode:"basic",size:{min:1,max:35,default:10}},{name:"pine",mode:"stretch",size:{min:1,max:35,default:15}},{name:"oak",mode:"stretch",size:{min:1,max:35,default:15}},{name:"rainbow",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge1",display_name:"grunge #1",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge2",display_name:"grunge #2",mode:"stretch",size:{min:1,max:35,default:20}},{name:"ebony",mode:"stretch",size:{min:1,max:35,default:15}},{name:"art1",display_name:"Art #1",mode:"repeat",size:{min:10,max:70,default:55}},{name:"art2",display_name:"Art #2",mode:"repeat",size:{min:10,max:70,default:55}}]}}},fv=t=>{let e;const n=new Set,r=(o,c)=>{const h=typeof o=="function"?o(e):o;if(!Object.is(h,e)){const l=e;e=(c!=null?c:typeof h!="object")?h:Object.assign({},e,h),n.forEach(u=>u(e,l))}},i=()=>e,a={setState:r,getState:i,subscribe:o=>(n.add(o),()=>n.delete(o)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,a),a},Gk=t=>t?fv(t):fv;var hv={exports:{}},dv={},pv={exports:{}},gv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ui=E.exports;function Kk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qk=typeof Object.is=="function"?Object.is:Kk,Zk=Ui.useState,Qk=Ui.useEffect,Jk=Ui.useLayoutEffect,e5=Ui.useDebugValue;function t5(t,e){var n=e(),r=Zk({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Jk(function(){i.value=n,i.getSnapshot=e,df(i)&&s({inst:i})},[t,n,e]),Qk(function(){return df(i)&&s({inst:i}),t(function(){df(i)&&s({inst:i})})},[t]),e5(n),n}function df(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qk(t,n)}catch{return!0}}function n5(t,e){return e()}var r5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n5:t5;gv.useSyncExternalStore=Ui.useSyncExternalStore!==void 0?Ui.useSyncExternalStore:r5,function(t){t.exports=gv}(pv);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=E.exports,i5=pv.exports;function o5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var s5=typeof Object.is=="function"?Object.is:o5,a5=i5.useSyncExternalStore,l5=ol.useRef,c5=ol.useEffect,u5=ol.useMemo,f5=ol.useDebugValue;dv.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=l5(null);if(s.current===null){var d={hasValue:!1,value:null};s.current=d}else d=s.current;s=u5(function(){function o(f){if(!c){if(c=!0,h=f,f=r(f),i!==void 0&&d.hasValue){var p=d.value;if(i(p,f))return l=p}return l=f}if(p=l,s5(h,f))return p;var m=r(f);return i!==void 0&&i(p,m)?p:(h=f,l=m)}var c=!1,h,l,u=n===void 0?null:n;return[function(){return o(e())},u===null?void 0:function(){return o(u())}]},[e,n,r,i]);var a=a5(t,s[0],s[1]);return c5(function(){d.hasValue=!0,d.value=a},[a]),f5(a),a},function(t){t.exports=dv}(hv);const h5=Pt(hv.exports),{useSyncExternalStoreWithSelector:d5}=h5;function p5(t,e=t.getState,n){const r=d5(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return E.exports.useDebugValue(r),r}const mv=t=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Gk(t):t,n=(r,i)=>p5(e,r,i);return Object.assign(n,e),n},vv=t=>t?mv(t):mv,g5=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(d,a,o)=>{let c=d;if(a){const h=(o==null?void 0:o.equalityFn)||Object.is;let l=d(r.getState());c=u=>{const f=d(u);if(!h(l,f)){const p=l;a(l=f,p)}},o!=null&&o.fireImmediately&&a(l,l)}return i(c)},t(e,n,r)};function hn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Hi(t){return!!t&&!!t[Nt]}function Yr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===S5}(t)||Array.isArray(t)||!!t[Ev]||!!(!((e=t.constructor)===null||e===void 0)&&e[Ev])||gf(t)||mf(t))}function os(t,e,n){n===void 0&&(n=!1),Wi(t)===0?(n?Object.keys:Of)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Wi(t){var e=t[Nt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:gf(t)?2:mf(t)?3:0}function pf(t,e){return Wi(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function m5(t,e){return Wi(t)===2?t.get(e):t[e]}function yv(t,e,n){var r=Wi(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function v5(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function gf(t){return x5&&t instanceof Map}function mf(t){return _5&&t instanceof Set}function Xr(t){return t.o||t.t}function vf(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=C5(t);delete e[Nt];for(var n=Of(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function yf(t,e){return e===void 0&&(e=!1),bf(t)||Hi(t)||!Yr(t)||(Wi(t)>1&&(t.set=t.add=t.clear=t.delete=y5),Object.freeze(t),e&&os(t,function(n,r){return yf(r,!0)},!0)),t}function y5(){hn(2)}function bf(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Cn(t){var e=T5[t];return e||hn(18,t),e}function bv(){return ss}function wf(t,e){e&&(Cn("Patches"),t.u=[],t.s=[],t.v=e)}function sl(t){xf(t),t.p.forEach(b5),t.p=null}function xf(t){t===ss&&(ss=t.l)}function wv(t){return ss={p:[],l:ss,h:t,m:!0,_:0}}function b5(t){var e=t[Nt];e.i===0||e.i===1?e.j():e.g=!0}function _f(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Cn("ES5").S(e,t,r),r?(n[Nt].P&&(sl(e),hn(4)),Yr(t)&&(t=al(e,t),e.l||ll(e,t)),e.u&&Cn("Patches").M(n[Nt].t,t,e.u,e.s)):t=al(e,n,[]),sl(e),e.u&&e.v(e.u,e.s),t!==kv?t:void 0}function al(t,e,n){if(bf(e))return e;var r=e[Nt];if(!r)return os(e,function(a,o){return xv(t,r,e,a,o,n)},!0),e;if(r.A!==t)return e;if(!r.P)return ll(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=vf(r.k):r.o,s=i,d=!1;r.i===3&&(s=new Set(i),i.clear(),d=!0),os(s,function(a,o){return xv(t,r,i,a,o,n,d)}),ll(t,i,!1),n&&t.u&&Cn("Patches").N(r,n,t.u,t.s)}return r.o}function xv(t,e,n,r,i,s,d){if(Hi(i)){var a=al(t,i,s&&e&&e.i!==3&&!pf(e.R,r)?s.concat(r):void 0);if(yv(n,r,a),!Hi(a))return;t.m=!1}else d&&n.add(i);if(Yr(i)&&!bf(i)){if(!t.h.D&&t._<1)return;al(t,i),e&&e.A.l||ll(t,i)}}function ll(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&yf(e,n)}function Sf(t,e){var n=t[Nt];return(n?Xr(n):t)[e]}function _v(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Cf(t){t.P||(t.P=!0,t.l&&Cf(t.l))}function Tf(t){t.o||(t.o=vf(t.t))}function kf(t,e,n){var r=gf(e)?Cn("MapSet").F(e,n):mf(e)?Cn("MapSet").T(e,n):t.O?function(i,s){var d=Array.isArray(i),a={i:d?1:0,A:s?s.A:bv(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},o=a,c=Pf;d&&(o=[a],c=as);var h=Proxy.revocable(o,c),l=h.revoke,u=h.proxy;return a.k=u,a.j=l,u}(e,n):Cn("ES5").J(e,n);return(n?n.A:bv()).p.push(r),r}function w5(t){return Hi(t)||hn(22,t),function e(n){if(!Yr(n))return n;var r,i=n[Nt],s=Wi(n);if(i){if(!i.P&&(i.i<4||!Cn("ES5").K(i)))return i.t;i.I=!0,r=Sv(n,s),i.I=!1}else r=Sv(n,s);return os(r,function(d,a){i&&m5(i.t,d)===a||yv(r,d,e(a))}),s===3?new Set(r):r}(t)}function Sv(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return vf(t)}function tN(t){return t}var Cv,ss,Ef=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",x5=typeof Map<"u",_5=typeof Set<"u",Tv=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",kv=Ef?Symbol.for("immer-nothing"):((Cv={})["immer-nothing"]=!0,Cv),Ev=Ef?Symbol.for("immer-draftable"):"__$immer_draftable",Nt=Ef?Symbol.for("immer-state"):"__$immer_state",S5=""+Object.prototype.constructor,Of=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,C5=Object.getOwnPropertyDescriptors||function(t){var e={};return Of(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},T5={},Pf={get:function(t,e){if(e===Nt)return t;var n=Xr(t);if(!pf(n,e))return function(i,s,d){var a,o=_v(s,d);return o?"value"in o?o.value:(a=o.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Yr(r)?r:r===Sf(t.t,e)?(Tf(t),t.o[e]=kf(t.A.h,r,t)):r},has:function(t,e){return e in Xr(t)},ownKeys:function(t){return Reflect.ownKeys(Xr(t))},set:function(t,e,n){var r=_v(Xr(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Sf(Xr(t),e),s=i==null?void 0:i[Nt];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(v5(n,i)&&(n!==void 0||pf(t.t,e)))return!0;Tf(t),Cf(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Sf(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Tf(t),Cf(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Xr(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){hn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){hn(12)}},as={};os(Pf,function(t,e){as[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),as.deleteProperty=function(t,e){return as.set.call(this,t,e,void 0)},as.set=function(t,e,n){return Pf.set.call(this,t[0],e,n,t[0])};var k5=function(){function t(n){var r=this;this.O=Tv,this.D=!0,this.produce=function(i,s,d){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var o=r;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,y=Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];return o.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(y))})}}var c;if(typeof s!="function"&&hn(6),d!==void 0&&typeof d!="function"&&hn(7),Yr(i)){var h=wv(r),l=kf(r,i,void 0),u=!0;try{c=s(l),u=!1}finally{u?sl(h):xf(h)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(m){return wf(h,d),_f(m,h)},function(m){throw sl(h),m}):(wf(h,d),_f(c,h))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===kv&&(c=void 0),r.D&&yf(c,!0),d){var f=[],p=[];Cn("Patches").M(i,c,f,p),d(f,p)}return c}hn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var h=arguments.length,l=Array(h>1?h-1:0),u=1;u<h;u++)l[u-1]=arguments[u];return r.produceWithPatches(c,function(f){return i.apply(void 0,[f].concat(l))})};var d,a,o=r.produce(i,s,function(c,h){d=c,a=h});return typeof Promise<"u"&&o instanceof Promise?o.then(function(c){return[c,d,a]}):[o,d,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Yr(n)||hn(8),Hi(n)&&(n=w5(n));var r=wv(this),i=kf(this,n,void 0);return i[Nt].C=!0,xf(r),i},e.finishDraft=function(n,r){var i=n&&n[Nt],s=i.A;return wf(s,r),_f(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!Tv&&hn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var d=Cn("Patches").$;return Hi(n)?d(n,r):this.produce(n,function(a){return d(a,r)})},t}(),jt=new k5,E5=jt.produce;jt.produceWithPatches.bind(jt),jt.setAutoFreeze.bind(jt),jt.setUseProxies.bind(jt),jt.applyPatches.bind(jt),jt.createDraft.bind(jt),jt.finishDraft.bind(jt);var O5=function(e){return P5(e)&&!M5(e)};function P5(t){return!!t&&typeof t=="object"}function M5(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||R5(t)}var A5=typeof Symbol=="function"&&Symbol.for,D5=A5?Symbol.for("react.element"):60103;function R5(t){return t.$$typeof===D5}function I5(t){return Array.isArray(t)?[]:{}}function ls(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Yi(I5(t),t,e):t}function L5(t,e,n){return t.concat(e).map(function(r){return ls(r,n)})}function F5(t,e){if(!e.customMerge)return Yi;var n=e.customMerge(t);return typeof n=="function"?n:Yi}function z5(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Ov(t){return Object.keys(t).concat(z5(t))}function Pv(t,e){try{return e in t}catch{return!1}}function N5(t,e){return Pv(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function j5(t,e,n){var r={};return n.isMergeableObject(t)&&Ov(t).forEach(function(i){r[i]=ls(t[i],n)}),Ov(e).forEach(function(i){N5(t,i)||(Pv(t,i)&&n.isMergeableObject(e[i])?r[i]=F5(i,n)(t[i],e[i],n):r[i]=ls(e[i],n))}),r}function Yi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||L5,n.isMergeableObject=n.isMergeableObject||O5,n.cloneUnlessOtherwiseSpecified=ls;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):j5(t,e,n):ls(e,n)}Yi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Yi(r,i,n)},{})};var B5=Yi,Mv=B5;function V5(t){return t?t.charAt(0).toLowerCase()+t.slice(1):""}function $5(t,e){const n=Mv(e,t);return Av(n,t)}function Av(t,e){return Object.keys(t).forEach(n=>{if(n.startsWith("replaceDefault")&&t[n]){const r=V5(n.replace("replaceDefault","")||"items");t[r]=e?e[r]:[],delete t[n]}else typeof t[n]=="object"&&t[n]!==null&&Av(t[n],e==null?void 0:e[n])}),t}const U5=(t,e)=>({history:{...Dv,updatePointerById:n=>{const r=e().history.items.findIndex(i=>i.id===n);e().history.update(r)},update:(n,r)=>{t(i=>{i.history.pointer=n,r&&(i.history.items=r),i.history.canUndo=i.history.pointer>0,i.history.canRedo=i.history.items.length>i.history.pointer+1})},reset:n=>{t({history:{...e().history,...n!=null?n:Dv}})}}}),Dv={items:[],pointer:0,canUndo:!1,canRedo:!1};var tn=(t=>(t.Filter="filter",t.Frame="frame",t.ActiveObject="activeObj",t.Text="text",t))(tn||{});const H5=(t,e)=>({filter:{...Rv,select(n,r=!1){t(i=>{i.filter.selected=n,i.activeToolOverlay=r?tn.Filter:null,i.dirty=!0})},deselect(n){e().filter.selected===n&&t(r=>{r.filter.selected=null,r.activeToolOverlay=null,r.dirty=!0})},reset(){t({filter:{...e().filter,...Rv}})}}}),Rv={selected:null,applied:[]},W5=(t,e)=>({crop:{...Iv,setCropzoneRect:n=>{t(r=>{r.crop.zoneRect=n})},setAspectRatio:n=>{t(r=>{r.crop.selectedAspectRatio=n})},setTransformAngle:n=>{t(r=>{r.crop.straightenAngle=n})},apply:async()=>{const n=e().crop.zoneRect;if(n){const r={width:Math.ceil(n.width/e().zoom),height:Math.ceil(n.height/e().zoom),left:Math.ceil(n.left/e().zoom),top:Math.ceil(n.top/e().zoom)};await e().editor.tools.crop.apply(r)}},reset:()=>{t({crop:{...e().crop,...Iv}})}}}),Iv={zoneRect:null,selectedAspectRatio:null,straightenAngle:0};function ar(t){return(t==null?void 0:t.type)==="i-text"}var Xe=(t=>(t.Text="text",t.Shape="shape",t.Sticker="sticker",t.Drawing="drawing",t.Image="image",t.MainImage="mainImage",t.StraightenAnchor="straightenHelper",t))(Xe||{});const Y5={text:{name:se("Text"),icon:sr.text.icon},shape:{name:se("Shape"),icon:sr.shapes.icon},sticker:{name:se("Sticker"),icon:sr.stickers.icon},drawing:{name:se("Drawing"),icon:sr.draw.icon},image:{name:se("Image"),icon:sr.overlayImage.icon},mainImage:{name:se("Background Image"),icon:sr.bgImage.icon}};function X5(t){return t.name===Xe.Image}const Lv={isMoving:!1,editableProps:{},id:null,isText:!1,isImage:!1,name:null};function G5(t){if(!t)return{};const e={fill:t.fill,opacity:t.opacity,backgroundColor:t.backgroundColor,stroke:t.stroke,strokeWidth:t.strokeWidth},n=t.shadow;return n&&(e.shadow={color:n.color,blur:n.blur,offsetX:n.offsetX,offsetY:n.offsetY}),ar(t)&&(e.textAlign=t.textAlign,e.underline=t.underline,e.linethrough=t.linethrough,e.fontStyle=t.fontStyle,e.fontFamily=t.fontFamily,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize),e}const K5=(t,e)=>({objects:{...Fv,setActiveIsMoving:n=>{t(r=>{r.objects.active.isMoving=n})},setIsEditingText:n=>{t(r=>{r.objects.isEditingText=n})},setActive:n=>{t(n?r=>{var i;r.objects.active.editableProps=G5(n),r.objects.active.id=n.data.id,r.objects.active.name=(i=n.name)!=null?i:null,r.objects.active.isText=ar(n),r.objects.active.isImage=X5(n)}:r=>{var s,d,a,o,c;const i={...(s=e().config.objectDefaults)==null?void 0:s.global,fontFamily:(a=(d=e().config.objectDefaults)==null?void 0:d.text)==null?void 0:a.fontFamily,fontSize:(c=(o=e().config.objectDefaults)==null?void 0:o.text)==null?void 0:c.fontSize};r.objects.active={...Lv,editableProps:i}})},reset(){t({objects:{...e().objects,...Fv}})}}}),Fv={all:[],isEditingText:!1,active:Lv},q5=(t,e)=>({frame:{...zv,select:n=>{t(r=>{r.frame.active=n}),e().frame.showOptionsPanel()},deselect:()=>{t(n=>{n.frame.active=null,n.activeToolOverlay=null})},showOptionsPanel:()=>{e().activeTool===Me.FRAME&&t(n=>{n.activeToolOverlay=tn.Frame})},reset(){t({frame:{...e().frame,...zv}})}}}),zv={active:null},Z5=(t,e)=>({resize:{...Nv,setFormValue:n=>{t(r=>{Object.entries(n).forEach(([i,s])=>{r.resize.formValue[i]=s})})},apply(){const n=e().resize.formValue,r=e().original;if(n.width===r.width&&n.height===r.height)return!1;e().editor.tools.resize.apply(n)},reset(){t({resize:{...e().resize,...Nv}})}}}),Nv={formValue:{width:1,height:1,maintainAspect:!0,usePercentages:!1}},Q5=(t,e)=>({corners:{...jv,setRadius:n=>{t(r=>{r.corners.radius=n})},apply(){return e().editor.tools.corners.apply(e().corners.radius)},reset(){t({corners:{...e().corners,...jv}})}}}),jv={radius:50},Bv=t=>(e,n,r)=>(r.setState=(i,s,...d)=>{const a=typeof i=="function"?E5(i):i;return e(a,s,...d)},t(r.setState,n,r));var Vv={exports:{}},J5={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$v={exports:{}},eE=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},tE=eE,nE=Array.prototype.concat,rE=Array.prototype.slice,Uv=$v.exports=function(e){for(var n=[],r=0,i=e.length;r<i;r++){var s=e[r];tE(s)?n=nE.call(n,rE.call(s)):n.push(s)}return n};Uv.wrap=function(t){return function(){return t(Uv(arguments))}};var cs=J5,us=$v.exports,Hv=Object.hasOwnProperty,Wv=Object.create(null);for(var Mf in cs)Hv.call(cs,Mf)&&(Wv[cs[Mf]]=Mf);var Bt=Vv.exports={to:{},get:{}};Bt.get=function(t){var e=t.substring(0,3).toLowerCase(),n,r;switch(e){case"hsl":n=Bt.get.hsl(t),r="hsl";break;case"hwb":n=Bt.get.hwb(t),r="hwb";break;default:n=Bt.get.rgb(t),r="rgb";break}return n?{model:r,value:n}:null},Bt.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,d=[0,0,0,1],a,o,c;if(a=t.match(n)){for(c=a[2],a=a[1],o=0;o<3;o++){var h=o*2;d[o]=parseInt(a.slice(h,h+2),16)}c&&(d[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],o=0;o<3;o++)d[o]=parseInt(a[o]+a[o],16);c&&(d[3]=parseInt(c+c,16)/255)}else if(a=t.match(r)){for(o=0;o<3;o++)d[o]=parseInt(a[o+1],0);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(o=0;o<3;o++)d[o]=Math.round(parseFloat(a[o+1])*2.55);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:Hv.call(cs,a[1])?(d=cs[a[1]],d[3]=1,d):null:null;for(o=0;o<3;o++)d[o]=lr(d[o],0,255);return d[3]=lr(d[3],0,1),d},Bt.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=lr(parseFloat(n[2]),0,100),d=lr(parseFloat(n[3]),0,100),a=lr(isNaN(r)?1:r,0,1);return[i,s,d,a]}return null},Bt.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=lr(parseFloat(n[2]),0,100),d=lr(parseFloat(n[3]),0,100),a=lr(isNaN(r)?1:r,0,1);return[i,s,d,a]}return null},Bt.to.hex=function(){var t=us(arguments);return"#"+cl(t[0])+cl(t[1])+cl(t[2])+(t[3]<1?cl(Math.round(t[3]*255)):"")},Bt.to.rgb=function(){var t=us(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},Bt.to.rgb.percent=function(){var t=us(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},Bt.to.hsl=function(){var t=us(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},Bt.to.hwb=function(){var t=us(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},Bt.to.keyword=function(t){return Wv[t.slice(0,3)]};function lr(t,e,n){return Math.min(Math.max(e,t),n)}function cl(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var iE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const fs=iE,Yv={};for(const t of Object.keys(fs))Yv[fs[t]]=t;const me={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Xv=me;for(const t of Object.keys(me)){if(!("channels"in me[t]))throw new Error("missing channels property: "+t);if(!("labels"in me[t]))throw new Error("missing channel labels property: "+t);if(me[t].labels.length!==me[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=me[t];delete me[t].channels,delete me[t].labels,Object.defineProperty(me[t],"channels",{value:e}),Object.defineProperty(me[t],"labels",{value:n})}me.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),s=Math.max(e,n,r),d=s-i;let a,o;s===i?a=0:e===s?a=(n-r)/d:n===s?a=2+(r-e)/d:r===s&&(a=4+(e-n)/d),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+s)/2;return s===i?o=0:c<=.5?o=d/(s+i):o=d/(2-s-i),[a,o*100,c*100]},me.rgb.hsv=function(t){let e,n,r,i,s;const d=t[0]/255,a=t[1]/255,o=t[2]/255,c=Math.max(d,a,o),h=c-Math.min(d,a,o),l=function(u){return(c-u)/6/h+1/2};return h===0?(i=0,s=0):(s=h/c,e=l(d),n=l(a),r=l(o),d===c?i=r-n:a===c?i=1/3+e-r:o===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]},me.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=me.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,s*100,r*100]},me.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r),s=(1-e-i)/(1-i)||0,d=(1-n-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[s*100,d*100,a*100,i*100]};function oE(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}me.rgb.keyword=function(t){const e=Yv[t];if(e)return e;let n=1/0,r;for(const i of Object.keys(fs)){const s=fs[i],d=oE(t,s);d<n&&(n=d,r=i)}return r},me.keyword.rgb=function(t){return fs[t]},me.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124+n*.3576+r*.1805,s=e*.2126+n*.7152+r*.0722,d=e*.0193+n*.1192+r*.9505;return[i*100,s*100,d*100]},me.rgb.lab=function(t){const e=me.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*r-16,d=500*(n-r),a=200*(r-i);return[s,d,a]},me.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,s,d;if(n===0)return d=r*255,[d,d,d];r<.5?i=r*(1+n):i=r+n-r*n;const a=2*r-i,o=[0,0,0];for(let c=0;c<3;c++)s=e+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?d=a+(i-a)*6*s:2*s<1?d=i:3*s<2?d=a+(i-a)*(2/3-s)*6:d=a,o[c]=d*255;return o},me.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const s=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=s<=1?s:2-s;const d=(r+n)/2,a=r===0?2*i/(s+i):2*n/(r+n);return[e,a*100,d*100]},me.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),d=255*r*(1-n),a=255*r*(1-n*s),o=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,o,d];case 1:return[a,r,d];case 2:return[d,r,o];case 3:return[d,a,r];case 4:return[o,d,r];case 5:return[r,d,a]}},me.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let s,d;d=(2-n)*r;const a=(2-n)*i;return s=n*i,s/=a<=1?a:2-a,s=s||0,d/=2,[e,s*100,d*100]},me.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let s;i>1&&(n/=i,r/=i);const d=Math.floor(6*e),a=1-r;s=6*e-d,(d&1)!==0&&(s=1-s);const o=n+s*(a-n);let c,h,l;switch(d){default:case 6:case 0:c=a,h=o,l=n;break;case 1:c=o,h=a,l=n;break;case 2:c=n,h=a,l=o;break;case 3:c=n,h=o,l=a;break;case 4:c=o,h=n,l=a;break;case 5:c=a,h=n,l=o;break}return[c*255,h*255,l*255]},me.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),d=1-Math.min(1,n*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[s*255,d*255,a*255]},me.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,s,d;return i=e*3.2406+n*-1.5372+r*-.4986,s=e*-.9689+n*1.8758+r*.0415,d=e*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),d=Math.min(Math.max(0,d),1),[i*255,s*255,d*255]},me.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,s=500*(e-n),d=200*(n-r);return[i,s,d]},me.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let i,s,d;s=(e+16)/116,i=n/500+s,d=s-r/200;const a=s**3,o=i**3,c=d**3;return s=a>.008856?a:(s-16/116)/7.787,i=o>.008856?o:(i-16/116)/7.787,d=c>.008856?c:(d-16/116)/7.787,i*=95.047,s*=100,d*=108.883,[i,s,d]},me.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const d=Math.sqrt(n*n+r*r);return[e,d,i]},me.lch.lab=function(t){const e=t[0],n=t[1],i=t[2]/360*2*Math.PI,s=n*Math.cos(i),d=n*Math.sin(i);return[e,s,d]},me.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let s=e===null?me.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let d=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return s===2&&(d+=60),d},me.hsv.ansi16=function(t){return me.rgb.ansi16(me.hsv.rgb(t),t[2])},me.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},me.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(~~(t>50)+1)*.5,r=(e&1)*n*255,i=(e>>1&1)*n*255,s=(e>>2&1)*n*255;return[r,i,s]},me.ansi256.rgb=function(t){if(t>=232){const s=(t-232)*10+8;return[s,s,s]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[n,r,i]},me.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n},me.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16),i=r>>16&255,s=r>>8&255,d=r&255;return[i,s,d]},me.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),s=Math.min(Math.min(e,n),r),d=i-s;let a,o;return d<1?a=s/(1-d):a=0,d<=0?o=0:i===e?o=(n-r)/d%6:i===n?o=2+(r-e)/d:o=4+(e-n)/d,o/=6,o%=1,[o*360,d*100,a*100]},me.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],r*100,i*100]},me.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],r*100,i*100]},me.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,d=s%1,a=1-d;let o=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=d,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=d;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=d,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return o=(1-n)*r,[(n*i[0]+o)*255,(n*i[1]+o)*255,(n*i[2]+o)*255]},me.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let i=0;return r>0&&(i=e/r),[t[0],i*100,r*100]},me.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[t[0],i*100,r*100]},me.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]},me.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[t[0],i*100,s*100]},me.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},me.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},me.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},me.gray.hsl=function(t){return[0,0,t[0]]},me.gray.hsv=me.gray.hsl,me.gray.hwb=function(t){return[0,100,t[0]]},me.gray.cmyk=function(t){return[0,0,0,t[0]]},me.gray.lab=function(t){return[t[0],0,0]},me.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},me.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const ul=Xv;function sE(){const t={},e=Object.keys(ul);for(let n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function aE(t){const e=sE(),n=[t];for(e[t].distance=0;n.length;){const r=n.pop(),i=Object.keys(ul[r]);for(let s=i.length,d=0;d<s;d++){const a=i[d],o=e[a];o.distance===-1&&(o.distance=e[r].distance+1,o.parent=r,n.unshift(a))}}return e}function lE(t,e){return function(n){return e(t(n))}}function cE(t,e){const n=[e[t].parent,t];let r=ul[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)n.unshift(e[i].parent),r=lE(ul[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}var uE=function(t){const e=aE(t),n={},r=Object.keys(e);for(let i=r.length,s=0;s<i;s++){const d=r[s];e[d].parent!==null&&(n[d]=cE(d,e))}return n};const Af=Xv,fE=uE,Xi={},hE=Object.keys(Af);function dE(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function pE(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=t(n);if(typeof i=="object")for(let s=i.length,d=0;d<s;d++)i[d]=Math.round(i[d]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}hE.forEach(t=>{Xi[t]={},Object.defineProperty(Xi[t],"channels",{value:Af[t].channels}),Object.defineProperty(Xi[t],"labels",{value:Af[t].labels});const e=fE(t);Object.keys(e).forEach(r=>{const i=e[r];Xi[t][r]=pE(i),Xi[t][r].raw=dE(i)})});var gE=Xi;const Gi=Vv.exports,Vt=gE,Gv=["keyword","gray","hex"],Df={};for(const t of Object.keys(Vt))Df[[...Vt[t].labels].sort().join("")]=t;const fl={};function it(t,e){if(!(this instanceof it))return new it(t,e);if(e&&e in Gv&&(e=null),e&&!(e in Vt))throw new Error("Unknown model: "+e);let n,r;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof it)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const i=Gi.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,r=Vt[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(t.length>0){this.model=e||"rgb",r=Vt[this.model].channels;const i=Array.prototype.slice.call(t,0,r);this.color=Rf(i,r),this.valpha=typeof t[r]=="number"?t[r]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const s=i.sort().join("");if(!(s in Df))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Df[s];const{labels:d}=Vt[this.model],a=[];for(n=0;n<d.length;n++)a.push(t[d[n]]);this.color=Rf(a)}if(fl[this.model])for(r=Vt[this.model].channels,n=0;n<r;n++){const i=fl[this.model][n];i&&(this.color[n]=i(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}it.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Gi.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return Gi.to[e.model](n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return Gi.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Vt[this.model],{labels:n}=Vt[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new it([...this.color.map(vE(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new it([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:We("rgb",0,Je(255)),green:We("rgb",1,Je(255)),blue:We("rgb",2,Je(255)),hue:We(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:We("hsl",1,Je(100)),lightness:We("hsl",2,Je(100)),saturationv:We("hsv",1,Je(100)),value:We("hsv",2,Je(100)),chroma:We("hcg",1,Je(100)),gray:We("hcg",2,Je(100)),white:We("hwb",1,Je(100)),wblack:We("hwb",2,Je(100)),cyan:We("cmyk",0,Je(100)),magenta:We("cmyk",1,Je(100)),yellow:We("cmyk",2,Je(100)),black:We("cmyk",3,Je(100)),x:We("xyz",0,Je(95.047)),y:We("xyz",1,Je(100)),z:We("xyz",2,Je(108.833)),l:We("lab",0,Je(100)),a:We("lab",1),b:We("lab",2),keyword(t){return t!==void 0?new it(t):Vt[this.model].keyword(this.color)},hex(t){return t!==void 0?new it(t):Gi.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new it(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Gi.to.hex(e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const i=r/255;e[n]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return it.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,d=n.alpha()-r.alpha(),a=((s*d===-1?s:(s+d)/(1+s*d))+1)/2,o=1-a;return it.rgb(a*n.red()+o*r.red(),a*n.green()+o*r.green(),a*n.blue()+o*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const t of Object.keys(Vt)){if(Gv.includes(t))continue;const{channels:e}=Vt[t];it.prototype[t]=function(...n){return this.model===t?new it(this):n.length>0?new it(n,t):new it([...yE(Vt[this.model][t].raw(this.color)),this.valpha],t)},it[t]=function(...n){let r=n[0];return typeof r=="number"&&(r=Rf(n,e)),new it(r,t)}}function mE(t,e){return Number(t.toFixed(e))}function vE(t){return function(e){return mE(e,t)}}function We(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(fl[r]||(fl[r]=[]))[e]=n;return t=t[0],function(r){let i;return r!==void 0?(n&&(r=n(r)),i=this[t](),i.color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function Je(t){return function(e){return Math.max(0,Math.min(t,e))}}function yE(t){return Array.isArray(t)?t:[t]}function Rf(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}var bE=it;const wE=bE;function xE(t){const e=t.isDark?hf.find(i=>i.isDark):hf.find(i=>!i.isDark),n={...e,...t,colors:{...e==null?void 0:e.colors,...t.colors}},r=Object.entries(n.colors).map(([i,s])=>[i,_E(s)]);return{id:n.name,name:n.name,colors:Object.fromEntries(r),is_dark:n.isDark}}function _E(t){return t.endsWith("%")||t.split(" ").length===3?t:wE(t).rgb().array().slice(0,3).join(" ")}let nn=typeof document<"u"?(oS=document.getElementById("root"))!=null?oS:document.body:void 0;function SE(t){nn=t}function CE(t,e){nn==null||nn.style.setProperty(t,e)}function TE(t){Object.entries(t.colors).forEach(([e,n])=>{CE(e,n)}),t.is_dark?nn.classList.add("dark"):nn.classList.remove("dark")}const Kv={top:0,right:0,bottom:0,left:0,width:0,height:0},ue=vv()(g5(Bv((t,e)=>({editor:null,fabric:null,bootstrapData:{},config:uv,zoom:1,dirty:!1,original:{width:1,height:1},stageSize:Kv,canvasSize:Kv,canvasRef:null,activeTool:null,activeToolOverlay:null,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1},...U5(t,e),...K5(t,e),...H5(t,e),...W5(t,e),...q5(t,e),...Z5(t,e),...Q5(t,e),setZoom:n=>t(r=>{r.zoom=n}),setOriginal:(n,r)=>t(i=>{i.original={width:n,height:r}}),setDirty:n=>t(r=>{r.dirty=n}),toggleLoading:n=>t(r=>{r.loading=n}),setStageSize:n=>t(r=>{r.stageSize=n}),setCanvasSize:n=>t(r=>{r.canvasSize=n}),setActiveTool:(n,r)=>{t(i=>{i.activeTool=n,i.activeToolOverlay=r})},setConfig:n=>t(r=>{var c,h;const i=$5(n,e().config);r.config=i;const s=i.activeLanguage||"en",d=(c=i.languages)==null?void 0:c[s],a=(((h=i.ui)==null?void 0:h.themes)||[]).map(l=>xE(l)),o=a.find(l=>{var u;return l.id===((u=i.ui)==null?void 0:u.activeTheme)});o&&TE(o),r.bootstrapData={i18n:{language:s,name:s,id:0,lines:d},themes:{all:a}}}),togglePanel:(n,r)=>t(i=>{i.openPanels[n]=r!=null?r:!i.openPanels[n]}),applyChanges:async()=>{var s;const n=e().activeTool;if(!n)return;const r=e()[n],i=await((s=r==null?void 0:r.apply)==null?void 0:s.call(r));t(d=>{d.dirty=!1,d.activeTool=null,d.activeToolOverlay=null}),i!==!1&&e().editor.tools.history.addHistoryItem({name:n}),r==null||r.reset()},cancelChanges:async()=>{const n=e().activeTool;if(!n)return;const r=e().dirty;t(s=>{s.dirty=!1,s.activeTool=null,s.activeToolOverlay=null}),r&&await e().editor.tools.history.reload();const i=e()[n];i==null||i.reset()},reset:()=>{e().editor.tools.transform.resetStraightenAnchor(),t({activeTool:null,activeToolOverlay:null,zoom:1,dirty:!1,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1}}),e().history.reset(),e().objects.reset(),e().filter.reset(),e().crop.reset(),e().frame.reset(),e().resize.reset(),e().corners.reset()}}))));function M(){return ue.getState()}function L(){return M().editor.tools}function de(){return M().fabric}function If(t){var n,r,i,s,d;L().canvas.clear(),L().frame.remove();const e=!((n=M().config.ui)!=null&&n.visible);return M().setConfig({image:void 0,blankCanvasSize:void 0,...t}),M().reset(),(r=M().config.ui)!=null&&r.defaultTool&&M().setActiveTool((i=M().config.ui)==null?void 0:i.defaultTool,null),e&&((d=(s=M().config).onOpen)==null||d.call(s)),new Promise(a=>setTimeout(a))}async function hl(t){return(await fetch(t)).json()}const Gr={selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,hasRotatingPoint:!1,strokeWidth:0};function dl(t=[]){var r;t=[...Object.keys(Gr),"crossOrigin","name","displayName","data",...t];const e=de().toJSON(t);e.objects=e.objects.filter(i=>!i.data.photaliusInternal).map(i=>(i.type==="image"&&M().config.crossOrigin&&(i.crossOrigin="anonymous"),ar(i)&&(i.selectable=!0,i.lockMovementX=!1,i.lockMovementY=!1,i.lockUniScaling=!1),{...i,data:i.data?{...i.data}:{}}));const n=L().frame.active.config?{name:L().frame.active.config.name,sizePercent:L().frame.active.currentSizeInPercent}:null;return{canvas:e,editor:{frame:n,zoom:M().zoom,activeObjectId:((r=M().objects.active)==null?void 0:r.id)||null},canvasWidth:M().original.width,canvasHeight:M().original.height}}function Lf(t=null){if(M().dirty)return;L().zoom.fitToScreen();const[e,n]=qv(de().getActiveObject());t?M().setActiveTool(t,e===t?n:null):M().setActiveTool(e,n)}function qv(t){switch(t==null?void 0:t.name){case Xe.Text:return[Me.TEXT,tn.Text];case Xe.Sticker:return[Me.STICKERS,tn.ActiveObject];case Xe.Image:return[null,tn.ActiveObject];case Xe.Shape:return[Me.SHAPES,tn.ActiveObject];default:return[null,null]}}const kE=`/*! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com*/.pi *,.pi :after,.pi :before{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));border-style:solid;border-width:0;box-sizing:border-box}.pi :after,.pi :before{--tw-content:""}.pi hr{border-top-width:1px;color:inherit;height:0}.pi abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6{font-size:inherit;font-weight:inherit}.pi a{color:inherit;text-decoration:inherit}.pi b,.pi strong{font-weight:bolder}.pi code,.pi kbd,.pi pre,.pi samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}.pi small{font-size:80%}.pi sub,.pi sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.pi sub{bottom:-.25em}.pi sup{top:-.5em}.pi table{border-collapse:collapse;border-color:inherit;text-indent:0}.pi button,.pi input,.pi optgroup,.pi select,.pi textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}.pi button,.pi select{text-transform:none}.pi [type=button],.pi [type=reset],.pi [type=submit],.pi button{-webkit-appearance:button;background-color:transparent;background-image:none}.pi :-moz-focusring{outline:auto}.pi :-moz-ui-invalid{box-shadow:none}.pi progress{vertical-align:baseline}.pi ::-webkit-inner-spin-button,.pi ::-webkit-outer-spin-button{height:auto}.pi [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.pi ::-webkit-search-decoration{-webkit-appearance:none}.pi ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.pi summary{display:list-item}.pi blockquote,.pi dd,.pi dl,.pi figure,.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6,.pi hr,.pi p,.pi pre{margin:0}.pi fieldset{margin:0;padding:0}.pi legend{padding:0}.pi menu,.pi ol,.pi ul{list-style:none;margin:0;padding:0}.pi textarea{resize:vertical}.pi input::-moz-placeholder,.pi textarea::-moz-placeholder{color:#9ca3af;opacity:1}.pi input::placeholder,.pi textarea::placeholder{color:#9ca3af;opacity:1}.pi [role=button],.pi button{cursor:pointer}.pi :disabled{cursor:default}.pi audio,.pi canvas,.pi embed,.pi iframe,.pi img,.pi object,.pi svg,.pi video{display:block;vertical-align:middle}.pi img,.pi video{height:auto;max-width:100%}.pi [hidden]{display:none}.pi *,.pi :after,.pi :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi .\\!container{width:100%!important}.pi .container{width:100%}@media (min-width:640px){.pi .\\!container{max-width:640px!important}.pi .container{max-width:640px}}@media (min-width:768px){.pi .\\!container{max-width:768px!important}.pi .container{max-width:768px}}@media (min-width:1024px){.pi .\\!container{max-width:1024px!important}.pi .container{max-width:1024px}}@media (min-width:1280px){.pi .\\!container{max-width:1280px!important}.pi .container{max-width:1280px}}@media (min-width:1536px){.pi .\\!container{max-width:1536px!important}.pi .container{max-width:1536px}}.pi .sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.pi .pointer-events-none{pointer-events:none}.pi .pointer-events-auto{pointer-events:auto}.pi .\\!visible{visibility:visible!important}.pi .visible{visibility:visible}.pi .invisible{visibility:hidden}.pi .collapse{visibility:collapse}.pi .static{position:static}.pi .fixed{position:fixed}.pi .absolute{position:absolute}.pi .relative{position:relative}.pi .sticky{position:sticky}.pi .inset-0{inset:0}.pi .inset-x-0{left:0;right:0}.pi .-bottom-10{bottom:-10px}.pi .-bottom-14{bottom:-14px}.pi .-bottom-20{bottom:-20px}.pi .-bottom-5{bottom:-5px}.pi .-bottom-6{bottom:-6px}.pi .-left-5{left:-5px}.pi .-left-8{left:-8px}.pi .-left-80{left:-80px}.pi .-right-5{right:-5px}.pi .-right-6{right:-6px}.pi .-top-144{top:-144px}.pi .-top-40{top:-40px}.pi .-top-5{top:-5px}.pi .bottom-0{bottom:0}.pi .bottom-12{bottom:12px}.pi .bottom-20{bottom:20px}.pi .left-0{left:0}.pi .left-1\\/2{left:50%}.pi .left-16{left:16px}.pi .left-20{left:20px}.pi .left-30{left:30px}.pi .right-0{right:0}.pi .right-16{right:16px}.pi .right-2{right:2px}.pi .right-20{right:20px}.pi .right-4{right:4px}.pi .top-0{top:0}.pi .top-1\\/2{top:50%}.pi .top-10{top:10px}.pi .top-2{top:2px}.pi .top-24{top:24px}.pi .top-26{top:26px}.pi .isolate{isolation:isolate}.pi .z-10{z-index:10}.pi .z-20{z-index:20}.pi .z-30{z-index:30}.pi .z-40{z-index:40}.pi .z-50{z-index:50}.pi .z-cropzone{z-index:10}.pi .z-loading-indicator{z-index:50}.pi .z-modal{z-index:110}.pi .z-navbar{z-index:40}.pi .z-obj-box{z-index:20}.pi .z-popover{z-index:130}.pi .z-toast{z-index:160}.pi .z-tool-overlay{z-index:30}.pi .z-tooltip{z-index:150}.pi .z-tray{z-index:120}.pi .m-1{margin:1px}.pi .m-auto{margin:auto}.pi .mx-14{margin-left:14px;margin-right:14px}.pi .mx-20{margin-left:20px;margin-right:20px}.pi .mx-4{margin-left:4px;margin-right:4px}.pi .mx-8{margin-left:8px;margin-right:8px}.pi .mx-auto{margin-left:auto;margin-right:auto}.pi .my-10{margin-bottom:10px;margin-top:10px}.pi .my-100{margin-bottom:6.25rem;margin-top:6.25rem}.pi .my-12{margin-bottom:12px;margin-top:12px}.pi .my-14{margin-bottom:14px;margin-top:14px}.pi .my-16{margin-bottom:16px;margin-top:16px}.pi .my-20{margin-bottom:20px;margin-top:20px}.pi .my-24{margin-bottom:24px;margin-top:24px}.pi .my-30{margin-bottom:30px;margin-top:30px}.pi .my-32{margin-bottom:32px;margin-top:32px}.pi .my-4{margin-bottom:4px;margin-top:4px}.pi .my-40{margin-bottom:40px;margin-top:40px}.pi .my-50{margin-bottom:50px;margin-top:50px}.pi .my-60{margin-bottom:60px;margin-top:60px}.pi .my-8{margin-bottom:8px;margin-top:8px}.pi .my-80{margin-bottom:80px;margin-top:80px}.pi .my-auto{margin-bottom:auto;margin-top:auto}.pi .-ml-1{margin-left:-1px}.pi .-ml-10{margin-left:-10px}.pi .-ml-12{margin-left:-12px}.pi .-ml-3{margin-left:-3px}.pi .-ml-4{margin-left:-4px}.pi .-ml-6{margin-left:-6px}.pi .-mr-4{margin-right:-4px}.pi .-mr-8{margin-right:-8px}.pi .-mt-2{margin-top:-2px}.pi .mb-1{margin-bottom:1px}.pi .mb-10{margin-bottom:10px}.pi .mb-12{margin-bottom:12px}.pi .mb-14{margin-bottom:14px}.pi .mb-16{margin-bottom:16px}.pi .mb-2{margin-bottom:2px}.pi .mb-20{margin-bottom:20px}.pi .mb-24{margin-bottom:24px}.pi .mb-30{margin-bottom:30px}.pi .mb-32{margin-bottom:32px}.pi .mb-4{margin-bottom:4px}.pi .mb-40{margin-bottom:40px}.pi .mb-48{margin-bottom:48px}.pi .mb-50{margin-bottom:50px}.pi .mb-6{margin-bottom:6px}.pi .mb-64{margin-bottom:64px}.pi .mb-8{margin-bottom:8px}.pi .ml-10{margin-left:10px}.pi .ml-12{margin-left:12px}.pi .ml-6{margin-left:6px}.pi .ml-8{margin-left:8px}.pi .ml-auto{margin-left:auto}.pi .mr-10{margin-right:10px}.pi .mr-12{margin-right:12px}.pi .mr-14{margin-right:14px}.pi .mr-16{margin-right:16px}.pi .mr-2{margin-right:2px}.pi .mr-20{margin-right:20px}.pi .mr-24{margin-right:24px}.pi .mr-4{margin-right:4px}.pi .mr-5{margin-right:5px}.pi .mr-6{margin-right:6px}.pi .mr-8{margin-right:8px}.pi .mr-auto{margin-right:auto}.pi .mt-0{margin-top:0}.pi .mt-10{margin-top:10px}.pi .mt-12{margin-top:12px}.pi .mt-14{margin-top:14px}.pi .mt-16{margin-top:16px}.pi .mt-18{margin-top:18px}.pi .mt-2{margin-top:2px}.pi .mt-20{margin-top:20px}.pi .mt-24{margin-top:24px}.pi .mt-30{margin-top:30px}.pi .mt-32{margin-top:32px}.pi .mt-34{margin-top:2.125rem}.pi .mt-36{margin-top:36px}.pi .mt-4{margin-top:4px}.pi .mt-40{margin-top:40px}.pi .mt-50{margin-top:50px}.pi .mt-6{margin-top:6px}.pi .mt-60{margin-top:60px}.pi .mt-8{margin-top:8px}.pi .mt-80{margin-top:80px}.pi .mt-auto{margin-top:auto}.pi .box-content{box-sizing:content-box}.pi .block{display:block}.pi .inline-block{display:inline-block}.pi .inline{display:inline}.pi .flex{display:flex}.pi .inline-flex{display:inline-flex}.pi .table{display:table}.pi .table-cell{display:table-cell}.pi .table-row{display:table-row}.pi .\\!grid{display:grid!important}.pi .grid{display:grid}.pi .contents{display:contents}.pi .hidden{display:none}.pi .aspect-square{aspect-ratio:1/1}.pi .aspect-video{aspect-ratio:16/9}.pi .h-1{height:1px}.pi .h-12{height:12px}.pi .h-128{height:128px}.pi .h-14{height:14px}.pi .h-144{height:144px}.pi .h-16{height:16px}.pi .h-18{height:18px}.pi .h-192{height:192px}.pi .h-2{height:2px}.pi .h-2\\/4{height:50%}.pi .h-20{height:20px}.pi .h-22{height:22px}.pi .h-24{height:24px}.pi .h-26{height:26px}.pi .h-28{height:28px}.pi .h-30{height:30px}.pi .h-32{height:32px}.pi .h-36{height:36px}.pi .h-38{height:2.375rem}.pi .h-4{height:4px}.pi .h-40{height:40px}.pi .h-400{height:25rem}.pi .h-42{height:42px}.pi .h-46{height:2.875rem}.pi .h-48{height:48px}.pi .h-50{height:50px}.pi .h-54{height:3.375rem}.pi .h-56{height:56px}.pi .h-6{height:6px}.pi .h-60{height:60px}.pi .h-64{height:64px}.pi .h-68{height:68px}.pi .h-8{height:8px}.pi .h-80{height:80px}.pi .h-84{height:84px}.pi .h-90{height:5.625rem}.pi .h-92{height:92px}.pi .h-\\[186px\\]{height:186px}.pi .h-\\[54px\\]{height:54px}.pi .h-\\[97px\\]{height:97px}.pi .h-auto{height:auto}.pi .h-font{height:1em}.pi .h-full{height:100%}.pi .h-px{height:1px}.pi .max-h-100{max-height:6.25rem}.pi .max-h-240{max-height:240px}.pi .max-h-26{max-height:26px}.pi .max-h-36{max-height:36px}.pi .max-h-400{max-height:25rem}.pi .max-h-8{max-height:8px}.pi .max-h-\\[340px\\]{max-height:340px}.pi .max-h-\\[36px\\]{max-height:36px}.pi .max-h-\\[600px\\]{max-height:600px}.pi .max-h-\\[calc\\(100\\%-30px\\)\\]{max-height:calc(100% - 30px)}.pi .max-h-\\[calc\\(100\\%-40px\\)\\]{max-height:calc(100% - 40px)}.pi .max-h-\\[calc\\(100vh-90px\\)\\]{max-height:calc(100vh - 90px)}.pi .max-h-dialog{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .max-h-full{max-height:100%}.pi .max-h-inherit{max-height:inherit}.pi .max-h-tray{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-200{min-height:12.5rem}.pi .min-h-24{min-height:24px}.pi .min-h-30{min-height:30px}.pi .min-h-36{min-height:36px}.pi .min-h-42{min-height:42px}.pi .min-h-440{min-height:27.5rem}.pi .min-h-50{min-height:50px}.pi .min-h-60{min-height:60px}.pi .min-h-70{min-height:70px}.pi .min-h-86{min-height:86px}.pi .min-h-90{min-height:5.625rem}.pi .min-h-\\[238px\\]{min-height:238px}.pi .min-h-\\[303px\\]{min-height:303px}.pi .min-h-\\[340px\\]{min-height:340px}.pi .min-h-dialog{min-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-full{min-height:100%}.pi .\\!w-auto{width:auto!important}.pi .w-1{width:1px}.pi .w-1\\/2{width:50%}.pi .w-1\\/3{width:33.333333%}.pi .w-100{width:6.25rem}.pi .w-110{width:110px}.pi .w-12{width:12px}.pi .w-128{width:128px}.pi .w-1280{width:80rem}.pi .w-14{width:14px}.pi .w-144{width:144px}.pi .w-16{width:16px}.pi .w-18{width:18px}.pi .w-192{width:192px}.pi .w-2{width:2px}.pi .w-20{width:20px}.pi .w-22{width:22px}.pi .w-224{width:224px}.pi .w-24{width:24px}.pi .w-240{width:240px}.pi .w-256{width:256px}.pi .w-26{width:26px}.pi .w-28{width:28px}.pi .w-280{width:17.5rem}.pi .w-288{width:288px}.pi .w-30{width:30px}.pi .w-32{width:32px}.pi .w-320{width:320px}.pi .w-36{width:36px}.pi .w-38{width:2.375rem}.pi .w-384{width:384px}.pi .w-40{width:40px}.pi .w-42{width:42px}.pi .w-440{width:27.5rem}.pi .w-46{width:2.875rem}.pi .w-50{width:50px}.pi .w-56{width:56px}.pi .w-60{width:60px}.pi .w-620{width:38.75rem}.pi .w-64{width:64px}.pi .w-68{width:68px}.pi .w-780{width:48.75rem}.pi .w-8{width:8px}.pi .w-80{width:80px}.pi .w-84{width:84px}.pi .w-850{width:53.125rem}.pi .w-90{width:5.625rem}.pi .w-96{width:96px}.pi .w-\\[168px\\]{width:168px}.pi .w-\\[170px\\]{width:170px}.pi .w-\\[233px\\]{width:233px}.pi .w-\\[480px\\]{width:480px}.pi .w-\\[4ch\\]{width:4ch}.pi .w-\\[calc\\(100\\%-40px\\)\\]{width:calc(100% - 40px)}.pi .w-auto{width:auto}.pi .w-font{width:1em}.pi .w-full{width:100%}.pi .w-max{width:-moz-max-content;width:max-content}.pi .w-min{width:-moz-min-content;width:min-content}.pi .w-px{width:1px}.pi .min-w-0{min-width:0}.pi .min-w-128{min-width:128px}.pi .min-w-140{min-width:8.75rem}.pi .min-w-144{min-width:144px}.pi .min-w-160{min-width:160px}.pi .min-w-180{min-width:11.25rem}.pi .min-w-192{min-width:192px}.pi .min-w-200{min-width:12.5rem}.pi .min-w-288{min-width:288px}.pi .min-w-320{min-width:320px}.pi .min-w-4{min-width:4px}.pi .min-w-40{min-width:40px}.pi .min-w-42{min-width:42px}.pi .min-w-500{min-width:31.25rem}.pi .min-w-80{min-width:80px}.pi .min-w-90{min-width:5.625rem}.pi .min-w-\\[300px\\]{min-width:300px}.pi .min-w-min{min-width:-moz-min-content;min-width:min-content}.pi .max-w-100{max-width:6.25rem}.pi .max-w-110{max-width:110px}.pi .max-w-112{max-width:112px}.pi .max-w-124{max-width:7.75rem}.pi .max-w-180{max-width:11.25rem}.pi .max-w-224{max-width:224px}.pi .max-w-240{max-width:240px}.pi .max-w-280{max-width:17.5rem}.pi .max-w-288{max-width:288px}.pi .max-w-320{max-width:320px}.pi .max-w-36{max-width:36px}.pi .max-w-375{max-width:375px}.pi .max-w-384{max-width:384px}.pi .max-w-4\\/5{max-width:80%}.pi .max-w-400{max-width:25rem}.pi .max-w-440{max-width:27.5rem}.pi .max-w-500{max-width:31.25rem}.pi .max-w-580{max-width:36.25rem}.pi .max-w-620{max-width:38.75rem}.pi .max-w-84{max-width:84px}.pi .max-w-\\[464px\\]{max-width:464px}.pi .max-w-\\[90\\%\\]{max-width:90%}.pi .max-w-\\[calc\\(100\\%-40px\\)\\]{max-width:calc(100% - 40px)}.pi .max-w-\\[calc\\(100vw-90px\\)\\]{max-width:calc(100vw - 90px)}.pi .max-w-dialog{max-width:calc(var(--be-viewport-width, 100vw)*.9)}.pi .max-w-full{max-width:100%}.pi .max-w-max{max-width:-moz-max-content;max-width:max-content}.pi .flex-1{flex:1 1 0%}.pi .flex-2{flex:2 1 0%}.pi .flex-3{flex:3 1 0%}.pi .flex-auto{flex:1 1 auto}.pi .flex-initial{flex:0 1 auto}.pi .flex-shrink-0,.pi .shrink-0{flex-shrink:0}.pi .origin-\\[100\\%\\]{transform-origin:100%}.pi .-translate-x-1\\/2{--tw-translate-x:-50%}.pi .-translate-x-1\\/2,.pi .-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .-translate-y-1\\/2{--tw-translate-y:-50%}.pi .rotate-0{--tw-rotate:0deg}.pi .rotate-0,.pi .rotate-180{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-180{--tw-rotate:180deg}.pi .rotate-45{--tw-rotate:45deg}.pi .rotate-45,.pi .rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-90{--tw-rotate:90deg}.pi .transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .cursor-default{cursor:default}.pi .cursor-move{cursor:move}.pi .cursor-nesw-resize{cursor:nesw-resize}.pi .cursor-not-allowed{cursor:not-allowed}.pi .cursor-nwse-resize{cursor:nwse-resize}.pi .cursor-pointer{cursor:pointer}.pi .cursor-se-resize{cursor:se-resize}.pi .cursor-sw-resize{cursor:sw-resize}.pi .cursor-zoom-in{cursor:zoom-in}.pi .touch-none{touch-action:none}.pi .select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .resize-none{resize:none}.pi .resize{resize:both}.pi .snap-x{scroll-snap-type:x var(--tw-scroll-snap-strictness)}.pi .snap-mandatory{--tw-scroll-snap-strictness:mandatory}.pi .snap-start{scroll-snap-align:start}.pi .snap-normal{scroll-snap-stop:normal}.pi .snap-always{scroll-snap-stop:always}.pi .appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.pi .break-inside-avoid{-moz-column-break-inside:avoid;break-inside:avoid}.pi .grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.pi .grid-cols-5-min-content{grid-template-columns:repeat(5,min-content)}.pi .grid-cols-\\[repeat\\(auto-fill\\,minmax\\(90px\\,1fr\\)\\)\\]{grid-template-columns:repeat(auto-fill,minmax(90px,1fr))}.pi .flex-row{flex-direction:row}.pi .flex-col{flex-direction:column}.pi .flex-col-reverse{flex-direction:column-reverse}.pi .flex-wrap{flex-wrap:wrap}.pi .flex-nowrap{flex-wrap:nowrap}.pi .items-start{align-items:flex-start}.pi .items-end{align-items:flex-end}.pi .items-center{align-items:center}.pi .items-stretch{align-items:stretch}.pi .justify-start{justify-content:flex-start}.pi .justify-end{justify-content:flex-end}.pi .justify-center{justify-content:center}.pi .justify-between{justify-content:space-between}.pi .gap-10{gap:10px}.pi .gap-12{gap:12px}.pi .gap-14{gap:14px}.pi .gap-16{gap:16px}.pi .gap-18{gap:18px}.pi .gap-2{gap:2px}.pi .gap-20{gap:20px}.pi .gap-24{gap:24px}.pi .gap-30{gap:30px}.pi .gap-32{gap:32px}.pi .gap-36{gap:36px}.pi .gap-4{gap:4px}.pi .gap-40{gap:40px}.pi .gap-6{gap:6px}.pi .gap-64{gap:64px}.pi .gap-8{gap:8px}.pi .gap-x-10{-moz-column-gap:10px;column-gap:10px}.pi .gap-x-16{-moz-column-gap:16px;column-gap:16px}.pi .space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(10px*var(--tw-space-y-reverse));margin-top:calc(10px*(1 - var(--tw-space-y-reverse)))}.pi .self-stretch{align-self:stretch}.pi .overflow-auto{overflow:auto}.pi .overflow-hidden{overflow:hidden}.pi .overflow-x-auto{overflow-x:auto}.pi .overflow-y-auto{overflow-y:auto}.pi .overflow-x-hidden{overflow-x:hidden}.pi .overflow-y-hidden{overflow-y:hidden}.pi .overflow-y-visible{overflow-y:visible}.pi .scroll-smooth{scroll-behavior:smooth}.pi .truncate{overflow:hidden;white-space:nowrap}.pi .overflow-ellipsis,.pi .text-ellipsis,.pi .truncate{text-overflow:ellipsis}.pi .whitespace-normal{white-space:normal}.pi .whitespace-nowrap{white-space:nowrap}.pi .whitespace-pre-wrap{white-space:pre-wrap}.pi .break-words{overflow-wrap:break-word}.pi .rounded{border-radius:4px}.pi .rounded-2xl{border-radius:16px}.pi .rounded-3xl{border-radius:24px}.pi .rounded-full{border-radius:9999px}.pi .rounded-lg{border-radius:8px}.pi .rounded-md{border-radius:6px}.pi .rounded-none{border-radius:0}.pi .rounded-sm{border-radius:2px}.pi .rounded-xl{border-radius:12px}.pi .rounded-l{border-bottom-left-radius:4px;border-top-left-radius:4px}.pi .rounded-l-full{border-bottom-left-radius:9999px;border-top-left-radius:9999px}.pi .rounded-l-md{border-bottom-left-radius:6px;border-top-left-radius:6px}.pi .rounded-l-none{border-bottom-left-radius:0;border-top-left-radius:0}.pi .rounded-r{border-bottom-right-radius:4px;border-top-right-radius:4px}.pi .rounded-r-full{border-bottom-right-radius:9999px;border-top-right-radius:9999px}.pi .rounded-r-md{border-bottom-right-radius:6px;border-top-right-radius:6px}.pi .rounded-r-none{border-bottom-right-radius:0;border-top-right-radius:0}.pi .rounded-t{border-top-left-radius:4px;border-top-right-radius:4px}.pi .rounded-bl-none{border-bottom-left-radius:0}.pi .rounded-br-none{border-bottom-right-radius:0}.pi .rounded-tl-none{border-top-left-radius:0}.pi .rounded-tr-none{border-top-right-radius:0}.pi .border{border-width:1px}.pi .border-2{border-width:2px}.pi .border-4{border-width:4px}.pi .border-\\[3px\\]{border-width:3px}.pi .border-x{border-left-width:1px;border-right-width:1px}.pi .border-y{border-top-width:1px}.pi .border-b,.pi .border-y{border-bottom-width:1px}.pi .border-b-4{border-bottom-width:4px}.pi .border-l{border-left-width:1px}.pi .border-l-4{border-left-width:4px}.pi .border-r{border-right-width:1px}.pi .border-r-4{border-right-width:4px}.pi .border-t{border-top-width:1px}.pi .border-t-4{border-top-width:4px}.pi .border-dotted{border-style:dotted}.pi .border-none{border-style:none}.pi .border-background{--tw-border-opacity:1;border-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-bg-alt{--tw-border-opacity:1;border-color:rgb(var(--be-background-alt)/var(--tw-border-opacity))}.pi .border-chip{--tw-border-opacity:1;border-color:rgb(var(--be-background-chip)/var(--tw-border-opacity))}.pi .border-danger{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-danger\\/50{border-color:#ef444480}.pi .border-divider{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-paper{--tw-border-opacity:1;border-color:rgb(var(--be-paper)/var(--tw-border-opacity))}.pi .border-primary{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-primary\\/50{border-color:rgb(var(--be-primary)/.5)}.pi .border-text-muted{border-color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .border-transparent{border-color:transparent}.pi .border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .border-white\\/30{border-color:#ffffff4d}.pi .border-white\\/50{border-color:#ffffff80}.pi .border-b-divider{border-bottom-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-b-primary{--tw-border-opacity:1;border-bottom-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-l-danger{--tw-border-opacity:1;border-left-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-l-positive{--tw-border-opacity:1;border-left-color:rgb(34 197 94/var(--tw-border-opacity))}.pi .border-l-primary{--tw-border-opacity:1;border-left-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-l-transparent{border-left-color:transparent}.pi .border-l-warning{--tw-border-opacity:1;border-left-color:rgb(243 164 50/var(--tw-border-opacity))}.pi .border-r-primary-light{--tw-border-opacity:1;border-right-color:rgb(var(--be-primary-light)/var(--tw-border-opacity))}.pi .border-r-transparent{border-right-color:transparent}.pi .border-t-divider{border-top-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-alt{--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi .bg-background{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-background\\/70{background-color:rgb(var(--be-background)/.7)}.pi .bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.pi .bg-black\\/20{background-color:#0003}.pi .bg-black\\/30{background-color:#0000004d}.pi .bg-black\\/50{background-color:#00000080}.pi .bg-black\\/60{background-color:#0009}.pi .bg-black\\/80{background-color:#000c}.pi .bg-chip{--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi .bg-controls{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-danger{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .bg-danger-lighter{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.pi .bg-danger\\/6{background-color:#ef44440f}.pi .bg-danger\\/focus{background-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .bg-divider{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg-envato{--tw-bg-opacity:1;background-color:rgb(108 161 43/var(--tw-bg-opacity))}.pi .bg-fg-base\\/4{background-color:rgb(var(--be-foreground-base)/4%)}.pi .bg-fg-base\\/8{background-color:rgb(var(--be-foreground-base)/8%)}.pi .bg-focus{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .bg-inherit{background-color:inherit}.pi .bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}.pi .bg-positive{--tw-bg-opacity:1;background-color:rgb(34 197 94/var(--tw-bg-opacity))}.pi .bg-positive-lighter{--tw-bg-opacity:1;background-color:rgb(187 247 208/var(--tw-bg-opacity))}.pi .bg-positive\\/focus{background-color:rgb(34 197 94/var(--be-focus-opacity))}.pi .bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .bg-primary-dark{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .bg-primary-light{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-light)/var(--tw-bg-opacity))}.pi .bg-primary-light\\/20{background-color:rgb(var(--be-primary-light)/.2)}.pi .bg-primary-light\\/40{background-color:rgb(var(--be-primary-light)/.4)}.pi .bg-primary\\/10{background-color:rgb(var(--be-primary)/.1)}.pi .bg-primary\\/5{background-color:rgb(var(--be-primary)/.05)}.pi .bg-primary\\/focus{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .bg-primary\\/hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .bg-primary\\/selected{background-color:rgb(var(--be-primary)/var(--be-selected-opacity))}.pi .bg-selected{background-color:rgb(var(--be-foreground-base)/var(--be-selected-opacity))}.pi .bg-slider-disabled{--tw-bg-opacity:1;background-color:rgb(189 189 189/var(--tw-bg-opacity))}.pi .bg-slider-disabled\\/60{background-color:#bdbdbd99}.pi .bg-toast{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-transparent{background-color:transparent}.pi .bg-warning{--tw-bg-opacity:1;background-color:rgb(243 164 50/var(--tw-bg-opacity))}.pi .bg-warning\\/15{background-color:#f3a43226}.pi .bg-warning\\/focus{background-color:rgb(243 164 50/var(--be-focus-opacity))}.pi .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .bg-white\\/20{background-color:#fff3}.pi .bg-white\\/40{background-color:#fff6}.pi .bg-white\\/50{background-color:#ffffff80}.pi .bg-opacity-95{--tw-bg-opacity:.95}.pi .bg-contain{background-size:contain}.pi .bg-cover{background-size:cover}.pi .bg-bottom{background-position:bottom}.pi .bg-center{background-position:50%}.pi .bg-no-repeat{background-repeat:no-repeat}.pi .bg-repeat-x{background-repeat:repeat-x}.pi .fill-current{fill:currentColor}.pi .fill-transparent{fill:transparent}.pi .stroke-current{stroke:currentColor}.pi .object-contain{-o-object-fit:contain;object-fit:contain}.pi .object-cover{-o-object-fit:cover;object-fit:cover}.pi .p-0{padding:0}.pi .p-10{padding:10px}.pi .p-12{padding:12px}.pi .p-14{padding:14px}.pi .p-16{padding:16px}.pi .p-18{padding:18px}.pi .p-2{padding:2px}.pi .p-20{padding:20px}.pi .p-24{padding:24px}.pi .p-4{padding:4px}.pi .p-40{padding:40px}.pi .p-6{padding:6px}.pi .p-8{padding:8px}.pi .px-10{padding-left:10px;padding-right:10px}.pi .px-12{padding-left:12px;padding-right:12px}.pi .px-14{padding-left:14px;padding-right:14px}.pi .px-16{padding-left:16px;padding-right:16px}.pi .px-18{padding-left:18px;padding-right:18px}.pi .px-20{padding-left:20px;padding-right:20px}.pi .px-22{padding-left:22px;padding-right:22px}.pi .px-24{padding-left:24px;padding-right:24px}.pi .px-26{padding-left:26px;padding-right:26px}.pi .px-28{padding-left:28px;padding-right:28px}.pi .px-32{padding-left:32px;padding-right:32px}.pi .px-4{padding-left:4px;padding-right:4px}.pi .px-40{padding-left:40px;padding-right:40px}.pi .px-5vw{padding-left:5vw;padding-right:5vw}.pi .px-6{padding-left:6px;padding-right:6px}.pi .px-8{padding-left:8px;padding-right:8px}.pi .py-10{padding-bottom:10px;padding-top:10px}.pi .py-12{padding-bottom:12px;padding-top:12px}.pi .py-14{padding-bottom:14px;padding-top:14px}.pi .py-2{padding-bottom:2px;padding-top:2px}.pi .py-20{padding-bottom:20px;padding-top:20px}.pi .py-28{padding-bottom:28px;padding-top:28px}.pi .py-3{padding-bottom:3px;padding-top:3px}.pi .py-32{padding-bottom:32px;padding-top:32px}.pi .py-4{padding-bottom:4px;padding-top:4px}.pi .py-40{padding-bottom:40px;padding-top:40px}.pi .py-5{padding-bottom:5px;padding-top:5px}.pi .py-56{padding-bottom:56px;padding-top:56px}.pi .py-6{padding-bottom:6px;padding-top:6px}.pi .py-8{padding-bottom:8px;padding-top:8px}.pi .py-90{padding-bottom:5.625rem;padding-top:5.625rem}.pi .py-96{padding-bottom:96px;padding-top:96px}.pi .py-\\[9px\\]{padding-bottom:9px;padding-top:9px}.pi .pb-10{padding-bottom:10px}.pi .pb-12{padding-bottom:12px}.pi .pb-14{padding-bottom:14px}.pi .pb-16{padding-bottom:16px}.pi .pb-18{padding-bottom:18px}.pi .pb-20{padding-bottom:20px}.pi .pb-24{padding-bottom:24px}.pi .pb-28{padding-bottom:28px}.pi .pb-30{padding-bottom:30px}.pi .pb-32{padding-bottom:32px}.pi .pb-4{padding-bottom:4px}.pi .pb-48{padding-bottom:48px}.pi .pb-6{padding-bottom:6px}.pi .pb-8{padding-bottom:8px}.pi .pb-safe-area{padding-bottom:env(safe-area-inset-bottom)}.pi .pl-10{padding-left:10px}.pi .pl-12{padding-left:12px}.pi .pl-14{padding-left:14px}.pi .pl-16{padding-left:16px}.pi .pl-18{padding-left:18px}.pi .pl-20{padding-left:20px}.pi .pl-28{padding-left:28px}.pi .pl-4{padding-left:4px}.pi .pl-46{padding-left:2.875rem}.pi .pl-54{padding-left:3.375rem}.pi .pl-8{padding-left:8px}.pi .pr-0{padding-right:0}.pi .pr-10{padding-right:10px}.pi .pr-12{padding-right:12px}.pi .pr-18{padding-right:18px}.pi .pr-28{padding-right:28px}.pi .pr-46{padding-right:2.875rem}.pi .pr-54{padding-right:3.375rem}.pi .pr-6{padding-right:6px}.pi .pr-8{padding-right:8px}.pi .pt-10{padding-top:10px}.pi .pt-12{padding-top:12px}.pi .pt-14{padding-top:14px}.pi .pt-16{padding-top:16px}.pi .pt-20{padding-top:20px}.pi .pt-24{padding-top:24px}.pi .pt-26{padding-top:26px}.pi .pt-30{padding-top:30px}.pi .pt-36{padding-top:36px}.pi .pt-40{padding-top:40px}.pi .pt-42{padding-top:42px}.pi .pt-50{padding-top:50px}.pi .pt-54{padding-top:3.375rem}.pi .pt-6{padding-top:6px}.pi .pt-70{padding-top:70px}.pi .text-left{text-align:left}.pi .text-center{text-align:center}.pi .text-right{text-align:right}.pi .text-start{text-align:start}.pi .text-end{text-align:end}.pi .align-top{vertical-align:top}.pi .align-middle{vertical-align:middle}.pi .font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.pi .text-2xl{font-size:24px;line-height:32px}.pi .text-3xl{font-size:30px;line-height:36px}.pi .text-4xl{font-size:36px;line-height:40px}.pi .text-5xl{font-size:48px;line-height:1}.pi .text-6xl{font-size:60px;line-height:1}.pi .text-base{font-size:16px;line-height:24px}.pi .text-lg{font-size:18px;line-height:28px}.pi .text-sm{font-size:14px;line-height:20px}.pi .text-xl{font-size:20px;line-height:28px}.pi .text-xs{font-size:12px;line-height:16px}.pi .font-bold{font-weight:700}.pi .font-light{font-weight:300}.pi .font-medium{font-weight:500}.pi .font-normal{font-weight:400}.pi .font-semibold{font-weight:600}.pi .uppercase{text-transform:uppercase}.pi .capitalize{text-transform:capitalize}.pi .italic{font-style:italic}.pi .tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.pi .leading-3{line-height:.75rem}.pi .leading-5{line-height:1.25rem}.pi .leading-none{line-height:1}.pi .tracking-wide{letter-spacing:.025em}.pi .\\!text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))!important}.pi .text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.pi .text-black\\/30{color:#0000004d}.pi .text-danger{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.pi .text-danger-darker{--tw-text-opacity:1;color:rgb(153 27 27/var(--tw-text-opacity))}.pi .text-disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .text-facebook{--tw-text-opacity:1;color:rgb(59 89 152/var(--tw-text-opacity))}.pi .text-main{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-muted{color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .text-on-primary{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .text-positive{--tw-text-opacity:1;color:rgb(34 197 94/var(--tw-text-opacity))}.pi .text-positive-darker{--tw-text-opacity:1;color:rgb(22 101 52/var(--tw-text-opacity))}.pi .text-primary{--tw-text-opacity:1;color:rgb(var(--be-primary)/var(--tw-text-opacity))}.pi .text-primary-light{--tw-text-opacity:1;color:rgb(var(--be-primary-light)/var(--tw-text-opacity))}.pi .text-primary\\/40{color:rgb(var(--be-primary)/.4)}.pi .text-twitter{--tw-text-opacity:1;color:rgb(29 161 242/var(--tw-text-opacity))}.pi .text-warning{--tw-text-opacity:1;color:rgb(243 164 50/var(--tw-text-opacity))}.pi .text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.pi .text-white\\/87{color:#ffffffde}.pi .underline{text-decoration-line:underline}.pi .no-underline{text-decoration-line:none}.pi .caret-transparent{caret-color:transparent}.pi .opacity-0{opacity:0}.pi .opacity-100{opacity:1}.pi .opacity-70{opacity:.7}.pi .opacity-80{opacity:.8}.pi .opacity-90{opacity:.9}.pi .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .shadow,.pi .shadow-2xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\]{--tw-shadow:15px 0 30px 0 rgba(0,0,0,.18);--tw-shadow-colored:15px 0 30px 0 var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\],.pi .shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.pi .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .shadow-md,.pi .shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.pi .shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.pi .shadow-sm,.pi .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.pi .outline-none{outline:2px solid transparent;outline-offset:2px}.pi .outline{outline-color:rgb(var(--be-primary-lighter)/1);outline-style:solid;outline-width:2px}.pi .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring,.pi .ring-2{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring-inset{--tw-ring-inset:inset}.pi .ring-primary{--tw-ring-opacity:1;--tw-ring-color:rgb(var(--be-primary)/var(--tw-ring-opacity))}.pi .ring-offset-2{--tw-ring-offset-width:2px}.pi .ring-offset-4{--tw-ring-offset-width:4px}.pi .blur{--tw-blur:blur(8px)}.pi .blur,.pi .grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .grayscale{--tw-grayscale:grayscale(100%)}.pi .invert{--tw-invert:invert(100%)}.pi .invert,.pi .sepia{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .sepia{--tw-sepia:sepia(100%)}.pi .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-bg-color{transition-duration:.15s;transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-button{transition-duration:.15s;transition-property:background-color,box-shadow,border-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-shadow{transition-duration:.15s;transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-width{transition-duration:.15s;transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .duration-100{transition-duration:.1s}.pi .duration-200{transition-duration:.2s}.pi .duration-300{transition-duration:.3s}.pi .will-change-\\[width\\]{will-change:width}.pi .will-change-transform{will-change:transform}.pi .icon-2xs{font-size:.75rem}.pi .icon-xs{font-size:1rem}.pi .icon-sm{font-size:1.25rem}.pi .icon-md{font-size:1.5rem}.pi .icon-lg{font-size:2.1875rem}.pi .icon-xl{font-size:2.6875rem}.pi .no-tap-highlight{-webkit-tap-highlight-color:transparent}@media only screen and (min-device-width:768px){.pi .tiny-scrollbar{scrollbar-color:rgba(0,0,0,.2) transparent;scrollbar-width:thin}.pi .tiny-scrollbar::-webkit-scrollbar{background-color:transparent;height:6px;width:6px}.pi .tiny-scrollbar::-webkit-scrollbar-thumb{background-color:rgb(var(--be-foreground-base)/.2);border-radius:10px}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:start{background:transparent}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:end{background:transparent}}.pi .hide-scrollbar{scrollbar-width:none}.pi .hide-scrollbar::-webkit-scrollbar{background:transparent;height:0;width:0}.pi .svg-icon{fill:currentColor;display:inline-block;flex-shrink:0;transition-duration:.15s;transition-property:transform,fill;transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .cropzone:not(.moving) .cropzone-transition{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .first-letter\\:capitalize:first-letter{text-transform:capitalize}.pi .file\\:mr-10::file-selector-button{margin-right:10px}.pi .file\\:h-24::file-selector-button{height:24px}.pi .file\\:rounded::file-selector-button{border-radius:4px}.pi .file\\:border-none::file-selector-button{border-style:none}.pi .file\\:bg-primary::file-selector-button{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .file\\:px-10::file-selector-button{padding-left:10px;padding-right:10px}.pi .file\\:text-sm::file-selector-button{font-size:14px;line-height:20px}.pi .file\\:font-semibold::file-selector-button{font-weight:600}.pi .file\\:text-on-primary::file-selector-button{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .before\\:absolute:before{content:var(--tw-content);position:absolute}.pi .before\\:left-0:before{content:var(--tw-content);left:0}.pi .before\\:top-1\\/2:before{content:var(--tw-content);top:50%}.pi .before\\:z-10:before{content:var(--tw-content);z-index:10}.pi .before\\:block:before{content:var(--tw-content);display:block}.pi .before\\:h-1:before{content:var(--tw-content);height:1px}.pi .before\\:h-12:before{content:var(--tw-content);height:12px}.pi .before\\:h-14:before{content:var(--tw-content);height:14px}.pi .before\\:h-18:before{content:var(--tw-content);height:18px}.pi .before\\:h-22:before{content:var(--tw-content);height:22px}.pi .before\\:h-28:before{content:var(--tw-content);height:28px}.pi .before\\:h-full:before{content:var(--tw-content);height:100%}.pi .before\\:w-12:before{content:var(--tw-content);width:12px}.pi .before\\:w-14:before{content:var(--tw-content);width:14px}.pi .before\\:w-18:before{content:var(--tw-content);width:18px}.pi .before\\:w-22:before{content:var(--tw-content);width:22px}.pi .before\\:w-28:before{content:var(--tw-content);width:28px}.pi .before\\:w-full:before{content:var(--tw-content);width:100%}.pi .before\\:-translate-y-1\\/2:before{--tw-translate-y:-50%}.pi .before\\:-translate-y-1\\/2:before,.pi .before\\:translate-x-2:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:translate-x-2:before{--tw-translate-x:2px}.pi .before\\:scale-10:before{--tw-scale-x:.1;--tw-scale-y:.1;content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:rounded-3xl:before{border-radius:24px;content:var(--tw-content)}.pi .before\\:rounded-full:before{border-radius:9999px;content:var(--tw-content)}.pi .before\\:border:before{border-width:1px;content:var(--tw-content)}.pi .before\\:bg-divider:before{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));content:var(--tw-content)}.pi .before\\:bg-primary:before{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity));content:var(--tw-content)}.pi .before\\:bg-white:before{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity));content:var(--tw-content)}.pi .before\\:opacity-0:before{content:var(--tw-content);opacity:0}.pi .before\\:transition:before{content:var(--tw-content);transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:transition-transform:before{content:var(--tw-content);transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:duration-200:before{content:var(--tw-content);transition-duration:.2s}.pi .before\\:content-\\[\\\\\\\\00a0\\]:before{--tw-content:\\\\00a0;content:var(--tw-content)}.pi .after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.pi .after\\:absolute:after{content:var(--tw-content);position:absolute}.pi .after\\:inset-0:after{content:var(--tw-content);inset:0}.pi .first\\:capitalize:first-child{text-transform:capitalize}.pi .checked\\:border-danger:checked{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .checked\\:border-primary:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .checked\\:bg-danger:checked{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .checked\\:bg-primary:checked{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .checked\\:before\\:translate-x-16:checked:before{--tw-translate-x:16px}.pi .checked\\:before\\:translate-x-16:checked:before,.pi .checked\\:before\\:translate-x-20:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-20:checked:before{--tw-translate-x:20px}.pi .checked\\:before\\:translate-x-24:checked:before{--tw-translate-x:24px}.pi .checked\\:before\\:translate-x-24:checked:before,.pi .checked\\:before\\:translate-x-30:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-30:checked:before{--tw-translate-x:30px}.pi .checked\\:before\\:translate-x-36:checked:before{--tw-translate-x:36px}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before,.pi .checked\\:before\\:translate-x-36:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before{--tw-scale-x:.65;--tw-scale-y:.65}.pi .checked\\:before\\:border-white:checked:before{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity));content:var(--tw-content)}.pi .checked\\:before\\:opacity-100:checked:before{content:var(--tw-content);opacity:1}.pi .focus-within\\:border-primary\\/60:focus-within{border-color:rgb(var(--be-primary)/.6)}.pi .focus-within\\:ring:focus-within{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-within\\:ring-primary\\/focus:focus-within{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05}.pi .hover\\:scale-105:hover,.pi .hover\\:scale-110:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.pi .hover\\:cursor-move:hover{cursor:move}.pi .hover\\:border-chip\\/90:hover{border-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:border-danger:hover{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .hover\\:border-danger\\/90:hover{border-color:#ef4444e6}.pi .hover\\:border-paper\\/90:hover{border-color:rgb(var(--be-paper)/.9)}.pi .hover\\:border-primary:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .hover\\:border-primary-dark:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .hover\\:bg-chip\\/90:hover{background-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:bg-danger\\/4:hover{background-color:#ef44440a}.pi .hover\\:bg-danger\\/90:hover{background-color:#ef4444e6}.pi .hover\\:bg-fg-base\\/15:hover{background-color:rgb(var(--be-foreground-base)/15%)}.pi .hover\\:bg-focus:hover{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .hover\\:bg-hover:hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .hover\\:bg-paper\\/90:hover{background-color:rgb(var(--be-paper)/.9)}.pi .hover\\:bg-primary-dark:hover{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:bg-primary\\/10:hover{background-color:rgb(var(--be-primary)/.1)}.pi .hover\\:bg-primary\\/4:hover{background-color:rgb(var(--be-primary)/4%)}.pi .hover\\:bg-primary\\/focus:hover{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:bg-primary\\/hover:hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .hover\\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .hover\\:bg-white\\/20:hover{background-color:#fff3}.pi .hover\\:bg-white\\/hover:hover{background-color:rgb(255 255 255/var(--be-hover-opacity))}.pi .hover\\:text:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-fg-base:hover{--tw-text-opacity:1;color:rgb(var(--be-foreground-base)/var(--tw-text-opacity))}.pi .hover\\:text-main:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-primary-dark:hover{--tw-text-opacity:1;color:rgb(var(--be-primary-dark)/var(--tw-text-opacity))}.pi .hover\\:underline:hover{text-decoration-line:underline}.pi .hover\\:opacity-100:hover{opacity:1}.pi .hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .before\\:hover\\:bg-primary-dark:hover:before{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity));content:var(--tw-content)}.pi .hover\\:after\\:bg-black\\/5:hover:after{background-color:#0000000d;content:var(--tw-content)}.pi .checked\\:hover\\:border-primary-dark:hover:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .focus\\:border-danger\\/60:focus{border-color:#ef444499}.pi .focus\\:border-primary\\/60:focus{border-color:rgb(var(--be-primary)/.6)}.pi .focus\\:bg-primary:focus{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .focus\\:text-on-primary:focus{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.pi .focus\\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus\\:ring-danger\\/focus:focus{--tw-ring-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .focus\\:ring-primary\\/focus:focus{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus\\:after\\:bg-black\\/10:focus:after{background-color:#0000001a;content:var(--tw-content)}.pi .focus-visible\\:bg-focus:focus-visible{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .focus-visible\\:bg-primary\\/focus:focus-visible{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus-visible\\:underline:focus-visible{text-decoration-line:underline}.pi .focus-visible\\:outline:focus-visible{outline-style:solid;outline-width:2px}.pi .focus-visible\\:outline-offset-2:focus-visible{outline-offset:2px}.pi .focus-visible\\:outline:focus-visible{outline-color:rgb(var(--be-primary-lighter)/1)}.pi .focus-visible\\:outline-primary-light:focus-visible{outline-color:rgb(var(--be-primary-light)/1)}.pi .focus-visible\\:ring:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.pi .disabled\\:pointer-events-none:disabled{pointer-events:none}.pi .disabled\\:cursor-default:disabled{cursor:default}.pi .disabled\\:border-disabled-bg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:border-disabled-fg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:border-transparent:disabled{border-color:transparent}.pi .disabled\\:border-r-transparent:disabled{border-right-color:transparent}.pi .disabled\\:bg-disabled:disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:bg-transparent:disabled{background-color:transparent}.pi .disabled\\:text-disabled:disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:text-white\\/70:disabled{color:#ffffffb3}.pi .disabled\\:shadow-none:disabled{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .disabled\\:before\\:bg-disabled-fg:disabled:before{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity));content:var(--tw-content)}.pi .group:hover .group-hover\\:visible{visibility:visible}.pi .group:hover .group-hover\\:bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-alt){--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-chip){--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-none){background-image:none}.pi :is(.dark .dark\\:text-white\\/50){color:#ffffff80}.pi :is(.dark .dark\\:opacity-5){opacity:.05}.pi :is(.dark .dark\\:opacity-80){opacity:.8}.pi :is(.dark .dark\\:checked\\:border-primary-dark:checked){--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi :is(.dark .dark\\:checked\\:bg-primary-dark:checked){--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}@media (min-width:640px){.pi .sm\\:justify-start{justify-content:flex-start}.pi .sm\\:text-sm{font-size:14px;line-height:20px}}@media (min-width:768px){.pi .md\\:invisible{visibility:hidden}.pi .md\\:mx-40{margin-left:40px;margin-right:40px}.pi .md\\:my-24{margin-bottom:24px;margin-top:24px}.pi .md\\:my-64{margin-bottom:64px;margin-top:64px}.pi .md\\:my-80{margin-bottom:80px;margin-top:80px}.pi .md\\:mb-0{margin-bottom:0}.pi .md\\:mb-24{margin-bottom:24px}.pi .md\\:mb-40{margin-bottom:40px}.pi .md\\:mb-70{margin-bottom:70px}.pi .md\\:mr-0{margin-right:0}.pi .md\\:mr-10{margin-right:10px}.pi .md\\:mr-24{margin-right:24px}.pi .md\\:mr-80{margin-right:80px}.pi .md\\:mt-0{margin-top:0}.pi .md\\:mt-60{margin-top:60px}.pi .md\\:block{display:block}.pi .md\\:flex{display:flex}.pi .md\\:h-0{height:0}.pi .md\\:w-1\\/3{width:33.333333%}.pi .md\\:w-320{width:320px}.pi .md\\:w-400{width:25rem}.pi .md\\:min-w-240{min-width:240px}.pi .md\\:min-w-86{min-width:86px}.pi .md\\:max-w-350{max-width:21.875rem}.pi .md\\:max-w-950{max-width:59.375rem}.pi .md\\:flex-row{flex-direction:row}.pi .md\\:items-start{align-items:flex-start}.pi .md\\:items-center{align-items:center}.pi .md\\:gap-112{gap:112px}.pi .md\\:gap-12{gap:12px}.pi .md\\:gap-24{gap:24px}.pi .md\\:gap-80{gap:80px}.pi .md\\:overflow-hidden{overflow:hidden}.pi .md\\:p-24{padding:24px}.pi .md\\:p-40{padding:40px}.pi .md\\:px-0{padding-left:0;padding-right:0}.pi .md\\:px-10vw{padding-left:10vw;padding-right:10vw}.pi .md\\:px-176{padding-left:176px;padding-right:176px}.pi .md\\:px-20{padding-left:20px;padding-right:20px}.pi .md\\:px-24{padding-left:24px;padding-right:24px}.pi .md\\:px-30{padding-left:30px;padding-right:30px}.pi .md\\:py-80{padding-bottom:80px;padding-top:80px}.pi .md\\:pb-0{padding-bottom:0}.pi .md\\:pb-54{padding-bottom:3.375rem}.pi .md\\:pl-20{padding-left:20px}.pi .md\\:pt-128{padding-top:128px}.pi .md\\:text-left{text-align:left}.pi .md\\:text-3xl{font-size:30px;line-height:36px}.pi .md\\:text-4xl{font-size:36px;line-height:40px}.pi .md\\:text-5xl{font-size:48px;line-height:1}.pi .md\\:text-base{font-size:16px;line-height:24px}.pi .md\\:text-lg{font-size:18px;line-height:28px}.pi .md\\:font-medium{font-weight:500}.pi .md\\:font-normal{font-weight:400}.pi .md\\:shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media (min-width:1024px){.pi .lg\\:block{display:block}.pi .lg\\:flex-row{flex-direction:row}.pi .lg\\:px-96{padding-left:96px;padding-right:96px}.pi .lg\\:py-96{padding-bottom:96px;padding-top:96px}.pi .lg\\:pb-0{padding-bottom:0}}@media (min-width:1280px){.pi .xl\\:w-1\\/2{width:50%}.pi .xl\\:pt-96{padding-top:96px}}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-2:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-inset:focus-visible>.tree-label{--tw-ring-inset:inset}
`;let Zv=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");class EE{constructor(e,n){Ce(this,"timerId");Ce(this,"createdAt",0);this.callback=e,this.remaining=n,this.resume()}pause(){clearTimeout(this.timerId),this.remaining-=Date.now()-this.createdAt}resume(){this.createdAt=Date.now(),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}clear(){clearTimeout(this.timerId)}}const OE=1;function PE(t){switch(t){case"danger":return 8e3;case"loading":return 0;default:return 3e3}}const Qv=vv()(Bv((t,e)=>({toasts:[],add:(n,r)=>{var h;const i=e().toasts.length+1-OE;i>0&&t(l=>{l.toasts.splice(0,i)});const s=(r==null?void 0:r.id)||Zv(6),d=(r==null?void 0:r.type)||"positive",a=(h=r==null?void 0:r.duration)!=null?h:PE(d),o={timer:a>0?new EE(()=>e().remove(s),a):null,message:n,...r,id:s,type:d,position:(r==null?void 0:r.position)||"bottom-center",duration:a,disableExitAnimation:r==null?void 0:r.disableExitAnimation,disableEnterAnimation:r==null?void 0:r.disableEnterAnimation},c=e().toasts.findIndex(l=>l.id===o.id);c>-1?t(l=>{l.toasts[c]=o}):t(l=>{l.toasts.push(o)})},remove:n=>{const r=e().toasts.filter(i=>{var s;return n===i.id?((s=i.timer)==null||s.clear(),!1):!0});t(i=>{i.toasts=r})}})));function Ki(){return Qv.getState()}function qi(t,e){Ki().add(t,e)}qi.danger=(t,e)=>{Ki().add(t,{...e,type:"danger"})},qi.positive=(t,e)=>{Ki().add(t,{...e,type:"positive"})},qi.loading=(t,e)=>{Ki().add(t,{...e,type:"loading"})};var Zi={exports:{}},$t={},Jv={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,T){var P=H.length;H.push(T);e:for(;0<P;){var D=P-1>>>1,R=H[D];if(0<i(R,T))H[D]=T,H[P]=R,P=D;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var T=H[0],P=H.pop();if(P!==T){H[0]=P;e:for(var D=0,R=H.length,$=R>>>1;D<$;){var A=2*(D+1)-1,O=H[A],z=A+1,B=H[z];if(0>i(O,P))z<R&&0>i(B,O)?(H[D]=B,H[z]=P,D=z):(H[D]=O,H[A]=P,D=A);else if(z<R&&0>i(B,P))H[D]=B,H[z]=P,D=z;else break e}}return T}function i(H,T){var P=H.sortIndex-T.sortIndex;return P!==0?P:H.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var d=Date,a=d.now();t.unstable_now=function(){return d.now()-a}}var o=[],c=[],h=1,l=null,u=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var T=n(c);T!==null;){if(T.callback===null)r(c);else if(T.startTime<=H)r(c),T.sortIndex=T.expirationTime,e(o,T);else break;T=n(c)}}function w(H){if(m=!1,b(H),!p)if(n(o)!==null)p=!0,ie(x);else{var T=n(c);T!==null&&ce(w,T.startTime-H)}}function x(H,T){p=!1,m&&(m=!1,v(k),k=-1),f=!0;var P=u;try{for(b(T),l=n(o);l!==null&&(!(l.expirationTime>T)||H&&!j());){var D=l.callback;if(typeof D=="function"){l.callback=null,u=l.priorityLevel;var R=D(l.expirationTime<=T);T=t.unstable_now(),typeof R=="function"?l.callback=R:l===n(o)&&r(o),b(T)}else r(o);l=n(o)}if(l!==null)var $=!0;else{var A=n(c);A!==null&&ce(w,A.startTime-T),$=!1}return $}finally{l=null,u=P,f=!1}}var S=!1,C=null,k=-1,I=5,F=-1;function j(){return!(t.unstable_now()-F<I)}function q(){if(C!==null){var H=t.unstable_now();F=H;var T=!0;try{T=C(!0,H)}finally{T?te():(S=!1,C=null)}}else S=!1}var te;if(typeof y=="function")te=function(){y(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=q,te=function(){Y.postMessage(null)}}else te=function(){g(q,0)};function ie(H){C=H,S||(S=!0,te())}function ce(H,T){k=g(function(){H(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ie(x))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return n(o)},t.unstable_next=function(H){switch(u){case 1:case 2:case 3:var T=3;break;default:T=u}var P=u;u=T;try{return H()}finally{u=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,T){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var P=u;u=H;try{return T()}finally{u=P}},t.unstable_scheduleCallback=function(H,T,P){var D=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?D+P:D):P=D,H){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=P+R,H={id:h++,callback:T,priorityLevel:H,startTime:P,expirationTime:R,sortIndex:-1},P>D?(H.sortIndex=P,e(c,H),n(o)===null&&H===n(c)&&(m?(v(k),k=-1):m=!0,ce(w,P-D))):(H.sortIndex=R,e(o,H),p||f||(p=!0,ie(x))),H},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(H){var T=u;return function(){var P=u;u=T;try{return H.apply(this,arguments)}finally{u=P}}}})(e0),function(t){t.exports=e0}(Jv);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0=E.exports,Ut=Jv.exports;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,hs={};function Kr(t,e){Qi(t,e),Qi(t+"Capture",e)}function Qi(t,e){for(hs[t]=e,t=0;t<e.length;t++)n0.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,ME=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r0={},i0={};function AE(t){return Ff.call(i0,t)?!0:Ff.call(r0,t)?!1:ME.test(t)?i0[t]=!0:(r0[t]=!0,!1)}function DE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RE(t,e,n,r){if(e===null||typeof e>"u"||DE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=d}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new St(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new St(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new St(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new St(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){lt[t]=new St(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){lt[t]=new St(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){lt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function Nf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,Nf);lt[e]=new St(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,Nf);lt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,Nf);lt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)}),lt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){lt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function jf(t,e,n,r){var i=lt.hasOwnProperty(e)?lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RE(e,n,i,r)&&(n=null),r||i===null?AE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=t0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),eo=Symbol.for("react.fragment"),Bf=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),$f=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),Wf=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),a0=Symbol.for("react.offscreen"),l0=Symbol.iterator;function ds(t){return t===null||typeof t!="object"?null:(t=l0&&t[l0]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Yf;function ps(t){if(Yf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yf=e&&e[1]||""}return`
`+Yf+t}var Xf=!1;function Gf(t,e){if(!t||Xf)return"";Xf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),d=i.length-1,a=s.length-1;1<=d&&0<=a&&i[d]!==s[a];)a--;for(;1<=d&&0<=a;d--,a--)if(i[d]!==s[a]){if(d!==1||a!==1)do if(d--,a--,0>a||i[d]!==s[a]){var o=`
`+i[d].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=d&&0<=a);break}}}finally{Xf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ps(t):""}function IE(t){switch(t.tag){case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return t=Gf(t.type,!1),t;case 11:return t=Gf(t.type.render,!1),t;case 1:return t=Gf(t.type,!0),t;default:return""}}function Kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eo:return"Fragment";case Ji:return"Portal";case Vf:return"Profiler";case Bf:return"StrictMode";case Uf:return"Suspense";case Hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s0:return(t.displayName||"Context")+".Consumer";case o0:return(t._context.displayName||"Context")+".Provider";case $f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wf:return e=t.displayName||null,e!==null?e:Kf(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Kf(t(e))}catch{}}return null}function LE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kf(e);case 8:return e===Bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function c0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FE(t){var e=c0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(d){r=""+d,s.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gl(t){t._valueTracker||(t._valueTracker=FE(t))}function u0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=c0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function f0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h0(t,e){e=e.checked,e!=null&&jf(t,"checked",e,!1)}function Zf(t,e){h0(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qf(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qf(t,e,n){(e!=="number"||ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gs=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function p0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(gs(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function g0(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function m0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vl,y0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zE=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(t){zE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vs[e]=vs[t]})});function b0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vs.hasOwnProperty(t)&&vs[t]?(""+e).trim():e+"px"}function w0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=b0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NE=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function th(t,e){if(e){if(NE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oh=null,no=null,ro=null;function x0(t){if(t=js(t)){if(typeof oh!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Bl(e),oh(t.stateNode,t.type,e))}}function _0(t){no?ro?ro.push(t):ro=[t]:no=t}function S0(){if(no){var t=no,e=ro;if(ro=no=null,x0(t),e)for(t=0;t<e.length;t++)x0(e[t])}}function C0(t,e){return t(e)}function T0(){}var sh=!1;function k0(t,e,n){if(sh)return t(e,n);sh=!0;try{return C0(t,e,n)}finally{sh=!1,(no!==null||ro!==null)&&(T0(),S0())}}function ys(t,e){var n=t.stateNode;if(n===null)return null;var r=Bl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var ah=!1;if(Fn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){ah=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{ah=!1}function jE(t,e,n,r,i,s,d,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ws=!1,yl=null,bl=!1,lh=null,BE={onError:function(t){ws=!0,yl=t}};function VE(t,e,n,r,i,s,d,a,o){ws=!1,yl=null,jE.apply(BE,arguments)}function $E(t,e,n,r,i,s,d,a,o){if(VE.apply(this,arguments),ws){if(ws){var c=yl;ws=!1,yl=null}else throw Error(ae(198));bl||(bl=!0,lh=c)}}function qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O0(t){if(qr(t)!==t)throw Error(ae(188))}function UE(t){var e=t.alternate;if(!e){if(e=qr(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return O0(i),t;if(s===r)return O0(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var d=!1,a=i.child;a;){if(a===n){d=!0,n=i,r=s;break}if(a===r){d=!0,r=i,n=s;break}a=a.sibling}if(!d){for(a=s.child;a;){if(a===n){d=!0,n=s,r=i;break}if(a===r){d=!0,r=s,n=i;break}a=a.sibling}if(!d)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function P0(t){return t=UE(t),t!==null?M0(t):null}function M0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M0(t);if(e!==null)return e;t=t.sibling}return null}var A0=Ut.unstable_scheduleCallback,D0=Ut.unstable_cancelCallback,HE=Ut.unstable_shouldYield,WE=Ut.unstable_requestPaint,Ge=Ut.unstable_now,YE=Ut.unstable_getCurrentPriorityLevel,ch=Ut.unstable_ImmediatePriority,R0=Ut.unstable_UserBlockingPriority,wl=Ut.unstable_NormalPriority,XE=Ut.unstable_LowPriority,I0=Ut.unstable_IdlePriority,xl=null,Tn=null;function GE(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(xl,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:ZE,KE=Math.log,qE=Math.LN2;function ZE(t){return t>>>=0,t===0?32:31-(KE(t)/qE|0)|0}var _l=64,Sl=4194304;function xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,d=n&268435455;if(d!==0){var a=d&~i;a!==0?r=xs(a):(s&=d,s!==0&&(r=xs(s)))}else d=n&~i,d!==0?r=xs(d):s!==0&&(r=xs(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),i=1<<n,r|=t[n],e&=~i;return r}function QE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var d=31-dn(s),a=1<<d,o=i[d];o===-1?((a&n)===0||(a&r)!==0)&&(i[d]=QE(a,e)):o<=e&&(t.expiredLanes|=a),s&=~a}}function uh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L0(){var t=_l;return _l<<=1,(_l&4194240)===0&&(_l=64),t}function fh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _s(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function eO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-dn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function F0(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var z0,dh,N0,j0,B0,ph=!1,Tl=[],fr=null,hr=null,dr=null,Ss=new Map,Cs=new Map,pr=[],tO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Ss.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(e.pointerId)}}function Ts(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=js(e),e!==null&&dh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function nO(t,e,n,r,i){switch(e){case"focusin":return fr=Ts(fr,t,e,n,r,i),!0;case"dragenter":return hr=Ts(hr,t,e,n,r,i),!0;case"mouseover":return dr=Ts(dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ss.set(s,Ts(Ss.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cs.set(s,Ts(Cs.get(s)||null,t,e,n,r,i)),!0}return!1}function $0(t){var e=Zr(t.target);if(e!==null){var n=qr(e);if(n!==null){if(e=n.tag,e===13){if(e=E0(n),e!==null){t.blockedOn=e,B0(t.priority,function(){N0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rh=r,n.target.dispatchEvent(r),rh=null}else return e=js(n),e!==null&&dh(e),t.blockedOn=n,!1;e.shift()}return!0}function U0(t,e,n){kl(t)&&n.delete(e)}function rO(){ph=!1,fr!==null&&kl(fr)&&(fr=null),hr!==null&&kl(hr)&&(hr=null),dr!==null&&kl(dr)&&(dr=null),Ss.forEach(U0),Cs.forEach(U0)}function ks(t,e){t.blockedOn===e&&(t.blockedOn=null,ph||(ph=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,rO)))}function Es(t){function e(i){return ks(i,t)}if(0<Tl.length){ks(Tl[0],t);for(var n=1;n<Tl.length;n++){var r=Tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&ks(fr,t),hr!==null&&ks(hr,t),dr!==null&&ks(dr,t),Ss.forEach(e),Cs.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)$0(n),n.blockedOn===null&&pr.shift()}var io=zn.ReactCurrentBatchConfig,El=!0;function iO(t,e,n,r){var i=Ae,s=io.transition;io.transition=null;try{Ae=1,gh(t,e,n,r)}finally{Ae=i,io.transition=s}}function oO(t,e,n,r){var i=Ae,s=io.transition;io.transition=null;try{Ae=4,gh(t,e,n,r)}finally{Ae=i,io.transition=s}}function gh(t,e,n,r){if(El){var i=mh(t,e,n,r);if(i===null)Rh(t,e,r,Ol,n),V0(t,r);else if(nO(i,t,e,n,r))r.stopPropagation();else if(V0(t,r),e&4&&-1<tO.indexOf(t)){for(;i!==null;){var s=js(i);if(s!==null&&z0(s),s=mh(t,e,n,r),s===null&&Rh(t,e,r,Ol,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rh(t,e,r,null,n)}}var Ol=null;function mh(t,e,n,r){if(Ol=null,t=ih(r),t=Zr(t),t!==null)if(e=qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ol=t,null}function H0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YE()){case ch:return 1;case R0:return 4;case wl:case XE:return 16;case I0:return 536870912;default:return 16}default:return 16}}var gr=null,vh=null,Pl=null;function W0(){if(Pl)return Pl;var t,e=vh,n=e.length,r,i="value"in gr?gr.value:gr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var d=n-t;for(r=1;r<=d&&e[n-r]===i[s-r];r++);return Pl=i.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Al(){return!0}function Y0(){return!1}function Ht(t){function e(n,r,i,s,d){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=d,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Al:Y0,this.isPropagationStopped=Y0,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yh=Ht(oo),Os=Ve({},oo,{view:0,detail:0}),sO=Ht(Os),bh,wh,Ps,Dl=Ve({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(bh=t.screenX-Ps.screenX,wh=t.screenY-Ps.screenY):wh=bh=0,Ps=t),bh)},movementY:function(t){return"movementY"in t?t.movementY:wh}}),X0=Ht(Dl),aO=Ve({},Dl,{dataTransfer:0}),lO=Ht(aO),cO=Ve({},Os,{relatedTarget:0}),xh=Ht(cO),uO=Ve({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),fO=Ht(uO),hO=Ve({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dO=Ht(hO),pO=Ve({},oo,{data:0}),G0=Ht(pO),gO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vO[t])?!!e[t]:!1}function _h(){return yO}var bO=Ve({},Os,{key:function(t){if(t.key){var e=gO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wO=Ht(bO),xO=Ve({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=Ht(xO),_O=Ve({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),SO=Ht(_O),CO=Ve({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),TO=Ht(CO),kO=Ve({},Dl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EO=Ht(kO),OO=[9,13,27,32],Sh=Fn&&"CompositionEvent"in window,Ms=null;Fn&&"documentMode"in document&&(Ms=document.documentMode);var PO=Fn&&"TextEvent"in window&&!Ms,q0=Fn&&(!Sh||Ms&&8<Ms&&11>=Ms),Z0=String.fromCharCode(32),Q0=!1;function J0(t,e){switch(t){case"keyup":return OO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function MO(t,e){switch(t){case"compositionend":return ey(e);case"keypress":return e.which!==32?null:(Q0=!0,Z0);case"textInput":return t=e.data,t===Z0&&Q0?null:t;default:return null}}function AO(t,e){if(so)return t==="compositionend"||!Sh&&J0(t,e)?(t=W0(),Pl=vh=gr=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q0&&e.locale!=="ko"?null:e.data;default:return null}}var DO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DO[t.type]:e==="textarea"}function ny(t,e,n,r){_0(r),e=zl(e,"onChange"),0<e.length&&(n=new yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var As=null,Ds=null;function RO(t){wy(t,0)}function Rl(t){var e=fo(t);if(u0(e))return t}function IO(t,e){if(t==="change")return e}var ry=!1;if(Fn){var Ch;if(Fn){var Th="oninput"in document;if(!Th){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),Th=typeof iy.oninput=="function"}Ch=Th}else Ch=!1;ry=Ch&&(!document.documentMode||9<document.documentMode)}function oy(){As&&(As.detachEvent("onpropertychange",sy),Ds=As=null)}function sy(t){if(t.propertyName==="value"&&Rl(Ds)){var e=[];ny(e,Ds,t,ih(t)),k0(RO,e)}}function LO(t,e,n){t==="focusin"?(oy(),As=e,Ds=n,As.attachEvent("onpropertychange",sy)):t==="focusout"&&oy()}function FO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rl(Ds)}function zO(t,e){if(t==="click")return Rl(e)}function NO(t,e){if(t==="input"||t==="change")return Rl(e)}function jO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:jO;function Rs(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ff.call(e,i)||!pn(t[i],e[i]))return!1}return!0}function ay(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ly(t,e){var n=ay(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ay(n)}}function cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uy(){for(var t=window,e=ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ml(t.document)}return e}function kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BO(t){var e=uy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cy(n.ownerDocument.documentElement,n)){if(r!==null&&kh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ly(n,s);var d=ly(n,r);i&&d&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VO=Fn&&"documentMode"in document&&11>=document.documentMode,ao=null,Eh=null,Is=null,Oh=!1;function fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oh||ao==null||ao!==ml(r)||(r=ao,"selectionStart"in r&&kh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Is&&Rs(Is,r)||(Is=r,r=zl(Eh,"onSelect"),0<r.length&&(e=new yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ao)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},Ph={},hy={};Fn&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Ll(t){if(Ph[t])return Ph[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hy)return Ph[t]=e[n];return t}var dy=Ll("animationend"),py=Ll("animationiteration"),gy=Ll("animationstart"),my=Ll("transitionend"),vy=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){vy.set(t,e),Kr(e,[t])}for(var Mh=0;Mh<yy.length;Mh++){var Ah=yy[Mh],$O=Ah.toLowerCase(),UO=Ah[0].toUpperCase()+Ah.slice(1);mr($O,"on"+UO)}mr(dy,"onAnimationEnd"),mr(py,"onAnimationIteration"),mr(gy,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(my,"onTransitionEnd"),Qi("onMouseEnter",["mouseout","mouseover"]),Qi("onMouseLeave",["mouseout","mouseover"]),Qi("onPointerEnter",["pointerout","pointerover"]),Qi("onPointerLeave",["pointerout","pointerover"]),Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function by(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$E(r,e,void 0,t),t.currentTarget=null}function wy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var d=r.length-1;0<=d;d--){var a=r[d],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&i.isPropagationStopped())break e;by(i,a,c),s=o}else for(d=0;d<r.length;d++){if(a=r[d],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&i.isPropagationStopped())break e;by(i,a,c),s=o}}}if(bl)throw t=lh,bl=!1,lh=null,t}function ze(t,e){var n=e[jh];n===void 0&&(n=e[jh]=new Set);var r=t+"__bubble";n.has(r)||(xy(e,t,2,!1),n.add(r))}function Dh(t,e,n){var r=0;e&&(r|=4),xy(n,t,r,e)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function Fs(t){if(!t[Fl]){t[Fl]=!0,n0.forEach(function(n){n!=="selectionchange"&&(HO.has(n)||Dh(n,!1,t),Dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fl]||(e[Fl]=!0,Dh("selectionchange",!1,e))}}function xy(t,e,n,r){switch(H0(e)){case 1:var i=iO;break;case 4:i=oO;break;default:i=gh}n=i.bind(null,e,n,t),i=void 0,!ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rh(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(d===4)for(d=r.return;d!==null;){var o=d.tag;if((o===3||o===4)&&(o=d.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;d=d.return}for(;a!==null;){if(d=Zr(a),d===null)return;if(o=d.tag,o===5||o===6){r=s=d;continue e}a=a.parentNode}}r=r.return}k0(function(){var c=s,h=ih(n),l=[];e:{var u=vy.get(t);if(u!==void 0){var f=yh,p=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":f=wO;break;case"focusin":p="focus",f=xh;break;case"focusout":p="blur",f=xh;break;case"beforeblur":case"afterblur":f=xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=X0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=SO;break;case dy:case py:case gy:f=fO;break;case my:f=TO;break;case"scroll":f=sO;break;case"wheel":f=EO;break;case"copy":case"cut":case"paste":f=dO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=K0}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?u!==null?u+"Capture":null:u;m=[];for(var y=c,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=ys(y,v),w!=null&&m.push(zs(y,w,b)))),g)break;y=y.return}0<m.length&&(u=new f(u,p,null,n,h),l.push({event:u,listeners:m}))}}if((e&7)===0){e:{if(u=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",u&&n!==rh&&(p=n.relatedTarget||n.fromElement)&&(Zr(p)||p[Nn]))break e;if((f||u)&&(u=h.window===h?h:(u=h.ownerDocument)?u.defaultView||u.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Zr(p):null,p!==null&&(g=qr(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=X0,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=K0,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?u:fo(f),b=p==null?u:fo(p),u=new m(w,y+"leave",f,n,h),u.target=g,u.relatedTarget=b,w=null,Zr(h)===c&&(m=new m(v,y+"enter",p,n,h),m.target=b,m.relatedTarget=g,w=m),g=w,f&&p)t:{for(m=f,v=p,y=0,b=m;b;b=co(b))y++;for(b=0,w=v;w;w=co(w))b++;for(;0<y-b;)m=co(m),y--;for(;0<b-y;)v=co(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=co(m),v=co(v)}m=null}else m=null;f!==null&&_y(l,u,f,m,!1),p!==null&&g!==null&&_y(l,g,p,m,!0)}}e:{if(u=c?fo(c):window,f=u.nodeName&&u.nodeName.toLowerCase(),f==="select"||f==="input"&&u.type==="file")var x=IO;else if(ty(u))if(ry)x=NO;else{x=FO;var S=LO}else(f=u.nodeName)&&f.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(x=zO);if(x&&(x=x(t,c))){ny(l,x,n,h);break e}S&&S(t,u,c),t==="focusout"&&(S=u._wrapperState)&&S.controlled&&u.type==="number"&&Qf(u,"number",u.value)}switch(S=c?fo(c):window,t){case"focusin":(ty(S)||S.contentEditable==="true")&&(ao=S,Eh=c,Is=null);break;case"focusout":Is=Eh=ao=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,fy(l,n,h);break;case"selectionchange":if(VO)break;case"keydown":case"keyup":fy(l,n,h)}var C;if(Sh)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else so?J0(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(q0&&n.locale!=="ko"&&(so||k!=="onCompositionStart"?k==="onCompositionEnd"&&so&&(C=W0()):(gr=h,vh="value"in gr?gr.value:gr.textContent,so=!0)),S=zl(c,k),0<S.length&&(k=new G0(k,t,null,n,h),l.push({event:k,listeners:S}),C?k.data=C:(C=ey(n),C!==null&&(k.data=C)))),(C=PO?MO(t,n):AO(t,n))&&(c=zl(c,"onBeforeInput"),0<c.length&&(h=new G0("onBeforeInput","beforeinput",null,n,h),l.push({event:h,listeners:c}),h.data=C))}wy(l,e)})}function zs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ys(t,n),s!=null&&r.unshift(zs(t,s,i)),s=ys(t,e),s!=null&&r.push(zs(t,s,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _y(t,e,n,r,i){for(var s=e._reactName,d=[];n!==null&&n!==r;){var a=n,o=a.alternate,c=a.stateNode;if(o!==null&&o===r)break;a.tag===5&&c!==null&&(a=c,i?(o=ys(n,s),o!=null&&d.unshift(zs(n,o,a))):i||(o=ys(n,s),o!=null&&d.push(zs(n,o,a)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var WO=/\r\n?/g,YO=/\u0000|\uFFFD/g;function Sy(t){return(typeof t=="string"?t:""+t).replace(WO,`
`).replace(YO,"")}function Nl(t,e,n){if(e=Sy(e),Sy(t)!==e&&n)throw Error(ae(425))}function jl(){}var Ih=null,Lh=null;function Fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,XO=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,GO=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(t){return Cy.resolve(null).then(t).catch(KO)}:zh;function KO(t){setTimeout(function(){throw t})}function Nh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Es(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Es(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ty(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),kn="__reactFiber$"+uo,Ns="__reactProps$"+uo,Nn="__reactContainer$"+uo,jh="__reactEvents$"+uo,qO="__reactListeners$"+uo,ZO="__reactHandles$"+uo;function Zr(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ty(t);t!==null;){if(n=t[kn])return n;t=Ty(t)}return e}t=n,n=t.parentNode}return null}function js(t){return t=t[kn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Bl(t){return t[Ns]||null}var Bh=[],ho=-1;function yr(t){return{current:t}}function Ne(t){0>ho||(t.current=Bh[ho],Bh[ho]=null,ho--)}function Le(t,e){ho++,Bh[ho]=t.current,t.current=e}var br={},pt=yr(br),Mt=yr(!1),Qr=br;function po(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function At(t){return t=t.childContextTypes,t!=null}function Vl(){Ne(Mt),Ne(pt)}function ky(t,e,n){if(pt.current!==br)throw Error(ae(168));Le(pt,e),Le(Mt,n)}function Ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,LE(t)||"Unknown",i));return Ve({},n,r)}function $l(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Qr=pt.current,Le(pt,t),Le(Mt,Mt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=Ey(t,e,Qr),r.__reactInternalMemoizedMergedChildContext=t,Ne(Mt),Ne(pt),Le(pt,t)):Ne(Mt),Le(Mt,n)}var jn=null,Ul=!1,Vh=!1;function Py(t){jn===null?jn=[t]:jn.push(t)}function QO(t){Ul=!0,Py(t)}function wr(){if(!Vh&&jn!==null){Vh=!0;var t=0,e=Ae;try{var n=jn;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Ul=!1}catch(i){throw jn!==null&&(jn=jn.slice(t+1)),A0(ch,wr),i}finally{Ae=e,Vh=!1}}return null}var go=[],mo=0,Hl=null,Wl=0,rn=[],on=0,Jr=null,Bn=1,Vn="";function ei(t,e){go[mo++]=Wl,go[mo++]=Hl,Hl=t,Wl=e}function My(t,e,n){rn[on++]=Bn,rn[on++]=Vn,rn[on++]=Jr,Jr=t;var r=Bn;t=Vn;var i=32-dn(r)-1;r&=~(1<<i),n+=1;var s=32-dn(e)+i;if(30<s){var d=i-i%5;s=(r&(1<<d)-1).toString(32),r>>=d,i-=d,Bn=1<<32-dn(e)+i|n<<i|r,Vn=s+t}else Bn=1<<s|n<<i|r,Vn=t}function $h(t){t.return!==null&&(ei(t,1),My(t,1,0))}function Uh(t){for(;t===Hl;)Hl=go[--mo],go[mo]=null,Wl=go[--mo],go[mo]=null;for(;t===Jr;)Jr=rn[--on],rn[on]=null,Vn=rn[--on],rn[on]=null,Bn=rn[--on],rn[on]=null}var Wt=null,Yt=null,Be=!1,gn=null;function Ay(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Yt=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jr!==null?{id:Bn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Yt=null,!0):!1;default:return!1}}function Hh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wh(t){if(Be){var e=Yt;if(e){var n=e;if(!Dy(t,e)){if(Hh(t))throw Error(ae(418));e=vr(n.nextSibling);var r=Wt;e&&Dy(t,e)?Ay(r,n):(t.flags=t.flags&-4097|2,Be=!1,Wt=t)}}else{if(Hh(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Be=!1,Wt=t}}}function Ry(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Yl(t){if(t!==Wt)return!1;if(!Be)return Ry(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fh(t.type,t.memoizedProps)),e&&(e=Yt)){if(Hh(t))throw Iy(),Error(ae(418));for(;e;)Ay(t,e),e=vr(e.nextSibling)}if(Ry(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Wt?vr(t.stateNode.nextSibling):null;return!0}function Iy(){for(var t=Yt;t;)t=vr(t.nextSibling)}function vo(){Yt=Wt=null,Be=!1}function Yh(t){gn===null?gn=[t]:gn.push(t)}var JO=zn.ReactCurrentBatchConfig;function mn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Xl=yr(null),Gl=null,yo=null,Xh=null;function Gh(){Xh=yo=Gl=null}function Kh(t){var e=Xl.current;Ne(Xl),t._currentValue=e}function qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){Gl=t,Xh=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Dt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(Xh!==t)if(t={context:t,memoizedValue:e,next:null},yo===null){if(Gl===null)throw Error(ae(308));yo=t,Gl.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return e}var ti=null;function Zh(t){ti===null?ti=[t]:ti.push(t)}function Ly(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zh(e)):(n.next=i.next,i.next=n),e.interleaved=n,$n(t,r)}function $n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function Qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Oe&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$n(t,n)}return i=r.interleaved,i===null?(e.next=e,Zh(r)):(e.next=i.next,i.next=e),r.interleaved=e,$n(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hh(t,n)}}function zy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=d:s=s.next=d,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ql(t,e,n,r){var i=t.updateQueue;xr=!1;var s=i.firstBaseUpdate,d=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var o=a,c=o.next;o.next=null,d===null?s=c:d.next=c,d=o;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==d&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=o))}if(s!==null){var l=i.baseState;d=0,h=c=o=null,a=s;do{var u=a.lane,f=a.eventTime;if((r&u)===u){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(u=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){l=p.call(f,l,u);break e}l=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,u=typeof p=="function"?p.call(f,l,u):p,u==null)break e;l=Ve({},l,u);break e;case 2:xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,u=i.effects,u===null?i.effects=[a]:u.push(a))}else f={eventTime:f,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=f,o=l):h=h.next=f,d|=u;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;u=a,a=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(1);if(h===null&&(o=l),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do d|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ii|=d,t.lanes=d,t.memoizedState=l}}function Ny(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var jy=new t0.Component().refs;function Jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zl={isMounted:function(t){return(t=t._reactInternals)?qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=kr(t),s=Un(r,i);s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(bn(e,t,i,r),Kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=kr(t),s=Un(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(bn(e,t,i,r),Kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=kr(t),i=Un(n,r);i.tag=2,e!=null&&(i.callback=e),e=_r(t,i,r),e!==null&&(bn(e,t,r,n),Kl(e,t,r))}};function By(t,e,n,r,i,s,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,d):e.prototype&&e.prototype.isPureReactComponent?!Rs(n,r)||!Rs(i,s):!0}function Vy(t,e,n){var r=!1,i=br,s=e.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=At(e)?Qr:pt.current,r=e.contextTypes,s=(r=r!=null)?po(t,i):br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $y(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zl.enqueueReplaceState(e,e.state,null)}function ed(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=jy,Qh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=At(e)?Qr:pt.current,i.context=po(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zl.enqueueReplaceState(i,i.state,null),ql(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(d){var a=i.refs;a===jy&&(a=i.refs={}),d===null?delete a[s]:a[s]=d},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ql(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uy(t){var e=t._init;return e(t._payload)}function Hy(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Or(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function d(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,w){return y===null||y.tag!==6?(y=zd(b,v.mode,w),y.return=v,y):(y=i(y,b),y.return=v,y)}function o(v,y,b,w){var x=b.type;return x===eo?h(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===cr&&Uy(x)===y.type)?(w=i(y,b.props),w.ref=Bs(v,y,b),w.return=v,w):(w=vc(b.type,b.key,b.props,null,v.mode,w),w.ref=Bs(v,y,b),w.return=v,w)}function c(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Nd(b,v.mode,w),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function h(v,y,b,w,x){return y===null||y.tag!==7?(y=li(b,v.mode,w,x),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=zd(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return b=vc(y.type,y.key,y.props,null,v.mode,b),b.ref=Bs(v,null,y),b.return=v,b;case Ji:return y=Nd(y,v.mode,b),y.return=v,y;case cr:var w=y._init;return l(v,w(y._payload),b)}if(gs(y)||ds(y))return y=li(y,v.mode,b,null),y.return=v,y;Ql(v,y)}return null}function u(v,y,b,w){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:return b.key===x?o(v,y,b,w):null;case Ji:return b.key===x?c(v,y,b,w):null;case cr:return x=b._init,u(v,y,x(b._payload),w)}if(gs(b)||ds(b))return x!==null?null:h(v,y,b,w,null);Ql(v,b)}return null}function f(v,y,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,a(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pl:return v=v.get(w.key===null?b:w.key)||null,o(y,v,w,x);case Ji:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,x);case cr:var S=w._init;return f(v,y,b,S(w._payload),x)}if(gs(w)||ds(w))return v=v.get(b)||null,h(y,v,w,x,null);Ql(y,w)}return null}function p(v,y,b,w){for(var x=null,S=null,C=y,k=y=0,I=null;C!==null&&k<b.length;k++){C.index>k?(I=C,C=null):I=C.sibling;var F=u(v,C,b[k],w);if(F===null){C===null&&(C=I);break}t&&C&&F.alternate===null&&e(v,C),y=s(F,y,k),S===null?x=F:S.sibling=F,S=F,C=I}if(k===b.length)return n(v,C),Be&&ei(v,k),x;if(C===null){for(;k<b.length;k++)C=l(v,b[k],w),C!==null&&(y=s(C,y,k),S===null?x=C:S.sibling=C,S=C);return Be&&ei(v,k),x}for(C=r(v,C);k<b.length;k++)I=f(C,v,k,b[k],w),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?k:I.key),y=s(I,y,k),S===null?x=I:S.sibling=I,S=I);return t&&C.forEach(function(j){return e(v,j)}),Be&&ei(v,k),x}function m(v,y,b,w){var x=ds(b);if(typeof x!="function")throw Error(ae(150));if(b=x.call(b),b==null)throw Error(ae(151));for(var S=x=null,C=y,k=y=0,I=null,F=b.next();C!==null&&!F.done;k++,F=b.next()){C.index>k?(I=C,C=null):I=C.sibling;var j=u(v,C,F.value,w);if(j===null){C===null&&(C=I);break}t&&C&&j.alternate===null&&e(v,C),y=s(j,y,k),S===null?x=j:S.sibling=j,S=j,C=I}if(F.done)return n(v,C),Be&&ei(v,k),x;if(C===null){for(;!F.done;k++,F=b.next())F=l(v,F.value,w),F!==null&&(y=s(F,y,k),S===null?x=F:S.sibling=F,S=F);return Be&&ei(v,k),x}for(C=r(v,C);!F.done;k++,F=b.next())F=f(C,v,k,F.value,w),F!==null&&(t&&F.alternate!==null&&C.delete(F.key===null?k:F.key),y=s(F,y,k),S===null?x=F:S.sibling=F,S=F);return t&&C.forEach(function(q){return e(v,q)}),Be&&ei(v,k),x}function g(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===eo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:e:{for(var x=b.key,S=y;S!==null;){if(S.key===x){if(x=b.type,x===eo){if(S.tag===7){n(v,S.sibling),y=i(S,b.props.children),y.return=v,v=y;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===cr&&Uy(x)===S.type){n(v,S.sibling),y=i(S,b.props),y.ref=Bs(v,S,b),y.return=v,v=y;break e}n(v,S);break}else e(v,S);S=S.sibling}b.type===eo?(y=li(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=vc(b.type,b.key,b.props,null,v.mode,w),w.ref=Bs(v,y,b),w.return=v,v=w)}return d(v);case Ji:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Nd(b,v.mode,w),y.return=v,v=y}return d(v);case cr:return S=b._init,g(v,y,S(b._payload),w)}if(gs(b))return p(v,y,b,w);if(ds(b))return m(v,y,b,w);Ql(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=zd(b,v.mode,w),y.return=v,v=y),d(v)):n(v,y)}return g}var wo=Hy(!0),Wy=Hy(!1),Vs={},En=yr(Vs),$s=yr(Vs),Us=yr(Vs);function ni(t){if(t===Vs)throw Error(ae(174));return t}function td(t,e){switch(Le(Us,e),Le($s,t),Le(En,Vs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eh(e,t)}Ne(En),Le(En,e)}function xo(){Ne(En),Ne($s),Ne(Us)}function Yy(t){ni(Us.current);var e=ni(En.current),n=eh(e,t.type);e!==n&&(Le($s,t),Le(En,n))}function nd(t){$s.current===t&&(Ne(En),Ne($s))}var $e=yr(0);function Jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function id(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var ec=zn.ReactCurrentDispatcher,od=zn.ReactCurrentBatchConfig,ri=0,Ue=null,et=null,ot=null,tc=!1,Hs=!1,Ws=0,eP=0;function gt(){throw Error(ae(321))}function sd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function ad(t,e,n,r,i,s){if(ri=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?iP:oP,t=n(r,i),Hs){s=0;do{if(Hs=!1,Ws=0,25<=s)throw Error(ae(301));s+=1,ot=et=null,e.updateQueue=null,ec.current=sP,t=n(r,i)}while(Hs)}if(ec.current=ic,e=et!==null&&et.next!==null,ri=0,ot=et=Ue=null,tc=!1,e)throw Error(ae(300));return t}function ld(){var t=Ws!==0;return Ws=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ue.memoizedState=ot=t:ot=ot.next=t,ot}function an(){if(et===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=ot===null?Ue.memoizedState:ot.next;if(e!==null)ot=e,et=t;else{if(t===null)throw Error(ae(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ot===null?Ue.memoizedState=ot=t:ot=ot.next=t}return ot}function Ys(t,e){return typeof e=="function"?e(t):e}function cd(t){var e=an(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var d=i.next;i.next=s.next,s.next=d}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=d=null,o=null,c=s;do{var h=c.lane;if((ri&h)===h)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var l={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=l,d=r):o=o.next=l,Ue.lanes|=h,ii|=h}c=c.next}while(c!==null&&c!==s);o===null?d=r:o.next=a,pn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=d,e.baseQueue=o,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ue.lanes|=s,ii|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ud(t){var e=an(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var d=i=i.next;do s=t(s,d.action),d=d.next;while(d!==i);pn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Xy(){}function Gy(t,e){var n=Ue,r=an(),i=e(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Dt=!0),r=r.queue,fd(Zy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Xs(9,qy.bind(null,n,r,i,e),void 0,null),st===null)throw Error(ae(349));(ri&30)!==0||Ky(n,e,i)}return i}function Ky(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qy(t,e,n,r){e.value=n,e.getSnapshot=r,Qy(e)&&Jy(t)}function Zy(t,e,n){return n(function(){Qy(e)&&Jy(t)})}function Qy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Jy(t){var e=$n(t,1);e!==null&&bn(e,t,1,-1)}function e1(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},e.queue=t,t=t.dispatch=rP.bind(null,Ue,t),[e.memoizedState,t]}function Xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t1(){return an().memoizedState}function nc(t,e,n,r){var i=On();Ue.flags|=t,i.memoizedState=Xs(1|e,n,void 0,r===void 0?null:r)}function rc(t,e,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(et!==null){var d=et.memoizedState;if(s=d.destroy,r!==null&&sd(r,d.deps)){i.memoizedState=Xs(e,n,s,r);return}}Ue.flags|=t,i.memoizedState=Xs(1|e,n,s,r)}function n1(t,e){return nc(8390656,8,t,e)}function fd(t,e){return rc(2048,8,t,e)}function r1(t,e){return rc(4,2,t,e)}function i1(t,e){return rc(4,4,t,e)}function o1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s1(t,e,n){return n=n!=null?n.concat([t]):null,rc(4,4,o1.bind(null,e,t),n)}function hd(){}function a1(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l1(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function c1(t,e,n){return(ri&21)===0?(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n):(pn(n,e)||(n=L0(),Ue.lanes|=n,ii|=n,t.baseState=!0),e)}function tP(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=od.transition;od.transition={};try{t(!1),e()}finally{Ae=n,od.transition=r}}function u1(){return an().memoizedState}function nP(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f1(t))h1(e,n);else if(n=Ly(t,e,n,r),n!==null){var i=Tt();bn(n,t,r,i),d1(n,e,r)}}function rP(t,e,n){var r=kr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f1(t))h1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var d=e.lastRenderedState,a=s(d,n);if(i.hasEagerState=!0,i.eagerState=a,pn(a,d)){var o=e.interleaved;o===null?(i.next=i,Zh(e)):(i.next=o.next,o.next=i),e.interleaved=i;return}}catch{}finally{}n=Ly(t,e,i,r),n!==null&&(i=Tt(),bn(n,t,r,i),d1(n,e,r))}}function f1(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function h1(t,e){Hs=tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d1(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hh(t,n)}}var ic={readContext:sn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},iP={readContext:sn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:n1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,o1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:e1,useDebugValue:hd,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=e1(!1),e=t[0];return t=tP.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,i=On();if(Be){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),st===null)throw Error(ae(349));(ri&30)!==0||Ky(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,n1(Zy.bind(null,r,s,t),[t]),r.flags|=2048,Xs(9,qy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=On(),e=st.identifierPrefix;if(Be){var n=Vn,r=Bn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ws++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oP={readContext:sn,useCallback:a1,useContext:sn,useEffect:fd,useImperativeHandle:s1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:cd,useRef:t1,useState:function(){return cd(Ys)},useDebugValue:hd,useDeferredValue:function(t){var e=an();return c1(e,et.memoizedState,t)},useTransition:function(){var t=cd(Ys)[0],e=an().memoizedState;return[t,e]},useMutableSource:Xy,useSyncExternalStore:Gy,useId:u1,unstable_isNewReconciler:!1},sP={readContext:sn,useCallback:a1,useContext:sn,useEffect:fd,useImperativeHandle:s1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:ud,useRef:t1,useState:function(){return ud(Ys)},useDebugValue:hd,useDeferredValue:function(t){var e=an();return et===null?e.memoizedState=t:c1(e,et.memoizedState,t)},useTransition:function(){var t=ud(Ys)[0],e=an().memoizedState;return[t,e]},useMutableSource:Xy,useSyncExternalStore:Gy,useId:u1,unstable_isNewReconciler:!1};function _o(t,e){try{var n="",r=e;do n+=IE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function dd(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aP=typeof WeakMap=="function"?WeakMap:Map;function p1(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fc||(fc=!0,Pd=r),pd(t,e)},n}function g1(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pd(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function m1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xP.bind(null,t,e,n),e.then(t,t))}function v1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y1(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var lP=zn.ReactCurrentOwner,Dt=!1;function Ct(t,e,n,r){e.child=t===null?Wy(e,null,n,r):wo(e,t.child,n,r)}function b1(t,e,n,r,i){n=n.render;var s=e.ref;return bo(e,i),r=ad(t,e,n,r,s,i),n=ld(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(Be&&n&&$h(e),e.flags|=1,Ct(t,e,r,i),e.child)}function w1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,x1(t,e,s,r,i)):(t=vc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var d=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(d,r)&&t.ref===e.ref)return Hn(t,e,i)}return e.flags|=1,t=Or(s,r),t.ref=e.ref,t.return=e,e.child=t}function x1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Rs(s,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Dt=!0);else return e.lanes=t.lanes,Hn(t,e,i)}return gd(t,e,n,r,i)}function _1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Co,Xt),Xt|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Co,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Co,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Co,Xt),Xt|=r;return Ct(t,e,i,n),e.child}function S1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gd(t,e,n,r,i){var s=At(n)?Qr:pt.current;return s=po(e,s),bo(e,i),n=ad(t,e,n,r,s,i),r=ld(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(Be&&r&&$h(e),e.flags|=1,Ct(t,e,n,i),e.child)}function C1(t,e,n,r,i){if(At(n)){var s=!0;$l(e)}else s=!1;if(bo(e,i),e.stateNode===null)sc(t,e),Vy(e,n,r),ed(e,n,r,i),r=!0;else if(t===null){var d=e.stateNode,a=e.memoizedProps;d.props=a;var o=d.context,c=n.contextType;typeof c=="object"&&c!==null?c=sn(c):(c=At(n)?Qr:pt.current,c=po(e,c));var h=n.getDerivedStateFromProps,l=typeof h=="function"||typeof d.getSnapshotBeforeUpdate=="function";l||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==r||o!==c)&&$y(e,d,r,c),xr=!1;var u=e.memoizedState;d.state=u,ql(e,r,d,i),o=e.memoizedState,a!==r||u!==o||Mt.current||xr?(typeof h=="function"&&(Jh(e,n,h,r),o=e.memoizedState),(a=xr||By(e,n,a,r,u,o,c))?(l||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=o),d.props=r,d.state=o,d.context=c,r=a):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{d=e.stateNode,Fy(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mn(e.type,a),d.props=c,l=e.pendingProps,u=d.context,o=n.contextType,typeof o=="object"&&o!==null?o=sn(o):(o=At(n)?Qr:pt.current,o=po(e,o));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==l||u!==o)&&$y(e,d,r,o),xr=!1,u=e.memoizedState,d.state=u,ql(e,r,d,i);var p=e.memoizedState;a!==l||u!==p||Mt.current||xr?(typeof f=="function"&&(Jh(e,n,f,r),p=e.memoizedState),(c=xr||By(e,n,c,r,u,p,o)||!1)?(h||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,p,o),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,p,o)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),d.props=r,d.state=p,d.context=o,r=c):(typeof d.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(e.flags|=1024),r=!1)}return md(t,e,n,r,s,i)}function md(t,e,n,r,i,s){S1(t,e);var d=(e.flags&128)!==0;if(!r&&!d)return i&&Oy(e,n,!1),Hn(t,e,s);r=e.stateNode,lP.current=e;var a=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&d?(e.child=wo(e,t.child,null,s),e.child=wo(e,null,a,s)):Ct(t,e,a,s),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function T1(t){var e=t.stateNode;e.pendingContext?ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ky(t,e.context,!1),td(t,e.containerInfo)}function k1(t,e,n,r,i){return vo(),Yh(i),e.flags|=256,Ct(t,e,n,r),e.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function E1(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,d=(e.flags&128)!==0,a;if((a=d)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le($e,i&1),t===null)return Wh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(d=r.children,t=r.fallback,s?(r=e.mode,s=e.child,d={mode:"hidden",children:d},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=d):s=yc(d,r,0,null),t=li(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yd(n),e.memoizedState=vd,t):bd(e,d));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return cP(t,e,d,r,a,i,n);if(s){s=r.fallback,d=e.mode,i=t.child,a=i.sibling;var o={mode:"hidden",children:r.children};return(d&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=o,e.deletions=null):(r=Or(i,o),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Or(a,s):(s=li(s,d,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,d=t.child.memoizedState,d=d===null?yd(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},s.memoizedState=d,s.childLanes=t.childLanes&~n,e.memoizedState=vd,r}return s=t.child,t=s.sibling,r=Or(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bd(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,r){return r!==null&&Yh(r),wo(e,t.child,null,n),t=bd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cP(t,e,n,r,i,s,d){if(n)return e.flags&256?(e.flags&=-257,r=dd(Error(ae(422))),oc(t,e,d,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yc({mode:"visible",children:r.children},i,0,null),s=li(s,i,d,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&wo(e,t.child,null,d),e.child.memoizedState=yd(d),e.memoizedState=vd,s);if((e.mode&1)===0)return oc(t,e,d,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=dd(s,r,void 0),oc(t,e,d,r)}if(a=(d&t.childLanes)!==0,Dt||a){if(r=st,r!==null){switch(d&-d){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|d))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$n(t,i),bn(r,t,i,-1))}return Ld(),r=dd(Error(ae(421))),oc(t,e,d,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_P.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yt=vr(i.nextSibling),Wt=e,Be=!0,gn=null,t!==null&&(rn[on++]=Bn,rn[on++]=Vn,rn[on++]=Jr,Bn=t.id,Vn=t.overflow,Jr=e),e=bd(e,r.children),e.flags|=4096,e)}function O1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qh(t.return,e,n)}function wd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function P1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ct(t,e,r.children,n),r=$e.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O1(t,n,e);else if(t.tag===19)O1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le($e,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wd(e,!0,n,null,s);break;case"together":wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ii|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uP(t,e,n){switch(e.tag){case 3:T1(e),vo();break;case 5:Yy(e);break;case 1:At(e.type)&&$l(e);break;case 4:td(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(Xl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le($e,$e.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?E1(t,e,n):(Le($e,$e.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);Le($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return P1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,_1(t,e,n)}return Hn(t,e,n)}var M1,xd,A1,D1;M1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xd=function(){},A1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ni(En.current);var s=null;switch(n){case"input":i=qf(t,i),r=qf(t,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=Jf(t,i),r=Jf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}th(n,r);var d;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(d in a)a.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var o=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(d in a)!a.hasOwnProperty(d)||o&&o.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in o)o.hasOwnProperty(d)&&a[d]!==o[d]&&(n||(n={}),n[d]=o[d])}else n||(s||(s=[]),s.push(c,n)),n=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hs.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&ze("scroll",t),s||a===o||(s=[])):(s=s||[]).push(c,o))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},D1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gs(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fP(t,e,n){var r=e.pendingProps;switch(Uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return At(e.type)&&Vl(),mt(e),null;case 3:return r=e.stateNode,xo(),Ne(Mt),Ne(pt),id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,gn!==null&&(Dd(gn),gn=null))),xd(t,e),mt(e),null;case 5:nd(e);var i=ni(Us.current);if(n=e.type,t!==null&&e.stateNode!=null)A1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return mt(e),null}if(t=ni(En.current),Yl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[Ns]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<Ls.length;i++)ze(Ls[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":f0(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":p0(r,s),ze("invalid",r)}th(n,s),i=null;for(var d in s)if(s.hasOwnProperty(d)){var a=s[d];d==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,a,t),i=["children",""+a]):hs.hasOwnProperty(d)&&a!=null&&d==="onScroll"&&ze("scroll",r)}switch(n){case"input":gl(r),d0(r,s,!0);break;case"textarea":gl(r),m0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{d=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=d.createElement(n,{is:r.is}):(t=d.createElement(n),n==="select"&&(d=t,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):t=d.createElementNS(t,n),t[kn]=e,t[Ns]=r,M1(t,e,!1,!1),e.stateNode=t;e:{switch(d=nh(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ls.length;i++)ze(Ls[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":f0(t,r),i=qf(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),ze("invalid",t);break;case"textarea":p0(t,r),i=Jf(t,r),ze("invalid",t);break;default:i=r}th(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?w0(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&y0(t,o)):s==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&ms(t,o):typeof o=="number"&&ms(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hs.hasOwnProperty(s)?o!=null&&s==="onScroll"&&ze("scroll",t):o!=null&&jf(t,s,o,d))}switch(n){case"input":gl(t),d0(t,r,!1);break;case"textarea":gl(t),m0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)D1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=ni(Us.current),ni(En.current),Yl(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Nl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ne($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Yt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)Iy(),vo(),e.flags|=98560,s=!1;else if(s=Yl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[kn]=e}else vo(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else gn!==null&&(Dd(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||($e.current&1)!==0?tt===0&&(tt=3):Ld())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return xo(),xd(t,e),t===null&&Fs(e.stateNode.containerInfo),mt(e),null;case 10:return Kh(e.type._context),mt(e),null;case 17:return At(e.type)&&Vl(),mt(e),null;case 19:if(Ne($e),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,d=s.rendering,d===null)if(r)Gs(s,!1);else{if(tt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(d=Jl(t),d!==null){for(e.flags|=128,Gs(s,!1),r=d.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,d=s.alternate,d===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,t=d.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>To&&(e.flags|=128,r=!0,Gs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jl(d),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!Be)return mt(e),null}else 2*Ge()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,Gs(s,!1),e.lanes=4194304);s.isBackwards?(d.sibling=e.child,e.child=d):(n=s.last,n!==null?n.sibling=d:e.child=d,s.last=d)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=$e.current,Le($e,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Id(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Xt&1073741824)!==0&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function hP(t,e){switch(Uh(e),e.tag){case 1:return At(e.type)&&Vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),Ne(Mt),Ne(pt),id(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return nd(e),null;case 13:if(Ne($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne($e),null;case 4:return xo(),null;case 10:return Kh(e.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var ac=!1,vt=!1,dP=typeof WeakSet=="function"?WeakSet:Set,pe=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function _d(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var R1=!1;function pP(t,e){if(Ih=El,t=uy(),kh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var d=0,a=-1,o=-1,c=0,h=0,l=t,u=null;t:for(;;){for(var f;l!==n||i!==0&&l.nodeType!==3||(a=d+i),l!==s||r!==0&&l.nodeType!==3||(o=d+r),l.nodeType===3&&(d+=l.nodeValue.length),(f=l.firstChild)!==null;)u=l,l=f;for(;;){if(l===t)break t;if(u===n&&++c===i&&(a=d),u===s&&++h===r&&(o=d),(f=l.nextSibling)!==null)break;l=u,u=l.parentNode}l=f}n=a===-1||o===-1?null:{start:a,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lh={focusedElem:t,selectionRange:n},El=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:mn(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(w){Ye(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return p=R1,R1=!1,p}function Ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_d(e,n,s)}i=i.next}while(i!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I1(t){var e=t.alternate;e!==null&&(t.alternate=null,I1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ns],delete e[jh],delete e[qO],delete e[ZO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L1(t){return t.tag===5||t.tag===3||t.tag===4}function F1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(Cd(t,e,n),t=t.sibling;t!==null;)Cd(t,e,n),t=t.sibling}function Td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Td(t,e,n),t=t.sibling;t!==null;)Td(t,e,n),t=t.sibling}var ct=null,vn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)z1(t,e,n),n=n.sibling}function z1(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(xl,n)}catch{}switch(n.tag){case 5:vt||So(n,e);case 6:var r=ct,i=vn;ct=null,Sr(t,e,n),ct=r,vn=i,ct!==null&&(vn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(vn?(t=ct,n=n.stateNode,t.nodeType===8?Nh(t.parentNode,n):t.nodeType===1&&Nh(t,n),Es(t)):Nh(ct,n.stateNode));break;case 4:r=ct,i=vn,ct=n.stateNode.containerInfo,vn=!0,Sr(t,e,n),ct=r,vn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,d=s.destroy;s=s.tag,d!==void 0&&((s&2)!==0||(s&4)!==0)&&_d(n,e,d),i=i.next}while(i!==r)}Sr(t,e,n);break;case 1:if(!vt&&(So(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Sr(t,e,n),vt=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function N1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dP),e.forEach(function(r){var i=SP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,d=e,a=d;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,vn=!1;break e;case 3:ct=a.stateNode.containerInfo,vn=!0;break e;case 4:ct=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(ct===null)throw Error(ae(160));z1(s,d,i),ct=null,vn=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j1(e,t),e=e.sibling}function j1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Pn(t),r&4){try{Ks(3,t,t.return),lc(3,t)}catch(m){Ye(t,t.return,m)}try{Ks(5,t,t.return)}catch(m){Ye(t,t.return,m)}}break;case 1:yn(e,t),Pn(t),r&512&&n!==null&&So(n,n.return);break;case 5:if(yn(e,t),Pn(t),r&512&&n!==null&&So(n,n.return),t.flags&32){var i=t.stateNode;try{ms(i,"")}catch(m){Ye(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,d=n!==null?n.memoizedProps:s,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&h0(i,s),nh(a,d);var c=nh(a,s);for(d=0;d<o.length;d+=2){var h=o[d],l=o[d+1];h==="style"?w0(i,l):h==="dangerouslySetInnerHTML"?y0(i,l):h==="children"?ms(i,l):jf(i,h,l,c)}switch(a){case"input":Zf(i,s);break;case"textarea":g0(i,s);break;case"select":var u=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?to(i,!!s.multiple,f,!1):u!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ns]=s}catch(m){Ye(t,t.return,m)}}break;case 6:if(yn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ye(t,t.return,m)}}break;case 3:if(yn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(e.containerInfo)}catch(m){Ye(t,t.return,m)}break;case 4:yn(e,t),Pn(t);break;case 13:yn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Od=Ge())),r&4&&N1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,yn(e,t),vt=c):yn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&(t.mode&1)!==0)for(pe=t,h=t.child;h!==null;){for(l=pe=h;pe!==null;){switch(u=pe,f=u.child,u.tag){case 0:case 11:case 14:case 15:Ks(4,u,u.return);break;case 1:So(u,u.return);var p=u.stateNode;if(typeof p.componentWillUnmount=="function"){r=u,n=u.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ye(r,n,m)}}break;case 5:So(u,u.return);break;case 22:if(u.memoizedState!==null){$1(l);continue}}f!==null?(f.return=u,pe=f):$1(l)}h=h.sibling}e:for(h=null,l=t;;){if(l.tag===5){if(h===null){h=l;try{i=l.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=l.stateNode,o=l.memoizedProps.style,d=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=b0("display",d))}catch(m){Ye(t,t.return,m)}}}else if(l.tag===6){if(h===null)try{l.stateNode.nodeValue=c?"":l.memoizedProps}catch(m){Ye(t,t.return,m)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===t)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:yn(e,t),Pn(t),r&4&&N1(t);break;case 21:break;default:yn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L1(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ms(i,""),r.flags&=-33);var s=F1(t);Td(t,s,i);break;case 3:case 4:var d=r.stateNode.containerInfo,a=F1(t);Cd(t,a,d);break;default:throw Error(ae(161))}}catch(o){Ye(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gP(t,e,n){pe=t,B1(t)}function B1(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var i=pe,s=i.child;if(i.tag===22&&r){var d=i.memoizedState!==null||ac;if(!d){var a=i.alternate,o=a!==null&&a.memoizedState!==null||vt;a=ac;var c=vt;if(ac=d,(vt=o)&&!c)for(pe=i;pe!==null;)d=pe,o=d.child,d.tag===22&&d.memoizedState!==null?U1(i):o!==null?(o.return=d,pe=o):U1(i);for(;s!==null;)pe=s,B1(s),s=s.sibling;pe=i,ac=a,vt=c}V1(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,pe=s):V1(t)}}function V1(t){for(;pe!==null;){var e=pe;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:vt||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ny(e,s,r);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ny(e,d,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var l=h.dehydrated;l!==null&&Es(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}vt||e.flags&512&&Sd(e)}catch(u){Ye(e,e.return,u)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function $1(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function U1(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(o){Ye(e,n,o)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(o){Ye(e,i,o)}}var s=e.return;try{Sd(e)}catch(o){Ye(e,s,o)}break;case 5:var d=e.return;try{Sd(e)}catch(o){Ye(e,d,o)}}}catch(o){Ye(e,e.return,o)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var mP=Math.ceil,cc=zn.ReactCurrentDispatcher,kd=zn.ReactCurrentOwner,ln=zn.ReactCurrentBatchConfig,Oe=0,st=null,qe=null,ut=0,Xt=0,Co=yr(0),tt=0,qs=null,ii=0,uc=0,Ed=0,Zs=null,Rt=null,Od=0,To=1/0,Wn=null,fc=!1,Pd=null,Cr=null,hc=!1,Tr=null,dc=0,Qs=0,Md=null,pc=-1,gc=0;function Tt(){return(Oe&6)!==0?Ge():pc!==-1?pc:pc=Ge()}function kr(t){return(t.mode&1)===0?1:(Oe&2)!==0&&ut!==0?ut&-ut:JO.transition!==null?(gc===0&&(gc=L0()),gc):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:H0(t.type)),t)}function bn(t,e,n,r){if(50<Qs)throw Qs=0,Md=null,Error(ae(185));_s(t,n,r),((Oe&2)===0||t!==st)&&(t===st&&((Oe&2)===0&&(uc|=n),tt===4&&Er(t,ut)),It(t,r),n===1&&Oe===0&&(e.mode&1)===0&&(To=Ge()+500,Ul&&wr()))}function It(t,e){var n=t.callbackNode;JE(t,e);var r=Cl(t,t===st?ut:0);if(r===0)n!==null&&D0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&D0(n),e===1)t.tag===0?QO(W1.bind(null,t)):Py(W1.bind(null,t)),GO(function(){(Oe&6)===0&&wr()}),n=null;else{switch(F0(r)){case 1:n=ch;break;case 4:n=R0;break;case 16:n=wl;break;case 536870912:n=I0;break;default:n=wl}n=J1(n,H1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H1(t,e){if(pc=-1,gc=0,(Oe&6)!==0)throw Error(ae(327));var n=t.callbackNode;if(ko()&&t.callbackNode!==n)return null;var r=Cl(t,t===st?ut:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=mc(t,r);else{e=r;var i=Oe;Oe|=2;var s=X1();(st!==t||ut!==e)&&(Wn=null,To=Ge()+500,si(t,e));do try{bP();break}catch(a){Y1(t,a)}while(1);Gh(),cc.current=s,Oe=i,qe!==null?e=0:(st=null,ut=0,e=tt)}if(e!==0){if(e===2&&(i=uh(t),i!==0&&(r=i,e=Ad(t,i))),e===1)throw n=qs,si(t,0),Er(t,r),It(t,Ge()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,(r&30)===0&&!vP(i)&&(e=mc(t,r),e===2&&(s=uh(t),s!==0&&(r=s,e=Ad(t,s))),e===1))throw n=qs,si(t,0),Er(t,r),It(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:ai(t,Rt,Wn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Od+500-Ge(),10<e)){if(Cl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zh(ai.bind(null,t,Rt,Wn),e);break}ai(t,Rt,Wn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var d=31-dn(r);s=1<<d,d=e[d],d>i&&(i=d),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mP(r/1960))-r,10<r){t.timeoutHandle=zh(ai.bind(null,t,Rt,Wn),r);break}ai(t,Rt,Wn);break;case 5:ai(t,Rt,Wn);break;default:throw Error(ae(329))}}}return It(t,Ge()),t.callbackNode===n?H1.bind(null,t):null}function Ad(t,e){var n=Zs;return t.current.memoizedState.isDehydrated&&(si(t,e).flags|=256),t=mc(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Dd(e)),t}function Dd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function vP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Ed,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function W1(t){if((Oe&6)!==0)throw Error(ae(327));ko();var e=Cl(t,0);if((e&1)===0)return It(t,Ge()),null;var n=mc(t,e);if(t.tag!==0&&n===2){var r=uh(t);r!==0&&(e=r,n=Ad(t,r))}if(n===1)throw n=qs,si(t,0),Er(t,e),It(t,Ge()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ai(t,Rt,Wn),It(t,Ge()),null}function Rd(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(To=Ge()+500,Ul&&wr())}}function oi(t){Tr!==null&&Tr.tag===0&&(Oe&6)===0&&ko();var e=Oe;Oe|=1;var n=ln.transition,r=Ae;try{if(ln.transition=null,Ae=1,t)return t()}finally{Ae=r,ln.transition=n,Oe=e,(Oe&6)===0&&wr()}}function Id(){Xt=Co.current,Ne(Co)}function si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XO(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vl();break;case 3:xo(),Ne(Mt),Ne(pt),id();break;case 5:nd(r);break;case 4:xo();break;case 13:Ne($e);break;case 19:Ne($e);break;case 10:Kh(r.type._context);break;case 22:case 23:Id()}n=n.return}if(st=t,qe=t=Or(t.current,null),ut=Xt=e,tt=0,qs=null,Ed=uc=ii=0,Rt=Zs=null,ti!==null){for(e=0;e<ti.length;e++)if(n=ti[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var d=s.next;s.next=i,r.next=d}n.pending=r}ti=null}return t}function Y1(t,e){do{var n=qe;try{if(Gh(),ec.current=ic,tc){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tc=!1}if(ri=0,ot=et=Ue=null,Hs=!1,Ws=0,kd.current=null,n===null||n.return===null){tt=1,qs=e,qe=null;break}e:{var s=t,d=n.return,a=n,o=e;if(e=ut,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,h=a,l=h.tag;if((h.mode&1)===0&&(l===0||l===11||l===15)){var u=h.alternate;u?(h.updateQueue=u.updateQueue,h.memoizedState=u.memoizedState,h.lanes=u.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=v1(d);if(f!==null){f.flags&=-257,y1(f,d,a,s,e),f.mode&1&&m1(s,c,e),e=f,o=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(o),e.updateQueue=m}else p.add(o);break e}else{if((e&1)===0){m1(s,c,e),Ld();break e}o=Error(ae(426))}}else if(Be&&a.mode&1){var g=v1(d);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),y1(g,d,a,s,e),Yh(_o(o,a));break e}}s=o=_o(o,a),tt!==4&&(tt=2),Zs===null?Zs=[s]:Zs.push(s),s=d;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=p1(s,o,e);zy(s,v);break e;case 1:a=o;var y=s.type,b=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cr===null||!Cr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=g1(s,a,e);zy(s,w);break e}}s=s.return}while(s!==null)}K1(n)}catch(x){e=x,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(1)}function X1(){var t=cc.current;return cc.current=ic,t===null?ic:t}function Ld(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||(ii&268435455)===0&&(uc&268435455)===0||Er(st,ut)}function mc(t,e){var n=Oe;Oe|=2;var r=X1();(st!==t||ut!==e)&&(Wn=null,si(t,e));do try{yP();break}catch(i){Y1(t,i)}while(1);if(Gh(),Oe=n,cc.current=r,qe!==null)throw Error(ae(261));return st=null,ut=0,tt}function yP(){for(;qe!==null;)G1(qe)}function bP(){for(;qe!==null&&!HE();)G1(qe)}function G1(t){var e=Q1(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?K1(t):qe=e,kd.current=null}function K1(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=fP(n,e,Xt),n!==null){qe=n;return}}else{if(n=hP(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,qe=null;return}}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);tt===0&&(tt=5)}function ai(t,e,n){var r=Ae,i=ln.transition;try{ln.transition=null,Ae=1,wP(t,e,n,r)}finally{ln.transition=i,Ae=r}return null}function wP(t,e,n,r){do ko();while(Tr!==null);if((Oe&6)!==0)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eO(t,s),t===st&&(qe=st=null,ut=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||hc||(hc=!0,J1(wl,function(){return ko(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=ln.transition,ln.transition=null;var d=Ae;Ae=1;var a=Oe;Oe|=4,kd.current=null,pP(t,n),j1(n,t),BO(Lh),El=!!Ih,Lh=Ih=null,t.current=n,gP(n),WE(),Oe=a,Ae=d,ln.transition=s}else t.current=n;if(hc&&(hc=!1,Tr=t,dc=i),s=t.pendingLanes,s===0&&(Cr=null),GE(n.stateNode),It(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fc)throw fc=!1,t=Pd,Pd=null,t;return(dc&1)!==0&&t.tag!==0&&ko(),s=t.pendingLanes,(s&1)!==0?t===Md?Qs++:(Qs=0,Md=t):Qs=0,wr(),null}function ko(){if(Tr!==null){var t=F0(dc),e=ln.transition,n=Ae;try{if(ln.transition=null,Ae=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,dc=0,(Oe&6)!==0)throw Error(ae(331));var i=Oe;for(Oe|=4,pe=t.current;pe!==null;){var s=pe,d=s.child;if((pe.flags&16)!==0){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(pe=c;pe!==null;){var h=pe;switch(h.tag){case 0:case 11:case 15:Ks(8,h,s)}var l=h.child;if(l!==null)l.return=h,pe=l;else for(;pe!==null;){h=pe;var u=h.sibling,f=h.return;if(I1(h),h===c){pe=null;break}if(u!==null){u.return=f,pe=u;break}pe=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}pe=s}}if((s.subtreeFlags&2064)!==0&&d!==null)d.return=s,pe=d;else e:for(;pe!==null;){if(s=pe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ks(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,pe=v;break e}pe=s.return}}var y=t.current;for(pe=y;pe!==null;){d=pe;var b=d.child;if((d.subtreeFlags&2064)!==0&&b!==null)b.return=d,pe=b;else e:for(d=y;pe!==null;){if(a=pe,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:lc(9,a)}}catch(x){Ye(a,a.return,x)}if(a===d){pe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,pe=w;break e}pe=a.return}}if(Oe=i,wr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(xl,t)}catch{}r=!0}return r}finally{Ae=n,ln.transition=e}}return!1}function q1(t,e,n){e=_o(n,e),e=p1(t,e,1),t=_r(t,e,1),e=Tt(),t!==null&&(_s(t,1,e),It(t,e))}function Ye(t,e,n){if(t.tag===3)q1(t,t,n);else for(;e!==null;){if(e.tag===3){q1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=_o(n,t),t=g1(e,t,1),e=_r(e,t,1),t=Tt(),e!==null&&(_s(e,1,t),It(e,t));break}}e=e.return}}function xP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ut&n)===n&&(tt===4||tt===3&&(ut&130023424)===ut&&500>Ge()-Od?si(t,0):Ed|=n),It(t,e)}function Z1(t,e){e===0&&((t.mode&1)===0?e=1:(e=Sl,Sl<<=1,(Sl&130023424)===0&&(Sl=4194304)));var n=Tt();t=$n(t,e),t!==null&&(_s(t,e,n),It(t,n))}function _P(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Z1(t,n)}function SP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Z1(t,n)}var Q1;Q1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Dt=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Dt=!1,uP(t,e,n);Dt=(t.flags&131072)!==0}else Dt=!1,Be&&(e.flags&1048576)!==0&&My(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sc(t,e),t=e.pendingProps;var i=po(e,pt.current);bo(e,n),i=ad(null,e,r,t,i,n);var s=ld();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(s=!0,$l(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qh(e),i.updater=Zl,e.stateNode=i,i._reactInternals=e,ed(e,r,t,n),e=md(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&$h(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=TP(r),t=mn(r,t),i){case 0:e=gd(null,e,r,t,n);break e;case 1:e=C1(null,e,r,t,n);break e;case 11:e=b1(null,e,r,t,n);break e;case 14:e=w1(null,e,r,mn(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),gd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),C1(t,e,r,i,n);case 3:e:{if(T1(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Fy(t,e),ql(e,r,null,n);var d=e.memoizedState;if(r=d.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_o(Error(ae(423)),e),e=k1(t,e,r,n,i);break e}else if(r!==i){i=_o(Error(ae(424)),e),e=k1(t,e,r,n,i);break e}else for(Yt=vr(e.stateNode.containerInfo.firstChild),Wt=e,Be=!0,gn=null,n=Wy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),r===i){e=Hn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return Yy(e),t===null&&Wh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,d=i.children,Fh(r,i)?d=null:s!==null&&Fh(r,s)&&(e.flags|=32),S1(t,e),Ct(t,e,d,n),e.child;case 6:return t===null&&Wh(e),null;case 13:return E1(t,e,n);case 4:return td(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wo(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),b1(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,d=i.value,Le(Xl,r._currentValue),r._currentValue=d,s!==null)if(pn(s.value,d)){if(s.children===i.children&&!Mt.current){e=Hn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){d=s.child;for(var o=a.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=Un(-1,n&-n),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?o.next=o:(o.next=h.next,h.next=o),c.pending=o}}s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),qh(s.return,n,e),a.lanes|=n;break}o=o.next}}else if(s.tag===10)d=s.type===e.type?null:s.child;else if(s.tag===18){if(d=s.return,d===null)throw Error(ae(341));d.lanes|=n,a=d.alternate,a!==null&&(a.lanes|=n),qh(d,n,e),d=s.sibling}else d=s.child;if(d!==null)d.return=s;else for(d=s;d!==null;){if(d===e){d=null;break}if(s=d.sibling,s!==null){s.return=d.return,d=s;break}d=d.return}s=d}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bo(e,n),i=sn(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=mn(r,e.pendingProps),i=mn(r.type,i),w1(t,e,r,i,n);case 15:return x1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),sc(t,e),e.tag=1,At(r)?(t=!0,$l(e)):t=!1,bo(e,n),Vy(e,r,i),ed(e,r,i,n),md(null,e,r,!0,t,n);case 19:return P1(t,e,n);case 22:return _1(t,e,n)}throw Error(ae(156,e.tag))};function J1(t,e){return A0(t,e)}function CP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new CP(t,e,n,r)}function Fd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TP(t){if(typeof t=="function")return Fd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$f)return 11;if(t===Wf)return 14}return 2}function Or(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vc(t,e,n,r,i,s){var d=2;if(r=t,typeof t=="function")Fd(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case eo:return li(n.children,i,s,e);case Bf:d=8,i|=8;break;case Vf:return t=cn(12,n,e,i|2),t.elementType=Vf,t.lanes=s,t;case Uf:return t=cn(13,n,e,i),t.elementType=Uf,t.lanes=s,t;case Hf:return t=cn(19,n,e,i),t.elementType=Hf,t.lanes=s,t;case a0:return yc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o0:d=10;break e;case s0:d=9;break e;case $f:d=11;break e;case Wf:d=14;break e;case cr:d=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=cn(d,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function li(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function yc(t,e,n,r){return t=cn(22,t,r,e),t.elementType=a0,t.lanes=n,t.stateNode={isHidden:!1},t}function zd(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Nd(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fh(0),this.expirationTimes=fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jd(t,e,n,r,i,s,d,a,o){return t=new kP(t,e,n,a,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qh(s),t}function EP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eb(t){if(!t)return br;t=t._reactInternals;e:{if(qr(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(At(n))return Ey(t,n,e)}return e}function tb(t,e,n,r,i,s,d,a,o){return t=jd(n,r,!0,t,i,s,d,a,o),t.context=eb(null),n=t.current,r=Tt(),i=kr(n),s=Un(r,i),s.callback=e!=null?e:null,_r(n,s,i),t.current.lanes=i,_s(t,i,r),It(t,r),t}function bc(t,e,n,r){var i=e.current,s=Tt(),d=kr(i);return n=eb(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(s,d),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_r(i,e,d),t!==null&&(bn(t,i,d,s),Kl(t,i,d)),d}function wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bd(t,e){nb(t,e),(t=t.alternate)&&nb(t,e)}function OP(){return null}var rb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vd(t){this._internalRoot=t}xc.prototype.render=Vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));bc(t,e,null,null)},xc.prototype.unmount=Vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){bc(null,t,null,null)}),e[Nn]=null}};function xc(t){this._internalRoot=t}xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=j0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&$0(t)}};function $d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ib(){}function PP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wc(d);s.call(c)}}var d=tb(e,r,t,0,null,!1,!1,"",ib);return t._reactRootContainer=d,t[Nn]=d.current,Fs(t.nodeType===8?t.parentNode:t),oi(),d}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wc(o);a.call(c)}}var o=jd(t,0,!1,null,null,!1,!1,"",ib);return t._reactRootContainer=o,t[Nn]=o.current,Fs(t.nodeType===8?t.parentNode:t),oi(function(){bc(e,o,n,r)}),o}function Sc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var d=s;if(typeof i=="function"){var a=i;i=function(){var o=wc(d);a.call(o)}}bc(e,d,t,i)}else d=PP(n,e,t,i,r);return wc(d)}z0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xs(e.pendingLanes);n!==0&&(hh(e,n|1),It(e,Ge()),(Oe&6)===0&&(To=Ge()+500,wr()))}break;case 13:oi(function(){var r=$n(t,1);if(r!==null){var i=Tt();bn(r,t,1,i)}}),Bd(t,1)}},dh=function(t){if(t.tag===13){var e=$n(t,134217728);if(e!==null){var n=Tt();bn(e,t,134217728,n)}Bd(t,134217728)}},N0=function(t){if(t.tag===13){var e=kr(t),n=$n(t,e);if(n!==null){var r=Tt();bn(n,t,e,r)}Bd(t,e)}},j0=function(){return Ae},B0=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}},oh=function(t,e,n){switch(e){case"input":if(Zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bl(r);if(!i)throw Error(ae(90));u0(r),Zf(r,i)}}}break;case"textarea":g0(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}},C0=Rd,T0=oi;var MP={usingClientEntryPoint:!1,Events:[js,fo,Bl,_0,S0,Rd]},Js={findFiberByHostInstance:Zr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AP={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=P0(t),t===null?null:t.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||OP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{xl=Cc.inject(AP),Tn=Cc}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MP,$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(e))throw Error(ae(200));return EP(t,e,null,n)},$t.createRoot=function(t,e){if(!$d(t))throw Error(ae(299));var n=!1,r="",i=rb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jd(t,1,!1,null,null,n,!1,r,i),t[Nn]=e.current,Fs(t.nodeType===8?t.parentNode:t),new Vd(e)},$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=P0(e),t=t===null?null:t.stateNode,t},$t.flushSync=function(t){return oi(t)},$t.hydrate=function(t,e,n){if(!_c(e))throw Error(ae(200));return Sc(null,t,e,!0,n)},$t.hydrateRoot=function(t,e,n){if(!$d(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",d=rb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=tb(e,null,t,1,n!=null?n:null,i,!1,s,d),t[Nn]=e.current,Fs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xc(e)},$t.render=function(t,e,n){if(!_c(e))throw Error(ae(200));return Sc(null,t,e,!1,n)},$t.unmountComponentAtNode=function(t){if(!_c(t))throw Error(ae(40));return t._reactRootContainer?(oi(function(){Sc(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1},$t.unstable_batchedUpdates=Rd,$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_c(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Sc(t,e,n,!1,r)},$t.version="18.2.0-next-9e3b772b8-20220608",function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=$t}(Zi);var ob,sb=Zi.exports;ob=sb.createRoot,sb.hydrateRoot;const ab=E.exports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Tc=E.exports.createContext({}),Ud=E.exports.createContext(null),kc=typeof document<"u",Ec=kc?E.exports.useLayoutEffect:E.exports.useEffect,Hd=E.exports.createContext({strict:!1});function DP(t,e,n,r){const{visualElement:i}=E.exports.useContext(Tc),s=E.exports.useContext(Hd),d=E.exports.useContext(Ud),a=E.exports.useContext(ab).reducedMotion,o=E.exports.useRef();r=r||s.renderer,!o.current&&r&&(o.current=r(t,{visualState:e,parent:i,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:a}));const c=o.current;return E.exports.useInsertionEffect(()=>{c&&c.update(n,d)}),Ec(()=>{c&&c.render()}),E.exports.useEffect(()=>{c&&c.updateFeatures()}),(window.HandoffAppearAnimations?Ec:E.exports.useEffect)(()=>{c&&c.animationState&&c.animationState.animateChanges()}),c}function lb(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function RP(t,e,n){return E.exports.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lb(n)&&(n.current=r))},[e])}function ea(t){return typeof t=="string"||Array.isArray(t)}function Oc(t){return typeof t=="object"&&typeof t.start=="function"}const Wd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yd=["initial",...Wd];function Pc(t){return Oc(t.animate)||Yd.some(e=>ea(t[e]))}function cb(t){return Boolean(Pc(t)||t.variants)}function IP(t,e){if(Pc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ea(n)?n:void 0,animate:ea(r)?r:void 0}}return t.inherit!==!1?e:{}}function LP(t){const{initial:e,animate:n}=IP(t,E.exports.useContext(Tc));return E.exports.useMemo(()=>({initial:e,animate:n}),[ub(e),ub(n)])}function ub(t){return Array.isArray(t)?t.join(" "):t}const fb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ta={};for(const t in fb)ta[t]={isEnabled:e=>fb[t].some(n=>!!e[n])};function Xd(t){for(const e in t)ta[e]={...ta[e],...t[e]}}const hb=E.exports.createContext({}),FP=E.exports.createContext({}),zP=Symbol.for("motionComponentSymbol");function NP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Xd(t);function s(a,o){let c;const h={...E.exports.useContext(ab),...a,layoutId:jP(a)},{isStatic:l}=h,u=LP(a),f=r(a,l);if(!l&&kc){u.visualElement=DP(i,f,h,e);const p=E.exports.useContext(FP),m=E.exports.useContext(Hd).strict;u.visualElement&&(c=u.visualElement.loadFeatures(h,m,t,p))}return oe(Tc.Provider,{value:u,children:[c&&u.visualElement?_(c,{visualElement:u.visualElement,...h}):null,n(i,a,RP(f,u.visualElement,o),f,l,u.visualElement)]})}const d=E.exports.forwardRef(s);return d[zP]=i,d}function jP({layoutId:t}){const e=E.exports.useContext(hb).id;return e&&t!==void 0?e+"-"+t:t}function BP(t){function e(r,i={}){return NP(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const VP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gd(t){return typeof t!="string"||t.includes("-")?!1:!!(VP.indexOf(t)>-1||/[A-Z]/.test(t))}const $P={},na=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ci=new Set(na);function db(t,{layout:e,layoutId:n}){return ci.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$P[t]||t==="opacity")}const Gt=t=>Boolean(t&&t.getVelocity),UP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HP=na.length;function WP(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let d=0;d<HP;d++){const a=na[d];if(t[a]!==void 0){const o=UP[a]||a;s+=`${o}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const pb=t=>e=>typeof e=="string"&&e.startsWith(t),gb=pb("--"),Kd=pb("var(--"),YP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,XP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Eo=(t,e,n)=>Math.min(Math.max(n,t),e),ui={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ra={...ui,transform:t=>Eo(0,1,t)},Mc={...ui,default:1},ia=t=>Math.round(t*1e5)/1e5,Ac=/(-)?([\d]*\.?[\d])+/g,mb=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,GP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function oa(t){return typeof t=="string"}const sa=t=>({test:e=>oa(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pr=sa("deg"),Oo=sa("%"),Se=sa("px"),KP=sa("vh"),qP=sa("vw"),vb={...Oo,parse:t=>Oo.parse(t)/100,transform:t=>Oo.transform(t*100)},yb={...ui,transform:Math.round},bb={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,size:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,rotate:Pr,rotateX:Pr,rotateY:Pr,rotateZ:Pr,scale:Mc,scaleX:Mc,scaleY:Mc,scaleZ:Mc,skew:Pr,skewX:Pr,skewY:Pr,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:ra,originX:vb,originY:vb,originZ:Se,zIndex:yb,fillOpacity:ra,strokeOpacity:ra,numOctaves:yb};function qd(t,e,n,r){const{style:i,vars:s,transform:d,transformOrigin:a}=t;let o=!1,c=!1,h=!0;for(const l in e){const u=e[l];if(gb(l)){s[l]=u;continue}const f=bb[l],p=XP(u,f);if(ci.has(l)){if(o=!0,d[l]=p,!h)continue;u!==(f.default||0)&&(h=!1)}else l.startsWith("origin")?(c=!0,a[l]=p):i[l]=p}if(e.transform||(o||r?i.transform=WP(t.transform,n,h,r):i.transform&&(i.transform="none")),c){const{originX:l="50%",originY:u="50%",originZ:f=0}=a;i.transformOrigin=`${l} ${u} ${f}`}}const Zd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wb(t,e,n){for(const r in e)!Gt(e[r])&&!db(r,n)&&(t[r]=e[r])}function ZP({transformTemplate:t},e,n){return E.exports.useMemo(()=>{const r=Zd();return qd(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function QP(t,e,n){const r=t.style||{},i={};return wb(i,r,t),Object.assign(i,ZP(t,e,n)),t.transformValues?t.transformValues(i):i}function JP(t,e,n){const r={},i=QP(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const e4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Dc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||e4.has(t)}let xb=t=>!Dc(t);function t4(t){!t||(xb=e=>e.startsWith("on")?!Dc(e):t(e))}try{t4(require("@emotion/is-prop-valid").default)}catch{}function n4(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(xb(i)||n===!0&&Dc(i)||!e&&!Dc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function _b(t,e,n){return typeof t=="string"?t:Se.transform(e+n*t)}function r4(t,e,n){const r=_b(e,t.x,t.width),i=_b(n,t.y,t.height);return`${r} ${i}`}const i4={offset:"stroke-dashoffset",array:"stroke-dasharray"},o4={offset:"strokeDashoffset",array:"strokeDasharray"};function s4(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?i4:o4;t[s.offset]=Se.transform(-r);const d=Se.transform(e),a=Se.transform(n);t[s.array]=`${d} ${a}`}function Qd(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:d,pathSpacing:a=1,pathOffset:o=0,...c},h,l,u){if(qd(t,c,h,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=r4(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),d!==void 0&&s4(f,d,a,o,!1)}const Sb=()=>({...Zd(),attrs:{}}),Jd=t=>typeof t=="string"&&t.toLowerCase()==="svg";function a4(t,e,n,r){const i=E.exports.useMemo(()=>{const s=Sb();return Qd(s,e,{enableHardwareAcceleration:!1},Jd(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};wb(s,t.style,t),i.style={...s,...i.style}}return i}function l4(t=!1){return(n,r,i,{latestValues:s},d)=>{const o=(Gd(n)?a4:JP)(r,s,d,n),h={...n4(r,typeof n=="string",t),...o,ref:i},{children:l}=r,u=E.exports.useMemo(()=>Gt(l)?l.get():l,[l]);return E.exports.createElement(n,{...h,children:u})}}const ep=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Cb(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Tb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kb(t,e,n,r){Cb(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Tb.has(i)?i:ep(i),e.attrs[i])}function tp(t,e){const{style:n}=t,r={};for(const i in n)(Gt(n[i])||e.style&&Gt(e.style[i])||db(i,t))&&(r[i]=n[i]);return r}function Eb(t,e){const n=tp(t,e);for(const r in t)if(Gt(t[r])||Gt(e[r])){const i=na.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function np(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function Ob(t){const e=E.exports.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rc=t=>Array.isArray(t),c4=t=>Boolean(t&&typeof t=="object"&&t.mix&&t.toValue),u4=t=>Rc(t)?t[t.length-1]||0:t;function f4(t){const e=Gt(t)?t.get():t;return c4(e)?e.toValue():e}function h4({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const d={latestValues:d4(r,i,s,t),renderState:e()};return n&&(d.mount=a=>n(r,a,d)),d}const Pb=t=>(e,n)=>{const r=E.exports.useContext(Tc),i=E.exports.useContext(Ud),s=()=>h4(t,e,r,i);return n?s():Ob(s)};function d4(t,e,n,r){const i={},s=r(t,{});for(const u in s)i[u]=f4(s[u]);let{initial:d,animate:a}=t;const o=Pc(t),c=cb(t);e&&c&&!o&&t.inherit!==!1&&(d===void 0&&(d=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||d===!1;const l=h?a:d;return l&&typeof l!="boolean"&&!Oc(l)&&(Array.isArray(l)?l:[l]).forEach(f=>{const p=np(t,f);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const y in v){let b=v[y];if(Array.isArray(b)){const w=h?b.length-1:0;b=b[w]}b!==null&&(i[y]=b)}for(const y in m)i[y]=m[y]}),i}const p4={useVisualState:Pb({scrapeMotionValuesFromProps:Eb,createRenderState:Sb,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}Qd(n,r,{enableHardwareAcceleration:!1},Jd(e.tagName),t.transformTemplate),kb(e,n)}})},g4={useVisualState:Pb({scrapeMotionValuesFromProps:tp,createRenderState:Zd})};function m4(t,{forwardMotionProps:e=!1},n,r){return{...Gd(t)?p4:g4,preloadedFeatures:n,useRender:l4(e),createVisualElement:r,Component:t}}function fi(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const v4=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Mb(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const y4=t=>e=>v4(e)&&t(e,Mb(e));function Ic(t,e,n,r){return fi(t,e,y4(n),r)}const b4=(t,e)=>n=>e(t(n)),hi=(...t)=>t.reduce(b4);function Ab(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Db=Ab("dragHorizontal"),Rb=Ab("dragVertical");function w4(t){let e=!1;if(t==="y")e=Rb();else if(t==="x")e=Db();else{const n=Db(),r=Rb();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Ib(){const t=w4(!0);return t?(t(),!1):!0}class Po{constructor(e){this.isMounted=!1,this.node=e}update(){}}function x4(t){let e=[],n=[],r=0,i=!1,s=!1;const d=new WeakSet,a={schedule:(o,c=!1,h=!1)=>{const l=h&&i,u=l?e:n;return c&&d.add(o),u.indexOf(o)===-1&&(u.push(o),l&&i&&(r=e.length)),o},cancel:o=>{const c=n.indexOf(o);c!==-1&&n.splice(c,1),d.delete(o)},process:o=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let c=0;c<r;c++){const h=e[c];h(o),d.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(o))}};return a}const Mn={delta:0,timestamp:0,isProcessing:!1},_4=40;let rp=!0,aa=!1;const Lc=["read","update","preRender","render","postRender"],ip=Lc.reduce((t,e)=>(t[e]=x4(()=>aa=!0),t),{}),S4=t=>ip[t].process(Mn),Lb=t=>{aa=!1,Mn.delta=rp?1e3/60:Math.max(Math.min(t-Mn.timestamp,_4),1),Mn.timestamp=t,Mn.isProcessing=!0,Lc.forEach(S4),Mn.isProcessing=!1,aa&&(rp=!1,requestAnimationFrame(Lb))},C4=()=>{aa=!0,rp=!0,Mn.isProcessing||requestAnimationFrame(Lb)},Lt=Lc.reduce((t,e)=>{const n=ip[e];return t[e]=(r,i=!1,s=!1)=>(aa||C4(),n.schedule(r,i,s)),t},{});function Fc(t){Lc.forEach(e=>ip[e].cancel(t))}function Fb(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,d)=>{if(s.type==="touch"||Ib())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Lt.update(()=>a[r](s,d))};return Ic(t.current,n,i,{passive:!t.getProps()[r]})}class T4 extends Po{mount(){this.unmount=hi(Fb(this.node,!0),Fb(this.node,!1))}unmount(){}}class k4 extends Po{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hi(fi(this.node.current,"focus",()=>this.onFocus()),fi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const zb=(t,e)=>e?t===e?!0:zb(t,e.parentElement):!1,Ft=t=>t;function op(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Mb(n))}class E4 extends Po{constructor(){super(...arguments),this.removeStartListeners=Ft,this.removeEndListeners=Ft,this.removeAccessibleListeners=Ft,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),s=Ic(window,"pointerup",(a,o)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();Lt.update(()=>{zb(this.node.current,a.target)?c&&c(a,o):h&&h(a,o)})},{passive:!(r.onTap||r.onPointerUp)}),d=Ic(window,"pointercancel",(a,o)=>this.cancelPress(a,o),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=hi(s,d),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const d=a=>{a.key!=="Enter"||!this.checkPressEnd()||op("up",(o,c)=>{const{onTap:h}=this.node.getProps();h&&Lt.update(()=>h(o,c))})};this.removeEndListeners(),this.removeEndListeners=fi(this.node.current,"keyup",d),op("down",(a,o)=>{this.startPress(a,o)})},n=fi(this.node.current,"keydown",e),r=()=>{!this.isPressing||op("cancel",(s,d)=>this.cancelPress(s,d))},i=fi(this.node.current,"blur",r);this.removeAccessibleListeners=hi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Lt.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ib()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Lt.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ic(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=fi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=hi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const sp=new WeakMap,ap=new WeakMap,O4=t=>{const e=sp.get(t.target);e&&e(t)},P4=t=>{t.forEach(O4)};function M4({root:t,...e}){const n=t||document;ap.has(n)||ap.set(n,{});const r=ap.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(P4,{root:t,...e})),r[i]}function A4(t,e,n){const r=M4(e);return sp.set(t,n),r.observe(t),()=>{sp.delete(t),r.unobserve(t)}}const D4={some:0,all:1};class R4 extends Po{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,d={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:D4[i]},a=o=>{const{isIntersecting:c}=o;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:l}=this.node.getProps(),u=c?h:l;u&&u(o)};return A4(this.node.current,d,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(I4(e,n))&&this.startObserver()}unmount(){}}function I4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const L4={inView:{Feature:R4},tap:{Feature:E4},focus:{Feature:k4},hover:{Feature:T4}};function Nb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function F4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function z4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function zc(t,e,n){const r=t.getProps();return np(r,e,n!==void 0?n:r.custom,F4(t),z4(t))}const N4="data-"+ep("framerAppearId");let lp=Ft,Nc=Ft;const di=t=>t*1e3,Mr=t=>t/1e3,j4={current:!1},jb=t=>Array.isArray(t)&&typeof t[0]=="number";function Bb(t){return Boolean(!t||typeof t=="string"&&Vb[t]||jb(t)||Array.isArray(t)&&t.every(Bb))}const la=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Vb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function $b(t){if(!!t)return jb(t)?la(t):Array.isArray(t)?t.map($b):Vb[t]}function B4(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:d="loop",ease:a,times:o}={}){const c={[e]:n};o&&(c.offset=o);const h=$b(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:d==="reverse"?"alternate":"normal"})}const Ub={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},cp={},Hb={};for(const t in Ub)Hb[t]=()=>(cp[t]===void 0&&(cp[t]=Ub[t]()),cp[t]);function V4(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Wb=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$4=1e-7,U4=12;function H4(t,e,n,r,i){let s,d,a=0;do d=e+(n-e)/2,s=Wb(d,r,i)-t,s>0?n=d:e=d;while(Math.abs(s)>$4&&++a<U4);return d}function ca(t,e,n,r){if(t===e&&n===r)return Ft;const i=s=>H4(s,0,1,t,n);return s=>s===0||s===1?s:Wb(i(s),e,r)}const W4=ca(.42,0,1,1),Y4=ca(0,0,.58,1),Yb=ca(.42,0,.58,1),X4=t=>Array.isArray(t)&&typeof t[0]!="number",Xb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Gb=t=>e=>1-t(1-e),Kb=t=>1-Math.sin(Math.acos(t)),qb=Gb(Kb),G4=Xb(qb),Zb=ca(.33,1.53,.69,.99),up=Gb(Zb),K4=Xb(up),q4={linear:Ft,easeIn:W4,easeInOut:Yb,easeOut:Y4,circIn:Kb,circInOut:G4,circOut:qb,backIn:up,backInOut:K4,backOut:Zb,anticipate:t=>(t*=2)<1?.5*up(t):.5*(2-Math.pow(2,-10*(t-1)))},Qb=t=>{if(Array.isArray(t)){Nc(t.length===4);const[e,n,r,i]=t;return ca(e,n,r,i)}else if(typeof t=="string")return q4[t];return t},fp=(t,e)=>n=>Boolean(oa(n)&&GP.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Jb=(t,e,n)=>r=>{if(!oa(r))return r;const[i,s,d,a]=r.match(Ac);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(d),alpha:a!==void 0?parseFloat(a):1}},Z4=t=>Eo(0,255,t),hp={...ui,transform:t=>Math.round(Z4(t))},pi={test:fp("rgb","red"),parse:Jb("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+hp.transform(t)+", "+hp.transform(e)+", "+hp.transform(n)+", "+ia(ra.transform(r))+")"};function Q4(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const dp={test:fp("#"),parse:Q4,transform:pi.transform},Mo={test:fp("hsl","hue"),parse:Jb("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Oo.transform(ia(e))+", "+Oo.transform(ia(n))+", "+ia(ra.transform(r))+")"},kt={test:t=>pi.test(t)||dp.test(t)||Mo.test(t),parse:t=>pi.test(t)?pi.parse(t):Mo.test(t)?Mo.parse(t):dp.parse(t),transform:t=>oa(t)?t:t.hasOwnProperty("red")?pi.transform(t):Mo.transform(t)},jc=(t,e,n)=>-n*t+n*e+t;function pp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function J4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,d=0;if(!e)i=s=d=n;else{const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a;i=pp(o,a,t+1/3),s=pp(o,a,t),d=pp(o,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(d*255),alpha:r}}const gp=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},e3=[dp,pi,Mo],t3=t=>e3.find(e=>e.test(t));function ew(t){const e=t3(t);let n=e.parse(t);return e===Mo&&(n=J4(n)),n}const tw=(t,e)=>{const n=ew(t),r=ew(e),i={...n};return s=>(i.red=gp(n.red,r.red,s),i.green=gp(n.green,r.green,s),i.blue=gp(n.blue,r.blue,s),i.alpha=jc(n.alpha,r.alpha,s),pi.transform(i))};function n3(t){var e,n;return isNaN(t)&&oa(t)&&(((e=t.match(Ac))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mb))===null||n===void 0?void 0:n.length)||0)>0}const nw={regex:YP,countKey:"Vars",token:"${v}",parse:Ft},rw={regex:mb,countKey:"Colors",token:"${c}",parse:kt.parse},iw={regex:Ac,countKey:"Numbers",token:"${n}",parse:ui.parse};function mp(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);!s||(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Bc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&mp(n,nw),mp(n,rw),mp(n,iw),n}function ow(t){return Bc(t).values}function sw(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Bc(t),s=e.length;return d=>{let a=i;for(let o=0;o<s;o++)o<r?a=a.replace(nw.token,d[o]):o<r+n?a=a.replace(rw.token,kt.transform(d[o])):a=a.replace(iw.token,ia(d[o]));return a}}const r3=t=>typeof t=="number"?0:t;function i3(t){const e=ow(t);return sw(t)(e.map(r3))}const Ao={test:n3,parse:ow,createTransformer:sw,getAnimatableNone:i3},aw=(t,e)=>n=>`${n>0?e:t}`;function lw(t,e){return typeof t=="number"?n=>jc(t,e,n):kt.test(t)?tw(t,e):t.startsWith("var(")?aw(t,e):uw(t,e)}const cw=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,d)=>lw(s,e[d]));return s=>{for(let d=0;d<r;d++)n[d]=i[d](s);return n}},o3=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=lw(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},uw=(t,e)=>{const n=Ao.createTransformer(e),r=Bc(t),i=Bc(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?hi(cw(r.values,i.values),n):(lp(!0),aw(t,e))},fw=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},hw=(t,e)=>n=>jc(t,e,n);function s3(t){return typeof t=="number"?hw:typeof t=="string"?kt.test(t)?tw:uw:Array.isArray(t)?cw:typeof t=="object"?o3:hw}function a3(t,e,n){const r=[],i=n||s3(t[0]),s=t.length-1;for(let d=0;d<s;d++){let a=i(t[d],t[d+1]);if(e){const o=Array.isArray(e)?e[d]||Ft:e;a=hi(o,a)}r.push(a)}return r}function dw(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Nc(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=a3(e,r,i),a=d.length,o=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const l=fw(t[h],t[h+1],c);return d[h](l)};return n?c=>o(Eo(t[0],t[s-1],c)):o}function l3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=fw(0,e,r);t.push(jc(n,1,i))}}function c3(t){const e=[0];return l3(e,t.length-1),e}function u3(t,e){return t.map(n=>n*e)}function f3(t,e){return t.map(()=>e||Yb).splice(0,t.length-1)}function Vc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=X4(r)?r.map(Qb):Qb(r),s={done:!1,value:e[0]},d=u3(n&&n.length===e.length?n:c3(e),t),a=dw(d,e,{ease:Array.isArray(i)?i:f3(e,i)});return{calculatedDuration:t,next:o=>(s.value=a(o),s.done=o>=t,s)}}function pw(t,e){return e?t*(1e3/e):0}const h3=5;function gw(t,e,n){const r=Math.max(e-h3,0);return pw(n-t(r),e-r)}const vp=.001,d3=.01,mw=10,p3=.05,g3=1;function m3({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;lp(t<=di(mw));let d=1-e;d=Eo(p3,g3,d),t=Eo(d3,mw,Mr(t)),d<1?(i=c=>{const h=c*d,l=h*t,u=h-n,f=yp(c,d),p=Math.exp(-l);return vp-u/f*p},s=c=>{const l=c*d*t,u=l*n+n,f=Math.pow(d,2)*Math.pow(c,2)*t,p=Math.exp(-l),m=yp(Math.pow(c,2),d);return(-i(c)+vp>0?-1:1)*((u-f)*p)/m}):(i=c=>{const h=Math.exp(-c*t),l=(c-n)*t+1;return-vp+h*l},s=c=>{const h=Math.exp(-c*t),l=(n-c)*(t*t);return h*l});const a=5/t,o=y3(i,s,a);if(t=di(t),isNaN(o))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(o,2)*r;return{stiffness:c,damping:d*2*Math.sqrt(r*c),duration:t}}}const v3=12;function y3(t,e,n){let r=n;for(let i=1;i<v3;i++)r=r-t(r)/e(r);return r}function yp(t,e){return t*Math.sqrt(1-e*e)}const b3=["duration","bounce"],w3=["stiffness","damping","mass"];function vw(t,e){return e.some(n=>t[n]!==void 0)}function x3(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!vw(t,w3)&&vw(t,b3)){const n=m3(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function yw({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],d={done:!1,value:i},{stiffness:a,damping:o,mass:c,velocity:h,duration:l,isResolvedFromDuration:u}=x3(r),f=h?-Mr(h):0,p=o/(2*Math.sqrt(a*c)),m=s-i,g=Mr(Math.sqrt(a/c)),v=Math.abs(m)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let y;if(p<1){const b=yp(g,p);y=w=>{const x=Math.exp(-p*g*w);return s-x*((f+p*g*m)/b*Math.sin(b*w)+m*Math.cos(b*w))}}else if(p===1)y=b=>s-Math.exp(-g*b)*(m+(f+g*m)*b);else{const b=g*Math.sqrt(p*p-1);y=w=>{const x=Math.exp(-p*g*w),S=Math.min(b*w,300);return s-x*((f+p*g*m)*Math.sinh(S)+b*m*Math.cosh(S))/b}}return{calculatedDuration:u&&l||null,next:b=>{const w=y(b);if(u)d.done=b>=l;else{let x=f;b!==0&&(p<1?x=gw(y,b,w):x=0);const S=Math.abs(x)<=n,C=Math.abs(s-w)<=e;d.done=S&&C}return d.value=d.done?s:w,d}}}function bw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:d,min:a,max:o,restDelta:c=.5,restSpeed:h}){const l=t[0],u={done:!1,value:l},f=k=>a!==void 0&&k<a||o!==void 0&&k>o,p=k=>a===void 0?o:o===void 0||Math.abs(a-k)<Math.abs(o-k)?a:o;let m=n*e;const g=l+m,v=d===void 0?g:d(g);v!==g&&(m=v-l);const y=k=>-m*Math.exp(-k/r),b=k=>v+y(k),w=k=>{const I=y(k),F=b(k);u.done=Math.abs(I)<=c,u.value=u.done?v:F};let x,S;const C=k=>{!f(u.value)||(x=k,S=yw({keyframes:[u.value,p(u.value)],velocity:gw(b,k,u.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return C(0),{calculatedDuration:null,next:k=>{let I=!1;return!S&&x===void 0&&(I=!0,w(k),C(k)),x!==void 0&&k>x?S.next(k-x):(!I&&w(k),u)}}}const _3=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Lt.update(e,!0),stop:()=>Fc(e),now:()=>Mn.isProcessing?Mn.timestamp:performance.now()}},ww=2e4;function xw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ww;)e+=n,r=t.next(e);return e>=ww?1/0:e}const S3={decay:bw,inertia:bw,tween:Vc,keyframes:Vc,spring:yw};function $c({autoplay:t=!0,delay:e=0,driver:n=_3,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:d=0,repeatType:a="loop",onPlay:o,onStop:c,onComplete:h,onUpdate:l,...u}){let f=1,p=!1,m,g;const v=()=>{m&&m(),g=new Promise(D=>{m=D})};v();let y;const b=S3[i]||Vc;let w;b!==Vc&&typeof r[0]!="number"&&(w=dw([0,100],r,{clamp:!1}),r=[0,100]);const x=b({...u,keyframes:r});let S;a==="mirror"&&(S=b({...u,keyframes:[...r].reverse(),velocity:-(u.velocity||0)}));let C="idle",k=null,I=null,F=null;x.calculatedDuration===null&&s&&(x.calculatedDuration=xw(x));const{calculatedDuration:j}=x;let q=1/0,te=1/0;j!==null&&(q=j+d,te=q*(s+1)-d);let G=0;const Y=D=>{if(I===null)return;f>0&&(I=Math.min(I,D)),k!==null?G=k:G=(D-I)*f;const R=G-e,$=R<0;G=Math.max(R,0),C==="finished"&&k===null&&(G=te);let A=G,O=x;if(s){const W=G/q;let J=Math.floor(W),ne=W%1;!ne&&W>=1&&(ne=1),ne===1&&J--,J=Math.min(J,s+1);const re=Boolean(J%2);re&&(a==="reverse"?(ne=1-ne,d&&(ne-=d/q)):a==="mirror"&&(O=S));let U=Eo(0,1,ne);G>te&&(U=a==="reverse"&&re?1:0),A=U*q}const z=$?{done:!1,value:r[0]}:O.next(A);w&&(z.value=w(z.value));let{done:B}=z;!$&&j!==null&&(B=G>=te);const K=k===null&&(C==="finished"||C==="running"&&B||f<0&&G<=0);return l&&l(z.value),K&&H(),z},ie=()=>{y&&y.stop(),y=void 0},ce=()=>{C="idle",ie(),v(),I=F=null},H=()=>{C="finished",h&&h(),ie(),v()},T=()=>{if(p)return;y||(y=n(Y));const D=y.now();o&&o(),k!==null?I=D-k:(!I||C==="finished")&&(I=D),F=I,k=null,C="running",y.start()};t&&T();const P={then(D,R){return g.then(D,R)},get time(){return Mr(G)},set time(D){D=di(D),G=D,k!==null||!y||f===0?k=D:I=y.now()-D/f},get duration(){const D=x.calculatedDuration===null?xw(x):x.calculatedDuration;return Mr(D)},get speed(){return f},set speed(D){D===f||!y||(f=D,P.time=Mr(G))},get state(){return C},play:T,pause:()=>{C="paused",k=G},stop:()=>{p=!0,C!=="idle"&&(C="idle",c&&c(),ce())},cancel:()=>{F!==null&&Y(F),ce()},complete:()=>{C="finished"},sample:D=>(I=0,Y(D))};return P}const C3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Uc=10,T3=2e4,k3=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Bb(e.ease);function E3(t,e,{onUpdate:n,onComplete:r,...i}){if(!(Hb.waapi()&&C3.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let d=!1,a,o;const c=()=>{o=new Promise(v=>{a=v})};c();let{keyframes:h,duration:l=300,ease:u,times:f}=i;if(k3(e,i)){const v=$c({...i,repeat:0,delay:0});let y={done:!1,value:h[0]};const b=[];let w=0;for(;!y.done&&w<T3;)y=v.sample(w),b.push(y.value),w+=Uc;f=void 0,h=b,l=w-Uc,u="linear"}const p=B4(t.owner.current,e,h,{...i,duration:l,ease:u,times:f}),m=()=>p.cancel(),g=()=>{Lt.update(m),a(),c()};return p.onfinish=()=>{t.set(V4(h,i)),r&&r(),g()},{then(v,y){return o.then(v,y)},get time(){return Mr(p.currentTime||0)},set time(v){p.currentTime=di(v)},get speed(){return p.playbackRate},set speed(v){p.playbackRate=v},get duration(){return Mr(l)},play:()=>{d||(p.play(),Fc(m))},pause:()=>p.pause(),stop:()=>{if(d=!0,p.playState==="idle")return;const{currentTime:v}=p;if(v){const y=$c({...i,autoplay:!1});t.setWithVelocity(y.sample(v-Uc).value,y.sample(v).value,Uc)}g()},complete:()=>p.finish(),cancel:g}}function O3({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ft,pause:Ft,stop:Ft,then:s=>(s(),Promise.resolve()),cancel:Ft,complete:Ft});return e?$c({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const P3={type:"spring",stiffness:500,damping:25,restSpeed:10},M3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),A3={type:"keyframes",duration:.8},D3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},R3=(t,{keyframes:e})=>e.length>2?A3:ci.has(t)?t.startsWith("scale")?M3(e[1]):P3:D3,bp=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ao.test(e)||e==="0")&&!e.startsWith("url(")),I3=new Set(["brightness","contrast","saturate","opacity"]);function L3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ac)||[];if(!r)return t;const i=n.replace(r,"");let s=I3.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const F3=/([a-z-]*)\(.*?\)/g,wp={...Ao,getAnimatableNone:t=>{const e=t.match(F3);return e?e.map(L3).join(" "):t}},z3={...bb,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:wp,WebkitFilter:wp},xp=t=>z3[t];function _w(t,e){let n=xp(t);return n!==wp&&(n=Ao),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Sw=t=>/^0[^.\s]+$/.test(t);function N3(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Sw(t)}function j3(t,e,n,r){const i=bp(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const d=r.from!==void 0?r.from:t.get();let a;const o=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?d:s[c-1]),N3(s[c])&&o.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&o.length&&a)for(let c=0;c<o.length;c++){const h=o[c];s[h]=_w(e,a)}return s}function B3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:d,repeatDelay:a,from:o,elapsed:c,...h}){return!!Object.keys(h).length}function V3(t,e){return t[e]||t.default||t}const $3=(t,e,n,r={})=>i=>{const s=V3(r,t)||{},d=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-di(d);const o=j3(e,t,n,s),c=o[0],h=o[o.length-1],l=bp(t,c),u=bp(t,h);lp(l===u);let f={keyframes:o,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(B3(s)||(f={...f,...R3(t,f)}),f.duration&&(f.duration=di(f.duration)),f.repeatDelay&&(f.repeatDelay=di(f.repeatDelay)),!l||!u||j4.current||s.type===!1)return O3(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=E3(e,t,f);if(p)return p}return $c(f)};function Hc(t){return Boolean(Gt(t)&&t.add)}const U3=t=>/^\-?\d*\.?\d+$/.test(t);function H3(t,e){t.indexOf(e)===-1&&t.push(e)}function W3(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Cw{constructor(){this.subscriptions=[]}add(e){return H3(this.subscriptions,e),()=>W3(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(!!i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const d=this.subscriptions[s];d&&d(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Y3=t=>!isNaN(parseFloat(t));class X3{constructor(e,n={}){this.version="10.12.12",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:d}=Mn;this.lastUpdated!==d&&(this.timeDelta=s,this.lastUpdated=d,Lt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Lt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Y3(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Cw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Lt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?pw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ua(t,e){return new X3(t,e)}const Tw=t=>e=>e.test(t),kw=[ui,Se,Oo,Pr,qP,KP,{test:t=>t==="auto",parse:t=>t}],fa=t=>kw.find(Tw(t)),G3=[...kw,kt,Ao],K3=t=>G3.find(Tw(t));function q3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ua(n))}function Z3(t,e){const n=zc(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const d in s){const a=u4(s[d]);q3(t,d,a)}}function Q3(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),d=s.length;if(!!d)for(let a=0;a<d;a++){const o=s[a],c=e[o];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(i=(r=n[o])!==null&&r!==void 0?r:t.readValue(o))!==null&&i!==void 0?i:e[o]),h!=null&&(typeof h=="string"&&(U3(h)||Sw(h))?h=parseFloat(h):!K3(h)&&Ao.test(c)&&(h=_w(o,c)),t.addValue(o,ua(h,{owner:t})),n[o]===void 0&&(n[o]=h),h!==null&&t.setBaseTarget(o,h))}}function J3(t,e){return e?(e[t]||e.default||e).from:void 0}function eM(t,e,n){const r={};for(const i in t){const s=J3(i,e);if(s!==void 0)r[i]=s;else{const d=n.getValue(i);d&&(r[i]=d.get())}}return r}function tM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Ew(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:d,...a}=t.makeTargetAnimatable(e);const o=t.getValue("willChange");r&&(s=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const l in a){const u=t.getValue(l),f=a[l];if(!u||f===void 0||h&&tM(h,l))continue;const p={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!u.hasAnimated){const g=t.getProps()[N4];g&&(p.elapsed=window.HandoffAppearAnimations(g,l,u,Lt))}u.start($3(l,u,f,t.shouldReduceMotion&&ci.has(l)?{type:!1}:p));const m=u.animation;Hc(o)&&(o.add(l),m.then(()=>o.remove(l))),c.push(m)}return d&&Promise.all(c).then(()=>{d&&Z3(t,d)}),c}function _p(t,e,n={}){const r=zc(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Ew(t,r,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(o=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:l}=i;return nM(t,e,c+o,h,l,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[o,c]=a==="beforeChildren"?[s,d]:[d,s];return o().then(()=>c())}else return Promise.all([s(),d(n.delay)])}function nM(t,e,n=0,r=0,i=1,s){const d=[],a=(t.variantChildren.size-1)*r,o=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(rM).forEach((c,h)=>{c.notify("AnimationStart",e),d.push(_p(c,e,{...s,delay:n+o(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(d)}function rM(t,e){return t.sortNodePosition(e)}function iM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>_p(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=_p(t,e,n);else{const i=typeof e=="function"?zc(t,e,n.custom):e;r=Promise.all(Ew(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const oM=[...Wd].reverse(),sM=Wd.length;function aM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iM(t,n,r)))}function lM(t){let e=aM(t);const n=uM();let r=!0;const i=(o,c)=>{const h=zc(t,c);if(h){const{transition:l,transitionEnd:u,...f}=h;o={...o,...f,...u}}return o};function s(o){e=o(t)}function d(o,c){const h=t.getProps(),l=t.getVariantContext(!0)||{},u=[],f=new Set;let p={},m=1/0;for(let v=0;v<sM;v++){const y=oM[v],b=n[y],w=h[y]!==void 0?h[y]:l[y],x=ea(w),S=y===c?b.isActive:null;S===!1&&(m=v);let C=w===l[y]&&w!==h[y]&&x;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&S===null||!w&&!b.prevProp||Oc(w)||typeof w=="boolean")continue;const k=cM(b.prevProp,w);let I=k||y===c&&b.isActive&&!C&&x||v>m&&x;const F=Array.isArray(w)?w:[w];let j=F.reduce(i,{});S===!1&&(j={});const{prevResolvedValues:q={}}=b,te={...q,...j},G=Y=>{I=!0,f.delete(Y),b.needsAnimating[Y]=!0};for(const Y in te){const ie=j[Y],ce=q[Y];p.hasOwnProperty(Y)||(ie!==ce?Rc(ie)&&Rc(ce)?!Nb(ie,ce)||k?G(Y):b.protectedKeys[Y]=!0:ie!==void 0?G(Y):f.add(Y):ie!==void 0&&f.has(Y)?G(Y):b.protectedKeys[Y]=!0)}b.prevProp=w,b.prevResolvedValues=j,b.isActive&&(p={...p,...j}),r&&t.blockInitialAnimation&&(I=!1),I&&!C&&u.push(...F.map(Y=>({animation:Y,options:{type:y,...o}})))}if(f.size){const v={};f.forEach(y=>{const b=t.getBaseTarget(y);b!==void 0&&(v[y]=b)}),u.push({animation:v})}let g=Boolean(u.length);return r&&h.initial===!1&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function a(o,c,h){var l;if(n[o].isActive===c)return Promise.resolve();(l=t.variantChildren)===null||l===void 0||l.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(o,c)}),n[o].isActive=c;const u=d(h,o);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:d,setActive:a,setAnimateFunction:s,getState:()=>n}}function cM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Nb(e,t):!1}function gi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uM(){return{animate:gi(!0),whileInView:gi(),whileHover:gi(),whileTap:gi(),whileDrag:gi(),whileFocus:gi(),exit:gi()}}class fM extends Po{constructor(e){super(e),e.animationState||(e.animationState=lM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Oc(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let hM=0;class dM extends Po{constructor(){super(...arguments),this.id=hM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r!=null?r:this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const pM={animation:{Feature:fM},exit:{Feature:dM}},Ow=()=>({min:0,max:0}),Pw=()=>({x:Ow(),y:Ow()});function gM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function mM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vM(t,e){return gM(mM(t.getBoundingClientRect(),e))}const yM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function bM(t){const e=yM.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Sp(t,e,n=1){const[r,i]=bM(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);return s?s.trim():Kd(i)?Sp(i,e,n+1):i}function wM(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Kd(s))return;const d=Sp(s,r);d&&i.set(d)});for(const i in e){const s=e[i];if(!Kd(s))continue;const d=Sp(s,r);!d||(e[i]=d,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const xM=new Set(["width","height","top","left","right","bottom","x","y"]),Mw=t=>xM.has(t),_M=t=>Object.keys(t).some(Mw),Aw=t=>t===ui||t===Se,Dw=(t,e)=>parseFloat(t.split(", ")[e]),Rw=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Dw(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?Dw(s[1],t):0}},SM=new Set(["x","y","z"]),CM=na.filter(t=>!SM.has(t));function TM(t){const e=[];return CM.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Iw={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Rw(4,13),y:Rw(5,14)},kM=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:d}=s,a={};d==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Iw[c](r,s)}),e.render();const o=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=Iw[c](o,s)}),t},EM=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Mw);let s=[],d=!1;const a=[];if(i.forEach(o=>{const c=t.getValue(o);if(!t.hasValue(o))return;let h=n[o],l=fa(h);const u=e[o];let f;if(Rc(u)){const p=u.length,m=u[0]===null?1:0;h=u[m],l=fa(h);for(let g=m;g<p&&u[g]!==null;g++)f?Nc(fa(u[g])===f):f=fa(u[g])}else f=fa(u);if(l!==f)if(Aw(l)&&Aw(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof u=="string"?e[o]=parseFloat(u):Array.isArray(u)&&f===Se&&(e[o]=u.map(parseFloat))}else(l==null?void 0:l.transform)&&(f==null?void 0:f.transform)&&(h===0||u===0)?h===0?c.set(f.transform(h)):e[o]=l.transform(u):(d||(s=TM(t),d=!0),a.push(o),r[o]=r[o]!==void 0?r[o]:e[o],c.jump(u))}),a.length){const o=a.indexOf("height")>=0?window.pageYOffset:null,c=kM(e,t,a);return s.length&&s.forEach(([h,l])=>{t.getValue(h).set(l)}),t.render(),kc&&o!==null&&window.scrollTo({top:o}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function OM(t,e,n,r){return _M(e)?EM(t,e,n,r):{target:e,transitionEnd:r}}const PM=(t,e,n,r)=>{const i=wM(t,e,r);return e=i.target,r=i.transitionEnd,OM(t,e,n,r)},Cp={current:null},Lw={current:!1};function MM(){if(Lw.current=!0,!!kc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cp.current=t.matches;t.addListener(e),e()}else Cp.current=!1}function AM(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],d=n[i];if(Gt(s))t.addValue(i,s),Hc(r)&&r.add(i);else if(Gt(d))t.addValue(i,ua(s,{owner:t})),Hc(r)&&r.remove(i);else if(d!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,ua(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Fw=new WeakMap,zw=Object.keys(ta),DM=zw.length,Nw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],RM=Yd.length;class IM{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{!this.current||(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Lt.render(this.render,!1,!0);const{latestValues:a,renderState:o}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=o,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.isControllingVariants=Pc(n),this.isVariantNode=cb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const l in h){const u=h[l];a[l]!==void 0&&Gt(u)&&(u.set(a[l],!1),Hc(c)&&c.add(l))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Fw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Lw.current||MM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fw.delete(this.current),this.projection&&this.projection.unmount(),Fc(this.notifyUpdate),Fc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ci.has(e),i=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Lt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let d,a;for(let o=0;o<DM;o++){const c=zw[o],{isEnabled:h,Feature:l,ProjectionNode:u,MeasureLayout:f}=ta[c];u&&(d=u),h(n)&&(!this.features[c]&&l&&(this.features[c]=new l(this)),f&&(a=f))}if(!this.projection&&d){this.projection=new d(this.latestValues,this.parent&&this.parent.projection);const{layoutId:o,layout:c,drag:h,dragConstraints:l,layoutScroll:u,layoutRoot:f}=n;this.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:Boolean(h)||l&&lb(l),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pw()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Nw.length;r++){const i=Nw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=AM(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<RM;r++){const i=Yd[r],s=this.props[i];(ea(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ua(n,{owner:this}),this.addValue(e,r)),r}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=np(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Gt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Cw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class jw extends IM{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let d=eM(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),d&&(d=i(d))),s){Q3(this,r,d);const a=PM(this,r,d,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function LM(t){return window.getComputedStyle(t)}class FM extends jw{readValueFromInstance(e,n){if(ci.has(n)){const r=xp(n);return r&&r.default||0}else{const r=LM(e),i=(gb(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vM(e,n)}build(e,n,r,i){qd(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return tp(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){Cb(e,n,r,i)}}class zM extends jw{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ci.has(n)){const r=xp(n);return r&&r.default||0}return n=Tb.has(n)?n:ep(n),e.getAttribute(n)}measureInstanceViewportBox(){return Pw()}scrapeMotionValuesFromProps(e,n){return Eb(e,n)}build(e,n,r,i){Qd(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){kb(e,n,r,i)}mount(e){this.isSVGTag=Jd(e.tagName),super.mount(e)}}const NM=(t,e)=>Gd(t)?new zM(e,{enableHardwareAcceleration:!1}):new FM(e,{enableHardwareAcceleration:!0}),yt=BP(m4);function Bw(){const t=E.exports.useRef(!1);return Ec(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function jM(){const t=Bw(),[e,n]=E.exports.useState(0),r=E.exports.useCallback(()=>{t.current&&n(e+1)},[e]);return[E.exports.useCallback(()=>Lt.postRender(r),[r]),e]}class BM extends E.exports.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function VM({children:t,isPresent:e}){const n=E.exports.useId(),r=E.exports.useRef(null),i=E.exports.useRef({width:0,height:0,top:0,left:0});return E.exports.useInsertionEffect(()=>{const{width:s,height:d,top:a,left:o}=i.current;if(e||!r.current||!s||!d)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${d}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),_(BM,{isPresent:e,childRef:r,sizeRef:i,children:E.exports.cloneElement(t,{ref:r})})}const Tp=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:d})=>{const a=Ob($M),o=E.exports.useId(),c=E.exports.useMemo(()=>({id:o,initial:e,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const l of a.values())if(!l)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return E.exports.useMemo(()=>{a.forEach((h,l)=>a.set(l,!1))},[n]),E.exports.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),d==="popLayout"&&(t=_(VM,{isPresent:n,children:t})),_(Ud.Provider,{value:c,children:t})};function $M(){return new Map}function UM(t){return E.exports.useEffect(()=>()=>t(),[])}const Do=t=>t.key||"";function HM(t,e){t.forEach(n=>{const r=Do(n);e.set(r,n)})}function WM(t){const e=[];return E.exports.Children.forEach(t,n=>{E.exports.isValidElement(n)&&e.push(n)}),e}const Yn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:d="sync"})=>{Nc(!i);const a=E.exports.useContext(hb).forceRender||jM()[0],o=Bw(),c=WM(t);let h=c;const l=E.exports.useRef(new Map).current,u=E.exports.useRef(h),f=E.exports.useRef(new Map).current,p=E.exports.useRef(!0);if(Ec(()=>{p.current=!1,HM(c,f),u.current=h}),UM(()=>{p.current=!0,f.clear(),l.clear()}),p.current)return _(rl,{children:h.map(y=>_(Tp,{isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:d,children:y},Do(y)))});h=[...h];const m=u.current.map(Do),g=c.map(Do),v=m.length;for(let y=0;y<v;y++){const b=m[y];g.indexOf(b)===-1&&!l.has(b)&&l.set(b,void 0)}return d==="wait"&&l.size&&(h=[]),l.forEach((y,b)=>{if(g.indexOf(b)!==-1)return;const w=f.get(b);if(!w)return;const x=m.indexOf(b);let S=y;S||(S=_(Tp,{isPresent:!1,onExitComplete:()=>{f.delete(b),l.delete(b);const k=u.current.findIndex(I=>I.key===b);if(u.current.splice(k,1),!l.size){if(u.current=c,o.current===!1)return;a(),r&&r()}},custom:e,presenceAffectsLayout:s,mode:d,children:w},Do(w)),l.set(b,S)),h.splice(x,0,S)}),h=h.map(y=>{const b=y.key;return l.has(b)?y:_(Tp,{isPresent:!0,presenceAffectsLayout:s,mode:d,children:y},Do(y))}),_(rl,{children:l.size?h:h.map(y=>E.exports.cloneElement(y))})};function YM({children:t,features:e,strict:n=!1}){const[,r]=E.exports.useState(!kp(e)),i=E.exports.useRef(void 0);if(!kp(e)){const{renderer:s,...d}=e;i.current=s,Xd(d)}return E.exports.useEffect(()=>{kp(e)&&e().then(({renderer:s,...d})=>{Xd(d),i.current=s,r(!0)})},[]),_(Hd.Provider,{value:{renderer:i.current,strict:n},children:t})}function kp(t){return typeof t=="function"}const XM={renderer:NM,...pM,...L4};function mi(t,e,n){let[r,i]=E.exports.useState(t||e),s=E.exports.useRef(t!==void 0),d=s.current,a=t!==void 0,o=E.exports.useRef(r);d!==a&&console.warn(`WARN: A component changed from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}.`),s.current=a;let c=E.exports.useCallback((h,...l)=>{let u=(f,...p)=>{n&&(Object.is(o.current,f)||n(f,...p)),a||(o.current=f)};typeof h=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((p,...m)=>{let g=h(a?o.current:p,...m);return u(g,...l),a?p:g})):(a||i(h),u(h,...l))},[a,n]);return a?o.current=t:t=r,[t,c]}function vi(t,e=-1/0,n=1/0){return Math.min(Math.max(t,e),n)}function GM(t,e,n,r){let i=(t-(isNaN(e)?0:e))%r,s=Math.abs(i)*2>=r?t+Math.sign(i)*(r-Math.abs(i)):t-i;isNaN(e)?!isNaN(n)&&s>n&&(s=Math.floor(n/r)*r):s<e?s=e:!isNaN(n)&&s>n&&(s=e+Math.floor((n-e)/r)*r);let d=r.toString(),a=d.indexOf("."),o=a>=0?d.length-a:0;if(o>0){let c=Math.pow(10,o);s=Math.round(s*c)/c}return s}function Ze(t,e,n=10){const r=Math.pow(n,e);return Math.round(t*r)/r}const KM={prefix:String(Math.round(Math.random()*1e10)),current:0,isSSR:!1},qM=he.createContext(KM);function ZM(){return E.exports.useContext(qM).isSSR}const Ar=typeof window<"u"?he.useLayoutEffect:()=>{};let Vw=new Map;function QM(t,e){if(t===e)return t;let n=Vw.get(t);if(n)return n(e),e;let r=Vw.get(e);return r?(r(t),t):e}function JM(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function Xn(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let i in r){let s=e[i],d=r[i];typeof s=="function"&&typeof d=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=JM(s,d):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof d=="string"?e[i]=fe(s,d):i==="id"&&s&&d?e.id=QM(s,d):e[i]=d!==void 0?d:s}}return e}function $w(t){if(eA())t.focus({preventScroll:!0});else{let e=tA(t);t.focus(),nA(e)}}let Wc=null;function eA(){if(Wc==null){Wc=!1;try{var t=document.createElement("div");t.focus({get preventScroll(){return Wc=!0,!0}})}catch{}}return Wc}function tA(t){for(var e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function nA(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}let Ro=new Map,Ep=new Set;function Uw(){if(typeof window>"u")return;let t=n=>{let r=Ro.get(n.target);r||(r=new Set,Ro.set(n.target,r),n.target.addEventListener("transitioncancel",e)),r.add(n.propertyName)},e=n=>{let r=Ro.get(n.target);if(!!r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",e),Ro.delete(n.target)),Ro.size===0)){for(let i of Ep)i();Ep.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?Uw():document.addEventListener("DOMContentLoaded",Uw));function rA(t){requestAnimationFrame(()=>{Ro.size===0?t():Ep.add(t)})}function Op(){let t=E.exports.useRef(new Map),e=E.exports.useCallback((i,s,d,a)=>{let o=a!=null&&a.once?(...c)=>{t.current.delete(d),d(...c)}:d;t.current.set(d,{type:s,eventTarget:i,fn:o,options:a}),i.addEventListener(s,d,a)},[]),n=E.exports.useCallback((i,s,d,a)=>{var o;let c=((o=t.current.get(d))===null||o===void 0?void 0:o.fn)||d;i.removeEventListener(s,c,a),t.current.delete(d)},[]),r=E.exports.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return E.exports.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function yi(t){const e=E.exports.useRef();return Ar(()=>{if(!!t)return typeof t=="function"?t(e.current):t.current=e.current,()=>{typeof t=="function"?t(null):t.current=null}},[t]),e}let An=typeof window<"u"&&window.visualViewport;function iA(){let[t,e]=E.exports.useState(()=>Hw());return E.exports.useEffect(()=>{let n=()=>{e(r=>{let i=Hw();return i.width===r.width&&i.height===r.height?r:i})};return An?An.addEventListener("resize",n):window.addEventListener("resize",n),()=>{An?An.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),t}function Hw(){return{width:(An==null?void 0:An.width)||window.innerWidth,height:(An==null?void 0:An.height)||window.innerHeight}}function oA(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function sA(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Ww(){return sA(/^Mac/i)}function aA(){return oA(/Android/i)}function lA(t){return t.mozInputSource===0&&t.isTrusted?!0:aA()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}var xe={};const Pp=Vr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Pp,r=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=r.document,e.jsdomImplForWrapper=Pp.implForWrapper,e.nodeCanvas=Pp.Canvas,e.window=r,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(f,p){if(!!this.__eventListeners[f]){var m=this.__eventListeners[f];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function o(f,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in f)this.on(m,f[m]);else this.__eventListeners[f]||(this.__eventListeners[f]=[]),this.__eventListeners[f].push(p);return this}function c(f,p){var m=function(){p.apply(this,arguments),this.off(f,m)}.bind(this);this.on(f,m)}function h(f,p){if(arguments.length===1)for(var m in f)c.call(this,m,f[m]);else c.call(this,f,p);return this}function l(f,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(f in this.__eventListeners)a.call(this,f);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in f)a.call(this,m,f[m]);else a.call(this,f,p);return this}function u(f,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[f];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[f]=m.filter(function(y){return y!==!1}),this}e.Observable={fire:u,on:o,once:h,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,o=arguments.length;a<o;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,o,c){var h=this._objects;return c?h[o]=a:h.splice(o,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,o,c=!1,h=0,l=arguments.length;h<l;h++)o=a.indexOf(arguments[h]),o!==-1&&(c=!0,a.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,o){for(var c=this.getObjects(),h=0,l=c.length;h<l;h++)a.call(o,c[h],h,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,o){return this._objects.indexOf(a)>-1?!0:o?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,o){return a+=o.complexity?o.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var o in a)this.set(o,a[o])},_initGradient:function(a,o){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(o,new e.Gradient(a))},_initPattern:function(a,o,c){a&&a.source&&!(a instanceof e.Pattern)?this.set(o,new e.Pattern(a,c)):c&&c()},_setObject:function(a){for(var o in a)this._set(o,a[o])},set:function(a,o){return typeof a=="object"?this._setObject(a):this._set(a,o),this},_set:function(a,o){this[a]=o},toggle:function(a){var o=this.get(a);return typeof o=="boolean"&&this.set(a,!o),this},get:function(a){return this[a]}},function(a){var o=Math.sqrt,c=Math.atan2,h=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(f){if(f===0)return 1;f<0&&(f=-f);var p=f/u;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(f)},sin:function(f){if(f===0)return 0;var p=f/u,m=1;switch(f<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(f)},removeFromArray:function(f,p){var m=f.indexOf(p);return m!==-1&&f.splice(m,1),f},getRandomInt:function(f,p){return Math.floor(Math.random()*(p-f+1))+f},degreesToRadians:function(f){return f*l},radiansToDegrees:function(f){return f/l},rotatePoint:function(f,p,m){var g=new e.Point(f.x-p.x,f.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(f,p){var m=e.util.sin(p),g=e.util.cos(p),v=f.x*g-f.y*m,y=f.x*m+f.y*g;return{x:v,y}},createVector:function(f,p){return new e.Point(p.x-f.x,p.y-f.y)},calcAngleBetweenVectors:function(f,p){return Math.acos((f.x*p.x+f.y*p.y)/(Math.hypot(f.x,f.y)*Math.hypot(p.x,p.y)))},getHatVector:function(f){return new e.Point(f.x,f.y).multiply(1/Math.hypot(f.x,f.y))},getBisector:function(f,p,m){var g=e.util.createVector(f,p),v=e.util.createVector(f,m),y=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,y),v),w=y*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,w)),angle:y}},projectStrokeOnPoints:function(f,p,m){var g=[],v=p.strokeWidth/2,y=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(w){var x=v/Math.hypot(w.x,w.y);return new e.Point(w.x*x*y.x,w.y*x*y.y)};return f.length<=1||f.forEach(function(w,x){var S=new e.Point(w.x,w.y),C,k;x===0?(k=f[x+1],C=m?b(e.util.createVector(k,S)).addEquals(S):f[f.length-1]):x===f.length-1?(C=f[x-1],k=m?b(e.util.createVector(C,S)).addEquals(S):f[0]):(C=f[x-1],k=f[x+1]);var I=e.util.getBisector(S,C,k),F=I.vector,j=I.angle,q,te;if(p.strokeLineJoin==="miter"&&(q=-v/Math.sin(j/2),te=new e.Point(F.x*q*y.x,F.y*q*y.y),Math.hypot(te.x,te.y)/v<=p.strokeMiterLimit)){g.push(S.add(te)),g.push(S.subtract(te));return}q=-v*Math.SQRT2,te=new e.Point(F.x*q*y.x,F.y*q*y.y),g.push(S.add(te)),g.push(S.subtract(te))}),g},transformPoint:function(f,p,m){return m?new e.Point(p[0]*f.x+p[2]*f.y,p[1]*f.x+p[3]*f.y):new e.Point(p[0]*f.x+p[2]*f.y+p[4],p[1]*f.x+p[3]*f.y+p[5])},makeBoundingBoxFromPoints:function(f,p){if(p)for(var m=0;m<f.length;m++)f[m]=e.util.transformPoint(f[m],p);var g=[f[0].x,f[1].x,f[2].x,f[3].x],v=e.util.array.min(g),y=e.util.array.max(g),b=y-v,w=[f[0].y,f[1].y,f[2].y,f[3].y],x=e.util.array.min(w),S=e.util.array.max(w),C=S-x;return{left:v,top:x,width:b,height:C}},invertTransform:function(f){var p=1/(f[0]*f[3]-f[1]*f[2]),m=[p*f[3],-p*f[1],-p*f[2],p*f[0]],g=e.util.transformPoint({x:f[4],y:f[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(f,p){return parseFloat(Number(f).toFixed(p))},parseUnit:function(f,p){var m=/\D{0,2}$/.exec(f),g=parseFloat(f);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(f,p){return f=e.util.string.camelize(f.charAt(0).toUpperCase()+f.slice(1)),e.util.resolveNamespace(p)[f]},getSvgAttributes:function(f){var p=["instantiated_by_use","style","id","class"];switch(f){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(f){if(!f)return e;var p=f.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(f,p,m,g){if(!f){p&&p.call(m,f);return}var v=e.util.createImage(),y=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=y,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},f.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),f.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,y)),v.src=f},loadImageInDom:function(f,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(f),e.document.querySelector("body").appendChild(m),f.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(f,p,m,g){f=f||[];var v=[],y=0,b=f.length;function w(){++y===b&&p&&p(v.filter(function(x){return x}))}if(!b){p&&p(v);return}f.forEach(function(x,S){if(!x||!x.type){w();return}var C=e.util.getKlass(x.type,m);C.fromObject(x,function(k,I){I||(v[S]=k),g&&g(x,k,I),w()})})},enlivenObjectEnlivables:function(f,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!f[v]});e.util.enlivenObjects(g.map(function(v){return f[v]}),function(v){var y={};g.forEach(function(b,w){y[b]=v[w],p&&(p[b]=v[w])}),m&&m(y)})},enlivenPatterns:function(f,p){f=f||[];function m(){++v===y&&p&&p(g)}var g=[],v=0,y=f.length;if(!y){p&&p(g);return}f.forEach(function(b,w){b&&b.source?new e.Pattern(b,function(x){g[w]=x,m()}):(g[w]=b,m())})},groupSVGElements:function(f,p,m){var g;return f&&f.length===1?(typeof m<"u"&&(f[0].sourcePath=m),f[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(f,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(f,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in f&&(p[m[g]]=f[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(f){var p=e.util.createCanvasElement();return p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0),p},toDataURL:function(f,p,m){return f.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(f,p,m){return[f[0]*p[0]+f[2]*p[1],f[1]*p[0]+f[3]*p[1],f[0]*p[2]+f[2]*p[3],f[1]*p[2]+f[3]*p[3],m?0:f[0]*p[4]+f[2]*p[5]+f[4],m?0:f[1]*p[4]+f[3]*p[5]+f[5]]},qrDecompose:function(f){var p=c(f[1],f[0]),m=h(f[0],2)+h(f[1],2),g=o(m),v=(f[0]*f[3]-f[2]*f[1])/g,y=c(f[0]*f[2]+f[1]*f[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:y/l,skewY:0,translateX:f[4],translateY:f[5]}},calcRotateMatrix:function(f){if(!f.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(f.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(f){var p=typeof f.scaleX>"u"?1:f.scaleX,m=typeof f.scaleY>"u"?1:f.scaleY,g=[f.flipX?-p:p,0,0,f.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return f.skewX&&(g=v(g,[1,0,Math.tan(y(f.skewX)),1],!0)),f.skewY&&(g=v(g,[1,Math.tan(y(f.skewY)),0,1],!0)),g},composeMatrix:function(f){var p=[1,0,0,1,f.translateX||0,f.translateY||0],m=e.util.multiplyTransformMatrices;return f.angle&&(p=m(p,e.util.calcRotateMatrix(f))),(f.scaleX!==1||f.scaleY!==1||f.skewX||f.skewY||f.flipX||f.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(f))),p},resetObjectTransform:function(f){f.scaleX=1,f.scaleY=1,f.skewX=0,f.skewY=0,f.flipX=!1,f.flipY=!1,f.rotate(0)},saveObjectTransform:function(f){return{scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,angle:f.angle,left:f.left,flipX:f.flipX,flipY:f.flipY,top:f.top}},isTransparent:function(f,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,y,b,w=f.getImageData(p,m,g*2||1,g*2||1),x=w.data.length;for(y=3;y<x&&(b=w.data[y],v=b<=0,v!==!1);y+=4);return w=null,v},parsePreserveAspectRatioAttribute:function(f){var p="meet",m="Mid",g="Mid",v=f.split(" "),y;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(y=p,p="meet"):v.length&&(y=v.pop())),m=y!=="none"?y.slice(1,4):"none",g=y!=="none"?y.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(f){f=(f||"").toLowerCase(),f?e.charWidthsCache[f]&&delete e.charWidthsCache[f]:e.charWidthsCache={}},limitDimsByArea:function(f,p){var m=Math.sqrt(p*f),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(f,p,m){return Math.max(f,Math.min(p,m))},findScaleToFit:function(f,p){return Math.min(p.width/f.width,p.height/f.height)},findScaleToCover:function(f,p){return Math.max(p.width/f.width,p.height/f.height)},matrixToSVG:function(f){return"matrix("+f.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(f,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,f.calcOwnMatrix());e.util.applyTransformToObject(f,g)},addTransformToObject:function(f,p){e.util.applyTransformToObject(f,e.util.multiplyTransformMatrices(p,f.calcOwnMatrix()))},applyTransformToObject:function(f,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);f.flipX=!1,f.flipY=!1,f.set("scaleX",m.scaleX),f.set("scaleY",m.scaleY),f.skewX=m.skewX,f.skewY=m.skewY,f.angle=m.angle,f.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(f,p,m){var g=f/2,v=p/2,y=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),w=e.util.makeBoundingBoxFromPoints(y,b);return{x:w.width,y:w.height}},mergeClipPaths:function(f,p){var m=f,g=p;m.inverted&&!g.inverted&&(m=p,g=f),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(f,p,m){return m=m||!1,f.fill!==p.fill||f.stroke!==p.stroke||f.strokeWidth!==p.strokeWidth||f.fontSize!==p.fontSize||f.fontFamily!==p.fontFamily||f.fontWeight!==p.fontWeight||f.fontStyle!==p.fontStyle||f.textBackgroundColor!==p.textBackgroundColor||f.deltaY!==p.deltaY||m&&(f.overline!==p.overline||f.underline!==p.underline||f.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,y={},b=[],w=0;w<g.length;w++){if(!m[w]){v+=g[w].length;continue}for(var x=0;x<g[w].length;x++){v++;var S=m[w][x];if(S&&Object.keys(S).length>0){var C=e.util.hasStyleChanged(y,S,!0);C?b.push({start:v,end:v+1,style:S}):b[b.length-1].end++}y=S||{}}}return b},stylesFromArray:function(f,p){if(!Array.isArray(f))return f;for(var m=p.split(`
`),g=-1,v=0,y={},b=0;b<m.length;b++)for(var w=0;w<m[b].length;w++)g++,f[v]&&f[v].start<=g&&g<f[v].end&&(y[b]=y[b]||{},y[b][w]=Object.assign({},f[v].style),g===f[v].end-1&&v++);return y}}}(t),function(){var a=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function h(T,P,D,R,$,A,O,z,B,K,W){var J=e.util.cos(T),ne=e.util.sin(T),re=e.util.cos(P),U=e.util.sin(P),V=D*$*re-R*A*U+O,Q=R*$*re+D*A*U+z,ee=K+B*(-D*$*ne-R*A*J),N=W+B*(-R*$*ne+D*A*J),X=V+B*(D*$*U+R*A*re),le=Q+B*(R*$*U-D*A*re);return["C",ee,N,X,le,V,Q]}function l(T,P,D,R,$,A,O){var z=Math.PI,B=O*z/180,K=e.util.sin(B),W=e.util.cos(B),J=0,ne=0;D=Math.abs(D),R=Math.abs(R);var re=-W*T*.5-K*P*.5,U=-W*P*.5+K*T*.5,V=D*D,Q=R*R,ee=U*U,N=re*re,X=V*Q-V*ee-Q*N,le=0;if(X<0){var we=Math.sqrt(1-X/(V*Q));D*=we,R*=we}else le=($===A?-1:1)*Math.sqrt(X/(V*ee+Q*N));var ve=le*D*U/R,Z=-le*R*re/D,ge=W*ve-K*Z+T*.5,_e=K*ve+W*Z+P*.5,ke=u(1,0,(re-ve)/D,(U-Z)/R),Fe=u((re-ve)/D,(U-Z)/R,(-re-ve)/D,(-U-Z)/R);A===0&&Fe>0?Fe-=2*z:A===1&&Fe<0&&(Fe+=2*z);for(var De=Math.ceil(Math.abs(Fe/z*2)),Ot=[],Qe=Fe/De,Ai=8/3*Math.sin(Qe/4)*Math.sin(Qe/4)/Math.sin(Qe/2),Ra=ke+Qe,In=0;In<De;In++)Ot[In]=h(ke,Ra,W,K,D,R,ge,_e,Ai,J,ne),J=Ot[In][5],ne=Ot[In][6],ke=Ra,Ra+=Qe;return Ot}function u(T,P,D,R){var $=Math.atan2(P,T),A=Math.atan2(R,D);return A>=$?A-$:2*Math.PI-($-A)}function f(T,P,D,R,$,A,O,z){var B;if(e.cachesBoundsOfCurve&&(B=a.call(arguments),e.boundsOfCurveCache[B]))return e.boundsOfCurveCache[B];var K=Math.sqrt,W=Math.min,J=Math.max,ne=Math.abs,re=[],U=[[],[]],V,Q,ee,N,X,le,we,ve;Q=6*T-12*D+6*$,V=-3*T+9*D-9*$+3*O,ee=3*D-3*T;for(var Z=0;Z<2;++Z){if(Z>0&&(Q=6*P-12*R+6*A,V=-3*P+9*R-9*A+3*z,ee=3*R-3*P),ne(V)<1e-12){if(ne(Q)<1e-12)continue;N=-ee/Q,0<N&&N<1&&re.push(N);continue}we=Q*Q-4*ee*V,!(we<0)&&(ve=K(we),X=(-Q+ve)/(2*V),0<X&&X<1&&re.push(X),le=(-Q-ve)/(2*V),0<le&&le<1&&re.push(le))}for(var ge,_e,ke=re.length,Fe=ke,De;ke--;)N=re[ke],De=1-N,ge=De*De*De*T+3*De*De*N*D+3*De*N*N*$+N*N*N*O,U[0][ke]=ge,_e=De*De*De*P+3*De*De*N*R+3*De*N*N*A+N*N*N*z,U[1][ke]=_e;U[0][Fe]=T,U[1][Fe]=P,U[0][Fe+1]=O,U[1][Fe+1]=z;var Ot=[{x:W.apply(null,U[0]),y:W.apply(null,U[1])},{x:J.apply(null,U[0]),y:J.apply(null,U[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[B]=Ot),Ot}function p(T,P,D){for(var R=D[1],$=D[2],A=D[3],O=D[4],z=D[5],B=D[6],K=D[7],W=l(B-T,K-P,R,$,O,z,A),J=0,ne=W.length;J<ne;J++)W[J][1]+=T,W[J][2]+=P,W[J][3]+=T,W[J][4]+=P,W[J][5]+=T,W[J][6]+=P;return W}function m(T){var P=0,D=0,R=T.length,$=0,A=0,O,z,B,K=[],W,J,ne;for(z=0;z<R;++z){switch(B=!1,O=T[z].slice(0),O[0]){case"l":O[0]="L",O[1]+=P,O[2]+=D;case"L":P=O[1],D=O[2];break;case"h":O[1]+=P;case"H":O[0]="L",O[2]=D,P=O[1];break;case"v":O[1]+=D;case"V":O[0]="L",D=O[1],O[1]=P,O[2]=D;break;case"m":O[0]="M",O[1]+=P,O[2]+=D;case"M":P=O[1],D=O[2],$=O[1],A=O[2];break;case"c":O[0]="C",O[1]+=P,O[2]+=D,O[3]+=P,O[4]+=D,O[5]+=P,O[6]+=D;case"C":J=O[3],ne=O[4],P=O[5],D=O[6];break;case"s":O[0]="S",O[1]+=P,O[2]+=D,O[3]+=P,O[4]+=D;case"S":W==="C"?(J=2*P-J,ne=2*D-ne):(J=P,ne=D),P=O[3],D=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=J,O[2]=ne,J=O[3],ne=O[4];break;case"q":O[0]="Q",O[1]+=P,O[2]+=D,O[3]+=P,O[4]+=D;case"Q":J=O[1],ne=O[2],P=O[3],D=O[4];break;case"t":O[0]="T",O[1]+=P,O[2]+=D;case"T":W==="Q"?(J=2*P-J,ne=2*D-ne):(J=P,ne=D),O[0]="Q",P=O[1],D=O[2],O[1]=J,O[2]=ne,O[3]=P,O[4]=D;break;case"a":O[0]="A",O[6]+=P,O[7]+=D;case"A":B=!0,K=K.concat(p(P,D,O)),P=O[6],D=O[7];break;case"z":case"Z":P=$,D=A;break}B||K.push(O),W=O[0]}return K}function g(T,P,D,R){return Math.sqrt((D-T)*(D-T)+(R-P)*(R-P))}function v(T){return T*T*T}function y(T){return 3*T*T*(1-T)}function b(T){return 3*T*(1-T)*(1-T)}function w(T){return(1-T)*(1-T)*(1-T)}function x(T,P,D,R,$,A,O,z){return function(B){var K=v(B),W=y(B),J=b(B),ne=w(B);return{x:O*K+$*W+D*J+T*ne,y:z*K+A*W+R*J+P*ne}}}function S(T,P,D,R,$,A,O,z){return function(B){var K=1-B,W=3*K*K*(D-T)+6*K*B*($-D)+3*B*B*(O-$),J=3*K*K*(R-P)+6*K*B*(A-R)+3*B*B*(z-A);return Math.atan2(J,W)}}function C(T){return T*T}function k(T){return 2*T*(1-T)}function I(T){return(1-T)*(1-T)}function F(T,P,D,R,$,A){return function(O){var z=C(O),B=k(O),K=I(O);return{x:$*z+D*B+T*K,y:A*z+R*B+P*K}}}function j(T,P,D,R,$,A){return function(O){var z=1-O,B=2*z*(D-T)+2*O*($-D),K=2*z*(R-P)+2*O*(A-R);return Math.atan2(K,B)}}function q(T,P,D){var R={x:P,y:D},$,A=0,O;for(O=1;O<=100;O+=1)$=T(O/100),A+=g(R.x,R.y,$.x,$.y),R=$;return A}function te(T,P){for(var D=0,R=0,$=T.iterator,A={x:T.x,y:T.y},O,z,B=.01,K=T.angleFinder,W;R<P&&B>1e-4;)O=$(D),W=D,z=g(A.x,A.y,O.x,O.y),z+R>P?(D-=B,B/=2):(A=O,D+=B,R+=z);return O.angle=K(W),O}function G(T){for(var P=0,D=T.length,R,$=0,A=0,O=0,z=0,B=[],K,W,J,ne=0;ne<D;ne++){switch(R=T[ne],W={x:$,y:A,command:R[0]},R[0]){case"M":W.length=0,O=$=R[1],z=A=R[2];break;case"L":W.length=g($,A,R[1],R[2]),$=R[1],A=R[2];break;case"C":K=x($,A,R[1],R[2],R[3],R[4],R[5],R[6]),J=S($,A,R[1],R[2],R[3],R[4],R[5],R[6]),W.iterator=K,W.angleFinder=J,W.length=q(K,$,A),$=R[5],A=R[6];break;case"Q":K=F($,A,R[1],R[2],R[3],R[4]),J=j($,A,R[1],R[2],R[3],R[4]),W.iterator=K,W.angleFinder=J,W.length=q(K,$,A),$=R[3],A=R[4];break;case"Z":case"z":W.destX=O,W.destY=z,W.length=g($,A,O,z),$=O,A=z;break}P+=W.length,B.push(W)}return B.push({length:P,x:$,y:A}),B}function Y(T,P,D){D||(D=G(T));for(var R=0;P-D[R].length>0&&R<D.length-2;)P-=D[R].length,R++;var $=D[R],A=P/$.length,O=$.command,z=T[R],B;switch(O){case"M":return{x:$.x,y:$.y,angle:0};case"Z":case"z":return B=new e.Point($.x,$.y).lerp(new e.Point($.destX,$.destY),A),B.angle=Math.atan2($.destY-$.y,$.destX-$.x),B;case"L":return B=new e.Point($.x,$.y).lerp(new e.Point(z[1],z[2]),A),B.angle=Math.atan2(z[2]-$.y,z[1]-$.x),B;case"C":return te($,P);case"Q":return te($,P)}}function ie(T){var P=[],D=[],R,$,A=e.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+O+")"+e.commaWsp,B="([01])"+e.commaWsp+"?",K=z+"?"+z+"?"+z+B+B+z+"?("+O+")",W=new RegExp(K,"g"),J,ne,re;if(!T||!T.match)return P;re=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var U=0,V,Q=re.length;U<Q;U++){R=re[U],ne=R.slice(1).trim(),D.length=0;var ee=R.charAt(0);if(V=[ee],ee.toLowerCase()==="a")for(var N;N=W.exec(ne);)for(var X=1;X<N.length;X++)D.push(N[X]);else for(;J=A.exec(ne);)D.push(J[0]);for(var X=0,le=D.length;X<le;X++)$=parseFloat(D[X]),isNaN($)||V.push($);var we=o[ee.toLowerCase()],ve=c[ee]||ee;if(V.length-1>we)for(var Z=1,ge=V.length;Z<ge;Z+=we)P.push([ee].concat(V.slice(Z,Z+we))),ee=ve;else P.push(V)}return P}function ce(T,P){var D=[],R,$=new e.Point(T[0].x,T[0].y),A=new e.Point(T[1].x,T[1].y),O=T.length,z=1,B=0,K=O>2;for(P=P||0,K&&(z=T[2].x<A.x?-1:T[2].x===A.x?0:1,B=T[2].y<A.y?-1:T[2].y===A.y?0:1),D.push(["M",$.x-z*P,$.y-B*P]),R=1;R<O;R++){if(!$.eq(A)){var W=$.midPointFrom(A);D.push(["Q",$.x,$.y,W.x,W.y])}$=T[R],R+1<T.length&&(A=T[R+1])}return K&&(z=$.x>T[R-2].x?1:$.x===T[R-2].x?0:-1,B=$.y>T[R-2].y?1:$.y===T[R-2].y?0:-1),D.push(["L",$.x+z*P,$.y+B*P]),D}function H(T,P,D){return D&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-D.x,-D.y])),T.map(function(R){for(var $=R.slice(0),A={},O=1;O<R.length-1;O+=2)A.x=R[O],A.y=R[O+1],A=e.util.transformPoint(A,P),$[O]=A.x,$[O+1]=A.y;return $})}e.util.joinPath=function(T){return T.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=ie,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=ce,e.util.getPathSegmentsInfo=G,e.util.getBoundsOfCurve=f,e.util.getPointOnPath=Y,e.util.transformPath=H}(),function(){var a=Array.prototype.slice;function o(f,p){for(var m=a.call(arguments,2),g=[],v=0,y=f.length;v<y;v++)g[v]=m.length?f[v][p].apply(f[v],m):f[v][p].call(f[v]);return g}function c(f,p){return u(f,p,function(m,g){return m>=g})}function h(f,p){return u(f,p,function(m,g){return m<g})}function l(f,p){for(var m=f.length;m--;)f[m]=p;return f}function u(f,p,m){if(!(!f||f.length===0)){var g=f.length-1,v=p?f[g][p]:f[g];if(p)for(;g--;)m(f[g][p],v)&&(v=f[g][p]);else for(;g--;)m(f[g],v)&&(v=f[g]);return v}}e.util.array={fill:l,invoke:o,min:h,max:c}}(),function(){function a(c,h,l){if(l)if(!e.isLikelyNode&&h instanceof Element)c=h;else if(h instanceof Array){c=[];for(var u=0,f=h.length;u<f;u++)c[u]=a({},h[u],l)}else if(h&&typeof h=="object")for(var p in h)p==="canvas"||p==="group"?c[p]=null:h.hasOwnProperty(p)&&(c[p]=a({},h[p],l));else c=h;else for(var p in h)c[p]=h[p];return c}function o(c,h){return a({},c,h)}e.util.object={extend:a,clone:o},e.util.object.extend(e.util,e.Observable)}(),function(){function a(u){return u.replace(/-+(.)?/g,function(f,p){return p?p.toUpperCase():""})}function o(u,f){return u.charAt(0).toUpperCase()+(f?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(u){var f=0,p,m=[];for(f=0,p;f<u.length;f++)(p=l(u,f))!==!1&&m.push(p);return m}function l(u,f){var p=u.charCodeAt(f);if(isNaN(p))return"";if(p<55296||p>57343)return u.charAt(f);if(55296<=p&&p<=56319){if(u.length<=f+1)throw"High surrogate without following low surrogate";var m=u.charCodeAt(f+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return u.charAt(f)+u.charAt(f+1)}if(f===0)throw"Low surrogate without preceding high surrogate";var g=u.charCodeAt(f-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:o,escapeXml:c,graphemeSplit:h}}(),function(){var a=Array.prototype.slice,o=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),h=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(y){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var w=m[y].apply(this,arguments);if(this.constructor.superclass=b,y!=="initialize")return w}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function u(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function f(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,y=m.length;v<y;v++)h(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=o),g.prototype.constructor=g,g.prototype.callSuper=u,g}e.util.createClass=f}(),function(){var a=!!e.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];e.util.addListener=function(h,l,u,f){h&&h.addEventListener(l,u,a?!1:f)},e.util.removeListener=function(h,l,u,f){h&&h.removeEventListener(l,u,a?!1:f)};function c(h){var l=h.changedTouches;return l&&l[0]?l[0]:h}e.util.getPointer=function(h){var l=h.target,u=e.util.getScrollLeftTop(l),f=c(h);return{x:f.clientX+u.left,y:f.clientY+u.top}},e.util.isTouchEvent=function(h){return o.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function a(f,p){var m=f.style;if(!m)return f;if(typeof p=="string")return f.style.cssText+=";"+p,p.indexOf("opacity")>-1?u(f,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):f;for(var g in p)if(g==="opacity")u(f,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return f}var o=e.document.createElement("div"),c=typeof o.style.opacity=="string",h=typeof o.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(f){return f};c?u=function(f,p){return f.style.opacity=p,f}:h&&(u=function(f,p){var m=f.style;return f.currentStyle&&!f.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",f}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function o(w){return typeof w=="string"?e.document.getElementById(w):w}var c,h=function(w){return a.call(w,0)};try{c=h(e.document.childNodes)instanceof Array}catch{}c||(h=function(w){for(var x=new Array(w.length),S=w.length;S--;)x[S]=w[S];return x});function l(w,x){var S=e.document.createElement(w);for(var C in x)C==="class"?S.className=x[C]:C==="for"?S.htmlFor=x[C]:S.setAttribute(C,x[C]);return S}function u(w,x){w&&(" "+w.className+" ").indexOf(" "+x+" ")===-1&&(w.className+=(w.className?" ":"")+x)}function f(w,x,S){return typeof x=="string"&&(x=l(x,S)),w.parentNode&&w.parentNode.replaceChild(x,w),x.appendChild(w),x}function p(w){for(var x=0,S=0,C=e.document.documentElement,k=e.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===e.document?(x=k.scrollLeft||C.scrollLeft||0,S=k.scrollTop||C.scrollTop||0):(x+=w.scrollLeft||0,S+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:x,top:S}}function m(w){var x,S=w&&w.ownerDocument,C={left:0,top:0},k={left:0,top:0},I,F={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return k;for(var j in F)k[F[j]]+=parseInt(g(w,j),10)||0;return x=S.documentElement,typeof w.getBoundingClientRect<"u"&&(C=w.getBoundingClientRect()),I=p(w),{left:C.left+I.left-(x.clientLeft||0)+k.left,top:C.top+I.top-(x.clientTop||0)+k.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(w,x){var S=e.document.defaultView.getComputedStyle(w,null);return S?S[x]:void 0}:g=function(w,x){var S=w.style[x];return!S&&w.currentStyle&&(S=w.currentStyle[x]),S},function(){var w=e.document.documentElement.style,x="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function S(k){return typeof k.onselectstart<"u"&&(k.onselectstart=e.util.falseFunction),x?k.style[x]="none":typeof k.unselectable=="string"&&(k.unselectable="on"),k}function C(k){return typeof k.onselectstart<"u"&&(k.onselectstart=null),x?k.style[x]="":typeof k.unselectable=="string"&&(k.unselectable=""),k}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=C}();function v(w){var x=e.jsdomImplForWrapper(w);return x._canvas||x._image}function y(w){if(!!e.isLikelyNode){var x=e.jsdomImplForWrapper(w);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}function b(w,x){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=x}e.util.setImageSmoothing=b,e.util.getById=o,e.util.toArray=h,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=f,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=y}(),function(){function a(h,l){return h+(/\?/.test(h)?"&":"?")+l}function o(){}function c(h,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",f=l.onComplete||function(){},p=new e.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(f(p),p.onreadystatechange=o)},u==="GET"&&(m=null,typeof l.parameters=="string"&&(h=a(h,l.parameters))),p.open(u,h,!0),(u==="POST"||u==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,o=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(y){y.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var y=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return y.forEach(function(b){b.cancel()}),y},cancelByTarget:function(v){var y=this.findAnimationsByTarget(v);return y.forEach(function(b){b.cancel()}),y},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(y){return y.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(y){return y.target===v}):[]}});function h(){return!1}function l(v,y,b,w){return-b*Math.cos(v/w*(Math.PI/2))+b+y}function u(v){v||(v={});var y=!1,b,w=function(){var x=e.runningAnimations.indexOf(b);return x>-1&&e.runningAnimations.splice(x,1)[0]};return b=a(o(v),{cancel:function(){return y=!0,w()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(x){var S=x||+new Date,C=v.duration||500,k=S+C,I,F=v.onChange||h,j=v.abort||h,q=v.onComplete||h,te=v.easing||l,G="startValue"in v?v.startValue.length>0:!1,Y="startValue"in v?v.startValue:0,ie="endValue"in v?v.endValue:100,ce=v.byValue||(G?Y.map(function(H,T){return ie[T]-Y[T]}):ie-Y);v.onStart&&v.onStart(),function H(T){I=T||+new Date;var P=I>k?C:I-S,D=P/C,R=G?Y.map(function(A,O){return te(P,Y[O],ce[O],C)}):te(P,Y,ce,C),$=Math.abs(G?(R[0]-Y[0])/ce[0]:(R-Y)/ce);if(b.currentValue=G?R.slice():R,b.completionRate=$,b.durationRate=D,!y){if(j(R,$,D)){w();return}if(I>k){b.currentValue=G?ie.slice():ie,b.completionRate=1,b.durationRate=1,F(G?ie.slice():ie,1,1),q(ie,1,1),w();return}else F(R,$,D),m(H)}}(S)}),b.cancel}var f=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return f.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=c}(),function(){function a(c,h,l){var u="rgba("+parseInt(c[0]+l*(h[0]-c[0]),10)+","+parseInt(c[1]+l*(h[1]-c[1]),10)+","+parseInt(c[2]+l*(h[2]-c[2]),10);return u+=","+(c&&h?parseFloat(c[3]+l*(h[3]-c[3])):1),u+=")",u}function o(c,h,l,u){var f=new e.Color(c).getSource(),p=new e.Color(h).getSource(),m=u.onComplete,g=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:f,endValue:p,byValue:p,easing:function(v,y,b,w){var x=u.colorEasing?u.colorEasing(v,w):1-Math.cos(v/w*(Math.PI/2));return a(y,b,x)},onComplete:function(v,y,b){if(m)return m(a(p,p,0),y,b)},onChange:function(v,y,b){if(g){if(Array.isArray(v))return g(a(v,v,0),y,b);g(v,y,b)}}}))}e.util.animateColor=o}(),function(){function a(T,P,D,R){return T<Math.abs(P)?(T=P,R=D/4):P===0&&T===0?R=D/(2*Math.PI)*Math.asin(1):R=D/(2*Math.PI)*Math.asin(P/T),{a:T,c:P,p:D,s:R}}function o(T,P,D){return T.a*Math.pow(2,10*(P-=1))*Math.sin((P*D-T.s)*(2*Math.PI)/T.p)}function c(T,P,D,R){return D*((T=T/R-1)*T*T+1)+P}function h(T,P,D,R){return T/=R/2,T<1?D/2*T*T*T+P:D/2*((T-=2)*T*T+2)+P}function l(T,P,D,R){return D*(T/=R)*T*T*T+P}function u(T,P,D,R){return-D*((T=T/R-1)*T*T*T-1)+P}function f(T,P,D,R){return T/=R/2,T<1?D/2*T*T*T*T+P:-D/2*((T-=2)*T*T*T-2)+P}function p(T,P,D,R){return D*(T/=R)*T*T*T*T+P}function m(T,P,D,R){return D*((T=T/R-1)*T*T*T*T+1)+P}function g(T,P,D,R){return T/=R/2,T<1?D/2*T*T*T*T*T+P:D/2*((T-=2)*T*T*T*T+2)+P}function v(T,P,D,R){return-D*Math.cos(T/R*(Math.PI/2))+D+P}function y(T,P,D,R){return D*Math.sin(T/R*(Math.PI/2))+P}function b(T,P,D,R){return-D/2*(Math.cos(Math.PI*T/R)-1)+P}function w(T,P,D,R){return T===0?P:D*Math.pow(2,10*(T/R-1))+P}function x(T,P,D,R){return T===R?P+D:D*(-Math.pow(2,-10*T/R)+1)+P}function S(T,P,D,R){return T===0?P:T===R?P+D:(T/=R/2,T<1?D/2*Math.pow(2,10*(T-1))+P:D/2*(-Math.pow(2,-10*--T)+2)+P)}function C(T,P,D,R){return-D*(Math.sqrt(1-(T/=R)*T)-1)+P}function k(T,P,D,R){return D*Math.sqrt(1-(T=T/R-1)*T)+P}function I(T,P,D,R){return T/=R/2,T<1?-D/2*(Math.sqrt(1-T*T)-1)+P:D/2*(Math.sqrt(1-(T-=2)*T)+1)+P}function F(T,P,D,R){var $=1.70158,A=0,O=D;if(T===0)return P;if(T/=R,T===1)return P+D;A||(A=R*.3);var z=a(O,D,A,$);return-o(z,T,R)+P}function j(T,P,D,R){var $=1.70158,A=0,O=D;if(T===0)return P;if(T/=R,T===1)return P+D;A||(A=R*.3);var z=a(O,D,A,$);return z.a*Math.pow(2,-10*T)*Math.sin((T*R-z.s)*(2*Math.PI)/z.p)+z.c+P}function q(T,P,D,R){var $=1.70158,A=0,O=D;if(T===0)return P;if(T/=R/2,T===2)return P+D;A||(A=R*(.3*1.5));var z=a(O,D,A,$);return T<1?-.5*o(z,T,R)+P:z.a*Math.pow(2,-10*(T-=1))*Math.sin((T*R-z.s)*(2*Math.PI)/z.p)*.5+z.c+P}function te(T,P,D,R,$){return $===void 0&&($=1.70158),D*(T/=R)*T*(($+1)*T-$)+P}function G(T,P,D,R,$){return $===void 0&&($=1.70158),D*((T=T/R-1)*T*(($+1)*T+$)+1)+P}function Y(T,P,D,R,$){return $===void 0&&($=1.70158),T/=R/2,T<1?D/2*(T*T*((($*=1.525)+1)*T-$))+P:D/2*((T-=2)*T*((($*=1.525)+1)*T+$)+2)+P}function ie(T,P,D,R){return D-ce(R-T,0,D,R)+P}function ce(T,P,D,R){return(T/=R)<1/2.75?D*(7.5625*T*T)+P:T<2/2.75?D*(7.5625*(T-=1.5/2.75)*T+.75)+P:T<2.5/2.75?D*(7.5625*(T-=2.25/2.75)*T+.9375)+P:D*(7.5625*(T-=2.625/2.75)*T+.984375)+P}function H(T,P,D,R){return T<R/2?ie(T*2,0,D,R)*.5+P:ce(T*2-R,0,D,R)*.5+D*.5+P}e.util.ease={easeInQuad:function(T,P,D,R){return D*(T/=R)*T+P},easeOutQuad:function(T,P,D,R){return-D*(T/=R)*(T-2)+P},easeInOutQuad:function(T,P,D,R){return T/=R/2,T<1?D/2*T*T+P:-D/2*(--T*(T-2)-1)+P},easeInCubic:function(T,P,D,R){return D*(T/=R)*T*T+P},easeOutCubic:c,easeInOutCubic:h,easeInQuart:l,easeOutQuart:u,easeInOutQuart:f,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:y,easeInOutSine:b,easeInExpo:w,easeOutExpo:x,easeInOutExpo:S,easeInCirc:C,easeOutCirc:k,easeInOutCirc:I,easeInElastic:F,easeOutElastic:j,easeInOutElastic:q,easeInBack:te,easeOutBack:G,easeInOutBack:Y,easeInBounce:ie,easeOutBounce:ce,easeInOutBounce:H}}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l=o.util.toFixed,u=o.util.parseUnit,f=o.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",x="clip-path";o.svgValidTagNamesRegEx=k(p),o.svgViewBoxElementsRegEx=k(m),o.svgInvalidAncestorsRegEx=k(g),o.svgValidParentsRegEx=k(v),o.cssRules={},o.gradientDefs={},o.clipPaths={};function S(A){return A in y?y[A]:A}function C(A,O,z,B){var K=Array.isArray(O),W;if((A==="fill"||A==="stroke")&&O==="none")O="";else{if(A==="strokeUniform")return O==="non-scaling-stroke";if(A==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(A==="transformMatrix")z&&z.transformMatrix?O=f(z.transformMatrix,o.parseTransformAttribute(O)):O=o.parseTransformAttribute(O);else if(A==="visible")O=O!=="none"&&O!=="hidden",z&&z.visible===!1&&(O=!1);else if(A==="opacity")O=parseFloat(O),z&&typeof z.opacity<"u"&&(O*=z.opacity);else if(A==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(A==="charSpacing")W=u(O,B)/B*1e3;else if(A==="paintFirst"){var J=O.indexOf("fill"),ne=O.indexOf("stroke"),O="fill";(J>-1&&ne>-1&&ne<J||J===-1&&ne>-1)&&(O="stroke")}else{if(A==="href"||A==="xlink:href"||A==="font")return O;if(A==="imageSmoothing")return O==="optimizeQuality";W=K?O.map(u):u(O,B)}}return!K&&isNaN(W)?O:W}function k(A){return new RegExp("^("+A.join("|")+")\\b","i")}function I(A){for(var O in b)if(!(typeof A[b[O]]>"u"||A[O]==="")){if(typeof A[O]>"u"){if(!o.Object.prototype[O])continue;A[O]=o.Object.prototype[O]}if(A[O].indexOf("url(")!==0){var z=new o.Color(A[O]);A[O]=z.setAlpha(l(z.getAlpha()*A[b[O]],2)).toRgba()}}return A}function F(A,O){var z,B=[],K,W,J;for(W=0,J=O.length;W<J;W++)z=O[W],K=A.getElementsByTagName(z),B=B.concat(Array.prototype.slice.call(K));return B}o.parseTransformAttribute=function(){function A(Z,ge){var _e=o.util.cos(ge[0]),ke=o.util.sin(ge[0]),Fe=0,De=0;ge.length===3&&(Fe=ge[1],De=ge[2]),Z[0]=_e,Z[1]=ke,Z[2]=-ke,Z[3]=_e,Z[4]=Fe-(_e*Fe-ke*De),Z[5]=De-(ke*Fe+_e*De)}function O(Z,ge){var _e=ge[0],ke=ge.length===2?ge[1]:ge[0];Z[0]=_e,Z[3]=ke}function z(Z,ge,_e){Z[_e]=Math.tan(o.util.degreesToRadians(ge[0]))}function B(Z,ge){Z[4]=ge[0],ge.length===2&&(Z[5]=ge[1])}var K=o.iMatrix,W=o.reNum,J=o.commaWsp,ne="(?:(skewX)\\s*\\(\\s*("+W+")\\s*\\))",re="(?:(skewY)\\s*\\(\\s*("+W+")\\s*\\))",U="(?:(rotate)\\s*\\(\\s*("+W+")(?:"+J+"("+W+")"+J+"("+W+"))?\\s*\\))",V="(?:(scale)\\s*\\(\\s*("+W+")(?:"+J+"("+W+"))?\\s*\\))",Q="(?:(translate)\\s*\\(\\s*("+W+")(?:"+J+"("+W+"))?\\s*\\))",ee="(?:(matrix)\\s*\\(\\s*("+W+")"+J+"("+W+")"+J+"("+W+")"+J+"("+W+")"+J+"("+W+")"+J+"("+W+")\\s*\\))",N="(?:"+ee+"|"+Q+"|"+V+"|"+U+"|"+ne+"|"+re+")",X="(?:"+N+"(?:"+J+"*"+N+")*)",le="^\\s*(?:"+X+"?)\\s*$",we=new RegExp(le),ve=new RegExp(N,"g");return function(Z){var ge=K.concat(),_e=[];if(!Z||Z&&!we.test(Z))return ge;Z.replace(ve,function(Fe){var De=new RegExp(N).exec(Fe).filter(function(Ai){return!!Ai}),Ot=De[1],Qe=De.slice(2).map(parseFloat);switch(Ot){case"translate":B(ge,Qe);break;case"rotate":Qe[0]=o.util.degreesToRadians(Qe[0]),A(ge,Qe);break;case"scale":O(ge,Qe);break;case"skewX":z(ge,Qe,2);break;case"skewY":z(ge,Qe,1);break;case"matrix":ge=Qe;break}_e.push(ge.concat()),ge=K.concat()});for(var ke=_e[0];_e.length>1;)_e.shift(),ke=o.util.multiplyTransformMatrices(ke,_e[0]);return ke}}();function j(A,O){var z,B;A.replace(/;\s*$/,"").split(";").forEach(function(K){var W=K.split(":");z=W[0].trim().toLowerCase(),B=W[1].trim(),O[z]=B})}function q(A,O){var z,B;for(var K in A)typeof A[K]>"u"||(z=K.toLowerCase(),B=A[K],O[z]=B)}function te(A,O){var z={};for(var B in o.cssRules[O])if(G(A,B.split(" ")))for(var K in o.cssRules[O][B])z[K]=o.cssRules[O][B][K];return z}function G(A,O){var z,B=!0;return z=ie(A,O.pop()),z&&O.length&&(B=Y(A,O)),z&&B&&O.length===0}function Y(A,O){for(var z,B=!0;A.parentNode&&A.parentNode.nodeType===1&&O.length;)B&&(z=O.pop()),A=A.parentNode,B=ie(A,z);return O.length===0}function ie(A,O){var z=A.nodeName,B=A.getAttribute("class"),K=A.getAttribute("id"),W,J;if(W=new RegExp("^"+z,"i"),O=O.replace(W,""),K&&O.length&&(W=new RegExp("#"+K+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"")),B&&O.length)for(B=B.split(" "),J=B.length;J--;)W=new RegExp("\\."+B[J]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"");return O.length===0}function ce(A,O){var z;if(A.getElementById&&(z=A.getElementById(O)),z)return z;var B,K,W,J=A.getElementsByTagName("*");for(K=0,W=J.length;K<W;K++)if(B=J[K],O===B.getAttribute("id"))return B}function H(A){for(var O=F(A,["use","svg:use"]),z=0;O.length&&z<O.length;){var B=O[z],K=B.getAttribute("xlink:href")||B.getAttribute("href");if(K===null)return;var W=K.slice(1),J=B.getAttribute("x")||0,ne=B.getAttribute("y")||0,re=ce(A,W).cloneNode(!0),U=(re.getAttribute("transform")||"")+" translate("+J+", "+ne+")",V,Q=O.length,ee,N,X,le,we=o.svgNS;if(P(re),/^svg$/i.test(re.nodeName)){var ve=re.ownerDocument.createElementNS(we,"g");for(N=0,X=re.attributes,le=X.length;N<le;N++)ee=X.item(N),ve.setAttributeNS(we,ee.nodeName,ee.nodeValue);for(;re.firstChild;)ve.appendChild(re.firstChild);re=ve}for(N=0,X=B.attributes,le=X.length;N<le;N++)ee=X.item(N),!(ee.nodeName==="x"||ee.nodeName==="y"||ee.nodeName==="xlink:href"||ee.nodeName==="href")&&(ee.nodeName==="transform"?U=ee.nodeValue+" "+U:re.setAttribute(ee.nodeName,ee.nodeValue));re.setAttribute("transform",U),re.setAttribute("instantiated_by_use","1"),re.removeAttribute("id"),V=B.parentNode,V.replaceChild(re,B),O.length===Q&&z++}}var T=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function P(A){if(!o.svgViewBoxElementsRegEx.test(A.nodeName))return{};var O=A.getAttribute("viewBox"),z=1,B=1,K=0,W=0,J,ne,re,U,V=A.getAttribute("width"),Q=A.getAttribute("height"),ee=A.getAttribute("x")||0,N=A.getAttribute("y")||0,X=A.getAttribute("preserveAspectRatio")||"",le=!O||!(O=O.match(T)),we=!V||!Q||V==="100%"||Q==="100%",ve=le&&we,Z={},ge="",_e=0,ke=0;if(Z.width=0,Z.height=0,Z.toBeParsed=ve,le&&(ee||N)&&A.parentNode&&A.parentNode.nodeName!=="#document"&&(ge=" translate("+u(ee)+" "+u(N)+") ",re=(A.getAttribute("transform")||"")+ge,A.setAttribute("transform",re),A.removeAttribute("x"),A.removeAttribute("y")),ve)return Z;if(le)return Z.width=u(V),Z.height=u(Q),Z;if(K=-parseFloat(O[1]),W=-parseFloat(O[2]),J=parseFloat(O[3]),ne=parseFloat(O[4]),Z.minX=K,Z.minY=W,Z.viewBoxWidth=J,Z.viewBoxHeight=ne,we?(Z.width=J,Z.height=ne):(Z.width=u(V),Z.height=u(Q),z=Z.width/J,B=Z.height/ne),X=o.util.parsePreserveAspectRatioAttribute(X),X.alignX!=="none"&&(X.meetOrSlice==="meet"&&(B=z=z>B?B:z),X.meetOrSlice==="slice"&&(B=z=z>B?z:B),_e=Z.width-J*z,ke=Z.height-ne*z,X.alignX==="Mid"&&(_e/=2),X.alignY==="Mid"&&(ke/=2),X.alignX==="Min"&&(_e=0),X.alignY==="Min"&&(ke=0)),z===1&&B===1&&K===0&&W===0&&ee===0&&N===0)return Z;if((ee||N)&&A.parentNode.nodeName!=="#document"&&(ge=" translate("+u(ee)+" "+u(N)+") "),re=ge+" matrix("+z+" 0 0 "+B+" "+(K*z+_e)+" "+(W*B+ke)+") ",A.nodeName==="svg"){for(U=A.ownerDocument.createElementNS(o.svgNS,"g");A.firstChild;)U.appendChild(A.firstChild);A.appendChild(U)}else U=A,U.removeAttribute("x"),U.removeAttribute("y"),re=U.getAttribute("transform")+re;return U.setAttribute("transform",re),Z}function D(A,O){for(;A&&(A=A.parentNode);)if(A.nodeName&&O.test(A.nodeName.replace("svg:",""))&&!A.getAttribute("instantiated_by_use"))return!0;return!1}o.parseSVGDocument=function(A,O,z,B){if(!!A){H(A);var K=o.Object.__uid++,W,J,ne=P(A),re=o.util.toArray(A.getElementsByTagName("*"));if(ne.crossOrigin=B&&B.crossOrigin,ne.svgUid=K,re.length===0&&o.isLikelyNode){re=A.selectNodes('//*[name(.)!="svg"]');var U=[];for(W=0,J=re.length;W<J;W++)U[W]=re[W];re=U}var V=re.filter(function(ee){return P(ee),o.svgValidTagNamesRegEx.test(ee.nodeName.replace("svg:",""))&&!D(ee,o.svgInvalidAncestorsRegEx)});if(!V||V&&!V.length){O&&O([],{});return}var Q={};re.filter(function(ee){return ee.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ee){var N=ee.getAttribute("id");Q[N]=o.util.toArray(ee.getElementsByTagName("*")).filter(function(X){return o.svgValidTagNamesRegEx.test(X.nodeName.replace("svg:",""))})}),o.gradientDefs[K]=o.getGradientDefs(A),o.cssRules[K]=o.getCSSRules(A),o.clipPaths[K]=Q,o.parseElements(V,function(ee,N){O&&(O(ee,ne,N,re),delete o.gradientDefs[K],delete o.cssRules[K],delete o.clipPaths[K])},h(ne),z,B)}};function R(A,O){var z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],B="xlink:href",K=O.getAttribute(B).slice(1),W=ce(A,K);if(W&&W.getAttribute(B)&&R(A,W),z.forEach(function(ne){W&&!O.hasAttribute(ne)&&W.hasAttribute(ne)&&O.setAttribute(ne,W.getAttribute(ne))}),!O.children.length)for(var J=W.cloneNode(!0);J.firstChild;)O.appendChild(J.firstChild);O.removeAttribute(B)}var $=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");c(o,{parseFontDeclaration:function(A,O){var z=A.match($);if(!!z){var B=z[1],K=z[3],W=z[4],J=z[5],ne=z[6];B&&(O.fontStyle=B),K&&(O.fontWeight=isNaN(parseFloat(K))?K:parseFloat(K)),W&&(O.fontSize=u(W)),ne&&(O.fontFamily=ne),J&&(O.lineHeight=J==="normal"?1:J)}},getGradientDefs:function(A){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],z=F(A,O),B,K=0,W={};for(K=z.length;K--;)B=z[K],B.getAttribute("xlink:href")&&R(A,B),W[B.getAttribute("id")]=B;return W},parseAttributes:function(A,O,z){if(!!A){var B,K={},W,J;typeof z>"u"&&(z=A.getAttribute("svgUid")),A.parentNode&&o.svgValidParentsRegEx.test(A.parentNode.nodeName)&&(K=o.parseAttributes(A.parentNode,O,z));var ne=O.reduce(function(X,le){return B=A.getAttribute(le),B&&(X[le]=B),X},{}),re=c(te(A,z),o.parseStyleAttribute(A));ne=c(ne,re),re[x]&&A.setAttribute(x,re[x]),W=J=K.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,ne[w]&&(ne[w]=W=u(ne[w],J));var U,V,Q={};for(var ee in ne)U=S(ee),V=C(U,ne[ee],K,W),Q[U]=V;Q&&Q.font&&o.parseFontDeclaration(Q.font,Q);var N=c(K,Q);return o.svgValidParentsRegEx.test(A.nodeName)?N:I(N)}},parseElements:function(A,O,z,B,K){new o.ElementsParser(A,O,z,B,K).parse()},parseStyleAttribute:function(A){var O={},z=A.getAttribute("style");return z&&(typeof z=="string"?j(z,O):q(z,O)),O},parsePointsAttribute:function(A){if(!A)return null;A=A.replace(/,/g," ").trim(),A=A.split(/\s+/);var O=[],z,B;for(z=0,B=A.length;z<B;z+=2)O.push({x:parseFloat(A[z]),y:parseFloat(A[z+1])});return O},getCSSRules:function(A){var O=A.getElementsByTagName("style"),z,B,K={},W;for(z=0,B=O.length;z<B;z++){var J=O[z].textContent;J=J.replace(/\/\*[\s\S]*?\*\//g,""),J.trim()!==""&&(W=J.split("}"),W=W.filter(function(ne){return ne.trim()}),W.forEach(function(ne){var re=ne.split("{"),U={},V=re[1].trim(),Q=V.split(";").filter(function(le){return le.trim()});for(z=0,B=Q.length;z<B;z++){var ee=Q[z].split(":"),N=ee[0].trim(),X=ee[1].trim();U[N]=X}ne=re[0].trim(),ne.split(",").forEach(function(le){le=le.replace(/^svg/i,"").trim(),le!==""&&(K[le]?o.util.object.extend(K[le],U):K[le]=o.util.object.clone(U))})}))}return K},loadSVGFromURL:function(A,O,z,B){A=A.replace(/^\n\s*/,"").trim(),new o.util.request(A,{method:"get",onComplete:K});function K(W){var J=W.responseXML;if(!J||!J.documentElement)return O&&O(null),!1;o.parseSVGDocument(J.documentElement,function(ne,re,U,V){O&&O(ne,re,U,V)},z,B)}},loadSVGFromString:function(A,O,z,B){var K=new o.window.DOMParser,W=K.parseFromString(A.trim(),"text/xml");o.parseSVGDocument(W.documentElement,function(J,ne,re,U){O(J,ne,re,U)},z,B)}})}(t),e.ElementsParser=function(a,o,c,h,l,u){this.elements=a,this.callback=o,this.options=c,this.reviver=h,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var o=this;this.elements.forEach(function(c,h){c.setAttribute("svgUid",o.svgUid),o.createObject(c,h)})},a.findTag=function(o){return e[e.util.string.capitalize(o.tagName.replace("svg:",""))]},a.createObject=function(o,c){var h=this.findTag(o);if(h&&h.fromElement)try{h.fromElement(o,this.createCallback(c,o),this.options)}catch(l){e.log(l)}else this.checkIfDone()},a.createCallback=function(o,c){var h=this;return function(l){var u;h.resolveGradient(l,c,"fill"),h.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),h.resolveClipPath(l,c),h.reviver&&h.reviver(c,l),h.instances[o]=l,h.checkIfDone()}},a.extractPropertyDefinition=function(o,c,h){var l=o[c],u=this.regexUrl;if(!!u.test(l)){u.lastIndex=0;var f=u.exec(l)[1];return u.lastIndex=0,e[h][this.svgUid][f]}},a.resolveGradient=function(o,c,h){var l=this.extractPropertyDefinition(o,h,"gradientDefs");if(l){var u=c.getAttribute(h+"-opacity"),f=e.Gradient.fromElement(l,o,u,this.options);o.set(h,f)}},a.createClipPathCallback=function(o,c){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,c.push(h)}},a.resolveClipPath=function(o,c){var h=this.extractPropertyDefinition(o,"clipPath","clipPaths"),l,u,f,p,m,g;if(h){p=[],f=e.util.invertTransform(o.calcTransformMatrix());for(var v=h[0].parentNode,y=c;y.parentNode&&y.getAttribute("clip-path")!==o.clipPath;)y=y.parentNode;y.parentNode.appendChild(v);for(var b=0;b<h.length;b++)l=h[b],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(o,p),this.options);p.length===1?h=p[0]:h=new e.Group(p),m=e.util.multiplyTransformMatrices(f,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,y);var g=e.util.qrDecompose(m);h.flipX=!1,h.flipY=!1,h.set("scaleX",g.scaleX),h.set("scaleY",g.scaleY),h.angle=g.angle,h.skewX=g.skewX,h.skewY=0,h.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),o.clipPath=h}else delete o.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(o){return o!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var o=a.fabric||(a.fabric={});if(o.Point){o.warn("fabric.Point is already defined");return}o.Point=c;function c(h,l){this.x=h,this.y=l}c.prototype={type:"point",constructor:c,add:function(h){return new c(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new c(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new c(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new c(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new c(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new c(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(h.x-this.x)*l,this.y+(h.y-this.y)*l)},distanceFrom:function(h){var l=this.x-h.x,u=this.y-h.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new c(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new c(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,l){return this.x=h,this.y=l,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var l=this.x,u=this.y;this.x=h.x,this.y=h.y,h.x=l,h.y=u},clone:function(){return new c(this.x,this.y)}}}(t),function(a){var o=a.fabric||(a.fabric={});if(o.Intersection){o.warn("fabric.Intersection is already defined");return}function c(h){this.status=h,this.points=[]}o.Intersection=c,o.Intersection.prototype={constructor:c,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},o.Intersection.intersectLineLine=function(h,l,u,f){var p,m=(f.x-u.x)*(h.y-u.y)-(f.y-u.y)*(h.x-u.x),g=(l.x-h.x)*(h.y-u.y)-(l.y-h.y)*(h.x-u.x),v=(f.y-u.y)*(l.x-h.x)-(f.x-u.x)*(l.y-h.y);if(v!==0){var y=m/v,b=g/v;0<=y&&y<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new o.Point(h.x+y*(l.x-h.x),h.y+y*(l.y-h.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},o.Intersection.intersectLinePolygon=function(h,l,u){var f=new c,p=u.length,m,g,v,y;for(y=0;y<p;y++)m=u[y],g=u[(y+1)%p],v=c.intersectLineLine(h,l,m,g),f.appendPoints(v.points);return f.points.length>0&&(f.status="Intersection"),f},o.Intersection.intersectPolygonPolygon=function(h,l){var u=new c,f=h.length,p;for(p=0;p<f;p++){var m=h[p],g=h[(p+1)%f],v=c.intersectLinePolygon(m,g,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},o.Intersection.intersectPolygonRectangle=function(h,l,u){var f=l.min(u),p=l.max(u),m=new o.Point(p.x,f.y),g=new o.Point(f.x,p.y),v=c.intersectLinePolygon(f,m,h),y=c.intersectLinePolygon(m,p,h),b=c.intersectLinePolygon(p,g,h),w=c.intersectLinePolygon(g,f,h),x=new c;return x.appendPoints(v.points),x.appendPoints(y.points),x.appendPoints(b.points),x.appendPoints(w.points),x.points.length>0&&(x.status="Intersection"),x}}(t),function(a){var o=a.fabric||(a.fabric={});if(o.Color){o.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}o.Color=c,o.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,f){l/=255,u/=255,f/=255;var p,m,g,v=o.util.array.max([l,u,f]),y=o.util.array.min([l,u,f]);if(g=(v+y)/2,v===y)p=m=0;else{var b=v-y;switch(m=g>.5?b/(2-v-y):b/(v+y),v){case l:p=(u-f)/b+(u<f?6:0);break;case u:p=(f-l)/b+2;break;case f:p=(l-u)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,f,p;return u=l[0].toString(16),u=u.length===1?"0"+u:u,f=l[1].toString(16),f=f.length===1?"0"+f:f,p=l[2].toString(16),p=p.length===1?"0"+p:p,u.toUpperCase()+f.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),f=l[3];return this.setSource([u,u,u,f]),this},toBlackWhite:function(l){var u=this.getSource(),f=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),p=u[3];return l=l||127,f=Number(f)<Number(l)?0:255,this.setSource([f,f,f,p]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],f=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(m[v]*(1-p)+g[v]*p));return u[3]=f,this.setSource(u),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(l,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+(u-l)*6*f:f<1/2?u:f<2/3?l+(u-l)*(2/3-f)*6:l}o.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},o.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var f=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),p=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),m=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(f,10),parseInt(p,10),parseInt(m,10),u[4]?parseFloat(u[4]):1]}},o.Color.fromRgba=c.fromRgb,o.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},o.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(!!u){var f=(parseFloat(u[1])%360+360)%360/360,p=parseFloat(u[2])/(/%$/.test(u[2])?100:1),m=parseFloat(u[3])/(/%$/.test(u[3])?100:1),g,v,y;if(p===0)g=v=y=m;else{var b=m<=.5?m*(p+1):m+p-m*p,w=m*2-b;g=h(w,b,f+1/3),v=h(w,b,f),y=h(w,b,f-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(y*255),u[4]?parseFloat(u[4]):1]}},o.Color.fromHsla=c.fromHsl,o.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},o.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),f=u.length===3||u.length===4,p=u.length===8||u.length===4,m=f?u.charAt(0)+u.charAt(0):u.substring(0,2),g=f?u.charAt(1)+u.charAt(1):u.substring(2,4),v=f?u.charAt(2)+u.charAt(2):u.substring(4,6),y=p?f?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},o.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(t),function(a){var o=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],l={},u="left",f="top",p="right",m="bottom",g="center",v={top:m,bottom:f,left:p,right:u,center:g},y=o.util.radiansToDegrees,b=Math.sign||function(U){return(U>0)-(U<0)||+U};function w(U,V){var Q=U.angle+y(Math.atan2(V.y,V.x))+360;return Math.round(Q%360/45)}function x(U,V){var Q=V.transform.target,ee=Q.canvas,N=o.util.object.clone(V);N.target=Q,ee&&ee.fire("object:"+U,N),Q.fire(U,V)}function S(U,V){var Q=V.canvas,ee=Q.uniScaleKey,N=U[ee];return Q.uniformScaling&&!N||!Q.uniformScaling&&N}function C(U){return U.originX===g&&U.originY===g}function k(U,V,Q){var ee=U.lockScalingX,N=U.lockScalingY;return!!(ee&&N||!V&&(ee||N)&&Q||ee&&V==="x"||N&&V==="y")}function I(U,V,Q){var ee="not-allowed",N=S(U,Q),X="";if(V.x!==0&&V.y===0?X="x":V.x===0&&V.y!==0&&(X="y"),k(Q,X,N))return ee;var le=w(Q,V);return c[le]+"-resize"}function F(U,V,Q){var ee="not-allowed";if(V.x!==0&&Q.lockSkewingY||V.y!==0&&Q.lockSkewingX)return ee;var N=w(Q,V)%4;return h[N]+"-resize"}function j(U,V,Q){return U[Q.canvas.altActionKey]?l.skewCursorStyleHandler(U,V,Q):l.scaleCursorStyleHandler(U,V,Q)}function q(U,V,Q){var ee=U[Q.canvas.altActionKey];if(V.x===0)return ee?"skewX":"scaleY";if(V.y===0)return ee?"skewY":"scaleX"}function te(U,V,Q){return Q.lockRotation?"not-allowed":V.cursorStyle}function G(U,V,Q,ee){return{e:U,transform:V,pointer:{x:Q,y:ee}}}function Y(U){return function(V,Q,ee,N){var X=Q.target,le=X.getCenterPoint(),we=X.translateToOriginPoint(le,Q.originX,Q.originY),ve=U(V,Q,ee,N);return X.setPositionByOrigin(we,Q.originX,Q.originY),ve}}function ie(U,V){return function(Q,ee,N,X){var le=V(Q,ee,N,X);return le&&x(U,G(Q,ee,N,X)),le}}function ce(U,V,Q,ee,N){var X=U.target,le=X.controls[U.corner],we=X.canvas.getZoom(),ve=X.padding/we,Z=X.toLocalPoint(new o.Point(ee,N),V,Q);return Z.x>=ve&&(Z.x-=ve),Z.x<=-ve&&(Z.x+=ve),Z.y>=ve&&(Z.y-=ve),Z.y<=ve&&(Z.y+=ve),Z.x-=le.offsetX,Z.y-=le.offsetY,Z}function H(U){return U.flipX!==U.flipY}function T(U,V,Q,ee,N){if(U[V]!==0){var X=U._getTransformedDimensions()[ee],le=N/X*U[Q];U.set(Q,le)}}function P(U,V,Q,ee){var N=V.target,X=N._getTransformedDimensions(0,N.skewY),le=ce(V,V.originX,V.originY,Q,ee),we=Math.abs(le.x*2)-X.x,ve=N.skewX,Z;we<2?Z=0:(Z=y(Math.atan2(we/N.scaleX,X.y/N.scaleY)),V.originX===u&&V.originY===m&&(Z=-Z),V.originX===p&&V.originY===f&&(Z=-Z),H(N)&&(Z=-Z));var ge=ve!==Z;if(ge){var _e=N._getTransformedDimensions().y;N.set("skewX",Z),T(N,"skewY","scaleY","y",_e)}return ge}function D(U,V,Q,ee){var N=V.target,X=N._getTransformedDimensions(N.skewX,0),le=ce(V,V.originX,V.originY,Q,ee),we=Math.abs(le.y*2)-X.y,ve=N.skewY,Z;we<2?Z=0:(Z=y(Math.atan2(we/N.scaleY,X.x/N.scaleX)),V.originX===u&&V.originY===m&&(Z=-Z),V.originX===p&&V.originY===f&&(Z=-Z),H(N)&&(Z=-Z));var ge=ve!==Z;if(ge){var _e=N._getTransformedDimensions().x;N.set("skewY",Z),T(N,"skewX","scaleX","x",_e)}return ge}function R(U,V,Q,ee){var N=V.target,X=N.skewX,le,we=V.originY;if(N.lockSkewingX)return!1;if(X===0){var ve=ce(V,g,g,Q,ee);ve.x>0?le=u:le=p}else X>0&&(le=we===f?u:p),X<0&&(le=we===f?p:u),H(N)&&(le=le===u?p:u);V.originX=le;var Z=ie("skewing",Y(P));return Z(U,V,Q,ee)}function $(U,V,Q,ee){var N=V.target,X=N.skewY,le,we=V.originX;if(N.lockSkewingY)return!1;if(X===0){var ve=ce(V,g,g,Q,ee);ve.y>0?le=f:le=m}else X>0&&(le=we===u?f:m),X<0&&(le=we===u?m:f),H(N)&&(le=le===f?m:f);V.originY=le;var Z=ie("skewing",Y(D));return Z(U,V,Q,ee)}function A(U,V,Q,ee){var N=V,X=N.target,le=X.translateToOriginPoint(X.getCenterPoint(),N.originX,N.originY);if(X.lockRotation)return!1;var we=Math.atan2(N.ey-le.y,N.ex-le.x),ve=Math.atan2(ee-le.y,Q-le.x),Z=y(ve-we+N.theta),ge=!0;if(X.snapAngle>0){var _e=X.snapAngle,ke=X.snapThreshold||_e,Fe=Math.ceil(Z/_e)*_e,De=Math.floor(Z/_e)*_e;Math.abs(Z-De)<ke?Z=De:Math.abs(Z-Fe)<ke&&(Z=Fe)}return Z<0&&(Z=360+Z),Z%=360,ge=X.angle!==Z,X.angle=Z,ge}function O(U,V,Q,ee,N){N=N||{};var X=V.target,le=X.lockScalingX,we=X.lockScalingY,ve=N.by,Z,ge,_e,ke,Fe=S(U,X),De=k(X,ve,Fe),Ot,Qe,Ai=V.gestureScale;if(De)return!1;if(Ai)ge=V.scaleX*Ai,_e=V.scaleY*Ai;else{if(Z=ce(V,V.originX,V.originY,Q,ee),Ot=ve!=="y"?b(Z.x):1,Qe=ve!=="x"?b(Z.y):1,V.signX||(V.signX=Ot),V.signY||(V.signY=Qe),X.lockScalingFlip&&(V.signX!==Ot||V.signY!==Qe))return!1;if(ke=X._getTransformedDimensions(),Fe&&!ve){var Ra=Math.abs(Z.x)+Math.abs(Z.y),In=V.original,Dz=Math.abs(ke.x*In.scaleX/X.scaleX)+Math.abs(ke.y*In.scaleY/X.scaleY),lS=Ra/Dz;ge=In.scaleX*lS,_e=In.scaleY*lS}else ge=Math.abs(Z.x*X.scaleX/ke.x),_e=Math.abs(Z.y*X.scaleY/ke.y);C(V)&&(ge*=2,_e*=2),V.signX!==Ot&&ve!=="y"&&(V.originX=v[V.originX],ge*=-1,V.signX=Ot),V.signY!==Qe&&ve!=="x"&&(V.originY=v[V.originY],_e*=-1,V.signY=Qe)}var Rz=X.scaleX,Iz=X.scaleY;return ve?(ve==="x"&&X.set("scaleX",ge),ve==="y"&&X.set("scaleY",_e)):(!le&&X.set("scaleX",ge),!we&&X.set("scaleY",_e)),Rz!==X.scaleX||Iz!==X.scaleY}function z(U,V,Q,ee){return O(U,V,Q,ee)}function B(U,V,Q,ee){return O(U,V,Q,ee,{by:"x"})}function K(U,V,Q,ee){return O(U,V,Q,ee,{by:"y"})}function W(U,V,Q,ee){return U[V.target.canvas.altActionKey]?l.skewHandlerX(U,V,Q,ee):l.scalingY(U,V,Q,ee)}function J(U,V,Q,ee){return U[V.target.canvas.altActionKey]?l.skewHandlerY(U,V,Q,ee):l.scalingX(U,V,Q,ee)}function ne(U,V,Q,ee){var N=V.target,X=ce(V,V.originX,V.originY,Q,ee),le=N.strokeWidth/(N.strokeUniform?N.scaleX:1),we=C(V)?2:1,ve=N.width,Z=Math.abs(X.x*we/N.scaleX)-le;return N.set("width",Math.max(Z,0)),ve!==Z}function re(U,V,Q,ee){var N=V.target,X=Q-V.offsetX,le=ee-V.offsetY,we=!N.get("lockMovementX")&&N.left!==X,ve=!N.get("lockMovementY")&&N.top!==le;return we&&N.set("left",X),ve&&N.set("top",le),(we||ve)&&x("moving",G(U,V,Q,ee)),we||ve}l.scaleCursorStyleHandler=I,l.skewCursorStyleHandler=F,l.scaleSkewCursorStyleHandler=j,l.rotationWithSnapping=ie("rotating",Y(A)),l.scalingEqually=ie("scaling",Y(z)),l.scalingX=ie("scaling",Y(B)),l.scalingY=ie("scaling",Y(K)),l.scalingYOrSkewingX=W,l.scalingXOrSkewingY=J,l.changeWidth=ie("resizing",Y(ne)),l.skewHandlerX=R,l.skewHandlerY=$,l.dragHandler=re,l.scaleOrSkewActionName=q,l.rotationStyleHandler=te,l.fireEvent=x,l.wrapWithFixedAnchor=Y,l.wrapWithFireEvent=ie,l.getLocalPoint=ce,o.controlsUtils=l}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians,h=o.controlsUtils;function l(f,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,x=w?"stroke":"fill",S=!w&&(g.cornerStrokeColor||v.cornerStrokeColor),C=p,k=m,I;f.save(),f.fillStyle=g.cornerColor||v.cornerColor,f.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,y>b?(I=y,f.scale(1,b/y),k=m*y/b):b>y?(I=b,f.scale(y/b,1),C=p*b/y):I=y,f.lineWidth=1,f.beginPath(),f.arc(C,k,I/2,0,2*Math.PI,!1),f[x](),S&&f.stroke(),f.restore()}function u(f,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,x=w?"stroke":"fill",S=!w&&(g.cornerStrokeColor||v.cornerStrokeColor),C=y/2,k=b/2;f.save(),f.fillStyle=g.cornerColor||v.cornerColor,f.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,f.lineWidth=1,f.translate(p,m),f.rotate(c(v.angle)),f[x+"Rect"](-C,-k,y,b),S&&f.strokeRect(-C,-k,y,b),f.restore()}h.renderCircleControl=l,h.renderSquareControl=u}(t),function(a){var o=a.fabric||(a.fabric={});function c(h){for(var l in h)this[l]=h[l]}o.Control=c,o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,l){return l.cursorStyle},getActionName:function(h,l){return l.actionName},getVisibility:function(h,l){var u=h._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,l){var u=o.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},l);return u},calcCornerCoords:function(h,l,u,f,p){var m,g,v,y,b=p?this.touchSizeX:this.sizeX,w=p?this.touchSizeY:this.sizeY;if(b&&w&&b!==w){var x=Math.atan2(w,b),S=Math.sqrt(b*b+w*w)/2,C=x-o.util.degreesToRadians(h),k=Math.PI/2-x-o.util.degreesToRadians(h);m=S*o.util.cos(C),g=S*o.util.sin(C),v=S*o.util.cos(k),y=S*o.util.sin(k)}else{var I=b&&w?b:l;S=I*.7071067812;var C=o.util.degreesToRadians(45-h);m=v=S*o.util.cos(C),g=y=S*o.util.sin(C)}return{tl:{x:u-y,y:f-v},tr:{x:u+m,y:f-g},bl:{x:u-m,y:f+g},br:{x:u+y,y:f+v}}},render:function(h,l,u,f,p){switch(f=f||{},f.cornerStyle||p.cornerStyle){case"circle":o.controlsUtils.renderCircleControl.call(this,h,l,u,f,p);break;default:o.controlsUtils.renderSquareControl.call(this,h,l,u,f,p)}}}}(t),function(){function a(u,f){var p=u.getAttribute("style"),m=u.getAttribute("offset")||0,g,v,y,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var w=p.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),b=w.length;b--;){var x=w[b].split(/\s*:\s*/),S=x[0].trim(),C=x[1].trim();S==="stop-color"?g=C:S==="stop-opacity"&&(y=C)}}return g||(g=u.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=u.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=v*f,{offset:m,color:g.toRgb(),opacity:y}}function o(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var h=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var f,p=this;Object.keys(u).forEach(function(m){p[m]=u[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,f={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(f.r1=u.coords.r1||0,f.r2=u.coords.r2||0),this.coords=f,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var f in u){var p=new e.Color(u[f]);this.colorStops.push({offset:parseFloat(f),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(u){var f={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,f,u),f},toSVG:function(u,v){var p=h(this.coords,!0),m,g,v=v||{},y,b,w=h(this.colorStops,!0),x=p.r1>p.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),C=-this.offsetX,k=-this.offsetY,I=!!v.additionalTransform,F=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(Y,ie){return Y.offset-ie.offset}),F==="objectBoundingBox"?(C/=u.width,k/=u.height):(C+=u.width/2,k+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(C-=u.pathOffset.x,k-=u.pathOffset.y),S[4]-=C,S[5]-=k,b='id="SVGID_'+this.id+'" gradientUnits="'+F+'"',b+=' gradientTransform="'+(I?v.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?y=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",b,' cx="',x?p.x1:p.x2,'" cy="',x?p.y1:p.y2,'" r="',x?p.r1:p.r2,'" fx="',x?p.x2:p.x1,'" fy="',x?p.y2:p.y1,`">
`]),this.type==="radial"){if(x)for(w=w.concat(),w.reverse(),m=0,g=w.length;m<g;m++)w[m].offset=1-w[m].offset;var j=Math.min(p.r1,p.r2);if(j>0){var q=Math.max(p.r1,p.r2),te=j/q;for(m=0,g=w.length;m<g;m++)w[m].offset+=te*(1-w[m].offset)}}for(m=0,g=w.length;m<g;m++){var G=w[m];y.push("<stop ",'offset="',G.offset*100+"%",'" style="stop-color:',G.color,typeof G.opacity<"u"?";stop-opacity: "+G.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(u){var f,p=e.util.object.clone(this.coords),m,g;if(!!this.type){for(this.type==="linear"?f=u.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(f=u.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,y=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof y<"u"&&(v=new e.Color(v).setAlpha(y).toRgba()),f.addColorStop(b,v)}return f}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,f,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=u.getElementsByTagName("stop"),y,b=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=u.getAttribute("gradientTransform")||"",x=[],S,C,k=0,I=0,F;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(y="linear",S=o(u)):(y="radial",S=c(u)),C=v.length;C--;)x.push(a(v[C],g));F=e.parseTransformAttribute(w),l(f,S,m,b),b==="pixels"&&(k=-f.left,I=-f.top);var j=new e.Gradient({id:u.getAttribute("id"),type:y,coords:S,colorStops:x,gradientUnits:b,gradientTransform:F,offsetX:k,offsetY:I});return j}});function l(u,f,p,m){var g,v;Object.keys(f).forEach(function(y){g=f[y],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(f[y],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(v*=p.viewBoxWidth||p.width),(y==="y1"||y==="y2")&&(v*=p.viewBoxHeight||p.height)))),f[y]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,c){if(o||(o={}),this.id=e.Object.__uid++,this.setOptions(o),!o.source||o.source&&typeof o.source!="string"){c&&c(this);return}else{var h=this;this.source=e.util.createImage(),e.util.loadImage(o.source,function(l,u){h.source=l,c&&c(h,u)},null,this.crossOrigin)}},toObject:function(o){var c=e.Object.NUM_FRACTION_DIGITS,h,l;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),l={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,o),l},toSVG:function(o){var c=typeof this.source=="function"?this.source():this.source,h=c.width/o.width,l=c.height/o.height,u=this.offsetX/o.width,f=this.offsetY/o.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,f&&(l+=Math.abs(f))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,u&&(h+=Math.abs(u))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+f+'" width="'+h+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(o){for(var c in o)this[c]=o[c]},toLive:function(o){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":o.createPattern(c,this.repeat)}})}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.toFixed;if(o.Shadow){o.warn("fabric.Shadow is already defined.");return}o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var l in h)this[l]=h[l];this.id=o.Object.__uid++},_parseShadow:function(h){var l=h.trim(),u=o.Shadow.reOffsetsAndBlur.exec(l)||[],f=l.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:f.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var l=40,u=40,f=o.Object.NUM_FRACTION_DIGITS,p=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-h.angle)),m=20,g=new o.Color(this.color);return h.width&&h.height&&(l=c((Math.abs(p.x)+this.blur)/h.width,f)*100+m,u=c((Math.abs(p.y)+this.blur)/h.height,f)*100+m),h.flipX&&(p.x*=-1),h.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,f)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,f)+'" dy="'+c(p.y,f)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},l=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(h[u]=this[u])},this),h}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,o=e.util.getElementOffset,c=e.util.removeFromArray,h=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,f=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,y),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,y),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,y),v.overlayColor&&this.setOverlayColor(v.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,y){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),y.scale(g,g)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(g,v,y){return this.__setBgOverlayImage("overlayImage",g,v,y)},setBackgroundImage:function(g,v,y){return this.__setBgOverlayImage("backgroundImage",g,v,y)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,y,b){return typeof v=="string"?e.util.loadImage(v,function(w,x){if(w){var S=new e.Image(w,b);this[g]=S,S.canvas=this}y&&y(w,x)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),y&&y(v,!1)),this},__setBgOverlayColor:function(g,v,y){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,y),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var y;v=v||{};for(var b in g)y=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),y+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,y=this.backgroundImage,b=this.overlayImage,w,x,S;for(this.viewportTransform=g,x=0,S=this._objects.length;x<S;x++)w=this._objects[x],w.group||w.setCoords(!0);return v&&v.setCoords(),y&&y.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var y=g,b=this.viewportTransform.slice(0);g=l(g,u(this.viewportTransform)),b[0]=v,b[3]=v;var w=l(g,b);return b[4]+=y.x-w.x,b[5]+=y.y-w.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,y=this.height,b=u(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var y=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,y=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",y.transform(g),g.scale(1/y.zoomX,1/y.zoomY),g.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var y,b;for(y=0,b=v.length;y<b;++y)v[y]&&v[y].render(g)},_renderBackgroundOrOverlay:function(g,v){var y=this[v+"Color"],b=this[v+"Image"],w=this.viewportTransform,x=this[v+"Vpt"];if(!(!y&&!b)){if(y){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=y.toLive?y.toLive(g,this):y,x&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var S=y.gradientTransform||y.patternTransform;S&&g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),g.fill(),g.restore()}b&&(g.save(),x&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=u(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var y=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return y&&!y.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,g,v)},this)},_toObject:function(g,v,y){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var w=g[v](y);return this.includeDefaultValues||(g.includeDefaultValues=b),w},__serializeBgOverlay:function(g,v){var y={},b=this.backgroundImage,w=this.overlayImage,x=this.backgroundColor,S=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(y.background=x.toObject(v)):x&&(y.background=x),S&&S.toObject?S.excludeFromExport||(y.overlay=S.toObject(v)):S&&(y.overlay=S),b&&!b.excludeFromExport&&(y.backgroundImage=this._toObject(b,g,v)),w&&!w.excludeFromExport&&(y.overlayImage=this._toObject(w,g,v)),y},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var y=[];return this._setSVGPreamble(y,g),this._setSVGHeader(y,g),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",v),this._setSVGObjects(y,v),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",v),y.push("</svg>"),y.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var y=v.width||this.width,b=v.height||this.height,w,x='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;v.viewBox?x='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,x='viewBox="'+h(-w[4]/w[0],S)+" "+h(-w[5]/w[3],S)+" "+h(this.width/w[0],S)+" "+h(this.height/w[3],S)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',b,'" ',x,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(y){var b=g[y+"Color"];if(b&&b.toLive){var w=g[y+"Vpt"],x=g.viewportTransform,S={width:g.width/(w?x[0]:1),height:g.height/(w?x[3]:1)};return b.toSVG(S,{additionalTransform:w?e.util.matrixToSVG(x):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},y,b,w,x,S,C,k,I,F,j=e.fontPaths,q=[];for(this._objects.forEach(function G(Y){q.push(Y),Y._objects&&Y._objects.forEach(G)}),I=0,F=q.length;I<F;I++)if(y=q[I],b=y.fontFamily,!(y.type.indexOf("text")===-1||v[b]||!j[b])&&(v[b]=!0,!!y.styles)){w=y.styles;for(S in w){x=w[S];for(k in x)C=x[k],b=C.fontFamily,!v[b]&&j[b]&&(v[b]=!0)}}for(var te in v)g+=[`		@font-face {
`,"			font-family: '",te,`';
`,"			src: url('",j[te],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var y,b,w,x=this._objects;for(b=0,w=x.length;b<w;b++)y=x[b],!y.excludeFromExport&&this._setSVGObject(g,y,v)},_setSVGObject:function(g,v,y){g.push(v.toSVG(y))},_setSVGBgOverlayImage:function(g,v,y){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(y))},_setSVGBgOverlayColor:function(g,v){var y=this[v+"Color"],b=this.viewportTransform,w=this.width,x=this.height;if(!!y)if(y.toLive){var S=y.repeat,C=e.util.invertTransform(b),k=this[v+"Vpt"],I=k?e.util.matrixToSVG(C):"";g.push('<rect transform="'+I+" translate(",w/2,",",x/2,')"',' x="',y.offsetX-w/2,'" y="',y.offsetY-x/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?y.source.width:w,'" height="',S==="repeat-x"||S==="no-repeat"?y.source.height:x,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,y,b,w;if(g===v&&g.type==="activeSelection")for(w=v._objects,y=w.length;y--;)b=w[y],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,y,b,w;if(g===v&&g.type==="activeSelection")for(w=v._objects,y=0;y<w.length;y++)b=w[y],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var y=this._activeObject,b,w,x,S,C,k=0;if(g===y&&g.type==="activeSelection")for(C=y._objects,b=0;b<C.length;b++)w=C[b],x=this._objects.indexOf(w),x>0+k&&(S=x-1,c(this._objects,w),this._objects.splice(S,0,w)),k++;else x=this._objects.indexOf(g),x!==0&&(S=this._findNewLowerIndex(g,x,v),c(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,y){var b,w;if(y)for(b=v,w=v-1;w>=0;--w){var x=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(x){b=w;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var y=this._activeObject,b,w,x,S,C,k=0;if(g===y&&g.type==="activeSelection")for(C=y._objects,b=C.length;b--;)w=C[b],x=this._objects.indexOf(w),x<this._objects.length-1-k&&(S=x+1,c(this._objects,w),this._objects.splice(S,0,w)),k++;else x=this._objects.indexOf(g),x!==this._objects.length-1&&(S=this._findNewUpperIndex(g,x,v),c(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,y){var b,w,x;if(y)for(b=v,w=v+1,x=this._objects.length;w<x;++w){var S=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(S){b=w;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var y=v.getContext("2d");if(!y)return null;switch(g){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=f(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=f(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var o=this.canvas.viewportTransform;a.save(),a.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(!!this.shadow){var a=this.canvas,o=this.shadow,c=a.contextTop,h=a.getZoom();a&&a._isRetinaScaling()&&(h*=e.devicePixelRatio),c.shadowColor=o.color,c.shadowBlur=o.blur*h,c.shadowOffsetX=o.offsetX*h,c.shadowOffsetY=o.offsetY*h}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,o,c){var h=o.midPointFrom(c);return a.quadraticCurveTo(o.x,o.y,h.x,h.y),h},onMouseDown:function(a,o){!this.canvas._isMainEvent(o.e)||(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,o){if(!!this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,h=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[h-2],c[h-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var o=new e.Point(a.x,a.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var o=new e.Point(a.x,a.y);return this._addPoint(o)},_render:function(a){var o,c,h=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&h.x===l.x&&h.y===l.y){var u=this.width/1e3;h=new e.Point(h.x,h.y),l=new e.Point(l.x,l.y),h.x-=u,l.x+=u}for(a.moveTo(h.x,h.y),o=1,c=this._points.length;o<c;o++)this._drawSegment(a,h,l),h=this._points[o],l=this._points[o+1];a.lineTo(h.x,h.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var o=this.width/1e3;return e.util.getSmoothPathFromPoints(a,o)},_isEmptySVGPath:function(a){var o=e.util.joinPath(a);return o==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var o=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new e.Shadow(this.shadow)),o},decimatePoints:function(a,o){if(a.length<=2)return a;var c=this.canvas.getZoom(),h=Math.pow(o/c,2),l,u=a.length-1,f=a[0],p=[f],m;for(l=1;l<u-1;l++)m=Math.pow(f.x-a[l].x,2)+Math.pow(f.y-a[l].y,2),m>=h&&(f=a[l],p.push(f));return p.push(a[u]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o)){this.canvas.requestRenderAll();return}var c=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var o=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,o),c.restore()},dot:function(a,o){a.fillStyle=o.fill,a.beginPath(),a.arc(o.x,o.y,o.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,o,c,h=this.points;for(this._saveAndTransform(a),o=0,c=h.length;o<c;o++)this.dot(a,h[o]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,o,c;this.canvas.renderOnAddRemove=!1;var h=[];for(o=0,c=this.points.length;o<c;o++){var l=this.points[o],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),h.push(u)}var f=new e.Group(h);f.canvas=this.canvas,this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var o=new e.Point(a.x,a.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return o.radius=c,o.fill=h,this.points.push(o),o}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],c=0,h=this.sprayChunks.length;c<h;c++)for(var l=this.sprayChunks[c],u=0,f=l.length;u<f;u++){var p=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});o.push(p)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var m=new e.Group(o);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var o={},c,h,l;for(h=0,l=a.length;h<l;h++)c=a[h].left+""+a[h].top,o[c]||(o[c]=a[h]);var u=[];for(c in o)u.push(o[c]);return u},render:function(a){var o=this.canvas.contextTop,c,h;for(o.fillStyle=this.color,this._saveAndTransform(o),c=0,h=a.length;c<h;c++){var l=a[c];typeof l.opacity<"u"&&(o.globalAlpha=l.opacity),o.fillRect(l.x,l.y,l.width,l.width)}o.restore()},_render:function(){var a=this.canvas.contextTop,o,c;for(a.fillStyle=this.color,this._saveAndTransform(a),o=0,c=this.sprayChunks.length;o<c;o++)this.render(this.sprayChunks[o]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var o,c,h,l=this.width/2,u;for(u=0;u<this.density;u++){o=e.util.getRandomInt(a.x-l,a.x+l),c=e.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?h=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var f=new e.Point(o,c);f.width=h,this.randomOpacity&&(f.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(f)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,o=5,c=e.util.createCanvasElement(),h=c.getContext("2d");return c.width=c.height=a+o,h.fillStyle=this.color,h.beginPath(),h.arc(a/2,a/2,a/2,0,Math.PI*2,!1),h.closePath(),h.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var o=this.callSuper("createPath",a),c=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),o}}),function(){var a=e.util.getPointer,o=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,f,p;if(l.length>0&&!this.preserveObjectStacking){f=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)u=this._objects[m],l.indexOf(u)===-1?f.push(u):p.push(u);l.length>1&&(this._activeObject._objects=p),f.push.apply(f,p)}else f=this._objects;return f},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var f=l.calcTransformMatrix(),p=e.util.invertTransform(f),m=this.restorePointerVpt(u);return e.util.transformPoint(m,p)},isTargetTransparent:function(l,u,f){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:u,y:f}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),w=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return w}var v=this.contextCache,y=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=y;var w=e.util.isTransparent(v,u,f,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(f){return l[f]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var f=this.getActiveObjects(),p=this._activeObject;return!u||u&&p&&f.length>1&&f.indexOf(u)===-1&&p!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&p&&p!==u},_shouldCenterTransform:function(l,u,f){if(!!l){var p;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?p=this.centeredScaling||l.centeredScaling:u==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!f:f}},_getOriginFromCorner:function(l,u){var f={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?f.x="right":(u==="mr"||u==="tr"||u==="br")&&(f.x="left"),u==="tl"||u==="mt"||u==="tr"?f.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(f.y="top"),f},_getActionFromCorner:function(l,u,f,p){if(!u||!l)return"drag";var m=p.controls[u];return m.getActionName(f,m,p)},_setupCurrentTransform:function(l,u,f){if(!!u){var p=this.getPointer(l),m=u.__corner,g=u.controls[m],v=f&&m?g.getActionHandler(l,u,g):e.controlsUtils.dragHandler,y=this._getActionFromCorner(f,m,l,u),b=this._getOriginFromCorner(u,m),w=l[this.centeredKey],x={target:u,action:y,actionHandler:v,corner:m,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:p.x-u.left,offsetY:p.y-u.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:o(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:w,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,y,w)&&(x.originX="center",x.originY="center"),x.original.originX=b.x,x.original.originY=b.y,this._currentTransform=x,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,f=new e.Point(u.ex,u.ey),p=e.util.transformPoint(f,this.viewportTransform),m=new e.Point(u.ex+u.left,u.ey+u.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),y=Math.min(p.y,g.y),b=Math.max(p.x,g.x),w=Math.max(p.y,g.y),x=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,y,b-v,w-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=x,y+=x,b-=x,w-=x,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,y,b-v,w-y))},findTarget:function(l,u){if(!this.skipTargetFind){var f=!0,p=this.getPointer(l,f),m=this._activeObject,g=this.getActiveObjects(),v,y,b=c(l),w=g.length>1&&!u||g.length===1;if(this.targets=[],w&&m._findTargetCorner(p,b)||g.length>1&&!u&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,y=this.targets,this.targets=[];else return m;var x=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&x&&v&&x!==v&&(x=v,this.targets=y),x}},_checkTarget:function(l,u,f){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var p=this.isTargetTransparent(u,f.x,f.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var f,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,u):u;if(this._checkTarget(v,g,u)){f=l[p],f.subTargetCheck&&f instanceof e.Group&&(m=this._searchPossibleTargets(f._objects,u),m&&this.targets.push(m));break}}return f},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var f=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,y;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),f.x=f.x-this._offset.left,f.y=f.y-this._offset.top,u||(f=this.restorePointerVpt(f));var b=this.getRetinaScaling();return b!==1&&(f.x/=b,f.y/=b),g===0||v===0?y={width:1,height:1}:y={width:p.width/g,height:p.height/v},{x:f.x*y.width,y:f.y*y.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,f=this.upperCanvasEl;f?f.className="":(f=this._createCanvasElement(),this.upperCanvasEl=f),e.util.addClass(f,"upper-canvas "+l),this.wrapperEl.appendChild(f),this._copyCanvasStyle(u,f),this._applyCanvasStyle(f),this.contextTop=f.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,f=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:f+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=f,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var f=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(f=!0,v.fire("deselected",{e:u,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(f=!0,v.fire("selected",{e:u,target:v}),m.push(v))}),l.length>0&&p.length>0?f&&this.fire("selection:updated",{e:u,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:u,selected:m}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:g})},setActiveObject:function(l,u){var f=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(f,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var f=this._activeObject;if(f){if(f.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),f=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:f,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,f){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,u,f);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],f={};return u.forEach(function(p){f[p]=l[p]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),f}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,f){var p=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,f),this._unwindGroupTransformOnObject(u,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var h in e.StaticCanvas)h!=="prototype"&&(e.Canvas[h]=e.StaticCanvas[h])}(),function(){var a=e.util.addListener,o=e.util.removeListener,c=3,h=2,l=1,u={passive:!1};function f(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,u),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var p=this._getEventPrefix();o(e.document,p+"up",this._onMouseUp),o(e.document,"touchend",this._onTouchEnd,u),o(e.document,p+"move",this._onMouseMove,u),o(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,u),a(e.document,"touchmove",this._onMouseMove,u),o(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();o(m,g+"move",this._onMouseMove,u),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,u)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();o(e.document,"touchend",this._onTouchEnd,u),o(e.document,"touchmove",this._onMouseMove,u);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(o(e.document,g+"up",this._onMouseUp),o(e.document,g+"move",this._onMouseMove,u),a(m,g+"move",this._onMouseMove,u))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,y=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),f(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(f(p,h)){this.fireMiddleClick&&this._handleEvent(p,"up",h,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(!!this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),y=g.actionPerformed),!b){var w=m===this._activeObject;this._maybeGroupObjects(p),y||(y=this._shouldRender(m)||!w&&m===this._activeObject)}var x,S;if(m){if(x=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),y=!0;else{var C=m.controls[x],k=C&&C.getMouseUpHandler(p,m,C);k&&(S=this.getPointer(p),k(p,g,S.x,S.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==x)){var I=g.target&&g.target.controls[g.corner],F=I&&I.getMouseUpHandler(p,m,C);S=S||this.getPointer(p),F&&F(p,g,S.x,S.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),y?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,y={e:m,target:g,subTargets:v};if(this.fire(p,y),g&&g.fire(p,y),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,y);return g},_handleEvent:function(p,m,g,v){var y=this._target,b=this.targets||[],w={e:p,target:y,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(w.currentTarget=this.findTarget(p),w.currentSubTargets=this.targets),this.fire("mouse:"+m,w),y&&y.fire("mouse"+m,w);for(var x=0;x<b.length;x++)b[x].fire("mouse"+m,w)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(f(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(f(p,h)){this.fireMiddleClick&&this._handleEvent(p,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(!!this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),y=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):y&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var w=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=w,m===this._activeObject&&(w||!y)){this._setupCurrentTransform(p,m,b);var x=m.controls[w],g=this.getPointer(p),S=x&&x.getMouseDownHandler(p,m,x);S&&S(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(!!this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(y[w],m,{oldTarget:v[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(y[w],m,{oldTarget:v[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,y,b=g.oldTarget,w,x,S=b!==p,C=g.canvasEvtIn,k=g.canvasEvtOut;S&&(v={e:m,target:p,previousTarget:b},y={e:m,target:b,nextTarget:p}),x=p&&S,w=b&&S,w&&(k&&this.fire(k,y),b.fire(g.evtOut,y)),x&&(C&&this.fire(C,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,y=g.y,b=m.action,w=!1,x=m.actionHandler;x&&(w=x(p,m,v,y)),b==="drag"&&w&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||w},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));y?this.setCursor(this.getCornerCursor(y,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,o=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,h){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&h&&h.selectable&&this.selection&&(l!==h||l.type==="activeSelection")&&!h.onSelect({e:c})},_handleGrouping:function(c,h){var l=this._activeObject;l.__corner||h===l&&(h=this.findTarget(c,!0),!h||!h.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(h,c):this._createActiveSelection(h,c))},_updateActiveSelection:function(c,h){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),h)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,h)},_createActiveSelection:function(c,h){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,h),this._fireSelectionEvents(l,h)},_createGroup:function(c){var h=this._objects,l=h.indexOf(this._activeObject)<h.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var h=this._collectObjects(c),l;h.length===1?this.setActiveObject(h[0],c):h.length>1&&(l=new e.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var h=[],l,u=this._groupSelector.ex,f=this._groupSelector.ey,p=u+this._groupSelector.left,m=f+this._groupSelector.top,g=new e.Point(a(u,p),a(f,m)),v=new e.Point(o(u,p),o(f,m)),y=!this.selectionFullyContained,b=u===p&&f===m,w=this._objects.length;w--&&(l=this._objects[w],!(!(!l||!l.selectable||!l.visible)&&(y&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||y&&l.containsPoint(g,null,!0)||y&&l.containsPoint(v,null,!0))&&(h.push(l),b))););return h.length>1&&(h=h.filter(function(x){return!x.onSelect({e:c})})),h},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var o=a.format||"png",c=a.quality||1,h=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(h,a);return e.util.toDataURL(l,o,c)},toCanvasElement:function(a,o){a=a||1,o=o||{};var c=(o.width||this.width)*a,h=(o.height||this.height)*a,l=this.getZoom(),u=this.width,f=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(o.left||0))*a,v=(m[5]-(o.top||0))*a,y=this.interactive,b=[p,0,0,p,g,v],w=this.enableRetinaScaling,x=e.util.createCanvasElement(),S=this.contextTop;return x.width=c,x.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=m,this.width=u,this.height=f,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=w,this.contextTop=S,x}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,o,c){if(!!a){var h=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),l=this,u=h.clipPath,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(p){l.clear(),l._setBgOverlay(h,function(){u?l._enlivenObjects([u],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,h,p,f,o)}):l.__setupCanvas.call(l,h,p,f,o)})},c),this}},__setupCanvas:function(a,o,c,h){var l=this;o.forEach(function(u,f){l.insertAt(u,f)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),h&&h()},_setBgOverlay:function(a,o){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){o&&o();return}var h=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,h),this.__setBgOverlay("overlayImage",a.overlayImage,c,h),this.__setBgOverlay("backgroundColor",a.background,c,h),this.__setBgOverlay("overlayColor",a.overlay,c,h)},__setBgOverlay:function(a,o,c,h){var l=this;if(!o){c[a]=!0,h&&h();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([o],function(u){l[a]=u[0],c[a]=!0,h&&h()}):this["set"+e.util.string.capitalize(a,!0)](o,function(){c[a]=!0,h&&h()})},_enlivenObjects:function(a,o,c){if(!a||a.length===0){o&&o([]);return}e.util.enlivenObjects(a,function(h){o&&o(h)},null,c)},_toDataURL:function(a,o){this.clone(function(c){o(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,o,c){this.clone(function(h){c(h.toDataURLWithMultiplier(a,o))})},clone:function(a,o){var c=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(h){h.loadFromJSON(c,function(){a&&a(h)})})},cloneWithoutData:function(a){var o=e.util.createCanvasElement();o.width=this.width,o.height=this.height;var c=new e.Canvas(o);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l=o.util.toFixed,u=o.util.string.capitalize,f=o.util.degreesToRadians,p=!o.isLikelyNode,m=2;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=o.perfLimitSizeTotal,y=g.width,b=g.height,w=o.maxCacheSideLimit,x=o.minCacheSideLimit;if(y<=w&&b<=w&&y*b<=v)return y<x&&(g.width=x),b<x&&(g.height=x),g;var S=y/b,C=o.util.limitDimsByArea(S,v),k=o.util.capValue,I=k(x,C.x,w),F=k(x,C.y,w);return y>I&&(g.zoomX/=y/I,g.width=I,g.capped=!0),b>F&&(g.zoomY/=b/F,g.height=F,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:y+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:y,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,y=g._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),x=o.minCacheSideLimit,S=w.width,C=w.height,k,I,F=w.zoomX,j=w.zoomY,q=S!==this.cacheWidth||C!==this.cacheHeight,te=this.zoomX!==F||this.zoomY!==j,G=q||te,Y=0,ie=0,ce=!1;if(q){var H=this._cacheCanvas.width,T=this._cacheCanvas.height,P=S>H||C>T,D=(S<H*.9||C<T*.9)&&H>x&&T>x;ce=P||D,P&&!w.capped&&(S>x||C>x)&&(Y=S*.1,ie=C*.1)}return this instanceof o.Text&&this.path&&(G=!0,ce=!0,Y+=this.getHeightOfLine(0)*this.zoomX,ie+=this.getHeightOfLine(0)*this.zoomY),G?(ce?(b.width=Math.ceil(S+Y),b.height=Math.ceil(C+ie)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),k=w.x/2,I=w.y/2,this.cacheTranslationX=Math.round(b.width/2-k)+k,this.cacheTranslationY=Math.round(b.height/2-I)+I,this.cacheWidth=S,this.cacheHeight=C,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,j),this.zoomX=F,this.zoomY=j,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,y=this.calcTransformMatrix(!v);g.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(g){var v=o.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(g),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,y,g),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=o.util.getKlass(g.type).prototype,y=v.stateProperties;return y.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,y=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();v*=b*w,y*=b*w}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var y=g==="scaleX"||g==="scaleY",b=this[g]!==v,w=!1;return y&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof o.Shadow)?v=new o.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var y=o.util.invertTransform(this.calcTransformMatrix());g.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var y=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=y,this.stroke=b},_drawClipPath:function(g,v){!v||(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(g){if(!!this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var y=v.stroke;y&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(g,y):(g.strokeStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,y)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var y=v.fill;y&&(y.toLive?(g.fillStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=y)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var y=this.getViewportTransform(),b=this.calcTransformMatrix(),w,x,S;v=v||{},x=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,S=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=o.util.multiplyTransformMatrices(y,b),w=o.util.qrDecompose(b),g.save(),g.translate(w.translateX,w.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(w.angle-=180),g.rotate(f(this.group?w.angle:this.angle)),v.forActiveSelection||this.group?x&&this.drawBordersInGroup(g,w,v):x&&this.drawBorders(g,v),S&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(!!this.shadow){var v=this.shadow,y=this.canvas,b,w=y&&y.viewportTransform[0]||1,x=y&&y.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),y&&y._isRetinaScaling()&&(w*=o.devicePixelRatio,x*=o.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*o.browserShadowBlurConstant*(w+x)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*w*b.scaleX,g.shadowOffsetY=v.offsetY*x*b.scaleY}},_removeShadow:function(g){!this.shadow||(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,w=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,w):g.transform(1,0,0,1,b,w),y&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:b,offsetY:w}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){!this.fill||(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),b=o.util.createCanvasElement(),w,x=this.canvas.getRetinaScaling(),S=y.x/this.scaleX/x,C=y.y/this.scaleY/x;b.width=S,b.height=C,w=b.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(S,0),w.lineTo(S,C),w.lineTo(0,C),w.closePath(),w.translate(S/2,C/2),w.scale(y.zoomX/this.scaleX/x,y.zoomY/this.scaleY/x),this._applyPatternGradientTransform(w,v),w.fillStyle=v.toLive(g),w.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(x*this.scaleX/y.zoomX,x*this.scaleY/y.zoomY),g.strokeStyle=w.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=o.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,g):o.Object._fromObject("Object",y,g)},cloneAsImage:function(g,v){var y=this.toCanvasElement(v);return g&&g(new o.Image(y)),this},toCanvasElement:function(g){g||(g={});var v=o.util,y=v.saveObjectTransform(this),b=this.group,w=this.shadow,x=Math.abs,S=(g.multiplier||1)*(g.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var C=o.util.createCanvasElement(),k=this.getBoundingRect(!0,!0),I=this.shadow,F,j={x:0,y:0},q,te,G;I&&(q=I.blur,I.nonScaling?F={scaleX:1,scaleY:1}:F=this.getObjectScaling(),j.x=2*Math.round(x(I.offsetX)+q)*x(F.scaleX),j.y=2*Math.round(x(I.offsetY)+q)*x(F.scaleY)),te=k.width+j.x,G=k.height+j.y,C.width=Math.ceil(te),C.height=Math.ceil(G);var Y=new o.StaticCanvas(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(Y.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(Y.width/2,Y.height/2),"center","center");var ie=this.canvas;Y.add(this);var ce=Y.toCanvasElement(S||1,g);return this.shadow=w,this.set("canvas",ie),b&&(this.group=b),this.set(y).setCoords(),Y._objects=[],Y.dispose(),Y=null,ce},toDataURL:function(g){return g||(g={}),o.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var y=new o.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(y=o.util.rotatePoint(y,b,f(-this.angle))),{x:y.x-b.x,y:y.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),c(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(g,v,y,b){var w=o[g];v=h(v,!0),o.util.enlivenPatterns([v.fill,v.stroke],function(x){typeof x[0]<"u"&&(v.fill=x[0]),typeof x[1]<"u"&&(v.stroke=x[1]),o.util.enlivenObjectEnlivables(v,v,function(){var S=b?new w(v[b],v):new w(v);y&&y(S)})})},o.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,o={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(h,l,u,f,p){var m=h.x,g=h.y,v,y,b;return typeof l=="string"?l=o[l]:l-=.5,typeof f=="string"?f=o[f]:f-=.5,v=f-l,typeof u=="string"?u=c[u]:u-=.5,typeof p=="string"?p=c[p]:p-=.5,y=p-u,(v||y)&&(b=this._getTransformedDimensions(),m=h.x+v*b.x,g=h.y+y*b.y),new e.Point(m,g)},translateToCenterPoint:function(h,l,u){var f=this.translateToGivenOrigin(h,l,u,"center","center");return this.angle?e.util.rotatePoint(f,h,a(this.angle)):f},translateToOriginPoint:function(h,l,u){var f=this.translateToGivenOrigin(h,"center","center",l,u);return this.angle?e.util.rotatePoint(f,h,a(this.angle)):f},getCenterPoint:function(){var h=new e.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,l)},toLocalPoint:function(h,l,u){var f=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof u<"u"?p=this.translateToGivenOrigin(f,"center","center",l,u):p=new e.Point(this.left,this.top),m=new e.Point(h.x,h.y),this.angle&&(m=e.util.rotatePoint(m,f,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(h,l,u){var f=this.translateToCenterPoint(h,l,u),p=this.translateToOriginPoint(f,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(h){var l=a(this.angle),u=this.getScaledWidth(),f=e.util.cos(l)*u,p=e.util.sin(l)*u,m,g;typeof this.originX=="string"?m=o[this.originX]:m=this.originX-.5,typeof h=="string"?g=o[h]:g=h-.5,this.left+=f*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var o=e.util,c=o.degreesToRadians,h=o.multiplyTransformMatrices,l=o.transformPoint;o.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,f){return f?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,f){return a(this._getCoords(u,f))},intersectsWithRect:function(u,f,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,u,f);return v.status==="Intersection"},intersectsWithObject:function(u,f,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(f,p),u.getCoords(f,p));return m.status==="Intersection"||u.isContainedWithinObject(this,f,p)||this.isContainedWithinObject(u,f,p)},isContainedWithinObject:function(u,f,p){for(var m=this.getCoords(f,p),g=f?u.aCoords:u.lineCoords,v=0,y=u._getImageLines(g);v<4;v++)if(!u.containsPoint(m[v],y))return!1;return!0},isContainedWithinRect:function(u,f,p,m){var g=this.getBoundingRect(p,m);return g.left>=u.x&&g.left+g.width<=f.x&&g.top>=u.y&&g.top+g.height<=f.y},containsPoint:function(u,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),y=this._findCrossPoints(u,v);return y!==0&&y%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var f=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,u);return m.some(function(g){return g.x<=p.x&&g.x>=f.x&&g.y<=p.y&&g.y>=f.y})||this.intersectsWithRect(f,p,!0,u)?!0:this._containsCenterOfCanvas(f,p,u)},_containsCenterOfCanvas:function(u,f,p){var m={x:(u.x+f.x)/2,y:(u.y+f.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var f=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(f,p,!0,u))return!0;var m=this.getCoords(!0,u).every(function(g){return(g.x>=p.x||g.x<=f.x)&&(g.y>=p.y||g.y<=f.y)});return m&&this._containsCenterOfCanvas(f,p,u)},_getImageLines:function(u){var f={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return f},_findCrossPoints:function(u,f){var p,m,g,v,y,b=0,w;for(var x in f)if(w=f[x],!(w.o.y<u.y&&w.d.y<u.y)&&!(w.o.y>=u.y&&w.d.y>=u.y)&&(w.o.x===w.d.x&&w.o.x>=u.x?y=w.o.x:(p=0,m=(w.d.y-w.o.y)/(w.d.x-w.o.x),g=u.y-p*u.x,v=w.o.y-m*w.o.x,y=-(g-v)/(p-m)),y>=u.x&&(b+=1),b===2))break;return b},getBoundingRect:function(u,f){var p=this.getCoords(u,f);return o.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,f){var p=this.getBoundingRect(f).width/this.getScaledWidth();return this.scale(u/this.width/p)},scaleToHeight:function(u,f){var p=this.getBoundingRect(f).height/this.getScaledHeight();return this.scale(u/this.height/p)},calcLineCoords:function(){var u=this.getViewportTransform(),f=this.padding,p=c(this.angle),m=o.cos(p),g=o.sin(p),v=m*f,y=g*f,b=v+y,w=v-y,x=this.calcACoords(),S={tl:l(x.tl,u),tr:l(x.tr,u),bl:l(x.bl,u),br:l(x.br,u)};return f&&(S.tl.x-=w,S.tl.y-=b,S.tr.x+=b,S.tr.y-=w,S.bl.x-=b,S.bl.y+=w,S.br.x+=w,S.br.y+=b),S},calcOCoords:function(){var u=this._calcRotateMatrix(),f=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=h(p,f),g=h(m,u),g=h(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(b,w,x){y[w]=b.positionHandler(v,g,x)}),y},calcACoords:function(){var u=this._calcRotateMatrix(),f=this._calcTranslateMatrix(),p=h(f,u),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var f="_",p="";return!u&&this.group&&(p=this.group.transformMatrixKey(u)+f),p+this.top+f+this.left+f+this.scaleX+f+this.scaleY+f+this.skewX+f+this.skewY+f+this.angle+f+this.originX+f+this.originY+f+this.width+f+this.height+f+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var f=this.calcOwnMatrix();if(u||!this.group)return f;var p=this.transformMatrixKey(u),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(f=h(this.group.calcTransformMatrix(!1),f)),m.key=p,m.value=f,f)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),f=this.ownMatrixCache||(this.ownMatrixCache={});if(f.key===u)return f.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return f.key=u,f.value=o.composeMatrix(m),f.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,f=this.width+u,p=this.height+u;return{x:f,y:p}},_getTransformedDimensions:function(u,f){typeof u>"u"&&(u=this.skewX),typeof f>"u"&&(f=this.skewY);var p,m,g,v=u===0&&f===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var y=o.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:f});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(u,f){return this.strokeUniform?{x:u+this.strokeWidth,y:f+this.strokeWidth}:{x:u,y:f}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),f=this._getTransformedDimensions(),p=l(f,u,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,h){if(h){if(h.toLive)return c+": url(#SVGID_"+h.id+"); ";var l=new e.Color(h),u=c+": "+l.toRgb()+"; ",f=l.getAlpha();return f!==1&&(u+=c+"-opacity: "+f.toString()+"; "),u}else return c+": none; "}var o=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var h=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",f=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),w=a("fill",this.fill),x=a("stroke",this.stroke);return[x,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",f,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",w,"fill-rule: ",h,"; ","opacity: ",v,";",b,y].join("")},getSvgSpanStyles:function(c,h){var l="; ",f=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",f=f,p=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",g=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?a("fill",c.fill):"",y=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),w=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[y,u,f,p,m,g,b,v,w,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(h){return c[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,h){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(h||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var h=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,h),'" y="',o(-this.height/2,h),'" width="',o(this.width,h),'" height="',o(this.height,h),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,h){h=h||{};var l=h.reviver,u=h.additionalTransform||"",f=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=f,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,h){h=h||{};var l=h.noStyle,u=h.reviver,f=l?"":'style="'+this.getSvgStyles()+'" ',p=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,y=this.stroke,b=this.fill,w=this.shadow,x,S=[],C,k=c.indexOf("COMMON_PARTS"),I=h.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,C='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(u)+`</clipPath>
`),v&&S.push("<g ",p,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),x=[f,g,l?"":this.addPaintOrder()," ",I?'transform="'+I+'" ':""].join(""),c[k]=x,b&&b.toLive&&S.push(b.toSVG(this)),y&&y.toLive&&S.push(y.toSVG(this)),w&&S.push(w.toSVG(this)),m&&S.push(C),S.push(c.join("")),S.push(`</g>
`),v&&S.push(`</g>
`),u?u(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,o="stateProperties";function c(l,u,f){var p={},m=!0;f.forEach(function(g){p[g]=l[g]}),a(l[u],p,m)}function h(l,u,f){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!h(l[p],u[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!u||typeof u!="object"||!f&&g.length!==Object.keys(u).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!h(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||o;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!h(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||o,f="_"+u;return this[f]?(c(this,f,this[u]),l&&l.stateProperties&&c(this,f,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||o;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(o,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=o.x,l=o.y,u,f,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(f=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),u=this._findCrossPoints({x:h,y:l},f),u!==0&&u%2===1))return this.__corner=g,g;return!1},forEachControl:function(o){for(var c in this.controls)o(this.controls[c],c,this)},_setCornerCoords:function(){var o=this.oCoords;for(var c in o){var h=this.controls[c];o[c].corner=h.calcCornerCoords(this.angle,this.cornerSize,o[c].x,o[c].y,!1),o[c].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,o[c].x,o[c].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var c=this.getCenterPoint(),h=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return o.translate(c.x,c.y),o.scale(1/l[0],1/l[3]),o.rotate(a(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-h.x/2,-h.y/2,h.x,h.y),o.restore(),this},drawBorders:function(o,c){c=c||{};var h=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=h.x+l,f=h.y+l,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return o.save(),o.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeRect(-u/2,-f/2,u,f),p&&(o.beginPath(),this.forEachControl(function(g,v,y){g.withConnection&&g.getVisibility(y,v)&&(m=!0,o.moveTo(g.x*u,g.y*f),o.lineTo(g.x*u+g.offsetX,g.y*f+g.offsetY))}),m&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,c,h){h=h||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,f=this.strokeUniform,p=this.borderScaleFactor,m=l.x+u*(f?this.canvas.getZoom():c.scaleX)+p,g=l.y+u*(f?this.canvas.getZoom():c.scaleY)+p;return o.save(),this._setLineDash(o,h.borderDashArray||this.borderDashArray),o.strokeStyle=h.borderColor||this.borderColor,o.strokeRect(-m/2,-g/2,m,g),o.restore(),this},drawControls:function(o,c){c=c||{},o.save();var h=this.canvas.getRetinaScaling(),l,u;return o.setTransform(h,0,0,h,0,0),o.strokeStyle=o.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(f,p,m){u=m.oCoords[p],f.getVisibility(m,p)&&(l&&(u=e.util.transformPoint(u,l)),f.render(o,u.x,u.y,c,m))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=c,this},setControlsVisibility:function(o){o||(o={});for(var c in o)this.setControlVisible(c,o[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(f){a.set("left",f),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),h()}})},fxCenterObjectV:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(f){a.set("top",f),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),h()}})},fxRemove:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(f){a.set("opacity",f),u.requestRenderAll(),l()},onComplete:function(){u.remove(a),h()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],o,c,h=[];for(o in arguments[0])a.push(o);for(var l=0,u=a.length;l<u;l++)o=a[l],c=l!==u-1,h.push(this._animate(o,arguments[0][o],arguments[1],c));return h}else return this._animate.apply(this,arguments)},_animate:function(a,o,c,h){var l=this,u;o=o.toString(),c?c=e.util.object.clone(c):c={},~a.indexOf(".")&&(u=a.split("."));var f=l.colorProperties.indexOf(a)>-1||u&&l.colorProperties.indexOf(u[1])>-1,p=u?this.get(u[0])[u[1]]:this.get(a);"from"in c||(c.from=p),f||(~o.indexOf("=")?o=p+parseFloat(o.replace("=","")):o=parseFloat(o));var m={target:this,startValue:c.from,endValue:o,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,y){return c.abort.call(l,g,v,y)},onChange:function(g,v,y){u?l[u[0]][u[1]]=g:l.set(a,g),!h&&c.onChange&&c.onChange(g,v,y)},onComplete:function(g,v,y){h||(l.setCoords(),c.onComplete&&c.onComplete(g,v,y))}};return f?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(o.Line){o.warn("fabric.Line is already defined");return}o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(f,p){f||(f=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",f[0]),this.set("y1",f[1]),this.set("x2",f[2]),this.set("y2",f[3]),this._setWidthHeight(p)},_setWidthHeight:function(f){f||(f={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in f?f.left:this._getLeftToOriginX(),this.top="top"in f?f.top:this._getTopToOriginY()},_set:function(f,p){return this.callSuper("_set",f,p),typeof l[f]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(f){f.beginPath();var p=this.calcLinePoints();f.moveTo(p.x1,p.y1),f.lineTo(p.x2,p.y2),f.lineWidth=this.strokeWidth;var m=f.strokeStyle;f.strokeStyle=this.stroke||f.fillStyle,this.stroke&&this._renderStroke(f),f.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(f){return c(this.callSuper("toObject",f),this.calcLinePoints())},_getNonTransformedDimensions:function(){var f=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(f.y-=this.strokeWidth),this.height===0&&(f.x-=this.strokeWidth)),f},calcLinePoints:function(){var f=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=f*this.width*.5,g=p*this.height*.5,v=f*this.width*-.5,y=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:y}},_toSVG:function(){var f=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',f.x1,'" y1="',f.y1,'" x2="',f.x2,'" y2="',f.y2,`" />
`]}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(f,p,m){m=m||{};var g=o.parseAttributes(f,o.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new o.Line(v,c(g,m)))},o.Line.fromObject=function(f,p){function m(v){delete v.points,p&&p(v)}var g=h(f,!0);g.points=[f.x1,f.y1,f.x2,f.y2],o.Object._fromObject("Line",g,m,"points")};function u(f,p){var m=f.origin,g=f.axis1,v=f.axis2,y=f.dimension,b=p.nearest,w=p.center,x=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case w:return Math.min(this.get(g),this.get(v))+.5*this.get(y);case x:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians;if(o.Circle){o.warn("fabric.Circle is already defined.");return}o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,f=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+f+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,y=o.util.cos(m)*v,b=o.util.sin(m)*v,w=o.util.cos(g)*v,x=o.util.sin(g)*v,S=p>180?"1":"0";l=['<path d="M '+y+" "+b," A "+v+" "+v," 0 ",+S+" 1"," "+w+" "+x,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(l,u){var f=o.parseAttributes(l,o.Circle.ATTRIBUTE_NAMES);if(!h(f))throw new Error("value of `r` attribute is required and can not be negative");f.left=(f.left||0)-f.radius,f.top=(f.top||0)-f.radius,u(new o.Circle(f))};function h(l){return"radius"in l&&l.radius>=0}o.Circle.fromObject=function(l,u){o.Object._fromObject("Circle",l,u)}}(t),function(a){var o=a.fabric||(a.fabric={});if(o.Triangle){o.warn("fabric.Triangle is already defined");return}o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(c){var h=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-h,l),c.lineTo(0,-l),c.lineTo(h,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,h=this.height/2,l=[-c+" "+h,"0 "+-h,c+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),o.Triangle.fromObject=function(c,h){return o.Object._fromObject("Triangle",c,h)}}(t),function(a){var o=a.fabric||(a.fabric={}),c=Math.PI*2;if(o.Ellipse){o.warn("fabric.Ellipse is already defined.");return}o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,l){switch(this.callSuper("_set",h,l),h){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,c,!1),h.restore(),this._renderPaintInOrder(h)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(h,l){var u=o.parseAttributes(h,o.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new o.Ellipse(u))},o.Ellipse.fromObject=function(h,l){o.Object._fromObject("Ellipse",h,l)}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,f=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||u!==0,y=1-.5522847498;h.beginPath(),h.moveTo(m+l,g),h.lineTo(m+f-l,g),v&&h.bezierCurveTo(m+f-y*l,g,m+f,g+y*u,m+f,g+u),h.lineTo(m+f,g+p-u),v&&h.bezierCurveTo(m+f,g+p-y*u,m+f-y*l,g+p,m+f-l,g+p),h.lineTo(m+l,g+p),v&&h.bezierCurveTo(m+y*l,g+p,m,g+p-y*u,m,g+p-u),h.lineTo(m,g+u),v&&h.bezierCurveTo(m,g+y*u,m+y*l,g,m+l,g),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(h,l,u){if(!h)return l(null);u=u||{};var f=o.parseAttributes(h,o.Rect.ATTRIBUTE_NAMES);f.left=f.left||0,f.top=f.top||0,f.height=f.height||0,f.width=f.width||0;var p=new o.Rect(c(u?o.util.object.clone(u):{},f));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},o.Rect.fromObject=function(h,l){return o.Object._fromObject("Rect",h,l)}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.array.min,l=o.util.array.max,u=o.util.toFixed,f=o.util.projectStrokeOnPoints;if(o.Polyline){o.warn("fabric.Polyline is already defined");return}o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return f(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=h(p,"x")||0,g=h(p,"y")||0,v=l(p,"x")||0,y=l(p,"y")||0,b=v-m,w=y-g;return{left:m,top:g,width:b,height:w}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=o.Object.NUM_FRACTION_DIGITS,y=0,b=this.points.length;y<b;y++)p.push(u(this.points[y].x-m,v),",",u(this.points[y].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,y=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-y);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-y);return!0},_render:function(p){!this.commonRender(p)||this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var y=o.parsePointsAttribute(m.getAttribute("points")),b=o.parseAttributes(m,o[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new o[p](y,c(b,v)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(p,m){return o.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.projectStrokeOnPoints;if(o.Polygon){o.warn("fabric.Polygon is already defined");return}o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(h){!this.commonRender(h)||(h.closePath(),this._renderPaintInOrder(h))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(h,l){o.Object._fromObject("Polygon",h,l,"points")}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,h=o.util.array.max,l=o.util.object.extend,u=o.util.object.clone,f=o.util.toFixed;if(o.Path){o.warn("fabric.Path is already defined");return}o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=u(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=o.util.makePathSimpler(Array.isArray(p)?p:o.util.parsePath(p)),o.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,y=0,b=0,w=0,x=0,S=-this.pathOffset.x,C=-this.pathOffset.y;p.beginPath();for(var k=0,I=this.path.length;k<I;++k)switch(m=this.path[k],m[0]){case"L":y=m[1],b=m[2],p.lineTo(y+S,b+C);break;case"M":y=m[1],b=m[2],g=y,v=b,p.moveTo(y+S,b+C);break;case"C":y=m[5],b=m[6],w=m[3],x=m[4],p.bezierCurveTo(m[1]+S,m[2]+C,w+S,x+C,y+S,b+C);break;case"Q":p.quadraticCurveTo(m[1]+S,m[2]+C,m[3]+S,m[4]+C),y=m[3],b=m[4],w=m[1],x=m[2];break;case"z":case"Z":y=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=o.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=o.Object.NUM_FRACTION_DIGITS;return" translate("+f(-this.pathOffset.x,p)+", "+f(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,y=0,b=0,w=0,x,S=0,C=this.path.length;S<C;++S){switch(g=this.path[S],g[0]){case"L":b=g[1],w=g[2],x=[];break;case"M":b=g[1],w=g[2],v=b,y=w,x=[];break;case"C":x=o.util.getBoundsOfCurve(b,w,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],w=g[6];break;case"Q":x=o.util.getBoundsOfCurve(b,w,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],w=g[4];break;case"z":case"Z":b=v,w=y;break}x.forEach(function(G){p.push(G.x),m.push(G.y)}),p.push(b),m.push(w)}var k=c(p)||0,I=c(m)||0,F=h(p)||0,j=h(m)||0,q=F-k,te=j-I;return{left:k,top:I,width:q,height:te}}}),o.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;o.loadSVGFromURL(g,function(v){var y=v[0];y.setOptions(p),p.clipPath?o.util.enlivenObjects([p.clipPath],function(b){y.clipPath=b[0],m&&m(y)}):m&&m(y)})}else o.Object._fromObject("Path",p,m,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(p,m,g){var v=o.parseAttributes(p,o.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new o.Path(v.d,l(v,g)))}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,h=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,f){u=u||{},this._objects=[],f&&this.callSuper("initialize",u),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(f)this._updateObjectsACoords();else{var m=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),f=this._objects.length;f--;)this._updateObjectCoords(this._objects[f],u)},_updateObjectCoords:function(l,u){var f=l.left,p=l.top,m=!0;l.set({left:f-u.x,top:p-u.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),l&&(u&&o.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var f=this._objects.length;if(this.useSetOnGroup)for(;f--;)this._objects[f].setOnGroup(l,u);if(l==="canvas")for(;f--;)this._objects[f]._set(l,u);o.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,f=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=u;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=o.Object.prototype.toObject.call(this,l);return p.objects=f,p},toDatalessObject:function(l){var u,f=this.sourcePath;if(f)u=f;else{var p=this.includeDefaultValues;u=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var y=g.toDatalessObject(l);return g.includeDefaultValues=v,y})}var m=o.Object.prototype.toDatalessObject.call(this,l);return m.objects=u,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=o.Object.prototype.shouldCache.call(this);if(l){for(var u=0,f=this._objects.length;u<f;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,f=this._objects.length;u<f;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,f=this._objects.length;u<f;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){o.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var f=this.toObject();delete f.objects;var p=new o.ActiveSelection([]);return p.set(f),p.type="activeSelection",u.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,u.add(m)}),p.canvas=u,p._objects=l,u._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],f=[],p,m,g,v=["tr","br","bl","tl"],y=0,b=this._objects.length,w,x=v.length;y<b;++y){for(p=this._objects[y],g=p.calcACoords(),w=0;w<x;w++)m=v[w],u.push(g[m].x),f.push(g[m].y);p.aCoords=g}this._getBounds(u,f,l)},_getBounds:function(l,u,f){var p=new o.Point(c(l),c(u)),m=new o.Point(h(l),h(u)),g=p.y||0,v=p.x||0,y=m.x-p.x||0,b=m.y-p.y||0;this.width=y,this.height=b,f||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],f=0,p=this._objects.length;f<p;f++)u.push("		",this._objects[f].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],f=0,p=this._objects.length;f<p;f++)u.push("	",this._objects[f].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),o.Group.fromObject=function(l,u){var f=l.objects,p=o.util.object.clone(l,!0);if(delete p.objects,typeof f=="string"){o.loadSVGFromURL(f,function(m){var g=o.util.groupSVGElements(m,l,f),v=p.clipPath;delete p.clipPath,g.set(p),v?o.util.enlivenObjects([v],function(y){g.clipPath=y[0],u&&u(g)}):u&&u(g)});return}o.util.enlivenObjects(f,function(m){o.util.enlivenObjectEnlivables(l,p,function(){u&&u(new o.Group(m,p,!0))})})})}(t),function(a){var o=a.fabric||(a.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(c,h){h=h||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var h=o.Object.prototype.toObject.call(this),l=new o.Group([]);if(delete h.type,l.set(h),c.forEach(function(f){f.canvas.remove(f),f.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,h,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,h),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,f=this._objects.length;u<f;u++)this._objects[u]._renderControls(c,l);c.restore()}}),o.ActiveSelection.fromObject=function(c,h){o.util.enlivenObjects(c.objects,function(l){delete c.objects,h&&h(new o.ActiveSelection(l,c,!0))})})}(t),function(a){var o=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,h){h||(h={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",h),this._initElement(c,h)},getElement:function(){return this._element||{}},setElement:function(c,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var h=e.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-h,-l),c.lineTo(h,-l),c.lineTo(h,l),c.lineTo(-h,l),c.lineTo(-h,-l),c.closePath()}},toObject:function(c){var h=[];this.filters.forEach(function(u){u&&h.push(u.toObject())});var l=o(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],h=[],l,u=this._element,f=-this.width/2,p=-this.height/2,m="",g="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+f+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',f-this.cropX,'" y="',p-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,l=["	<rect ",'x="',f,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?c=c.concat(l,h):c=c.concat(h,l),c},getSrc:function(c){var h=c?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(c,h,l){return e.util.loadImage(c,function(u,f){this.setElement(u,l),this._setWidthHeight(),h&&h(this,f)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,h=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,f=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>h&&f>h){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=f;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,y=p.height;m.width=v,m.height=y,this._element=m,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=f,e.filterBackend.applyFilters([c],p,v,y,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,l=h.naturalWidth||h.width,u=h.naturalHeight||h.height;if(this._element===this._originalElement){var f=e.util.createCanvasElement();f.width=l,f.height=u,this._element=f,this._filteredEl=f}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var h=this._element;if(!!h){var l=this._filterScalingX,u=this._filterScalingY,f=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),y=g(this.cropY,0),b=h.naturalWidth||h.width,w=h.naturalHeight||h.height,x=v*l,S=y*u,C=m(f*l,b-x),k=m(p*u,w-S),I=-f/2,F=-p/2,j=m(f,b/l-v),q=m(p,w/u-y);h&&c.drawImage(h,x,S,C,k,I,F,j,q)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,h){this.setElement(e.util.getById(c),h),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,h){c&&c.length?e.util.enlivenObjects(c,function(l){h&&h(l)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(c){c||(c={});var h=this.getElement();this.width=c.width||h.naturalWidth||h.width||0,this.height=c.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,l=this._element.height,u=1,f=1,p=0,m=0,g=0,v=0,y,b=this.width,w=this.height,x={width:b,height:w};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=f=e.util.findScaleToFit(this._element,x),y=(b-h*u)/2,c.alignX==="Min"&&(p=-y),c.alignX==="Max"&&(p=y),y=(w-l*f)/2,c.alignY==="Min"&&(m=-y),c.alignY==="Max"&&(m=y)),c.meetOrSlice==="slice"&&(u=f=e.util.findScaleToCover(this._element,x),y=h-b/u,c.alignX==="Mid"&&(g=y/2),c.alignX==="Max"&&(g=y),y=l-w/f,c.alignY==="Mid"&&(v=y/2),c.alignY==="Max"&&(v=y),h=b/u,l=w/f)):(u=b/h,f=w/l),{width:h,height:l,scaleX:u,scaleY:f,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,h){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,f){if(f){h&&h(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var g=new e.Image(u,l);h(g,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,h,l){e.util.loadImage(c,function(u,f){h&&h(new e.Image(u,l),f)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,h,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],h,o(l?e.util.object.clone(l):{},u))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var o=function(){},c=a.onComplete||o,h=a.onChange||o,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),h()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,h){var l="precision "+h+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),l=h.getContext("webgl")||h.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var f=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,f[p])){e.webGlPrecision=f[p];break}}return this.isSupported=u,u},e.WebglFilterBackend=o;function o(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.prototype={tileSize:2048,resources:{},setupGLContext:function(c,h){this.dispose(),this.createWebGLCanvas(c,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,h)},chooseFastestCopyGLTo2DMethod:function(c,h){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var f=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(!!(l&&u&&f&&p)){var m=e.util.createCanvasElement(),g=new ArrayBuffer(c*h*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=d;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:h,targetCanvas:m},y,b,w;m.width=c,m.height=h,y=window.performance.now(),s.call(v,this.gl,v),b=window.performance.now()-y,y=window.performance.now(),d.call(v,this.gl,v),w=window.performance.now()-y,b>w?(this.imageBuffer=g,this.copyGLTo2D=d):this.copyGLTo2D=s}},createWebGLCanvas:function(c,h){var l=e.util.createCanvasElement();l.width=c,l.height=h;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},f=l.getContext("webgl",u);f||(f=l.getContext("experimental-webgl",u)),f&&(f.clearColor(0,0,0,0),this.canvas=l,this.gl=f)},applyFilters:function(c,h,l,u,f,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,h));var v={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:m,sourceTexture:this.createTexture(m,l,u,!g&&h),targetTexture:this.createTexture(m,l,u),originalTexture:g||this.createTexture(m,l,u,!g&&h),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:f},y=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,y),c.forEach(function(b){b&&b.applyTo(v)}),i(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(y),f.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,h,l,u,f){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,f||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,l,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,h){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,h={renderer:"",vendor:""};if(!c)return h;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),f=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(h.renderer=u.toLowerCase()),f&&(h.vendor=f.toLowerCase())}return this.gpuInfo=h,h}}}();function i(a){var o=a.targetCanvas,c=o.width,h=o.height,l=a.destinationWidth,u=a.destinationHeight;(c!==l||h!==u)&&(o.width=l,o.height=u)}function s(a,o){var c=a.canvas,h=o.targetCanvas,l=h.getContext("2d");l.translate(0,h.height),l.scale(1,-1);var u=c.height-h.height;l.drawImage(c,0,u,h.width,h.height,0,0,h.width,h.height)}function d(a,o){var c=o.targetCanvas,h=c.getContext("2d"),l=o.destinationWidth,u=o.destinationHeight,f=l*u*4,p=new Uint8Array(this.imageBuffer,0,f),m=new Uint8ClampedArray(this.imageBuffer,0,f);a.readPixels(0,0,l,u,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,u);h.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=o;function o(){}o.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,h,l,u,f){var p=f.getContext("2d");p.drawImage(h,0,0,l,u);var m=p.getImageData(0,0,l,u),g=p.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:m,originalEl:h,originalImageData:g,canvasEl:f,ctx:p,filterBackend:this};return c.forEach(function(y){y.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(f.width=v.imageData.width,f.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var o in a)this[o]=a[o]},createProgram:function(a,o,c){o=o||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(o=o.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var h=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(h,c),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(h));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,o),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var u=a.createProgram();if(a.attachShader(u,h),a.attachShader(u,l),a.linkProgram(u),!a.getProgramParameter(u,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(u));var f=this.getAttributeLocations(a,u),p=this.getUniformLocations(a,u)||{};return p.uStepW=a.getUniformLocation(u,"uStepW"),p.uStepH=a.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:f,uniformLocations:p}},getAttributeLocations:function(a,o){return{aPosition:a.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,o,c){var h=o.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var o=a.context,c,h;a.passes>1?(c=a.destinationWidth,h=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==h)&&(o.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(o,c,h)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,a.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(a){a.passes--,a.pass++;var o=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=o},isNeutralState:function(){var a=this.mainParameter,o=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(o[a])){for(var c=o[a].length;c--;)if(this[a][c]!==o[a][c])return!1;return!0}else return o[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var o=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?o.bindTexture(o.TEXTURE_2D,a.originalTexture):o.bindTexture(o.TEXTURE_2D,a.sourceTexture),o.useProgram(c.program),this.sendAttributeData(o,c.attributeLocations,a.aPosition),o.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),o.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(o,c.uniformLocations),o.viewport(0,0,a.destinationWidth,a.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,o,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,o),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,o){a.activeTexture(o),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var o=document.createElement("canvas");o.width=a.sourceWidth,o.height=a.sourceHeight,a.helpLayer=o}},toObject:function(){var a={type:this.type},o=this.mainParameter;return o&&(a[o]=this[o]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,o){var c=new e.Image.filters[a.type](a);return o&&o(c),c},function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.ColorMatrix=h(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,f=u.data,p=f.length,m=this.matrix,g,v,y,b,w,x=this.colorsOnly;for(w=0;w<p;w+=4)g=f[w],v=f[w+1],y=f[w+2],x?(f[w]=g*m[0]+v*m[1]+y*m[2]+m[4]*255,f[w+1]=g*m[5]+v*m[6]+y*m[7]+m[9]*255,f[w+2]=g*m[10]+v*m[11]+y*m[12]+m[14]*255):(b=f[w+3],f[w]=g*m[0]+v*m[1]+y*m[2]+b*m[3]+m[4]*255,f[w+1]=g*m[5]+v*m[6]+y*m[7]+b*m[8]+m[9]*255,f[w+2]=g*m[10]+v*m[11]+y*m[12]+b*m[13]+m[14]*255,f[w+3]=g*m[15]+v*m[16]+y*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var f=this.matrix,p=[f[0],f[1],f[2],f[3],f[5],f[6],f[7],f[8],f[10],f[11],f[12],f[13],f[15],f[16],f[17],f[18]],m=[f[4],f[9],f[14],f[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,p),l.uniform4fv(u.uConstants,m)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Brightness=h(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,f=u.data,p,m=f.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)f[p]=f[p]+g,f[p+1]=f[p+1]+g,f[p+2]=f[p+2]+g}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.Convolute=l(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var f=Math.sqrt(this.matrix.length),p=this.type+"_"+f+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return u.programCache.hasOwnProperty(p)||(u.programCache[p]=this.createProgram(u.context,m)),u.programCache[p]},applyTo2d:function(u){var f=u.imageData,p=f.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),y=f.width,b=f.height,w=u.ctx.createImageData(y,b),x=w.data,S=this.opaque?1:0,C,k,I,F,j,q,te,G,Y,ie,ce,H,T;for(ce=0;ce<b;ce++)for(ie=0;ie<y;ie++){for(j=(ce*y+ie)*4,C=0,k=0,I=0,F=0,T=0;T<g;T++)for(H=0;H<g;H++)te=ce+T-v,q=ie+H-v,!(te<0||te>=b||q<0||q>=y)&&(G=(te*y+q)*4,Y=m[T*g+H],C+=p[G]*Y,k+=p[G+1]*Y,I+=p[G+2]*Y,S||(F+=p[G+3]*Y));x[j]=C,x[j+1]=k,x[j+2]=I,S?x[j+3]=p[j+3]:x[j+3]=F}u.imageData=w},getUniformLocations:function(u,f){return{uMatrix:u.getUniformLocation(f,"uMatrix"),uOpaque:u.getUniformLocation(f,"uOpaque"),uHalfSize:u.getUniformLocation(f,"uHalfSize"),uSize:u.getUniformLocation(f,"uSize")}},sendUniformData:function(u,f){u.uniform1fv(f.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Grayscale=h(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,f=u.data,p,m=f.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(f[p]+f[p+1]+f[p+2])/3:v==="lightness"?g=(Math.min(f[p],f[p+1],f[p+2])+Math.max(f[p],f[p+1],f[p+2]))/2:v==="luminosity"&&(g=.21*f[p]+.72*f[p+1]+.07*f[p+2]),f[p]=g,f[p+1]=g,f[p+2]=g},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var f=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,f)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var f=1;l.uniform1i(u.uMode,f)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Invert=h(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,f=u.data,p,m=f.length;for(p=0;p<m;p+=4)f[p]=255-f[p],f[p+1]=255-f[p+1],f[p+2]=255-f[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.Noise=l(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var f=u.imageData,p=f.data,m,g=p.length,v=this.noise,y;for(m=0,g=p.length;m<g;m+=4)y=(.5-Math.random())*v,p[m]+=y,p[m+1]+=y,p[m+2]+=y}},getUniformLocations:function(u,f){return{uNoise:u.getUniformLocation(f,"uNoise"),uSeed:u.getUniformLocation(f,"uSeed")}},sendUniformData:function(u,f){u.uniform1f(f.uNoise,this.noise/255),u.uniform1f(f.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Pixelate=h(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,f=u.data,p=u.height,m=u.width,g,v,y,b,w,x,S,C,k,I,F;for(v=0;v<p;v+=this.blocksize)for(y=0;y<m;y+=this.blocksize)for(g=v*4*m+y*4,b=f[g],w=f[g+1],x=f[g+2],S=f[g+3],I=Math.min(v+this.blocksize,p),F=Math.min(y+this.blocksize,m),C=v;C<I;C++)for(k=y;k<F;k++)g=C*4*m+k*4,f[g]=b,f[g+1]=w,f[g+2]=x,f[g+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.RemoveColor=l(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var f=u.imageData,p=f.data,m,g=this.distance*255,v,y,b,w=new o.Color(this.color).getSource(),x=[w[0]-g,w[1]-g,w[2]-g],S=[w[0]+g,w[1]+g,w[2]+g];for(m=0;m<p.length;m+=4)v=p[m],y=p[m+1],b=p[m+2],v>x[0]&&y>x[1]&&b>x[2]&&v<S[0]&&y<S[1]&&b<S[2]&&(p[m+3]=0)},getUniformLocations:function(u,f){return{uLow:u.getUniformLocation(f,"uLow"),uHigh:u.getUniformLocation(f,"uHigh")}},sendUniformData:function(u,f){var p=new o.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];u.uniform4fv(f.uLow,g),u.uniform4fv(f.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=h(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),o.Image.filters[u].fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendColor=h(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,f;return l.programCache.hasOwnProperty(u)||(f=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,f)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,f=u.data,p=f.length,m,g,v,y,b,w,x,S=1-this.alpha;x=new o.Color(this.color).getSource(),m=x[0]*this.alpha,g=x[1]*this.alpha,v=x[2]*this.alpha;for(var C=0;C<p;C+=4)switch(y=f[C],b=f[C+1],w=f[C+2],this.mode){case"multiply":f[C]=y*m/255,f[C+1]=b*g/255,f[C+2]=w*v/255;break;case"screen":f[C]=255-(255-y)*(255-m)/255,f[C+1]=255-(255-b)*(255-g)/255,f[C+2]=255-(255-w)*(255-v)/255;break;case"add":f[C]=y+m,f[C+1]=b+g,f[C+2]=w+v;break;case"diff":case"difference":f[C]=Math.abs(y-m),f[C+1]=Math.abs(b-g),f[C+2]=Math.abs(w-v);break;case"subtract":f[C]=y-m,f[C+1]=b-g,f[C+2]=w-v;break;case"darken":f[C]=Math.min(y,m),f[C+1]=Math.min(b,g),f[C+2]=Math.min(w,v);break;case"lighten":f[C]=Math.max(y,m),f[C+1]=Math.max(b,g),f[C+2]=Math.max(w,v);break;case"overlay":f[C]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,f[C+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,f[C+2]=v<128?2*w*v/255:255-2*(255-w)*(255-v)/255;break;case"exclusion":f[C]=m+y-2*m*y/255,f[C+1]=g+b-2*g*b/255,f[C+2]=v+w-2*v*w/255;break;case"tint":f[C]=m+y*S,f[C+1]=g+b*S,f[C+2]=v+w*S}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var f=new o.Color(this.color).getSource();f[0]=this.alpha*f[0]/255,f[1]=this.alpha*f[1]/255,f[2]=this.alpha*f[2]/255,f[3]=this.alpha,l.uniform4fv(u.uColor,f)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendImage=h(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,f=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,f)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,f=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,f,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,f=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/f,1]},applyTo2d:function(l){var u=l.imageData,f=l.filterBackend.resources,p=u.data,m=p.length,g=u.width,v=u.height,y,b,w,x,S,C,k,I,F,j,q=this.image,te;f.blendImage||(f.blendImage=o.util.createCanvasElement()),F=f.blendImage,j=F.getContext("2d"),F.width!==g||F.height!==v?(F.width=g,F.height=v):j.clearRect(0,0,g,v),j.setTransform(q.scaleX,0,0,q.scaleY,q.left,q.top),j.drawImage(q._element,0,0,g,v),te=j.getImageData(0,0,g,v).data;for(var G=0;G<m;G+=4)switch(S=p[G],C=p[G+1],k=p[G+2],I=p[G+3],y=te[G],b=te[G+1],w=te[G+2],x=te[G+3],this.mode){case"multiply":p[G]=S*y/255,p[G+1]=C*b/255,p[G+2]=k*w/255,p[G+3]=I*x/255;break;case"mask":p[G+3]=x;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var f=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,f)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(l,u){o.Image.fromObject(l.image,function(f){var p=o.util.object.clone(l);p.image=f,u(new o.Image.filters.BlendImage(p))})}}(t),function(a){var o=a.fabric||(a.fabric={}),c=Math.pow,h=Math.floor,l=Math.sqrt,u=Math.abs,f=Math.round,p=Math.sin,m=Math.ceil,g=o.Image.filters,v=o.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,b){return{uDelta:y.getUniformLocation(b,"uDelta"),uTaps:y.getUniformLocation(b,"uTaps")}},sendUniformData:function(y,b){y.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(y){var b=this.getFilterWindow(),w=this.type+"_"+b;if(!y.programCache.hasOwnProperty(w)){var x=this.generateShader(b);y.programCache[w]=this.createProgram(y.context,x)}return y.programCache[w]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,w=this.getFilterWindow(),x=new Array(w),S=1;S<=w;S++)x[S-1]=y(S*b);return x},generateShader:function(x){for(var b=new Array(x),w=this.fragmentSourceTOP,x,S=1;S<=x;S++)b[S-1]=S+".0 * uDelta";return w+="uniform float uTaps["+x+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,b.forEach(function(C,k){w+="  color += texture2D(uTexture, vTexCoord + "+C+") * uTaps["+k+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+C+") * uTaps["+k+`];
`,w+="  sum += 2.0 * uTaps["+k+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(b){if(b>=y||b<=-y)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var w=b/y;return p(b)/b*p(w)/w}},applyTo2d:function(y){var b=y.imageData,w=this.scaleX,x=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/x;var S=b.width,C=b.height,k=f(S*w),I=f(C*x),F;this.resizeType==="sliceHack"?F=this.sliceByTwo(y,S,C,k,I):this.resizeType==="hermite"?F=this.hermiteFastResize(y,S,C,k,I):this.resizeType==="bilinear"?F=this.bilinearFiltering(y,S,C,k,I):this.resizeType==="lanczos"&&(F=this.lanczosResize(y,S,C,k,I)),y.imageData=F},sliceByTwo:function(y,b,w,x,S){var C=y.imageData,k=.5,I=!1,F=!1,j=b*k,q=w*k,te=o.filterBackend.resources,G,Y,ie=0,ce=0,H=b,T=0;for(te.sliceByTwo||(te.sliceByTwo=document.createElement("canvas")),G=te.sliceByTwo,(G.width<b*1.5||G.height<w)&&(G.width=b*1.5,G.height=w),Y=G.getContext("2d"),Y.clearRect(0,0,b*1.5,w),Y.putImageData(C,0,0),x=h(x),S=h(S);!I||!F;)b=j,w=q,x<h(j*k)?j=h(j*k):(j=x,I=!0),S<h(q*k)?q=h(q*k):(q=S,F=!0),Y.drawImage(G,ie,ce,b,w,H,T,j,q),ie=H,ce=T,T+=q;return Y.getImageData(ie,ce,x,S)},lanczosResize:function(y,b,w,x,S){function C(D){var R,$,A,O,z,B,K,W,J,ne,re;for(T.x=(D+.5)*q,P.x=h(T.x),R=0;R<S;R++){for(T.y=(R+.5)*te,P.y=h(T.y),z=0,B=0,K=0,W=0,J=0,$=P.x-ie;$<=P.x+ie;$++)if(!($<0||$>=b)){ne=h(1e3*u($-T.x)),H[ne]||(H[ne]={});for(var U=P.y-ce;U<=P.y+ce;U++)U<0||U>=w||(re=h(1e3*u(U-T.y)),H[ne][re]||(H[ne][re]=j(l(c(ne*G,2)+c(re*Y,2))/1e3)),A=H[ne][re],A>0&&(O=(U*b+$)*4,z+=A,B+=A*k[O],K+=A*k[O+1],W+=A*k[O+2],J+=A*k[O+3]))}O=(R*x+D)*4,F[O]=B/z,F[O+1]=K/z,F[O+2]=W/z,F[O+3]=J/z}return++D<x?C(D):I}var k=y.imageData.data,I=y.ctx.createImageData(x,S),F=I.data,j=this.lanczosCreate(this.lanczosLobes),q=this.rcpScaleX,te=this.rcpScaleY,G=2/this.rcpScaleX,Y=2/this.rcpScaleY,ie=m(q*this.lanczosLobes/2),ce=m(te*this.lanczosLobes/2),H={},T={},P={};return C(0)},bilinearFiltering:function(y,b,w,x,S){var C,k,I,F,j,q,te,G,Y,ie,ce,H,T=0,P,D=this.rcpScaleX,R=this.rcpScaleY,$=4*(b-1),A=y.imageData,O=A.data,z=y.ctx.createImageData(x,S),B=z.data;for(te=0;te<S;te++)for(G=0;G<x;G++)for(j=h(D*G),q=h(R*te),Y=D*G-j,ie=R*te-q,P=4*(q*b+j),ce=0;ce<4;ce++)C=O[P+ce],k=O[P+4+ce],I=O[P+$+ce],F=O[P+$+4+ce],H=C*(1-Y)*(1-ie)+k*Y*(1-ie)+I*ie*(1-Y)+F*Y*ie,B[T++]=H;return z},hermiteFastResize:function(y,b,w,x,S){for(var C=this.rcpScaleX,k=this.rcpScaleY,I=m(C/2),F=m(k/2),j=y.imageData,q=j.data,te=y.ctx.createImageData(x,S),G=te.data,Y=0;Y<S;Y++)for(var ie=0;ie<x;ie++){for(var ce=(ie+Y*x)*4,H=0,T=0,P=0,D=0,R=0,$=0,A=0,O=(Y+.5)*k,z=h(Y*k);z<(Y+1)*k;z++)for(var B=u(O-(z+.5))/F,K=(ie+.5)*C,W=B*B,J=h(ie*C);J<(ie+1)*C;J++){var ne=u(K-(J+.5))/I,re=l(W+ne*ne);re>1&&re<-1||(H=2*re*re*re-3*re*re+1,H>0&&(ne=4*(J+z*b),A+=H*q[ne+3],P+=H,q[ne+3]<255&&(H=H*q[ne+3]/250),D+=H*q[ne],R+=H*q[ne+1],$+=H*q[ne+2],T+=H))}G[ce]=D/T,G[ce+1]=R/T,G[ce+2]=$/T,G[ce+3]=A/P}return te},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Contrast=h(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,f,m,p=u.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(f=0;f<m;f+=4)p[f]=v*(p[f]-128)+128,p[f+1]=v*(p[f+1]-128)+128,p[f+2]=v*(p[f+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Saturation=h(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,f=u.data,p=f.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(f[g],f[g+1],f[g+2]),f[g]+=v!==f[g]?(v-f[g])*m:0,f[g+1]+=v!==f[g+1]?(v-f[g+1])*m:0,f[g+2]+=v!==f[g+2]?(v-f[g+2])*m:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Vibrance=h(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,f=u.data,p=f.length,m=-this.vibrance,g,v,y,b;for(g=0;g<p;g+=4)v=Math.max(f[g],f[g+1],f[g+2]),y=(f[g]+f[g+1]+f[g+2])/3,b=Math.abs(v-y)*2/255*m,f[g]+=v!==f[g]?(v-f[g])*b:0,f[g+1]+=v!==f[g+1]?(v-f[g+1])*b:0,f[g+2]+=v!==f[g+2]?(v-f[g+2])*b:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Blur=h(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,f,p,m=l.imageData.width,g=l.imageData.height;u.blurLayer1||(u.blurLayer1=o.util.createCanvasElement(),u.blurLayer2=o.util.createCanvasElement()),f=u.blurLayer1,p=u.blurLayer2,(f.width!==m||f.height!==g)&&(p.width=f.width=m,p.height=f.height=g);var v=f.getContext("2d"),y=p.getContext("2d"),b=15,w,x,S,C,k=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),y.clearRect(0,0,m,g),C=-b;C<=b;C++)w=(Math.random()-.5)/4,x=C/b,S=k*x*m+w,y.globalAlpha=1-Math.abs(x),y.drawImage(f,S,w),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);for(C=-b;C<=b;C++)w=(Math.random()-.5)/4,x=C/b,S=k*x*g+w,y.globalAlpha=1-Math.abs(x),y.drawImage(f,w,S),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);l.ctx.drawImage(f,0,0);var I=l.ctx.getImageData(0,0,f.width,f.height);return v.globalAlpha=1,v.clearRect(0,0,f.width,f.height),I},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var f=this.chooseRightDelta();l.uniform2fv(u.delta,f)},chooseRightDelta:function(){var l=1,u=[0,0],f;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),f=l*this.blur*.12,this.horizontal?u[0]=f:u[1]=f,u}}),c.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Gamma=h(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,f=u.data,p=this.gamma,m=f.length,g=1/p[0],v=1/p[1],y=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,y)*255;for(b=0,m=f.length;b<m;b+=4)f[b]=this.rVals[f[b]],f[b+1]=this.gVals[f[b+1]],f[b+2]=this.bVals[f[b+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Composed=h(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(l,u){var f=l.subFilters||[],p=f.map(function(g){return new o.Image.filters[g.type](g)}),m=new o.Image.filters.Composed({subFilters:p});return u&&u(m),m}}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.HueRotation=h(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=o.util.cos(l),f=o.util.sin(l),p=1/3,m=Math.sqrt(p)*f,g=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=u+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=u+p*g},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.clone;if(o.Text){o.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(h),cacheProperties:o.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=o.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,f,p,m,g,v,y=0,b=this._textLines.length;y<b;y++)if(!(this.textAlign!=="justify"&&(y===b-1||this.isEndOfWrapping(y)))&&(p=0,m=this._textLines[y],u=this.getLineWidth(y),u<this.width&&(v=this.textLines[y].match(this._reSpacesAndTabs)))){f=v.length,l=(this.width-u)/f;for(var w=0,x=m.length;w<=x;w++)g=this.__charBounds[y][w],this._reSpaceAndTab.test(m[w])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,f){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,f)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,f=this._textLines.length;u<f;u++){var p=this.getLineWidth(u);p>l&&(l=p)}return l},_renderTextLine:function(l,u,f,p,m,g){this._renderChars(l,u,f,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,f,p=l.fillStyle,m,g,v=this._getLeftOffset(),y=this._getTopOffset(),b=0,w=0,x,S,C=this.path,k,I=0,F=this._textLines.length;I<F;I++){if(u=this.getHeightOfLine(I),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",I)){y+=u;continue}m=this._textLines[I],f=this._getLineLeftOffset(I),w=0,b=0,g=this.getValueOfPropertyAt(I,0,"textBackgroundColor");for(var j=0,q=m.length;j<q;j++)x=this.__charBounds[I][j],S=this.getValueOfPropertyAt(I,j,"textBackgroundColor"),C?(l.save(),l.translate(x.renderLeft,x.renderTop),l.rotate(x.angle),l.fillStyle=S,S&&l.fillRect(-x.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),x.width,u/this.lineHeight),l.restore()):S!==g?(k=v+f+b,this.direction==="rtl"&&(k=this.width-k-w),l.fillStyle=g,g&&l.fillRect(k,y,w,u/this.lineHeight),b=x.left,w=x.width,g=S):w+=x.kernedWidth;S&&!C&&(k=v+f+b,this.direction==="rtl"&&(k=this.width-k-w),l.fillStyle=S,l.fillRect(k,y,w,u/this.lineHeight)),y+=u}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();o.charWidthsCache[u]||(o.charWidthsCache[u]={});var f=o.charWidthsCache[u],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return f[p]||(f[p]={}),f[p]},_measureChar:function(l,u,f,p){var m=this.getFontCache(u),g=this._getFontDeclaration(u),v=this._getFontDeclaration(p),y=f+l,b=g===v,w,x,S,C=u.fontSize/this.CACHE_FONT_SIZE,k;if(f&&m[f]!==void 0&&(S=m[f]),m[l]!==void 0&&(k=w=m[l]),b&&m[y]!==void 0&&(x=m[y],k=x-S),w===void 0||S===void 0||x===void 0){var I=this.getMeasuringContext();this._setTextStyles(I,u,!0)}return w===void 0&&(k=w=I.measureText(l).width,m[l]=w),S===void 0&&b&&f&&(S=I.measureText(f).width,m[f]=S),b&&x===void 0&&(x=I.measureText(y).width,m[y]=x,k=x-S),{width:w*C,kernedWidth:k*C}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,f,p,m=this._textLines[l],g,v,y=0,b=new Array(m.length),w=0,x,S,C=this.path,k=this.pathSide==="right";for(this.__charBounds[l]=b,f=0;f<m.length;f++)p=m[f],v=this._getGraphemeBox(p,l,f,g),b[f]=v,u+=v.kernedWidth,g=p;if(b[f]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},C){switch(S=C.segmentsInfo[C.segmentsInfo.length-1].length,x=o.util.getPointOnPath(C.path,0,C.segmentsInfo),x.x+=C.pathOffset.x,x.y+=C.pathOffset.y,this.textAlign){case"left":w=k?S-u:0;break;case"center":w=(S-u)/2;break;case"right":w=k?0:S-u;break}for(w+=this.pathStartOffset*(k?-1:1),f=k?m.length-1:0;k?f>=0:f<m.length;k?f--:f++)v=b[f],w>S?w%=S:w<0&&(w+=S),this._setGraphemeOnPath(w,v,x),w+=v.kernedWidth}return{width:u,numOfSpaces:y}},_setGraphemeOnPath:function(l,u,f){var p=l+u.kernedWidth/2,m=this.path,g=o.util.getPointOnPath(m.path,p,m.segmentsInfo);u.renderLeft=g.x-f.x,u.renderTop=g.y-f.y,u.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,f,p,m){var g=this.getCompleteStyleDeclaration(u,f),v=p?this.getCompleteStyleDeclaration(u,f-1):{},y=this._measureChar(l,g,p,v),b=y.kernedWidth,w=y.width,x;this.charSpacing!==0&&(x=this._getWidthOfCharSpacing(),w+=x,b+=x);var S={width:w,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(f>0&&!m){var C=this.__charBounds[u][f-1];S.left=C.left+C.width+y.kernedWidth-y.width}return S},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],f=this.getHeightOfChar(l,0),p=1,m=u.length;p<m;p++)f=Math.max(this.getHeightOfChar(l,p),f);return this.__lineHeights[l]=f*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,f=0,p=this._textLines.length;f<p;f++)l=this.getHeightOfLine(f),u+=f===p-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var f=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var y=this.getHeightOfLine(g),b=y/this.lineHeight,w=this._getLineLeftOffset(g);this._renderTextLine(u,l,this._textLines[g],p+w,m+f+b,g),f+=y}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,f,p,m,g){var v=this.getHeightOfLine(g),y=this.textAlign.indexOf("justify")!==-1,b,w,x="",S,C=0,k,I=this.path,F=!y&&this.charSpacing===0&&this.isEmptyStyles(g)&&!I,j=this.direction==="ltr",q=this.direction==="ltr"?1:-1,te,G=u.canvas.getAttribute("dir");if(u.save(),G!==this.direction&&(u.canvas.setAttribute("dir",j?"ltr":"rtl"),u.direction=j?"ltr":"rtl",u.textAlign=j?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,F){this._renderChar(l,u,g,0,f.join(""),p,m,v),u.restore();return}for(var Y=0,ie=f.length-1;Y<=ie;Y++)k=Y===ie||this.charSpacing||I,x+=f[Y],S=this.__charBounds[g][Y],C===0?(p+=q*(S.kernedWidth-S.width),C+=S.width):C+=S.kernedWidth,y&&!k&&this._reSpaceAndTab.test(f[Y])&&(k=!0),k||(b=b||this.getCompleteStyleDeclaration(g,Y),w=this.getCompleteStyleDeclaration(g,Y+1),k=o.util.hasStyleChanged(b,w,!1)),k&&(I?(u.save(),u.translate(S.renderLeft,S.renderTop),u.rotate(S.angle),this._renderChar(l,u,g,Y,x,-C/2,0,v),u.restore()):(te=p,this._renderChar(l,u,g,Y,x,te,m,v)),x="",b=w,p+=q*C,C=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=o.util.createCanvasElement(),f,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return u.width=p,u.height=m,f=u.getContext("2d"),f.beginPath(),f.moveTo(0,0),f.lineTo(p,0),f.lineTo(p,m),f.lineTo(0,m),f.closePath(),f.translate(p/2,m/2),f.fillStyle=l.toLive(f),this._applyPatternGradientTransform(f,l),f.fill(),f.createPattern(u,"no-repeat")},handleFiller:function(l,u,f){var p,m;return f.toLive?f.gradientUnits==="percentage"||f.gradientTransform||f.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[u]=this._applyPatternGradientTransformText(f),{offsetX:p,offsetY:m}):(l[u]=f.toLive(l,this),this._applyPatternGradientTransform(l,f)):(l[u]=f,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,f,p,m,g,v){var y=this._getStyleDeclaration(f,p),b=this.getCompleteStyleDeclaration(f,p),w=l==="fillText"&&b.fill,x=l==="strokeText"&&b.stroke&&b.strokeWidth,S,C;!x&&!w||(u.save(),w&&(S=this._setFillStyles(u,b)),x&&(C=this._setStrokeStyles(u,b)),u.font=this._getFontDeclaration(b),y&&y.textBackgroundColor&&this._removeShadow(u),y&&y.deltaY&&(v+=y.deltaY),w&&u.fillText(m,g-S.offsetX,v-S.offsetY),x&&u.strokeText(m,g-C.offsetX,v-C.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,f){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*f.size,deltaY:g+m*f.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),f=this.width-u,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=f/2),p==="right"&&(g=f),p==="justify-center"&&(g=f/2),p==="justify-right"&&(g=f),m==="rtl"&&(g-=f),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),f=u.width;return this.__lineWidths[l]=f,f},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,f){var p=this._getStyleDeclaration(l,u);return p&&typeof p[f]<"u"?p[f]:this[f]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var f,p,m,g,v,y,b,w,x=this._getLeftOffset(),S=this._getTopOffset(),C,k,I,F,j,q,te,G,Y=this.path,ie=this._getWidthOfCharSpacing(),ce=this.offsets[u],H=0,T=this._textLines.length;H<T;H++){if(f=this.getHeightOfLine(H),!this[u]&&!this.styleHas(u,H)){S+=f;continue}b=this._textLines[H],q=f/this.lineHeight,g=this._getLineLeftOffset(H),k=0,I=0,w=this.getValueOfPropertyAt(H,0,u),G=this.getValueOfPropertyAt(H,0,"fill"),C=S+q*(1-this._fontSizeFraction),p=this.getHeightOfChar(H,0),v=this.getValueOfPropertyAt(H,0,"deltaY");for(var P=0,D=b.length;P<D;P++)if(F=this.__charBounds[H][P],j=this.getValueOfPropertyAt(H,P,u),te=this.getValueOfPropertyAt(H,P,"fill"),m=this.getHeightOfChar(H,P),y=this.getValueOfPropertyAt(H,P,"deltaY"),Y&&j&&te)l.save(),l.fillStyle=G,l.translate(F.renderLeft,F.renderTop),l.rotate(F.angle),l.fillRect(-F.kernedWidth/2,ce*m+y,F.kernedWidth,this.fontSize/15),l.restore();else if((j!==w||te!==G||m!==p||y!==v)&&I>0){var R=x+g+k;this.direction==="rtl"&&(R=this.width-R-I),w&&G&&(l.fillStyle=G,l.fillRect(R,C+ce*p+v,I,this.fontSize/15)),k=F.left,I=F.width,w=j,G=te,p=m,v=y}else I+=F.kernedWidth;var R=x+g+k;this.direction==="rtl"&&(R=this.width-R-I),l.fillStyle=te,j&&te&&l.fillRect(R,C+ce*p+v,I-ie,this.fontSize/15),S+=f}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var f=l||this,p=this.fontFamily,m=o.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?f.fontFamily:'"'+f.fontFamily+'"';return[o.isLikelyNode?f.fontWeight:f.fontStyle,o.isLikelyNode?f.fontStyle:f.fontWeight,u?this.CACHE_FONT_SIZE+"px":f.fontSize+"px",g].join(" ")},render:function(l){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),f=new Array(u.length),p=[`
`],m=[],g=0;g<u.length;g++)f[g]=o.util.string.graphemeSplit(u[g]),m=m.concat(f[g],p);return m.pop(),{_unwrappedLines:f,lines:u,graphemeText:m,graphemeLines:f}},toObject:function(l){var u=h.concat(l),f=this.callSuper("toObject",u);return f.styles=o.util.stylesToArray(this.styles,this.text),f.path&&(f.path=this.path.toObject()),f},set:function(l,u){this.callSuper("set",l,u);var f=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),f=f||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else f=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),f&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(l,u,f){if(!l)return u(null);var p=o.parseAttributes(l,o.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(f=o.util.object.extend(f?c(f):{},p),f.top=f.top||0,f.left=f.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(f.underline=!0),g.indexOf("overline")!==-1&&(f.overline=!0),g.indexOf("line-through")!==-1&&(f.linethrough=!0),delete f.textDecoration}"dx"in p&&(f.left+=p.dx),"dy"in p&&(f.top+=p.dy),"fontSize"in f||(f.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=f.strokeWidth;f.strokeWidth=0;var b=new o.Text(v,f),w=b.getScaledHeight()/b.height,x=(b.height+b.strokeWidth)*b.lineHeight-b.height,S=x*w,C=b.getScaledHeight()+S,k=0;m==="center"&&(k=b.getScaledWidth()/2),m==="right"&&(k=b.getScaledWidth()),b.set({left:b.left-k,top:b.top-(C-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof y<"u"?y:1}),u(b)},o.Text.fromObject=function(l,u){var f=c(l),p=l.path;return delete f.path,o.Object._fromObject("Text",f,function(m){m.styles=o.util.stylesFromArray(l.styles,l.text),p?o.Object._fromObject("Path",p,function(g){m.set("path",g),u(m)},"path"):u(m)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var o=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in o)for(var h in o[c])for(var l in o[c][h])return!1;return!0},styleHas:function(a,o){if(!this.styles||!a||a===""||typeof o<"u"&&!this.styles[o])return!1;var c=typeof o>"u"?this.styles:{0:this.styles[o]};for(var h in c)for(var l in c[h])if(typeof c[h][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var o=this.styles,c=0,h,l,u=!0,f=0,p;for(var m in o){h=0;for(var g in o[m]){var p=o[m][g],v=p.hasOwnProperty(a);c++,v?(l?p[a]!==l&&(u=!1):l=p[a],p[a]===this[a]&&delete p[a]):u=!1,Object.keys(p).length!==0?h++:delete o[m][g]}h===0&&delete o[m]}for(var y=0;y<this._textLines.length;y++)f+=this._textLines[y].length;u&&c===f&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var o=this.styles,c,h,l;for(h in o){c=o[h];for(l in c)delete c[l][a],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete o[h]}}},_extendStyles:function(a,o){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),o)},get2DCursorLocation:function(a,o){typeof a>"u"&&(a=this.selectionStart);for(var c=o?this._unwrappedTextLines:this._textLines,h=c.length,l=0;l<h;l++){if(a<=c[l].length)return{lineIndex:l,charIndex:a};a-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<a?c[l-1].length:a}},getSelectionStyles:function(a,o,c){typeof a>"u"&&(a=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||a);for(var h=[],l=a;l<o;l++)h.push(this.getStyleAtPosition(l,c));return h},getStyleAtPosition:function(a,o){var c=this.get2DCursorLocation(a),h=o?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return h||{}},setSelectionStyles:function(a,o,c){typeof o>"u"&&(o=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||o);for(var h=o;h<c;h++)this._extendStyles(h,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,o){var c=this.styles&&this.styles[a];return c?c[o]:null},getCompleteStyleDeclaration:function(a,o){for(var c=this._getStyleDeclaration(a,o)||{},h={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],h[l]=typeof c[l]>"u"?this[l]:c[l];return h},_setStyleDeclaration:function(a,o,c){this.styles[a][o]=c},_deleteStyleDeclaration:function(a,o){delete this.styles[a][o]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,c){this.callSuper("initialize",o,c),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,c){this[o]!==c&&(this._fireSelectionChanged(),this[o]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,h=this.canvas.viewportTransform;c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(c),this._clearTextArea(c),o||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var o=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,c):this.renderSelection(o,c),c.restore()}},_clearTextArea:function(o){var c=this.width+4,h=this.height+4;o.clearRect(-c/2,-h/2,c,h)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var c=this._getLeftOffset(),h=this._getTopOffset(),l=this._getCursorBoundariesOffsets(o);return{left:c,top:h,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,h,l,u=0,f=0,p,m=this.get2DCursorLocation(o);l=m.charIndex,h=m.lineIndex;for(var g=0;g<h;g++)u+=this.getHeightOfLine(g);c=this._getLineLeftOffset(h);var v=this.__charBounds[h][l];return v&&(f=v.left),this.charSpacing!==0&&l===this._textLines[h].length&&(f-=this._getWidthOfCharSpacing()),p={top:u,left:c+(f>0?f:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(o,c){var h=this.get2DCursorLocation(),l=h.lineIndex,u=h.charIndex>0?h.charIndex-1:0,f=this.getValueOfPropertyAt(l,u,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=o.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-f*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(o.left+o.leftOffset-m/2,g+o.top+v,m,f)},renderSelection:function(o,c){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,f=this.get2DCursorLocation(h),p=this.get2DCursorLocation(l),m=f.lineIndex,g=p.lineIndex,v=f.charIndex<0?0:f.charIndex,y=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var w=this._getLineLeftOffset(b)||0,x=this.getHeightOfLine(b),S=0,C=0,k=0;if(b===m&&(C=this.__charBounds[m][v].left),b>=m&&b<g)k=u&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(y===0)k=this.__charBounds[g][y].left;else{var I=this._getWidthOfCharSpacing();k=this.__charBounds[g][y-1].left+this.__charBounds[g][y-1].width-I}S=x,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(x/=this.lineHeight);var F=o.left+w+C,j=k-C,q=x,te=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",q=1,te=x):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(F=this.width-F-j),c.fillRect(F,o.top+o.topOffset+te,j,q),o.topOffset+=S}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0),c=o.charIndex>0?o.charIndex-1:0;return{l:o.lineIndex,c}}}),e.IText.fromObject=function(o,c){var h=e.util.stylesFromArray(o.styles,o.text),l=Object.assign({},o,{styles:h});if(a(l),l.styles)for(var u in l.styles)for(var f in l.styles[u])a(l.styles[u][f]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var c=o.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,o._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var c=o.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,o),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,o._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,c,h,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",c,{duration:h,onComplete:function(){u.isAborted||o[l]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var c=this,h=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},h)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var c=0,h=o-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h--;for(;/\S/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findWordBoundaryRight:function(o){var c=0,h=o;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},findLineBoundaryLeft:function(o){for(var c=0,h=o-1;!/\n/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findLineBoundaryRight:function(o){for(var c=0,h=o;!/\n/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},searchWordBoundary:function(o,c){for(var h=this._text,l=this._reSpace.test(h[o])?o-1:o,u=h[l],f=e.reNonWord;!f.test(u)&&l>0&&l<h.length;)l+=c,u=h[l];return f.test(u)&&(l+=c===1?0:1),l},selectWord:function(o){o=o||this.selectionStart;var c=this.searchWordBoundary(o,-1),h=this.searchWordBoundary(o,1);this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){o=o||this.selectionStart;var c=this.findLineBoundaryLeft(o),h=this.findLineBoundaryRight(o);return this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(o.e),h=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||h===l)&&(h===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,c,h){var l=h.slice(0,o),u=e.util.string.graphemeSplit(l).length;if(o===c)return{selectionStart:u,selectionEnd:u};var f=h.slice(o,c),p=e.util.string.graphemeSplit(f).length;return{selectionStart:u,selectionEnd:u+p}},fromGraphemeToStringSelection:function(o,c,h){var l=h.slice(0,o),u=l.join("").length;if(o===c)return{selectionStart:u,selectionEnd:u};var f=h.slice(o,c),p=f.join("").length;return{selectionStart:u,selectionEnd:u+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(o),h=this.get2DCursorLocation(o),l=h.lineIndex,u=h.charIndex,f=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+f},v=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/v,w=y.height/v,x=b-f,S=w-f,C=y.clientWidth/b,k=y.clientHeight/w;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=C,g.y*=k,g.x<0&&(g.x=0),g.x>x&&(g.x=x),g.y<0&&(g.y=0),g.y>S&&(g.y=S),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:f+"px",charHeight:f}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,c){var h=this.get2DCursorLocation(o,!0),l=this.get2DCursorLocation(c,!0),u=h.lineIndex,f=h.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(u!==p){if(this.styles[u])for(g=f;g<this._unwrappedTextLines[u].length;g++)delete this.styles[u][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][f+g-m]=v);for(g=u+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,u-p)}else if(this.styles[u]){v=this.styles[u];var y=m-f,b,w;for(g=f;g<m;g++)delete v[g];for(w in this.styles[u])b=parseInt(w,10),b>=m&&(v[b-y]=v[w],delete v[w])}},shiftLineStyles:function(o,c){var h=a(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>o&&(this.styles[u+c]=h[u],h[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,c,h,l){var u,f={},p=!1,m=this._unwrappedTextLines[o].length===c;h||(h=1),this.shiftLineStyles(o,h),this.styles[o]&&(u=this.styles[o][c===0?c:c-1]);for(var g in this.styles[o]){var v=parseInt(g,10);v>=c&&(p=!0,f[v-c]=this.styles[o][g],m&&c===0||delete this.styles[o][g])}var y=!1;for(p&&!m&&(this.styles[o+h]=f,y=!0),y&&h--;h>0;)l&&l[h-1]?this.styles[o+h]={0:a(l[h-1])}:u?this.styles[o+h]={0:a(u)}:delete this.styles[o+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(o,c,h,l){this.styles||(this.styles={});var u=this.styles[o],f=u?a(u):{};h||(h=1);for(var p in f){var m=parseInt(p,10);m>=c&&(u[m+h]=f[m],f[m-h]||delete u[m])}if(this._forceClearCache=!0,l){for(;h--;)!Object.keys(l[h]).length||(this.styles[o]||(this.styles[o]={}),this.styles[o][c+h]=a(l[h]));return}if(!!u)for(var g=u[c?c-1:1];g&&h--;)this.styles[o][c+h]=a(g)},insertNewStyleBlock:function(o,c,h){for(var l=this.get2DCursorLocation(c,!0),u=[0],f=0,p=0;p<o.length;p++)o[p]===`
`?(f++,u[f]=0):u[f]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],h),h=h&&h.slice(u[0]+1)),f&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],f);for(var p=1;p<f;p++)u[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,u[p],h):h&&this.styles[l.lineIndex+p]&&h[0]&&(this.styles[l.lineIndex+p][0]=h[0]),h=h&&h.slice(u[p]+1);u[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,u[p],h)},setSelectionStartEndWithShift:function(o,c,h){h<=o?(c===o?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=h):h>o&&h<c?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(c===o?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=h)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(!!this.canvas){this.__newClickTime=+new Date;var o=a.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var o=this.getSelectionStartFromPointer(a),c=this.selectionStart,h=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,h,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var o=this.getLocalPointer(a),c=0,h=0,l=0,u=0,f=0,p,m,g=0,v=this._textLines.length;g<v&&l<=o.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,f=g,g>0&&(u+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(f),h=p*this.scaleX,m=this._textLines[f],this.direction==="rtl"&&(o.x=this.width*this.scaleX-o.x+h);for(var y=0,b=m.length;y<b&&(c=h,h+=this.__charBounds[f][y].kernedWidth*this.scaleX,h<=o.x);y++)u++;return this._getNewSelectionStartFromOffset(o,c,h,u,b)},_getNewSelectionStartFromOffset:function(a,o,c,h,l){var u=a.x-o,f=c-a.x,p=f>u||f<0?0:1,m=h+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(!!this.isEditing){var o=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in o)this[o[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var o=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,l=c.length,u,f,p=l-h,m=this.selectionStart,g=this.selectionEnd,v=m!==g,y,b,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=m>x.selectionStart;v?(u=this._text.slice(m,g),p+=g-m):l<h&&(S?u=this._text.slice(g+p,g):u=this._text.slice(m,m-p)),f=c.slice(x.selectionEnd-p,x.selectionEnd),u&&u.length&&(f.length&&(y=this.getSelectionStyles(m,m+1,!1),y=f.map(function(){return y[0]})),v?(b=m,w=g):S?(b=g-u.length,w=g):(b=g,w=g+u.length),this.removeStyleFromTo(b,w)),f.length&&(o&&f.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(f,m,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,o){var c=this._getLineLeftOffset(a),h;return o>0&&(h=this.__charBounds[a][o-1],c+=h.left+h.width),c},getDownCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),h=this.get2DCursorLocation(c),l=h.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var u=h.charIndex,f=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l+1,f),m=this._textLines[l].slice(u);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,o){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),h=this.get2DCursorLocation(c),l=h.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-c;var u=h.charIndex,f=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l-1,f),m=this._textLines[l].slice(0,u),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,o){for(var c=this._textLines[a],h=this._getLineLeftOffset(a),l=h,u=0,f,p,m=0,g=c.length;m<g;m++)if(f=this.__charBounds[a][m].width,l+=f,l>o){p=!0;var v=l-f,y=l,b=Math.abs(v-o),w=Math.abs(y-o);u=w<b?m:m-1;break}return p||(u=c.length-1),u},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,o){var c="get"+a+"CursorOffset",h=this[c](o,this._selectionDirection==="right");o.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var o=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,o,c){var h;if(a.altKey)h=this["findWordBoundary"+c](this[o]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)h=this["findLineBoundary"+c](this[o]);else return this[o]+=c==="Left"?-1:1,!0;if(typeof h<"u"&&this[o]!==h)return this[o]=h,!0},_moveLeft:function(a,o){return this._move(a,o,"Left")},_moveRight:function(a,o){return this._move(a,o,"Right")},moveCursorLeftWithoutShift:function(a){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(o=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,o){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,o.shiftKey?c+="Shift":c+="outShift",this[c](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(a,o){typeof o>"u"&&(o=a+1),this.removeStyleFromTo(a,o),this._text.splice(a,o-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,o,c,h){typeof h>"u"&&(h=c),h>c&&this.removeStyleFromTo(c,h);var l=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,c,o),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,o=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var h=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,h){var l=[],u=[],f=c,p;this._setSVGBg(u);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(u,m,h+p,f),this._setSVGTextLineText(l,m,h+p,f),f+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,h,l,u){var f=c!==c.trim()||c.match(o),p=this.getSvgSpanStyles(h,f),m=p?'style="'+p+'"':"",g=h.deltaY,v="",y=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,y)+'" '),['<tspan x="',a(l,y),'" y="',a(u,y),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,h,l,u){var f=this.getHeightOfLine(h),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",y,b,w=0,x=this._textLines[h],S;u+=f*(1-this._fontSizeFraction)/this.lineHeight;for(var C=0,k=x.length-1;C<=k;C++)S=C===k||this.charSpacing,v+=x[C],y=this.__charBounds[h][C],w===0?(l+=y.kernedWidth-y.width,w+=y.width):w+=y.kernedWidth,p&&!S&&this._reSpaceAndTab.test(x[C])&&(S=!0),S||(m=m||this.getCompleteStyleDeclaration(h,C),g=this.getCompleteStyleDeclaration(h,C+1),S=e.util.hasStyleChanged(m,g,!0)),S&&(b=this._getStyleDeclaration(h,C)||{},c.push(this._createTextCharSpan(v,b,l,u)),v="",m=g,l+=w,w=0)},_pushTextBgRect:function(c,h,l,u,f,p){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(h),' x="',a(l,m),'" y="',a(u,m),'" width="',a(f,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,h,l,u){for(var f=this._textLines[h],p=this.getHeightOfLine(h)/this.lineHeight,m=0,g=0,v,y,b=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),w=0,x=f.length;w<x;w++)v=this.__charBounds[h][w],y=this.getValueOfPropertyAt(h,w,"textBackgroundColor"),y!==b?(b&&this._pushTextBgRect(c,b,l+g,u,m,p),g=v.left,m=v.width,b=y):m+=v.kernedWidth;y&&this._pushTextBgRect(c,y,l+g,u,m,p)},_getFillAttributes:function(c){var h=c&&typeof c=="string"?new e.Color(c):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+c+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var h=0,l=0,u=0;u<c;u++)h+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var h=e.Object.prototype.getSvgStyles.call(this,c);return h+" white-space: pre;"}})}(),function(a){var o=a.fabric||(a.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var h=0,l=0,u=0,f={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[u]===`
`&&p>0?(l=0,u++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&p>0&&(l++,u++),f[p]={line:h,offset:l},u+=c.graphemeLines[p].length,l+=c.graphemeLines[p].length;return f},styleHas:function(c,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[h];l&&(h=l.line)}return o.Text.prototype.styleHas.call(this,c,h)},isEmptyStyles:function(c){if(!this.styles)return!0;var h=0,l=c+1,u,f,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,h=m.offset),g&&(l=g.line,p=l===c,u=g.offset),f=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in f)for(var y in f[v])if(y>=h&&(!p||y<u))for(var b in f[v][y])return!1;return!0},_getStyleDeclaration:function(c,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,h=l.offset+h}return this.callSuper("_getStyleDeclaration",c,h)},_setStyleDeclaration:function(c,h,l){var u=this._styleMap[c];c=u.line,h=u.offset+h,this.styles[c][h]=l},_deleteStyleDeclaration:function(c,h){var l=this._styleMap[c];c=l.line,h=l.offset+h,delete this.styles[c][h]},_getLineStyle:function(c){var h=this._styleMap[c];return!!this.styles[h.line]},_setLineStyle:function(c){var h=this._styleMap[c];this.styles[h.line]={}},_wrapText:function(c,h){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,h));return this.isWrapping=!1,l},_measureWord:function(c,h,l){var u=0,f,p=!0;l=l||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],h,m+l,f,p);u+=v.kernedWidth,f=c[m]}return u},_wrapLine:function(c,h,l,F){var f=0,p=this.splitByGrapheme,m=[],g=[],v=p?o.util.string.graphemeSplit(c):c.split(this._wordJoiners),y="",b=0,w=p?"":" ",x=0,S=0,C=0,k=!0,I=this._getWidthOfCharSpacing(),F=F||0;v.length===0&&v.push([]),l-=F;for(var j=0;j<v.length;j++)y=p?v[j]:o.util.string.graphemeSplit(v[j]),x=this._measureWord(y,h,b),b+=y.length,f+=S+x-I,f>l&&!k?(m.push(g),g=[],f=x,k=!0):f+=I,!k&&!p&&g.push(w),g=g.concat(y),S=p?0:this._measureWord([w],h,b),b++,k=!1,x>C&&(C=x);return j&&m.push(g),C+F>this.dynamicMinWidth&&(this.dynamicMinWidth=C-I+F),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var h=o.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(h.lines,this.width),u=new Array(l.length),f=0;f<l.length;f++)u[f]=l[f].join("");return h.lines=u,h.graphemeLines=l,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var h in this._styleMap)this._textLines[h]&&(c[this._styleMap[h].line]=1);for(var h in this.styles)c[h]||delete this.styles[h]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),o.Textbox.fromObject=function(c,h){var l=o.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return o.Object._fromObject("Textbox",u,h,"text")}}(t),function(){var a=e.controlsUtils,o=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,h=a.scalingEqually,l=a.scalingYOrSkewingX,u=a.scalingXOrSkewingY,f=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:u,getActionName:f}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:u,getActionName:f}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:l,getActionName:f}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:l,getActionName:f}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:h}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:h}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()})(xe);const Yw={lockScalingFlip:!0,originY:"center",originX:"center",lockMovementX:!0,lockMovementY:!0,borderColor:"transparent"};function Mp(t=36){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<t;r+=1)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function cA(t){var d;const e=new xe.fabric.Canvas(t,{width:1,height:1});e.preserveObjectStacking=!0,e.selection=!1,e.renderOnAddRemove=!1;const n=M().config.textureSize;n&&(xe.fabric.textureSize=n);const i={...(d=M().config.objectDefaults)==null?void 0:d.global,...Yw};Object.keys(i).forEach(a=>{xe.fabric.Object.prototype[a]=i[a]}),e.on("object:added",a=>{var o,c;a.target&&!((c=(o=a.target)==null?void 0:o.data)!=null&&c.id)&&(a.target.data||(a.target.data={}),a.target.data.id=Mp(10))});const s=xe.fabric.Object.prototype.controls;return Object.keys(s).forEach(a=>{delete s[a]}),e}let ha=null;function Io(t){ha=t}class uA{constructor(){Ce(this,"maxZoom",2);Ce(this,"minZoom",1);Ce(this,"step",.05);this.allowUserZoom&&this.bindMouseWheel(),ue.subscribe(e=>e.stageSize,()=>{setTimeout(()=>{this.fitToScreen()},1)})}get allowUserZoom(){var e,n,r,i;return(i=(r=(n=(e=M().config)==null?void 0:e.tools)==null?void 0:n.zoom)==null?void 0:r.allowUserZoom)!=null?i:!0}get currentZoom(){return M().zoom}zoomIn(e=this.step){this.set(this.currentZoom+e)}canZoomIn(e=this.step){return this.currentZoom+e<=this.maxZoom}canZoomOut(e=this.step){return this.currentZoom-e>=this.minZoom}zoomOut(e=this.step){this.set(this.currentZoom-e)}set(e,n=!0){if(e<this.minZoom||e>this.maxZoom)return;const r=Fu.round(M().original.width*e,0),i=Fu.round(M().original.height*e,0);de().setZoom(e),n&&de().setDimensions({width:r,height:i}),M().setZoom(e)}fitToScreen(){var s,d;if(!((d=(s=M().config.tools)==null?void 0:s.zoom)!=null&&d.fitImageToScreen))return;const{width:e,height:n}=M().stageSize,r=Math.max(n,1),i=Math.max(e,1);if(M().original.height>r||M().original.width>i){const a=Math.min(r/M().original.height,i/M().original.width);this.minZoom=Math.min(a,1)}else this.minZoom=1;this.set(this.minZoom)}bindMouseWheel(){de().on("mouse:wheel",e=>{e.e.preventDefault(),e.e.stopPropagation(),ha==null&&(e.e.deltaY<0?this.zoomIn():this.zoomOut())})}}function Xw(t){return new Promise(e=>{xe.fabric.util.loadImage(t,n=>e(new xe.fabric.Image(n)),null,M().config.crossOrigin?"anonymous":void 0)})}function Gw(){return!M().config.image&&!M().config.blankCanvasSize&&(!de()||de().getObjects().length===0)}class fA{constructor(){Ce(this,"minWidth",50);Ce(this,"minHeight",50)}resize(e,n,{applyZoom:r=!1,resizeHelper:i=!0}={}){const s=M().zoom;de().setWidth(e*(r?s:1)),de().setHeight(n*(r?s:1)),M().setOriginal(e,n),i&&L().transform.resetStraightenAnchor()}async addMainImage(e,n="mainImage"){var i,s;M().toggleLoading(n);const r=await Xw(e);if(!!r)return this.clear(),r.set(Gr),r.name=Xe.MainImage,de().add(r),this.resize(r.width,r.height),r.center(),r.setCoords(),L().zoom.fitToScreen(),M().toggleLoading(!1),(s=(i=M().config).onMainImageLoaded)==null||s.call(i,r),r}openNew(e,n,r){return e=Math.max(this.minWidth,e),n=Math.max(this.minHeight,n),this.clear(),this.resize(e,n),de().backgroundColor=r,L().zoom.fitToScreen(),M().toggleLoading("newCanvas"),requestAnimationFrame(()=>{M().toggleLoading(!1)}),Promise.resolve({width:e,height:n})}getMainImage(){return de().getObjects().find(e=>e.name===Xe.MainImage)}render(){de().requestRenderAll()}async loadInitialContent(){var i,s;const e=M().config.image,n=M().config.blankCanvasSize,r=M().config.state;if(e&&e.endsWith("json")){const d=await hl(e);await L().import.loadState(d)}else e&&e.startsWith('{"canvas')?await L().import.loadState(e):e?await this.addMainImage(e):r?await L().import.loadState(r):n&&await this.openNew(n.width,n.height);return Gw()&&((s=(i=M().config.ui)==null?void 0:i.openImageDialog)==null?void 0:s.show)&&M().togglePanel("newImage",!0),new Promise(d=>{setTimeout(()=>{L().history.addInitial(),d()},10)})}clear(){de().clear(),L().frame.remove(),L().transform.resetStraightenAnchor()}}function hA(t){return t.name===Xe.Sticker&&"forEachObject"in t}const dA=["fontSize","fontFamily","left","top","width","height","scaleX","scaleY","flipX","flipY","angle","src","strokeWidth"];function Kw(t={}){de().fire("object:modified",pA(t))}function pA(t){return{values:t,sizeOrPositionChanged:gA(t)}}function gA(t){return Object.keys(t).some(e=>dA.includes(e))}function mA(){M().fabric.on("selection:created",t=>{var e;((e=t.selected)==null?void 0:e[0])&&!qw(t)&&Ap(t.selected[0])}),M().fabric.on("selection:updated",t=>{var e;qw(t)||Ap((e=t.selected)==null?void 0:e[0])}),M().fabric.on("selection:cleared",()=>{Ap()})}function qw(t){var r,i;const[e]=qv((r=t.selected)==null?void 0:r[0]),n=e===M().activeTool;return M().dirty&&(!((i=t.selected)!=null&&i[0])||!n)?(t.deselected&&L().objects.select(t.deselected[0]),!0):!1}function Ap(t){(t==null?void 0:t.data.id)!==M().objects.active.id&&(M().objects.setActive(t!=null?t:null),M().activeTool!==Me.DRAW&&Lf())}class vA{constructor(){this.syncObjects(),mA(),M().fabric.on("text:editing:entered",()=>{M().objects.setIsEditingText(!0)}),M().fabric.on("text:editing:exited",()=>{M().objects.setIsEditingText(!1)}),M().fabric.on("object:added",()=>{this.syncObjects()}),M().fabric.on("object:removed",()=>{this.syncObjects()})}getAll(){return de().getObjects().filter(e=>{var n;return!((n=e==null?void 0:e.data)!=null&&n.photaliusInternal)})}get(e){return this.getAll().find(n=>n.name===e)}getById(e){return this.getAll().find(n=>n.data.id===e)}isActive(e){var r;const n=typeof e=="string"?e:e.data.id;return((r=M().objects.active)==null?void 0:r.id)===n}getActive(){return de().getActiveObject()}has(e){return this.getAll().findIndex(n=>n.name===e)>-1}select(e){const n=typeof e=="string"?this.getById(e):e;!n||(de().setActiveObject(n),de().requestRenderAll())}deselectActive(){de().discardActiveObject(),de().requestRenderAll()}setValues(e,n){if(n=n||this.getActive(),!n)return;let r=!1;hA(n)&&e.fill&&e.fill!==n.fill&&n.forEachObject(i=>i.set("fill",e.fill)),ar(n)?((e.fontFamily!==n.fontFamily||e.fontSize!==n.fontSize)&&(r=!0),n.selectionStart!==n.selectionEnd?n.setSelectionStyles(e):n.set(e)):n.set(e),r?setTimeout(()=>{de().requestRenderAll()},50):de().requestRenderAll(),M().objects.setActive(n),Kw(e)}move(e,n=1,r){r=r||this.getActive(),r&&(e==="up"?this.setValues({top:r.top-n}):e==="down"?this.setValues({top:r.top+n}):e==="left"?this.setValues({left:r.left-n}):e==="right"&&this.setValues({left:r.left+n}),L().canvas.render())}bringToFront(e){e=e||this.getActive(),e&&(e.bringToFront(),L().canvas.render())}sendToBack(e){e=e||this.getActive(),e&&(e.sendToBack(),L().canvas.render())}flipHorizontally(e){e=e||this.getActive(),e&&(this.setValues({flipX:!e.flipX}),L().canvas.render())}duplicate(e){const n=e||this.getActive();!n||(this.deselectActive(),n.clone(r=>{r.set({left:n.left+40,top:n.top+40,data:{...n.data,id:Mp(10)},name:n.name}),de().add(r),this.select(r),L().canvas.render()}))}delete(e){e=e||this.getActive(),e&&(this.deselectActive(),de().remove(e),de().requestRenderAll(),L().history.addHistoryItem({name:"deletedObject"}))}syncObjects(){const e=this.getAll().map(n=>{var r;return{name:n.name,selectable:(r=n.selectable)!=null?r:!1,id:n.data.id}});ue.setState({objects:{...M().objects,all:e}})}}const yA={frame:null,fonts:[]};function Zw(t){return t.state||(t.state=dl()),{...t.state||dl(),name:t.name,id:Mp(15)}}function Qw(t){return t?/^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(t):!1}class bA{constructor(){Ce(this,"loadedAssets",{})}loadAsset(e,n={type:"js"}){return this.loadedAssets[e]==="loaded"&&!n.force?new Promise(r=>r()):!this.loadedAssets[e]||n.force&&this.loadedAssets[e]==="loaded"?(this.loadedAssets[e]=new Promise(r=>{const i=Qw(e)?e:`assets/${e}`,s=Dp(e,n.id);n.type==="css"?this.loadStyleAsset(i,s,r):this.loadScriptAsset(i,s,r,n.parentEl)}),this.loadedAssets[e]):this.loadedAssets[e]}alreadyLoading(e){return this.loadedAssets[e]!=null}loadStyleAsset(e,n,r){const i=document.createElement("link");i.rel="stylesheet",i.id=Dp(e,n),i.href=e,i.onload=()=>{this.loadedAssets[e]="loaded",r()},document.head.appendChild(i)}loadScriptAsset(e,n,r,i){const s=document.createElement("script");s.async=!0,s.id=Dp(e,n),s.src=e,s.onload=()=>{this.loadedAssets[e]="loaded",r()},(i||document.body).appendChild(s)}}function Dp(t,e){return e||t.split("/").pop()}const wA=new bA;function xA(t){return`be-fonts-${t}`}function Jw(t,e){const n=[],r=[];let i=[];if(t.forEach(s=>{"google"in s&&s.google?n.push(s):"src"in s&&r.push(s)}),n!=null&&n.length){const s=t.map(a=>`${a.family}:400`).join("|"),d=wA.loadAsset(`https://fonts.googleapis.com/css?family=${s}&display=swap`,{type:"css",id:xA(e.id)});i.push(d)}if(r!=null&&r.length){const s=r.map(async d=>{const a=Array.from(document.fonts.values()).find(c=>c.family===d.family);if(a)return a.loaded;const o=new FontFace(d.family,`url(${e!=null&&e.prefixSrc?e.prefixSrc(d.src):d.src})`,d.descriptors);return document.fonts.add(o),o.load()});i=i.concat(s)}return Promise.all(i)}function Kt(t){return t?Qw(t)?t:`${M().config.baseUrl?`${M().config.baseUrl}/`:""}${t}`:""}class _A{async undo(){if(this.canUndo()){const e=M().history.items[M().history.pointer-1];await this.load(e)}}async redo(){if(this.canRedo()){const e=M().history.items[M().history.pointer+1];await this.load(e)}}canUndo(){return M().history.canUndo}canRedo(){return M().history.canRedo}reload(){return this.load(M().history.items[M().history.pointer])}replaceCurrent(){const e=M().history.items[M().history.pointer],n=[...M().history.items];n[M().history.pointer]=Zw({name:e.name,state:e})}addHistoryItem(e){const n=Zw(e),i=[...M().history.items.slice(0,M().history.pointer+1),n];M().history.update(i.length-1,i)}load(e){return e={...e,editor:e.editor||yA},new Promise(n=>{Jw(SA(e.canvas.objects),{prefixSrc:Kt,id:"photalius-fonts"}).finally(()=>{de().loadFromJSON(e.canvas,()=>{L().zoom.set(1),e.canvasWidth&&e.canvasHeight&&L().canvas.resize(e.canvasWidth,e.canvasHeight,{resizeHelper:!1,applyZoom:!1}),L().frame.remove(),e.editor.frame&&L().frame.add(e.editor.frame.name,e.editor.frame.sizePercent),L().objects.syncObjects(),L().objects.getAll().forEach(r=>{var i,s;if(!r.data.photaliusInternal&&r.originX==="left"&&r.originY==="top"){const d=r.getPointByOrigin("center","center");r.set("left",d.x),r.set("top",d.y)}r.set({...Yw}),r.type==="i-text"&&(r.padding=(s=(i=M().config.tools)==null?void 0:i.text)==null?void 0:s.controlsPadding)}),L().canvas.render(),de().calcOffset(),L().zoom.fitToScreen(),M().history.updatePointerById(e.id),L().transform.resetStraightenAnchor(),n()})})})}addInitial(e){!M().history.items.find(r=>r.name==="initial")&&(e||!Gw())&&this.addHistoryItem({name:"initial",state:e})}}function SA(t){const e=[];return t.forEach(n=>{var i,s,d;if(!ar(n))return;const r=(d=(s=(i=M().config.tools)==null?void 0:i.text)==null?void 0:s.items)==null?void 0:d.find(a=>a.family===n.fontFamily);r&&e.push(r)}),e}class CA{canMerge(){return L().objects.getAll().filter(e=>e.name!==Xe.MainImage).length>0}async apply(){M().toggleLoading("merge");const e=L().export.getDataUrl();e&&await L().canvas.addMainImage(e,"merge")}}const Yc=[{name:"grayscale"},{name:"blackWhite",fabricType:"blackwhite"},{name:"sharpen",uses:"Convolute",matrix:[0,-1,0,-1,5,-1,0,-1,0]},{name:"invert"},{name:"vintage"},{name:"polaroid"},{name:"kodachrome"},{name:"technicolor"},{name:"brownie"},{name:"sepia"},{name:"removeColor",fabricType:"removecolor",options:{distance:{type:"slider",current:.1,min:0,max:1,step:.01},color:{current:"#fff",type:"colorPicker"}}},{name:"brightness",options:{brightness:{type:"slider",current:.1,min:-1,max:1,step:.1}}},{name:"gamma",options:{red:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},green:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},blue:{type:"slider",current:.1,min:.2,max:2.2,step:.003921}},apply:t=>{t.gamma=[t.red,t.green,t.blue]}},{name:"noise",options:{noise:{type:"slider",current:40,min:1,max:600}}},{name:"pixelate",options:{blocksize:{type:"slider",min:1,max:40,current:6}}},{name:"blur",uses:"Convolute",matrix:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]},{name:"emboss",uses:"Convolute",matrix:[1,1,1,1,.7,-1,-1,-1,-1]},{name:"blendColor",fabricType:"blendcolor",options:{alpha:{type:"slider",current:.5,min:.1,max:1,step:.1},mode:{current:"add",type:"select",available:[{key:"add"},{key:"multiply"},{key:"subtract"},{key:"diff"},{key:"screen"},{key:"lighten"},{key:"darken"}]},color:{type:"colorPicker",current:"#FF4081"}}}],TA={grayscale:se("grayscale"),blackWhite:se("Black & White"),sharpen:se("Sharpen"),invert:se("Invert"),vintage:se("Vintage"),polaroid:se("Polaroid"),kodachrome:se("Kodachrome"),technicolor:se("Technicolor"),brownie:se("Brownie"),sepia:se("Sepia"),removeColor:se("Remove Color"),brightness:se("Brightness"),gamma:se("Gamma"),noise:se("Noise"),pixelate:se("Pixelate"),blur:se("Blur"),emboss:se("Emboss"),blendColor:se("Blend Color")},Rp={distance:se("distance"),color:se("color"),brightness:se("brightness"),red:se("red"),green:se("green"),blue:se("blue"),noise:se("noise"),blocksize:se("blocksize"),mode:se("mode"),alpha:se("alpha")};function Xc(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}class kA{constructor(){ue.subscribe(e=>e.history.pointer,()=>{this.syncState()})}apply(e){M().filter.select(e,this.hasOptions(e));const n=this.getByName(e);if(this.isApplied(n.name)){this.remove(n.name);return}const r=this.create(n);this.getImages().forEach(i=>{var s;(s=i.filters)==null||s.push(r),i.applyFilters()}),this.syncState(),L().canvas.render()}remove(e){M().filter.deselect(e);const n=this.getByName(e);this.getImages().forEach(r=>{var s;const i=this.findFilterIndex(n.name,r.filters);(s=r.filters)==null||s.splice(i,1),r.applyFilters()}),this.syncState(),L().canvas.render()}getAll(){return Yc}getByName(e){return Yc.find(n=>n.name===e)}isApplied(e){const n=L().canvas.getMainImage();return n?this.findFilterIndex(e,n.filters)>-1:!1}applyValue(e,n,r){const i=this.getByName(e);this.getImages().forEach(s=>{const d=(s.filters||[]).find(a=>a.type.toLowerCase()===i.name.toLowerCase());!d||(d[n]=r,i.apply&&i.apply(d,n,r),s.applyFilters())}),L().canvas.render()}addCustom(e,n,r,i){const s=xe.fabric.Image.filters;s[Xc(e)]=xe.fabric.util.createClass(s.BaseFilter,n),s[Xc(e)].fromObject=s.BaseFilter.fromObject,Yc.push({name:e,options:r,initialConfig:i})}create(e){const n=e.initialConfig||{};let r;return e.uses?(n.matrix=e.matrix,r=new xe.fabric.Image.filters[Xc(e.uses)](n)):(Object.entries(e.options||{}).forEach(([i,s])=>{n[i]=s.current}),r=new xe.fabric.Image.filters[Xc(e.name)](n)),r.name=e.name,r}hasOptions(e){return!!this.getByName(e).options}findFilterIndex(e,n){if(!(n!=null&&n.length))return-1;const r=this.getByName(e);return n.findIndex(i=>this.configMatchesFabricFilter(r,i))}syncState(){var r;const e=[];(((r=this.getImages()[0])==null?void 0:r.filters)||[]).forEach(i=>{const s=this.getByFabricFilter(i);s&&e.push(s.name)}),ue.setState({filter:{...M().filter,applied:e}})}getByFabricFilter(e){return Yc.find(n=>this.configMatchesFabricFilter(n,e))}configMatchesFabricFilter(e,n){const r=n.type.toLowerCase().replace(" ","");return r===e.fabricType||r===e.name?!0:r==="convolute"&&this.matrixAreEqual(e.matrix,n.matrix)}matrixAreEqual(e,n){if(!e||!n||e.length!==n.length)return!1;for(let r=e.length;r--;)if(e[r]!==n[r])return!1;return!0}getImages(){return L().objects.getAll().filter(e=>e.name===Xe.Image||e.name===Xe.MainImage)}}function EA(t){return t.width<ex(t.usePercentages)&&(t.width=ex(t.usePercentages),t.maintainAspect&&(t.height=Gc(t.width,t.usePercentages))),t.width>tx(t.usePercentages)&&(t.width=tx(t.usePercentages),t.maintainAspect&&(t.height=Gc(t.width,t.usePercentages))),t.height<nx(t.usePercentages)&&(t.height=nx(t.usePercentages),t.maintainAspect&&(t.width=Ip(t.height,t.usePercentages))),t.height>rx(t.usePercentages)&&(t.height=rx(t.usePercentages),t.maintainAspect&&(t.width=Ip(t.height,t.usePercentages))),t}function ex(t){var n,r;const e=((r=(n=M().config.tools)==null?void 0:n.resize)==null?void 0:r.minWidth)||50;return t?Math.ceil(e*100/M().original.width):e}function tx(t){var n,r;const e=((r=(n=M().config.tools)==null?void 0:n.resize)==null?void 0:r.maxWidth)||2400;return t?Math.ceil(e*100/M().original.width):e}function nx(t){var n,r;const e=((r=(n=M().config.tools)==null?void 0:n.resize)==null?void 0:r.minHeight)||50;return t?Math.ceil(e*100/M().original.height):e}function rx(t){var n,r;const e=((r=(n=M().config.tools)==null?void 0:n.resize)==null?void 0:r.maxHeight)||2400;return t?Math.ceil(e*100/M().original.height):e}function Ip(t,e){if(e)return t;const n=M().original.height/t;return Math.floor(M().original.width/n)}function Gc(t,e){if(e)return t;const n=M().original.width/t;return Math.floor(M().original.height/n)}class OA{apply(e){const{width:n,height:r,usePercentages:i}=EA(e),s=Math.ceil(M().original.width),d=Math.ceil(M().original.height),a=Math.ceil(n),o=Math.ceil(r);let c,h;i?(c=n/100,h=r/100):(c=n/M().original.width,h=r/M().original.height),!(s===a&&d===o)&&this.resize(c,h)}resize(e,n){L().zoom.set(1,!1);const r=Math.round(M().original.height*n),i=Math.round(M().original.width*e);L().canvas.resize(i,r,{applyZoom:!1,resizeHelper:!0}),L().objects.getAll().forEach(s=>{const d=s.scaleX||1,a=s.scaleY||1,o=s.left||0,c=s.top||0,h=d*e,l=a*n,u=o*e,f=c*n;s.scaleX=h,s.scaleY=l,s.left=u,s.top=f,s.setCoords()}),L().zoom.fitToScreen(),de().requestRenderAll()}}function PA(t,e){e.innerZone!==null&&(e=e,MA(t,e),AA(t,e),DA(t,e))}function MA(t,e){e.innerZone.style.width=`${t.width}px`,e.innerZone.style.height=`${t.height}px`,e.innerZone.style.transform=`translate(${t.left}px, ${t.top}px)`}function AA(t,e){const n=M().canvasSize.width,r=M().canvasSize.height;e.maskTop.style.height=`${t.top}px`,e.maskTop.style.width=`${n}px`,e.maskLeft.style.top=`${t.top}px`,e.maskLeft.style.height=`${t.height}px`,e.maskLeft.style.width=`${t.left}px`;const i=t.left+t.width;e.maskRight.style.left=`${i}px`,e.maskRight.style.top=`${t.top}px`,e.maskRight.style.height=`${t.height}px`,e.maskRight.style.width=`${n-i}px`,e.maskBottom.style.height=`${r-(t.top+t.height)}px`,e.maskBottom.style.width=`${n}px`}function DA(t,e){const n=(t.width-2)/3;e.lineVer1.style.height=`${t.height}px`,e.lineVer1.style.transform=`translate(${n}px, 0)`,e.lineVer2.style.height=`${t.height}px`,e.lineVer2.style.transform=`translate(${n*2}px, 0)`;const r=(t.height-2)/3;e.lineHor1.style.width=`${t.width}px`,e.lineHor1.style.transform=`translate(0, ${r}px)`,e.lineHor2.style.width=`${t.width}px`,e.lineHor2.style.transform=`translate(0, ${r*2}px)`}function Lp(t,e,n){let r=e,i=n;return t&&(n*t>e?i=e/t:r=n*t),{width:Math.floor(r),height:Math.floor(i)}}function Fp(t){if(!t)return null;const e=t.split(":");return parseInt(e[0])/parseInt(e[1])}function RA(t,e=null){const n={width:t.width,height:t.height,top:0,left:0,angle:0};if(e){const r=Lp(e,n.width,n.height);n.width=r.width,n.height=r.height}return n.left=(t.width-n.width)/2,n.top=(t.height-n.height)/2,n}class IA{constructor(){Ce(this,"refs",null)}apply(e){var i;const n=(i=L().frame.active.config)==null?void 0:i.name,r=L().frame.active.currentSizeInPercent;return L().frame.active.hide(),L().merge.apply().then(()=>{L().canvas.resize(Math.round(e.width),Math.round(e.height),{applyZoom:!0,resizeHelper:!0});const s=L().canvas.getMainImage();s.cropX=Math.round(e.left),s.cropY=Math.round(e.top),s.width=Math.round(e.width),s.height=Math.round(e.height),s.viewportCenter(),n&&L().frame.add(n,r),L().zoom.fitToScreen(),L().canvas.render()})}drawZone(e){var n;(n=this.refs)!=null&&n.current&&(M().crop.setCropzoneRect(e),PA(e,this.refs.current))}resetCropzone(e){const n=M().canvasSize,r=Fp(e);if(!n)return;M().crop.setAspectRatio(e);const i=RA(n,r);this.drawZone(i)}registerRefs(e){this.refs=e}}class LA{getShapeByName(e){var r,i;const n=(i=(r=M().config.tools)==null?void 0:r.shapes)==null?void 0:i.items;return(n==null?void 0:n.find(s=>s.name===e))||null}addBasicShape(e){var o;const n=this.getShapeByName(e);if(!n)return null;const{width:r,height:i,...s}=((o=M().config.objectDefaults)==null?void 0:o.shape)||{},d={...s,...n.options};let a;if(n.name==="circle")a=new xe.fabric.Circle({...d,radius:100});else if(n.name==="ellipse")a=new xe.fabric.Ellipse({...d,rx:100,ry:50});else if(n.type==="Path")a=new xe.fabric.Path(d.path,{displayName:n.name,...d});else{const c=n.type;a=new xe.fabric[c]({...d,width:150,height:150})}return this.addAndPositionShape(a,Xe.Shape,{width:r,height:i}),a}addSticker(e,n){var i,s,d;const r=(d=(s=(i=M().config.tools)==null?void 0:i.stickers)==null?void 0:s.items)==null?void 0:d.find(a=>a.name===e);if(!r)return Promise.resolve();if(r.type==="svg"){const a=zp(r,n);return this.addSvgSticker(a)}return this.addRegularSticker(r,n)}addRegularSticker(e,n){return new Promise(r=>{xe.fabric.util.loadImage(zp(e,n),i=>{var c;const{width:s,height:d,...a}=((c=M().config.objectDefaults)==null?void 0:c.sticker)||{},o=new xe.fabric.Image(i,a);this.addAndPositionShape(o,Xe.Sticker,{width:s,height:d}),r()})})}addSvgSticker(e,n=Xe.Sticker){return new Promise(r=>{xe.fabric.loadSVGFromURL(e,(i,s)=>{var h;const{width:d,height:a,...o}=((h=M().config.objectDefaults)==null?void 0:h.sticker)||{},c=xe.fabric.util.groupSVGElements(i,s);c.set(o),this.addAndPositionShape(c,n,{width:d,height:a}),r()})})}addAndPositionShape(e,n,{width:r}){e.name=n,e.scaleX=1,e.scaleY=1,de().add(e);const i=r||M().original.width*M().zoom/4;e.scaleToWidth(Math.min(150,i)),e.viewportCenter(),e.setCoords(),L().canvas.render(),de().setActiveObject(e)}}function zp(t,e){return Kt(`images/stickers/${t.name}/${e}.${t.type}`)}class FA{constructor(e){Ce(this,"patternCache",[]);this.activeFrame=e}fillParts(e){this.patternCache.forEach(n=>{this.fillPartWithPattern(n,e)})}fillPartWithPattern(e,n){if(!this.activeFrame.parts)return;e.canvas=new xe.fabric.StaticCanvas(null),e.canvas.add(e.img);const r=new xe.fabric.Pattern({source:e.canvas.getElement(),repeat:n==="repeat"?"repeat":"no-repeat"});this.activeFrame.parts[e.name]&&this.activeFrame.parts[e.name].set("fill",r)}scale(e){if(!this.activeFrame.config||!this.patternCache)return;const n=this.activeFrame.config.mode;e/=de().getRetinaScaling(),this.patternCache.forEach(r=>{!this.activeFrame.parts||(r.name==="top"||r.name==="bottom"?n==="stretch"?(this.scalePatternToWidth(r.img,this.activeFrame.parts.top.getScaledWidth()),this.scalePatternToHeight(r.img,e)):r.img.scaleToHeight(e):r.name==="left"||r.name==="right"?n==="stretch"?(this.scalePatternToWidth(r.img,e),this.scalePatternToHeight(r.img,this.activeFrame.parts.left.getScaledHeight())):r.img.scaleToWidth(e):n==="stretch"?(this.scalePatternToWidth(r.img,e),this.scalePatternToHeight(r.img,e)):r.img.scaleToWidth(e),r.canvas.setDimensions({width:r.img.getScaledWidth(),height:r.img.getScaledHeight()}))}),L().canvas.render()}scalePatternToWidth(e,n){if(!e.width)return;const r=e.getBoundingRect().width/e.getScaledWidth();e.set("scaleX",n/e.width/r),e.setCoords()}scalePatternToHeight(e,n){if(!e.height)return;const r=e.getBoundingRect().height/e.getScaledHeight();e.set("scaleY",n/e.height/r),e.setCoords()}load(e){const n=this.activeFrame.getPartNames().map(r=>new Promise(i=>{const s={...Gr,originX:"left",originY:"top"};M().config.crossOrigin&&(s.crossOrigin="anonymous"),xe.fabric.Image.fromURL(this.getPartUrl(e,r),d=>{i({name:r,img:d})},s)}));return Promise.all(n).then(r=>{this.patternCache=r,this.fillParts(e.mode)})}getPartUrl(e,n){return Kt(`images/frames/${e.name}/${n}.png`)}}class zA{constructor(e,n){this.activeFrame=e,this.patterns=n}get defaultColor(){var e,n;return(n=(e=M().config.objectDefaults)==null?void 0:e.global)==null?void 0:n.fill}build(e,n){if(this.createParts(e),this.resize(n),this.activeFrame.config=e,e.mode==="basic"){L().canvas.render();return}this.patterns.load(e).then(()=>{this.patterns.scale(n),L().canvas.render()})}createParts(e){const n={};this.activeFrame.getPartNames().forEach(r=>{const i=e.mode==="basic"?this.defaultColor:void 0;n[r]=new xe.fabric.Rect({...Gr,fill:i,originX:"left",originY:"top",name:`frame.rect.${r}`,objectCaching:!1,data:{photaliusInternal:!0}}),de().add(n[r])}),this.activeFrame.parts=n}resize(e){const n=M().original.width,r=M().original.height,i=this.activeFrame,s=e;!i.parts||(i.parts.topLeft.set({width:s,height:s}),i.parts.topRight.set({left:n-i.parts.topLeft.getScaledWidth(),width:s,height:s}),i.parts.top.set({left:i.parts.topLeft.getScaledWidth()-1,width:n-i.parts.topLeft.getScaledWidth()-i.parts.topRight.getScaledWidth()+3,height:s}),i.parts.bottomLeft.set({top:r-i.parts.topLeft.getScaledHeight(),width:s,height:s}),i.parts.left.set({top:i.parts.topLeft.getScaledHeight()-1,width:s,height:r-i.parts.topLeft.getScaledHeight()-i.parts.bottomLeft.getScaledHeight()+3}),i.parts.bottomRight.set({left:n-i.parts.bottomLeft.getScaledWidth(),top:r-i.parts.topRight.getScaledWidth(),width:s,height:s}),i.parts.bottom.set({left:i.parts.top.left,top:r-i.parts.top.getScaledHeight(),width:i.parts.top.getScaledWidth(),height:s}),i.parts.right.set({left:n-i.parts.left.getScaledWidth(),top:i.parts.left.top,width:i.parts.left.width,height:i.parts.left.getScaledHeight()}))}}class NA{constructor(){Ce(this,"corners",["topLeft","topRight","bottomLeft","bottomRight"]);Ce(this,"sides",["top","right","bottom","left"]);Ce(this,"parts",null);Ce(this,"config",null);Ce(this,"currentSizeInPercent",100)}getPartNames(){return[...this.corners,...this.sides]}hide(){!this.parts||(Object.values(this.parts).forEach(e=>e.set({visible:!1})),L().canvas.render())}show(){!this.parts||(Object.values(this.parts).forEach(e=>e.set({visible:!0})),L().canvas.render())}remove(){!this.parts||(this.config=null,Object.values(this.parts).forEach(e=>{de().remove(e)}),this.parts=null,L().canvas.render())}is(e){return this.config?this.config.name===e.name:!1}changeColor(e){var n;((n=this.config)==null?void 0:n.mode)!=="basic"||!this.parts||(Object.values(this.parts).forEach(r=>{r.set("fill",e)}),L().canvas.render())}getMinSize(){var e,n;return(n=(e=this.config)==null?void 0:e.size.min)!=null?n:1}getMaxSize(){var e,n;return(n=(e=this.config)==null?void 0:e.size.max)!=null?n:35}}class jA{constructor(){Ce(this,"patterns");Ce(this,"builder");Ce(this,"active");this.active=new NA,this.patterns=new FA(this.active),this.builder=new zA(this.active,this.patterns),de().on("object:added",()=>{Object.values(this.active.parts||[]).forEach(e=>e.moveTo(98))})}add(e,n){const r=this.getByName(e);if(!r||this.active.is(r))return;this.active.remove(),this.active.currentSizeInPercent=n!=null?n:r.size.default;const i=this.calcFrameSizeInPixels(this.active.currentSizeInPercent);this.builder.build(r,i),M().frame.select(r)}resize(e){if(!this.active.parts||!this.active.config)return;e?this.active.currentSizeInPercent=e:e=this.active.currentSizeInPercent;const n=this.calcFrameSizeInPixels(e);this.builder.resize(n),this.patterns.scale(n),L().canvas.render()}changeColor(e){this.active.changeColor(e)}remove(){this.active.remove(),M().frame.deselect()}getByName(e){var r,i;const n=(i=(r=M().config.tools)==null?void 0:r.frame)==null?void 0:i.items;if(n)return n.find(s=>s.name===e)}getActiveFrameConfig(){return this.active.config}calcFrameSizeInPixels(e){const n=Math.min(M().original.width,M().original.height);return Math.ceil(e/100*n)}}class BA{constructor(){Ce(this,"minWidth",250)}add(e,n={}){var s,d,a,o,c;if(e=e||((d=(s=M().config.tools)==null?void 0:s.text)==null?void 0:d.defaultText),!e)return;const r={...(a=M().config.objectDefaults)==null?void 0:a.text,...n,name:Xe.Text,padding:(c=(o=M().config.tools)==null?void 0:o.text)==null?void 0:c.controlsPadding,editingBorderColor:ff.fill},i=new xe.fabric.IText(e,r);de().add(i),n.left==null&&n.top==null&&this.autoPositionText(i),L().objects.select(i)}autoPositionText(e){const n=de().getWidth(),r=de().getHeight(),i=Math.min(de().getWidth(),this.minWidth);e.scaleToWidth(Math.max(n/3,i)),e.getScaledHeight()>r&&e.scaleToHeight(r-e.getScaledHeight()-20),e.viewportCenter(),de().getObjects("i-text").forEach(s=>{if(s!==e&&s.intersectsWithObject(e)){const d=s.top-e.top+s.getScaledHeight();let a=e.top+d;a>M().original.height-s.getScaledHeight()&&(a=0),e.set("top",a),e.setCoords()}})}selectOrAddText(e,n={}){if(M().objects.active.isText)return!1;const r=L().objects.getAll().find(i=>ar(i));return r?(L().objects.select(r),!1):(this.add(e,n),!0)}}const VA=t=>{const e=new xe.fabric.PatternBrush(t);return e.getPatternSrc=function(){const r=xe.fabric.document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(0,5),i.lineTo(10,5),i.closePath(),i.stroke(),r},e},$A=t=>{const e=new xe.fabric.PatternBrush(t);return e.getPatternSrc=function(){const r=document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(5,0),i.lineTo(5,10),i.closePath(),i.stroke(),r},e},UA=t=>{const e=new xe.fabric.PatternBrush(t);return e.getPatternSrc=function(){const r=this.width/2,i=5,s=document.createElement("canvas"),d=new xe.fabric.Rect({width:r,height:r,angle:45,fill:this.color}),a=d.getBoundingRect().width;s.width=a+i,s.height=a+i,d.set({left:a/2,top:a/2});const o=s.getContext("2d");return d.render(o),s},e},HA=t=>{const e=new xe.fabric.PatternBrush(t);return e.getPatternSrc=function(){const s=document.createElement("canvas");s.width=10+2,s.height=10+2;const d=s.getContext("2d");return d.fillStyle=this.color,d.fillRect(0,0,10,10),s},e};class WA{constructor(){Ce(this,"customBrushes",{VLineBrush:VA,HLineBrush:$A,DiamondBrush:UA,SquareBrush:HA});Ce(this,"currentBrush",{type:"PencilBrush",color:(aS=(sS=M().config.objectDefaults)==null?void 0:sS.global)==null?void 0:aS.fill,width:iv[1]});Ce(this,"onPathCreated",e=>{e.path.name=Xe.Drawing,e.path.set(YA()),M().setDirty(!0)})}enable(){de().on("path:created",this.onPathCreated),de().isDrawingMode=!0,this.setBrushType(this.currentBrush.type),this.setBrushSize(this.currentBrush.width)}disable(){de().off("path:created",this.onPathCreated),de().isDrawingMode=!1}getBrushType(){return this.currentBrush.type}setBrushType(e){this.currentBrush.type=e,de().freeDrawingBrush=e in xe.fabric?new xe.fabric[e](de()):this.customBrushes[e](de()),this.applyBrushStyles()}applyBrushStyles(){Object.keys(this.currentBrush).forEach(n=>{de().freeDrawingBrush[n]=this.currentBrush[n]});const e=de().freeDrawingBrush;e.getPatternSrc&&(e.source=e.getPatternSrc.call(e))}setBrushSize(e){this.currentBrush.width=e,this.applyBrushStyles()}getBrushSize(){return this.currentBrush.width}setBrushColor(e){this.currentBrush.color=e,this.applyBrushStyles()}getBrushColor(){return this.currentBrush.color}}function YA(){const t={...Gr};return delete t.strokeWidth,t}function ix(t){var n;return((n=/(?:\.([^.]+))?$/.exec(t))==null?void 0:n[1])||""}function XA(t){const e={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml"},n=t.name?ix(t.name):null;return t.type?t.type:n&&n in e?e[n]:"application/octet-stream"}let GA=0;function KA(){return GA}class da{constructor(e,n){Ce(this,"id");Ce(this,"fingerprint");Ce(this,"name");Ce(this,"relativePath","");Ce(this,"size");Ce(this,"mime","");Ce(this,"extension","");Ce(this,"native");Ce(this,"lastModified");Ce(this,"cachedData");this.id=Zv(),this.name=e.name,this.size=e.size,this.mime=XA(e),this.lastModified=e.lastModified,this.extension=ix(e.name)||"bin",this.native=e,n=n||e.webkitRelativePath||"",n=n.replace(/^\/+/g,""),n&&n.split("/").length>1&&(this.relativePath=n),this.fingerprint=qA({name:this.name,size:this.size,mime:this.mime,lastModified:this.lastModified})}get data(){return new Promise(e=>{this.cachedData&&e(this.cachedData);const n=new FileReader;n.addEventListener("load",()=>{this.cachedData=n.result,e(this.cachedData)}),this.extension==="json"?n.readAsText(this.native):n.readAsDataURL(this.native)})}}function qA({name:t,mime:e,size:n,relativePath:r,lastModified:i}){let s="be";return typeof t=="string"&&(s+=`-${ox(t.toLowerCase())}`),e&&(s+=`-${e}`),typeof r=="string"&&(s+=`-${ox(r.toLowerCase())}`),n!==void 0&&(s+=`-${n}`),i!==void 0&&(s+=`-${i}`),s+=`${KA()}`,`${s}-v1`}function ZA(t){return t.charCodeAt(0).toString(32)}function ox(t){let e="";return t.replace(/[^A-Z0-9]/gi,n=>(e+=`-${ZA(n)}`,"/"))+e}function QA(t={}){var r;const e=document.querySelector("#hidden-file-upload-input");e&&e.remove();const n=document.createElement("input");return n.type="file",n.multiple=(r=t.multiple)!=null?r:!1,n.classList.add("hidden"),n.style.display="none",n.style.visibility="hidden",n.id="hidden-file-upload-input",n.accept=JA(t),t.directory&&(n.webkitdirectory=!0),document.body.appendChild(n),n}function JA({extensions:t=[],types:e=[]}){const n=[];return t!=null&&t.length&&(t=t.map(r=>r.startsWith(".")?r:`.${r}`),n.push(t.join(","))),e!=null&&e.length&&n.push(e.join(",")),n.join(",")}function eD(t={}){return new Promise(e=>{const n=QA(t);n.onchange=r=>{const i=r.target.files;if(!i)return e([]);const s=Array.from(i).filter(d=>d.name!==".DS_Store").map(d=>new da(d));e(s),n.remove()},document.body.appendChild(n),n.click()})}async function sx(t,e=!0,n=!0){const r=await Xw(t);if(!!r)return new Promise(i=>{r.name=Xe.Image,r.opacity=0;const s=M().original.width,d=M().original.height;if(e&&(r.width>=s||r.height>=d)){const a=s-.1*s,o=d-.1*d,c=1/Math.min(o/r.getScaledHeight(),a/r.getScaledWidth());r.scaleX*=1/c,r.scaleY*=1/c}M().fabric.add(r),n&&M().fabric.setActiveObject(r),r.viewportCenter(),r.setCoords(),M().fabric.requestRenderAll(),L().zoom.fitToScreen(),r.animate("opacity","1",{duration:425,onChange:()=>{M().fabric.requestRenderAll()},onComplete:()=>{i(r)}})})}var Np=(t=>(t.image="image/*",t.audio="audio/*",t.json="application/json",t.video="video/mp4,video/mpeg,video/x-m4v,video/*",t))(Np||{});function tD(t){if(t==null||Number.isNaN(t))return"";const e=t<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return`${(e?"-":"")+t} B`;const r=Math.min(Math.floor(Math.log(t)/Math.log(1024)),n.length-1);t=Number(t/Math.pow(1024,r));const i=n[r];return t>=10||t%1===0?`${(e?"-":"")+t.toFixed(0)} ${i}`:`${(e?"-":"")+t.toFixed(1)} ${i}`}function ax(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}ax.prototype.match=function(t){var e=!0,n=this.parts,r,i=n.length,s;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(s=(t||"").split(this.separator),r=0;e&&r<i;r++)n[r]!=="*"&&(r<s.length?e=n[r]===s[r]:e=!1);e=e&&s}else if(typeof t.splice=="function")for(e=[],r=t.length;r--;)this.match(t[r])&&(e[e.length]=t[r]);else if(typeof t=="object"){e={};for(var d in t)this.match(d)&&(e[d]=t[d])}return e};var nD=function(t,e,n){var r=new ax(t,n||/[\/\.]/);return typeof e<"u"?r.match(e):r},rD=nD,iD=/[\/\+\.]/,oD=function(t,e){function n(r){var i=rD(r,t,iD);return i&&i.length>=2}return e?n(e.split(";")[0]):n};function sD(t,e){if(!e)return;const{maxFileSize:n,allowedFileTypes:r,blockedFileTypes:i}=e;if(n&&t.size!=null&&t.size>n)return se("`:file` exceeds maximum allowed size of :size",{values:{file:t.name,size:tD(n)}});if(r!=null&&r.length&&!lx(t,r)||i!=null&&i.length&&lx(t,i))return se("This file type is not allowed")}function lx(t,e){return e.map(n=>n.split(",")).flat().some(n=>n.includes("/")?t.mime?oD(t.mime.replace(/;.*?$/,""),n):!1:n.replace(".","")&&t.extension?t.extension.toLowerCase()===n.toLowerCase():!1)}function aD(t,e){if(t==null)return 0;switch(e){case"KB":return t*1024;case"MB":return t*1024**2;case"GB":return t*1024**3;case"TB":return t*1024**4;case"PB":return t*1024**5;default:return t}}class lD{async uploadAndAddImage(e=!0){const n=await this.openUploadWindow();await this.openUploadedFile(n,e)}async uploadAndReplaceMainImage(){const e=await this.openUploadWindow();e&&await this.openBackgroundImage(e)}async uploadAndOpenStateFile(){const e=await this.openUploadWindow(uD);e&&await this.loadState(await e.data)}async addImageFromUrl(e,n=!0){var r,i,s;await sx(e,(s=(i=(r=M().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)!=null?s:!0,n),L().history.addHistoryItem({name:"overlayImage"})}async addImageFromData(e,n=!0){var r,i,s;await sx(e,(s=(i=(r=M().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)!=null?s:!0,n),L().history.addHistoryItem({name:"overlayImage"})}async openUploadedFile(e,n=!0){if(!e)return;const r=await e.data;switch(e.extension){case"json":await this.loadState(r);break;case"svg":await L().shape.addSvgSticker(r,Xe.Image),L().history.addHistoryItem({name:"overlayImage"});break;default:await this.addImageFromData(r,n)}}async loadState(e){M().toggleLoading("state"),await If();let n;typeof e=="string"?e.endsWith(".json")?n=await hl(e):n=JSON.parse(e):n=e,n.history?M().history.reset(n.history):await L().history.addInitial(n),await L().history.reload(),M().toggleLoading(!1)}async openUploadWindow(e){var r,i;e=e||cD();const n=(await eD(e))[0];return this.fileIsValid(n)?((i=(r=M().config).onFileOpen)==null||i.call(r,n),n):null}async openBackgroundImage(e){await If();let n;e instanceof HTMLImageElement?n=e.src:e instanceof da?n=await e.data:n=e;const r=await L().canvas.addMainImage(n);return await L().history.addInitial(),r}fileIsValid(e){var s,d,a,o,c,h;const n=(a=(d=(s=M().config.tools)==null?void 0:s.import)==null?void 0:d.maxFileSize)!=null?a:aD(10,"MB"),r=[...(h=(c=(o=M().config.tools)==null?void 0:o.import)==null?void 0:c.validImgExtensions)!=null?h:[],"json"],i=sD(e,{maxFileSize:n,allowedFileTypes:r});return i?(qi.danger(i),!1):!0}}function cD(){var e,n;const t=(n=(e=M().config.tools)==null?void 0:e.import)==null?void 0:n.validImgExtensions;return t?{extensions:t}:{types:[Np.image]}}const uD={types:[".json",Np.json]};class fD{constructor(){Ce(this,"watermark",null);Ce(this,"lineStyle",{stroke:"rgba(255,255,255,0.3)",strokeWidth:5,strokeLineCap:"round",strokeLineJoin:"round"})}add(e){this.createGroup(),this.addText(e),this.addLines(),de().add(this.watermark),L().canvas.render()}remove(){!this.watermark||(de().remove(this.watermark),this.watermark=null,L().canvas.render())}createGroup(){this.watermark=new xe.fabric.Group(void 0,{...Gr,width:M().original.width,height:M().original.height,excludeFromExport:!0,top:0,left:0,originX:"left",originY:"top"})}addText(e){var r;const n=new xe.fabric.Text(e,{fill:"rgba(255,255,255,0.3)",strokeWidth:2,stroke:"rgba(255,255,255,0.4)",originX:"center",originY:"center",fontWeight:600,fontSize:150,fontFamily:"Courier New"});n.scaleToWidth(M().original.width/2),(r=this.watermark)==null||r.add(n)}addLines(){var h;if(!this.watermark)return;const e=(h=this.watermark)==null?void 0:h.getObjects("text")[0],n=M().original.width/2,r=M().original.height/2,i=100,s=e.width/4,d=new xe.fabric.Line(void 0,this.lineStyle),a=new xe.fabric.Line(void 0,this.lineStyle),o=new xe.fabric.Line(void 0,this.lineStyle),c=new xe.fabric.Line(void 0,this.lineStyle);this.watermark.add(d,a,o,c),d.set({x1:s,y1:-i,x2:n,y2:-r}),a.set({x1:s,y1:i,x2:n,y2:r}),o.set({x1:-s,y1:-i,x2:-n,y2:-r}),c.set({x1:-s,y1:i,x2:-n,y2:r})}}var cx={exports:{}};(function(t,e){(function(n,r){r()})(ht,function(){function n(c,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,h,l){var u=new XMLHttpRequest;u.open("GET",c),u.responseType="blob",u.onload=function(){o(u.response,h,l)},u.onerror=function(){console.error("could not download file")},u.send()}function i(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ht=="object"&&ht.global===ht?ht:void 0,a=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,h,l){var u=d.URL||d.webkitURL,f=document.createElement("a");h=h||c.name||"download",f.download=h,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):i(f.href)?r(c,h,l):s(f,f.target="_blank")):(f.href=u.createObjectURL(c),setTimeout(function(){u.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,l){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,l),h);else if(i(c))r(c,h,l);else{var u=document.createElement("a");u.href=c,u.target="_blank",setTimeout(function(){s(u)})}}:function(c,h,l,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof c=="string")return r(c,h,l);var f=c.type==="application/octet-stream",p=/constructor/i.test(d.HTMLElement)||d.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||f&&p||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var b=g.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=b:location=b,u=null},g.readAsDataURL(c)}else{var v=d.URL||d.webkitURL,y=v.createObjectURL(c);u?u.location=y:location.href=y,u=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});d.saveAs=o.saveAs=o,t.exports=o})})(cx);function hD(t,e,n){e=e||"",n=n||512;const r=atob(t),i=[];for(let s=0;s<r.length;s+=n){const d=r.slice(s,s+n),a=new Array(d.length);for(let c=0;c<d.length;c++)a[c]=d.charCodeAt(c);const o=new Uint8Array(a);i.push(o)}return new Blob(i,{type:e})}class dD{save(e,n,r){var a,o,c;const i=(a=M().config.tools)==null?void 0:a.export;e=e||(i==null?void 0:i.defaultName),n=this.getFormat(n),r=this.getQuality(r);const s=`${e}.${n}`;this.applyWaterMark();const d=n==="json"?this.getJsonState():this.getDataUrl(n,r);if(L().watermark.remove(),!!d)if(M().config.saveUrl)fetch(M().config.saveUrl,{method:"POST",body:JSON.stringify({data:d,filename:s,format:n})});else if(M().config.onSave)(c=(o=M().config).onSave)==null||c.call(o,d,s,n);else{const h=this.getCanvasBlob(n,d);cx.exports.saveAs(h,s)}}getDataUrl(e,n){this.prepareCanvas();try{return e==="svg"?de().toSVG():de().toDataURL({format:this.getFormat(e),quality:this.getQuality(n),multiplier:Math.max(M().original.width/de().width,M().original.height/de().height)})}catch(r){r.message.toLowerCase().includes("tainted")&&qi.danger(se("Could not export canvas with external image."))}return null}getCanvasBlob(e,n){if(e==="json")return new Blob([n],{type:"application/json"});if(e==="svg")return new Blob([n],{type:"image/svg+xml"});const r=`image/${e}`;return n=n.replace(/data:image\/([a-z]*)?;base64,/,""),hD(n,r)}getJsonState(){return JSON.stringify({...dl(),history:M().history})}prepareCanvas(){de().discardActiveObject()}applyWaterMark(){const e=M().config.watermarkText;e&&L().watermark.add(e)}getFormat(e){var r;const n=(r=M().config.tools)==null?void 0:r.export;return e=e||(n==null?void 0:n.defaultFormat)||"png",e==="jpg"&&(e="jpeg"),e}getQuality(e){var r;const n=(r=M().config.tools)==null?void 0:r.export;return e=e||(n==null?void 0:n.defaultQuality)||.8,e}}class pD{constructor(){Ce(this,"previewRect",null)}async apply(e){this.previewRect||this.showPreview(),this.updatePreview(e),de().remove(this.previewRect),de().clipPath=this.previewRect;const n=L().export.getDataUrl();n&&L().canvas.clear(),this.hidePreview(),n&&await L().canvas.addMainImage(n),de().clipPath=void 0}getPreviewRadius(){var e;return((e=this.previewRect)==null?void 0:e.rx)||0}updatePreview(e){!this.previewRect||(this.previewRect.set({rx:e,ry:e}),L().canvas.render())}showPreview(){const e=M().original.width*.04;this.previewRect=new xe.fabric.Rect({width:M().original.width,height:M().original.height,rx:e,ry:e,objectCaching:!1,fill:"transparent",name:"round.rect",data:{photaliusInternal:!0},stroke:"rgba(255,255,255,0.8)",strokeWidth:3,strokeDashArray:[4,4],selectable:!1,evented:!1}),de().add(this.previewRect),this.previewRect.moveTo(99),this.previewRect.viewportCenter(),L().canvas.render()}hidePreview(){!this.previewRect||(de().remove(this.previewRect),L().canvas.render(),this.previewRect=null)}}class gD{get straightenAnchor(){return de().getObjects().find(e=>e.name===Xe.StraightenAnchor)}rotateLeft(){this.rotateFixed(-90)}rotateRight(){this.rotateFixed(90)}straighten(e){this.storeObjectsRelationToHelper(),L().objects.deselectActive();const n=(this.straightenAnchor.data.rotateAngle||0)+e,r=this.getImageScale(n,this.straightenAnchor);this.straightenAnchor.angle=n,this.straightenAnchor.scaleX=r,this.straightenAnchor.scaleY=r,this.straightenAnchor.data.straightenAngle=e,this.transformObjectsBasedOnHelper()}flip(e){const n=e==="horizontal"?"flipY":"flipX";L().objects.getAll().forEach(r=>{r[n]=!r[n]}),L().canvas.render()}rotateFixed(e){L().zoom.set(1,!1),L().objects.deselectActive();const n=this.straightenAnchor.data.rotateAngle||0;e=Math.round(e/90)*90;const r=n+(this.straightenAnchor.data.straightenAngle||0)+e;L().canvas.resize(M().original.height,M().original.width,{applyZoom:!1,resizeHelper:!1}),this.storeObjectsRelationToHelper(),this.straightenAnchor.rotate(r),this.straightenAnchor.data.rotateAngle=n+e,this.straightenAnchor.center(),this.transformObjectsBasedOnHelper(),L().frame.resize(L().frame.active.currentSizeInPercent),requestAnimationFrame(()=>{L().zoom.fitToScreen()})}getImageScale(e,n){e=xe.fabric.util.degreesToRadians(e);const r=M().original.width,i=M().original.height,s=r/2,d=i/2,a=n.width/2,o=n.height/2,c=Math.sqrt(s**2+d**2),h=Math.asin(d/c);let l=(e%(Math.PI*2)+Math.PI*4)%(Math.PI*2);l>Math.PI&&(l-=Math.PI),l>Math.PI/2&&l<=Math.PI&&(l=Math.PI/2-(l-Math.PI/2));const u=Math.PI/2-h-Math.abs(l),f=Math.abs(h-Math.abs(l)),p=Math.cos(u)*c,m=Math.cos(f)*c;return Math.max(m/a,p/o)}storeObjectsRelationToHelper(){L().objects.getAll().forEach(e=>{if(e!==this.straightenAnchor){const n=xe.fabric.util.multiplyTransformMatrices(xe.fabric.util.invertTransform(this.straightenAnchor.calcTransformMatrix()),e.calcTransformMatrix());e.data={...e.data,relationToCanvas:n}}})}transformObjectsBasedOnHelper(){L().objects.getAll().forEach(e=>{if(e.data.relationToCanvas){const n=xe.fabric.util.multiplyTransformMatrices(this.straightenAnchor.calcTransformMatrix(),e.data.relationToCanvas),r=xe.fabric.util.qrDecompose(n);e.set({flipX:!1,flipY:!1}),e.setPositionByOrigin({x:r.translateX,y:r.translateY},"center","center"),e.set(r),e.setCoords(),e.data.relationToCanvas=null}})}resetStraightenAnchor(){const e=this.straightenAnchor;e&&de().remove(e);const n=new xe.fabric.Rect({...Gr,name:Xe.StraightenAnchor,visible:!1,width:M().original.width,height:M().original.height,data:{photaliusInternal:!0,straightenAngle:0,rotateAngle:0}});de().add(n),n.viewportCenter()}}function mD(t){const e=cA(t);M().editor.fabric=e,ue.setState({fabric:e}),M().editor.tools={canvas:new fA,objects:new vA,zoom:new uA,history:new _A,filter:new kA,resize:new OA,crop:new IA,merge:new CA,shape:new LA,frame:new jA,text:new BA,draw:new WA,transform:new gD,import:new lD,watermark:new fD,export:new dD,corners:new pD}}function ux(t,e){const n=new ResizeObserver(r=>{const i=r[0].contentRect;e({width:i.width,height:i.height})});return t.current&&n.observe(t.current),()=>{t.current&&n.unobserve(t.current)}}function fx(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}const hx="flex flex-shrink-0 items-center justify-between px-12 py-[9px] w-full h-[54px]",dx={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,position:"absolute"},transition:{type:"tween",duration:.15}};function jp(t,{padding:e,equalWidth:n,variant:r}={}){switch(t){case"2xs":return r==="link"?"text-xs":`text-xs h-24 ${n?"w-24":e||"px-10"}`;case"xs":return r==="link"?"text-xs":`text-xs h-30 ${n?"w-30":e||"px-14"}`;case"sm":return r==="link"?"text-sm":`text-sm h-36 ${n?"w-36":e||"px-18"}`;case"md":return r==="link"?"text-base":`text-base h-42 ${n?"w-42":e||"px-22"}`;case"lg":return r==="link"?"text-lg":`text-base h-50 ${n?"w-50":e||"px-26"}`;case"xl":return r==="link"?"text-xl":`text-lg h-60 ${n?"w-60":e||"px-32"}`;default:return t||""}}function vD(t){const{variant:e,shadow:n,whitespace:r="whitespace-nowrap"}=t,i={...t,border:t.border||"border"};let s=[];return e==="outline"?s=yD(i):e==="text"?s=bD(i):e==="flat"||e==="raised"?s=xD(i):e==="link"&&(s=wD(i)),[...s,n||e==="raised"&&"shadow-md",r,e&&"align-middle inline-flex flex-shrink-0 items-center transition-button duration-200","select-none appearance-none no-underline outline-none disabled:pointer-events-none disabled:cursor-default"]}function yD({color:t,border:e}){const n="disabled:text-disabled disabled:bg-transparent disabled:border-disabled-bg";switch(t){case"primary":return[`text-primary bg-transparent ${e} border-primary/50`,"hover:bg-primary/hover hover:border-primary",n];case"danger":return[`text-danger bg-transparent ${e} border-danger/50`,"hover:bg-danger/4 hover:border-danger",n];case"paper":return[`text bg-paper ${e}`,"hover:bg-hover",n];default:return[`bg-transparent ${e}`,"hover:bg-hover",n]}}function bD({color:t}){const e="disabled:text-disabled disabled:bg-transparent";switch(t){case"primary":return["text-primary bg-transparent border-transparent","hover:bg-primary/4",e];case"danger":return["text-danger bg-transparent border-transparent","hover:bg-danger/4",e];case"white":return["text-white bg-transparent border-transparent","hover:bg-white/20","disabled:text-white/70 disabled:bg-transparent"];default:return["bg-transparent border-transparent","hover:bg-hover",e]}}function wD({color:t}){switch(t){case"primary":return["text-primary","hover:underline","disabled:text-disabled"];case"danger":return["text-danger","hover:underline","disabled:text-disabled"];default:return["text-main","hover:underline","disabled:text-disabled"]}}function xD({color:t,border:e}){const n="disabled:text-disabled disabled:bg-disabled disabled:border-transparent disabled:shadow-none";switch(t){case"primary":return[`text-on-primary bg-primary ${e} border-primary`,"hover:bg-primary-dark hover:border-primary-dark",n];case"danger":return[`text-white bg-danger ${e} border-danger`,"hover:bg-danger/90 hover:border-danger/90",n];case"chip":return[`text-main bg-chip ${e} border-chip`,"hover:bg-chip/90 hover:border-chip/90",n];case"paper":return[`text-main bg-paper ${e} border-paper`,"hover:bg-paper/90 hover:border-paper/90",n];case"white":return[`text-black bg-white ${e} border-white`,"hover:bg-white",n];default:return[`bg ${e} border-background`,"hover:bg-hover",n]}}function zt(t){return t&&(e=>{e.currentTarget.contains(e.target)&&t(e)})}const Gn=E.exports.forwardRef((t,e)=>{const{children:n,color:r=null,variant:i,radius:s,shadow:d,whitespace:a,justify:o="justify-center",className:c,href:h,form:l,border:u,elementType:f,to:p,relative:m,replace:g,end:v,type:y="button",onClick:b,onPointerDown:w,onPointerUp:x,onKeyDown:S,...C}=t,k=f||(h?"a":"button"),I=k==="a";return _(k,{ref:e,form:I?void 0:l,href:h,to:p,relative:m,type:I?void 0:y,replace:g,end:v,onPointerDown:zt(w),onPointerUp:zt(x),onClick:zt(b),onKeyDown:zt(S),className:fe("focus-visible:ring",vD({variant:i,color:r,border:u,whitespace:a}),s,o,c),...C,children:n})}),bt=he.forwardRef(({children:t,startIcon:e,endIcon:n,size:r="sm",className:i,equalWidth:s=!1,radius:d="rounded",variant:a="text",...o},c)=>{const h=fe("font-semibold",jp(r,{equalWidth:s,variant:a}),i);return oe(Gn,{className:h,ref:c,radius:d,variant:a,...o,children:[e&&_(px,{position:"start",icon:e,size:r}),t,n&&_(px,{position:"end",icon:n,size:r})]})});function px({icon:t,position:e,size:n}){const r=fe("m-auto",{"-ml-4 mr-8":e==="start","-mr-4 ml-8":e==="end"},t.props.className);return he.cloneElement(t,{className:r,size:n})}var gx={exports:{}};(function(t){(function(){var e=Object.assign;typeof e!="function"&&(e=function(){var i=arguments,s=arguments[0];if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var d=1;d<i.length;d++)if(i[d]&&typeof i[d]=="object")for(var a in i[d])s[a]=i[d][a];return s});function n(i){var s=i+"",d=s.indexOf("...");return d>=0&&(d<s.indexOf(")")||s.indexOf("arguments")>=0)}function r(i,s){s||(s={});var d=s.vargs||n(i),a=Object.create(null),o=[],c=[],h,l=new WeakMap,u=function(b,w,x){return setTimeout(function(){if(x){w.splice(b,1),x.splice(b,1);return}w instanceof WeakMap?w.delete(b):delete w[b]},s.maxAge)},f=s.maxAge>0&&s.maxAge<1/0?u:0,p=s.equals?s.equals:function(b,w){return b===w},m=s.maxArgs,g=s.serializer,v,y;return i.length===1&&!s.equals&&!d?(v=function(b){var w=typeof b;if(!g&&(w==="object"&&b||w==="function")){var x;return l.get(b)||(!f||f(b,l),l.set(b,x=i.call(this,b)),x)}var S=w==="number"||w==="boolean"||b==null?b:w==="string"?JSON.stringify(b):g(b);return a[S]||(!f||f(S,a),a[S]=i.call(this,b))}.bind(this),y=1):v=function(){var b=arguments.length;if(!b&&h!=null)return c[h];var w=m||b,x;for(x=o.length-1;x>=0;x--)if(!(!m&&o[x].length!==w)){for(var S=w-1;S>=0&&p(o[x][S],arguments[S]);S--)if(S===0)return c[x]}return x=o.length-(x+1),!b&&h==null&&(h=x),!f||f(x,c,o),c[x]=i.apply(this,o[x]=arguments)}.bind(this),v.clear=function(){l=new WeakMap,a=Object.create(null),o=[],c=[],h=void 0},v.keys=function(){return y?null:o.slice()},v.values=function(){return y?null:c.slice()},v.keyValues=function(){return y?{primitives:e({},a),objects:l}:null},v}t.exports=r,typeof window<"u"&&(window.nanomemoize=r)}).call(ht)})(gx);const pa=gx.exports;function _D({children:t,label:e,index:n}){const r=E.exports.useId();return oe("div",{role:"group",className:fe(n!==0&&"border-t my-4"),"aria-labelledby":e?`be-select-${r}`:void 0,children:[e&&_("div",{className:"block uppercase text-muted text-xs px-16 py-10",role:"presentation",id:`be-select-${r}`,"aria-hidden":"true",children:e}),t]})}const SD=pa(({maxItems:t,children:e,items:n,inputValue:r})=>{let i=TD({children:e,items:n}),s=CD({collection:i,inputValue:r});return t&&(i=new Map([...i.entries()].slice(0,t)),s=new Map([...s.entries()].slice(0,t))),{collection:i,filteredCollection:s}}),CD=pa(({collection:t,inputValue:e})=>{let n=new Map;const r=e?`${e}`.toLowerCase().trim():"";if(!r)n=t;else{let i=0;t.forEach((s,d)=>{(s.item?JSON.stringify(s.item):s.textLabel).toLowerCase().trim().includes(r)&&n.set(d,{...s,index:i++})})}return n}),TD=pa(({children:t,items:e})=>{let n;e&&typeof t=="function"?n=e.map(d=>t(d)):n=t;const r=new Map;let i=0;const s=(d,a,o,c)=>{const h=i++,l=a?e==null?void 0:e[o].items[c]:e==null?void 0:e[h];r.set(d.props.value,{index:h,element:d,textLabel:kD(d),item:l,section:a,isDisabled:d.props.isDisabled,value:d.props.value})};return E.exports.Children.forEach(n,(d,a)=>{!E.exports.isValidElement(d)||(d.type===_D?E.exports.Children.forEach(d.props.children,(o,c)=>{s(o,d,a,c)}):s(d))}),r});function kD(t){var n;const e=t.props.children;return t.props.textLabel?t.props.textLabel:e&&((n=e.props)==null?void 0:n.defaultMessage)?e.props.defaultMessage[0].value:`${e}`||""}function Lo(t){return t.split("-")[1]}function Bp(t){return t==="y"?"height":"width"}function Dr(t){return t.split("-")[0]}function Fo(t){return["top","bottom"].includes(Dr(t))?"x":"y"}function mx(t,e,n){let{reference:r,floating:i}=t;const s=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,a=Fo(e),o=Bp(a),c=r[o]/2-i[o]/2,h=Dr(e),l=a==="x";let u;switch(h){case"top":u={x:s,y:r.y-i.height};break;case"bottom":u={x:s,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:d};break;case"left":u={x:r.x-i.width,y:d};break;default:u={x:r.x,y:r.y}}switch(Lo(e)){case"start":u[a]-=c*(n&&l?-1:1);break;case"end":u[a]+=c*(n&&l?-1:1);break}return u}const ED=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:d}=n,a=s.filter(Boolean),o=await(d.isRTL==null?void 0:d.isRTL(e));let c=await d.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:l}=mx(c,r,o),u=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:b,data:w,reset:x}=await v({x:h,y:l,initialPlacement:r,placement:u,strategy:i,middlewareData:f,rects:c,platform:d,elements:{reference:t,floating:e}});if(h=y!=null?y:h,l=b!=null?b:l,f={...f,[g]:{...f[g],...w}},x&&p<=50){p++,typeof x=="object"&&(x.placement&&(u=x.placement),x.rects&&(c=x.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:i}):x.rects),{x:h,y:l}=mx(c,u,o)),m=-1;continue}}return{x:h,y:l,placement:u,strategy:i,middlewareData:f}};function OD(t){return{top:0,right:0,bottom:0,left:0,...t}}function vx(t){return typeof t!="number"?OD(t):{top:t,right:t,bottom:t,left:t}}function Kc(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Vp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:d,elements:a,strategy:o}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:l="floating",altBoundary:u=!1,padding:f=0}=e,p=vx(f),g=a[u?l==="floating"?"reference":"floating":l],v=Kc(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:o})),y=l==="floating"?{...d.floating,x:r,y:i}:d.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=Kc(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:b,strategy:o}):y);return{top:(v.top-x.top+p.top)/w.y,bottom:(x.bottom-v.bottom+p.bottom)/w.y,left:(v.left-x.left+p.left)/w.x,right:(x.right-v.right+p.right)/w.x}}const $p=Math.min,bi=Math.max;function Up(t,e,n){return bi(t,$p(e,n))}const yx=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=t||{},{x:i,y:s,placement:d,rects:a,platform:o,elements:c}=e;if(n==null)return{};const h=vx(r),l={x:i,y:s},u=Fo(d),f=Bp(u),p=await o.getDimensions(n),m=u==="y",g=m?"top":"left",v=m?"bottom":"right",y=m?"clientHeight":"clientWidth",b=a.reference[f]+a.reference[u]-l[u]-a.floating[f],w=l[u]-a.reference[u],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(n));let S=x?x[y]:0;(!S||!await(o.isElement==null?void 0:o.isElement(x)))&&(S=c.floating[y]||a.floating[f]);const C=b/2-w/2,k=h[g],I=S-p[f]-h[v],F=S/2-p[f]/2+C,j=Up(k,F,I),te=Lo(d)!=null&&F!=j&&a.reference[f]/2-(F<k?h[g]:h[v])-p[f]/2<0?F<k?k-F:I-F:0;return{[u]:l[u]-te,data:{[u]:j,centerOffset:F-j}}}}),PD={left:"right",right:"left",bottom:"top",top:"bottom"};function qc(t){return t.replace(/left|right|bottom|top/g,e=>PD[e])}function MD(t,e,n){n===void 0&&(n=!1);const r=Lo(t),i=Fo(t),s=Bp(i);let d=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(d=qc(d)),{main:d,cross:qc(d)}}const AD={start:"end",end:"start"};function Hp(t){return t.replace(/start|end/g,e=>AD[e])}function DD(t){const e=qc(t);return[Hp(t),e,Hp(e)]}function RD(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],d=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:d;default:return[]}}function ID(t,e,n,r){const i=Lo(t);let s=RD(Dr(t),n==="start",r);return i&&(s=s.map(d=>d+"-"+i),e&&(s=s.concat(s.map(Hp)))),s}const LD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:d,platform:a,elements:o}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:l,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=t,g=Dr(r),v=Dr(d)===d,y=await(a.isRTL==null?void 0:a.isRTL(o.floating)),b=l||(v||!p?[qc(d)]:DD(d));!l&&f!=="none"&&b.push(...ID(d,p,f,y));const w=[d,...b],x=await Vp(e,m),S=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&S.push(x[g]),h){const{main:j,cross:q}=MD(r,s,y);S.push(x[j],x[q])}if(C=[...C,{placement:r,overflows:S}],!S.every(j=>j<=0)){var k,I;const j=(((k=i.flip)==null?void 0:k.index)||0)+1,q=w[j];if(q)return{data:{index:j,overflows:C},reset:{placement:q}};let te=(I=C.filter(G=>G.overflows[0]<=0).sort((G,Y)=>G.overflows[1]-Y.overflows[1])[0])==null?void 0:I.placement;if(!te)switch(u){case"bestFit":{var F;const G=(F=C.map(Y=>[Y.placement,Y.overflows.filter(ie=>ie>0).reduce((ie,ce)=>ie+ce,0)]).sort((Y,ie)=>Y[1]-ie[1])[0])==null?void 0:F[0];G&&(te=G);break}case"initialPlacement":te=d;break}if(r!==te)return{reset:{placement:te}}}return{}}}};async function FD(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),d=Dr(n),a=Lo(n),o=Fo(n)==="x",c=["left","top"].includes(d)?-1:1,h=s&&o?-1:1,l=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:f,alignmentAxis:p}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),o?{x:f*h,y:u*c}:{x:u*c,y:f*h}}const zD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await FD(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function ND(t){return t==="x"?"y":"x"}const jD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:d=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...o}=t,c={x:n,y:r},h=await Vp(e,o),l=Fo(Dr(i)),u=ND(l);let f=c[l],p=c[u];if(s){const g=l==="y"?"top":"left",v=l==="y"?"bottom":"right",y=f+h[g],b=f-h[v];f=Up(y,f,b)}if(d){const g=u==="y"?"top":"left",v=u==="y"?"bottom":"right",y=p+h[g],b=p-h[v];p=Up(y,p,b)}const m=a.fn({...e,[l]:f,[u]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},BD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:d=()=>{},...a}=t,o=await Vp(e,a),c=Dr(n),h=Lo(n),u=Fo(n)==="x",{width:f,height:p}=r.floating;let m,g;c==="top"||c==="bottom"?(m=c,g=h===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,m=h==="end"?"top":"bottom");const v=p-o[m],y=f-o[g],b=!e.middlewareData.shift;let w=v,x=y;if(u){const C=f-o.left-o.right;x=h||b?$p(y,C):C}else{const C=p-o.top-o.bottom;w=h||b?$p(v,C):C}if(b&&!h){const C=bi(o.left,0),k=bi(o.right,0),I=bi(o.top,0),F=bi(o.bottom,0);u?x=f-2*(C!==0||k!==0?C+k:bi(o.left,o.right)):w=p-2*(I!==0||F!==0?I+F:bi(o.top,o.bottom))}await d({...e,availableWidth:x,availableHeight:w});const S=await i.getDimensions(s.floating);return f!==S.width||p!==S.height?{reset:{rects:!0}}:{}}}};function qt(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wn(t){return qt(t).getComputedStyle(t)}function bx(t){return t instanceof qt(t).Node}function Rr(t){return bx(t)?(t.nodeName||"").toLowerCase():""}let Zc;function wx(){if(Zc)return Zc;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Zc=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Zc):navigator.userAgent}function xn(t){return t instanceof qt(t).HTMLElement}function Zt(t){return t instanceof qt(t).Element}function xx(t){if(typeof ShadowRoot>"u")return!1;const e=qt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ga(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=wn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function VD(t){return["table","td","th"].includes(Rr(t))}function Wp(t){const e=/firefox/i.test(wx()),n=wn(t),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(r?r!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null?s.includes(i):!1})}function Yp(){return/^((?!chrome|android).)*safari/i.test(wx())}function Qc(t){return["html","body","#document"].includes(Rr(t))}const _x=Math.min,ma=Math.max,Jc=Math.round;function Sx(t){const e=wn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=xn(t),s=i?t.offsetWidth:n,d=i?t.offsetHeight:r,a=Jc(n)!==s||Jc(r)!==d;return a&&(n=s,r=d),{width:n,height:r,fallback:a}}function Cx(t){return Zt(t)?t:t.contextElement}const Tx={x:1,y:1};function zo(t){const e=Cx(t);if(!xn(e))return Tx;const n=e.getBoundingClientRect(),{width:r,height:i,fallback:s}=Sx(e);let d=(s?Jc(n.width):n.width)/r,a=(s?Jc(n.height):n.height)/i;return(!d||!Number.isFinite(d))&&(d=1),(!a||!Number.isFinite(a))&&(a=1),{x:d,y:a}}function wi(t,e,n,r){var i,s;e===void 0&&(e=!1),n===void 0&&(n=!1);const d=t.getBoundingClientRect(),a=Cx(t);let o=Tx;e&&(r?Zt(r)&&(o=zo(r)):o=zo(t));const c=a?qt(a):window,h=Yp()&&n;let l=(d.left+(h&&((i=c.visualViewport)==null?void 0:i.offsetLeft)||0))/o.x,u=(d.top+(h&&((s=c.visualViewport)==null?void 0:s.offsetTop)||0))/o.y,f=d.width/o.x,p=d.height/o.y;if(a){const m=qt(a),g=r&&Zt(r)?qt(r):r;let v=m.frameElement;for(;v&&r&&g!==m;){const y=zo(v),b=v.getBoundingClientRect(),w=getComputedStyle(v);b.x+=(v.clientLeft+parseFloat(w.paddingLeft))*y.x,b.y+=(v.clientTop+parseFloat(w.paddingTop))*y.y,l*=y.x,u*=y.y,f*=y.x,p*=y.y,l+=b.x,u+=b.y,v=qt(v).frameElement}}return Kc({width:f,height:p,x:l,y:u})}function Ir(t){return((bx(t)?t.ownerDocument:t.document)||window.document).documentElement}function eu(t){return Zt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function $D(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=xn(n),s=Ir(n);if(n===s)return e;let d={scrollLeft:0,scrollTop:0},a={x:1,y:1};const o={x:0,y:0};if((i||!i&&r!=="fixed")&&((Rr(n)!=="body"||ga(s))&&(d=eu(n)),xn(n))){const c=wi(n);a=zo(n),o.x=c.x+n.clientLeft,o.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-d.scrollLeft*a.x+o.x,y:e.y*a.y-d.scrollTop*a.y+o.y}}function kx(t){return wi(Ir(t)).left+eu(t).scrollLeft}function UD(t){const e=Ir(t),n=eu(t),r=t.ownerDocument.body,i=ma(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ma(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+kx(t);const a=-n.scrollTop;return wn(r).direction==="rtl"&&(d+=ma(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:d,y:a}}function No(t){if(Rr(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xx(t)&&t.host||Ir(t);return xx(e)?e.host:e}function Ex(t){const e=No(t);return Qc(e)?e.ownerDocument.body:xn(e)&&ga(e)?e:Ex(e)}function va(t,e){var n;e===void 0&&(e=[]);const r=Ex(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=qt(r);return i?e.concat(s,s.visualViewport||[],ga(r)?r:[]):e.concat(r,va(r))}function HD(t,e){const n=qt(t),r=Ir(t),i=n.visualViewport;let s=r.clientWidth,d=r.clientHeight,a=0,o=0;if(i){s=i.width,d=i.height;const c=Yp();(!c||c&&e==="fixed")&&(a=i.offsetLeft,o=i.offsetTop)}return{width:s,height:d,x:a,y:o}}function WD(t,e){const n=wi(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=xn(t)?zo(t):{x:1,y:1},d=t.clientWidth*s.x,a=t.clientHeight*s.y,o=i*s.x,c=r*s.y;return{width:d,height:a,x:o,y:c}}function Ox(t,e,n){let r;if(e==="viewport")r=HD(t,n);else if(e==="document")r=UD(Ir(t));else if(Zt(e))r=WD(e,n);else{const d={...e};if(Yp()){var i,s;const a=qt(t);d.x-=((i=a.visualViewport)==null?void 0:i.offsetLeft)||0,d.y-=((s=a.visualViewport)==null?void 0:s.offsetTop)||0}r=d}return Kc(r)}function Px(t,e){const n=No(t);return n===e||!Zt(n)||Qc(n)?!1:wn(n).position==="fixed"||Px(n,e)}function YD(t,e){const n=e.get(t);if(n)return n;let r=va(t).filter(a=>Zt(a)&&Rr(a)!=="body"),i=null;const s=wn(t).position==="fixed";let d=s?No(t):t;for(;Zt(d)&&!Qc(d);){const a=wn(d),o=Wp(d);!o&&a.position==="fixed"&&(i=null),(s?!o&&!i:!o&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ga(d)&&!o&&Px(t,d))?r=r.filter(h=>h!==d):i=a,d=No(d)}return e.set(t,r),r}function XD(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const d=[...n==="clippingAncestors"?YD(e,this._c):[].concat(n),r],a=d[0],o=d.reduce((c,h)=>{const l=Ox(e,h,i);return c.top=ma(l.top,c.top),c.right=_x(l.right,c.right),c.bottom=_x(l.bottom,c.bottom),c.left=ma(l.left,c.left),c},Ox(e,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function GD(t){return Sx(t)}function Mx(t,e){return!xn(t)||wn(t).position==="fixed"?null:e?e(t):t.offsetParent}function KD(t){let e=No(t);for(;xn(e)&&!Qc(e);){if(Wp(e))return e;e=No(e)}return null}function Ax(t,e){const n=qt(t);if(!xn(t))return n;let r=Mx(t,e);for(;r&&VD(r)&&wn(r).position==="static";)r=Mx(r,e);return r&&(Rr(r)==="html"||Rr(r)==="body"&&wn(r).position==="static"&&!Wp(r))?n:r||KD(t)||n}function qD(t,e,n){const r=xn(e),i=Ir(e),s=wi(t,!0,n==="fixed",e);let d={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Rr(e)!=="body"||ga(i))&&(d=eu(e)),xn(e)){const o=wi(e,!0);a.x=o.x+e.clientLeft,a.y=o.y+e.clientTop}else i&&(a.x=kx(i));return{x:s.left+d.scrollLeft-a.x,y:s.top+d.scrollTop-a.y,width:s.width,height:s.height}}const ZD={getClippingRect:XD,convertOffsetParentRelativeRectToViewportRelativeRect:$D,isElement:Zt,getDimensions:GD,getOffsetParent:Ax,getDocumentElement:Ir,getScale:zo,async getElementRects(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||Ax,s=this.getDimensions;return{reference:qD(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>wn(t).direction==="rtl"};function QD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:d=!0,animationFrame:a=!1}=r,o=i||s?[...Zt(t)?va(t):t.contextElement?va(t.contextElement):[],...va(e)]:[];o.forEach(f=>{const p=!Zt(f)&&f.toString().includes("V");i&&(a?p:!0)&&f.addEventListener("scroll",n,{passive:!0}),s&&f.addEventListener("resize",n)});let c=null;d&&(c=new ResizeObserver(()=>{n()}),Zt(t)&&!a&&c.observe(t),!Zt(t)&&t.contextElement&&!a&&c.observe(t.contextElement),c.observe(e));let h,l=a?wi(t):null;a&&u();function u(){const f=wi(t);l&&(f.x!==l.x||f.y!==l.y||f.width!==l.width||f.height!==l.height)&&n(),l=f,h=requestAnimationFrame(u)}return n(),()=>{var f;o.forEach(p=>{i&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(f=c)==null||f.disconnect(),c=null,a&&cancelAnimationFrame(h)}}const JD=(t,e,n)=>{const r=new Map,i={platform:ZD,...n},s={...i.platform,_c:r};return ED(t,e,{...i,platform:s})},eR=t=>{const{element:e,padding:n}=t;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:t,fn(i){return r(e)?e.current!=null?yx({element:e.current,padding:n}).fn(i):{}:e?yx({element:e,padding:n}).fn(i):{}}}};var tu=typeof document<"u"?E.exports.useLayoutEffect:E.exports.useEffect;function nu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!nu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!nu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Dx(t){const e=E.exports.useRef(t);return tu(()=>{e.current=t}),e}function tR(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:s,open:d}=t,[a,o]=E.exports.useState({x:null,y:null,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[c,h]=E.exports.useState(r);nu(c,r)||h(r);const l=E.exports.useRef(null),u=E.exports.useRef(null),f=E.exports.useRef(a),p=Dx(s),m=Dx(i),[g,v]=E.exports.useState(null),[y,b]=E.exports.useState(null),w=E.exports.useCallback(F=>{l.current!==F&&(l.current=F,v(F))},[]),x=E.exports.useCallback(F=>{u.current!==F&&(u.current=F,b(F))},[]),S=E.exports.useCallback(()=>{if(!l.current||!u.current)return;const F={placement:e,strategy:n,middleware:c};m.current&&(F.platform=m.current),JD(l.current,u.current,F).then(j=>{const q={...j,isPositioned:!0};C.current&&!nu(f.current,q)&&(f.current=q,Zi.exports.flushSync(()=>{o(q)}))})},[c,e,n,m]);tu(()=>{d===!1&&f.current.isPositioned&&(f.current.isPositioned=!1,o(F=>({...F,isPositioned:!1})))},[d]);const C=E.exports.useRef(!1);tu(()=>(C.current=!0,()=>{C.current=!1}),[]),tu(()=>{if(g&&y){if(p.current)return p.current(g,y,S);S()}},[g,y,S,p]);const k=E.exports.useMemo(()=>({reference:l,floating:u,setReference:w,setFloating:x}),[w,x]),I=E.exports.useMemo(()=>({reference:g,floating:y}),[g,y]);return E.exports.useMemo(()=>({...a,update:S,refs:k,elements:I,reference:w,floating:x}),[a,S,k,I,w,x])}function nR(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Xp({floatingWidth:t,ref:e,disablePositioning:n=!1,placement:r="bottom",offset:i=2,showArrow:s=!1,maxHeight:d,shiftCrossAxis:a=!0,fallbackPlacements:o}){const c=E.exports.useRef(null),h={placement:r,strategy:"fixed"};n||(h.whileElementsMounted=QD,h.middleware=[zD(i),jD({padding:16,crossAxis:a,mainAxis:!0}),LD({padding:16,fallbackPlacements:o}),BD({apply({rects:v,availableHeight:y,availableWidth:b,elements:w}){t==="matchTrigger"&&d!=null&&Object.assign(w.floating.style,{width:`${v.reference.width}px`,maxWidth:`${b}`,maxHeight:`${Math.min(y,d)}px`})},padding:16})],s&&h.middleware.push(eR({element:c})));const l=tR(h),u=E.exports.useMemo(()=>nR([e,l.reference]),[l.reference,e]),{x:f,y:p}=l.middlewareData.arrow||{},m={top:"bottom",right:"left",bottom:"top",left:"right"}[l.placement.split("-")[0]],g={left:f,top:p,right:"",bottom:"",[m]:"-4px"};return{...l,reference:u,arrowRef:c,arrowStyle:g}}function Rx(t,e){const{children:n,items:r,role:i="listbox",virtualFocus:s,loopFocus:d=!1,onItemSelected:a,clearInputOnItemSelection:o,blurReferenceOnItemSelection:c,floatingWidth:h="matchTrigger",floatingMinWidth:l,floatingMaxHeight:u,offset:f,placement:p,showCheckmark:m,showEmptyMessage:g,maxItems:v,isAsync:y}=t,b=t.selectionMode||"none",x=`${E.exports.useId()}-listbox`,[S,C]=mi(t.inputValue,t.defaultInputValue||"",t.onInputValueChange),[k,I]=E.exports.useState("all"),F=SD({children:n,items:r,inputValue:S,maxItems:v}),j=k==="all"?F.collection:F.filteredCollection,q=E.exports.useRef([]),te=E.exports.useMemo(()=>[...j.values()].map(re=>re.isDisabled?null:re.textLabel),[j]),{selectedValues:G,selectValues:Y}=iR(t),[ie,ce]=mi(t.isOpen,t.defaultIsOpen,t.onOpenChange),[H,T]=E.exports.useState(null),P=Xp({floatingWidth:h,ref:e,placement:p,offset:f,maxHeight:u!=null?u:420,shiftCrossAxis:!s}),{refs:D,floating:R,strategy:$,x:A,y:O}=P,z=b==="none"?void 0:j.get(G[0]),B=b==="none"||z==null?void 0:z.index,K=re=>{if(b!=="none"){const U=[...j.values()][re];U&&Y(U.value)}},W=E.exports.useCallback((re,U)=>{var N,X;const V=[...j.values()],Q=!V.find(le=>!le.isDisabled),ee=j.size-1;if(U==null||!j.size||U>ee||U<0||Q){T(null);return}U=rR(V,U,d,re),T(U),s?(N=q.current[U])==null||N.scrollIntoView({block:"nearest"}):(X=q.current[U])==null||X.focus()},[j,s,d]),J=E.exports.useCallback(re=>{C(re.target.value),y||I(re.target.value.trim()?"filtered":"all"),re.target.value?ce(!0):Y("")},[C,ce,I,Y,y]);return{handleItemSelection:re=>{const U=D.reference.current;b!=="none"?Y(re):U&&"focus"in U&&U.focus(),s&&(C(o?"":`${re}`),c&&U&&"blur"in U&&U.blur()),I("all"),ce(!1),a==null||a(re),T(null)},onInputChange:J,loopFocus:d,floatingWidth:h,floatingMinWidth:l,floatingMaxHeight:u,showCheckmark:m,collection:j,virtualFocus:s,focusItem:W,showEmptyMessage:g,refs:D,reference:P.reference,floating:R,positionStyle:{position:$,top:O!=null?O:"",left:A!=null?A:""},listContent:te,listItemsRef:q,listboxId:x,role:i,state:{activeIndex:H,setActiveIndex:T,selectedIndex:B,setSelectedIndex:K,selectionMode:b,selectedValues:G,selectValues:Y,inputValue:S,setInputValue:C,isOpen:ie,setIsOpen:ce,setActiveCollection:I}}}function rR(t,e,n,r){var s;const i=t.length-1;for(;(s=t[e])!=null&&s.isDisabled;)if(r==="increment"){if(e++,e>=i)if(n)e=0;else return e-1}else if(e--,e<0)if(n)e=i;else return e+1;return e}function iR(t){const{selectionMode:e,allowEmptySelection:n}=t,r=e==="single"||e==="multiple",[i,s]=mi(r?t.selectedValue:void 0,r?t.defaultSelectedValue:void 0,r?t.onSelectionChange:void 0),d=E.exports.useMemo(()=>i==null?[]:Array.isArray(i)?i:[i],[i]),a=E.exports.useCallback(o=>{const c=Array.isArray(o)?o:[o];e==="single"?s(c[0]):c.forEach(h=>{const l=d.indexOf(h);l===-1?(d.push(h),s([...d])):(d.length>1||n)&&(d.splice(l,1),s([...d]))})},[n,d,e,s]);return{selectedValues:d,selectValues:a}}const Ix=E.exports.createContext(null);function Lx(){return E.exports.useContext(Ix)}const Gp=ye(_("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckOutlined"),oR=he.forwardRef((t,e)=>{let{startIcon:n,capitalizeFirst:r,children:i,description:s,endIcon:d,endSection:a,isDisabled:o,isActive:c,isSelected:h,showCheckmark:l,elementType:u="div",...f}=t;!n&&l&&(n=_(Gp,{size:"sm",className:fe("text-primary",!h&&"invisible")}));const p=fe("icon-sm rounded overflow-hidden flex-shrink-0",!o&&"text-muted"),m=fe(!o&&"text-muted");return oe(u,{...f,"aria-disabled":o,className:sR(t),ref:e,children:[n&&_("div",{className:p,children:n}),oe("div",{className:fe("mr-auto w-full",r&&"first-letter:capitalize"),children:[i,s&&_("div",{className:fe("text-xs mt-4 whitespace-normal",o?"text-disabled":"text-muted"),children:s})]}),(d||a)&&_("div",{className:d?p:m,children:d||a})]})});function sR({className:t,isSelected:e,isActive:n,isDisabled:r,showCheckmark:i}){let s="";return r?s="text-disabled pointer-events-none":e?n?s="bg-primary/focus":s="bg-primary/selected hover:bg-primary/focus":n?s="hover:bg-fg-base/15 bg-focus":s="hover:bg-hover",fe("w-full select-none outline-none cursor-pointer","py-8 text-sm truncate flex items-center gap-10",!r&&"text-main",i?"px-8":"px-20",s,t)}function ru({children:t,value:e,startIcon:n,endIcon:r,endSection:i,description:s,capitalizeFirst:d,textLabel:a,isDisabled:o,onSelected:c,onClick:h,...l}){var F;const{collection:u,showCheckmark:f,virtualFocus:p,listboxId:m,role:g,listItemsRef:v,handleItemSelection:y,state:{selectedValues:b,activeIndex:w,setActiveIndex:x}}=Lx(),S=b.includes(e),C=(F=u.get(e))==null?void 0:F.index,k=w===C;if(C==null)return null;const I=k&&!o?-1:0;return _(oR,{...l,onFocus:()=>{p||x(C)},onPointerEnter:j=>{x(C),p||j.currentTarget.focus()},onPointerDown:j=>{p&&j.preventDefault()},onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),y(e),c==null||c())},onClick:j=>{y(e),c==null||c(),h==null||h(j)},ref:j=>v.current[C]=j,id:`${m}-${C}`,role:g==="menu"?"menuitem":"option",tabIndex:p?void 0:I,"aria-selected":k&&S,showCheckmark:f,isDisabled:o,isActive:k,isSelected:S,startIcon:n,description:s,endIcon:r,endSection:i,capitalizeFirst:d,"data-value":e,children:t})}const aR=768;function lR(){return ZM()||typeof window>"u"?!1:window.screen.width<=aR}const iu={initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{type:"tween",duration:.125}};function Kp(){const{width:t,height:e}=iA();return{"--be-viewport-height":`${e}px`,"--be-viewport-width":`${t}px`}}const cR=he.createContext(null);cR.displayName="PressResponderContext";let ya=null,uR=new Set,Fx=!1,xi=!1,qp=!1;function Zp(t,e){for(let n of uR)n(t,e)}function fR(t){return!(t.metaKey||!Ww()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function zx(t){xi=!0,fR(t)&&(ya="keyboard",Zp("keyboard",t))}function jo(t){ya="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(xi=!0,Zp("pointer",t))}function hR(t){lA(t)&&(xi=!0,ya="virtual")}function dR(t){t.target===window||t.target===document||(!xi&&!qp&&(ya="virtual",Zp("virtual",t)),xi=!1,qp=!1)}function pR(){xi=!1,qp=!0}function Nx(){if(typeof window>"u"||Fx)return;let t=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){xi=!0,t.apply(this,arguments)},document.addEventListener("keydown",zx,!0),document.addEventListener("keyup",zx,!0),document.addEventListener("click",hR,!0),window.addEventListener("focus",dR,!0),window.addEventListener("blur",pR,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",jo,!0),document.addEventListener("pointermove",jo,!0),document.addEventListener("pointerup",jo,!0)):(document.addEventListener("mousedown",jo,!0),document.addEventListener("mousemove",jo,!0),document.addEventListener("mouseup",jo,!0)),Fx=!0}typeof document<"u"&&(document.readyState!=="loading"?Nx():document.addEventListener("DOMContentLoaded",Nx));function gR(){return ya}function mR(t){if(gR()==="virtual"){let e=document.activeElement;rA(()=>{document.activeElement===e&&document.contains(t)&&$w(t)})}else $w(t)}function vR(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:e,visibility:n}=t.style,r=e!=="none"&&n!=="hidden"&&n!=="collapse";if(r){const{getComputedStyle:i}=t.ownerDocument.defaultView;let{display:s,visibility:d}=i(t);r=s!=="none"&&d!=="hidden"&&d!=="collapse"}return r}function yR(t,e){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function jx(t,e){return t.nodeName!=="#comment"&&vR(t)&&yR(t,e)&&(!t.parentElement||jx(t.parentElement,t))}const Qp=he.createContext(null);let Et=null,Bo=new Map;function ou(t){let{children:e,contain:n,restoreFocus:r,autoFocus:i}=t,s=E.exports.useRef(),d=E.exports.useRef(),a=E.exports.useRef([]),o=E.exports.useContext(Qp),c=o==null?void 0:o.scopeRef;Ar(()=>{let l=s.current.nextSibling,u=[];for(;l&&l!==d.current;)u.push(l),l=l.nextSibling;a.current=u},[e,c]),Ar(()=>(Bo.set(a,c),()=>{(a===Et||su(a,Et))&&(!c||Bo.has(c))&&(Et=c),Bo.delete(a)}),[a,c]),SR(a,n),kR(a,r,n),TR(a,i);let h=wR(a);return he.createElement(Qp.Provider,{value:{scopeRef:a,focusManager:h}},he.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),e,he.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:d}))}function bR(){var t;return(t=E.exports.useContext(Qp))===null||t===void 0?void 0:t.focusManager}function wR(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:i,wrap:s,accept:d}=e,a=r||document.activeElement,o=n[0].previousElementSibling,c=Lr(Vo(n),{tabbable:i,accept:d},n);c.currentNode=_n(a,n)?a:o;let h=c.nextNode();return!h&&s&&(c.currentNode=o,h=c.nextNode()),h&&Kn(h,!0),h},focusPrevious(e={}){let n=t.current,{from:r,tabbable:i,wrap:s,accept:d}=e,a=r||document.activeElement,o=n[n.length-1].nextElementSibling,c=Lr(Vo(n),{tabbable:i,accept:d},n);c.currentNode=_n(a,n)?a:o;let h=c.previousNode();return!h&&s&&(c.currentNode=o,h=c.previousNode()),h&&Kn(h,!0),h},focusFirst(e={}){let n=t.current,{tabbable:r,accept:i}=e,s=Lr(Vo(n),{tabbable:r,accept:i},n);s.currentNode=n[0].previousElementSibling;let d=s.nextNode();return d&&Kn(d,!0),d},focusLast(e={}){let n=t.current,{tabbable:r,accept:i}=e,s=Lr(Vo(n),{tabbable:r,accept:i},n);s.currentNode=n[n.length-1].nextElementSibling;let d=s.previousNode();return d&&Kn(d,!0),d}}}const Jp=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],xR=Jp.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";Jp.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const _R=Jp.join(':not([hidden]):not([tabindex="-1"]),');function Vo(t){return t[0].parentElement}function SR(t,e){let n=E.exports.useRef(),r=E.exports.useRef(null);Ar(()=>{let i=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=null);return}let s=o=>{if(o.key!=="Tab"||o.altKey||o.ctrlKey||o.metaKey||t!==Et)return;let c=document.activeElement,h=t.current;if(!_n(c,h))return;let l=Lr(Vo(h),{tabbable:!0},h);l.currentNode=c;let u=o.shiftKey?l.previousNode():l.nextNode();u||(l.currentNode=o.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,u=o.shiftKey?l.previousNode():l.nextNode()),o.preventDefault(),u&&Kn(u,!0)},d=o=>{!Et||su(Et,t)?(Et=t,n.current=o.target):t===Et&&!Bx(o.target,t)?n.current?n.current.focus():Et&&Vx(Et.current):t===Et&&(n.current=o.target)},a=o=>{r.current=requestAnimationFrame(()=>{t===Et&&!Bx(document.activeElement,t)&&(Et=t,n.current=o.target,n.current.focus())})};return document.addEventListener("keydown",s,!1),document.addEventListener("focusin",d,!1),i.forEach(o=>o.addEventListener("focusin",d,!1)),i.forEach(o=>o.addEventListener("focusout",a,!1)),()=>{document.removeEventListener("keydown",s,!1),document.removeEventListener("focusin",d,!1),i.forEach(o=>o.removeEventListener("focusin",d,!1)),i.forEach(o=>o.removeEventListener("focusout",a,!1))}},[t,e]),E.exports.useEffect(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function CR(t){for(let e of Bo.keys())if(_n(t,e.current))return!0;return!1}function _n(t,e){return e.some(n=>n.contains(t))}function Bx(t,e){for(let n of Bo.keys())if((n===e||su(e,n))&&_n(t,n.current))return!0;return!1}function su(t,e){let n=Bo.get(e);return n?n===t?!0:su(t,n):!1}function Kn(t,e=!1){if(t!=null&&!e)try{mR(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function Vx(t){let e=t[0].previousElementSibling,n=Lr(Vo(t),{tabbable:!0},t);n.currentNode=e,Kn(n.nextNode())}function TR(t,e){const n=he.useRef(e);E.exports.useEffect(()=>{n.current&&(Et=t,_n(document.activeElement,Et.current)||Vx(t.current)),n.current=!1},[])}function kR(t,e,n){const r=E.exports.useRef(typeof document<"u"?document.activeElement:null);Ar(()=>{let i=r.current;if(!e)return;let s=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey)return;let a=document.activeElement;if(!_n(a,t.current))return;let o=Lr(document.body,{tabbable:!0});o.currentNode=a;let c=d.shiftKey?o.previousNode():o.nextNode();if((!document.body.contains(i)||i===document.body)&&(i=null),(!c||!_n(c,t.current))&&i){o.currentNode=i;do c=d.shiftKey?o.previousNode():o.nextNode();while(_n(c,t.current));d.preventDefault(),d.stopPropagation(),c?Kn(c,!0):CR(i)?Kn(i,!0):a.blur()}};return n||document.addEventListener("keydown",s,!0),()=>{n||document.removeEventListener("keydown",s,!0),e&&i&&_n(document.activeElement,t.current)&&requestAnimationFrame(()=>{document.body.contains(i)&&document.activeElement===document.body&&Kn(i)})}},[t,e,n])}function Lr(t,e,n){let r=e!=null&&e.tabbable?_R:xR,i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var d;return!(e==null||(d=e.from)===null||d===void 0)&&d.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&jx(s)&&(!n||_n(s,n))&&(!(e!=null&&e.accept)||e.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(i.currentNode=e.from),i}const au=E.exports.forwardRef(({children:t,style:e,autoFocus:n=!1,restoreFocus:r=!0,isDismissable:i,isContextMenu:s,isOpen:d,onClose:a,triggerRef:o,arrowRef:c,arrowStyle:h,onPointerLeave:l,onPointerEnter:u},f)=>{const p=Kp(),m=yi(f),{domProps:g}=ER({isDismissable:i,isOpen:d,onClose:a,triggerRef:o,isContextMenu:s},m);return _(yt.div,{className:"z-popover isolate",role:"presentation",ref:m,style:{...p,...e,position:"fixed"},...iu,...Xn(g,{onPointerLeave:l,onPointerEnter:u}),children:_(ou,{restoreFocus:r,autoFocus:n,contain:!1,children:t})})}),ba=[];function ER({onClose:t,isDismissable:e=!0,triggerRef:n,isContextMenu:r=!1},i){const s=E.exports.useRef({isPointerDown:!1,isContextMenu:r,onClose:t}),d=s.current;d.isContextMenu=r,d.onClose=t;const a=E.exports.useCallback(p=>{const m=p.target;if(m){const g=m.ownerDocument;if(!g||!g.documentElement.contains(m))return!1}return i.current&&!i.current.contains(m)},[i]),o=E.exports.useCallback(()=>ba[ba.length-1]===i,[i]),c=E.exports.useCallback(()=>{o()&&d.onClose()},[o,d]),h=E.exports.useCallback(p=>{var m,g;return n.current&&"contains"in n.current?(g=(m=n.current).contains)==null?void 0:g.call(m,p):!1},[n]),l=E.exports.useCallback(p=>{h(p.target)||o()&&(p.stopPropagation(),p.preventDefault())},[h,o]),u=E.exports.useCallback(p=>{h(p.target)||(o()&&(p.stopPropagation(),p.preventDefault()),(!d.isContextMenu||p.button!==2)&&c())},[h,c,d,o]);return E.exports.useEffect(()=>{ba.push(i);const p=y=>{a(y)&&(l(y),s.current.isPointerDown=!0)},m=y=>{s.current.isPointerDown&&a(y)&&(s.current.isPointerDown=!1,u(y))},g=y=>{y.preventDefault(),a(y)&&c()},v=y=>{if(!n.current)return;const b=y.target;let w;n.current instanceof Node?w=n.current:"contextElement"in n.current&&(w=n.current.contextElement),(!(b instanceof Node)||!w||b.contains(w))&&d.onClose()};return document.addEventListener("pointerdown",p,!0),document.addEventListener("pointerup",m,!0),document.addEventListener("contextmenu",g,!0),document.addEventListener("scroll",v,!0),()=>{const y=ba.indexOf(i);y>=0&&ba.splice(y,1),document.removeEventListener("pointerdown",p,!0),document.removeEventListener("pointerup",m,!0),document.removeEventListener("contextmenu",g,!0),document.removeEventListener("scroll",v,!0)}},[i,a,d,u,l,n,h,c]),{domProps:{onKeyDown:p=>{p.key==="Escape"&&(p.stopPropagation(),p.preventDefault(),c())}}}}const OR={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function eg({position:t="absolute",className:e,isTransparent:n=!1,disableInitialTransition:r,...i}){return _(yt.div,{...i,className:fe(e,!n&&"bg-black/30","w-full h-full inset-0 z-10",t),"aria-hidden":!0,initial:r?void 0:{opacity:0},animate:{opacity:1},exit:{opacity:0},...OR,transition:{duration:.3}})}const $x=E.exports.forwardRef(({children:t,autoFocus:e=!1,restoreFocus:n=!0,isDismissable:r,isOpen:i,onClose:s},d)=>{const a=Kp(),o=yi(d);return oe("div",{className:"isolate z-tray fixed inset-0",style:a,children:[_(eg,{onClick:()=>{r&&s()}},"tray-underlay"),_(yt.div,{ref:o,className:"absolute bottom-0 left-0 right-0 w-full z-20 rounded-t overflow-hidden max-w-375 max-h-tray mx-auto pb-safe-area",role:"presentation",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"tween",duration:.2},children:_(ou,{restoreFocus:n,autoFocus:e,contain:!0,children:t})})]})});function tg(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(let s=0;s<i;s++){const d=n[s];if(t[d]!==e[d]||!Object.prototype.hasOwnProperty.call(e,d))return!1}return!0}const Ux=E.exports.createContext(null);function PR(){return E.exports.useContext(Ux)}function lu(){const{data:{i18n:t}}=PR();return{locale:t,localeCode:(t==null?void 0:t.language)||"en",lines:t==null?void 0:t.lines}}function Hx(t,{message:e,values:n}){const r=e.match(/\[(.+?)]/),i=n==null?void 0:n.count;if(r&&r[1]&&!Number.isNaN(i)){const[s,d]=r,a=d.split("|");if(!a.length)return e;const c=MR(t).select(i);let h=a.find(u=>u.startsWith(c));h||(h=a[0]);const l=h.substring(h.indexOf(" ")+1);return e.replace(s,l)}return e}const MR=pa(t=>new Intl.PluralRules(t)),be=E.exports.memo(t=>{const{message:e,values:n}=t,{lines:r,localeCode:i}=lu();let s=(r==null?void 0:r[e])||e;if(!n)return _(E.exports.Fragment,{children:s});s=Hx(i,{message:s,values:n});const d=[],a=[];if(Object.entries(n).forEach(([o,c])=>{typeof c=="function"?a.push(o):E.exports.isValidElement(c)?d.push(o):c!=null&&(s=s.replace(`:${o}`,`${c}`))}),a.length||d.length){const o=[];if(a.length){const u=a.join("");o.push(`(<[${u}]>.+?<\\/[${u}]>)`)}if(d.length){const u=d.join("|");o.push(`(:(?:${u}))`)}const c=new RegExp(o.join("|"),"gm"),l=s.split(c).filter(Boolean).map((u,f)=>{if(u.startsWith("<")&&u.endsWith(">")){const p=u.match(/<([a-z]+)>(.+?)<\/([a-z]+)>/);if(p){const[,m,g]=p,v=n==null?void 0:n[m];if(typeof v=="function"){const y=v(g);return E.exports.cloneElement(y,{key:f})}}}if(u.startsWith(":")){const p=u.replace(":",""),m=n==null?void 0:n[p];if(E.exports.isValidElement(m))return E.exports.cloneElement(m,{key:f})}return u});return _(E.exports.Fragment,{children:l})}return _(E.exports.Fragment,{children:s})},AR);function AR(t,e){const{values:n,...r}=t,{values:i,...s}=e;return tg(i,n)&&tg(r,s)}function Wx({listbox:t,children:e,isLoading:n,mobileOverlay:r=$x,...i}){const s=lR(),{floatingWidth:d,floatingMinWidth:a="min-w-180",collection:o,showEmptyMessage:c,state:{isOpen:h,setIsOpen:l},positionStyle:u,floating:f,refs:p}=t,m=s?r:au,g=fe("py-4 text-base sm:text-sm outline-none bg-paper shadow-xl border max-h-inherit overflow-y-auto",m===au&&"rounded",m===au&&d==="auto"?`max-w-288 ${a}`:""),v=E.exports.useMemo(()=>{let y=0;const b=[];return[...o.values()].reduce((w,x)=>{if(!x.section)w.push(E.exports.cloneElement(x.element,{key:x.element.key||x.element.props.value}));else if(!b.includes(x.section)){const S=E.exports.cloneElement(x.section,{key:x.section.key||y,index:y});w.push(S),b.push(x.section),y++}return w},[])},[o]);return oe(Ix.Provider,{value:t,children:[e,nn&&Zi.exports.createPortal(_(Yn,{children:h&&(v.length>0||c)&&_(m,{triggerRef:p.reference,restoreFocus:!0,isOpen:h,onClose:()=>{l(!1)},isDismissable:!0,style:u,ref:f,children:_(DR,{isLoading:n,className:g,...i,children:v})})}),nn)]})}function DR({className:t,children:e,isLoading:n,...r}){const{role:i,listboxId:s,virtualFocus:d,focusItem:a,state:{activeIndex:o,setActiveIndex:c}}=Lx(),h=E.exports.useRef(!0),l=E.exports.useRef(null);return E.exports.useEffect(()=>()=>c(null),[c]),E.exports.useEffect(()=>{h.current&&(o==null&&!d?requestAnimationFrame(()=>{var u;(u=l.current)==null||u.focus({preventScroll:!0})}):o!=null&&requestAnimationFrame(()=>{a("increment",o)})),h.current=!1},[o,a,d]),_("div",{tabIndex:-1,role:i,id:s,className:t,ref:l,...r,children:e.length?e:_(RR,{isLoading:n})})}function RR({isLoading:t}){return _("div",{className:"italic px-8 py-4 text-sm text-muted",children:t?_(be,{message:"Loading..."}):_(be,{message:"There are no items matching your query"})})}function Yx({state:{isOpen:t,setIsOpen:e,selectedIndex:n,activeIndex:r},loopFocus:i,collection:s,focusItem:d}){return{handleTriggerKeyDown:c=>{if(!(t||!c.currentTarget.contains(c.target))){if(c.key==="ArrowDown")return c.preventDefault(),e(!0),d("increment",n!=null?n:0),!0;if(c.key==="ArrowUp")return c.preventDefault(),e(!0),d("decrement",n!=null?n:s.size-1),!0;if(c.key==="Enter"||c.key==="Space")return c.preventDefault(),e(!0),d("increment",n!=null?n:0),!0}},handleListboxKeyboardNavigation:c=>{const h=Math.max(0,s.size-1);if(!(!t||!c.currentTarget.contains(c.target)))switch(c.key){case"ArrowDown":return c.preventDefault(),r==null?d("increment",0):r>=h?i&&d("increment",0):d("increment",r+1),!0;case"ArrowUp":return c.preventDefault(),r==null?d("decrement",h):r<=0?i&&d("decrement",h):d("decrement",r-1),!0;case"Home":return c.preventDefault(),d("increment",0),!0;case"End":return c.preventDefault(),d("decrement",h),!0;case"Tab":return e(!1),!0}}}}const ng=new Map;function IR(t){const{localeCode:e}=lu(),n=e+(t?Object.entries(t).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(ng.has(n))return ng.get(n);const r=new Intl.Collator(e,t);return ng.set(n,r),r}function Xx(){const t=IR({usage:"search",sensitivity:"base"}),e=E.exports.useRef({search:"",timeout:void 0}).current,n=(i,s)=>{let d=s!=null?s:0;for(;d!=null;){const a=i[d],o=a==null?void 0:a.slice(0,e.search.length);if(o&&t.compare(o,e.search)===0)return d;if(d<i.length-1)d++;else return null}return null};return{findMatchingItem:(i,s,d=0)=>{const a=LR(i.key);if(!a||i.ctrlKey||i.metaKey)return null;a===" "&&e.search.trim().length>0&&(i.preventDefault(),i.stopPropagation()),e.search+=a;let o=n(s,d);return o==null&&(o=n(s,0)),clearTimeout(e.timeout),e.timeout=setTimeout(()=>{e.search=""},500),o!=null?o:null}}}function LR(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function FR(t,{noSSR:e}={noSSR:!0}){const n=typeof window<"u"&&typeof window.matchMedia=="function",[r,i]=E.exports.useState(e?()=>n?window.matchMedia(t).matches:!1:null);return E.exports.useEffect(()=>{if(!n)return;const s=window.matchMedia(t),d=()=>{i(s.matches)};return s.addEventListener("change",d),e||d(),()=>{s.removeEventListener("change",d)}},[n,t,e]),typeof window>"u"?null:r}function cu(t){return FR("(max-width: 768px)",t)}const zR=E.exports.forwardRef((t,e)=>{const{children:[n,r],floatingWidth:i="auto"}=t,s=E.exports.useId(),d=cu(),a=Rx({...t,floatingWidth:d?i:"auto",role:"menu",loopFocus:!0,children:r.props.children},e),{state:{isOpen:o,setIsOpen:c,activeIndex:h},listboxId:l,focusItem:u,listContent:f,reference:p}=a,{handleTriggerKeyDown:m,handleListboxKeyboardNavigation:g}=Yx(a),{findMatchingItem:v}=Xx();return _(Wx,{listbox:a,"aria-labelledby":s,onKeyDownCapture:y=>{if(!o)return;const b=v(y,f,h);b&&u("increment",b)},onKeyDown:g,children:E.exports.cloneElement(n,{id:s,"aria-expanded":o?"true":"false","aria-haspopup":"menu","aria-controls":o?l:void 0,ref:p,onKeyDown:m,onClick:zt(y=>{var b,w;(w=(b=n.props)==null?void 0:b.onClick)==null||w.call(b,y),c(!o)})})})});function NR({children:t}){return t}function jR({item:t,button:e}){return oe(zR,{children:[e,_(NR,{children:(t.menuItems||[]).map(n=>_(ru,{value:n.label,onSelected:()=>{n.action(M().editor)},children:n.label},n.label))})]})}const Re=E.exports.forwardRef(({children:t,size:e="md",iconSize:n=e&&e.length<=3?e:"md",variant:r="text",radius:i="rounded-full",className:s,padding:d,equalWidth:a=!0,...o},c)=>{const h=fe(jp(e,{padding:d,equalWidth:a,variant:r}),s);return _(Gn,{...o,ref:c,radius:i,variant:r,className:h,children:E.exports.cloneElement(t,{size:n})})});function BR({icon:t,className:e,size:n}){let r;return he.isValidElement(t)?r=he.cloneElement(t,{className:"svg-iconEl"}):typeof t=="string"?r=_("img",{className:"w-font h-font",src:t,alt:""}):Array.isArray(t)?r=he.createElement(Ak(t),{size:n}):r=he.createElement(t,{size:n}),_("span",{className:fe(e,"leading-none"),children:r})}const rg=he.memo(BR);function ig({value:t}){return t?typeof t=="string"?_(E.exports.Fragment,{children:t}):_(be,{...t}):null}function VR({item:t}){const e=t.label?_(UR,{item:t}):_($R,{item:t});return t.menuItems?_(jR,{item:t,button:e}):he.cloneElement(e,{onClick:()=>{var n;(n=t.action)==null||n.call(t,M().editor)}})}const $R=E.exports.forwardRef(({item:t,...e},n)=>_(Re,{ref:n,radius:"rounded-full",size:"sm",...e,children:_(rg,{icon:t.icon})})),UR=E.exports.forwardRef(({item:t,...e},n)=>_(bt,{ref:n,radius:"rounded-full",size:"xs",color:t.buttonColor||"primary",variant:t.buttonVariant||"flat",startIcon:t.icon&&_(rg,{icon:t.icon}),...e,children:_(ig,{value:t.label})}));function uu({children:t,color:e,variant:n,radius:r,size:i,className:s,value:d,onChange:a,multiple:o,disabled:c}){const h=f=>d===void 0?!1:o?d.includes(f):f===d,l=f=>{const p=[...d],m=d.indexOf(f);return m>-1?p.splice(m,1):p.push(f),p},u=he.Children.map(t,(f,p)=>{if(he.isValidElement(f)){const m=h(f.props.value),g=m?"primary":e;return he.cloneElement(f,{color:m?"primary":e,variant:n,size:i,radius:null,disabled:f.props.disabled||c,...f.props,onClick:v=>{f.props.onClick&&f.props.onClick(v),a&&(o?a==null||a(l(f.props.value)):a==null||a(f.props.value))},className:fe(f.props.className,m?"z-20":"z-10",HR(p,t,r,g))})}});return _("div",{className:fe(r,"inline-flex isolate",s),children:u})}function HR(t,e,n,r){return t===0?fe(n,"rounded-tr-none rounded-br-none",!r&&"border-r-transparent disabled:border-r-transparent"):t===e.length-1?fe(n,"rounded-tl-none rounded-bl-none -ml-1"):fe("rounded-none -ml-1",!r&&"border-r-transparent disabled:border-r-transparent")}const WR=ye(_("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),YR=ye(_("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function XR(){const t=ue(n=>n.history.canUndo),e=ue(n=>n.history.canRedo);return oe(uu,{variant:"outline",children:[_(Re,{equalWidth:!1,size:"xs",padding:"pl-12 pr-10",radius:"rounded-full",disabled:!t,onClick:()=>{L().history.undo()},children:_(WR,{})}),_(Re,{equalWidth:!1,padding:"pl-10 pr-12",size:"xs",radius:"rounded-full",disabled:!e,onClick:()=>{L().history.redo()},children:_(YR,{})})]})}const GR=ye(_("path",{d:"M19 13H5v-2h14v2z"}),"RemoveOutlined"),KR=ye(_("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function qR(){var n,r,i;const t=ue(s=>s.zoom)||1;return((n=ue(s=>{var d,a;return(a=(d=s.config.tools)==null?void 0:d.zoom)==null?void 0:a.allowUserZoom}))!=null?n:!0)?oe("div",{className:"flex items-center select-none",children:[_(Re,{size:"sm",disabled:!((r=L().zoom)!=null&&r.canZoomOut()),onClick:()=>{L().zoom.zoomOut(L().zoom.step)},children:_(GR,{})}),oe("div",{className:"w-[4ch] text-sm text-center",children:[Math.round(t*100),"%"]}),_(Re,{size:"sm",disabled:!((i=L().zoom)!=null&&i.canZoomIn()),onClick:()=>{L().zoom.zoomIn(L().zoom.step)},children:_(KR,{})})]}):null}function og({item:t}){switch(t.type){case"undoWidget":return _(XR,{});case"zoomWidget":return _(qR,{});case"button":return _(VR,{item:t});case"image":return _("img",{className:"h-30 object-cover",src:Kt(t.src),alt:""});default:return null}}const Fr=ye(_("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined");function fu(){var r;let t=ue(i=>{var s;return((s=i.config.ui)==null?void 0:s.mode)===uf.OVERLAY});const{width:e}=ue(i=>i.stageSize),n=e<=700;return n&&((r=M().config.ui)==null?void 0:r.forceOverlayModeOnMobile)&&(t=!0),{isModal:t,isMobile:n}}function ZR(){var o;const{isModal:t,isMobile:e}=fu(),n=(o=ue(c=>{var h;return(h=c.config.ui)==null?void 0:h.allowEditorClose}))!=null?o:!0,r=ue(c=>{var h,l;return(l=(h=c.config.ui)==null?void 0:h.menubar)==null?void 0:l.items}),{left:i,center:s,right:d}=E.exports.useMemo(()=>QR(r||[],e),[r,e]),a=t&&e&&n&&_(Re,{size:"sm",className:"ml-10",onClick:()=>{M().editor.close()},children:_(Fr,{})});return oe(yt.div,{className:hx,...dx,children:[_("div",{className:"mr-auto flex items-center gap-8",children:i.map((c,h)=>_(og,{item:c},h))}),_("div",{className:"flex items-center gap-10",children:s.map((c,h)=>_(og,{item:c},h))}),_("div",{className:"ml-auto flex items-center gap-8",children:d.map((c,h)=>_(og,{item:c},h))}),a]})}function QR(t,e){const n={left:[],center:[],right:[]};(t||[]).filter(i=>!e&&!i.mobileOnly||e&&!i.desktopOnly).forEach(i=>{var s,d,a;i.align==="left"?n.left.push({...i,position:(s=i.position)!=null?s:1}):i.align==="right"?n.right.push({...i,position:(d=i.position)!=null?d:1}):n.center.push({...i,position:(a=i.position)!=null?a:1})});const r=Object.entries(n).map(([i,s])=>[i,s.sort((d,a)=>{var o,c;return((o=d.position)!=null?o:0)-((c=a.position)!=null?c:0)})]);return Object.fromEntries(r)}function JR(){const t=ue(n=>{var r;return(r=n.crop.zoneRect)==null?void 0:r.width})||1,e=ue(n=>{var r;return(r=n.crop.zoneRect)==null?void 0:r.height})||1;return _("div",{className:"text-sm",children:`${t}x${e}`})}function eI(){const t=ue(e=>e.activeTool);return oe(yt.div,{className:hx,...dx,children:[_(tI,{}),nI(t),_(rI,{})]})}function tI(){const{isMobile:t}=fu(),e=ue(n=>n.dirty);return t?_(Re,{size:"sm",onClick:()=>{M().cancelChanges()},children:_(Fr,{})}):_(bt,{variant:"outline",size:"xs",startIcon:_(Fr,{}),radius:"rounded-full",onClick:()=>{M().cancelChanges()},children:e?_(be,{message:"Cancel"}):_(be,{message:"Close"})})}function nI(t){var n,r,i;if(!t)return null;const e=_("div",{className:"capitalize text-sm",children:_(be,{message:t})});switch(t){case Me.CROP:return((i=(r=(n=M().config.tools)==null?void 0:n.crop)==null?void 0:r.allowCustomRatio)!=null?i:!0)?_(JR,{}):e;default:return e}}function rI(){const{isMobile:t}=fu(),e=ue(n=>n.dirty);return t?_(Re,{size:"sm",disabled:!e,onClick:()=>{M().applyChanges()},children:_(Gp,{})}):_(bt,{variant:"flat",color:"primary",size:"xs",disabled:!e,startIcon:_(Gp,{}),radius:"rounded-full",onClick:()=>{M().applyChanges()},children:_(be,{message:"Apply"})})}function Gx(){const t=ue(e=>e.activeTool);return _(Yn,{initial:!1,children:t?_(eI,{},"activeToolbar"):_(ZR,{},"mainToolbar")})}const iI={newCanvas:se("Loading Canvas"),mainImage:se("Loading Image"),state:se("Loading State"),merge:se("Processing Image")};function oI(){const[t,e]=E.exports.useState(!1);return E.exports.useEffect(()=>{ue.subscribe(n=>n.loading,n=>{n&&e(n)})},[]),_(Yn,{children:t&&_(yt.div,{initial:{y:"60%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-60%",opacity:0},transition:{type:"tween",duration:.3},onAnimationComplete:()=>{setTimeout(()=>{e(!1)},400)},className:"absolute z-loading-indicator inset-0 m-auto p-6 w-144 h-32 text-center text-sm bg-paper rounded-full shadow-lg",children:_(be,{...iI[t]})})})}function sI(t,e,n){return Math.max(e,Math.min(t,n))}const nt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Kx(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function qx(t,e,n,r=.15){return r===0?sI(t,e,n):t<e?-Kx(e-t,n-e,r)+e:t>n?+Kx(t-n,n-e,r)+n:t}function aI(t,[e,n],[r,i]){const[[s,d],[a,o]]=t;return[qx(e,s,d,r),qx(n,a,o,i)]}function lI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cI(t){var e=lI(t,"string");return typeof e=="symbol"?e:String(e)}function wt(t,e,n){return e=cI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zx(Object(n),!0).forEach(function(r){wt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Qx={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Jx(t){return t?t[0].toUpperCase()+t.slice(1):""}const uI=["enter","leave"];function fI(t=!1,e){return t&&!uI.includes(e)}function hI(t,e="",n=!1){const r=Qx[t],i=r&&r[e]||e;return"on"+Jx(t)+Jx(i)+(fI(n,i)?"Capture":"")}const dI=["gotpointercapture","lostpointercapture"];function pI(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=dI.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function gI(t,e=""){const n=Qx[t],r=n&&n[e]||e;return t+r}function hu(t){return"touches"in t}function e2(t){return hu(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function mI(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function vI(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function t2(t){return hu(t)?vI(t)[0]:t}function sg(t,e){try{const n=e.clientX-t.clientX,r=e.clientY-t.clientY,i=(e.clientX+t.clientX)/2,s=(e.clientY+t.clientY)/2,d=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:d,origin:[i,s]}}catch{}return null}function yI(t){return mI(t).map(e=>e.identifier)}function n2(t,e){const[n,r]=Array.from(t.touches).filter(i=>e.includes(i.identifier));return sg(n,r)}function ag(t){const e=t2(t);return hu(t)?e.identifier:e.pointerId}function r2(t){const e=t2(t);return[e.clientX,e.clientY]}const i2=40,o2=800;function bI(t){let{deltaX:e,deltaY:n,deltaMode:r}=t;return r===1?(e*=i2,n*=i2):r===2&&(e*=o2,n*=o2),[e,n]}function wI(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function du(t,...e){return typeof t=="function"?t(...e):t}function xI(){}function _I(...t){return t.length===0?xI:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function s2(t,e){return Object.assign({},e,t||{})}const SI=32;class a2{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?du(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,wI(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const S=n._delta.map(Math.abs);nt.addTo(n._distance,S)}this.axisIntent&&this.axisIntent(e);const[d,a]=n._movement,[o,c]=r.threshold,{_step:h,values:l}=n;if(r.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(d)>=o&&l[0]),h[1]===!1&&(h[1]=Math.abs(a)>=c&&l[1])):(h[0]===!1&&(h[0]=Math.abs(d)>=o&&Math.sign(d)*o),h[1]===!1&&(h[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=h[0]!==!1||h[1]!==!1,!n.intentional)return;const u=[0,0];if(r.hasCustomTransform){const[S,C]=l;u[0]=h[0]!==!1?S-h[0]:0,u[1]=h[1]!==!1?C-h[1]:0}else u[0]=h[0]!==!1?d-h[0]:0,u[1]=h[1]!==!1?a-h[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(u);const f=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=du(r.bounds,n)),this.setup&&this.setup()),n.movement=u,this.computeOffset()));const[m,g]=n.offset,[[v,y],[b,w]]=n._bounds;n.overflow=[m<v?-1:m>y?1:0,g<b?-1:g>w?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const x=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=aI(n._bounds,n.offset,x),n.delta=nt.sub(n.offset,f),this.computeMovement(),p&&(!n.last||s>SI)){n.delta=nt.sub(n.offset,f);const S=n.delta.map(Math.abs);nt.addTo(n.distance,S),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[S[0]/s,S[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(He(He(He({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function CI([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class TI extends a2{constructor(...e){super(...e),wt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=nt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=nt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[e2(e)]:r.axisThreshold;n.axis=CI(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const kI=t=>t,l2=.15,c2={enabled(t=!0){return t},eventOptions(t,e,n){return He(He({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[l2,l2];case!1:return[0,0];default:return nt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return nt.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||kI},threshold(t){return nt.toVector(t,0)}},EI=0,wa=He(He({},c2),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=EI){return t},bounds(t={}){if(typeof t=="function")return s=>wa.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),u2={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class OI extends TI{constructor(...e){super(...e),wt(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=wa.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=ag(e),r._pointerActive=!0,this.computeValues(r2(e)),this.computeInitial(),n.preventScrollAxis&&e2(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive||n.type===e.type&&e.timeStamp===n.timeStamp)return;const i=ag(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=r2(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=nt.sub(s,n._values),this.computeValues(s)),nt.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=ag(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,d]=n._distance;if(n.tap=s<=r.tapsThreshold&&d<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,o]=n._delta,[c,h]=n._movement,[l,u]=r.swipe.velocity,[f,p]=r.swipe.distance,m=r.swipe.duration;if(n.elapsedTime<m){const g=Math.abs(a/n.timeDelta),v=Math.abs(o/n.timeDelta);g>l&&Math.abs(c)>f&&(n.swipe[0]=Math.sign(a)),v>u&&Math.abs(h)>p&&(n.swipe[1]=Math.sign(o))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,PI(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=u2[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,nt.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in u2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function PI(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const xa=typeof window<"u"&&window.document&&window.document.createElement;function MI(){return xa&&"ontouchstart"in window}function f2(){return MI()||xa&&window.navigator.maxTouchPoints>1}function AI(){return xa&&"onpointerdown"in window}function DI(){return xa&&"exitPointerLock"in window.document}function RI(){try{return"constructor"in GestureEvent}catch{return!1}}const un={isBrowser:xa,gesture:RI(),touch:f2(),touchscreen:f2(),pointer:AI(),pointerLock:DI()},II=250,LI=180,FI=.5,zI=50,NI=250,jI=10,h2={mouse:0,touch:0,pen:8},BI=He(He({},wa),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&un.pointerLock,un.touch&&n?"touch":this.pointerLock?"mouse":un.pointer&&!i?"pointer":un.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?II:void 0,!(!un.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=nt.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=FI,distance:e=zI,duration:n=NI}={}){return{velocity:this.transform(nt.toVector(t)),distance:this.transform(nt.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return LI;case!1:return 0;default:return t}},axisThreshold(t){return t?He(He({},h2),t):h2},keyboardDisplacement(t=jI){return t}});function VI(t){const[e,n]=t.overflow,[r,i]=t._delta,[s,d]=t._direction;(e<0&&r>0&&s<0||e>0&&r<0&&s>0)&&(t._movement[0]=t._movementBound[0]),(n<0&&i>0&&d<0||n>0&&i<0&&d>0)&&(t._movement[1]=t._movementBound[1])}const $I=30,UI=100;class HI extends a2{constructor(...e){super(...e),wt(this,"ingKey","pinching"),wt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:r}=this.state;e==="wheel"?this.state.offset=nt.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,r]=e._movement;if(!e.axis){const i=Math.abs(n)*$I-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(e),n._touchIds=Array.from(r).slice(0,2);const i=n2(e,n._touchIds);!i||this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,r=n._pointerEvents,i=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(d=>i.has(d))||(r.size<2&&r.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const s=sg(...Array.from(r.values()));!s||this.pinchStart(e,s)}pinchStart(e,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=n2(e,this.state._touchIds);!n||this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const r=sg(...Array.from(n.values()));!r||this.pinchMove(e,r)}pinchMove(e,n){const r=this.state,i=r._values[1],s=n.angle-i;let d=0;Math.abs(s)>270&&(d+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*d]),r.origin=n.origin,r.turns=d,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),!!this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),!!n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const r=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=nt.sub(n._movement,r),this.compute(e),this.emit()}gestureEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&!e[n]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-bI(e)[1]/UI*r.offset[0],0],nt.addTo(r._movement,r._delta),VI(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const WI=He(He({},c2),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!un.touch&&un.gesture)return"gesture";if(un.touch&&r)return"touch";if(un.touchscreen){if(un.pointer)return"pointer";if(un.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=d=>{const a=s2(du(n,d),{min:-1/0,max:1/0});return[a.min,a.max]},s=d=>{const a=s2(du(r,d),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:d=>[i(d),s(d)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",nt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});He(He({},wa),{},{mouseOnly:(t=!0)=>t}),He(He({},wa),{},{mouseOnly:(t=!0)=>t});const lg=new Map,cg=new Map;function YI(t){lg.set(t.key,t.engine),cg.set(t.key,t.resolver)}const XI={key:"drag",engine:OI,resolver:BI},GI={key:"pinch",engine:HI,resolver:WI};function KI(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function qI(t,e){if(t==null)return{};var n=KI(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}const ZI={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=un.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},QI=["target","eventOptions","window","enabled","transform"];function pu(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=pu(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function JI(t,e,n={}){const r=t,{target:i,eventOptions:s,window:d,enabled:a,transform:o}=r,c=qI(r,QI);if(n.shared=pu({target:i,eventOptions:s,window:d,enabled:a,transform:o},ZI),e){const h=cg.get(e);n[e]=pu(He({shared:n.shared},c),h)}else for(const h in c){const l=cg.get(h);l&&(n[h]=pu(He({shared:n.shared},c[h]),l))}return n}class d2{constructor(e,n){wt(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const d=this._listeners,a=gI(n,r),o=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=He(He({},o),s);e.addEventListener(a,i,c);const h=()=>{e.removeEventListener(a,i,c),d.delete(h)};return d.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class eL{constructor(){wt(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class tL{constructor(e){wt(this,"gestures",new Set),wt(this,"_targetEventStore",new d2(this)),wt(this,"gestureEventStores",{}),wt(this,"gestureTimeoutStores",{}),wt(this,"handlers",{}),wt(this,"config",{}),wt(this,"pointerIds",new Set),wt(this,"touchIds",new Set),wt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),nL(this,e)}setEventIds(e){if(hu(e))return this.touchIds=new Set(yI(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=JI(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const d of this.gestures){const a=this.config[d],o=p2(r,a.eventOptions,!!i);if(a.enabled){const c=lg.get(d);new c(this,e,d).bind(o)}}const s=p2(r,n.eventOptions,!!i);for(const d in this.nativeHandlers)s(d,"",a=>this.nativeHandlers[d](He(He({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=_I(...r[s]);if(!i)return r;for(const s in r){const{device:d,capture:a,passive:o}=pI(s);this._targetEventStore.add(i,d,"",r[s],{capture:a,passive:o})}}}}function $o(t,e){t.gestures.add(e),t.gestureEventStores[e]=new d2(t,e),t.gestureTimeoutStores[e]=new eL}function nL(t,e){e.drag&&$o(t,"drag"),e.wheel&&$o(t,"wheel"),e.scroll&&$o(t,"scroll"),e.move&&$o(t,"move"),e.pinch&&$o(t,"pinch"),e.hover&&$o(t,"hover")}const p2=(t,e,n)=>(r,i,s,d={},a=!1)=>{var o,c;const h=(o=d.capture)!==null&&o!==void 0?o:e.capture,l=(c=d.passive)!==null&&c!==void 0?c:e.passive;let u=a?r:hI(r,i,h);n&&l&&(u+="Passive"),t[u]=t[u]||[],t[u].push(s)},rL=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function iL(t){const e={},n={},r=new Set;for(let i in t)rL.test(i)?(r.add(RegExp.lastMatch),n[i]=t[i]):e[i]=t[i];return[n,e,r]}function Uo(t,e,n,r,i,s){if(!t.has(n)||!lg.has(r))return;const d=n+"Start",a=n+"End",o=c=>{let h;return c.first&&d in e&&e[d](c),n in e&&(h=e[n](c)),c.last&&a in e&&e[a](c),h};i[r]=o,s[r]=s[r]||{}}function oL(t,e){const[n,r,i]=iL(t),s={};return Uo(i,n,"onDrag","drag",s,e),Uo(i,n,"onWheel","wheel",s,e),Uo(i,n,"onScroll","scroll",s,e),Uo(i,n,"onPinch","pinch",s,e),Uo(i,n,"onMove","move",s,e),Uo(i,n,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:r}}function sL(t,e={},n,r){const i=he.useMemo(()=>new tL(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),he.useEffect(i.effect.bind(i)),he.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function aL(t){return t.forEach(YI),function(n,r){const{handlers:i,nativeHandlers:s,config:d}=oL(n,r||{});return sL(i,d,void 0,s)}}function qn({e:t,rect:e,deltaX:n,deltaY:r}){return{rect:e,x:t.clientX,y:t.clientY,deltaX:n!=null?n:0,deltaY:r!=null?r:0,nativeEvent:t}}function gu({onMoveStart:t,onMove:e,onMoveEnd:n,minimumMovement:r=0,preventDefault:i,stopPropagation:s=!0,onPress:d,onLongPress:a,...o}){const h=E.exports.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:l,removeGlobalListener:u}=Op(),f=v=>{!h.el||(t==null?void 0:t(v,h.el))===!1||(h.originalTouchAction=h.el.style.touchAction,h.el.style.touchAction="none",h.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",h.started=!0)},p=v=>{var y;if(v.button===0&&h.id==null){if(h.started=!1,((y=o.onPointerDown)==null?void 0:y.call(o,v))===!1)return;s&&v.stopPropagation(),i&&v.preventDefault(),h.id=v.pointerId,h.el=v.currentTarget,h.lastPosition={x:v.clientX,y:v.clientY},a&&(h.longPressTimer=setTimeout(()=>{a(v,h.el),h.longPressTriggered=!0},400)),(t||e)&&l(window,"pointermove",m,!1),l(window,"pointerup",g,!1),l(window,"pointercancel",g,!1)}},m=v=>{if(v.pointerId===h.id){const y=v.clientX-h.lastPosition.x,b=v.clientY-h.lastPosition.y;(Math.abs(y)>=r||Math.abs(b)>=r)&&!h.started&&f(v),h.started&&(e==null||e(v,y,b),h.lastPosition={x:v.clientX,y:v.clientY})}},g=v=>{var y;if(v.pointerId===h.id){h.longPressTimer&&clearTimeout(h.longPressTimer);const b=h.longPressTriggered;h.longPressTriggered=!1,h.started&&(n==null||n(v)),h.el&&(v.type!=="pointercancel"&&((y=o.onPointerUp)==null||y.call(o,v,h.el),v.target&&h.el.contains(v.target)&&(b?a==null||a(v,h.el):d==null||d(v,h.el))),document.documentElement.style.userSelect=h.originalUserSelect||"",h.el.style.touchAction=h.originalTouchAction||""),h.id=void 0,h.started=!1,u(window,"pointermove",m,!1),u(window,"pointerup",g,!1),u(window,"pointercancel",g,!1)}};return{domProps:{onPointerDown:zt(p)}}}function lL(t,e){const n={...t};n.left=Math.max(0,n.left);const r=n.left-t.left;r>0&&(n.width-=r),n.top=Math.max(0,n.top);const i=n.top-t.top;return i>0&&(n.height-=i),n.width=Math.min(n.width,e.width-n.left),n.height=Math.min(n.height,e.height-n.top),n}function _a(t){return{left:t.left,top:t.top,width:t.width,height:t.height}}var Qt=(t=>(t.topLeft="topLeft",t.topRight="topRight",t.bottomLeft="bottomLeft",t.bottomRight="bottomRight",t))(Qt||{});let Pe={};const g2=(t={})=>{Io(null),Pe=t};function m2({aspectRatio:t,boundaryRef:e,boundaryRect:n,restrictWithinBoundary:r=!0,minWidth:i=50,minHeight:s=50,...d}){const a={onMoveStart:(c,h)=>{var u;const l=c.target;if(!l.dataset.resizeHandle||ha||(g2({currentRect:_a(h.getBoundingClientRect()),resizeDir:l.dataset.resizeHandle}),!Pe.currentRect))return!1;Io("resize"),n?Pe.boundaryRect=n:e!=null&&e.current&&(Pe.boundaryRect=_a(e.current.getBoundingClientRect())),Pe.currentRect&&Pe.boundaryRect&&(Pe.currentRect.left-=Pe.boundaryRect.left,Pe.currentRect.top-=Pe.boundaryRect.top),Pe.initialAspectRatio=Pe.currentRect.width/Pe.currentRect.height,(u=d.onResizeStart)==null||u.call(d,qn({rect:Pe.currentRect,e:c}))},onMove:(c,h,l)=>{var m;if(!Pe.resizeDir||!Pe.currentRect)return;const u=t==="initial"?Pe.initialAspectRatio:t,f=cL(Pe.currentRect,h,l,u),p=uL(f,i,s,u);(m=d.onResize)==null||m.call(d,qn({rect:p,e:c,deltaX:h,deltaY:l})),Pe.currentRect=f},onMoveEnd:c=>{var h;Pe.currentRect&&((h=d.onResizeEnd)==null||h.call(d,qn({rect:Pe.currentRect,e:c}))),g2()}},{domProps:o}=gu(a);return{resizeProps:o}}function cL(t,e,n,r){const i={...t},s={...t};return Pe.resizeDir==="topRight"?(s.width=Math.floor(s.width+e),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height-n),s.top=Math.floor(s.top+(i.height-s.height))):Pe.resizeDir==="bottomRight"?(s.width=Math.floor(s.width+e),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height+n)):Pe.resizeDir==="topLeft"?(s.width=Math.floor(s.width-e),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height-n),s.left=Math.floor(s.left+(i.width-s.width)),s.top=Math.floor(s.top+(i.height-s.height))):Pe.resizeDir==="bottomLeft"&&(s.width=Math.floor(s.width-e),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height+n),s.left=Math.floor(s.left+e)),s}function uL(t,e,n,r){const i=Pe.resizeDir==="bottomLeft"||Pe.resizeDir==="topLeft",s=Pe.resizeDir==="topRight"||Pe.resizeDir==="topLeft";let d={...t};d.width=Math.max(e,t.width),d.height=Math.max(n,t.height);const a=d.width-t.width;i&&a>0&&(d.left-=a);const o=d.height-t.height;if(s&&o>0&&(d.top-=o),Pe.boundaryRect&&(d=lL(d,Pe.boundaryRect)),r){const c=d.width,h=d.height,l=Lp(r,d.width,d.height);d.width=l.width,d.height=l.height,s&&(d.top+=h-d.height),i&&(d.left+=c-d.width)}return d}function zr({position:t,inset:e=!1}){const n=fL(t,e);return _("div",{"data-resize-handle":t,className:`border-white absolute w-20 h-20 ${n}`})}function fL(t,e){const n=e?"left-0":"-left-5",r=e?"top-0":"-top-5",i=e?"bottom-0":"-bottom-5",s=e?"right-0":"-right-5";switch(t){case Qt.topLeft:return`${n} ${r} border-l-4 border-t-4 cursor-nwse-resize`;case Qt.topRight:return`${s} ${r} border-r-4 border-t-4 cursor-nesw-resize`;case Qt.bottomRight:return`${s} ${i} border-r-4 border-b-4 cursor-se-resize`;case Qt.bottomLeft:return`${n} ${i} border-l-4 border-b-4 cursor-sw-resize`;default:return""}}var Sa=(t=>(t.top="maskTop",t.right="maskRight",t.bottom="maskBottom",t.left="maskLeft",t))(Sa||{});function mu({position:t,refs:e}){const n=hL(t);return _("div",{className:`cropzone-transition bg-black/50 bottom absolute ${n}`,ref:r=>e.current[t]=r})}function hL(t){switch(t){case"maskTop":return"left-0 top-0";case"maskBottom":return"bottom-0 left-0";default:return""}}function vu({name:t,refs:e}){const n=fe("cropzone-transition pointer-events-none absolute left-0 top-0 bg-white/50",t.startsWith("lineHor")?"h-px":"w-px");return _("div",{className:n,ref:r=>{e.current[t]=r}})}function Ca(t,e,n){return Math.min(Math.max(t,e),n)}let Ke={};function v2({boundaryRef:t,boundaryRect:e,minimumMovement:n,restrictWithinBoundary:r=!0,...i}){const s={minimumMovement:n,onMoveStart:(a,o)=>{var c;if(ha)return!1;Ke={currentRect:_a(o.getBoundingClientRect())},Io("move"),e?Ke.boundaryRect=e:t!=null&&t.current&&(Ke.boundaryRect=_a(t.current.getBoundingClientRect())),Ke.currentRect&&Ke.boundaryRect&&(Ke.currentRect.left-=Ke.boundaryRect.left,Ke.currentRect.top-=Ke.boundaryRect.top),(c=i.onMoveStart)==null||c.call(i,qn({rect:Ke.currentRect,e:a}))},onMove:(a,o,c)=>{var u;if(!Ke.currentRect)return;const h={...Ke.currentRect,left:Ke.currentRect.left+o,top:Ke.currentRect.top+c},l={...h};Ke.boundaryRect&&r&&(l.left=Ca(h.left,0,Ke.boundaryRect.width-h.width),l.top=Ca(h.top,0,Ke.boundaryRect.height-h.height)),(u=i.onMove)==null||u.call(i,qn({rect:l,e:a,deltaX:o,deltaY:c})),Ke.currentRect=h},onMoveEnd:a=>{var o;!Ke.currentRect||((o=i.onMoveEnd)==null||o.call(i,qn({rect:Ke.currentRect,e:a})),Io(null),Ke={})}},{domProps:d}=gu(s);return{moveProps:d}}function dL(){const t=E.exports.useRef({}),[e,n]=E.exports.useState(!0),r=ue(h=>h.canvasSize),i=ue(h=>{var l,u;return(u=(l=h.config.tools)==null?void 0:l.crop)==null?void 0:u.cropzone}),s=ue(h=>{var l,u;return(u=(l=h.config.tools)==null?void 0:l.crop)==null?void 0:u.defaultRatio})||null,d=ue(h=>h.crop.selectedAspectRatio)||null,{moveProps:a}=v2({boundaryRect:r,onMoveStart:()=>n(!0),onMove:h=>L().crop.drawZone(h.rect),onMoveEnd:()=>n(!1)}),{resizeProps:o}=m2({boundaryRect:r,minHeight:50,minWidth:50,aspectRatio:Fp(d),onResizeStart:()=>n(!0),onResize:h=>L().crop.drawZone(h.rect),onResizeEnd:()=>n(!1)});E.exports.useLayoutEffect(()=>{L().crop.registerRefs(t),L().crop.resetCropzone(s)},[s,r]);const c=fe("cropzone absolute z-cropzone isolate left-0 top-0 w-full h-full overflow-hidden",e&&"moving");return oe("div",{className:c,onPointerDown:h=>{h.stopPropagation(),h.preventDefault()},children:[oe("div",{className:"cropzone-transition border-white/50 absolute z-10 left-0 top-0 border",...Xn(o,a),ref:h=>t.current.innerZone=h,children:[!(i!=null&&i.hideTopLeft)&&_(zr,{position:Qt.topLeft,inset:!0}),!(i!=null&&i.hideTopRight)&&_(zr,{position:Qt.topRight,inset:!0}),!(i!=null&&i.hideBottomLeft)&&_(zr,{position:Qt.bottomLeft,inset:!0}),!(i!=null&&i.hideBottomRight)&&_(zr,{position:Qt.bottomRight,inset:!0}),_(vu,{name:"lineVer1",refs:t}),_(vu,{name:"lineVer2",refs:t}),_(vu,{name:"lineHor1",refs:t}),_(vu,{name:"lineHor2",refs:t})]}),_(mu,{refs:t,position:Sa.top}),_(mu,{refs:t,position:Sa.left}),_(mu,{refs:t,position:Sa.right}),_(mu,{refs:t,position:Sa.bottom})]})}const pL=ye(_("path",{d:"M 7 2 C 6.448 2 6 2.448 6 3 C 6 3.552 6.448 4 7 4 L 20 4 L 20 17 C 20 17.552 20.448 18 21 18 C 21.552 18 22 17.552 22 17 L 22 4 C 22 2.895 21.105 2 20 2 L 7 2 z M 4 6 C 2.895 6 2 6.895 2 8 L 2 20 C 2 21.105 2.895 22 4 22 L 16 22 C 17.105 22 18 21.105 18 20 L 18 8 C 18 6.895 17.105 6 16 6 L 4 6 z M 10 10 C 10.552 10 11 10.448 11 11 L 11 13 L 13 13 C 13.552 13 14 13.448 14 14 C 14 14.552 13.552 15 13 15 L 11 15 L 11 17 C 11 17.552 10.552 18 10 18 C 9.448 18 9 17.552 9 17 L 9 15 L 7 15 C 6.448 15 6 14.552 6 14 C 6 13.448 6.448 13 7 13 L 9 13 L 9 11 C 9 10.448 9.448 10 10 10 z"})),gL=ye(_("path",{d:"M 11 3 L 2 21 L 11 21 L 11 3 z M 13 3 L 13 21 L 22 21 L 13 3 z M 9 11.472656 L 9 19 L 5.2363281 19 L 9 11.472656 z"})),mL=ye(_("path",{d:"M 16.476562 2.4511719 C 16.392047 2.4657656 16.308531 2.5061719 16.238281 2.5761719 L 14.130859 4.6835938 C 13.956859 4.8575938 13.956859 5.1394531 14.130859 5.3144531 L 16.238281 7.4238281 C 16.519281 7.7048281 17 7.5054219 17 7.1074219 L 17 6 L 20 6 L 20 9 A 1.0001 1.0001 0 1 0 22 9 L 22 6 C 22 4.9069372 21.093063 4 20 4 L 17 4 L 17 2.8925781 C 17 2.5940781 16.730109 2.4073906 16.476562 2.4511719 z M 4 5 C 2.9069372 5 2 5.9069372 2 7 L 2 14 C 2 15.093063 2.9069372 16 4 16 L 7 16 L 7 19 C 7 20.105 7.895 21 9 21 L 16 21 C 17.105 21 18 20.105 18 19 L 18 12 C 18 10.895 17.105 10 16 10 L 13 10 L 13 7 C 13 5.9069372 12.093063 5 11 5 L 4 5 z M 4 7 L 11 7 L 11 14 L 4 14 L 4 7 z"})),vL=ye(_("path",{d:"M 10 2 L 9 3 L 3 3 L 3 5 L 21 5 L 21 3 L 15 3 L 14 2 L 10 2 z M 4.3652344 7 L 5.8925781 20.263672 C 6.0245781 21.253672 6.877 22 7.875 22 L 16.123047 22 C 17.121047 22 17.974422 21.254859 18.107422 20.255859 L 19.634766 7 L 4.3652344 7 z"})),yL={width:120,height:30},bL=[{name:"Duplicate",icon:pL,onClick:()=>{L().objects.duplicate()}},{name:"Flip",icon:gL,onClick:()=>{L().objects.flipHorizontally()}},{name:"Bring to front",icon:mL,onClick:()=>{L().objects.bringToFront()}},{name:"Delete",icon:vL,onClick:()=>{L().objects.delete()}}],wL=he.forwardRef((t,e)=>{const r=ue(i=>i.objects.active.isMoving)?"opacity-0":"opacity-100";return _("div",{ref:e,className:`${r} absolute z-obj-box left-0 top-0 flex items-center text-white bg-controls rounded shadow transition-opacity overflow-hidden`,children:bL.map(i=>{const s=i.icon;return _(Re,{size:"sm",className:"w-30 h-30 hover:bg-white/hover",radius:"rounded-none",onClick:i.onClick,children:_(s,{})},i.name)})})});function xL(t,e){if(!e)return;const n=t.angle||0,r=n>168&&n<188?-30:-15,i=M().canvasSize,s=M().stageSize,d=yL,a=i.top-s.top,o=i.left-s.left,c=s.width-(o+i.width),h=s.height-(a+i.height),l=-a,u=-(i.left-s.left),f=i.width-d.width+c,p=i.height-d.height+h,m=t.getBoundingRect();let g=m.top-d.height+r,v=m.left+m.width/2-d.width/2;g=Math.min(p,Math.max(l,g)),v=Math.min(f,Math.max(u,v)),e.style.transform=`translate(${v}px, ${g}px) rotate(0deg)`}function _L(t){const e=L().objects.getActive();if(!e||!t.rect.angle)return;const n=xe.fabric.util.radiansToDegrees(t.rect.angle);n!==e.angle&&L().objects.setValues({angle:n})}function SL(t){const e=t.rect.width/2,n=t.rect.height/2;L().objects.setValues({left:(t.rect.left+e)/M().zoom,top:(t.rect.top+n)/M().zoom})}function CL(t){const e=L().objects.getActive();if(!e)return;const n={};ar(e)?(t.deltaX>0||e.getScaledHeight()>=20&&e.getScaledWidth()>=20)&&(n.fontSize=(e.fontSize||1)+t.deltaX):(e.width&&(n.scaleX=t.rect.width/M().zoom/e.width),e.height&&(n.scaleY=t.rect.height/M().zoom/e.height)),L().objects.setValues(n)}function y2(t,e){var l,u,f;const n=L().objects.getActive();if(!n||!t.current)return;const r=t.current,i=xe.fabric.util.degreesToRadians((l=n.angle)!=null?l:0);let s=Math.round(n.getScaledWidth()*M().zoom),d=Math.round(n.getScaledHeight()*M().zoom),a=Math.round(((u=n.left)!=null?u:0)*M().zoom),o=Math.round(((f=n.top)!=null?f:0)*M().zoom);const c=n.originX==="center"?s/2:0,h=n.originY==="center"?d/2:0;n.padding&&(s+=n.padding*2,d+=n.padding*2,a-=n.padding,o-=n.padding),r.style.width=`${s}px`,r.style.height=`${d}px`,r.style.transform=`translate(${a-c}px, ${o-h}px) rotate(${i}rad)`,L().canvas.render(),xL(n,e.current)}function TL(){var e;const t=L().objects.getActive();ar(t)&&(t.enterEditing(),(e=t.hiddenTextarea)==null||e.focus())}function kL(){return _("div",{className:"absolute -bottom-20 left-1/2 w-2 h-20 bg-white cursor-default -translate-x-1/2",children:_("div",{"data-rotate-handle":!0,className:"w-18 h-18 absolute -bottom-10 -left-8 bg-white rounded-full cursor-move"})})}let Dn={};function EL(t){const e={onMoveStart:(r,i)=>{var c,h;if(!r.target.dataset.rotateHandle||ha)return!1;const d=_a(i.getBoundingClientRect());if(!d)return!1;const a=(c=i.style.transform.match(/rotate\((.+?)\)/))==null?void 0:c[1],[o="0"]=a?a.split(","):[];w2({currentRect:d,centerX:d.left+d.width/2,centerY:d.top+d.height/2,startAngle:parseFloat(o)}),Io("rotate"),Dn.startAngle=b2(r),(h=t.onRotateStart)==null||h.call(t,qn({rect:d,e:r}))},onMove:(r,i,s)=>{var a;if(!Dn.currentRect)return;const d={...Dn.currentRect};d.angle=b2(r),d.left+=i,d.top+=s,(a=t.onRotate)==null||a.call(t,qn({rect:d,e:r,deltaX:i,deltaY:s})),Dn.currentRect=d},onMoveEnd:r=>{var i;Dn.currentRect&&((i=t.onRotateEnd)==null||i.call(t,qn({rect:Dn.currentRect,e:r}))),w2()}},{domProps:n}=gu(e);return{rotateProps:n}}function b2(t){const e={x:Dn.centerX||0,y:Dn.centerY||0};return Math.atan2(e.y-t.pageY,e.x-t.pageX)-(Dn.startAngle||0)}const w2=(t={})=>{Io(null),Dn=t};function OL(){const t=E.exports.useRef(null),e=E.exports.useRef(null),n=ue(u=>u.objects.active.id),r=ue(u=>u.objects.isEditingText),i=ue(u=>u.zoom),s=PL(),d=E.exports.useRef(null),a=E.exports.useCallback(()=>{d.current?(clearTimeout(d.current),d.current=null,TL()):d.current=setTimeout(()=>{d.current=null},300)},[]);let{moveProps:o}=v2({boundaryRef:M().canvasRef,restrictWithinBoundary:!1,onMoveEnd:()=>{M().objects.setActiveIsMoving(!1)},onMove:u=>{M().objects.setActiveIsMoving(!0),SL(u)}});s.lockMovement&&(o={});const{resizeProps:c}=m2({minWidth:50,minHeight:50,aspectRatio:s.unlockAspectRatio?null:"initial",boundaryRef:M().canvasRef,restrictWithinBoundary:!1,onResizeEnd:()=>{M().objects.setActiveIsMoving(!1)},onResize:u=>{M().objects.setActiveIsMoving(!0),CL(u)}}),{rotateProps:h}=EL({boundaryRef:M().canvasRef,onRotateEnd:()=>{M().objects.setActiveIsMoving(!1)},onRotate:u=>{M().objects.setActiveIsMoving(!0),_L(u)}});return E.exports.useEffect(()=>{!de()||M().editor.on("object:modified",u=>{u.sizeOrPositionChanged&&y2(t,e)})},[]),E.exports.useEffect(()=>{y2(t,e)},[n,i,r]),oe("div",{className:n&&!r?"block":"hidden",children:[oe("div",{ref:t,...Xn(h,c,o),onClick:a,className:"absolute z-obj-box border-2 border-white shadow-md cursor-move",children:[!s.hideTopLeft&&_(zr,{position:Qt.topLeft}),!s.hideTopRight&&_(zr,{position:Qt.topRight}),!s.hideBottomLeft&&_(zr,{position:Qt.bottomLeft}),!s.hideBottomRight&&_(zr,{position:Qt.bottomRight}),!s.hideRotatingPoint&&_(kL,{})]}),_(wL,{ref:e})]})}function PL(){const t=L().objects.getActive();if(!t||!t.name)return{};const e=M().config.objectControls||{},n=t.name;return{...e.global,...e[n]}}function ML(){const t=ue(n=>n.activeTool===Me.CROP),e=ue(n=>n.objects.active.id);return oe("div",{children:[t&&_(dL,{}),e&&_(OL,{})]})}const AL=aL([XI,GI]),DL=he.forwardRef((t,e)=>{const[n,r]=E.exports.useState(!1);E.exports.useEffect(()=>ue.subscribe(s=>s.loading,s=>{r(!s)}),[]);const i={visible:{opacity:1,transition:{duration:.35,delay:.5}},hidden:{opacity:0,transition:{duration:0}}};return _(RL,{children:oe(yt.div,{initial:{opacity:0},variants:i,animate:n?"visible":"hidden",className:"relative m-auto",style:{backgroundImage:`url(${Kt("images/empty-canvas-bg.png")})`},children:[_(ML,{}),_("canvas",{ref:e})]})})});function RL({children:t}){const e=E.exports.useRef(null),n=AL({onPinch:r=>{if(!L().zoom.allowUserZoom||!x2(r))return r.cancel();r.direction[0]===1?L().zoom.zoomIn(.01):L().zoom.zoomOut(.01),r.event.stopPropagation(),r.event.preventDefault()},onDrag:r=>{if(r.pinching||!x2(r))return r.cancel();e.current.scrollLeft-=r.delta[0],e.current.scrollTop-=r.delta[1]}});return _("div",{ref:e,className:"flex items-center justify-center w-full h-full overflow-hidden touch-none",...n(),children:t})}function x2(t){return!(de().findTarget(t.event,!1)||de().isDrawingMode)}function ug({actionBtn:t,children:e,className:n}){return oe("div",{className:fe(n,"flex gap-16 items-center h-full"),children:[t&&_("div",{className:"flex-shrink-0",children:t}),_("div",{className:"w-full flex-auto",children:e}),t&&_("div",{className:"w-96"})]})}function Ho(){return(Ho=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function yu(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(i[n]=t[n]);return i}function Ta(t){var e=E.exports.useRef(t),n=E.exports.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var ka=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Ea=function(t){return"touches"in t},fg=function(t){return t&&t.ownerDocument.defaultView||self},_2=function(t,e,n){var r=t.getBoundingClientRect(),i=Ea(e)?function(s,d){for(var a=0;a<s.length;a++)if(s[a].identifier===d)return s[a];return s[0]}(e.touches,n):e;return{left:ka((i.pageX-(r.left+fg(t).pageXOffset))/r.width),top:ka((i.pageY-(r.top+fg(t).pageYOffset))/r.height)}},S2=function(t){!Ea(t)&&t.preventDefault()},C2=he.memo(function(t){var e=t.onMove,n=t.onKey,r=yu(t,["onMove","onKey"]),i=E.exports.useRef(null),s=Ta(e),d=Ta(n),a=E.exports.useRef(null),o=E.exports.useRef(!1),c=E.exports.useMemo(function(){var f=function(g){S2(g),(Ea(g)?g.touches.length>0:g.buttons>0)&&i.current?s(_2(i.current,g,a.current)):m(!1)},p=function(){return m(!1)};function m(g){var v=o.current,y=fg(i.current),b=g?y.addEventListener:y.removeEventListener;b(v?"touchmove":"mousemove",f),b(v?"touchend":"mouseup",p)}return[function(g){var v=g.nativeEvent,y=i.current;if(y&&(S2(v),!function(w,x){return x&&!Ea(w)}(v,o.current)&&y)){if(Ea(v)){o.current=!0;var b=v.changedTouches||[];b.length&&(a.current=b[0].identifier)}y.focus(),s(_2(y,v,a.current)),m(!0)}},function(g){var v=g.which||g.keyCode;v<37||v>40||(g.preventDefault(),d({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},m]},[d,s]),h=c[0],l=c[1],u=c[2];return E.exports.useEffect(function(){return u},[u]),_("div",{...Ho({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:i,onKeyDown:l,tabIndex:0,role:"slider"})})}),hg=function(t){return t.filter(Boolean).join(" ")},T2=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,s=hg(["react-colorful__pointer",t.className]);return _("div",{className:s,style:{top:100*i+"%",left:100*n+"%"},children:_("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}})})},ft=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},IL=function(t){return jL(dg(t))},dg=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ft(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?ft(parseInt(t.substring(6,8),16)/255,2):1}},LL=function(t){return NL(zL(t))},FL=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:ft(t.h),s:ft(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:ft(i/2),a:ft(r,2)}},pg=function(t){var e=FL(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},zL=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),d=r*(1-n),a=r*(1-(e-s)*n),o=r*(1-(1-e+s)*n),c=s%6;return{r:ft(255*[r,a,d,d,o,r][c]),g:ft(255*[o,r,r,a,d,d][c]),b:ft(255*[d,d,o,r,r,a][c]),a:ft(i,2)}},bu=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},NL=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i<1?bu(ft(255*i)):"";return"#"+bu(e)+bu(n)+bu(r)+s},jL=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),d=s-Math.min(e,n,r),a=d?s===e?(n-r)/d:s===n?2+(r-e)/d:4+(e-n)/d:0;return{h:ft(60*(a<0?a+6:a)),s:ft(s?d/s*100:0),v:ft(s/255*100),a:i}},BL=he.memo(function(t){var e=t.hue,n=t.onChange,r=hg(["react-colorful__hue",t.className]);return he.createElement("div",{className:r},he.createElement(C2,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:ka(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ft(e),"aria-valuemax":"360","aria-valuemin":"0"},he.createElement(T2,{className:"react-colorful__hue-pointer",left:e/360,color:pg({h:e,s:100,v:100,a:1})})))}),VL=he.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:pg({h:e.h,s:100,v:100,a:1})};return he.createElement("div",{className:"react-colorful__saturation",style:r},he.createElement(C2,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:ka(e.s+100*i.left,0,100),v:ka(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ft(e.s)+"%, Brightness "+ft(e.v)+"%"},he.createElement(T2,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:pg(e)})))}),k2=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},$L=function(t,e){return t.toLowerCase()===e.toLowerCase()||k2(dg(t),dg(e))};function UL(t,e,n){var r=Ta(n),i=E.exports.useState(function(){return t.toHsva(e)}),s=i[0],d=i[1],a=E.exports.useRef({color:e,hsva:s});E.exports.useEffect(function(){if(!t.equal(e,a.current.color)){var c=t.toHsva(e);a.current={hsva:c,color:e},d(c)}},[e,t]),E.exports.useEffect(function(){var c;k2(s,a.current.hsva)||t.equal(c=t.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,t,r]);var o=E.exports.useCallback(function(c){d(function(h){return Object.assign({},h,c)})},[]);return[s,o]}var HL=typeof window<"u"?E.exports.useLayoutEffect:E.exports.useEffect,WL=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},E2=new Map,YL=function(t){HL(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!E2.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,E2.set(e,n);var r=WL();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},XL=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,d=yu(t,["className","colorModel","color","onChange"]),a=E.exports.useRef(null);YL(a);var o=UL(n,i,s),c=o[0],h=o[1],l=hg(["react-colorful",e]);return oe("div",{...Ho({},d,{ref:a,className:l}),children:[_(VL,{hsva:c,onChange:h}),_(BL,{hue:c.h,onChange:h,className:"react-colorful__last-control"})]})},GL={defaultColor:"000",toHsva:IL,fromHsva:function(t){return LL({h:t.h,s:t.s,v:t.v,a:1})},equal:$L},KL=function(t){return _(XL,{...Ho({},t,{colorModel:GL})})},qL=/^#?([0-9A-F]{3,8})$/i,ZL=function(t){var e=t.color,n=e===void 0?"":e,r=t.onChange,i=t.onBlur,s=t.escape,d=t.validate,a=t.format,o=t.process,c=yu(t,["color","onChange","onBlur","escape","validate","format","process"]),h=E.exports.useState(function(){return s(n)}),l=h[0],u=h[1],f=Ta(r),p=Ta(i),m=E.exports.useCallback(function(v){var y=s(v.target.value);u(y),d(y)&&f(o?o(y):y)},[s,o,d,f]),g=E.exports.useCallback(function(v){d(v.target.value)||u(s(n)),p(v)},[n,s,d,p]);return E.exports.useEffect(function(){u(s(n))},[n,s]),_("input",{...Ho({},c,{value:a?a(l):l,spellCheck:"false",onChange:m,onBlur:g})})},O2=function(t){return"#"+t},QL=function(t){var e=t.prefixed,n=t.alpha,r=yu(t,["prefixed","alpha"]),i=E.exports.useCallback(function(d){return d.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),s=E.exports.useCallback(function(d){return function(a,o){var c=qL.exec(a),h=c?c[1].length:0;return h===3||h===6||!!o&&h===4||!!o&&h===8}(d,n)},[n]);return he.createElement(ZL,Ho({},r,{escape:i,format:e?O2:void 0,process:O2,validate:s}))};function gg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class JL{getStringForLocale(e,n){let r=this.strings[n];r||(r=e6(n,this.strings,this.defaultLocale),this.strings[n]=r);let i=r[e];if(!i)throw new Error(`Could not find intl message ${e} in ${n} locale`);return i}constructor(e,n="en-US"){this.strings={...e},this.defaultLocale=n}}function e6(t,e,n="en-US"){if(e[t])return e[t];let r=t6(t);if(e[r])return e[r];for(let i in e)if(i.startsWith(r+"-"))return e[i];return e[n]}function t6(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}let mg=new Map,vg=!1;try{vg=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let wu=!1;try{wu=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const P2={degree:{narrow:{default:"\xB0","ja-JP":" \u5EA6","zh-TW":"\u5EA6","sl-SI":" \xB0"}}};class xu{format(e){let n="";if(!vg&&this.options.signDisplay!=null?n=r6(this.numberFormatter,this.options.signDisplay,e):n=this.numberFormatter.format(e),this.options.style==="unit"&&!wu){var r;let{unit:i,unitDisplay:s="short",locale:d}=this.resolvedOptions(),a=(r=P2[i])===null||r===void 0?void 0:r[s];n+=a[d]||a.default}return n}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.format(e)} \u2013 ${this.format(n)}`}formatRangeToParts(e,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(n);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:" \u2013 ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!vg&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!wu&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,n={}){this.numberFormatter=n6(e,n),this.options=n}}function n6(t,e={}){let{numberingSystem:n}=e;if(n&&t.indexOf("-u-nu-")===-1&&(t=`${t}-u-nu-${n}`),e.style==="unit"&&!wu){var r;let{unit:d,unitDisplay:a="short"}=e;if(!d)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=P2[d])===null||r===void 0)&&r[a]))throw new Error(`Unsupported unit ${d} with unitDisplay = ${a}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((d,a)=>d[0]<a[0]?-1:1).join():"");if(mg.has(i))return mg.get(i);let s=new Intl.NumberFormat(t,e);return mg.set(i,s),s}function r6(t,e,n){if(e==="auto")return t.format(n);if(e==="never")return t.format(Math.abs(n));{let r=!1;if(e==="always"?r=n>0||Object.is(n,0):e==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=t.format(-n),s=t.format(n),d=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...d].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(d,"+").replace("!!!",s)}else return t.format(n)}}function i6(t){return t&&t.__esModule?t.default:t}var M2={},A2={};A2={alpha:"\u0623\u0644\u0641\u0627",blue:"\u0623\u0632\u0631\u0642",brightness:"\u0627\u0644\u0633\u0637\u0648\u0639",green:"\u0623\u062E\u0636\u0631",hue:"\u062F\u0631\u062C\u0629 \u0627\u0644\u0644\u0648\u0646",lightness:"\u0627\u0644\u0625\u0636\u0627\u0621\u0629",red:"\u0623\u062D\u0645\u0631",saturation:"\u0627\u0644\u062A\u0634\u0628\u0639"};var D2={};D2={alpha:"\u0410\u043B\u0444\u0430",blue:"\u0421\u0438\u043D\u044C\u043E",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442",green:"\u0417\u0435\u043B\u0435\u043D\u043E",hue:"\u041E\u0442\u0442\u0435\u043D\u044A\u043A",lightness:"\u041B\u0435\u043A\u043E\u0442\u0430",red:"\u0427\u0435\u0440\u0432\u0435\u043D\u043E",saturation:"\u041D\u0430\u0441\u0438\u0442\u0435\u043D\u043E\u0441\u0442"};var R2={};R2={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odst\xEDn",lightness:"Sv\u011Btlost",red:"\u010Cerven\xE1",saturation:"Sytost"};var I2={};I2={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8n",hue:"Tone",lightness:"Lyshed",red:"R\xF8d",saturation:"Farvem\xE6tning"};var L2={};L2={alpha:"Alpha",blue:"Blau",brightness:"Helligkeit",green:"Gr\xFCn",hue:"Farbton",lightness:"Leuchtkraft",red:"Rot",saturation:"S\xE4ttigung"};var F2={};F2={alpha:"\u0386\u03BB\u03C6\u03B1",blue:"\u039C\u03C0\u03BB\u03B5",brightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",green:"\u03A0\u03C1\u03AC\u03C3\u03B9\u03BD\u03BF",hue:"\u03A4\u03CC\u03BD\u03BF\u03C2",lightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",red:"\u039A\u03CC\u03BA\u03BA\u03B9\u03BD\u03BF",saturation:"\u039A\u03BF\u03C1\u03B5\u03C3\u03BC\u03CC\u03C2"};var z2={};z2={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha"};var N2={};N2={alpha:"Alpha",blue:"Azul",brightness:"Brillo",green:"Verde",hue:"Tono",lightness:"Luminosidad",red:"Rojo",saturation:"Saturaci\xF3n"};var j2={};j2={alpha:"Alfa",blue:"Sinine",brightness:"Heledus",green:"Roheline",hue:"V\xE4rv",lightness:"Valgus",red:"Punane",saturation:"K\xFCllastus"};var B2={};B2={alpha:"Alpha",blue:"Sininen",brightness:"Kirkkaus",green:"Vihre\xE4",hue:"S\xE4vy",lightness:"Valom\xE4\xE4r\xE4",red:"Punainen",saturation:"V\xE4rikyll\xE4isyys"};var V2={};V2={alpha:"Alpha",blue:"Bleu",brightness:"Luminosit\xE9",green:"Vert",hue:"Teinte",lightness:"Luminosit\xE9",red:"Rouge",saturation:"Saturation"};var $2={};$2={alpha:"\u05D0\u05DC\u05E4\u05D0",blue:"\u05DB\u05D7\u05D5\u05DC",brightness:"\u05D1\u05D4\u05D9\u05E8\u05D5\u05EA",green:"\u05D9\u05E8\u05D5\u05E7",hue:"\u05D2\u05D5\u05D5\u05DF",lightness:"\u05DB\u05DE\u05D5\u05EA \u05D0\u05D5\u05E8",red:"\u05D0\u05D3\u05D5\u05DD",saturation:"\u05E8\u05D5\u05D5\u05D9\u05D4"};var U2={};U2={alpha:"Alfa",blue:"Plava",brightness:"Svjetlina",green:"Zelena",hue:"Nijansa",lightness:"Osvijetljenost",red:"Crvena",saturation:"Zasi\u0107enost"};var H2={};H2={alpha:"Alfa",blue:"K\xE9k",brightness:"F\xE9nyess\xE9g",green:"Z\xF6ld",hue:"Sz\xEDn\xE1rnyalat",lightness:"Vil\xE1goss\xE1g",red:"Piros",saturation:"Tel\xEDtetts\xE9g"};var W2={};W2={alpha:"Alfa",blue:"Blu",brightness:"Luminosit\xE0",green:"Verde",hue:"Tonalit\xE0",lightness:"Luminosit\xE0",red:"Rosso",saturation:"Saturazione"};var Y2={};Y2={alpha:"\u30A2\u30EB\u30D5\u30A1",blue:"\u9752",brightness:"\u660E\u308B\u3055",green:"\u7DD1",hue:"\u8272\u76F8",lightness:"\u660E\u5EA6",red:"\u8D64",saturation:"\u5F69\u5EA6"};var X2={};X2={alpha:"\uC54C\uD30C",blue:"\uD30C\uB791",brightness:"\uBA85\uB3C4",green:"\uCD08\uB85D",hue:"\uC0C9\uC870",lightness:"\uBC1D\uAE30",red:"\uBE68\uAC15",saturation:"\uCC44\uB3C4"};var G2={};G2={alpha:"Alfa",blue:"M\u0117lyna",brightness:"Ry\u0161kumas",green:"\u017Dalia",hue:"Atspalvis",lightness:"\u0160viesumas",red:"Raudona",saturation:"\u012Esotinimas"};var K2={};K2={alpha:"Alfa",blue:"Zila",brightness:"Spilgtums",green:"Za\u013Ca",hue:"Nokr\u0101sa",lightness:"Gai\u0161ums",red:"Sarkana",saturation:"Pies\u0101tin\u0101jums"};var q2={};q2={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8nn",hue:"Fargetone",lightness:"Lyshet",red:"R\xF8d",saturation:"Metning"};var Z2={};Z2={alpha:"Alfa",blue:"Blauw",brightness:"Helderheid",green:"Groen",hue:"Kleurtoon",lightness:"Lichtsterkte",red:"Rood",saturation:"Verzadiging"};var Q2={};Q2={alpha:"Alfa",blue:"Niebieski",brightness:"Jasno\u015B\u0107",green:"Zielony",hue:"Odcie\u0144",lightness:"Jaskrawo\u015B\u0107",red:"Czerwony",saturation:"Nasycenie"};var J2={};J2={alpha:"Alfa",blue:"Azul",brightness:"Brilho",green:"Verde",hue:"Matiz",lightness:"Luminosidade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var e_={};e_={alpha:"Alfa",blue:"Azul",brightness:"Luminosidade",green:"Verde",hue:"Tonalidade",lightness:"Claridade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var t_={};t_={alpha:"Alfa",blue:"Albastru",brightness:"Luminozitate",green:"Verde",hue:"Nuan\u021B\u0103",lightness:"Luminozitate",red:"Ro\u0219u",saturation:"Satura\u021Bie"};var n_={};n_={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0438\u0439",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",hue:"\u041E\u0442\u0442\u0435\u043D\u043E\u043A",lightness:"\u041E\u0441\u0432\u0435\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C",red:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",saturation:"\u041D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C"};var r_={};r_={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odtie\u0148",lightness:"Svetlos\u0165",red:"\u010Cerven\xE1",saturation:"S\xFDtos\u0165"};var i_={};i_={alpha:"Alfa",blue:"Modra",brightness:"Svetlost",green:"Zelena",hue:"Barva",lightness:"Lahkost",red:"Rde\u010Da",saturation:"Nasi\u010Denost"};var o_={};o_={alpha:"Alfa",blue:"Plava",brightness:"Osvetljenost",green:"Zelena",hue:"Nijansa",lightness:"Osvetljenje",red:"Crvena",saturation:"Zasi\u0107enje"};var s_={};s_={alpha:"Alfa",blue:"Bl\xE5tt",brightness:"Ljusstyrka",green:"Gr\xF6nt",hue:"Nyans",lightness:"Ljushet",red:"R\xF6tt",saturation:"M\xE4ttnad"};var a_={};a_={alpha:"Alfa",blue:"Mavi",brightness:"Parlakl\u0131k",green:"Ye\u015Fil",hue:"Ton",lightness:"Canl\u0131l\u0131k",red:"K\u0131rm\u0131z\u0131",saturation:"Doygunluk"};var l_={};l_={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0456\u0439",brightness:"\u042F\u0441\u043A\u0440\u0430\u0432\u0456\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u0438\u0439",hue:"\u0422\u043E\u043D",lightness:"\u041E\u0441\u0432\u0456\u0442\u043B\u0435\u043D\u0456\u0441\u0442\u044C",red:"\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439",saturation:"\u041D\u0430\u0441\u0438\u0447\u0435\u043D\u0456\u0441\u0442\u044C"};var c_={};c_={alpha:"Alpha",blue:"\u84DD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7EFF\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE\u5EA6",red:"\u7EA2\u8272",saturation:"\u9971\u548C\u5EA6"};var u_={};u_={alpha:"Alpha",blue:"\u85CD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7DA0\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE",red:"\u7D05\u8272",saturation:"\u98FD\u548C\u5EA6"},M2={"ar-AE":A2,"bg-BG":D2,"cs-CZ":R2,"da-DK":I2,"de-DE":L2,"el-GR":F2,"en-US":z2,"es-ES":N2,"et-EE":j2,"fi-FI":B2,"fr-FR":V2,"he-IL":$2,"hr-HR":U2,"hu-HU":H2,"it-IT":W2,"ja-JP":Y2,"ko-KR":X2,"lt-LT":G2,"lv-LV":K2,"nb-NO":q2,"nl-NL":Z2,"pl-PL":Q2,"pt-BR":J2,"pt-PT":e_,"ro-RO":t_,"ru-RU":n_,"sk-SK":r_,"sl-SI":i_,"sr-SP":o_,"sv-SE":s_,"tr-TR":a_,"uk-UA":l_,"zh-CN":c_,"zh-TW":u_};const o6=new JL(i6(M2));function Oa(t){let e=Nr.parse(t)||jr.parse(t)||Br.parse(t);if(e)return e;throw new Error("Invalid color value: "+t)}class yg{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(e){if(e in this)return this[e];throw new Error("Unsupported color channel: "+e)}withChannelValue(e,n){if(e in this){let r=this.clone();return r[e]=n,r}throw new Error("Unsupported color channel: "+e)}getChannelName(e,n){return o6.getStringForLocale(e,n)}getColorSpaceAxes(e){let{xChannel:n,yChannel:r}=e,i=n||this.getColorChannels().find(a=>a!==r),s=r||this.getColorChannels().find(a=>a!==i),d=this.getColorChannels().find(a=>a!==i&&a!==s);return{xChannel:i,yChannel:s,zChannel:d}}}class Nr extends yg{static parse(e){let n=[];if(/^#[\da-f]+$/i.test(e)&&[4,5,7,9].includes(e.length)){const s=(e.length<6?e.replace(/[^#]/gi,"$&$&"):e).slice(1).split("");for(;s.length>0;)n.push(parseInt(s.splice(0,2).join(""),16));n[3]=n[3]!==void 0?n[3]/255:void 0}const r=e.match(/^rgba?\((.*)\)$/);r!=null&&r[1]&&(n=r[1].split(",").map(s=>Number(s.trim())),n=n.map((s,d)=>vi(s,0,d<3?255:1)));var i;return n.length<3?void 0:new Nr(n[0],n[1],n[2],(i=n[3])!==null&&i!==void 0?i:1)}toString(e){switch(e){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+e)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),s=Math.max(e,n,r),d=s-i,a=s===0?0:d/s;let o=0;if(d!==0){switch(s){case e:o=(n-r)/d+(n<r?6:0);break;case n:o=(r-e)/d+2;break;case r:o=(e-n)/d+4;break}o/=6}return new jr(Ze(o*360,2),Ze(a*100,2),Ze(s*100,2),this.alpha)}toHSL(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),s=Math.max(e,n,r),d=(s+i)/2,a=s-i;let o,c;if(a===0)o=c=0;else{switch(c=a/(d<.5?s+i:2-s-i),s){case e:o=(n-r)/a+(n<r?6:0);break;case n:o=(r-e)/a+2;break;case r:o=(e-n)/a+4;break}o/=6}return new Br(Ze(o*360,2),Ze(c*100,2),Ze(d*100,2),this.alpha)}clone(){return new Nr(this.red,this.green,this.blue,this.alpha)}getChannelRange(e){switch(e){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r,i=this.getChannelValue(e);switch(e){case"red":case"green":case"blue":r={style:"decimal"};break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+e)}return new xu(n,r).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return Nr.colorChannels}constructor(e,n,r,i){super(),this.red=e,this.green=n,this.blue=r,this.alpha=i}}gg(Nr,"colorChannels",["red","green","blue"]);const s6=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class jr extends yg{static parse(e){let n;if(n=e.match(s6)){var r;const[i,s,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(o=>Number(o.trim().replace("%","")));return new jr(f_(i,360),vi(s,0,100),vi(d,0,100),vi(a!=null?a:1,0,1))}}toString(e){switch(e){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+e)}}toHSL(){let e=this.saturation/100,n=this.brightness/100,r=n*(1-e/2);return e=r===0||r===1?0:(n-r)/Math.min(r,1-r),new Br(Ze(this.hue,2),Ze(e*100,2),Ze(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.brightness/100,i=(s,d=(s+e/60)%6)=>r-n*r*Math.max(Math.min(d,4-d,1),0);return new Nr(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new jr(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r,i=this.getChannelValue(e);switch(e){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"brightness":r={style:"percent"},i/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+e)}return new xu(n,r).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return jr.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.brightness=r,this.alpha=i}}gg(jr,"colorChannels",["hue","saturation","brightness"]);const a6=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function f_(t,e){return(t%e+e)%e}class Br extends yg{static parse(e){let n;if(n=e.match(a6)){var r;const[i,s,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(o=>Number(o.trim().replace("%","")));return new Br(f_(i,360),vi(s,0,100),vi(d,0,100),vi(a!=null?a:1,0,1))}}toString(e){switch(e){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+e)}}toHSB(){let e=this.saturation/100,n=this.lightness/100,r=n+e*Math.min(n,1-n);return e=r===0?0:2*(1-n/r),new jr(Ze(this.hue,2),Ze(e*100,2),Ze(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.lightness/100,i=n*Math.min(r,1-r),s=(d,a=(d+e/30)%12)=>r-i*Math.max(Math.min(a-3,9-a,1),-1);return new Nr(Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255),this.alpha)}clone(){return new Br(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r,i=this.getChannelValue(e);switch(e){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"lightness":r={style:"percent"},i/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+e)}return new xu(n,r).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return Br.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.lightness=r,this.alpha=i}}gg(Br,"colorChannels",["hue","saturation","lightness"]),Oa("#ffffff"),Oa("hsl(0, 100%, 50%)");const l6=Oa("#000000"),c6=Oa("#FFFFFF");l6.toHexInt(),c6.toHexInt();function u6({onChange:t,value:e,colors:n}){const r=n.map(i=>{const s=e===i;return _(Gn,{onClick:()=>{t==null||t(i)},className:fe("relative block flex-shrink-0 w-26 h-26 border rounded",s&&"shadow-md"),style:{backgroundColor:i},children:s&&_("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return _("div",{className:"flex flex-wrap gap-6",children:r})}function _i(t={}){const{size:e="md",startAppend:n,endAppend:r,className:i,labelPosition:s,labelDisplay:d="block",inputClassName:a,inputWrapperClassName:o,unstyled:c,invalid:h,disabled:l,background:u="bg-transparent",flexibleHeight:f,inputShadow:p="shadow-sm",descriptionPosition:m="bottom"}={...t};if(c)return{label:"",input:a||"",wrapper:i||"",inputWrapper:o||"",adornment:"",append:{size:"",radius:""},size:{font:"",height:""},description:"",error:""};const g=p6({size:t.size,flexibleHeight:f}),v=n||r,y=h?"focus:ring-danger/focus focus:border-danger/60":"focus:ring-primary/focus focus:border-primary/60",b=d6(t);return{label:fe(d,"first-letter:capitalize text-left whitespace-nowrap",l&&"text-disabled",g.font,s==="side"?"mr-16":"mb-4"),input:fe("block text-left relative w-full appearance-none transition-shadow text",u,b.input,f6(t),!l&&`focus:ring ${y} focus:outline-none ${p}`,l&&"text-disabled cursor-not-allowed",a,g.font,g.height,h6(t)),adornment:g6(e),append:{size:jp(e),radius:b.append},wrapper:fe(i,g.font,{"flex items-center":s==="side"}),inputWrapper:fe("isolate relative",o,v&&"flex items-stretch"),size:g,description:`text-muted ${m==="bottom"?"pt-10":"pb-10"} text-xs`,error:"text-danger pt-10 text-xs"}}function f6({startAppend:t,endAppend:e,inputBorder:n,invalid:r}){if(n)return n;const i=t||e,s=r?"border-danger":"border-divider";return i?t?`${s} border-y border-r`:`${s} border-y border-l`:`${s} border`}function h6({startAdornment:t,endAdornment:e,inputRadius:n}){return n==="rounded-full"?fe(t?"pl-54":"pl-28",e?"pr-54":"pr-28"):fe(t?"pl-46":"pl-12",e?"pr-46":"pr-12")}function d6(t){const{startAppend:e,endAppend:n,inputRadius:r}=t,i=e||n;return r==="rounded-full"?{input:fe(!i&&"rounded-full",e&&"rounded-r-full rounded-l-none",n&&"rounded-l-full rounded-r-none"),append:e?"rounded-l-full":"rounded-r-full"}:{input:fe(!i&&"rounded",e&&"rounded-r rounded-l-none",n&&"rounded-l rounded-r-none"),append:e?"rounded-l":"rounded-r"}}function p6({size:t,flexibleHeight:e}){switch(t){case"2xs":return{font:"text-xs",height:e?"min-h-24":"h-24"};case"xs":return{font:"text-xs",height:e?"min-h-30":"h-30"};case"sm":return{font:"text-sm",height:e?"min-h-36":"h-36"};case"lg":return{font:"text-md md:text-lg",height:e?"min-h-50":"h-50"};case"xl":return{font:"text-xl",height:e?"min-h-60":"h-60"};default:return{font:"text-sm",height:e?"min-h-42":"h-42"}}}function g6(t){switch(t){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-sm";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return""}}const m6=[{color:"rgb(255, 255, 255)",name:se("White")},{color:"rgb(239,245,245)",name:se("Solitude")},{color:"rgb(245,213,174)",name:se("Wheat")},{color:"rgb(253,227,167)",name:se("Cape Honey")},{color:"rgb(242,222,186)",name:se("Milk punch")},{color:"rgb(97,118,75)",name:se("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:se("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:se("Cosmic Latte")},{color:"rgb(233,119,119)",name:se("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:se("Sundown")},{color:"rgb(30,139,195)",name:se("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:se("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:se("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:se("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:se("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:se("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:se("Comet"),foreground:"rgb(255, 255, 255)"}].map(({color:t})=>t).slice(0,14);function v6({defaultValue:t,onChange:e,colorPresets:n,showInput:r}){const[i,s]=E.exports.useState(t),d=n||m6,a=_i({size:"sm"});return oe("div",{children:[_(KL,{className:"!w-auto",color:i,onChange:o=>{e==null||e(o),s(o)}}),oe("div",{className:"py-20 px-12",children:[d&&_(u6,{colors:d,onChange:o=>{if(o){const c=Oa(o).toString("hex");e==null||e(c),s(c)}},value:i}),r&&_("div",{className:"pt-20",children:_(QL,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:a.input,color:i,onChange:o=>{e==null||e(o),s(o)}})})]})]})}const _u=he.createContext(null);function h_(){return E.exports.useContext(_u)}function Si(){const{lines:t,localeCode:e}=lu();return{trans:E.exports.useCallback(r=>y6({...r,lines:t,localeCode:e}),[t,e])}}const y6=pa(t=>{let{lines:e,message:n,values:r,localeCode:i}=t;return n=(e==null?void 0:e[n])||n,r&&(n=Hx(i,t),Object.entries(r).forEach(([s,d])=>{n=n.replace(`:${s}`,`${d}`)})),n},{equals:tg,callTimeout:0});function b6({onDismiss:t}){const{trans:e}=Si(),n=()=>{t&&t()};return _("button",{className:"sr-only","aria-label":e(se("Dismiss")),tabIndex:-1,onClick:n})}function Su(t){const{type:e="modal",dialogProps:n,...r}=E.exports.useContext(_u),{children:i,className:s,size:d="md",background:a,radius:o="rounded",maxWidth:c="max-w-dialog",...h}=t;let l=null;(e==="popover"||e==="tray")&&(l=_(b6,{onDismiss:r.close}));const u=d==="fullscreenTakeover"||e==="tray",f=fe("mx-auto pointer-events-auto outline-none flex flex-col overflow-hidden",a||"bg-paper",e!=="tray"&&w6(d),e==="tray"&&"rounded-t",d!=="fullscreenTakeover"&&"shadow-2xl border max-h-dialog",!u&&`${o} ${c}`,s);return oe("div",{...Xn({role:"dialog",tabIndex:-1},n,h),style:{...t.style,"--be-dialog-padding":"24px"},"aria-modal":!0,className:f,children:[E.exports.Children.toArray(i).map(p=>{var m;return E.exports.isValidElement(p)?E.exports.cloneElement(p,{size:(m=p.props.size)!=null?m:d}):p}),l]})}function w6(t){switch(t){case"2xs":return"w-256";case"xs":return"w-320";case"sm":return"w-384";case"md":return"w-440";case"lg":return"w-620";case"xl":return"w-780";case"2xl":return"w-850";case"fullscreen":return"w-1280";case"fullscreenTakeover":return"w-full h-full";default:return t}}const bg=ye(_("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined"),x6=E.exports.forwardRef(({children:t,autoFocus:e=!1,restoreFocus:n=!0,isDismissable:r=!0,isOpen:i=!1,onClose:s},d)=>{const a=Kp(),o=yi(d);return oe("div",{className:"isolate z-modal fixed inset-0",style:a,children:[_(eg,{onClick:()=>{r&&s()}},"modal-underlay"),_(yt.div,{ref:o,className:"absolute inset-0 w-full h-full z-20 flex items-center justify-center pointer-events-none",role:"presentation",initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1},children:_(ou,{restoreFocus:n,autoFocus:e,contain:!0,children:t})})]})});function _6({x:t,y:e},n){return{getBoundingClientRect(){return{x:t,y:e,width:0,height:0,top:e,right:t,bottom:e,left:t}},contextElement:n}}function Cu(t){let{children:e,type:n,disableInitialTransition:r,onClose:i,isDismissable:s=!0,moveFocusToDialog:d=!0,returnFocusToTrigger:a=!0,triggerOnHover:o=!1,currentValue:c,triggerOnContextMenu:h=!1}=t;const l=E.exports.useRef(null),u=h&&!t.triggerRef?l:t.triggerRef,f=E.exports.useRef(c),[p,m]=mi(t.isOpen,t.defaultIsOpen,t.onOpenChange),{dialogTrigger:g,dialog:v}=S6(e);cu()&&n==="popover"&&(n="modal");const b=E.exports.useRef(null),{x:w,y:x,reference:S,floating:C,strategy:k,refs:I}=Xp({...t,disablePositioning:n==="modal"}),F=n==="popover"?{position:k,top:x!=null?x:"",left:w!=null?w:""}:{},j=E.exports.useId(),q=`${j}-label`,te=`${j}-description`,G=`${j}-form`,Y=E.exports.useCallback(A=>{i==null||i(A!=null?A:f.current),m(!1)},[i,m]),ie=E.exports.useCallback(()=>{m(!0),f.current=c},[c,m]);Ar(()=>{(u==null?void 0:u.current)&&I.reference.current!==u.current&&S(u.current)},[S,u==null?void 0:u.current,I]);const ce=E.exports.useMemo(()=>({"aria-labelledby":q,"aria-describedby":te}),[q,te]);let H;n==="modal"?H=x6:n==="tray"?H=$x:H=au;const T=E.exports.useMemo(()=>({dialogProps:ce,type:n,labelId:q,descriptionId:te,isDismissable:s,close:Y,formId:G}),[Y,te,ce,G,q,n,s]);o=o&&n==="popover";const P={onPointerEnter:zt(A=>{ie()}),onPointerLeave:zt(A=>{b.current=setTimeout(()=>{Y()},150)})},D={onPointerEnter:zt(A=>{b.current&&clearTimeout(b.current)}),onPointerLeave:zt(A=>{Y()})},R={onContextMenu:zt(A=>{A.preventDefault(),l.current=_6({x:A.clientX,y:A.clientY},A.currentTarget),ie()})},$={onClick:zt(A=>{A.stopPropagation(),p?Y():ie()})};return oe(E.exports.Fragment,{children:[g&&E.exports.cloneElement(g,Xn({...!u&&!h?{ref:S}:{},...h?{}:$,...o?P:{},...h?R:{}},{...g.props})),nn&&Zi.exports.createPortal(_(Yn,{initial:!r,children:p&&_(_u.Provider,{value:T,children:_(H,{...o?D:{},ref:C,triggerRef:I.reference,style:F,restoreFocus:a,autoFocus:d,isOpen:p,onClose:Y,isDismissable:s,isContextMenu:h,children:v})})}),nn)]})}function S6(t){const e=he.Children.toArray(t);return e&&e.length===2?{dialogTrigger:e[0],dialog:e[1]}:{dialog:e[0]}}function Ci(t){const{label:e,className:n,value:r,onChange:i,size:s,width:d="w-max"}=t,a=ue(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.colorPresets)==null?void 0:g.items})||[],o=_i({size:s}),[c,h]=E.exports.useState(r),[l,u]=E.exports.useState(!1),f=p=>{h(p),i==null||i(p)};return oe("div",{className:fe(n,d),children:[e&&_("span",{className:o.label,children:e}),oe(Cu,{type:"popover",isOpen:l,onOpenChange:u,children:[oe(Gn,{className:fe(o.input,"inline-flex items-center"),"aria-label":t["aria-label"],children:[_("span",{className:"block flex-shrink-0 mr-5 border rounded h-2/4 aspect-square",style:{backgroundColor:c}}),_(C6,{isActive:l,className:o.adornment})]}),_(Su,{size:"auto",children:_(v6,{onChange:f,defaultValue:c,colorPresets:a})})]})]})}function C6({isActive:t,className:e}){return _(bg,{size:"sm",className:`transition-transform ml-auto flex-shrink-0 ${t?"rotate-180":"rotate-0"} ${e}`})}function T6(t){const{size:e="md",inline:n,label:r,showValueLabel:i=!!r,className:s,width:d="w-full",slider:a,children:o,trackColor:c="primary",fillColor:h="primary"}=t,{domProps:l,trackRef:u,getThumbPercent:f,getThumbValueLabel:p,labelId:m,groupId:g,thumbIds:v,isDisabled:y,numberFormatter:b,minValue:w,maxValue:x,step:S,values:C,getValueLabel:k}=a;let I="",F=Math.max([...b.format(w)].length,[...b.format(x)].length,[...b.format(S)].length);k?I=k(C[0]):C.length===1?I=p(0):C.length===2&&(I=`${p(0)} \u2013 ${p(1)}`,F=3+2*Math.max(F,[...b.format(w)].length,[...b.format(x)].length));const j=_i({size:e,disabled:y,labelDisplay:"flex"}),q=fe("touch-none",s,d,{"flex items-center":n});return oe("div",{className:q,role:"group",id:g,children:[(r||i)&&oe("div",{className:fe(j.label,"select-none"),children:[r&&_("label",{onClick:()=>{var te;(te=document.getElementById(v[0]))==null||te.focus()},id:m,htmlFor:g,children:r}),i&&_("output",{htmlFor:v[0],className:"ml-auto text-right","aria-live":"off",style:F?{width:`${F}ch`,minWidth:`${F}ch`}:void 0,children:I})]}),oe("div",{ref:u,className:"h-30 relative",...l,role:"presentation",children:[_("div",{className:`absolute inset-0 m-auto h-4 rounded ${k6(c,y)}`}),_("div",{className:`absolute inset-0 my-auto h-4 rounded ${E6(h,y)}`,style:{width:`${f(0)*100}%`}}),o]})]})}function k6(t,e){switch(e&&(t="disabled"),t){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return t}}function E6(t,e){switch(e&&(t="disabled"),t){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return t}}function d_(t={}){const{localeCode:e}=lu();return E.exports.useMemo(()=>new xu(e,t),[e,t])}function p_({minValue:t=0,maxValue:e=100,isDisabled:n=!1,step:r=1,formatOptions:i,onChangeEnd:s,onPointerDown:d,label:a,getValueLabel:o,showThumbOnHoverOnly:c,thumbSize:h,...l}){var ee;const[u,f]=E.exports.useState(!1),p=d_(i),{addGlobalListener:m,removeGlobalListener:g}=Op(),v=E.exports.useRef(null),[y,b]=mi(l.value?l.value:void 0,(ee=l.defaultValue)!=null?ee:[t],l.onChange),w=E.exports.useRef(null);w.current=y;const[x,S]=E.exports.useState(new Array(y.length).fill(!1)),C=E.exports.useRef(null);C.current=x;function k(N){return p.format(N)}const I=N=>{var X;return((X=C.current)==null?void 0:X[N])||!1},F=N=>k(y[N]),j=N=>N===0?t:y[N-1],q=N=>N===y.length-1?e:y[N+1],te=(N,X)=>{if(n||!$(N)||!w.current)return;const le=j(N),we=q(N);X=GM(X,le,we,r),w.current=g_(w.current,N,X),b(w.current)},G=(N,X)=>{var we;if(n||!$(N))return;const le=(we=C.current)==null?void 0:we[N];C.current=g_(C.current||[],N,X),S(C.current),s&&le&&!C.current.some(Boolean)&&s(w.current||[])},[Y,ie]=E.exports.useState(void 0),ce=N=>{const X=Math.min(1,(N-t)/(e-t));return isNaN(X)?0:X},H=N=>ce(w.current[N]),T=(N,X)=>{te(N,D(X))},P=N=>Math.round((N-t)/r)*r+t,D=N=>{const X=N*(e-t)+t;return Ca(P(X),t,e)},R=E.exports.useRef(new Array(y.length).fill(!0)),$=N=>R.current[N],A=(N,X)=>{R.current[N]=X},O=E.exports.useRef(null),z=E.exports.useRef(void 0),B=N=>{if(!(N.pointerType==="mouse"&&(N.button!==0||N.altKey||N.ctrlKey||N.metaKey))&&(d==null||d(),v.current&&!n&&y.every((X,le)=>!x[le]))){const X=v.current.offsetWidth,le=v.current.getBoundingClientRect().left,ve=(N.clientX-le)/X,Z=D(ve);let ge;const _e=y.findIndex(ke=>Z-ke<0);if(_e===0)ge=_e;else if(_e===-1)ge=y.length-1;else{const ke=y[_e-1],Fe=y[_e];Math.abs(ke-Z)<Math.abs(Fe-Z)?ge=_e-1:ge=_e}ge>=0&&$(ge)?(N.preventDefault(),O.current=ge,ie(ge),z.current=N.pointerId,G(O.current,!0),te(ge,Z),m(window,"pointerup",ne,!1)):O.current=null}},K=E.exports.useRef(null),{domProps:W}=gu({onPointerDown:B,onMoveStart(){K.current=null},onMove(N,X){var we;const le=((we=v.current)==null?void 0:we.offsetWidth)||0;if(K.current==null&&(K.current=H(O.current||0)*le),K.current+=X,O.current!=null&&v.current){const ve=Ca(K.current/le,0,1);T(O.current,ve)}},onMoveEnd(){O.current!=null&&(G(O.current,!1),O.current=null)}}),J=Xn(W,{onPointerEnter:()=>{f(!0)},onPointerLeave:()=>{f(!1)}}),ne=N=>{N.pointerId===z.current&&(O.current!=null&&(G(O.current,!1),O.current=null),g(window,"pointerup",ne,!1))},re=E.exports.useId(),U=a?`${re}-label`:void 0,V=`${re}-group`,Q=[...Array(y.length)].map((N,X)=>`${re}-thumb-${X}`);return{domProps:J,trackRef:v,isDisabled:n,step:r,values:y,minValue:t,maxValue:e,focusedThumb:Y,labelId:U,groupId:V,thumbIds:Q,numberFormatter:p,getThumbPercent:H,getThumbMinValue:j,getThumbMaxValue:q,getThumbValueLabel:F,isThumbDragging:I,setThumbValue:te,updateDraggedThumbs:G,setThumbEditable:A,setFocusedThumb:ie,getValueLabel:o,isPointerOver:u,showThumbOnHoverOnly:c,thumbSize:h}}function g_(t,e,n){return t[e]===n?t:[...t.slice(0,e),n,...t.slice(e+1)]}function O6({index:t,slider:e,isDisabled:n,ariaLabel:r,inputRef:i,onBlur:s,fillColor:d="primary"}){const a=yi(i),{addGlobalListener:o,removeGlobalListener:c}=Op(),{step:h,values:l,focusedThumb:u,labelId:f,thumbIds:p,isDisabled:m,getThumbPercent:g,getThumbMinValue:v,getThumbMaxValue:y,getThumbValueLabel:b,setThumbValue:w,updateDraggedThumbs:x,isThumbDragging:S,setThumbEditable:C,setFocusedThumb:k,isPointerOver:I,showThumbOnHoverOnly:F,thumbSize:j="w-18 h-18"}=e,q=S(t),te=l[t];C(t,!n);const G=n||m,Y=E.exports.useCallback(()=>{a.current&&a.current.focus({preventScroll:!0})},[a]),ie=u===t;E.exports.useEffect(()=>{ie&&Y()},[ie,Y]);const ce=E.exports.useRef(void 0),H=P=>{P.pointerId===ce.current&&(Y(),x(t,!1),c(window,"pointerup",H,!1))},T=fe("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",j,!G&&"shadow-md",P6({fillColor:d,isDisabled:G,isDragging:q}),F&&q||I?"visible":"invisible");return _("div",{role:"presentation",className:T,style:{left:`${Math.max(g(t)*100,0)}%`},onPointerDown:P=>{P.button!==0||P.altKey||P.ctrlKey||P.metaKey||(Y(),ce.current=P.pointerId,x(t,!0),o(window,"pointerup",H,!1))},children:_("input",{id:p[t],onKeyDown:zt(()=>{x(t,!0)}),onKeyUp:zt(()=>{x(t,!1)}),ref:a,tabIndex:G?void 0:0,min:v(t),max:y(t),step:h,value:te,disabled:G,"aria-label":r,"aria-labelledby":f,"aria-orientation":"horizontal","aria-valuetext":b(t),onFocus:()=>{k(t)},onBlur:P=>{k(void 0),x(t,!1),s==null||s(P)},onChange:P=>{w(t,parseFloat(P.target.value))},type:"range",className:"sr-only"})})}function P6({isDisabled:t,isDragging:e,fillColor:n}){return t?"bg-slider-disabled cursor-default":n&&n!=="primary"?n:fe("hover:bg-primary-dark",e?"bg-primary-dark":"bg-primary")}var M6=t=>t.type==="checkbox",A6=t=>t instanceof Date,m_=t=>t==null;const D6=t=>typeof t=="object";var Wo=t=>!m_(t)&&!Array.isArray(t)&&D6(t)&&!A6(t),R6=t=>Wo(t)&&t.target?M6(t.target)?t.target.checked:t.target.value:t,I6=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,L6=(t,e)=>t.has(I6(e)),F6=t=>{const e=t.constructor&&t.constructor.prototype;return Wo(e)&&e.hasOwnProperty("isPrototypeOf")},z6=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wg(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(z6&&(t instanceof Blob||t instanceof FileList))&&(n||Wo(t)))if(e=n?[]:{},!Array.isArray(t)&&!F6(t))e=t;else for(const r in t)e[r]=wg(t[r]);else return t;return e}var v_=t=>Array.isArray(t)?t.filter(Boolean):[],xg=t=>t===void 0,Jt=(t,e,n)=>{if(!e||!Wo(t))return n;const r=v_(e.split(/[,[\].]+?/)).reduce((i,s)=>m_(i)?i:i[s],t);return xg(r)||r===t?xg(t[e])?n:t[e]:r};const y_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_g={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},N6=he.createContext(null),Sg=()=>he.useContext(N6);var j6=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const d=s;return e._proxyFormState[d]!==_g.all&&(e._proxyFormState[d]=!r||_g.all),n&&(n[d]=!0),t[d]}});return i},B6=t=>Wo(t)&&!Object.keys(t).length,V6=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return B6(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(d=>e[d]===(!r||_g.all))},$6=t=>Array.isArray(t)?t:[t],b_=(t,e,n)=>n&&e?t===e:!t||!e||t===e||$6(t).some(r=>r&&(r.startsWith(e)||e.startsWith(r)));function w_(t){const e=he.useRef(t);e.current=t,he.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function U6(t){const e=Sg(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[d,a]=he.useState(n._formState),o=he.useRef(!0),c=he.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=he.useRef(i);return h.current=i,w_({disabled:r,next:l=>o.current&&b_(h.current,l.name,s)&&V6(l,c.current,n._updateFormState)&&a({...n._formState,...l}),subject:n._subjects.state}),he.useEffect(()=>(o.current=!0,c.current.isValid&&n._updateValid(!0),()=>{o.current=!1}),[n]),j6(d,n,c.current,!1)}var H6=t=>typeof t=="string",W6=(t,e,n,r,i)=>H6(t)?(r&&e.watch.add(t),Jt(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Jt(n,s))):(r&&(e.watchAll=!0),n);function Y6(t){const e=Sg(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:d}=t||{},a=he.useRef(r);a.current=r,w_({disabled:s,subject:n._subjects.values,next:h=>{b_(a.current,h.name,d)&&c(wg(W6(a.current,n._names,h.values||n._formValues,!1,i)))}});const[o,c]=he.useState(n._getWatch(r,i));return he.useEffect(()=>n._removeUnmounted()),o}var X6=t=>/^\w*$/.test(t),G6=t=>v_(t.replace(/["|']|\]/g,"").split(/\.|\[/));function x_(t,e,n){let r=-1;const i=X6(e)?[e]:G6(e),s=i.length,d=s-1;for(;++r<s;){const a=i[r];let o=n;if(r!==d){const c=t[a];o=Wo(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}t[a]=o,t=t[a]}return t}function K6(t){const e=Sg(),{name:n,control:r=e.control,shouldUnregister:i}=t,s=L6(r._names.array,n),d=Y6({control:r,name:n,defaultValue:Jt(r._formValues,n,Jt(r._defaultValues,n,t.defaultValue)),exact:!0}),a=U6({control:r,name:n}),o=he.useRef(r.register(n,{...t.rules,value:d}));return he.useEffect(()=>{const c=r._options.shouldUnregister||i,h=(l,u)=>{const f=Jt(r._fields,l);f&&(f._f.mount=u)};if(h(n,!0),c){const l=wg(Jt(r._options.defaultValues,n));x_(r._defaultValues,n,l),xg(Jt(r._formValues,n))&&x_(r._formValues,n,l)}return()=>{(s?c&&!r._state.action:c)?r.unregister(n):h(n,!1)}},[n,r,s,i]),{field:{name:n,value:d,onChange:he.useCallback(c=>o.current.onChange({target:{value:R6(c),name:n},type:y_.CHANGE}),[n]),onBlur:he.useCallback(()=>o.current.onBlur({target:{value:Jt(r._formValues,n),name:n},type:y_.BLUR}),[n,r]),ref:c=>{const h=Jt(r._fields,n);h&&c&&(h._f.ref={focus:()=>c.focus(),select:()=>c.select(),setCustomValidity:l=>c.setCustomValidity(l),reportValidity:()=>c.reportValidity()})}},formState:a,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Jt(a.errors,n)},isDirty:{enumerable:!0,get:()=>!!Jt(a.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Jt(a.touchedFields,n)},error:{enumerable:!0,get:()=>Jt(a.errors,n)}})}}function Ti({inputRef:t,onBlur:e,...n}){const{onChange:r,onChangeEnd:i,value:s,defaultValue:d,...a}=n,o={...a,value:s!=null?[s]:void 0,defaultValue:d!=null?[d]:void 0,onChange:h=>{r==null||r(h[0])},onChangeEnd:h=>{i==null||i(h[0])}},c=p_(o);return _(T6,{...o,slider:c,children:_(O6,{fillColor:n.fillColor,index:0,slider:c,inputRef:t,onBlur:e})})}function Cg({children:t,direction:e,className:n,position:r=e==="start"?"left-0":"right-0"}){return t?_("div",{className:fe("absolute h-full min-w-42 flex items-center justify-center top-0 text-muted z-10",r,n),children:t}):null}function q6(t){const e={...t};return Object.keys(e).forEach(n=>{(e[n]==null||e[n]==="")&&delete e[n]}),e}const __=he.forwardRef((t,e)=>{const{children:n,description:r,errorMessage:i,descriptionProps:s={},errorMessageProps:d={},startAdornment:a,endAdornment:o,adornmentPosition:c,startAppend:h,endAppend:l,fieldClassNames:u,disabled:f,wrapperProps:p}=t;return oe("div",{className:u.wrapper,ref:e,...p,children:[_(Z6,{...t}),oe("div",{className:u.inputWrapper,children:[_(Cg,{direction:"start",className:u.adornment,position:c,children:a}),h&&_(S_,{style:u.append,disabled:f,children:h}),n,l&&_(S_,{style:u.append,disabled:f,children:l}),_(Cg,{direction:"end",className:u.adornment,position:c,children:o})]}),r&&!i&&_("div",{className:u.description,...s,children:r}),i&&_("div",{className:u.error,...d,children:i})]})});function Z6({labelElementType:t,fieldClassNames:e,labelProps:n,label:r,labelSuffix:i,required:s}){if(!r)return null;const a=oe(t||"label",{className:e.label,...n,children:[r,s&&_("span",{className:"text-danger",children:" *"})]});return i?oe("div",{className:"flex items-center gap-14 w-full",children:[a,_("div",{className:"ml-auto mb-4 text-muted text-xs",children:i})]}):a}function S_({children:t,style:e,disabled:n}){return he.cloneElement(t,{...t.props,disabled:t.props.disabled||n,...q6(e)})}function Tg({autoFocus:t,autoSelectText:e},n){const r=E.exports.useRef(t);E.exports.useEffect(()=>{var i;r.current&&n.current&&((i=n.current)==null||i.focus(),e&&n.current.nodeName.toLowerCase()==="input"&&requestAnimationFrame(()=>{n.current.select()})),r.current=!1},[n,e])}function C_(t){const{focusRef:e,labelElementType:n="label",label:r,labelSuffix:i,autoFocus:s,autoSelectText:d,labelPosition:a,descriptionPosition:o,size:c,errorMessage:h,description:l,flexibleHeight:u,startAdornment:f,endAdornment:p,startAppend:m,adornmentPosition:g,endAppend:v,className:y,inputClassName:b,inputWrapperClassName:w,unstyled:x,background:S,invalid:C,disabled:k,id:I,inputRadius:F,inputBorder:j,inputShadow:q,...te}=t;Tg(t,e);const G=E.exports.useId(),Y=I||G,ie=`${Y}-label`,ce=`${Y}-description`,H=`${Y}-error`,T={id:ie,htmlFor:n==="label"?Y:void 0},P={id:ce},D={id:H},$={"aria-label":!t.label&&!t["aria-label"]&&t.placeholder?t.placeholder:t["aria-label"],"aria-invalid":C||void 0,id:Y,disabled:k,...te},A=[];r&&A.push(T.id),$["aria-labelledby"]&&A.push($["aria-labelledby"]),$["aria-labelledby"]=A.length?A.join(" "):void 0;const O=[];return l&&O.push(P.id),h&&O.push(D.id),$["aria-describedby"]&&O.push($["aria-describedby"]),$["aria-describedby"]=O.length?O.join(" "):void 0,{fieldProps:{errorMessageProps:D,descriptionProps:P,labelProps:T,disabled:k,label:r,labelSuffix:i,autoFocus:s,autoSelectText:d,labelPosition:a,descriptionPosition:o,size:c,errorMessage:h,description:l,flexibleHeight:u,startAdornment:f,endAdornment:p,startAppend:m,adornmentPosition:g,endAppend:v,className:y,inputClassName:b,inputWrapperClassName:w,unstyled:x,background:S,invalid:C},inputProps:$}}const kg=he.forwardRef((t,e)=>{const{hideCaret:n,placeholder:r=_(be,{message:"Select an option..."}),selectedValue:i,onItemSelected:s,onOpenChange:d,onInputValueChange:a,onSelectionChange:o,selectionMode:c,minWidth:h="min-w-128",children:l,...u}=t,f=cu(),p=Rx({...t,floatingWidth:f?"auto":"matchTrigger",selectionMode:"single",role:"listbox"},e),{state:{selectedValues:m,isOpen:g,setIsOpen:v,activeIndex:y,setSelectedIndex:b},focusItem:w,listboxId:x,reference:S,refs:C,listContent:k}=p,{fieldProps:I,inputProps:F}=C_({...u,focusRef:C.reference}),j=p.collection.get(m[0]),q=j?oe("span",{className:"flex items-center gap-10",children:[j.element.props.startIcon,_("span",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:j.element.props.children})]}):_("span",{className:"italic",children:r}),te=_i({...t,endAdornment:!0}),{handleTriggerKeyDown:G,handleListboxKeyboardNavigation:Y}=Yx(p),{findMatchingItem:ie}=Xx(),ce=T=>{if(!g)return;const P=ie(T,k,y);P!=null&&w("increment",P)},H=T=>{if(g)return;const P=ie(T,k,y);P!=null&&b(P)};return _(Wx,{listbox:p,onKeyDownCapture:ce,onKeyDown:Y,children:_(__,{fieldClassNames:te,...I,children:oe("button",{...F,type:"button","data-selected-value":j==null?void 0:j.value,"aria-expanded":g?"true":"false","aria-haspopup":"listbox","aria-controls":g?x:void 0,ref:S,onKeyDown:G,onKeyDownCapture:H,disabled:u.disabled,onClick:()=>{v(!g)},className:fe(te.input,!I.unstyled&&h),children:[q,!n&&_(Cg,{direction:"end",children:_(bg,{className:te.adornment})})]})})})});function Q6(){const t=ue(d=>d.filter.selected);if(!t)return null;const e=L().filter.getByName(t).options,n=(d,a)=>{var o;(o=L().filter)==null||o.applyValue(t,d,a),M().setDirty(!0)},r=L().canvas.getMainImage().filters,i=L().filter.findFilterIndex(t,r),s=r==null?void 0:r[i];if(e){const d=Object.entries(e).map(([a,o])=>{let c;const h=s?s[a]:o.current;return o.type==="slider"?c=_(Ti,{label:_("span",{className:"capitalize",children:_(be,{...Rp[a]})}),minValue:o.min,maxValue:o.max,step:o.step,defaultValue:h,formatOptions:{style:"percent"},size:"sm",onChange:l=>{n(a,l)}}):o.type==="colorPicker"?c=_(Ci,{label:_(be,{...Rp[a]}),size:"sm",width:"w-full",value:h,onChange:l=>{n(a,l)}}):o.type==="select"&&(c=_(kg,{selectionMode:"single",size:"sm",label:_(be,{...Rp[a]}),defaultValue:h,onSelectionChange:l=>{n(a,l)},children:o.available.map(l=>_(ru,{value:l.key,children:_("span",{className:"capitalize",children:_(be,{message:l.key})})},l.key))})),_("div",{className:"pb-10",children:c},a)});return _(ug,{children:_("div",{className:"max-w-240 pt-10 mx-auto",children:d})})}return null}function J6(){const t=ue(r=>r.frame.active),e=(t==null?void 0:t.mode)==="basic",n=E.exports.useCallback(r=>`${r}%`,[]);return _(ug,{className:"pb-18 pt-6",children:oe("div",{className:"max-w-288 m-auto",children:[e&&_(Ci,{className:"mb-20",width:"w-full",size:"sm",label:_(be,{message:"Color"}),value:L().frame.builder.defaultColor,onChange:r=>{L().frame.active.changeColor(r)}}),_(Ti,{size:"sm",label:_(be,{message:"Size"}),step:1,minValue:L().frame.active.getMinSize(),maxValue:L().frame.active.getMaxSize(),defaultValue:L().frame.active.currentSizeInPercent,getValueLabel:n,onChange:r=>{L().frame.resize(r)}})]})})}const Pa=he.createContext(null);function e8(){const{tabsRef:t,selectedTab:e}=E.exports.useContext(Pa),[n,r]=E.exports.useState({width:void 0,transform:void 0,className:void 0});return Ar(()=>{if(e!=null&&t.current){const i=t.current[e];if(!i)return;r(s=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:s.width===void 0?"":"transition-all"}))}},[r,e,t]),_("div",{className:fe("absolute bottom-0 left-0 h-2 bg-primary",n.className),role:"presentation",style:{width:n.width,transform:n.transform}})}function t8({children:t,center:e,expand:n,className:r}){const i=E.exports.Children.toArray(t);return _(ou,{children:oe("div",{className:fe("flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",r),role:"tablist","aria-orientation":"horizontal",children:[i.map((s,d)=>E.exports.isValidElement(s)?E.exports.cloneElement(s,{index:d,className:fe(s.props.className,n&&"flex-auto",e&&d===0&&"ml-auto",e&&d===i.length-1&&"mr-auto")}):null),_(e8,{})]})})}function n8(t){const{size:e="md",children:n,className:r,isLazy:i,overflow:s="overflow-hidden"}=t,d=E.exports.useRef([]),a=E.exports.useId(),[o,c]=mi(t.selectedTab,t.defaultSelectedTab||0,t.onTabChange),h=E.exports.useMemo(()=>({selectedTab:o,setSelectedTab:c,tabsRef:d,size:e,isLazy:i,id:a}),[o,a,i,c,e]);return _(Pa.Provider,{value:h,children:_("div",{className:fe(r,s,"max-w-full"),children:n})})}const r8=ye(_("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined"),i8=ye(_("path",{d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"}),"FormatStrikethroughOutlined"),o8=ye(_("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),s8=ye(_("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),a8=ye(_("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),l8=ye(_("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),ki=E.exports.forwardRef(({inputElementType:t="input",flexibleHeight:e,inputRef:n,inputTestId:r,...i},s)=>{const d=yi(n),{fieldProps:a,inputProps:o}=C_({...i,focusRef:d}),c=t==="textarea",h=c?"textarea":"input",l=_i({...i,flexibleHeight:e||t==="textarea"});return t==="textarea"&&!i.unstyled&&(l.input=`${l.input} py-12`),_(__,{ref:s,fieldClassNames:l,...a,children:_(h,{"data-testid":r,ref:d,...o,rows:c?o.rows||4:void 0,className:l.input})})});he.forwardRef(({name:t,...e},n)=>{const{field:{onChange:r,onBlur:i,value:s="",ref:d},fieldState:{invalid:a,error:o}}=K6({name:t}),c={onChange:r,onBlur:i,value:s==null?"":s,invalid:a,errorMessage:o==null?void 0:o.message,inputRef:d,name:t};return _(ki,{ref:n,...Xn(c,e)})});function c8(){return oe("div",{className:"flex gap-20 justify-center",children:[_(u8,{}),_(f8,{}),_(h8,{})]})}function u8(){var n;const t=(n=ue(r=>r.objects.active.editableProps.fontSize))!=null?n:40,{trans:e}=Si();return _(ki,{type:"number",size:"xs","aria-label":e({message:"Font Size"}),min:1,max:300,className:"w-64 flex-shrink-0",value:t,onChange:r=>{L().objects.setValues({fontSize:r.target.valueAsNumber}),M().setDirty(!0)}})}function f8(){const t=ue(s=>s.objects.active.editableProps.fontStyle),e=ue(s=>s.objects.active.editableProps.underline),n=ue(s=>s.objects.active.editableProps.linethrough),[r,i]=E.exports.useState([t,e&&"underline",n&&"linethrough"]);return oe(uu,{size:"xs",variant:"outline",radius:"rounded",value:r,multiple:!0,onChange:s=>{i(s),L().objects.setValues({underline:s.includes("underline"),linethrough:s.includes("linethrough"),fontStyle:s.includes("italic")?"italic":""}),M().setDirty(!0)},children:[_(Re,{value:"underline",children:_(r8,{})}),_(Re,{value:"linethrough",children:_(i8,{})}),_(Re,{value:"italic",children:_(o8,{})})]})}function h8(){const t=ue(e=>e.objects.active.editableProps.textAlign);return oe(uu,{size:"xs",variant:"outline",radius:"rounded",value:t,onChange:e=>{L().objects.setValues({textAlign:e}),M().setDirty(!0)},children:[_(Re,{value:"left",children:_(a8,{})}),_(Re,{value:"center",children:_(l8,{})}),_(Re,{value:"right",children:_(s8,{})})]})}function d8({children:t,className:e}){const{selectedTab:n,isLazy:r}=E.exports.useContext(Pa),i=E.exports.Children.toArray(t).filter(d=>!!d);let s;if(r){const d=i[n];s=E.exports.isValidElement(d)?E.exports.cloneElement(i[n],{index:n}):null}else s=i.map((d,a)=>{if(E.exports.isValidElement(d)){const o=a===n;return E.exports.cloneElement(d,{index:a,"aria-hidden":!o,className:o?d.props.className:fe(d.props.className,"hidden")})}return null});return _("div",{className:e,children:s})}function Ei({className:t,children:e,index:n,...r}){const{id:i}=E.exports.useContext(Pa),[s,d]=E.exports.useState(0),a=E.exports.useRef(null);return Ar(()=>{if(a!=null&&a.current){const o=()=>{const h=Lr(a.current,{tabbable:!0});d(h.nextNode()?void 0:0)};o();const c=new MutationObserver(o);return c.observe(a.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{c.disconnect()}}},[a]),_("div",{tabIndex:s,ref:a,id:`${i}-${n}-tabpanel`,"aria-labelledby":`${i}-${n}-tab`,className:fe(t,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:e})}const T_=[{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{color:"#ffe47b",offset:0},{color:"rgb(111,154,211)",offset:1}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{color:"#ff4040",offset:0},{color:"#e6399b",offset:1}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"rgb(166,111,213)"},{offset:.5,color:"rgba(106, 72, 215, 0.5)"},{offset:1,color:"#200772"}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#FF4F4F"},{offset:1,color:"rgb(255, 239, 64)"}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:20,y2:20},colorStops:[{offset:0,color:"#ffe47b"},{offset:.5,color:"rgb(111,154,211)"},{offset:1,color:"rgb(166,111,213)"}]},{type:"radial",coords:{r1:50,r2:80,x1:45,y1:45,x2:52,y2:50},colorStops:[{offset:0,color:"rgb(155, 237, 0)"},{offset:1,color:"rgba(0, 164, 128,0.4)"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"#9ecb2d"},{offset:.5,color:"#72aa00"},{offset:1,color:"#bfd255"}]},{type:"radial",coords:{r1:100,r2:50,x1:30,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#aebcbf"},{offset:1,color:"#0a0809"}]},{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f6f6f6"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#fefcea"},{offset:1,color:"#f1da36"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"rgb(166,111,213)"},{offset:.5,color:"rgba(106, 72, 215, 0.5)"},{offset:1,color:"#ff1a00"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#b7deed"},{offset:1,color:"#21b4e2"}]},{type:"linear",coords:{x1:-80,y1:100,x2:80,y2:-100},colorStops:[{offset:0,color:"#ffe47b"},{offset:1,color:"rgb(111,154,211)"}]}],p8=ye(_("path",{d:"M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3 3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"}),"TextureOutlined"),g8=ye(_("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),m8=ye(_("path",{d:"M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"}),"AddPhotoAlternateOutlined");function k_({property:t}){const{trans:e}=Si(),n=ue(r=>r.objects.active.editableProps[t]);return oe("div",{className:"flex items-center justify-center gap-14",children:[_(Ci,{className:"flex-shrink-0",size:"xs","aria-label":e({message:"Color"}),value:typeof n=="string"?n:ff.fill,onChange:r=>{L().objects.setValues({[t]:r}),M().setDirty(!0)}}),_(E_,{type:"gradient",property:t}),_(E_,{type:"texture",property:t})]})}function E_({type:t,property:e}){const n=t==="texture"?_(p8,{}):_(g8,{});return _(E.exports.Fragment,{children:oe(Cu,{type:"popover",children:[_(bt,{className:"flex-shrink-0",id:`${t}-panel-trigger`,variant:"outline",size:"xs",startIcon:n,endIcon:_(bg,{}),children:_("span",{className:"capitalize",children:t==="gradient"?_(be,{message:"Gradient"}):_(be,{message:"Texture"})})}),_(Su,{size:"auto",children:_("div",{className:"grid gap-8 grid-cols-5-min-content p-10 bg-paper rounded shadow-md",children:_(v8,{property:e,type:t})})})]})})}function v8({type:t,property:e}){const{close:n}=h_(),r=Array.from(Array(t==="gradient"?T_.length:28).keys()),i="w-56 h-56 bg border shadow-sm hover:scale-110",s=r.map(d=>{const a=Kt(`images/${t}s/${d}.png`);return _(Gn,{radius:"rounded",className:i,style:{backgroundImage:`url(${a})`},"aria-label":`Select ${t} #${d}`,onClick:async()=>{n();const o=t==="gradient"?new xe.fabric.Gradient(T_[d]):await O_(a);L().objects.setValues({[e]:o}),M().setDirty(!0)}},d)});return t==="texture"&&s.unshift(_(y8,{property:e,className:i},"upload-btn")),_(E.exports.Fragment,{children:s})}function y8({className:t,property:e}){const{close:n}=h_();return _(Gn,{radius:"rounded",className:t,"aria-label":"Upload an image",onClick:async()=>{const r=await L().import.openUploadWindow();if(n(),r){const i=await O_(await r.data);L().objects.setValues({[e]:i})}},children:_(m8,{className:"icon-md"})})}function O_(t){return new Promise(e=>{xe.fabric.util.loadImage(t,n=>{const r=new xe.fabric.Pattern({source:n,repeat:"repeat"});e(r)})})}function b8(){const t=ue(e=>e.objects.active.editableProps.opacity);return _(Ti,{className:"max-w-240 w-full mx-auto","aria-label":"Opacity",value:t,minValue:.1,step:.1,maxValue:1,onChange:e=>{L().objects.setValues({opacity:e}),M().setDirty(!0)}})}function w8(){const{trans:t}=Si(),e=ue(r=>r.objects.active.editableProps.stroke),n=ue(r=>r.objects.active.editableProps.strokeWidth);return oe("div",{className:"flex items-center gap-40",children:[_(Ci,{className:"ml-auto flex-shrink-0",size:"xs",value:e,"aria-label":t({message:"Outline Color"}),onChange:r=>{L().objects.setValues({stroke:r}),M().setDirty(!0)}}),_(Ti,{"aria-label":"Outline Width",className:"max-w-240 mr-auto flex-shrink-0",value:n,onChange:r=>{L().objects.setValues({strokeWidth:r}),M().setDirty(!0)}})]})}const x8=ye(_("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined");function _8(){return _("div",{className:"flex justify-center",children:_(bt,{type:"button",variant:"outline",size:"xs",startIcon:_(x8,{}),radius:"rounded-full",onClick:async()=>{const t=await L().import.openUploadWindow();if(t){const e=L().objects.getActive();if(e&&"setSrc"in e){const n=await t.data;e.setSrc(n,()=>{Kw({src:n}),L().canvas.render()})}}},children:_(be,{message:"Replace Image"})})})}const P_={color:"rgba(0, 0, 0, 0.6)",blur:3,offsetX:-1,offsetY:0};function S8(){const{trans:t}=Si(),e=ue(n=>n.objects.active.editableProps.shadow)||P_;return oe("div",{className:"flex items-center gap-40",children:[_(Ci,{className:"ml-auto flex-shrink-0",value:e.color,size:"xs","aria-label":t({message:"Shadow Color"}),onChange:n=>{L().objects.setValues({shadow:M_({color:n})}),M().setDirty(!0)}}),_(Ti,{"aria-label":"Shadow Blur",className:"max-w-240 mr-auto flex-shrink-0",defaultValue:e.blur,onChange:n=>{L().objects.setValues({shadow:M_({blur:n})}),M().setDirty(!0)}})]})}function M_(t){var n;const e=(n=L().objects.getActive())==null?void 0:n.shadow;return e?(Object.entries(t).forEach(([r,i])=>{e[r]=i}),e):new xe.fabric.Shadow({...P_,...t})}function Oi({index:t,className:e,isDisabled:n,children:r,padding:i,elementType:s="button",to:d,relative:a}){const{selectedTab:o,setSelectedTab:c,tabsRef:h,size:l="md",id:u}=E.exports.useContext(Pa),f=t===o,p=bR(),m=i||(l==="sm"?"px-12":"px-18"),g=fe("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap min-w-min",C8({isDisabled:n,isSelected:f}),e,l==="md"&&`${m} h-48`,l==="sm"&&`${m} h-32`,!n&&"cursor-pointer"),v=w=>{switch(w.key){case"ArrowLeft":p.focusPrevious();break;case"ArrowRight":p.focusNext();break;case"Home":p.focusFirst();break;case"End":p.focusLast();break}},y=f?0:-1;return _(s,{disabled:n,id:`${u}-${t}-tab`,"aria-controls":`${u}-${t}-tabpanel`,type:"button",role:"tab","aria-selected":f,tabIndex:n?void 0:y,onKeyDown:v,onClick:()=>{c(t)},to:d,relative:a,className:g,ref:w=>{h.current&&w&&(h.current[t]=w)},children:r})}function C8({isDisabled:t,isSelected:e}){return t?"text-disabled cursor-default":e?"text-primary":"text-muted hover:text-main"}function A_(){const t=ue(e=>e.objects.active);return oe(n8,{size:"sm",className:"pb-18 pt-6",children:[oe(t8,{center:!0,children:[t.isText&&_(Oi,{children:_(be,{message:"Font"})}),!t.isImage&&_(Oi,{children:_(be,{message:"Color"})}),!t.isImage&&_(Oi,{children:_(be,{message:"Background"})}),t.isImage&&_(Oi,{children:_(be,{message:"Image"})}),_(Oi,{children:_(be,{message:"Opacity"})}),_(Oi,{children:_(be,{message:"Outline"})}),_(Oi,{children:_(be,{message:"Shadow"})})]}),oe(d8,{className:"pt-16 h-50",children:[t.isText&&_(Ei,{children:_(c8,{})},"font"),!t.isImage&&_(Ei,{children:_(k_,{property:"fill"})}),!t.isImage&&_(Ei,{children:_(k_,{property:"backgroundColor"})}),t.isImage&&_(Ei,{children:_(_8,{})}),_(Ei,{children:_(b8,{})}),_(Ei,{children:_(w8,{})}),_(Ei,{children:_(S8,{})})]})]})}function T8(){const e=!cu()&&_(bt,{size:"sm",color:"primary",variant:"outline",onClick:()=>{L().text.add(),M().setDirty(!0)},children:_(be,{message:"New Text"})});return _(ug,{actionBtn:e,children:_(A_,{})})}const k8=ye(_("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined"),D_=500,Rn={};let Ma=!1,Zn=null,Pi=null;const R_=t=>{var e;for(const n in Rn)n!==t&&((e=Rn[n])==null||e.call(Rn,!0),delete Rn[n])},E8=E.exports.forwardRef(({children:t,label:e,placement:n="top",offset:r=10,variant:i="neutral",delay:s=1500,isDisabled:d,...a},o)=>{const{x:c,y:h,reference:l,floating:u,strategy:f,arrowRef:p,arrowStyle:m}=Xp({placement:n,offset:r,ref:o,showArrow:!0}),[g,v]=E.exports.useState(!1),y=E.exports.useId(),b=E.exports.useRef(),w=()=>{clearTimeout(b.current),b.current=void 0,R_(y),Rn[y]=x,Ma=!0,v(!0),Zn&&(clearTimeout(Zn),Zn=null),Pi&&(clearTimeout(Pi),Pi=null)},x=E.exports.useCallback(k=>{k?(clearTimeout(b.current),b.current=void 0,v(!1)):b.current||(b.current=setTimeout(()=>{b.current=void 0,v(!1)},D_)),Zn&&(clearTimeout(Zn),Zn=null),Ma&&(Pi&&clearTimeout(Pi),Pi=setTimeout(()=>{delete Rn[y],Pi=null,Ma=!1},D_))},[y]),S=()=>{R_(y),Rn[y]=x,!g&&!Zn&&!Ma?Zn=setTimeout(()=>{Zn=null,Ma=!0,w()},s):g||w()},C=k=>{!k&&s>0&&!b.current?S():w()};return E.exports.useEffect(()=>()=>{clearTimeout(b.current),Rn[y]&&delete Rn[y]},[y]),E.exports.useEffect(()=>{const k=I=>{I.key==="Escape"&&x(!0)};if(g)return document.addEventListener("keydown",k,!0),()=>{document.removeEventListener("keydown",k,!0)}},[g,x]),oe(E.exports.Fragment,{children:[E.exports.cloneElement(t,Xn({"aria-describedby":g?y:void 0,ref:l,onPointerEnter:k=>{k.pointerType==="mouse"&&C()},onFocus:k=>{k.target.matches(":focus-visible")&&C(!0)},onPointerLeave:k=>{k.pointerType==="mouse"&&x()},onPointerDown:()=>{x(!0)},onBlur:()=>{x()}},a)),nn&&Zi.exports.createPortal(_(Yn,{children:g&&oe(yt.div,{...iu,ref:u,id:y,role:"tooltip",onPointerEnter:()=>{C(!0)},onPointerLeave:()=>{x()},className:fe("rounded shadow px-8 py-4 text-xs break-words max-w-240 my-4 z-tooltip text-white",i==="positive"&&"bg-positive",i==="danger"&&"bg-danger",i==="neutral"&&"bg-toast"),style:{position:f,top:h!=null?h:"",left:c!=null?c:""},children:[_("div",{ref:p,className:"absolute w-8 h-8 rotate-45 bg-inherit",style:m}),e]})}),nn)]})});function O8(){const t=ue(s=>s.activeToolOverlay),e=ue(s=>s.objects.active.id),n=P8(t,e),[r,i]=E.exports.useState(!0);return oe("div",{className:"relative z-tool-overlay text-sm",children:[n&&_("div",{className:fe("absolute right-16 text-muted z-50 transition-all",!r&&"rotate-180",r?"-top-144":"-top-40"),children:_(E8,{label:r?_(be,{message:"Hide options"}):_(be,{message:"Show options"}),children:_(Re,{variant:"outline",radius:"rounded-lg",size:"xs",onClick:()=>{i(!r)},children:_(k8,{})})})}),_(Yn,{children:n&&r&&_(yt.div,{initial:{y:0,opacity:0},animate:{y:"-100%",opacity:1},exit:{y:0,opacity:0},transition:{type:"tween",duration:.15},className:"absolute inset-x-0 gap-16 px-5vw bg bg-opacity-95 border-t",children:n},"tool-controls-overlay")})]})}function P8(t,e){switch(t){case tn.Filter:return _(Q6,{});case tn.Frame:return _(J6,{});case tn.Text:return e&&_(T8,{});case tn.ActiveObject:return e&&_(A_,{});default:return null}}const Eg=ye(_("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");function M8({filter:t}){const e=ue(d=>d.filter.applied.includes(t)),n=L().filter.hasOptions(t),r=fe("block flex-shrink-0 rounded",{"text-primary border-primary":e}),i=TA[t],s=oe(E.exports.Fragment,{children:[oe("div",{className:"relative",children:[_(A8,{filter:t}),e&&_(D8,{filter:t,hasOptions:n})]}),_("div",{className:"mt-4 text-center text-xs capitalize",children:i?_(be,{...i}):t})]});return e&&n?_("div",{className:r,children:s}):_(Gn,{className:r,onClick:()=>{e?L().filter.remove(t):L().filter.apply(t)},children:s})}function A8({filter:t}){const e=ue(r=>r.filter.selected===t),n=fe("m-auto w-96 h-56 border rounded object-cover",{shadow:e});return _("img",{src:Kt(`images/filter/${t}.jpg`),className:n,alt:""})}function D8({filter:t,hasOptions:e}){return oe("div",{className:"flex items-center justify-center bg-background/70 absolute inset-0 border-2 border-primary rounded",children:[e?_(Re,{color:"primary",size:"md",onClick:()=>{L().filter.remove(t)},children:_(Eg,{})}):_(Eg,{className:"svg-icon icon-md"}),e&&_(R8,{filter:t,hasOptions:e})]})}function R8({filter:t,hasOptions:e}){return _(Re,{color:"primary",size:"md",onClick:()=>{M().activeToolOverlay===tn.Filter&&M().filter.selected===t?M().setActiveTool(M().activeTool,null):M().filter.select(t,e)},children:_(av,{})})}const Mi=E.exports.forwardRef(({children:t,className:e,gap:n="gap-10"},r)=>{const i=he.Children.map(t,(s,d)=>he.isValidElement(s)?he.cloneElement(s,{isFirst:d===0,isLast:he.Children.count(t)===d+1}):s);return _("div",{ref:r,className:fe("tiny-scrollbar pb-4 overflow-x-auto relative flex items-center",n,e),children:i})});function Qn({isFirst:t,isLast:e,children:n,className:r}){const i=fe(r,"flex-shrink-0",{"ml-auto":t,"mr-auto":e});return _("div",{className:i,children:n})}function I8(){const t=ue(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.filter)==null?void 0:i.items})||[];E.exports.useEffect(()=>{L().filter.syncState()},[]);const e=t.map(n=>_(Qn,{children:_(M8,{filter:n})},n));return _(Mi,{children:e})}const L8=ye(_("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),F8=ye(_("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined"),z8=ye(_("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlankOutlined"),N8=ye(_("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),I_=ye(_("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"}),"CheckBox"),j8=E.exports.forwardRef((t,e)=>{const{size:n="md",children:r,className:i,icon:s,checkedIcon:d,disabled:a,isIndeterminate:o,errorMessage:c,invalid:h,orientation:l="horizontal",onChange:u,autoFocus:f,required:p,value:m,name:g,inputTestId:v}=t,y=_i({...t,label:r}),b=s||z8,w=d||(o?I_:N8),x=yi(e);Tg({autoFocus:f},x),E.exports.useEffect(()=>{x.current&&(x.current.indeterminate=o||!1)});const[S,C]=mi(t.checked,t.defaultChecked||!1),k=E.exports.useCallback(q=>{u==null||u(q),C(q.target.checked)},[u,C]),I=fe("select-none",i,h&&"text-danger",!h&&a&&"text-disabled");let F,j=h?"text-danger":null;return o?(F=I_,j=j||"text-primary"):S?(F=w,j=j||"text-primary"):(F=b,j=j||"text-muted"),oe("div",{children:[_("label",{className:I,children:oe("div",{className:fe("relative flex items-center",l==="vertical"&&"flex-col flex-col-reverse"),children:[_("input",{className:"focus-visible:ring ring-inset transition-shadow outline-none absolute left-0 top-0 w-24 h-24 rounded appearance-none",type:"checkbox","aria-checked":o?"mixed":S,"aria-invalid":h||void 0,onChange:k,ref:x,required:p,disabled:a,value:m,name:g,"data-testid":v}),_(F,{size:n,className:fe("pointer-events-none",a?"text-disabled":j)}),r&&_("div",{className:fe("first-letter:capitalize",y.size.font,l==="vertical"?"mb-6":"ml-6"),children:r})]})}),c&&_("div",{className:y.error,children:c})]})});function B8(){const{trans:t}=Si(),{minWidth:e=50,minHeight:n=50,maxHeight:r=2400,maxWidth:i=2400}=ue(l=>{var u;return(u=l.config.tools)==null?void 0:u.resize})||{},s=ue(l=>l.original),d=ue(l=>l.resize.formValue);E.exports.useEffect(()=>{M().resize.setFormValue({...s})},[s]),E.exports.useEffect(()=>{M().setDirty(!0)},[]);const a=l=>{const u={...d,width:l};d.maintainAspect&&(u.height=Gc(l,d.usePercentages)),M().resize.setFormValue(u)},o=l=>{const u={...d,height:l};l&&d.maintainAspect&&(u.width=Ip(l,d.usePercentages)),M().resize.setFormValue(u)},c=l=>{const u={...d,maintainAspect:l};l&&(u.height=Gc(u.width,u.usePercentages)),M().resize.setFormValue(u)};return oe("form",{className:"flex items-center justify-center gap-16 w-full",onSubmit:l=>{l.preventDefault(),M().applyChanges()},children:[_(ki,{type:"number",min:e,max:i,size:"sm",className:"w-full max-w-112",label:_(be,{message:"Width"}),value:d.width,onChange:l=>{a(l.target.valueAsNumber)}}),_("div",{className:"mt-24",children:_(j8,{size:"md",checked:d.maintainAspect,onChange:l=>{c(!d.maintainAspect)},"aria-label":t({message:"Maintain aspect ratio"}),checkedIcon:L8,icon:F8})}),_(ki,{type:"number",min:n,max:r,size:"sm",className:"w-full max-w-112",label:_(be,{message:"Height"}),value:d.height,onChange:l=>{o(l.target.valueAsNumber)}}),_("button",{type:"submit",className:"hidden",children:_(be,{message:"Resize"})})]})}function V8(){var i;const t=ue(s=>{var d,a;return(a=(d=s.config.tools)==null?void 0:d.crop)==null?void 0:a.presets})||[],e=ue(s=>s.crop.selectedAspectRatio),n=(i=ue(s=>{var d,a;return(a=(d=s.config.tools)==null?void 0:d.crop)==null?void 0:a.allowCustomRatio}))!=null?i:!0,r=t.filter(s=>s.ratio||!s.ratio&&n).map(s=>_(Qn,{children:oe(Gn,{onClick:()=>L().crop.resetCropzone(s.ratio),className:"flex flex-col items-center justify-between cursor-pointer h-56",children:[_($8,{preset:s,selectedRatio:e}),_(U8,{preset:s,selectedRatio:e})]})},s.ratio||s.name));return _(Mi,{gap:"gap-18",children:r})}function $8({preset:t,selectedRatio:e}){let n=40,r=30;if(t.ratio){const s=Fp(t.ratio);({width:n,height:r}=Lp(s,n,r))}const i=fe("border-2",{"border-dotted":t.ratio===null,"border-primary":e===t.ratio});return _("div",{style:{width:`${n}px`,height:`${r}px`},className:i})}function U8({preset:t,selectedRatio:e}){const n=fe("mt-4 text-center text-xs",{"text-primary":e===t.ratio});return _("div",{className:n,children:t.name||t.ratio})}const L_=ye(_("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"}),"FlipOutlined");function H8(){return oe("div",{children:[_(Re,{size:"sm",onClick:()=>{L().transform.flip("vertical"),M().setDirty(!0)},children:_(L_,{})}),_(Re,{size:"sm",onClick:()=>{L().transform.flip("horizontal"),M().setDirty(!0)},children:_(L_,{className:"rotate-90"})})]})}const W8=ye(_("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeftOutlined"),Y8=ye(_("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRightOutlined");function X8(){return oe("div",{children:[_(Re,{size:"sm",onClick:()=>{L().transform.rotateLeft(),M().setDirty(!0)},children:_(W8,{})}),_(Re,{size:"sm",onClick:()=>{L().transform.rotateRight(),M().setDirty(!0)},children:_(Y8,{})})]})}function G8(){return oe("div",{className:"flex items-center justify-center gap-16",children:[_(H8,{}),_(K8,{}),_(X8,{})]})}function K8(){const t=E.exports.useRef(null),{domProps:e,groupId:n,thumbIds:r,trackRef:i,getThumbValueLabel:s}=p_({minValue:-45,maxValue:45,step:1,defaultValue:[M().crop.straightenAngle],onChange:d=>{const a=d[0];L().transform.straighten(a),M().crop.setTransformAngle(a),M().setDirty(!0),t.current.style.transform=`translateX(${a}px)`}});return _("div",{id:n,role:"group",className:"flex-auto flex-shrink-0 max-w-320 touch-none isolate",children:oe("div",{...e,ref:i,className:"h-36 relative",children:[oe("output",{htmlFor:r[0],"aria-live":"off",className:"absolute left-1/2 top-1/2 w-40 text-center bg -translate-x-1/2 -translate-y-1/2 z-10",children:[s(0),"\xB0"]}),_(q8,{ref:t})]})})}const q8=he.forwardRef((t,e)=>{const n=[...Array(80).keys()],r=n.map(i=>_("circle",{cx:2+i*10,cy:"20",r:i%5?.75:2},i));return _("div",{className:"relative h-full cursor-pointer overflow-hidden",children:_("svg",{ref:e,style:{width:n.length*10},className:"absolute -left-80 h-full fill-current",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:r})})});function Z8(){return E.exports.useEffect(()=>(M().setDirty(!0),L().frame.active.hide(),()=>{L().frame.active.show()}),[]),oe("div",{className:"pb-16",children:[_("div",{className:"mb-10",children:_(G8,{})}),_(V8,{})]})}const Q8=ye(_("path",{d:"M 16 6 C 12.484375 6 9.273438 7.070313 6.90625 8.84375 C 4.539063 10.617188 3 13.15625 3 16 C 3 18.84375 4.539063 21.382813 6.90625 23.15625 C 9.273438 24.929688 12.484375 26 16 26 C 19.515625 26 22.726563 24.929688 25.09375 23.15625 C 27.460938 21.382813 29 18.84375 29 16 C 29 13.15625 27.460938 10.617188 25.09375 8.84375 C 22.726563 7.070313 19.515625 6 16 6 Z M 16 8 C 19.109375 8 21.898438 8.957031 23.875 10.4375 C 25.851563 11.917969 27 13.875 27 16 C 27 18.125 25.851563 20.082031 23.875 21.5625 C 21.898438 23.042969 19.109375 24 16 24 C 12.890625 24 10.101563 23.042969 8.125 21.5625 C 6.148438 20.082031 5 18.125 5 16 C 5 13.875 6.148438 11.917969 8.125 10.4375 C 10.101563 8.957031 12.890625 8 16 8 Z "})),J8=ye(_("path",{d:"M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z "})),eF=ye(_("path",{d:"M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 24 L 5 24 Z "})),tF=ye(_("path",{d:"M 16 4.90625 L 15.125 6.40625 L 4.71875 24.5 L 3.875 26 L 28.125 26 L 27.28125 24.5 L 16.875 6.40625 Z M 16 8.9375 L 24.65625 24 L 7.34375 24 Z "}));function nF(){const e=(ue(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.shapes)==null?void 0:i.items})||[]).map(n=>_(Qn,{children:_(Re,{variant:"outline",radius:"rounded-2xl",size:"xl",onClick:()=>{L().shape.addBasicShape(n.name),M().setDirty(!0)},children:_(rF,{shape:n})})},n.name));return _(Mi,{children:e})}function rF({shape:t}){var e;return t.type==="Path"?_("svg",{className:"m-auto w-36 h-36",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -100 512 700",children:_("path",{className:"fill-transparent stroke-current",d:(e=t.options)==null?void 0:e.path,strokeWidth:25})}):he.cloneElement(iF[t.name],{className:"w-30 h-30"})}const iF={circle:_(J8,{viewBox:"0 0 32 32"}),square:_(eF,{viewBox:"0 0 32 32"}),triangle:_(tF,{viewBox:"0 0 32 32"}),ellipse:_(Q8,{viewBox:"0 0 32 32"})};/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ku.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yo(t,e,n){var r,i=(r=n.initialDeps)!=null?r:[],s;return function(){var d;n.key&&n.debug!=null&&n.debug()&&(d=Date.now());var a=t(),o=a.length!==i.length||a.some(function(p,m){return i[m]!==p});if(!o)return s;i=a;var c;if(n.key&&n.debug!=null&&n.debug()&&(c=Date.now()),s=e.apply(void 0,a),n.key&&n.debug!=null&&n.debug()){var h=Math.round((Date.now()-d)*100)/100,l=Math.round((Date.now()-c)*100)/100,u=l/16,f=function(m,g){for(m=String(m);m.length<g;)m=" "+m;return m};console.info("%c\u23F1 "+f(l,5)+" /"+f(h,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*u,120))+"deg 100% 31%);",n==null?void 0:n.key)}return n==null||n.onChange==null||n.onChange(s),s}}function Og(t,e){if(t===void 0)throw new Error("Unexpected undefined"+(e?": "+e:""));return t}var oF=function(e,n){return Math.abs(e-n)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sF=function(e){return e},aF=function(e){for(var n=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),i=[],s=n;s<=r;s++)i.push(s);return i},lF=function(e,n){var r=e.scrollElement;if(!!r){var i=function(a){var o=a.width,c=a.height;n({width:Math.round(o),height:Math.round(c)})};i(r.getBoundingClientRect());var s=new ResizeObserver(function(d){var a=d[0];if(a!=null&&a.borderBoxSize){var o=a.borderBoxSize[0];if(o){i({width:o.inlineSize,height:o.blockSize});return}}i(r.getBoundingClientRect())});return s.observe(r,{box:"border-box"}),function(){s.unobserve(r)}}},cF=function(e,n){var r=e.scrollElement;if(!!r){var i=function(){n(r[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),r.addEventListener("scroll",i,{passive:!0}),function(){r.removeEventListener("scroll",i)}}},uF=function(e,n,r){if(n!=null&&n.borderBoxSize){var i=n.borderBoxSize[0];if(i){var s=Math.round(i[r.options.horizontal?"inlineSize":"blockSize"]);return s}}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},fF=function(e,n,r){var i,s,d=n.adjustments,a=d===void 0?0:d,o=n.behavior,c=e+a;(i=r.scrollElement)==null||i.scrollTo==null||i.scrollTo((s={},s[r.options.horizontal?"left":"top"]=c,s.behavior=o,s))},hF=function(e){var n=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var r=null,i=function(){return r||(typeof ResizeObserver<"u"?r=new ResizeObserver(function(d){d.forEach(function(a){n._measureElement(a.target,a)})}):null)};return{disconnect:function(){var d;return(d=i())==null?void 0:d.disconnect()},observe:function(d){var a;return(a=i())==null?void 0:a.observe(d,{box:"border-box"})},unobserve:function(d){var a;return(a=i())==null?void 0:a.unobserve(d)}}}(),this.range={startIndex:0,endIndex:0},this.setOptions=function(r){Object.entries(r).forEach(function(i){var s=i[0],d=i[1];typeof d>"u"&&delete r[s]}),n.options=ku({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:sF,rangeExtractor:aF,onChange:function(){},measureElement:uF,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},r)},this.notify=function(){n.options.onChange==null||n.options.onChange(n)},this.cleanup=function(){n.unsubs.filter(Boolean).forEach(function(r){return r()}),n.unsubs=[],n.scrollElement=null},this._didMount=function(){return n.measureElementCache.forEach(n.observer.observe),function(){n.observer.disconnect(),n.cleanup()}},this._willUpdate=function(){var r=n.options.getScrollElement();n.scrollElement!==r&&(n.cleanup(),n.scrollElement=r,n._scrollToOffset(n.scrollOffset,{adjustments:void 0,behavior:void 0}),n.unsubs.push(n.options.observeElementRect(n,function(i){var s=n.scrollRect;n.scrollRect=i,(n.options.horizontal?i.width!==s.width:i.height!==s.height)&&n.maybeNotify()})),n.unsubs.push(n.options.observeElementOffset(n,function(i){n.scrollAdjustments=0,n.scrollOffset!==i&&(n.isScrollingTimeoutId!==null&&(clearTimeout(n.isScrollingTimeoutId),n.isScrollingTimeoutId=null),n.isScrolling=!0,n.scrollDirection=n.scrollOffset<i?"forward":"backward",n.scrollOffset=i,n.maybeNotify(),n.isScrollingTimeoutId=setTimeout(function(){n.isScrollingTimeoutId=null,n.isScrolling=!1,n.scrollDirection=null,n.maybeNotify()},n.options.scrollingDelay))})))},this.getSize=function(){return n.scrollRect[n.options.horizontal?"width":"height"]},this.memoOptions=Yo(function(){return[n.options.count,n.options.paddingStart,n.options.scrollMargin,n.options.getItemKey]},function(r,i,s,d){return n.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:i,scrollMargin:s,getItemKey:d}},{key:!1}),this.getFurthestMeasurement=function(r,i){for(var s=new Map,d=new Map,a=i-1;a>=0;a--){var o=r[a];if(!s.has(o.lane)){var c=d.get(o.lane);if(c==null||o.end>c.end?d.set(o.lane,o):o.end<c.end&&s.set(o.lane,!0),s.size===n.options.lanes)break}}return d.size===n.options.lanes?Array.from(d.values()).sort(function(h,l){return h.end-l.end})[0]:void 0},this.getMeasurements=Yo(function(){return[n.memoOptions(),n.itemSizeCache]},function(r,i){var s=r.count,d=r.paddingStart,a=r.scrollMargin,o=r.getItemKey,c=n.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,n.pendingMeasuredCacheIndexes):0;n.pendingMeasuredCacheIndexes=[];for(var h=n.measurementsCache.slice(0,c),l=c;l<s;l++){var u=o(l),f=n.options.lanes===1?h[l-1]:n.getFurthestMeasurement(h,l),p=f?f.end:d+a,m=i.get(u),g=typeof m=="number"?m:n.options.estimateSize(l),v=p+g,y=f?f.lane:l%n.options.lanes;h[l]={index:l,start:p,size:g,end:v,key:u,lane:y}}return n.measurementsCache=h,h},{key:!1,debug:function(){return n.options.debug}}),this.calculateRange=Yo(function(){return[n.getMeasurements(),n.getSize(),n.scrollOffset]},function(r,i,s){return n.range=dF({measurements:r,outerSize:i,scrollOffset:s})},{key:!1,debug:function(){return n.options.debug}}),this.maybeNotify=Yo(function(){var r=n.calculateRange();return[r.startIndex,r.endIndex,n.isScrolling]},function(){n.notify()},{key:!1,debug:function(){return n.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=Yo(function(){return[n.options.rangeExtractor,n.calculateRange(),n.options.overscan,n.options.count]},function(r,i,s,d){return r(ku({},i,{overscan:s,count:d}))},{key:!1,debug:function(){return n.options.debug}}),this.indexFromElement=function(r){var i=n.options.indexAttribute,s=r.getAttribute(i);return s?parseInt(s,10):(console.warn("Missing attribute name '"+i+"={index}' on measured element."),-1)},this._measureElement=function(r,i){var s,d=n.indexFromElement(r),a=n.measurementsCache[d];if(!!a){var o=n.measureElementCache.get(a.key);if(!r.isConnected){n.observer.unobserve(r),r===o&&n.measureElementCache.delete(a.key);return}o!==r&&(o&&n.observer.unobserve(o),n.observer.observe(r),n.measureElementCache.set(a.key,r));var c=n.options.measureElement(r,i,n),h=(s=n.itemSizeCache.get(a.key))!=null?s:a.size,l=c-h;l!==0&&(a.start<n.scrollOffset&&n._scrollToOffset(n.scrollOffset,{adjustments:n.scrollAdjustments+=l,behavior:void 0}),n.pendingMeasuredCacheIndexes.push(d),n.itemSizeCache=new Map(n.itemSizeCache.set(a.key,c)),n.notify())}},this.measureElement=function(r){!r||n._measureElement(r,void 0)},this.getVirtualItems=Yo(function(){return[n.getIndexes(),n.getMeasurements()]},function(r,i){for(var s=[],d=0,a=r.length;d<a;d++){var o=r[d],c=i[o];s.push(c)}return s},{key:!1,debug:function(){return n.options.debug}}),this.getVirtualItemForOffset=function(r){var i=n.getMeasurements();return Og(i[F_(0,i.length-1,function(s){return Og(i[s]).start},r)])},this.getOffsetForAlignment=function(r,i){var s=n.getSize();i==="auto"&&(r<=n.scrollOffset?i="start":r>=n.scrollOffset+s?i="end":i="start"),i==="start"?r=r:i==="end"?r=r-s:i==="center"&&(r=r-s/2);var d=n.options.horizontal?"scrollWidth":"scrollHeight",a=n.scrollElement?"document"in n.scrollElement?n.scrollElement.document.documentElement[d]:n.scrollElement[d]:0,o=a-n.getSize();return Math.max(Math.min(o,r),0)},this.getOffsetForIndex=function(r,i){i===void 0&&(i="auto"),r=Math.max(0,Math.min(r,n.options.count-1));var s=Og(n.getMeasurements()[r]);if(i==="auto")if(s.end>=n.scrollOffset+n.getSize()-n.options.scrollPaddingEnd)i="end";else if(s.start<=n.scrollOffset+n.options.scrollPaddingStart)i="start";else return[n.scrollOffset,i];var d=i==="end"?s.end+n.options.scrollPaddingEnd:s.start-n.options.scrollPaddingStart;return[n.getOffsetForAlignment(d,i),i]},this.isDynamicMode=function(){return n.measureElementCache.size>0},this.cancelScrollToIndex=function(){n.scrollToIndexTimeoutId!==null&&(clearTimeout(n.scrollToIndexTimeoutId),n.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(r,i){var s=i===void 0?{}:i,d=s.align,a=d===void 0?"start":d,o=s.behavior;n.cancelScrollToIndex(),o==="smooth"&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n._scrollToOffset(n.getOffsetForAlignment(r,a),{adjustments:void 0,behavior:o})},this.scrollToIndex=function(r,i){var s=i===void 0?{}:i,d=s.align,a=d===void 0?"auto":d,o=s.behavior;r=Math.max(0,Math.min(r,n.options.count-1)),n.cancelScrollToIndex(),o==="smooth"&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var c=n.getOffsetForIndex(r,a),h=c[0],l=c[1];n._scrollToOffset(h,{adjustments:void 0,behavior:o}),o!=="smooth"&&n.isDynamicMode()&&(n.scrollToIndexTimeoutId=setTimeout(function(){n.scrollToIndexTimeoutId=null;var u=n.measureElementCache.has(n.options.getItemKey(r));if(u){var f=n.getOffsetForIndex(r,l),p=f[0];oF(p,n.scrollOffset)||n.scrollToIndex(r,{align:l,behavior:o})}else n.scrollToIndex(r,{align:l,behavior:o})}))},this.scrollBy=function(r,i){var s=i===void 0?{}:i,d=s.behavior;n.cancelScrollToIndex(),d==="smooth"&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n._scrollToOffset(n.scrollOffset+r,{adjustments:void 0,behavior:d})},this.getTotalSize=function(){var r;return(((r=n.getMeasurements()[n.options.count-1])==null?void 0:r.end)||n.options.paddingStart)-n.options.scrollMargin+n.options.paddingEnd},this._scrollToOffset=function(r,i){var s=i.adjustments,d=i.behavior;n.options.scrollToFn(r,{behavior:d,adjustments:s},n)},this.measure=function(){n.itemSizeCache=new Map,n.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(r){n.itemSizeCache.set(r.key,r.size)}),this.maybeNotify()},F_=function(e,n,r,i){for(;e<=n;){var s=(e+n)/2|0,d=r(s);if(d<i)e=s+1;else if(d>i)n=s-1;else return s}return e>0?e-1:0};function dF(t){for(var e=t.measurements,n=t.outerSize,r=t.scrollOffset,i=e.length-1,s=function(c){return e[c].start},d=F_(0,i,s,r),a=d;a<i&&e[a].end<r+n;)a++;return{startIndex:d,endIndex:a}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pF=typeof document<"u"?E.exports.useLayoutEffect:E.exports.useEffect;function gF(t){var e=E.exports.useReducer(function(){return{}},{})[1],n=Tu({},t,{onChange:function(d){e(),t.onChange==null||t.onChange(d)}}),r=E.exports.useState(function(){return new hF(n)}),i=r[0];return i.setOptions(n),E.exports.useEffect(function(){return i._didMount()},[]),pF(function(){return i._willUpdate()}),i}function mF(t){return gF(Tu({observeElementRect:lF,observeElementOffset:cF,scrollToFn:fF},t))}function z_(){const t=ue(e=>{var n;return(n=e.config.ui)==null?void 0:n.activeTheme});return ue(e=>{var n;return(((n=e.config.ui)==null?void 0:n.themes)||[]).find(r=>r.name===t)})}function vF({category:t}){const e=z_(),n=t.name,r=t.list?t.list:Array.from(Array(t.items).keys()),i=E.exports.useRef(null),s=mF({horizontal:!0,count:r.length,getScrollElement:()=>i.current,estimateSize:E.exports.useCallback(()=>52,[]),overscan:5});return E.exports.useEffect(()=>{s.scrollToIndex(0)},[n]),_(E.exports.Fragment,{children:_("div",{ref:i,className:"tiny-scrollbar overflow-x-auto overflow-y-hidden",style:{height:"52px"},children:_("div",{className:"h-full relative mx-auto",style:{width:`${s.getTotalSize()}px`},children:s.getVirtualItems().map(d=>{const a=`${r[d.index]}`;return _("div",{className:"absolute top-0 left-0 h-full",style:{width:`${d.size}px`,transform:`translateX(${d.start}px)`},children:_(bt,{variant:"outline",radius:"rounded-xl",size:"md",equalWidth:!0,onClick:async()=>{await L().shape.addSticker(t.name,a),M().setDirty(!0)},children:_("img",{className:fe("m-auto m-auto w-28 h-28",t.invertPreview&&(e==null?void 0:e.isDark)&&"invert"),src:zp(t,a),alt:a})})},d.index)})})})})}function yF(){const t=ue(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.stickers)==null?void 0:d.items})||[],[e,n]=E.exports.useState(t[0]),r=t.map(i=>{const s=e===i,d=Ek[i.name];return _(bt,{size:"xs",color:s?"primary":null,value:i,children:_("span",{className:"capitalize",children:d?_(be,{...d}):i.name})},i.name)});return oe("div",{className:"h-92",children:[_(uu,{value:e,onChange:i=>n(i),className:"mb-10 w-full justify-center",variant:"outline",radius:"rounded-full",children:r}),e&&_(vF,{category:e})]})}function bF(){const t=ue(r=>{var i,s;return(s=(i=r.config.tools)==null?void 0:i.frame)==null?void 0:s.items})||[],e=ue(r=>r.frame.active);E.exports.useEffect(()=>{M().frame.active&&M().frame.showOptionsPanel()},[]);const n=t.map(r=>{const i=Kt(`images/frames/${r.name}/thumbnail.png`),s=(e==null?void 0:e.name)===r.name;return _(Qn,{children:oe("button",{type:"button",className:`border-2 overflow-hidden relative rounded border cursor-pointer ${s?"border-primary":""}`,onClick:()=>{M().setDirty(!0),s?L().frame.remove():L().frame.add(r.name)},children:[s&&_(wF,{}),_("img",{draggable:"false",className:"w-64 h-64",src:i,alt:r.name})]})},r.name)});return _(Mi,{children:n})}function wF(){return _("span",{className:"bg-background/70 absolute inset-0 text-primary",children:_(Eg,{className:"svg-icon icon-md absolute inset-0 block m-auto"})})}function xF(){const t=ue(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.text)==null?void 0:i.items});E.exports.useEffect(()=>{t&&Jw(t,{prefixSrc:Kt,id:"photalius-fonts"}).catch(()=>{})},[t]),E.exports.useEffect(()=>{L().text.selectOrAddText()&&M().setDirty(!0)},[]);const e=(t||[]).map(n=>_(Qn,{children:_(_F,{fontConfig:n})},n.family));return _(Mi,{className:"pt-6",children:e})}function _F({fontConfig:t}){var r;const e=ue(i=>i.objects.active.editableProps.fontFamily),n=fe("block px-6 w-110 h-68 text-sm bg border rounded-2xl",{"border-primary":e===t.family,"text-primary":e===t.family});return _("button",{type:"button",className:n,style:{fontFamily:t.family,fontWeight:((r=t.descriptors)==null?void 0:r.weight)||"normal"},onClick:async()=>{L().text.selectOrAddText(),M().setDirty(!0),L().objects.setValues({fontFamily:t.family})},children:t.family})}const SF=ye(_("path",{d:"M290.7 57.4L57.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H288h9.4H512c17.7 0 32-14.3 32-32s-14.3-32-32-32H387.9L518.6 285.3c25-25 25-65.5 0-90.5L381.3 57.4c-25-25-65.5-25-90.5 0zM297.4 416H288l-105.4 0-80-80L227.3 211.3 364.7 348.7 297.4 416z"}),"EraserFA","0 0 576 512");function CF(){return E.exports.useEffect(()=>(L().draw.enable(),()=>{L().draw.disable()}),[]),oe(Mi,{gap:"gap-16",className:"justify-center",children:[_(Qn,{children:_(Ci,{size:"sm",label:_(be,{message:"Brush Color"}),value:L().draw.currentBrush.color,onChange:t=>{L().draw.setBrushColor(t)}})}),_(Qn,{children:_(kF,{})}),_(Qn,{children:_(TF,{})})]})}function TF(){const t=ue(r=>{var i,s;return(s=(i=r.config.tools)==null?void 0:i.draw)==null?void 0:s.brushSizes})||[],[e,n]=E.exports.useState(L().draw.currentBrush.width);return _(kg,{selectionMode:"single",selectedValue:e,onSelectionChange:r=>{n(r),L().draw.setBrushSize(r)},size:"sm",label:_(be,{message:"Brush Size"}),children:t.map(r=>_(ru,{value:r,children:oe("div",{className:"flex items-center",children:[_("div",{className:"flex-shrink-0 mr-8 border-[3px] rounded-full",style:{width:`${r}px`,height:`${r}px`}}),r]})},r))})}function kF(){const t=ue(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.draw)==null?void 0:d.brushTypes})||[],e=z_(),[n,r]=E.exports.useState(L().draw.currentBrush.type);return _(kg,{selectionMode:"single",selectedValue:n,onSelectionChange:i=>{r(i),L().draw.setBrushType(i)},size:"sm",label:_(be,{message:"Brush Type"}),children:t.map(i=>_(ru,{value:i,children:oe("div",{className:"flex items-center",children:[i==="EraserBrush"?_(SF,{className:"mr-8"}):_("img",{className:"flex-shrink-0 mr-8 w-24 h-24",src:EF(i,e==null?void 0:e.isDark),alt:""}),_(be,{message:i.replace(/([A-Z])/g," $1")})]})},i))})}function EF(t,e=!1){const n=t.replace("Brush","").toLowerCase();return Kt(`images/brushes/${e?"white":"black"}/${n}.png`)}function OF(){const{trans:t}=Si(),e=ue(n=>n.corners.radius);return E.exports.useEffect(()=>(M().setDirty(!0),L().corners.showPreview(),()=>L().corners.hidePreview()),[]),_("div",{className:"max-w-320 mx-auto",children:_(Ti,{minValue:1,maxValue:300,label:t({message:"Radius"}),getValueLabel:n=>`${n}px`,onChange:n=>{L().corners.updatePreview(n),M().corners.setRadius(n)},value:e})})}const N_={initial:{y:"130%",opacity:0},animate:{y:0,opacity:1},exit:{y:"130%",opacity:0,left:0,position:"absolute",overflowY:"hidden"},transition:{type:"tween",duration:.15}};function PF({activeTool:t}){const e=MF(t);return _(yt.div,{className:"relative h-full w-full text-sm bg select-none overflow-hidden",...N_,children:e})}function MF(t){switch(t){case Me.FILTER:return _(I8,{});case Me.RESIZE:return _(B8,{});case Me.CROP:return _(Z8,{});case Me.DRAW:return _(CF,{});case Me.TEXT:return _(xF,{});case Me.SHAPES:return _(nF,{});case Me.STICKERS:return _(yF,{});case Me.FRAME:return _(bF,{});case Me.CORNERS:return _(OF,{});default:return null}}function j_({className:t}){const e=ue(n=>n.activeTool);return _("nav",{className:fe("z-navbar min-h-86 flex-shrink-0 px-16 relative overflow-hidden",t),children:_(Yn,{initial:!1,children:e?_(PF,{activeTool:e},"tool-controls"):_(AF,{},"nav-items")})})}function AF(){const t=ue(e=>{var n,r;return(r=(n=e.config.ui)==null?void 0:n.nav)==null?void 0:r.items})||[];return _(yt.div,{className:"w-full h-full bg-inherit",...N_,children:_(Mi,{children:t.map(e=>_(Qn,{children:_(DF,{item:e})},e.name))})})}function DF({item:t}){const e=()=>{typeof t.action=="string"?Lf(t.action):typeof t.action=="function"&&t.action(M().editor)},n=Wk[t.name];return oe(Gn,{variant:"outline",color:"paper",className:"flex-col flex-shrink-0 w-68 h-68",radius:"rounded-2xl",onClick:e,children:[_("div",{className:"mb-1",children:_(rg,{className:"icon-md",icon:t.icon})}),_("div",{className:"mt-6 text-xs capitalize max-w-[90%] overflow-hidden overflow-ellipsis",children:n?_(be,{...n}):t.name})]})}function RF(){const t=ue(n=>n.history.items),e=ue(n=>n.history.pointer);return oe(yt.div,{...iu,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[oe("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[_(be,{message:"History"}),_(Re,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{M().togglePanel("history",!1)},children:_(Fr,{})})]}),_("div",{className:"p-10",children:t.map(n=>{const r=n.id===t[e].id,i=sr[n.name],s=i.icon&&he.createElement(i.icon,{className:"icon-sm"});return _(bt,{onClick:()=>{r||L().history.load(n)},variant:"outline",color:r?"primary":null,size:"sm",className:fe("w-full mb-8",r&&"pointer-events-none"),justify:"justify-start",startIcon:s,children:_(be,{...i.name})},n.id)})})]})}function IF(t){const{children:e,className:n,color:r,onDismiss:i,leftAdornment:s,rightAdornment:d,hideDismissButton:a=!1,size:o,showDivider:c,titleTextSize:h=o==="xs"?"text-xs":"text-sm",closeButtonSize:l=o==="xs"?"xs":"sm"}=t,{labelId:u,isDismissable:f,close:p}=E.exports.useContext(_u);return oe("div",{className:fe(n,"flex items-center justify-between gap-10 flex-shrink-0",c&&"border-b",LF(t),r||"text-main"),children:[s,_("h3",{id:u,className:fe(n,h,"font-semibold leading-5 opacity-90"),children:e}),d,f&&!a&&_(Re,{"aria-label":"Dismiss",onClick:()=>{i?i():p()},size:l,className:fe("text-muted ml-auto -mr-8",d&&"sr-only"),children:_(Fr,{})})]})}function LF({size:t,padding:e}){if(e)return e;switch(t){case"2xs":case"xs":return"px-14 py-4";case"sm":return"px-18 py-4";default:return"px-24 py-6"}}const B_=E.exports.forwardRef((t,e)=>{const{children:n,className:r,padding:i,size:s,...d}=t;return _("div",{...d,ref:e,className:fe(r,FF(t),"overflow-y-auto overflow-x-hidden text-sm flex-auto"),children:n})});function FF({size:t,padding:e}){if(e)return e;switch(t){case"xs":return"p-14";case"sm":return"p-18";default:return"px-24 py-20"}}function zF(){const t=ue(e=>e.openPanels.newImage);return _(Cu,{isOpen:t,disableInitialTransition:!0,type:"modal",isDismissable:!1,children:_(NF,{})})}function NF(){const[t,e]=E.exports.useState("default");return oe(Su,{className:"text-center max-w-max",size:"auto",children:[_(IF,{padding:"px-24 pt-24 pb-12",showDivider:!1,children:_(be,{message:"Open a photo or design to get started"})}),_(B_,{children:t==="default"?_(jF,{setActivePanel:e}):_(VF,{setActivePanel:e})})]})}function jF({setActivePanel:t}){return oe(rl,{children:[_(bt,{className:"mr-20",size:"sm",variant:"raised",color:"primary",onClick:()=>{L().import.uploadAndReplaceMainImage()},children:_(be,{message:"Open Photo"})}),_(bt,{variant:"outline",size:"sm",color:"primary",onClick:()=>{t("newCanvas")},children:_(be,{message:"Create New"})}),_(BF,{})]})}function BF(){const t=ue(e=>{var n,r;return(r=(n=e.config.ui)==null?void 0:n.openImageDialog)==null?void 0:r.sampleImages});return t!=null&&t.length?oe(rl,{children:[oe("div",{className:"relative py-20",children:[_("hr",{className:"absolute h-1 border-none bg-divider w-full top inset-0 m-auto"}),_("span",{className:"text-sm bg-paper px-6 relative",children:_(be,{message:"or use sample"})})]}),_("ul",{className:"flex items-center gap-16",children:t.map(e=>_("li",{className:"shrink-0",children:_("button",{type:"button",onClick:async()=>{typeof e.action=="function"?e.action():e.url.endsWith(".json")?(await hl(Kt(e.url)),M().togglePanel("newImage",!1)):(await L().import.openBackgroundImage(Kt(e.url)),M().togglePanel("newImage",!1))},children:_("img",{className:"w-80 h-80 rounded overflow-hidden transition-shadow hover:shadow-md",src:Kt(e.thumbnail),alt:""})})},e.url||e.thumbnail))})]}):null}function VF({setActivePanel:t}){const[e,n]=E.exports.useState({width:800,height:600,bgColor:"transparent"});return oe("form",{onSubmit:r=>{r.preventDefault();const{width:i,height:s,bgColor:d}=e;i&&s&&(M().setConfig({blankCanvasSize:{width:i,height:s}}),L().canvas.openNew(i,s,d),M().togglePanel("newImage",!1),L().history.addInitial())},children:[_(ki,{type:"number",label:_(be,{message:"Width"}),value:e.width,min:1,required:!0,className:"mb-16",onChange:r=>{n({...e,width:r.target.valueAsNumber})}}),_(ki,{type:"number",label:_(be,{message:"Height"}),value:e.height,min:1,required:!0,className:"mb-16",onChange:r=>{n({...e,height:r.target.valueAsNumber})}}),_(Ci,{onChange:r=>{n({...e,bgColor:r})},className:"mb-16",value:e.bgColor,label:_(be,{message:"Background color"})}),oe("div",{className:"text-right",children:[_(bt,{size:"sm",variant:"text",className:"mr-10",onClick:()=>{t("default")},children:_(be,{message:"Cancel"})}),_(bt,{size:"sm",type:"submit",variant:"raised",color:"primary",children:_(be,{message:"Create"})})]})]})}const $F=E.exports.forwardRef((t,e)=>{const n=_i(t),{label:r,children:i,size:s,className:d,orientation:a="horizontal",disabled:o,required:c,invalid:h,errorMessage:l,description:u}=t,f={},p=E.exports.useId(),m=t.name||p;return oe("fieldset",{"aria-describedby":u?`${p}-description`:void 0,ref:e,className:fe("text-left",d),children:[r&&_("legend",{className:n.label,...f,children:r}),_("div",{className:fe("flex",r?"mt-6":"mt-0",a==="vertical"?"flex-col gap-10":"flex-row gap-16"),children:E.exports.Children.map(i,g=>{if(E.exports.isValidElement(g))return E.exports.cloneElement(g,{name:m,size:s,invalid:g.props.invalid||h||void 0,disabled:g.props.disabled||o,required:g.props.required||c})})}),u&&!l&&_("div",{className:n.description,id:`${p}-description`,children:u}),l&&_("div",{className:n.error,children:l})]})}),Pg=E.exports.forwardRef((t,e)=>{const{children:n,autoFocus:r,size:i,invalid:s,isFirst:d,...a}=t,o=yi(e);Tg({autoFocus:r},o);const c=UF(i);return oe("label",{className:fe("inline-flex gap-8 select-none items-center whitespace-nowrap align-middle",c.label,t.disabled&&"text-disabled pointer-events-none",t.invalid&&"text-danger"),children:[_("input",{type:"radio",className:fe("focus-visible:ring outline-none","rounded-full transition-button border-2 appearance-none","border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark","before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark","before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200","checked:before:scale-[.65] checked:before:opacity-100",c.circle),ref:o,...a}),n&&_("span",{children:n})]})});function UF(t){switch(t){case"xs":return{circle:"h-12 w-12",label:"text-xs"};case"sm":return{circle:"h-16 w-16",label:"text-sm"};case"lg":return{circle:"h-24 w-24",label:"text-lg"};default:return{circle:"h-20 w-20",label:"text-base"}}}function HF(){const t=ue(e=>e.openPanels.export);return _(Cu,{isOpen:t,onOpenChange:e=>{e||M().togglePanel("export",!1)},type:"modal",children:_(WF,{})})}function WF(){const[t,e]=E.exports.useState(()=>{var n,r,i,s,d,a;return{filename:((r=(n=M().config.tools)==null?void 0:n.export)==null?void 0:r.defaultName)||"image",format:((s=(i=M().config.tools)==null?void 0:i.export)==null?void 0:s.defaultFormat)||"jpeg",quality:((a=(d=M().config.tools)==null?void 0:d.export)==null?void 0:a.defaultQuality)||.8}});return _(Su,{className:"text-center max-w-max",size:"auto",children:_(B_,{children:oe("form",{onSubmit:n=>{n.preventDefault(),L().export.save(t.filename,t.format,t.quality),M().togglePanel("export",!1)},children:[_(ki,{required:!0,size:"sm",label:_(be,{message:"Save As"}),value:t.filename,onChange:n=>{e({...t,filename:n.target.value})}}),oe($F,{size:"sm",className:"my-20","aria-label":"Image format",children:[_(Pg,{value:"jpeg",checked:t.format==="jpeg",onChange:n=>{e({...t,format:n.target.value})},children:"JPEG"}),_(Pg,{value:"png",checked:t.format==="png",onChange:n=>{e({...t,format:n.target.value})},children:"PNG"}),_(Pg,{value:"json",checked:t.format==="json",onChange:n=>{e({...t,format:n.target.value})},children:"JSON"})]}),_(Ti,{size:"sm",minValue:.1,step:.1,maxValue:1,value:t.quality,onChange:n=>{e({...t,quality:n})},formatOptions:{style:"percent"},label:_(be,{message:"Quality"})}),_(bt,{variant:"raised",color:"primary",type:"submit",className:"mt-20 w-full",size:"sm",children:_(be,{message:"Save"})})]})})})}function YF(){const t=ue(n=>n.objects.all),e=ue(n=>n.objects.active.id);return oe(yt.div,{...iu,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[oe("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[_(be,{message:"Objects"}),_(Re,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{M().togglePanel("objects",!1)},children:_(Fr,{})})]}),_("div",{className:"p-8",children:t.map(n=>{const r=n.id===e,i=n.name,s=Y5[i],d=s.icon&&he.createElement(s.icon,{className:"icon-sm"});return _(bt,{onClick:()=>{r||!n.selectable||L().objects.select(n.id)},variant:"outline",color:r?"primary":null,size:"sm",className:fe("w-full mb-8",(r||!n.selectable)&&"pointer-events-none"),justify:"justify-start",startIcon:d,children:_(be,{...s.name})},n.id)})})]})}function XF(){const t=ue(n=>n.openPanels.history),e=ue(n=>n.openPanels.objects);return oe("div",{className:"z-modal",children:[oe(Yn,{children:[t&&_(RF,{},"historyPanel"),e&&_(YF,{},"objListPanel")]}),_(zF,{}),_(HF,{})]})}/**
 * @remix-run/router v1.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mg(){return Mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mg.apply(this,arguments)}var V_;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(V_||(V_={}));function Jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $_(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function U_(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}var H_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(H_||(H_={}));function GF(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function KF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?U_(t):t;return{pathname:n?n.startsWith("/")?n:qF(n,e):e,search:ZF(r),hash:QF(i)}}function qF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ag(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Y_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=U_(t):(i=Mg({},t),Jn(!i.pathname||!i.pathname.includes("?"),Ag("?","pathname","search",i)),Jn(!i.pathname||!i.pathname.includes("#"),Ag("#","pathname","hash",i)),Jn(!i.search||!i.search.includes("#"),Ag("#","search","hash",i)));let s=t===""||i.pathname==="",d=s?"/":i.pathname,a;if(r||d==null)a=n;else{let l=e.length-1;if(d.startsWith("..")){let u=d.split("/");for(;u[0]==="..";)u.shift(),l-=1;i.pathname=u.join("/")}a=l>=0?e[l]:"/"}let o=KF(i,a),c=d&&d!=="/"&&d.endsWith("/"),h=(s||d===".")&&n.endsWith("/");return!o.pathname.endsWith("/")&&(c||h)&&(o.pathname+="/"),o}const X_=t=>t.join("/").replace(/\/\/+/g,"/"),ZF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;[...["post","put","patch","delete"]];/**
 * React Router v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dg.apply(this,arguments)}const G_=E.exports.createContext(null),Eu=E.exports.createContext(null),K_=E.exports.createContext(null),Ou=E.exports.createContext({outlet:null,matches:[],isDataRoute:!1});function JF(t,e){let{relative:n}=e===void 0?{}:e;Rg()||Jn(!1);let{basename:r,navigator:i}=E.exports.useContext(Eu),{hash:s,pathname:d,search:a}=Z_(t,{relative:n}),o=d;return r!=="/"&&(o=d==="/"?r:X_([r,d])),i.createHref({pathname:o,search:a,hash:s})}function Rg(){return E.exports.useContext(K_)!=null}function Ig(){return Rg()||Jn(!1),E.exports.useContext(K_).location}function q_(t){E.exports.useContext(Eu).static||E.exports.useLayoutEffect(t)}function ez(){let{isDataRoute:t}=E.exports.useContext(Ou);return t?oz():tz()}function tz(){Rg()||Jn(!1);let t=E.exports.useContext(G_),{basename:e,navigator:n}=E.exports.useContext(Eu),{matches:r}=E.exports.useContext(Ou),{pathname:i}=Ig(),s=JSON.stringify(W_(r).map(o=>o.pathnameBase)),d=E.exports.useRef(!1);return q_(()=>{d.current=!0}),E.exports.useCallback(function(o,c){if(c===void 0&&(c={}),!d.current)return;if(typeof o=="number"){n.go(o);return}let h=Y_(o,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:X_([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}function Z_(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=E.exports.useContext(Ou),{pathname:i}=Ig(),s=JSON.stringify(W_(r).map(d=>d.pathnameBase));return E.exports.useMemo(()=>Y_(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}var Lg;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Lg||(Lg={}));var Fg;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Fg||(Fg={}));function nz(t){let e=E.exports.useContext(G_);return e||Jn(!1),e}function rz(t){let e=E.exports.useContext(Ou);return e||Jn(!1),e}function iz(t){let e=rz(),n=e.matches[e.matches.length-1];return n.route.id||Jn(!1),n.route.id}function oz(){let{router:t}=nz(Lg.UseNavigateStable),e=iz(Fg.UseNavigateStable),n=E.exports.useRef(!1);return q_(()=>{n.current=!0}),E.exports.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Dg({fromRouteId:e},s)))},[t,e])}var Q_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Q_||(Q_={})),new Promise(()=>{});/**
 * React Router DOM v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function az(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lz(t,e){return t.button===0&&(!e||e==="_self")&&!az(t)}const cz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],uz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hz=E.exports.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:d,state:a,target:o,to:c,preventScrollReset:h}=e,l=sz(e,cz),{basename:u}=E.exports.useContext(Eu),f,p=!1;if(typeof c=="string"&&fz.test(c)&&(f=c,uz))try{let y=new URL(window.location.href),b=c.startsWith("//")?new URL(y.protocol+c):new URL(c),w=GF(b.pathname,u);b.origin===y.origin&&w!=null?c=w+b.search+b.hash:p=!0}catch{}let m=JF(c,{relative:i}),g=dz(c,{replace:d,state:a,target:o,preventScrollReset:h,relative:i});function v(y){r&&r(y),y.defaultPrevented||g(y)}return _("a",{...l,href:f||m,onClick:p||s?r:v,ref:n,target:o})});var J_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(J_||(J_={}));var eS;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eS||(eS={}));function dz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:d}=e===void 0?{}:e,a=ez(),o=Ig(),c=Z_(t,{relative:d});return E.exports.useCallback(h=>{if(lz(h,n)){h.preventDefault();let l=r!==void 0?r:$_(o)===$_(c);a(t,{replace:l,state:i,preventScrollReset:s,relative:d})}},[o,a,c,r,i,n,t,s,d])}const pz=ye(_("path",{d:"M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutlineOutlined"),gz=ye(_("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),mz=he.forwardRef((t,e)=>{let{value:n=0,minValue:r=0,maxValue:i=100,size:s="md",isIndeterminate:d=!1,className:a,position:o="relative",trackColor:c,fillColor:h="border-primary",...l}=t;n=Ca(n,r,i);const u=vz(s),f=(n-r)/(i-r),p=d_({style:"percent"});let m="";!d&&!m&&(m=p.format(f));const g={},v={};if(!d){const y=(n-r)/(i-r)*100;let b;y>0&&y<=50?(b=-180+y/50*180,g.transform=`rotate(${b}deg)`,v.transform="rotate(-180deg)"):y>50&&(b=-180+(y-50)/50*180,g.transform="rotate(0deg)",v.transform=`rotate(${b}deg)`)}return oe("div",{...l,"aria-valuenow":d?void 0:n,"aria-valuemin":r,"aria-valuemax":i,"aria-valuetext":d?void 0:m,role:"progressbar",ref:e,className:fe("progress-circle",o,u,d&&"indeterminate",a),children:[_("div",{className:fe(u,c,"border-4 rounded-full")}),oe("div",{className:fe("fills absolute w-full h-full top-0 left-0",d&&"progress-circle-fills-animate"),children:[_(tS,{circleSize:u,subMaskStyle:g,isIndeterminate:d,className:"rotate-180",fillColor:h,subMaskClassName:fe(d&&"progress-circle-fill-submask-1-animate")}),_(tS,{circleSize:u,subMaskStyle:v,isIndeterminate:d,fillColor:h,subMaskClassName:fe(d&&"progress-circle-fill-submask-2-animate")})]})]})});function tS({subMaskStyle:t,subMaskClassName:e,className:n,circleSize:r,isIndeterminate:i,fillColor:s}){return _("div",{className:fe("w-1/2 h-full origin-[100%] absolute overflow-hidden",n),children:_("div",{className:fe("w-full h-full origin-[100%] overflow-hidden rotate-180",!i&&"transition-transform duration-100",e),style:t,children:_("div",{className:fe(r,s,"rounded-full border-4")})})})}function vz(t){switch(t){case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-42 h-42";default:return t}}const yz={opacity:0,y:50,scale:.3},bz={opacity:1,y:0,scale:1},wz={opacity:0,scale:.5};function xz(){const t=Qv(e=>e.toasts);return _("div",{className:"relative pointer-events-none",children:_(Yn,{initial:!1,children:t.map(e=>_("div",{className:fe("fixed mx-auto p-20 z-toast",e.position==="bottom-center"?"left-0 right-0 bottom-0":"right-0 bottom-0"),children:oe(yt.div,{initial:e.disableEnterAnimation?void 0:yz,animate:e.disableEnterAnimation?void 0:bz,exit:e.disableExitAnimation?void 0:wz,className:fe("flex items-center gap-10 min-w-288 max-w-500 shadow-lg w-min rounded-lg pl-16 pr-6 py-6 text-sm pointer-events-auto max-h-100 bg-paper text-main bg-paper border mx-auto min-h-50"),onPointerEnter:()=>{var n;return(n=e.timer)==null?void 0:n.pause()},onPointerLeave:()=>{var n;return(n=e.timer)==null?void 0:n.resume()},role:"alert","aria-live":e.type==="danger"?"assertive":"polite",children:[e.type==="danger"&&_(pz,{className:"text-danger flex-shrink-0",size:"md"}),e.type==="loading"&&_(mz,{size:"sm",className:"flex-shrink-0",isIndeterminate:!0}),e.type==="positive"&&_(gz,{className:"text-positive flex-shrink-0",size:"md"}),_("div",{className:"overflow-hidden overflow-ellipsis w-max mr-auto","data-testid":"toast-message",children:_(ig,{value:e.message})}),e.action&&_(bt,{variant:"text",color:"primary",size:"sm",className:"flex-shrink-0",onFocus:()=>{var n;return(n=e.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=e.timer)==null?void 0:n.resume()},onClick:()=>Ki().remove(e.id),elementType:hz,to:e.action.action,children:_(ig,{value:e.action.label})}),e.type!=="loading"&&_(Re,{onFocus:()=>{var n;return(n=e.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=e.timer)==null?void 0:n.resume()},type:"button",className:"flex-shrink-0",onClick:()=>{Ki().remove(e.id)},size:"sm",children:_(Fr,{})})]})},e.id))})})}function nS(t){return Ww()?t.metaKey:t.ctrlKey}function _z(t){switch(t.key){case"z":nS(t)&&(t.preventDefault(),t.stopPropagation(),t.shiftKey?L().history.redo():L().history.undo());break;case"ArrowUp":t.preventDefault(),t.stopPropagation(),L().objects.move("up");break;case"ArrowRight":t.preventDefault(),t.stopPropagation(),L().objects.move("right");break;case"ArrowDown":t.preventDefault(),t.stopPropagation(),L().objects.move("down");break;case"ArrowLeft":t.preventDefault(),t.stopPropagation(),L().objects.move("left");break;case"Delete":t.preventDefault(),t.stopPropagation(),L().objects.delete();break;case"v":nS(t)&&(t.preventDefault(),t.stopPropagation(),Sz());break}}async function Sz(){try{const t=await navigator.clipboard.read();for(const e of t)for(const n of e.types)if(n.startsWith("image/")){const r=await e.getType(n),i=new FileReader;i.onload=s=>{var d;(d=s.target)!=null&&d.result&&L().import.addImageFromData(s.target.result)},i.readAsDataURL(r);return}}catch(t){console.error(t)}}const Cz=new Map,zg=new Map,rS={status:"inactive"};async function*Tz(t){for(const e of t.items)if(e.kind==="file")if(typeof e.webkitGetAsEntry=="function"){const n=e.webkitGetAsEntry();if(!n)continue;if(n.isFile){if(n.name===".DS_Store")continue;yield new da(e.getAsFile(),n.fullPath)}else n.isDirectory&&(yield*iS(n))}else{const n=e.getAsFile();if(!n||n.name===".DS_Store")continue;yield new da(n,e.fullPath)}}async function*iS(t){const e=t.createReader();let n;do{n=await new Promise((r,i)=>{e.readEntries(r,i)});for(const r of n)if(r.isFile){if(r.name===".DS_Store")continue;const i=await kz(r);yield new da(i,r.fullPath)}else r.isDirectory&&(yield*iS(r))}while(n.length>0)}function kz(t){return new Promise((e,n)=>t.file(e,n))}async function Ez(t){const e=[];for await(const n of t)e.push(n);return e}const Oz=400;function Pz({id:t,disabled:e,ref:n,...r}){const i=E.exports.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,s=E.exports.useRef(r);s.current=r,E.exports.useLayoutEffect(()=>(zg.set(t,{...zg.get(t),disabled:e,id:t,ref:n}),()=>{zg.delete(t)}),[t,s,e,n]);const d=u=>{var m;const f=s.current,p=f.allowDragEventsFromItself||n.current!==((m=u.ref)==null?void 0:m.current);return!!((u==null?void 0:u.type)&&p&&f.types.includes(u.type)&&(!f.acceptsDrop||f.acceptsDrop(u)))},a=u=>{var p,m;const f=Aa(u);f&&((m=(p=s.current).onDragLeave)==null||m.call(p,f))};return{droppableProps:e?{}:{onDragOver:u=>{var p,m;u.preventDefault(),u.stopPropagation();const f=Aa(u);f&&d(f)&&((m=(p=s.current).onDragOver)==null||m.call(p,f,u))},onDragEnter:u=>{var p,m;if(u.stopPropagation(),i.dragOverElements.add(u.target),i.dragOverElements.size>1)return;const f=Aa(u);f&&d(f)&&((m=(p=s.current).onDragEnter)==null||m.call(p,f),clearTimeout(i.dropActivateTimer),typeof s.current.onDropActivate=="function"&&(i.dropActivateTimer=setTimeout(()=>{var g,v;f&&((v=(g=s.current).onDropActivate)==null||v.call(g,f))},Oz)))},onDragLeave:u=>{u.stopPropagation(),i.dragOverElements.delete(u.target);for(const p of i.dragOverElements)u.currentTarget.contains(p)||i.dragOverElements.delete(p);if(i.dragOverElements.size>0)return;const f=Aa(u);f&&d(f)&&(a(u),clearTimeout(i.dropActivateTimer))},onDrop:async u=>{var p,m,g,v;u.preventDefault(),u.stopPropagation(),i.dragOverElements.clear(),a(u),clearTimeout(i.dropActivateTimer);const f=Aa(u);f&&((m=(p=s.current).onDragLeave)==null||m.call(p,f),d(f)&&((v=(g=s.current).onDrop)==null||v.call(g,f)))}}}}function Aa(t){if(rS.dragTargetId!=null)return Cz.get(rS.dragTargetId);if(t.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Ez(Tz(t.dataTransfer))}}function Mz({children:t}){const e=ue(r=>r.bootstrapData),n=E.exports.useMemo(()=>({data:e,setBootstrapData:()=>{},mergeBootstrapData:()=>{},invalidateBootstrapData:()=>{}}),[e]);return _(Ux.Provider,{value:n,children:t})}function Az(){var p,m,g,v;const t=(p=ue(y=>{var b;return(b=y.config.ui)==null?void 0:b.visible}))!=null?p:!0,e=(m=ue(y=>{var b,w;return(w=(b=y.config.ui)==null?void 0:b.nav)==null?void 0:w.position}))!=null?m:"bottom",n=(g=ue(y=>{var b,w;return(w=(b=y.config.ui)==null?void 0:b.menubar)==null?void 0:w.position}))!=null?g:"top",r=(v=ue(y=>{var b;return(b=y.config.ui)==null?void 0:b.allowEditorClose}))!=null?v:!0,i=E.exports.useRef(null),s=E.exports.useRef(null),{isModal:d,isMobile:a}=fu(),o=E.exports.useCallback(async y=>{var w,x,S;if(M().activeTool||M().dirty||y.type!=="nativeFile")return;const b=await y.getData();!L().import.fileIsValid(b[0])||((S=(x=(w=M().config.tools)==null?void 0:w.import)==null?void 0:x.openDroppedImageAsBackground)!=null&&S?await L().import.openBackgroundImage(b[0]):await L().import.openUploadedFile(b[0]))},[]),{droppableProps:c}=Pz({id:"photalius-root",ref:s,types:["nativeFile"],onDrop:o});E.exports.useEffect(()=>{var w,x;M().fabric||(ue.setState({canvasRef:i}),mD(i.current),(w=M().config.ui)!=null&&w.defaultTool&&M().setActiveTool((x=M().config.ui)==null?void 0:x.defaultTool,null),L().canvas.loadInitialContent().then(()=>{var S,C;(C=(S=M().config).onLoad)==null||C.call(S,M().editor)}));const y=ux(s,()=>{M().setStageSize(fx(s.current))}),b=ux(i,()=>{M().setCanvasSize(fx(i.current))});return()=>{y(),b()}},[s]);const h={visible:{opacity:1,scale:1,display:"flex"},hidden:{opacity:0,transitionEnd:{display:"none"}}},l=fe("photalius-root flex flex-col overflow-hidden bg-background text-main no-tap-highlight w-full h-full",{relative:!d,"fixed inset-0 w-full h-full z-20":d,"shadow-lg border rounded-md m-auto max-h-[calc(100vh-90px)] max-w-[calc(100vw-90px)]":d&&!a});return _(YM,{features:XM,strict:!0,children:oe(Mz,{children:[d&&t&&!a&&r&&_(Re,{className:"z-20 fixed right-2 top-2 text-white",size:"lg",onClick:()=>{M().editor.close()},children:_(Fr,{})}),d&&t&&_(eg,{position:"fixed",disableInitialTransition:!0}),oe(yt.div,{initial:!1,variants:h,animate:t?"visible":"hidden",className:l,children:[n==="top"&&_(Gx,{}),e==="top"&&_(j_,{className:"pt-14"}),oe("main",{className:"relative flex-auto my-20 overflow-hidden outline-none",tabIndex:-1,...Xn(c,{onKeyDownCapture:_z}),ref:s,children:[_(oI,{}),_(DL,{ref:i})]}),_(O8,{}),e==="bottom"&&_(j_,{}),n==="bottom"&&_(Gx,{}),_(XF,{}),_(xz,{})]})]})})}(function(){fabric.Object.ENLIVEN_PROPS.push("eraser");var t=fabric.Object.prototype._drawClipPath,e=fabric.Object.prototype.needsItsOwnCache,n=fabric.Object.prototype.toObject,r=fabric.Object.prototype.getSvgCommons,i=fabric.Object.prototype._createBaseClipPathSVGMarkup,s=fabric.Object.prototype._createBaseSVGMarkup;fabric.Object.prototype.cacheProperties.push("eraser"),fabric.Object.prototype.stateProperties.push("eraser"),fabric.util.object.extend(fabric.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return e.call(this)||!!this.eraser},_drawClipPath:function(o,c){if(t.call(this,o,c),this.eraser){var h=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:h.x,height:h.y}),t.call(this,o,this.eraser)}},toObject:function(o){var c=n.call(this,["erasable"].concat(o));return this.eraser&&!this.eraser.excludeFromExport&&(c.eraser=this.eraser.toObject(o)),c},getSvgCommons:function(){return r.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(o){return this.eraser?(this.eraser.clipPathId="MASK_"+fabric.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(o),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(o,c){return[this._createEraserSVGMarkup(c&&c.reviver),i.call(this,o,c)].join("")},_createBaseSVGMarkup:function(o,c){return[this._createEraserSVGMarkup(c&&c.reviver),s.call(this,o,c)].join("")}});var d=fabric.Group.prototype._restoreObjectsState;fabric.util.object.extend(fabric.Group.prototype,{_addEraserPathToObjects:function(o){this._objects.forEach(function(c){fabric.EraserBrush.prototype._addPathToObjectEraser.call(fabric.EraserBrush.prototype,c,o)})},applyEraserToObjects:function(){var o=this,c=this.eraser;if(c){delete this.eraser;var h=o.calcTransformMatrix();c.clone(function(l){var u=o.clipPath;l.getObjects("path").forEach(function(f){var p=fabric.util.multiplyTransformMatrices(h,f.calcTransformMatrix());fabric.util.applyTransformToObject(f,p),u?u.clone(function(m){var g=fabric.EraserBrush.prototype.applyClipPathToPath.call(fabric.EraserBrush.prototype,f,m,h);o._addEraserPathToObjects(g)},["absolutePositioned","inverted"]):o._addEraserPathToObjects(f)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),d.call(this)}}),fabric.Eraser=fabric.util.createClass(fabric.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(o){o.save(),o.fillStyle="black",o.fillRect(-this.width/2,-this.height/2,this.width,this.height),o.restore(),this.callSuper("drawObject",o)},_getBounds:function(){},_toSVG:function(o){var c=["<g ","COMMON_PARTS",` >
`],h=-this.width/2,l=-this.height/2,u=["<rect ",'fill="white" ','x="',h,'" y="',l,'" width="',this.width,'" height="',this.height,`" />
`].join("");c.push("		",u);for(var f=0,p=this._objects.length;f<p;f++)c.push("		",this._objects[f].toSVG(o));return c.push(`</g>
`),c}}),fabric.Eraser.fromObject=function(o,c){var h=o.objects;fabric.util.enlivenObjects(h,function(l){var u=fabric.util.object.clone(o,!0);delete u.objects,fabric.util.enlivenObjectEnlivables(o,u,function(){c&&c(new fabric.Eraser(l,u,!0))})})};var a=fabric.Canvas.prototype._renderOverlay;fabric.util.object.extend(fabric.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(o){a.call(this,o),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),fabric.EraserBrush=fabric.util.createClass(fabric.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(o){return o.erasable!==!1},_prepareCollectionTraversal:function(o,c,h){o.forEachObject(function(l){l.forEachObject&&l.erasable==="deep"?this._prepareCollectionTraversal(l,c,h):!this.inverted&&l.erasable&&l.visible?(l.visible=!1,o.dirty=!0,h.visibility.push(l),h.collection.push(o)):this.inverted&&l.visible&&(l.erasable&&l.eraser?(l.eraser.inverted=!0,l.dirty=!0,o.dirty=!0,h.eraser.push(l),h.collection.push(o)):(l.visible=!1,o.dirty=!0,h.visibility.push(l),h.collection.push(o)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=fabric.util.createCanvasElement());var o=this._patternCanvas;o.width=this.canvas.width,o.height=this.canvas.height;var c=o.getContext("2d");if(this.canvas._isRetinaScaling()){var h=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(h,o,c)}var l=this.canvas.backgroundImage,u=l&&this._isErasable(l),f=this.canvas.overlayImage,p=f&&this._isErasable(f);if(!this.inverted&&(l&&!u||!!this.canvas.backgroundColor))u&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(c),u&&(this.canvas.backgroundImage=l);else if(this.inverted&&l&&u){var m=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(c),this.canvas.backgroundColor=m}c.save(),c.transform.apply(c,this.canvas.viewportTransform);var g={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,c,g),this.canvas._renderObjects(c,this.canvas._objects),g.visibility.forEach(function(v){v.visible=!0}),g.eraser.forEach(function(v){v.eraser.inverted=!1,v.dirty=!0}),g.collection.forEach(function(v){v.dirty=!0}),c.restore(),!this.inverted&&(f&&!p||!!this.canvas.overlayColor))p&&(this.canvas.overlayImage=void 0),a.call(this.canvas,c),p&&(this.canvas.overlayImage=f);else if(this.inverted&&f&&p){var m=this.canvas.overlayColor;this.canvas.overlayColor=void 0,a.call(this.canvas,c),this.canvas.overlayColor=m}},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle="black"},_saveAndTransform:function(o){this.callSuper("_saveAndTransform",o),this._setBrushStyles(o),o.globalCompositeOperation=o===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(o,c){!this.canvas._isMainEvent(c.e)||(this._prepareForDrawing(o),this._captureDrawingPath(o),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var o;this.inverted||(o=this.canvas.getContext(),this.callSuper("_render",o)),o=this.canvas.contextTop,this.canvas.clearContext(o),this.callSuper("_render",o),o.save();var c=this.canvas.getRetinaScaling(),h=1/c;o.scale(h,h),o.globalCompositeOperation="source-in",o.drawImage(this._patternCanvas,0,0),o.restore()},createPath:function(o){var c=this.callSuper("createPath",o);return c.globalCompositeOperation=this.inverted?"source-over":"destination-out",c.stroke=this.inverted?"white":"black",c},applyClipPathToPath:function(o,c,h){var l=fabric.util.invertTransform(o.calcTransformMatrix()),u=c.calcTransformMatrix(),f=c.absolutePositioned?l:fabric.util.multiplyTransformMatrices(l,h);return c.absolutePositioned=!1,fabric.util.applyTransformToObject(c,fabric.util.multiplyTransformMatrices(f,u)),o.clipPath=o.clipPath?fabric.util.mergeClipPaths(c,o.clipPath):c,o},clonePathWithClipPath:function(o,c,h){var l=c.calcTransformMatrix(),u=c.clipPath,f=this;o.clone(function(p){u.clone(function(m){h(f.applyClipPathToPath(p,m,l))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(o,c){var h=this;if(o.forEachObject&&o.erasable==="deep"){var l=o._objects.filter(function(f){return f.erasable});l.length>0&&o.clipPath?this.clonePathWithClipPath(c,o,function(f){l.forEach(function(p){h._addPathToObjectEraser(p,f)})}):l.length>0&&l.forEach(function(f){h._addPathToObjectEraser(f,c)});return}var u=o.eraser;u||(u=new fabric.Eraser,o.eraser=u),c.clone(function(f){var p=fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(o.calcTransformMatrix()),f.calcTransformMatrix());fabric.util.applyTransformToObject(f,p),u.addWithUpdate(f),o.set("dirty",!0),o.fire("erasing:end",{path:f}),o.group&&Array.isArray(h.__subTargets)&&h.__subTargets.push(o)})},applyEraserToCanvas:function(o){var c=this.canvas,h={};return["backgroundImage","overlayImage"].forEach(function(l){var u=c[l];u&&u.erasable&&(this._addPathToObjectEraser(u,o),h[l]=u)},this),h},_finalizeAndAddPath:function(){var o=this.canvas.contextTop,c=this.canvas;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),c.clearContext(c.contextTop),this._isErasing=!1;var h=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!h||this._isEmptySVGPath(h)){c.fire("erasing:end"),c.requestRenderAll();return}var l=this.createPath(h);l.setCoords(),c.fire("before:path:created",{path:l});var u=this.applyEraserToCanvas(l),f=this;this.__subTargets=[];var p=[];c.forEachObject(function(m){m.erasable&&m.intersectsWithObject(l,!0,!0)&&(f._addPathToObjectEraser(m,l),p.push(m))}),c.fire("erasing:end",{path:l,targets:p,subTargets:this.__subTargets,drawables:u}),delete this.__subTargets,c.requestRenderAll(),this._resetShadow(),c.fire("path:created",{path:l})}})})(),Fu.enableBoundaryChecking(!1);const Ng=class{constructor(e){Ce(this,"tools",{});Ce(this,"fabric",null);if(e.sentryDsn&&vk({dsn:e.sentryDsn}),CS(kE),!e.selector)throw new Error('Photalius required "selector" option.');const n=document.querySelector(e.selector);if(!n)return;n.classList.add("pi"),SE(n),this.setConfig(e),ue.setState({editor:this}),ob(n).render(_(he.StrictMode,{children:_(Az,{})}))}get state(){return M()}get defaultConfig(){return Ng.defaultConfig}open(e={}){return new Promise(async n=>{var r;Object.keys(e).length?await this.resetEditor({...Mv(e,{ui:{visible:!0},image:e.image||M().config.image,state:e.state||M().config.state,blankCanvasSize:e.blankCanvasSize||M().config.blankCanvasSize})}):(r=M().config.ui)!=null&&r.visible||await M().setConfig({ui:{visible:!0}}),n()})}close(){var e,n,r;!((e=M().config.ui)!=null&&e.visible)||(this.setConfig({ui:{visible:!1}}),(r=(n=M().config).onClose)==null||r.call(n))}setConfig(e){M().setConfig(e)}uploadAndAddImage(){return L().import.uploadAndAddImage()}uploadAndReplaceMainImage(){return L().import.uploadAndReplaceMainImage()}uploadAndOpenStateFile(){return L().import.uploadAndOpenStateFile()}newCanvas(e,n,r){return L().canvas.openNew(e,n,r)}getState(e){return JSON.stringify(dl(e))}setState(e){return L().import.loadState(e)}async setStateFromUrl(e){const n=await hl(e);return L().import.loadState(n)}openTool(e){Lf(e)}applyChanges(){M().applyChanges()}cancelChanges(){M().cancelChanges()}async resetEditor(e){await If(e),await L().canvas.loadInitialContent()}togglePanel(e,n){e==="objects"&&M().togglePanel("history",!1),e==="history"&&M().togglePanel("objects",!1),M().togglePanel(e,n)}on(e,n){var r;(r=this.fabric)==null||r.on(e,n)}isDirty(){return M().dirty}get(e){return this.tools[e]}notify(e){return qi(e)}static init(e){return new Promise(n=>{const r=e.onLoad;e.onLoad=i=>{r==null||r(i),n(i)},new this(e)})}};let Da=Ng;return Ce(Da,"defaultConfig",uv),Ce(Da,"version",Xk),Da});
//# sourceMappingURL=photalius.umd.js.map
