var Cm = Object.defineProperty;
var Tm = (t, e, i) => e in t ? Cm(t, e, { enumerable: !0, configurable: !0, writable: !0, value: i }) : t[e] = i;
var Se = (t, e, i) => (Tm(t, typeof e != "symbol" ? e + "" : e, i), i);
import * as _e from "react";
import ue, { forwardRef as qe, useDebugValue as Em, createContext as fi, useLayoutEffect as pn, useEffect as Te, useContext as Fe, useRef as ge, useInsertionEffect as qh, useCallback as Oe, useMemo as Ke, createElement as km, useState as Me, useId as Ot, cloneElement as ct, Children as Pi, isValidElement as Ht, memo as Om, Fragment as Rt } from "react";
import * as Pm from "react-dom";
import Am, { createPortal as Za } from "react-dom";
function Mm(t, e) {
  e === void 0 && (e = {});
  var i = e.insertAt;
  if (!(!t || typeof document > "u")) {
    var r = document.head || document.getElementsByTagName("head")[0], s = document.createElement("style");
    s.type = "text/css", i === "top" && r.firstChild ? r.insertBefore(s, r.firstChild) : r.appendChild(s), s.styleSheet ? s.styleSheet.cssText = t : s.appendChild(document.createTextNode(t));
  }
}
function Ja(t, e) {
  return e === void 0 && (e = 15), +parseFloat(Number(t).toPrecision(e));
}
function Ft(t) {
  var e = t.toString().split(/[eE]/), i = (e[0].split(".")[1] || "").length - +(e[1] || 0);
  return i > 0 ? i : 0;
}
function Kr(t) {
  if (t.toString().indexOf("e") === -1)
    return Number(t.toString().replace(".", ""));
  var e = Ft(t);
  return e > 0 ? Ja(Number(t) * Math.pow(10, e)) : Number(t);
}
function Wo(t) {
  Jh && (t > Number.MAX_SAFE_INTEGER || t < Number.MIN_SAFE_INTEGER) && console.warn(t + " is beyond boundary when transfer to integer, the results may not be accurate");
}
function Os(t) {
  return function() {
    for (var e = [], i = 0; i < arguments.length; i++)
      e[i] = arguments[i];
    var r = e[0], s = e.slice(1);
    return s.reduce(function(f, g) {
      return t(f, g);
    }, r);
  };
}
var oi = Os(function(t, e) {
  var i = Kr(t), r = Kr(e), s = Ft(t) + Ft(e), f = i * r;
  return Wo(f), f / Math.pow(10, s);
}), Dm = Os(function(t, e) {
  var i = Math.pow(10, Math.max(Ft(t), Ft(e)));
  return (oi(t, i) + oi(e, i)) / i;
}), Im = Os(function(t, e) {
  var i = Math.pow(10, Math.max(Ft(t), Ft(e)));
  return (oi(t, i) - oi(e, i)) / i;
}), Zh = Os(function(t, e) {
  var i = Kr(t), r = Kr(e);
  return Wo(i), Wo(r), oi(i / r, Ja(Math.pow(10, Ft(e) - Ft(t))));
});
function Rm(t, e) {
  var i = Math.pow(10, e), r = Zh(Math.round(Math.abs(oi(t, i))), i);
  return t < 0 && r !== 0 && (r = oi(r, -1)), r;
}
var Jh = !0;
function Lm(t) {
  t === void 0 && (t = !0), Jh = t;
}
var Yo = {
  strip: Ja,
  plus: Dm,
  minus: Im,
  times: oi,
  divide: Zh,
  round: Rm,
  digitLength: Ft,
  float2Fixed: Kr,
  enableBoundaryChecking: Lm
};
const Qh = Object.prototype.toString;
function ef(t) {
  switch (Qh.call(t)) {
    case "[object Error]":
    case "[object Exception]":
    case "[object DOMException]":
      return !0;
    default:
      return _r(t, Error);
  }
}
function xr(t, e) {
  return Qh.call(t) === `[object ${e}]`;
}
function tf(t) {
  return xr(t, "ErrorEvent");
}
function fl(t) {
  return xr(t, "DOMError");
}
function Fm(t) {
  return xr(t, "DOMException");
}
function Ai(t) {
  return xr(t, "String");
}
function rf(t) {
  return t === null || typeof t != "object" && typeof t != "function";
}
function hr(t) {
  return xr(t, "Object");
}
function Qa(t) {
  return typeof Event < "u" && _r(t, Event);
}
function zm(t) {
  return typeof Element < "u" && _r(t, Element);
}
function Bm(t) {
  return xr(t, "RegExp");
}
function ec(t) {
  return Boolean(t && t.then && typeof t.then == "function");
}
function jm(t) {
  return hr(t) && "nativeEvent" in t && "preventDefault" in t && "stopPropagation" in t;
}
function Nm(t) {
  return typeof t == "number" && t !== t;
}
function _r(t, e) {
  try {
    return t instanceof e;
  } catch {
    return !1;
  }
}
function An(t) {
  return t && t.Math == Math ? t : void 0;
}
const xt = typeof globalThis == "object" && An(globalThis) || typeof window == "object" && An(window) || typeof self == "object" && An(self) || typeof global == "object" && An(global) || function() {
  return this;
}() || {};
function gn() {
  return xt;
}
function tc(t, e, i) {
  const r = i || xt, s = r.__SENTRY__ = r.__SENTRY__ || {};
  return s[t] || (s[t] = e());
}
const Vm = gn(), $m = 80;
function Go(t, e = {}) {
  try {
    let i = t;
    const r = 5, s = [];
    let f = 0, g = 0;
    const l = " > ", n = l.length;
    let a;
    const h = Array.isArray(e) ? e : e.keyAttrs, o = !Array.isArray(e) && e.maxStringLength || $m;
    for (; i && f++ < r && (a = Hm(i, h), !(a === "html" || f > 1 && g + s.length * n + a.length >= o)); )
      s.push(a), g += a.length, i = i.parentNode;
    return s.reverse().join(l);
  } catch {
    return "<unknown>";
  }
}
function Hm(t, e) {
  const i = t, r = [];
  let s, f, g, l, n;
  if (!i || !i.tagName)
    return "";
  r.push(i.tagName.toLowerCase());
  const a = e && e.length ? e.filter((o) => i.getAttribute(o)).map((o) => [o, i.getAttribute(o)]) : null;
  if (a && a.length)
    a.forEach((o) => {
      r.push(`[${o[0]}="${o[1]}"]`);
    });
  else if (i.id && r.push(`#${i.id}`), s = i.className, s && Ai(s))
    for (f = s.split(/\s+/), n = 0; n < f.length; n++)
      r.push(`.${f[n]}`);
  const h = ["aria-label", "type", "name", "title", "alt"];
  for (n = 0; n < h.length; n++)
    g = h[n], l = i.getAttribute(g), l && r.push(`[${g}="${l}"]`);
  return r.join("");
}
function Um() {
  try {
    return Vm.document.location.href;
  } catch {
    return "";
  }
}
class Je extends Error {
  constructor(e, i = "warn") {
    super(e), this.message = e, this.name = new.target.prototype.constructor.name, Object.setPrototypeOf(this, new.target.prototype), this.logLevel = i;
  }
}
const Wm = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;
function Ym(t) {
  return t === "http" || t === "https";
}
function Ps(t, e = !1) {
  const { host: i, path: r, pass: s, port: f, projectId: g, protocol: l, publicKey: n } = t;
  return `${l}://${n}${e && s ? `:${s}` : ""}@${i}${f ? `:${f}` : ""}/${r && `${r}/`}${g}`;
}
function Gm(t) {
  const e = Wm.exec(t);
  if (!e)
    throw new Je(`Invalid Sentry Dsn: ${t}`);
  const [i, r, s = "", f, g = "", l] = e.slice(1);
  let n = "", a = l;
  const h = a.split("/");
  if (h.length > 1 && (n = h.slice(0, -1).join("/"), a = h.pop()), a) {
    const o = a.match(/^\d+/);
    o && (a = o[0]);
  }
  return nf({ host: f, pass: s, path: n, projectId: a, port: g, protocol: i, publicKey: r });
}
function nf(t) {
  return {
    protocol: t.protocol,
    publicKey: t.publicKey || "",
    pass: t.pass || "",
    host: t.host,
    port: t.port || "",
    path: t.path || "",
    projectId: t.projectId
  };
}
function Xm(t) {
  if (!(typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__))
    return;
  const { port: e, projectId: i, protocol: r } = t;
  if (["protocol", "publicKey", "host", "projectId"].forEach((f) => {
    if (!t[f])
      throw new Je(`Invalid Sentry Dsn: ${f} missing`);
  }), !i.match(/^\d+$/))
    throw new Je(`Invalid Sentry Dsn: Invalid projectId ${i}`);
  if (!Ym(r))
    throw new Je(`Invalid Sentry Dsn: Invalid protocol ${r}`);
  if (e && isNaN(parseInt(e, 10)))
    throw new Je(`Invalid Sentry Dsn: Invalid port ${e}`);
  return !0;
}
function Km(t) {
  const e = typeof t == "string" ? Gm(t) : nf(t);
  return Xm(e), e;
}
const qm = "Sentry Logger ", Qn = ["debug", "info", "warn", "error", "log", "assert", "trace"];
function sf(t) {
  if (!("console" in xt))
    return t();
  const e = xt.console, i = {};
  Qn.forEach((r) => {
    const s = e[r] && e[r].__sentry_original__;
    r in e && s && (i[r] = e[r], e[r] = s);
  });
  try {
    return t();
  } finally {
    Object.keys(i).forEach((r) => {
      e[r] = i[r];
    });
  }
}
function dl() {
  let t = !1;
  const e = {
    enable: () => {
      t = !0;
    },
    disable: () => {
      t = !1;
    }
  };
  return typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__ ? Qn.forEach((i) => {
    e[i] = (...r) => {
      t && sf(() => {
        xt.console[i](`${qm}[${i}]:`, ...r);
      });
    };
  }) : Qn.forEach((i) => {
    e[i] = () => {
    };
  }), e;
}
let Ce;
typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__ ? Ce = tc("logger", dl) : Ce = dl();
function Vr(t, e = 0) {
  return typeof t != "string" || e === 0 || t.length <= e ? t : `${t.slice(0, e)}...`;
}
function pl(t, e) {
  if (!Array.isArray(t))
    return "";
  const i = [];
  for (let r = 0; r < t.length; r++) {
    const s = t[r];
    try {
      i.push(String(s));
    } catch {
      i.push("[value cannot be serialized]");
    }
  }
  return i.join(e);
}
function Zm(t, e, i = !1) {
  return Ai(t) ? Bm(e) ? e.test(t) : Ai(e) ? i ? t === e : t.includes(e) : !1 : !1;
}
function As(t, e = [], i = !1) {
  return e.some((r) => Zm(t, r, i));
}
function Ge(t, e, i) {
  if (!(e in t))
    return;
  const r = t[e], s = i(r);
  if (typeof s == "function")
    try {
      of(s, r);
    } catch {
    }
  t[e] = s;
}
function ic(t, e, i) {
  Object.defineProperty(t, e, {
    value: i,
    writable: !0,
    configurable: !0
  });
}
function of(t, e) {
  const i = e.prototype || {};
  t.prototype = e.prototype = i, ic(t, "__sentry_original__", e);
}
function rc(t) {
  return t.__sentry_original__;
}
function Jm(t) {
  return Object.keys(t).map((e) => `${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&");
}
function af(t) {
  if (ef(t))
    return {
      message: t.message,
      name: t.name,
      stack: t.stack,
      ...ml(t)
    };
  if (Qa(t)) {
    const e = {
      type: t.type,
      target: gl(t.target),
      currentTarget: gl(t.currentTarget),
      ...ml(t)
    };
    return typeof CustomEvent < "u" && _r(t, CustomEvent) && (e.detail = t.detail), e;
  } else
    return t;
}
function gl(t) {
  try {
    return zm(t) ? Go(t) : Object.prototype.toString.call(t);
  } catch {
    return "<unknown>";
  }
}
function ml(t) {
  if (typeof t == "object" && t !== null) {
    const e = {};
    for (const i in t)
      Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    return e;
  } else
    return {};
}
function Qm(t, e = 40) {
  const i = Object.keys(af(t));
  if (i.sort(), !i.length)
    return "[object has no keys]";
  if (i[0].length >= e)
    return Vr(i[0], e);
  for (let r = i.length; r > 0; r--) {
    const s = i.slice(0, r).join(", ");
    if (!(s.length > e))
      return r === i.length ? s : Vr(s, e);
  }
  return "";
}
function nc(t) {
  return Xo(t, /* @__PURE__ */ new Map());
}
function Xo(t, e) {
  if (hr(t)) {
    const i = e.get(t);
    if (i !== void 0)
      return i;
    const r = {};
    e.set(t, r);
    for (const s of Object.keys(t))
      typeof t[s] < "u" && (r[s] = Xo(t[s], e));
    return r;
  }
  if (Array.isArray(t)) {
    const i = e.get(t);
    if (i !== void 0)
      return i;
    const r = [];
    return e.set(t, r), t.forEach((s) => {
      r.push(Xo(s, e));
    }), r;
  }
  return t;
}
const cf = 50, vl = /\(error: (.*)\)/;
function lf(...t) {
  const e = t.sort((i, r) => i[0] - r[0]).map((i) => i[1]);
  return (i, r = 0) => {
    const s = [], f = i.split(`
`);
    for (let g = r; g < f.length; g++) {
      const l = f[g];
      if (l.length > 1024)
        continue;
      const n = vl.test(l) ? l.replace(vl, "$1") : l;
      if (!n.match(/\S*Error: /)) {
        for (const a of e) {
          const h = a(n);
          if (h) {
            s.push(h);
            break;
          }
        }
        if (s.length >= cf)
          break;
      }
    }
    return tv(s);
  };
}
function ev(t) {
  return Array.isArray(t) ? lf(...t) : t;
}
function tv(t) {
  if (!t.length)
    return [];
  const e = t.slice(0, cf), i = e[e.length - 1].function;
  i && /sentryWrapped/.test(i) && e.pop(), e.reverse();
  const r = e[e.length - 1].function;
  return r && /captureMessage|captureException/.test(r) && e.pop(), e.map((s) => ({
    ...s,
    filename: s.filename || e[e.length - 1].filename,
    function: s.function || "?"
  }));
}
const fo = "<anonymous>";
function ai(t) {
  try {
    return !t || typeof t != "function" ? fo : t.name || fo;
  } catch {
    return fo;
  }
}
const Ko = gn();
function uf() {
  if (!("fetch" in Ko))
    return !1;
  try {
    return new Headers(), new Request("http://www.example.com"), new Response(), !0;
  } catch {
    return !1;
  }
}
function qo(t) {
  return t && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString());
}
function iv() {
  if (!uf())
    return !1;
  if (qo(Ko.fetch))
    return !0;
  let t = !1;
  const e = Ko.document;
  if (e && typeof e.createElement == "function")
    try {
      const i = e.createElement("iframe");
      i.hidden = !0, e.head.appendChild(i), i.contentWindow && i.contentWindow.fetch && (t = qo(i.contentWindow.fetch)), e.head.removeChild(i);
    } catch (i) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", i);
    }
  return t;
}
const Mn = gn();
function rv() {
  const t = Mn.chrome, e = t && t.app && t.app.runtime, i = "history" in Mn && !!Mn.history.pushState && !!Mn.history.replaceState;
  return !e && i;
}
const Le = gn(), Fr = "__sentry_xhr_v2__", $r = {}, bl = {};
function nv(t) {
  if (!bl[t])
    switch (bl[t] = !0, t) {
      case "console":
        sv();
        break;
      case "dom":
        dv();
        break;
      case "xhr":
        cv();
        break;
      case "fetch":
        ov();
        break;
      case "history":
        lv();
        break;
      case "error":
        pv();
        break;
      case "unhandledrejection":
        gv();
        break;
      default:
        (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("unknown instrumentation type:", t);
        return;
    }
}
function qt(t, e) {
  $r[t] = $r[t] || [], $r[t].push(e), nv(t);
}
function Tt(t, e) {
  if (!(!t || !$r[t]))
    for (const i of $r[t] || [])
      try {
        i(e);
      } catch (r) {
        (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error(
          `Error while triggering instrumentation handler.
Type: ${t}
Name: ${ai(i)}
Error:`,
          r
        );
      }
}
function sv() {
  "console" in Le && Qn.forEach(function(t) {
    t in Le.console && Ge(Le.console, t, function(e) {
      return function(...i) {
        Tt("console", { args: i, level: t }), e && e.apply(Le.console, i);
      };
    });
  });
}
function ov() {
  !iv() || Ge(Le, "fetch", function(t) {
    return function(...e) {
      const { method: i, url: r } = av(e), s = {
        args: e,
        fetchData: {
          method: i,
          url: r
        },
        startTimestamp: Date.now()
      };
      return Tt("fetch", {
        ...s
      }), t.apply(Le, e).then(
        (f) => (Tt("fetch", {
          ...s,
          endTimestamp: Date.now(),
          response: f
        }), f),
        (f) => {
          throw Tt("fetch", {
            ...s,
            endTimestamp: Date.now(),
            error: f
          }), f;
        }
      );
    };
  });
}
function Zo(t, e) {
  return !!t && typeof t == "object" && !!t[e];
}
function yl(t) {
  return typeof t == "string" ? t : t ? Zo(t, "url") ? t.url : t.toString ? t.toString() : "" : "";
}
function av(t) {
  if (t.length === 0)
    return { method: "GET", url: "" };
  if (t.length === 2) {
    const [i, r] = t;
    return {
      url: yl(i),
      method: Zo(r, "method") ? String(r.method).toUpperCase() : "GET"
    };
  }
  const e = t[0];
  return {
    url: yl(e),
    method: Zo(e, "method") ? String(e.method).toUpperCase() : "GET"
  };
}
function cv() {
  if (!("XMLHttpRequest" in Le))
    return;
  const t = XMLHttpRequest.prototype;
  Ge(t, "open", function(e) {
    return function(...i) {
      const r = i[1], s = this[Fr] = {
        method: Ai(i[0]) ? i[0].toUpperCase() : i[0],
        url: i[1],
        request_headers: {}
      };
      Ai(r) && s.method === "POST" && r.match(/sentry_key/) && (this.__sentry_own_request__ = !0);
      const f = () => {
        const g = this[Fr];
        if (!!g && this.readyState === 4) {
          try {
            g.status_code = this.status;
          } catch {
          }
          Tt("xhr", {
            args: i,
            endTimestamp: Date.now(),
            startTimestamp: Date.now(),
            xhr: this
          });
        }
      };
      return "onreadystatechange" in this && typeof this.onreadystatechange == "function" ? Ge(this, "onreadystatechange", function(g) {
        return function(...l) {
          return f(), g.apply(this, l);
        };
      }) : this.addEventListener("readystatechange", f), Ge(this, "setRequestHeader", function(g) {
        return function(...l) {
          const [n, a] = l, h = this[Fr];
          return h && (h.request_headers[n.toLowerCase()] = a), g.apply(this, l);
        };
      }), e.apply(this, i);
    };
  }), Ge(t, "send", function(e) {
    return function(...i) {
      const r = this[Fr];
      return r && i[0] !== void 0 && (r.body = i[0]), Tt("xhr", {
        args: i,
        startTimestamp: Date.now(),
        xhr: this
      }), e.apply(this, i);
    };
  });
}
let Dn;
function lv() {
  if (!rv())
    return;
  const t = Le.onpopstate;
  Le.onpopstate = function(...i) {
    const r = Le.location.href, s = Dn;
    if (Dn = r, Tt("history", {
      from: s,
      to: r
    }), t)
      try {
        return t.apply(this, i);
      } catch {
      }
  };
  function e(i) {
    return function(...r) {
      const s = r.length > 2 ? r[2] : void 0;
      if (s) {
        const f = Dn, g = String(s);
        Dn = g, Tt("history", {
          from: f,
          to: g
        });
      }
      return i.apply(this, r);
    };
  }
  Ge(Le.history, "pushState", e), Ge(Le.history, "replaceState", e);
}
const uv = 1e3;
let In, Rn;
function hv(t, e) {
  if (!t || t.type !== e.type)
    return !0;
  try {
    if (t.target !== e.target)
      return !0;
  } catch {
  }
  return !1;
}
function fv(t) {
  if (t.type !== "keypress")
    return !1;
  try {
    const e = t.target;
    if (!e || !e.tagName)
      return !0;
    if (e.tagName === "INPUT" || e.tagName === "TEXTAREA" || e.isContentEditable)
      return !1;
  } catch {
  }
  return !0;
}
function wl(t, e = !1) {
  return (i) => {
    if (!i || Rn === i || fv(i))
      return;
    const r = i.type === "keypress" ? "input" : i.type;
    In === void 0 ? (t({
      event: i,
      name: r,
      global: e
    }), Rn = i) : hv(Rn, i) && (t({
      event: i,
      name: r,
      global: e
    }), Rn = i), clearTimeout(In), In = Le.setTimeout(() => {
      In = void 0;
    }, uv);
  };
}
function dv() {
  if (!("document" in Le))
    return;
  const t = Tt.bind(null, "dom"), e = wl(t, !0);
  Le.document.addEventListener("click", e, !1), Le.document.addEventListener("keypress", e, !1), ["EventTarget", "Node"].forEach((i) => {
    const r = Le[i] && Le[i].prototype;
    !r || !r.hasOwnProperty || !r.hasOwnProperty("addEventListener") || (Ge(r, "addEventListener", function(s) {
      return function(f, g, l) {
        if (f === "click" || f == "keypress")
          try {
            const n = this, a = n.__sentry_instrumentation_handlers__ = n.__sentry_instrumentation_handlers__ || {}, h = a[f] = a[f] || { refCount: 0 };
            if (!h.handler) {
              const o = wl(t);
              h.handler = o, s.call(this, f, o, l);
            }
            h.refCount++;
          } catch {
          }
        return s.call(this, f, g, l);
      };
    }), Ge(
      r,
      "removeEventListener",
      function(s) {
        return function(f, g, l) {
          if (f === "click" || f == "keypress")
            try {
              const n = this, a = n.__sentry_instrumentation_handlers__ || {}, h = a[f];
              h && (h.refCount--, h.refCount <= 0 && (s.call(this, f, h.handler, l), h.handler = void 0, delete a[f]), Object.keys(a).length === 0 && delete n.__sentry_instrumentation_handlers__);
            } catch {
            }
          return s.call(this, f, g, l);
        };
      }
    ));
  });
}
let Ln = null;
function pv() {
  Ln = Le.onerror, Le.onerror = function(t, e, i, r, s) {
    return Tt("error", {
      column: r,
      error: s,
      line: i,
      msg: t,
      url: e
    }), Ln && !Ln.__SENTRY_LOADER__ ? Ln.apply(this, arguments) : !1;
  }, Le.onerror.__SENTRY_INSTRUMENTED__ = !0;
}
let Fn = null;
function gv() {
  Fn = Le.onunhandledrejection, Le.onunhandledrejection = function(t) {
    return Tt("unhandledrejection", t), Fn && !Fn.__SENTRY_LOADER__ ? Fn.apply(this, arguments) : !0;
  }, Le.onunhandledrejection.__SENTRY_INSTRUMENTED__ = !0;
}
function mv() {
  const t = typeof WeakSet == "function", e = t ? /* @__PURE__ */ new WeakSet() : [];
  function i(s) {
    if (t)
      return e.has(s) ? !0 : (e.add(s), !1);
    for (let f = 0; f < e.length; f++)
      if (e[f] === s)
        return !0;
    return e.push(s), !1;
  }
  function r(s) {
    if (t)
      e.delete(s);
    else
      for (let f = 0; f < e.length; f++)
        if (e[f] === s) {
          e.splice(f, 1);
          break;
        }
  }
  return [i, r];
}
function rr() {
  const t = xt, e = t.crypto || t.msCrypto;
  if (e && e.randomUUID)
    return e.randomUUID().replace(/-/g, "");
  const i = e && e.getRandomValues ? () => e.getRandomValues(new Uint8Array(1))[0] : () => Math.random() * 16;
  return ([1e7] + 1e3 + 4e3 + 8e3 + 1e11).replace(
    /[018]/g,
    (r) => (r ^ (i() & 15) >> r / 4).toString(16)
  );
}
function hf(t) {
  return t.exception && t.exception.values ? t.exception.values[0] : void 0;
}
function Zt(t) {
  const { message: e, event_id: i } = t;
  if (e)
    return e;
  const r = hf(t);
  return r ? r.type && r.value ? `${r.type}: ${r.value}` : r.type || r.value || i || "<unknown>" : i || "<unknown>";
}
function Jo(t, e, i) {
  const r = t.exception = t.exception || {}, s = r.values = r.values || [], f = s[0] = s[0] || {};
  f.value || (f.value = e || ""), f.type || (f.type = i || "Error");
}
function qr(t, e) {
  const i = hf(t);
  if (!i)
    return;
  const r = { type: "generic", handled: !0 }, s = i.mechanism;
  if (i.mechanism = { ...r, ...s, ...e }, e && "data" in e) {
    const f = { ...s && s.data, ...e.data };
    i.mechanism.data = f;
  }
}
function xl(t) {
  if (t && t.__sentry_captured__)
    return !0;
  try {
    ic(t, "__sentry_captured__", !0);
  } catch {
  }
  return !1;
}
function ff(t) {
  return Array.isArray(t) ? t : [t];
}
function vv() {
  return typeof __SENTRY_BROWSER_BUNDLE__ < "u" && !!__SENTRY_BROWSER_BUNDLE__;
}
function bv() {
  return "npm";
}
function yv() {
  return !vv() && Object.prototype.toString.call(typeof process < "u" ? process : 0) === "[object process]";
}
function wv(t, e) {
  return t.require(e);
}
function Xt(t, e = 100, i = 1 / 0) {
  try {
    return Qo("", t, e, i);
  } catch (r) {
    return { ERROR: `**non-serializable** (${r})` };
  }
}
function df(t, e = 3, i = 100 * 1024) {
  const r = Xt(t, e);
  return Cv(r) > i ? df(t, e - 1, i) : r;
}
function Qo(t, e, i = 1 / 0, r = 1 / 0, s = mv()) {
  const [f, g] = s;
  if (e == null || ["number", "boolean", "string"].includes(typeof e) && !Nm(e))
    return e;
  const l = xv(t, e);
  if (!l.startsWith("[object "))
    return l;
  if (e.__sentry_skip_normalization__)
    return e;
  const n = typeof e.__sentry_override_normalization_depth__ == "number" ? e.__sentry_override_normalization_depth__ : i;
  if (n === 0)
    return l.replace("object ", "");
  if (f(e))
    return "[Circular ~]";
  const a = e;
  if (a && typeof a.toJSON == "function")
    try {
      const c = a.toJSON();
      return Qo("", c, n - 1, r, s);
    } catch {
    }
  const h = Array.isArray(e) ? [] : {};
  let o = 0;
  const u = af(e);
  for (const c in u) {
    if (!Object.prototype.hasOwnProperty.call(u, c))
      continue;
    if (o >= r) {
      h[c] = "[MaxProperties ~]";
      break;
    }
    const d = u[c];
    h[c] = Qo(c, d, n - 1, r, s), o++;
  }
  return g(e), h;
}
function xv(t, e) {
  try {
    if (t === "domain" && e && typeof e == "object" && e._events)
      return "[Domain]";
    if (t === "domainEmitter")
      return "[DomainEmitter]";
    if (typeof global < "u" && e === global)
      return "[Global]";
    if (typeof window < "u" && e === window)
      return "[Window]";
    if (typeof document < "u" && e === document)
      return "[Document]";
    if (jm(e))
      return "[SyntheticEvent]";
    if (typeof e == "number" && e !== e)
      return "[NaN]";
    if (typeof e == "function")
      return `[Function: ${ai(e)}]`;
    if (typeof e == "symbol")
      return `[${String(e)}]`;
    if (typeof e == "bigint")
      return `[BigInt: ${String(e)}]`;
    const i = _v(e);
    return /^HTML(\w*)Element$/.test(i) ? `[HTMLElement: ${i}]` : `[object ${i}]`;
  } catch (i) {
    return `**non-serializable** (${i})`;
  }
}
function _v(t) {
  const e = Object.getPrototypeOf(t);
  return e ? e.constructor.name : "null prototype";
}
function Sv(t) {
  return ~-encodeURI(t).split(/%..|./).length;
}
function Cv(t) {
  return Sv(JSON.stringify(t));
}
var Bt;
(function(t) {
  t[t.PENDING = 0] = "PENDING";
  const i = 1;
  t[t.RESOLVED = i] = "RESOLVED";
  const r = 2;
  t[t.REJECTED = r] = "REJECTED";
})(Bt || (Bt = {}));
function Mi(t) {
  return new nt((e) => {
    e(t);
  });
}
function es(t) {
  return new nt((e, i) => {
    i(t);
  });
}
class nt {
  __init() {
    this._state = Bt.PENDING;
  }
  __init2() {
    this._handlers = [];
  }
  constructor(e) {
    nt.prototype.__init.call(this), nt.prototype.__init2.call(this), nt.prototype.__init3.call(this), nt.prototype.__init4.call(this), nt.prototype.__init5.call(this), nt.prototype.__init6.call(this);
    try {
      e(this._resolve, this._reject);
    } catch (i) {
      this._reject(i);
    }
  }
  then(e, i) {
    return new nt((r, s) => {
      this._handlers.push([
        !1,
        (f) => {
          if (!e)
            r(f);
          else
            try {
              r(e(f));
            } catch (g) {
              s(g);
            }
        },
        (f) => {
          if (!i)
            s(f);
          else
            try {
              r(i(f));
            } catch (g) {
              s(g);
            }
        }
      ]), this._executeHandlers();
    });
  }
  catch(e) {
    return this.then((i) => i, e);
  }
  finally(e) {
    return new nt((i, r) => {
      let s, f;
      return this.then(
        (g) => {
          f = !1, s = g, e && e();
        },
        (g) => {
          f = !0, s = g, e && e();
        }
      ).then(() => {
        if (f) {
          r(s);
          return;
        }
        i(s);
      });
    });
  }
  __init3() {
    this._resolve = (e) => {
      this._setResult(Bt.RESOLVED, e);
    };
  }
  __init4() {
    this._reject = (e) => {
      this._setResult(Bt.REJECTED, e);
    };
  }
  __init5() {
    this._setResult = (e, i) => {
      if (this._state === Bt.PENDING) {
        if (ec(i)) {
          i.then(this._resolve, this._reject);
          return;
        }
        this._state = e, this._value = i, this._executeHandlers();
      }
    };
  }
  __init6() {
    this._executeHandlers = () => {
      if (this._state === Bt.PENDING)
        return;
      const e = this._handlers.slice();
      this._handlers = [], e.forEach((i) => {
        i[0] || (this._state === Bt.RESOLVED && i[1](this._value), this._state === Bt.REJECTED && i[2](this._value), i[0] = !0);
      });
    };
  }
}
function Tv(t) {
  const e = [];
  function i() {
    return t === void 0 || e.length < t;
  }
  function r(g) {
    return e.splice(e.indexOf(g), 1)[0];
  }
  function s(g) {
    if (!i())
      return es(new Je("Not adding Promise because buffer limit was reached."));
    const l = g();
    return e.indexOf(l) === -1 && e.push(l), l.then(() => r(l)).then(
      null,
      () => r(l).then(null, () => {
      })
    ), l;
  }
  function f(g) {
    return new nt((l, n) => {
      let a = e.length;
      if (!a)
        return l(!0);
      const h = setTimeout(() => {
        g && g > 0 && l(!1);
      }, g);
      e.forEach((o) => {
        Mi(o).then(() => {
          --a || (clearTimeout(h), l(!0));
        }, n);
      });
    });
  }
  return {
    $: e,
    add: s,
    drain: f
  };
}
function po(t) {
  if (!t)
    return {};
  const e = t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
  if (!e)
    return {};
  const i = e[6] || "", r = e[8] || "";
  return {
    host: e[4],
    path: e[5],
    protocol: e[2],
    search: i,
    hash: r,
    relative: e[5] + i + r
  };
}
const Ev = ["fatal", "error", "warning", "log", "info", "debug"];
function kv(t) {
  return t === "warn" ? "warning" : Ev.includes(t) ? t : "log";
}
const pf = gn(), ea = {
  nowSeconds: () => Date.now() / 1e3
};
function Ov() {
  const { performance: t } = pf;
  if (!t || !t.now)
    return;
  const e = Date.now() - t.now();
  return {
    now: () => t.now(),
    timeOrigin: e
  };
}
function Pv() {
  try {
    return wv(module, "perf_hooks").performance;
  } catch {
    return;
  }
}
const go = yv() ? Pv() : Ov(), _l = go === void 0 ? ea : {
  nowSeconds: () => (go.timeOrigin + go.now()) / 1e3
}, Ms = ea.nowSeconds.bind(ea), gf = _l.nowSeconds.bind(_l);
(() => {
  const { performance: t } = pf;
  if (!t || !t.now)
    return;
  const e = 3600 * 1e3, i = t.now(), r = Date.now(), s = t.timeOrigin ? Math.abs(t.timeOrigin + i - r) : e, f = s < e, g = t.timing && t.timing.navigationStart, n = typeof g == "number" ? Math.abs(g + i - r) : e, a = n < e;
  return f || a ? s <= n ? t.timeOrigin : g : r;
})();
function mn(t, e = []) {
  return [t, e];
}
function Av(t, e) {
  const [i, r] = t;
  return [i, [...r, e]];
}
function Sl(t, e) {
  const i = t[1];
  for (const r of i) {
    const s = r[0].type;
    if (e(r, s))
      return !0;
  }
  return !1;
}
function ta(t, e) {
  return (e || new TextEncoder()).encode(t);
}
function Mv(t, e) {
  const [i, r] = t;
  let s = JSON.stringify(i);
  function f(g) {
    typeof s == "string" ? s = typeof g == "string" ? s + g : [ta(s, e), g] : s.push(typeof g == "string" ? ta(g, e) : g);
  }
  for (const g of r) {
    const [l, n] = g;
    if (f(`
${JSON.stringify(l)}
`), typeof n == "string" || n instanceof Uint8Array)
      f(n);
    else {
      let a;
      try {
        a = JSON.stringify(n);
      } catch {
        a = JSON.stringify(Xt(n));
      }
      f(a);
    }
  }
  return typeof s == "string" ? s : Dv(s);
}
function Dv(t) {
  const e = t.reduce((s, f) => s + f.length, 0), i = new Uint8Array(e);
  let r = 0;
  for (const s of t)
    i.set(s, r), r += s.length;
  return i;
}
function Iv(t, e) {
  const i = typeof t.data == "string" ? ta(t.data, e) : t.data;
  return [
    nc({
      type: "attachment",
      length: i.length,
      filename: t.filename,
      content_type: t.contentType,
      attachment_type: t.attachmentType
    }),
    i
  ];
}
const Rv = {
  session: "session",
  sessions: "session",
  attachment: "attachment",
  transaction: "transaction",
  event: "error",
  client_report: "internal",
  user_report: "default",
  profile: "profile",
  replay_event: "replay",
  replay_recording: "replay",
  check_in: "monitor"
};
function Cl(t) {
  return Rv[t];
}
function mf(t) {
  if (!t || !t.sdk)
    return;
  const { name: e, version: i } = t.sdk;
  return { name: e, version: i };
}
function Lv(t, e, i, r) {
  const s = t.sdkProcessingMetadata && t.sdkProcessingMetadata.dynamicSamplingContext;
  return {
    event_id: t.event_id,
    sent_at: new Date().toISOString(),
    ...e && { sdk: e },
    ...!!i && { dsn: Ps(r) },
    ...s && {
      trace: nc({ ...s })
    }
  };
}
function Fv(t, e, i) {
  const r = [
    { type: "client_report" },
    {
      timestamp: i || Ms(),
      discarded_events: t
    }
  ];
  return mn(e ? { dsn: e } : {}, [r]);
}
const zv = 60 * 1e3;
function Bv(t, e = Date.now()) {
  const i = parseInt(`${t}`, 10);
  if (!isNaN(i))
    return i * 1e3;
  const r = Date.parse(`${t}`);
  return isNaN(r) ? zv : r - e;
}
function jv(t, e) {
  return t[e] || t.all || 0;
}
function Nv(t, e, i = Date.now()) {
  return jv(t, e) > i;
}
function Vv(t, { statusCode: e, headers: i }, r = Date.now()) {
  const s = {
    ...t
  }, f = i && i["x-sentry-rate-limits"], g = i && i["retry-after"];
  if (f)
    for (const l of f.trim().split(",")) {
      const [n, a] = l.split(":", 2), h = parseInt(n, 10), o = (isNaN(h) ? 60 : h) * 1e3;
      if (!a)
        s.all = r + o;
      else
        for (const u of a.split(";"))
          s[u] = r + o;
    }
  else
    g ? s.all = r + Bv(g, r) : e === 429 && (s.all = r + 60 * 1e3);
  return s;
}
const vf = "production";
function $v(t) {
  const e = gf(), i = {
    sid: rr(),
    init: !0,
    timestamp: e,
    started: e,
    duration: 0,
    status: "ok",
    errors: 0,
    ignoreDuration: !1,
    toJSON: () => Uv(i)
  };
  return t && fr(i, t), i;
}
function fr(t, e = {}) {
  if (e.user && (!t.ipAddress && e.user.ip_address && (t.ipAddress = e.user.ip_address), !t.did && !e.did && (t.did = e.user.id || e.user.email || e.user.username)), t.timestamp = e.timestamp || gf(), e.ignoreDuration && (t.ignoreDuration = e.ignoreDuration), e.sid && (t.sid = e.sid.length === 32 ? e.sid : rr()), e.init !== void 0 && (t.init = e.init), !t.did && e.did && (t.did = `${e.did}`), typeof e.started == "number" && (t.started = e.started), t.ignoreDuration)
    t.duration = void 0;
  else if (typeof e.duration == "number")
    t.duration = e.duration;
  else {
    const i = t.timestamp - t.started;
    t.duration = i >= 0 ? i : 0;
  }
  e.release && (t.release = e.release), e.environment && (t.environment = e.environment), !t.ipAddress && e.ipAddress && (t.ipAddress = e.ipAddress), !t.userAgent && e.userAgent && (t.userAgent = e.userAgent), typeof e.errors == "number" && (t.errors = e.errors), e.status && (t.status = e.status);
}
function Hv(t, e) {
  let i = {};
  e ? i = { status: e } : t.status === "ok" && (i = { status: "exited" }), fr(t, i);
}
function Uv(t) {
  return nc({
    sid: `${t.sid}`,
    init: t.init,
    started: new Date(t.started * 1e3).toISOString(),
    timestamp: new Date(t.timestamp * 1e3).toISOString(),
    status: t.status,
    errors: t.errors,
    did: typeof t.did == "number" || typeof t.did == "string" ? `${t.did}` : void 0,
    duration: t.duration,
    attrs: {
      release: t.release,
      environment: t.environment,
      ip_address: t.ipAddress,
      user_agent: t.userAgent
    }
  });
}
const Wv = 100;
class Ti {
  constructor() {
    this._notifyingListeners = !1, this._scopeListeners = [], this._eventProcessors = [], this._breadcrumbs = [], this._attachments = [], this._user = {}, this._tags = {}, this._extra = {}, this._contexts = {}, this._sdkProcessingMetadata = {};
  }
  static clone(e) {
    const i = new Ti();
    return e && (i._breadcrumbs = [...e._breadcrumbs], i._tags = { ...e._tags }, i._extra = { ...e._extra }, i._contexts = { ...e._contexts }, i._user = e._user, i._level = e._level, i._span = e._span, i._session = e._session, i._transactionName = e._transactionName, i._fingerprint = e._fingerprint, i._eventProcessors = [...e._eventProcessors], i._requestSession = e._requestSession, i._attachments = [...e._attachments], i._sdkProcessingMetadata = { ...e._sdkProcessingMetadata }), i;
  }
  addScopeListener(e) {
    this._scopeListeners.push(e);
  }
  addEventProcessor(e) {
    return this._eventProcessors.push(e), this;
  }
  setUser(e) {
    return this._user = e || {}, this._session && fr(this._session, { user: e }), this._notifyScopeListeners(), this;
  }
  getUser() {
    return this._user;
  }
  getRequestSession() {
    return this._requestSession;
  }
  setRequestSession(e) {
    return this._requestSession = e, this;
  }
  setTags(e) {
    return this._tags = {
      ...this._tags,
      ...e
    }, this._notifyScopeListeners(), this;
  }
  setTag(e, i) {
    return this._tags = { ...this._tags, [e]: i }, this._notifyScopeListeners(), this;
  }
  setExtras(e) {
    return this._extra = {
      ...this._extra,
      ...e
    }, this._notifyScopeListeners(), this;
  }
  setExtra(e, i) {
    return this._extra = { ...this._extra, [e]: i }, this._notifyScopeListeners(), this;
  }
  setFingerprint(e) {
    return this._fingerprint = e, this._notifyScopeListeners(), this;
  }
  setLevel(e) {
    return this._level = e, this._notifyScopeListeners(), this;
  }
  setTransactionName(e) {
    return this._transactionName = e, this._notifyScopeListeners(), this;
  }
  setContext(e, i) {
    return i === null ? delete this._contexts[e] : this._contexts[e] = i, this._notifyScopeListeners(), this;
  }
  setSpan(e) {
    return this._span = e, this._notifyScopeListeners(), this;
  }
  getSpan() {
    return this._span;
  }
  getTransaction() {
    const e = this.getSpan();
    return e && e.transaction;
  }
  setSession(e) {
    return e ? this._session = e : delete this._session, this._notifyScopeListeners(), this;
  }
  getSession() {
    return this._session;
  }
  update(e) {
    if (!e)
      return this;
    if (typeof e == "function") {
      const i = e(this);
      return i instanceof Ti ? i : this;
    }
    return e instanceof Ti ? (this._tags = { ...this._tags, ...e._tags }, this._extra = { ...this._extra, ...e._extra }, this._contexts = { ...this._contexts, ...e._contexts }, e._user && Object.keys(e._user).length && (this._user = e._user), e._level && (this._level = e._level), e._fingerprint && (this._fingerprint = e._fingerprint), e._requestSession && (this._requestSession = e._requestSession)) : hr(e) && (e = e, this._tags = { ...this._tags, ...e.tags }, this._extra = { ...this._extra, ...e.extra }, this._contexts = { ...this._contexts, ...e.contexts }, e.user && (this._user = e.user), e.level && (this._level = e.level), e.fingerprint && (this._fingerprint = e.fingerprint), e.requestSession && (this._requestSession = e.requestSession)), this;
  }
  clear() {
    return this._breadcrumbs = [], this._tags = {}, this._extra = {}, this._user = {}, this._contexts = {}, this._level = void 0, this._transactionName = void 0, this._fingerprint = void 0, this._requestSession = void 0, this._span = void 0, this._session = void 0, this._notifyScopeListeners(), this._attachments = [], this;
  }
  addBreadcrumb(e, i) {
    const r = typeof i == "number" ? i : Wv;
    if (r <= 0)
      return this;
    const s = {
      timestamp: Ms(),
      ...e
    };
    return this._breadcrumbs = [...this._breadcrumbs, s].slice(-r), this._notifyScopeListeners(), this;
  }
  getLastBreadcrumb() {
    return this._breadcrumbs[this._breadcrumbs.length - 1];
  }
  clearBreadcrumbs() {
    return this._breadcrumbs = [], this._notifyScopeListeners(), this;
  }
  addAttachment(e) {
    return this._attachments.push(e), this;
  }
  getAttachments() {
    return this._attachments;
  }
  clearAttachments() {
    return this._attachments = [], this;
  }
  applyToEvent(e, i = {}) {
    if (this._extra && Object.keys(this._extra).length && (e.extra = { ...this._extra, ...e.extra }), this._tags && Object.keys(this._tags).length && (e.tags = { ...this._tags, ...e.tags }), this._user && Object.keys(this._user).length && (e.user = { ...this._user, ...e.user }), this._contexts && Object.keys(this._contexts).length && (e.contexts = { ...this._contexts, ...e.contexts }), this._level && (e.level = this._level), this._transactionName && (e.transaction = this._transactionName), this._span) {
      e.contexts = { trace: this._span.getTraceContext(), ...e.contexts };
      const r = this._span.transaction;
      if (r) {
        e.sdkProcessingMetadata = {
          dynamicSamplingContext: r.getDynamicSamplingContext(),
          ...e.sdkProcessingMetadata
        };
        const s = r.name;
        s && (e.tags = { transaction: s, ...e.tags });
      }
    }
    return this._applyFingerprint(e), e.breadcrumbs = [...e.breadcrumbs || [], ...this._breadcrumbs], e.breadcrumbs = e.breadcrumbs.length > 0 ? e.breadcrumbs : void 0, e.sdkProcessingMetadata = { ...e.sdkProcessingMetadata, ...this._sdkProcessingMetadata }, this._notifyEventProcessors([...bf(), ...this._eventProcessors], e, i);
  }
  setSDKProcessingMetadata(e) {
    return this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...e }, this;
  }
  _notifyEventProcessors(e, i, r, s = 0) {
    return new nt((f, g) => {
      const l = e[s];
      if (i === null || typeof l != "function")
        f(i);
      else {
        const n = l({ ...i }, r);
        (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && l.id && n === null && Ce.log(`Event processor "${l.id}" dropped event`), ec(n) ? n.then((a) => this._notifyEventProcessors(e, a, r, s + 1).then(f)).then(null, g) : this._notifyEventProcessors(e, n, r, s + 1).then(f).then(null, g);
      }
    });
  }
  _notifyScopeListeners() {
    this._notifyingListeners || (this._notifyingListeners = !0, this._scopeListeners.forEach((e) => {
      e(this);
    }), this._notifyingListeners = !1);
  }
  _applyFingerprint(e) {
    e.fingerprint = e.fingerprint ? ff(e.fingerprint) : [], this._fingerprint && (e.fingerprint = e.fingerprint.concat(this._fingerprint)), e.fingerprint && !e.fingerprint.length && delete e.fingerprint;
  }
}
function bf() {
  return tc("globalEventProcessors", () => []);
}
function sc(t) {
  bf().push(t);
}
const yf = 4, Yv = 100;
class wf {
  constructor(e, i = new Ti(), r = yf) {
    this._version = r, this._stack = [{ scope: i }], e && this.bindClient(e);
  }
  isOlderThan(e) {
    return this._version < e;
  }
  bindClient(e) {
    const i = this.getStackTop();
    i.client = e, e && e.setupIntegrations && e.setupIntegrations();
  }
  pushScope() {
    const e = Ti.clone(this.getScope());
    return this.getStack().push({
      client: this.getClient(),
      scope: e
    }), e;
  }
  popScope() {
    return this.getStack().length <= 1 ? !1 : !!this.getStack().pop();
  }
  withScope(e) {
    const i = this.pushScope();
    try {
      e(i);
    } finally {
      this.popScope();
    }
  }
  getClient() {
    return this.getStackTop().client;
  }
  getScope() {
    return this.getStackTop().scope;
  }
  getStack() {
    return this._stack;
  }
  getStackTop() {
    return this._stack[this._stack.length - 1];
  }
  captureException(e, i) {
    const r = this._lastEventId = i && i.event_id ? i.event_id : rr(), s = new Error("Sentry syntheticException");
    return this._withClient((f, g) => {
      f.captureException(
        e,
        {
          originalException: e,
          syntheticException: s,
          ...i,
          event_id: r
        },
        g
      );
    }), r;
  }
  captureMessage(e, i, r) {
    const s = this._lastEventId = r && r.event_id ? r.event_id : rr(), f = new Error(e);
    return this._withClient((g, l) => {
      g.captureMessage(
        e,
        i,
        {
          originalException: e,
          syntheticException: f,
          ...r,
          event_id: s
        },
        l
      );
    }), s;
  }
  captureEvent(e, i) {
    const r = i && i.event_id ? i.event_id : rr();
    return e.type || (this._lastEventId = r), this._withClient((s, f) => {
      s.captureEvent(e, { ...i, event_id: r }, f);
    }), r;
  }
  lastEventId() {
    return this._lastEventId;
  }
  addBreadcrumb(e, i) {
    const { scope: r, client: s } = this.getStackTop();
    if (!s)
      return;
    const { beforeBreadcrumb: f = null, maxBreadcrumbs: g = Yv } = s.getOptions && s.getOptions() || {};
    if (g <= 0)
      return;
    const n = { timestamp: Ms(), ...e }, a = f ? sf(() => f(n, i)) : n;
    a !== null && (s.emit && s.emit("beforeAddBreadcrumb", a, i), r.addBreadcrumb(a, g));
  }
  setUser(e) {
    this.getScope().setUser(e);
  }
  setTags(e) {
    this.getScope().setTags(e);
  }
  setExtras(e) {
    this.getScope().setExtras(e);
  }
  setTag(e, i) {
    this.getScope().setTag(e, i);
  }
  setExtra(e, i) {
    this.getScope().setExtra(e, i);
  }
  setContext(e, i) {
    this.getScope().setContext(e, i);
  }
  configureScope(e) {
    const { scope: i, client: r } = this.getStackTop();
    r && e(i);
  }
  run(e) {
    const i = Tl(this);
    try {
      e(this);
    } finally {
      Tl(i);
    }
  }
  getIntegration(e) {
    const i = this.getClient();
    if (!i)
      return null;
    try {
      return i.getIntegration(e);
    } catch {
      return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(`Cannot retrieve integration ${e.id} from the current Hub`), null;
    }
  }
  startTransaction(e, i) {
    const r = this._callExtensionMethod("startTransaction", e, i);
    return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && !r && console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`), r;
  }
  traceHeaders() {
    return this._callExtensionMethod("traceHeaders");
  }
  captureSession(e = !1) {
    if (e)
      return this.endSession();
    this._sendSessionUpdate();
  }
  endSession() {
    const i = this.getStackTop().scope, r = i.getSession();
    r && Hv(r), this._sendSessionUpdate(), i.setSession();
  }
  startSession(e) {
    const { scope: i, client: r } = this.getStackTop(), { release: s, environment: f = vf } = r && r.getOptions() || {}, { userAgent: g } = xt.navigator || {}, l = $v({
      release: s,
      environment: f,
      user: i.getUser(),
      ...g && { userAgent: g },
      ...e
    }), n = i.getSession && i.getSession();
    return n && n.status === "ok" && fr(n, { status: "exited" }), this.endSession(), i.setSession(l), l;
  }
  shouldSendDefaultPii() {
    const e = this.getClient(), i = e && e.getOptions();
    return Boolean(i && i.sendDefaultPii);
  }
  _sendSessionUpdate() {
    const { scope: e, client: i } = this.getStackTop(), r = e.getSession();
    r && i && i.captureSession && i.captureSession(r);
  }
  _withClient(e) {
    const { scope: i, client: r } = this.getStackTop();
    r && e(r, i);
  }
  _callExtensionMethod(e, ...i) {
    const s = Ds().__SENTRY__;
    if (s && s.extensions && typeof s.extensions[e] == "function")
      return s.extensions[e].apply(this, i);
    (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(`Extension method ${e} couldn't be found, doing nothing.`);
  }
}
function Ds() {
  return xt.__SENTRY__ = xt.__SENTRY__ || {
    extensions: {},
    hub: void 0
  }, xt;
}
function Tl(t) {
  const e = Ds(), i = ia(e);
  return xf(e, t), i;
}
function Ye() {
  const t = Ds();
  if (t.__SENTRY__ && t.__SENTRY__.acs) {
    const e = t.__SENTRY__.acs.getCurrentHub();
    if (e)
      return e;
  }
  return Gv(t);
}
function Gv(t = Ds()) {
  return (!Xv(t) || ia(t).isOlderThan(yf)) && xf(t, new wf()), ia(t);
}
function Xv(t) {
  return !!(t && t.__SENTRY__ && t.__SENTRY__.hub);
}
function ia(t) {
  return tc("hub", () => new wf(), t);
}
function xf(t, e) {
  if (!t)
    return !1;
  const i = t.__SENTRY__ = t.__SENTRY__ || {};
  return i.hub = e, !0;
}
function Kv(t, e) {
  return Ye().captureException(t, { captureContext: e });
}
function qv(t) {
  Ye().withScope(t);
}
const Zv = "7";
function Jv(t) {
  const e = t.protocol ? `${t.protocol}:` : "", i = t.port ? `:${t.port}` : "";
  return `${e}//${t.host}${i}${t.path ? `/${t.path}` : ""}/api/`;
}
function Qv(t) {
  return `${Jv(t)}${t.projectId}/envelope/`;
}
function e0(t, e) {
  return Jm({
    sentry_key: t.publicKey,
    sentry_version: Zv,
    ...e && { sentry_client: `${e.name}/${e.version}` }
  });
}
function t0(t, e = {}) {
  const i = typeof e == "string" ? e : e.tunnel, r = typeof e == "string" || !e._metadata ? void 0 : e._metadata.sdk;
  return i || `${Qv(t)}?${e0(t, r)}`;
}
function i0(t, e) {
  return e && (t.sdk = t.sdk || {}, t.sdk.name = t.sdk.name || e.name, t.sdk.version = t.sdk.version || e.version, t.sdk.integrations = [...t.sdk.integrations || [], ...e.integrations || []], t.sdk.packages = [...t.sdk.packages || [], ...e.packages || []]), t;
}
function r0(t, e, i, r) {
  const s = mf(i), f = {
    sent_at: new Date().toISOString(),
    ...s && { sdk: s },
    ...!!r && { dsn: Ps(e) }
  }, g = "aggregates" in t ? [{ type: "sessions" }, t] : [{ type: "session" }, t];
  return mn(f, [g]);
}
function n0(t, e, i, r) {
  const s = mf(i), f = t.type && t.type !== "replay_event" ? t.type : "event";
  i0(t, i && i.sdk);
  const g = Lv(t, s, r, e);
  return delete t.sdkProcessingMetadata, mn(g, [[{ type: f }, t]]);
}
const El = [];
function s0(t) {
  const e = {};
  return t.forEach((i) => {
    const { name: r } = i, s = e[r];
    s && !s.isDefaultInstance && i.isDefaultInstance || (e[r] = i);
  }), Object.keys(e).map((i) => e[i]);
}
function o0(t) {
  const e = t.defaultIntegrations || [], i = t.integrations;
  e.forEach((g) => {
    g.isDefaultInstance = !0;
  });
  let r;
  Array.isArray(i) ? r = [...e, ...i] : typeof i == "function" ? r = ff(i(e)) : r = e;
  const s = s0(r), f = c0(s, (g) => g.name === "Debug");
  if (f !== -1) {
    const [g] = s.splice(f, 1);
    s.push(g);
  }
  return s;
}
function a0(t) {
  const e = {};
  return t.forEach((i) => {
    i && _f(i, e);
  }), e;
}
function _f(t, e) {
  e[t.name] = t, El.indexOf(t.name) === -1 && (t.setupOnce(sc, Ye), El.push(t.name), (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log(`Integration installed: ${t.name}`));
}
function c0(t, e) {
  for (let i = 0; i < t.length; i++)
    if (e(t[i]) === !0)
      return i;
  return -1;
}
function l0(t, e, i, r) {
  const { normalizeDepth: s = 3, normalizeMaxBreadth: f = 1e3 } = t, g = {
    ...e,
    event_id: e.event_id || i.event_id || rr(),
    timestamp: e.timestamp || Ms()
  }, l = i.integrations || t.integrations.map((h) => h.name);
  u0(g, t), f0(g, l), e.type === void 0 && h0(g, t.stackParser);
  let n = r;
  i.captureContext && (n = Ti.clone(n).update(i.captureContext));
  let a = Mi(g);
  if (n) {
    if (n.getAttachments) {
      const h = [...i.attachments || [], ...n.getAttachments()];
      h.length && (i.attachments = h);
    }
    a = n.applyToEvent(g, i);
  }
  return a.then((h) => typeof s == "number" && s > 0 ? d0(h, s, f) : h);
}
function u0(t, e) {
  const { environment: i, release: r, dist: s, maxValueLength: f = 250 } = e;
  "environment" in t || (t.environment = "environment" in e ? i : vf), t.release === void 0 && r !== void 0 && (t.release = r), t.dist === void 0 && s !== void 0 && (t.dist = s), t.message && (t.message = Vr(t.message, f));
  const g = t.exception && t.exception.values && t.exception.values[0];
  g && g.value && (g.value = Vr(g.value, f));
  const l = t.request;
  l && l.url && (l.url = Vr(l.url, f));
}
const kl = /* @__PURE__ */ new WeakMap();
function h0(t, e) {
  const i = xt._sentryDebugIds;
  if (!i)
    return;
  let r;
  const s = kl.get(e);
  s ? r = s : (r = /* @__PURE__ */ new Map(), kl.set(e, r));
  const f = Object.keys(i).reduce((n, a) => {
    let h;
    const o = r.get(a);
    o ? h = o : (h = e(a), r.set(a, h));
    for (let u = h.length - 1; u >= 0; u--) {
      const c = h[u];
      if (c.filename) {
        n[c.filename] = i[a];
        break;
      }
    }
    return n;
  }, {}), g = /* @__PURE__ */ new Set();
  try {
    t.exception.values.forEach((n) => {
      n.stacktrace.frames.forEach((a) => {
        a.filename && g.add(a.filename);
      });
    });
  } catch {
  }
  t.debug_meta = t.debug_meta || {}, t.debug_meta.images = t.debug_meta.images || [];
  const l = t.debug_meta.images;
  g.forEach((n) => {
    f[n] && l.push({
      type: "sourcemap",
      code_file: n,
      debug_id: f[n]
    });
  });
}
function f0(t, e) {
  e.length > 0 && (t.sdk = t.sdk || {}, t.sdk.integrations = [...t.sdk.integrations || [], ...e]);
}
function d0(t, e, i) {
  if (!t)
    return null;
  const r = {
    ...t,
    ...t.breadcrumbs && {
      breadcrumbs: t.breadcrumbs.map((s) => ({
        ...s,
        ...s.data && {
          data: Xt(s.data, e, i)
        }
      }))
    },
    ...t.user && {
      user: Xt(t.user, e, i)
    },
    ...t.contexts && {
      contexts: Xt(t.contexts, e, i)
    },
    ...t.extra && {
      extra: Xt(t.extra, e, i)
    }
  };
  return t.contexts && t.contexts.trace && r.contexts && (r.contexts.trace = t.contexts.trace, t.contexts.trace.data && (r.contexts.trace.data = Xt(t.contexts.trace.data, e, i))), t.spans && (r.spans = t.spans.map((s) => (s.data && (s.data = Xt(s.data, e, i)), s))), r;
}
const Ol = "Not capturing exception because it's already been captured.";
class _i {
  __init() {
    this._integrations = {};
  }
  __init2() {
    this._integrationsInitialized = !1;
  }
  __init3() {
    this._numProcessing = 0;
  }
  __init4() {
    this._outcomes = {};
  }
  __init5() {
    this._hooks = {};
  }
  constructor(e) {
    if (_i.prototype.__init.call(this), _i.prototype.__init2.call(this), _i.prototype.__init3.call(this), _i.prototype.__init4.call(this), _i.prototype.__init5.call(this), this._options = e, e.dsn) {
      this._dsn = Km(e.dsn);
      const i = t0(this._dsn, e);
      this._transport = e.transport({
        recordDroppedEvent: this.recordDroppedEvent.bind(this),
        ...e.transportOptions,
        url: i
      });
    } else
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("No DSN provided, client will not do anything.");
  }
  captureException(e, i, r) {
    if (xl(e)) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log(Ol);
      return;
    }
    let s = i && i.event_id;
    return this._process(
      this.eventFromException(e, i).then((f) => this._captureEvent(f, i, r)).then((f) => {
        s = f;
      })
    ), s;
  }
  captureMessage(e, i, r, s) {
    let f = r && r.event_id;
    const g = rf(e) ? this.eventFromMessage(String(e), i, r) : this.eventFromException(e, r);
    return this._process(
      g.then((l) => this._captureEvent(l, r, s)).then((l) => {
        f = l;
      })
    ), f;
  }
  captureEvent(e, i, r) {
    if (i && i.originalException && xl(i.originalException)) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log(Ol);
      return;
    }
    let s = i && i.event_id;
    return this._process(
      this._captureEvent(e, i, r).then((f) => {
        s = f;
      })
    ), s;
  }
  captureSession(e) {
    if (!this._isEnabled()) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("SDK not enabled, will not capture session.");
      return;
    }
    typeof e.release != "string" ? (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("Discarded session because of missing or non-string release") : (this.sendSession(e), fr(e, { init: !1 }));
  }
  getDsn() {
    return this._dsn;
  }
  getOptions() {
    return this._options;
  }
  getSdkMetadata() {
    return this._options._metadata;
  }
  getTransport() {
    return this._transport;
  }
  flush(e) {
    const i = this._transport;
    return i ? this._isClientDoneProcessing(e).then((r) => i.flush(e).then((s) => r && s)) : Mi(!0);
  }
  close(e) {
    return this.flush(e).then((i) => (this.getOptions().enabled = !1, i));
  }
  setupIntegrations() {
    this._isEnabled() && !this._integrationsInitialized && (this._integrations = a0(this._options.integrations), this._integrationsInitialized = !0);
  }
  getIntegrationById(e) {
    return this._integrations[e];
  }
  getIntegration(e) {
    try {
      return this._integrations[e.id] || null;
    } catch {
      return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(`Cannot retrieve integration ${e.id} from the current Client`), null;
    }
  }
  addIntegration(e) {
    _f(e, this._integrations);
  }
  sendEvent(e, i = {}) {
    if (this._dsn) {
      let r = n0(e, this._dsn, this._options._metadata, this._options.tunnel);
      for (const f of i.attachments || [])
        r = Av(
          r,
          Iv(
            f,
            this._options.transportOptions && this._options.transportOptions.textEncoder
          )
        );
      const s = this._sendEnvelope(r);
      s && s.then((f) => this.emit("afterSendEvent", e, f), null);
    }
  }
  sendSession(e) {
    if (this._dsn) {
      const i = r0(e, this._dsn, this._options._metadata, this._options.tunnel);
      this._sendEnvelope(i);
    }
  }
  recordDroppedEvent(e, i, r) {
    if (this._options.sendClientReports) {
      const s = `${e}:${i}`;
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log(`Adding outcome: "${s}"`), this._outcomes[s] = this._outcomes[s] + 1 || 1;
    }
  }
  on(e, i) {
    this._hooks[e] || (this._hooks[e] = []), this._hooks[e].push(i);
  }
  emit(e, ...i) {
    this._hooks[e] && this._hooks[e].forEach((r) => r(...i));
  }
  _updateSessionFromEvent(e, i) {
    let r = !1, s = !1;
    const f = i.exception && i.exception.values;
    if (f) {
      s = !0;
      for (const n of f) {
        const a = n.mechanism;
        if (a && a.handled === !1) {
          r = !0;
          break;
        }
      }
    }
    const g = e.status === "ok";
    (g && e.errors === 0 || g && r) && (fr(e, {
      ...r && { status: "crashed" },
      errors: e.errors || Number(s || r)
    }), this.captureSession(e));
  }
  _isClientDoneProcessing(e) {
    return new nt((i) => {
      let r = 0;
      const s = 1, f = setInterval(() => {
        this._numProcessing == 0 ? (clearInterval(f), i(!0)) : (r += s, e && r >= e && (clearInterval(f), i(!1)));
      }, s);
    });
  }
  _isEnabled() {
    return this.getOptions().enabled !== !1 && this._dsn !== void 0;
  }
  _prepareEvent(e, i, r) {
    const s = this.getOptions(), f = Object.keys(this._integrations);
    return !i.integrations && f.length > 0 && (i.integrations = f), l0(s, e, i, r);
  }
  _captureEvent(e, i = {}, r) {
    return this._processEvent(e, i, r).then(
      (s) => s.event_id,
      (s) => {
        if (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) {
          const f = s;
          f.logLevel === "log" ? Ce.log(f.message) : Ce.warn(f);
        }
      }
    );
  }
  _processEvent(e, i, r) {
    const s = this.getOptions(), { sampleRate: f } = s;
    if (!this._isEnabled())
      return es(new Je("SDK not enabled, will not capture event.", "log"));
    const g = Cf(e), l = Sf(e), n = e.type || "error", a = `before send for type \`${n}\``;
    if (l && typeof f == "number" && Math.random() > f)
      return this.recordDroppedEvent("sample_rate", "error", e), es(
        new Je(
          `Discarding event because it's not included in the random sample (sampling rate = ${f})`,
          "log"
        )
      );
    const h = n === "replay_event" ? "replay" : n;
    return this._prepareEvent(e, i, r).then((o) => {
      if (o === null)
        throw this.recordDroppedEvent("event_processor", h, e), new Je("An event processor returned `null`, will not send event.", "log");
      if (i.data && i.data.__sentry__ === !0)
        return o;
      const c = g0(s, o, i);
      return p0(c, a);
    }).then((o) => {
      if (o === null)
        throw this.recordDroppedEvent("before_send", h, e), new Je(`${a} returned \`null\`, will not send event.`, "log");
      const u = r && r.getSession();
      !g && u && this._updateSessionFromEvent(u, o);
      const c = o.transaction_info;
      if (g && c && o.transaction !== e.transaction) {
        const d = "custom";
        o.transaction_info = {
          ...c,
          source: d
        };
      }
      return this.sendEvent(o, i), o;
    }).then(null, (o) => {
      throw o instanceof Je ? o : (this.captureException(o, {
        data: {
          __sentry__: !0
        },
        originalException: o
      }), new Je(
        `Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${o}`
      ));
    });
  }
  _process(e) {
    this._numProcessing++, e.then(
      (i) => (this._numProcessing--, i),
      (i) => (this._numProcessing--, i)
    );
  }
  _sendEnvelope(e) {
    if (this._transport && this._dsn)
      return this.emit("beforeEnvelope", e), this._transport.send(e).then(null, (i) => {
        (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error("Error while sending event:", i);
      });
    (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error("Transport disabled");
  }
  _clearOutcomes() {
    const e = this._outcomes;
    return this._outcomes = {}, Object.keys(e).map((i) => {
      const [r, s] = i.split(":");
      return {
        reason: r,
        category: s,
        quantity: e[i]
      };
    });
  }
}
function p0(t, e) {
  const i = `${e} must return \`null\` or a valid event.`;
  if (ec(t))
    return t.then(
      (r) => {
        if (!hr(r) && r !== null)
          throw new Je(i);
        return r;
      },
      (r) => {
        throw new Je(`${e} rejected with ${r}`);
      }
    );
  if (!hr(t) && t !== null)
    throw new Je(i);
  return t;
}
function g0(t, e, i) {
  const { beforeSend: r, beforeSendTransaction: s } = t;
  return Sf(e) && r ? r(e, i) : Cf(e) && s ? s(e, i) : e;
}
function Sf(t) {
  return t.type === void 0;
}
function Cf(t) {
  return t.type === "transaction";
}
function m0(t, e) {
  e.debug === !0 && (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__ ? Ce.enable() : console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));
  const i = Ye();
  i.getScope().update(e.initialScope);
  const s = new t(e);
  i.bindClient(s);
}
const v0 = 30;
function Tf(t, e, i = Tv(
  t.bufferSize || v0
)) {
  let r = {};
  const s = (g) => i.drain(g);
  function f(g) {
    const l = [];
    if (Sl(g, (o, u) => {
      const c = Cl(u);
      if (Nv(r, c)) {
        const d = Pl(o, u);
        t.recordDroppedEvent("ratelimit_backoff", c, d);
      } else
        l.push(o);
    }), l.length === 0)
      return Mi();
    const n = mn(g[0], l), a = (o) => {
      Sl(n, (u, c) => {
        const d = Pl(u, c);
        t.recordDroppedEvent(o, Cl(c), d);
      });
    }, h = () => e({ body: Mv(n, t.textEncoder) }).then(
      (o) => (o.statusCode !== void 0 && (o.statusCode < 200 || o.statusCode >= 300) && (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(`Sentry responded with status code ${o.statusCode} to sent event.`), r = Vv(r, o), o),
      (o) => {
        throw a("network_error"), o;
      }
    );
    return i.add(h).then(
      (o) => o,
      (o) => {
        if (o instanceof Je)
          return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error("Skipped sending event because buffer is full."), a("queue_overflow"), Mi();
        throw o;
      }
    );
  }
  return f.__sentry__baseTransport__ = !0, {
    send: f,
    flush: s
  };
}
function Pl(t, e) {
  if (!(e !== "event" && e !== "transaction"))
    return Array.isArray(t) ? t[1] : void 0;
}
const ts = "7.52.1";
let Al;
class Zr {
  constructor() {
    Zr.prototype.__init.call(this);
  }
  static __initStatic() {
    this.id = "FunctionToString";
  }
  __init() {
    this.name = Zr.id;
  }
  setupOnce() {
    Al = Function.prototype.toString;
    try {
      Function.prototype.toString = function(...e) {
        const i = rc(this) || this;
        return Al.apply(i, e);
      };
    } catch {
    }
  }
}
Zr.__initStatic();
const b0 = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/];
class nr {
  static __initStatic() {
    this.id = "InboundFilters";
  }
  __init() {
    this.name = nr.id;
  }
  constructor(e = {}) {
    this._options = e, nr.prototype.__init.call(this);
  }
  setupOnce(e, i) {
    const r = (s) => {
      const f = i();
      if (f) {
        const g = f.getIntegration(nr);
        if (g) {
          const l = f.getClient(), n = l ? l.getOptions() : {}, a = y0(g._options, n);
          return w0(s, a) ? null : s;
        }
      }
      return s;
    };
    r.id = this.name, e(r);
  }
}
nr.__initStatic();
function y0(t = {}, e = {}) {
  return {
    allowUrls: [...t.allowUrls || [], ...e.allowUrls || []],
    denyUrls: [...t.denyUrls || [], ...e.denyUrls || []],
    ignoreErrors: [
      ...t.ignoreErrors || [],
      ...e.ignoreErrors || [],
      ...b0
    ],
    ignoreTransactions: [...t.ignoreTransactions || [], ...e.ignoreTransactions || []],
    ignoreInternal: t.ignoreInternal !== void 0 ? t.ignoreInternal : !0
  };
}
function w0(t, e) {
  return e.ignoreInternal && E0(t) ? ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(`Event dropped due to being internal Sentry Error.
Event: ${Zt(t)}`), !0) : x0(t, e.ignoreErrors) ? ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(
    `Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Zt(t)}`
  ), !0) : _0(t, e.ignoreTransactions) ? ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(
    `Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Zt(t)}`
  ), !0) : S0(t, e.denyUrls) ? ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(
    `Event dropped due to being matched by \`denyUrls\` option.
Event: ${Zt(
      t
    )}.
Url: ${is(t)}`
  ), !0) : C0(t, e.allowUrls) ? !1 : ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(
    `Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Zt(
      t
    )}.
Url: ${is(t)}`
  ), !0);
}
function x0(t, e) {
  return t.type || !e || !e.length ? !1 : T0(t).some((i) => As(i, e));
}
function _0(t, e) {
  if (t.type !== "transaction" || !e || !e.length)
    return !1;
  const i = t.transaction;
  return i ? As(i, e) : !1;
}
function S0(t, e) {
  if (!e || !e.length)
    return !1;
  const i = is(t);
  return i ? As(i, e) : !1;
}
function C0(t, e) {
  if (!e || !e.length)
    return !0;
  const i = is(t);
  return i ? As(i, e) : !0;
}
function T0(t) {
  if (t.message)
    return [t.message];
  if (t.exception) {
    const { values: e } = t.exception;
    try {
      const { type: i = "", value: r = "" } = e && e[e.length - 1] || {};
      return [`${r}`, `${i}: ${r}`];
    } catch {
      return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error(`Cannot extract message for event ${Zt(t)}`), [];
    }
  }
  return [];
}
function E0(t) {
  try {
    return t.exception.values[0].type === "SentryError";
  } catch {
  }
  return !1;
}
function k0(t = []) {
  for (let e = t.length - 1; e >= 0; e--) {
    const i = t[e];
    if (i && i.filename !== "<anonymous>" && i.filename !== "[native code]")
      return i.filename || null;
  }
  return null;
}
function is(t) {
  try {
    let e;
    try {
      e = t.exception.values[0].stacktrace.frames;
    } catch {
    }
    return e ? k0(e) : null;
  } catch {
    return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.error(`Cannot extract url for event ${Zt(t)}`), null;
  }
}
const Ie = xt;
let ra = 0;
function Ef() {
  return ra > 0;
}
function O0() {
  ra++, setTimeout(() => {
    ra--;
  });
}
function dr(t, e = {}, i) {
  if (typeof t != "function")
    return t;
  try {
    const s = t.__sentry_wrapped__;
    if (s)
      return s;
    if (rc(t))
      return t;
  } catch {
    return t;
  }
  const r = function() {
    const s = Array.prototype.slice.call(arguments);
    try {
      i && typeof i == "function" && i.apply(this, arguments);
      const f = s.map((g) => dr(g, e));
      return t.apply(this, f);
    } catch (f) {
      throw O0(), qv((g) => {
        g.addEventProcessor((l) => (e.mechanism && (Jo(l, void 0, void 0), qr(l, e.mechanism)), l.extra = {
          ...l.extra,
          arguments: s
        }, l)), Kv(f);
      }), f;
    }
  };
  try {
    for (const s in t)
      Object.prototype.hasOwnProperty.call(t, s) && (r[s] = t[s]);
  } catch {
  }
  of(r, t), ic(t, "__sentry_wrapped__", r);
  try {
    Object.getOwnPropertyDescriptor(r, "name").configurable && Object.defineProperty(r, "name", {
      get() {
        return t.name;
      }
    });
  } catch {
  }
  return r;
}
function kf(t, e) {
  const i = oc(t, e), r = {
    type: e && e.name,
    value: D0(e)
  };
  return i.length && (r.stacktrace = { frames: i }), r.type === void 0 && r.value === "" && (r.value = "Unrecoverable error caught"), r;
}
function P0(t, e, i, r) {
  const f = Ye().getClient(), g = f && f.getOptions().normalizeDepth, l = {
    exception: {
      values: [
        {
          type: Qa(e) ? e.constructor.name : r ? "UnhandledRejection" : "Error",
          value: `Non-Error ${r ? "promise rejection" : "exception"} captured with keys: ${Qm(e)}`
        }
      ]
    },
    extra: {
      __serialized__: df(e, g)
    }
  };
  if (i) {
    const n = oc(t, i);
    n.length && (l.exception.values[0].stacktrace = { frames: n });
  }
  return l;
}
function mo(t, e) {
  return {
    exception: {
      values: [kf(t, e)]
    }
  };
}
function oc(t, e) {
  const i = e.stacktrace || e.stack || "", r = M0(e);
  try {
    return t(i, r);
  } catch {
  }
  return [];
}
const A0 = /Minified React error #\d+;/i;
function M0(t) {
  if (t) {
    if (typeof t.framesToPop == "number")
      return t.framesToPop;
    if (A0.test(t.message))
      return 1;
  }
  return 0;
}
function D0(t) {
  const e = t && t.message;
  return e ? e.error && typeof e.error.message == "string" ? e.error.message : e : "No error message";
}
function I0(t, e, i, r) {
  const s = i && i.syntheticException || void 0, f = ac(t, e, s, r);
  return qr(f), f.level = "error", i && i.event_id && (f.event_id = i.event_id), Mi(f);
}
function R0(t, e, i = "info", r, s) {
  const f = r && r.syntheticException || void 0, g = na(t, e, f, s);
  return g.level = i, r && r.event_id && (g.event_id = r.event_id), Mi(g);
}
function ac(t, e, i, r, s) {
  let f;
  if (tf(e) && e.error)
    return mo(t, e.error);
  if (fl(e) || Fm(e)) {
    const g = e;
    if ("stack" in e)
      f = mo(t, e);
    else {
      const l = g.name || (fl(g) ? "DOMError" : "DOMException"), n = g.message ? `${l}: ${g.message}` : l;
      f = na(t, n, i, r), Jo(f, n);
    }
    return "code" in g && (f.tags = { ...f.tags, "DOMException.code": `${g.code}` }), f;
  }
  return ef(e) ? mo(t, e) : hr(e) || Qa(e) ? (f = P0(t, e, i, s), qr(f, {
    synthetic: !0
  }), f) : (f = na(t, e, i, r), Jo(f, `${e}`, void 0), qr(f, {
    synthetic: !0
  }), f);
}
function na(t, e, i, r) {
  const s = {
    message: e
  };
  if (r && i) {
    const f = oc(t, i);
    f.length && (s.exception = {
      values: [{ value: e, stacktrace: { frames: f } }]
    });
  }
  return s;
}
const zn = 1024, Of = "Breadcrumbs";
class Jr {
  static __initStatic() {
    this.id = Of;
  }
  __init() {
    this.name = Jr.id;
  }
  constructor(e) {
    Jr.prototype.__init.call(this), this.options = {
      console: !0,
      dom: !0,
      fetch: !0,
      history: !0,
      sentry: !0,
      xhr: !0,
      ...e
    };
  }
  setupOnce() {
    this.options.console && qt("console", F0), this.options.dom && qt("dom", L0(this.options.dom)), this.options.xhr && qt("xhr", z0), this.options.fetch && qt("fetch", B0), this.options.history && qt("history", j0);
  }
  addSentryBreadcrumb(e) {
    this.options.sentry && Ye().addBreadcrumb(
      {
        category: `sentry.${e.type === "transaction" ? "transaction" : "event"}`,
        event_id: e.event_id,
        level: e.level,
        message: Zt(e)
      },
      {
        event: e
      }
    );
  }
}
Jr.__initStatic();
function L0(t) {
  function e(i) {
    let r, s = typeof t == "object" ? t.serializeAttribute : void 0, f = typeof t == "object" && typeof t.maxStringLength == "number" ? t.maxStringLength : void 0;
    f && f > zn && ((typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn(
      `\`dom.maxStringLength\` cannot exceed ${zn}, but a value of ${f} was configured. Sentry will use ${zn} instead.`
    ), f = zn), typeof s == "string" && (s = [s]);
    try {
      const g = i.event;
      r = N0(g) ? Go(g.target, { keyAttrs: s, maxStringLength: f }) : Go(g, { keyAttrs: s, maxStringLength: f });
    } catch {
      r = "<unknown>";
    }
    r.length !== 0 && Ye().addBreadcrumb(
      {
        category: `ui.${i.name}`,
        message: r
      },
      {
        event: i.event,
        name: i.name,
        global: i.global
      }
    );
  }
  return e;
}
function F0(t) {
  for (let i = 0; i < t.args.length; i++)
    if (t.args[i] === "ref=Ref<") {
      t.args[i + 1] = "viewRef";
      break;
    }
  const e = {
    category: "console",
    data: {
      arguments: t.args,
      logger: "console"
    },
    level: kv(t.level),
    message: pl(t.args, " ")
  };
  if (t.level === "assert")
    if (t.args[0] === !1)
      e.message = `Assertion failed: ${pl(t.args.slice(1), " ") || "console.assert"}`, e.data.arguments = t.args.slice(1);
    else
      return;
  Ye().addBreadcrumb(e, {
    input: t.args,
    level: t.level
  });
}
function z0(t) {
  const { startTimestamp: e, endTimestamp: i } = t, r = t.xhr[Fr];
  if (!e || !i || !r)
    return;
  const { method: s, url: f, status_code: g, body: l } = r, n = {
    method: s,
    url: f,
    status_code: g
  }, a = {
    xhr: t.xhr,
    input: l,
    startTimestamp: e,
    endTimestamp: i
  };
  Ye().addBreadcrumb(
    {
      category: "xhr",
      data: n,
      type: "http"
    },
    a
  );
}
function B0(t) {
  const { startTimestamp: e, endTimestamp: i } = t;
  if (!!i && !(t.fetchData.url.match(/sentry_key/) && t.fetchData.method === "POST"))
    if (t.error) {
      const r = t.fetchData, s = {
        data: t.error,
        input: t.args,
        startTimestamp: e,
        endTimestamp: i
      };
      Ye().addBreadcrumb(
        {
          category: "fetch",
          data: r,
          level: "error",
          type: "http"
        },
        s
      );
    } else {
      const r = {
        ...t.fetchData,
        status_code: t.response && t.response.status
      }, s = {
        input: t.args,
        response: t.response,
        startTimestamp: e,
        endTimestamp: i
      };
      Ye().addBreadcrumb(
        {
          category: "fetch",
          data: r,
          type: "http"
        },
        s
      );
    }
}
function j0(t) {
  let e = t.from, i = t.to;
  const r = po(Ie.location.href);
  let s = po(e);
  const f = po(i);
  s.path || (s = r), r.protocol === f.protocol && r.host === f.host && (i = f.relative), r.protocol === s.protocol && r.host === s.host && (e = s.relative), Ye().addBreadcrumb({
    category: "navigation",
    data: {
      from: e,
      to: i
    }
  });
}
function N0(t) {
  return t && !!t.target;
}
function V0(t, {
  metadata: e,
  tunnel: i,
  dsn: r
}) {
  const s = {
    event_id: t.event_id,
    sent_at: new Date().toISOString(),
    ...e && e.sdk && {
      sdk: {
        name: e.sdk.name,
        version: e.sdk.version
      }
    },
    ...!!i && !!r && { dsn: Ps(r) }
  }, f = $0(t);
  return mn(s, [f]);
}
function $0(t) {
  return [{
    type: "user_report"
  }, t];
}
class H0 extends _i {
  constructor(e) {
    const i = Ie.SENTRY_SDK_SOURCE || bv();
    e._metadata = e._metadata || {}, e._metadata.sdk = e._metadata.sdk || {
      name: "sentry.javascript.browser",
      packages: [
        {
          name: `${i}:@sentry/browser`,
          version: ts
        }
      ],
      version: ts
    }, super(e), e.sendClientReports && Ie.document && Ie.document.addEventListener("visibilitychange", () => {
      Ie.document.visibilityState === "hidden" && this._flushOutcomes();
    });
  }
  eventFromException(e, i) {
    return I0(this._options.stackParser, e, i, this._options.attachStacktrace);
  }
  eventFromMessage(e, i = "info", r) {
    return R0(this._options.stackParser, e, i, r, this._options.attachStacktrace);
  }
  sendEvent(e, i) {
    const r = this.getIntegrationById(Of);
    r && r.addSentryBreadcrumb && r.addSentryBreadcrumb(e), super.sendEvent(e, i);
  }
  captureUserFeedback(e) {
    if (!this._isEnabled()) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("SDK not enabled, will not capture user feedback.");
      return;
    }
    const i = V0(e, {
      metadata: this.getSdkMetadata(),
      dsn: this.getDsn(),
      tunnel: this.getOptions().tunnel
    });
    this._sendEnvelope(i);
  }
  _prepareEvent(e, i, r) {
    return e.platform = e.platform || "javascript", super._prepareEvent(e, i, r);
  }
  _flushOutcomes() {
    const e = this._clearOutcomes();
    if (e.length === 0) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log("No outcomes to send");
      return;
    }
    if (!this._dsn) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log("No dsn provided, will not send outcomes");
      return;
    }
    (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log("Sending outcomes:", e);
    const i = Fv(e, this._options.tunnel && Ps(this._dsn));
    this._sendEnvelope(i);
  }
}
let zr;
function U0() {
  if (zr)
    return zr;
  if (qo(Ie.fetch))
    return zr = Ie.fetch.bind(Ie);
  const t = Ie.document;
  let e = Ie.fetch;
  if (t && typeof t.createElement == "function")
    try {
      const i = t.createElement("iframe");
      i.hidden = !0, t.head.appendChild(i);
      const r = i.contentWindow;
      r && r.fetch && (e = r.fetch), t.head.removeChild(i);
    } catch (i) {
      (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", i);
    }
  return zr = e.bind(Ie);
}
function W0() {
  zr = void 0;
}
function Y0(t, e = U0()) {
  let i = 0, r = 0;
  function s(f) {
    const g = f.body.length;
    i += g, r++;
    const l = {
      body: f.body,
      method: "POST",
      referrerPolicy: "origin",
      headers: t.headers,
      keepalive: i <= 6e4 && r < 15,
      ...t.fetchOptions
    };
    try {
      return e(t.url, l).then((n) => (i -= g, r--, {
        statusCode: n.status,
        headers: {
          "x-sentry-rate-limits": n.headers.get("X-Sentry-Rate-Limits"),
          "retry-after": n.headers.get("Retry-After")
        }
      }));
    } catch (n) {
      return W0(), i -= g, r--, es(n);
    }
  }
  return Tf(t, s);
}
const G0 = 4;
function X0(t) {
  function e(i) {
    return new nt((r, s) => {
      const f = new XMLHttpRequest();
      f.onerror = s, f.onreadystatechange = () => {
        f.readyState === G0 && r({
          statusCode: f.status,
          headers: {
            "x-sentry-rate-limits": f.getResponseHeader("X-Sentry-Rate-Limits"),
            "retry-after": f.getResponseHeader("Retry-After")
          }
        });
      }, f.open("POST", t.url);
      for (const g in t.headers)
        Object.prototype.hasOwnProperty.call(t.headers, g) && f.setRequestHeader(g, t.headers[g]);
      f.send(i.body);
    });
  }
  return Tf(t, e);
}
const Is = "?", K0 = 30, q0 = 40, Z0 = 50;
function cc(t, e, i, r) {
  const s = {
    filename: t,
    function: e,
    in_app: !0
  };
  return i !== void 0 && (s.lineno = i), r !== void 0 && (s.colno = r), s;
}
const J0 = /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, Q0 = /\((\S*)(?::(\d+))(?::(\d+))\)/, eb = (t) => {
  const e = J0.exec(t);
  if (e) {
    if (e[2] && e[2].indexOf("eval") === 0) {
      const f = Q0.exec(e[2]);
      f && (e[2] = f[1], e[3] = f[2], e[4] = f[3]);
    }
    const [r, s] = Pf(e[1] || Is, e[2]);
    return cc(s, r, e[3] ? +e[3] : void 0, e[4] ? +e[4] : void 0);
  }
}, tb = [K0, eb], ib = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, rb = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, nb = (t) => {
  const e = ib.exec(t);
  if (e) {
    if (e[3] && e[3].indexOf(" > eval") > -1) {
      const f = rb.exec(e[3]);
      f && (e[1] = e[1] || "eval", e[3] = f[1], e[4] = f[2], e[5] = "");
    }
    let r = e[3], s = e[1] || Is;
    return [s, r] = Pf(s, r), cc(r, s, e[4] ? +e[4] : void 0, e[5] ? +e[5] : void 0);
  }
}, sb = [Z0, nb], ob = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i, ab = (t) => {
  const e = ob.exec(t);
  return e ? cc(e[2], e[1] || Is, +e[3], e[4] ? +e[4] : void 0) : void 0;
}, cb = [q0, ab], lb = [tb, sb, cb], ub = lf(...lb), Pf = (t, e) => {
  const i = t.indexOf("safari-extension") !== -1, r = t.indexOf("safari-web-extension") !== -1;
  return i || r ? [
    t.indexOf("@") !== -1 ? t.split("@")[0] : Is,
    i ? `safari-extension:${e}` : `safari-web-extension:${e}`
  ] : [t, e];
};
class ei {
  static __initStatic() {
    this.id = "GlobalHandlers";
  }
  __init() {
    this.name = ei.id;
  }
  __init2() {
    this._installFunc = {
      onerror: hb,
      onunhandledrejection: fb
    };
  }
  constructor(e) {
    ei.prototype.__init.call(this), ei.prototype.__init2.call(this), this._options = {
      onerror: !0,
      onunhandledrejection: !0,
      ...e
    };
  }
  setupOnce() {
    Error.stackTraceLimit = 50;
    const e = this._options;
    for (const i in e) {
      const r = this._installFunc[i];
      r && e[i] && (gb(i), r(), this._installFunc[i] = void 0);
    }
  }
}
ei.__initStatic();
function hb() {
  qt(
    "error",
    (t) => {
      const [e, i, r] = Df();
      if (!e.getIntegration(ei))
        return;
      const { msg: s, url: f, line: g, column: l, error: n } = t;
      if (Ef() || n && n.__sentry_own_request__)
        return;
      const a = n === void 0 && Ai(s) ? pb(s, f, g, l) : Af(
        ac(i, n || s, void 0, r, !1),
        f,
        g,
        l
      );
      a.level = "error", Mf(e, n, a, "onerror");
    }
  );
}
function fb() {
  qt(
    "unhandledrejection",
    (t) => {
      const [e, i, r] = Df();
      if (!e.getIntegration(ei))
        return;
      let s = t;
      try {
        "reason" in t ? s = t.reason : "detail" in t && "reason" in t.detail && (s = t.detail.reason);
      } catch {
      }
      if (Ef() || s && s.__sentry_own_request__)
        return !0;
      const f = rf(s) ? db(s) : ac(i, s, void 0, r, !0);
      f.level = "error", Mf(e, s, f, "onunhandledrejection");
    }
  );
}
function db(t) {
  return {
    exception: {
      values: [
        {
          type: "UnhandledRejection",
          value: `Non-Error promise rejection captured with value: ${String(t)}`
        }
      ]
    }
  };
}
function pb(t, e, i, r) {
  const s = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;
  let f = tf(t) ? t.message : t, g = "Error";
  const l = f.match(s);
  return l && (g = l[1], f = l[2]), Af({
    exception: {
      values: [
        {
          type: g,
          value: f
        }
      ]
    }
  }, e, i, r);
}
function Af(t, e, i, r) {
  const s = t.exception = t.exception || {}, f = s.values = s.values || [], g = f[0] = f[0] || {}, l = g.stacktrace = g.stacktrace || {}, n = l.frames = l.frames || [], a = isNaN(parseInt(r, 10)) ? void 0 : r, h = isNaN(parseInt(i, 10)) ? void 0 : i, o = Ai(e) && e.length > 0 ? e : Um();
  return n.length === 0 && n.push({
    colno: a,
    filename: o,
    function: "?",
    in_app: !0,
    lineno: h
  }), t;
}
function gb(t) {
  (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.log(`Global Handler attached: ${t}`);
}
function Mf(t, e, i, r) {
  qr(i, {
    handled: !1,
    type: r
  }), t.captureEvent(i, {
    originalException: e
  });
}
function Df() {
  const t = Ye(), e = t.getClient(), i = e && e.getOptions() || {
    stackParser: () => [],
    attachStacktrace: !1
  };
  return [t, i.stackParser, i.attachStacktrace];
}
const mb = [
  "EventTarget",
  "Window",
  "Node",
  "ApplicationCache",
  "AudioTrackList",
  "ChannelMergerNode",
  "CryptoOperation",
  "EventSource",
  "FileReader",
  "HTMLUnknownElement",
  "IDBDatabase",
  "IDBRequest",
  "IDBTransaction",
  "KeyOperation",
  "MediaController",
  "MessagePort",
  "ModalWindow",
  "Notification",
  "SVGElementInstance",
  "Screen",
  "TextTrack",
  "TextTrackCue",
  "TextTrackList",
  "WebSocket",
  "WebSocketWorker",
  "Worker",
  "XMLHttpRequest",
  "XMLHttpRequestEventTarget",
  "XMLHttpRequestUpload"
];
class Qr {
  static __initStatic() {
    this.id = "TryCatch";
  }
  __init() {
    this.name = Qr.id;
  }
  constructor(e) {
    Qr.prototype.__init.call(this), this._options = {
      XMLHttpRequest: !0,
      eventTarget: !0,
      requestAnimationFrame: !0,
      setInterval: !0,
      setTimeout: !0,
      ...e
    };
  }
  setupOnce() {
    this._options.setTimeout && Ge(Ie, "setTimeout", Ml), this._options.setInterval && Ge(Ie, "setInterval", Ml), this._options.requestAnimationFrame && Ge(Ie, "requestAnimationFrame", vb), this._options.XMLHttpRequest && "XMLHttpRequest" in Ie && Ge(XMLHttpRequest.prototype, "send", bb);
    const e = this._options.eventTarget;
    e && (Array.isArray(e) ? e : mb).forEach(yb);
  }
}
Qr.__initStatic();
function Ml(t) {
  return function(...e) {
    const i = e[0];
    return e[0] = dr(i, {
      mechanism: {
        data: { function: ai(t) },
        handled: !0,
        type: "instrument"
      }
    }), t.apply(this, e);
  };
}
function vb(t) {
  return function(e) {
    return t.apply(this, [
      dr(e, {
        mechanism: {
          data: {
            function: "requestAnimationFrame",
            handler: ai(t)
          },
          handled: !0,
          type: "instrument"
        }
      })
    ]);
  };
}
function bb(t) {
  return function(...e) {
    const i = this;
    return ["onload", "onerror", "onprogress", "onreadystatechange"].forEach((s) => {
      s in i && typeof i[s] == "function" && Ge(i, s, function(f) {
        const g = {
          mechanism: {
            data: {
              function: s,
              handler: ai(f)
            },
            handled: !0,
            type: "instrument"
          }
        }, l = rc(f);
        return l && (g.mechanism.data.handler = ai(l)), dr(f, g);
      });
    }), t.apply(this, e);
  };
}
function yb(t) {
  const e = Ie, i = e[t] && e[t].prototype;
  !i || !i.hasOwnProperty || !i.hasOwnProperty("addEventListener") || (Ge(i, "addEventListener", function(r) {
    return function(s, f, g) {
      try {
        typeof f.handleEvent == "function" && (f.handleEvent = dr(f.handleEvent, {
          mechanism: {
            data: {
              function: "handleEvent",
              handler: ai(f),
              target: t
            },
            handled: !0,
            type: "instrument"
          }
        }));
      } catch {
      }
      return r.apply(this, [
        s,
        dr(f, {
          mechanism: {
            data: {
              function: "addEventListener",
              handler: ai(f),
              target: t
            },
            handled: !0,
            type: "instrument"
          }
        }),
        g
      ]);
    };
  }), Ge(
    i,
    "removeEventListener",
    function(r) {
      return function(s, f, g) {
        const l = f;
        try {
          const n = l && l.__sentry_wrapped__;
          n && r.call(this, s, n, g);
        } catch {
        }
        return r.call(this, s, l, g);
      };
    }
  ));
}
const wb = "cause", xb = 5;
class sr {
  static __initStatic() {
    this.id = "LinkedErrors";
  }
  __init() {
    this.name = sr.id;
  }
  constructor(e = {}) {
    sr.prototype.__init.call(this), this._key = e.key || wb, this._limit = e.limit || xb;
  }
  setupOnce() {
    const e = Ye().getClient();
    !e || sc((i, r) => {
      const s = Ye().getIntegration(sr);
      return s ? _b(e.getOptions().stackParser, s._key, s._limit, i, r) : i;
    });
  }
}
sr.__initStatic();
function _b(t, e, i, r, s) {
  if (!r.exception || !r.exception.values || !s || !_r(s.originalException, Error))
    return r;
  const f = If(t, i, s.originalException, e);
  return r.exception.values = [...f, ...r.exception.values], r;
}
function If(t, e, i, r, s = []) {
  if (!_r(i[r], Error) || s.length + 1 >= e)
    return s;
  const f = kf(t, i[r]);
  return If(t, e, i[r], r, [f, ...s]);
}
class or {
  constructor() {
    or.prototype.__init.call(this);
  }
  static __initStatic() {
    this.id = "HttpContext";
  }
  __init() {
    this.name = or.id;
  }
  setupOnce() {
    sc((e) => {
      if (Ye().getIntegration(or)) {
        if (!Ie.navigator && !Ie.location && !Ie.document)
          return e;
        const i = e.request && e.request.url || Ie.location && Ie.location.href, { referrer: r } = Ie.document || {}, { userAgent: s } = Ie.navigator || {}, f = {
          ...e.request && e.request.headers,
          ...r && { Referer: r },
          ...s && { "User-Agent": s }
        }, g = { ...e.request, ...i && { url: i }, headers: f };
        return { ...e, request: g };
      }
      return e;
    });
  }
}
or.__initStatic();
class ar {
  constructor() {
    ar.prototype.__init.call(this);
  }
  static __initStatic() {
    this.id = "Dedupe";
  }
  __init() {
    this.name = ar.id;
  }
  setupOnce(e, i) {
    const r = (s) => {
      if (s.type)
        return s;
      const f = i().getIntegration(ar);
      if (f) {
        try {
          if (Sb(s, f._previousEvent))
            return (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("Event dropped due to being a duplicate of previously captured event."), null;
        } catch {
          return f._previousEvent = s;
        }
        return f._previousEvent = s;
      }
      return s;
    };
    r.id = this.name, e(r);
  }
}
ar.__initStatic();
function Sb(t, e) {
  return e ? !!(Cb(t, e) || Tb(t, e)) : !1;
}
function Cb(t, e) {
  const i = t.message, r = e.message;
  return !(!i && !r || i && !r || !i && r || i !== r || !Lf(t, e) || !Rf(t, e));
}
function Tb(t, e) {
  const i = Dl(e), r = Dl(t);
  return !(!i || !r || i.type !== r.type || i.value !== r.value || !Lf(t, e) || !Rf(t, e));
}
function Rf(t, e) {
  let i = Il(t), r = Il(e);
  if (!i && !r)
    return !0;
  if (i && !r || !i && r || (i = i, r = r, r.length !== i.length))
    return !1;
  for (let s = 0; s < r.length; s++) {
    const f = r[s], g = i[s];
    if (f.filename !== g.filename || f.lineno !== g.lineno || f.colno !== g.colno || f.function !== g.function)
      return !1;
  }
  return !0;
}
function Lf(t, e) {
  let i = t.fingerprint, r = e.fingerprint;
  if (!i && !r)
    return !0;
  if (i && !r || !i && r)
    return !1;
  i = i, r = r;
  try {
    return i.join("") === r.join("");
  } catch {
    return !1;
  }
}
function Dl(t) {
  return t.exception && t.exception.values && t.exception.values[0];
}
function Il(t) {
  const e = t.exception;
  if (e)
    try {
      return e.values[0].stacktrace.frames;
    } catch {
      return;
    }
}
const Eb = [
  new nr(),
  new Zr(),
  new Qr(),
  new Jr(),
  new ei(),
  new sr(),
  new ar(),
  new or()
];
function kb(t = {}) {
  t.defaultIntegrations === void 0 && (t.defaultIntegrations = Eb), t.release === void 0 && (typeof __SENTRY_RELEASE__ == "string" && (t.release = __SENTRY_RELEASE__), Ie.SENTRY_RELEASE && Ie.SENTRY_RELEASE.id && (t.release = Ie.SENTRY_RELEASE.id)), t.autoSessionTracking === void 0 && (t.autoSessionTracking = !0), t.sendClientReports === void 0 && (t.sendClientReports = !0);
  const e = {
    ...t,
    stackParser: ev(t.stackParser || ub),
    integrations: o0(t),
    transport: t.transport || (uf() ? Y0 : X0)
  };
  m0(H0, e), t.autoSessionTracking && Ob();
}
function Rl(t) {
  t.startSession({ ignoreDuration: !0 }), t.captureSession();
}
function Ob() {
  if (typeof Ie.document > "u") {
    (typeof __SENTRY_DEBUG__ > "u" || __SENTRY_DEBUG__) && Ce.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");
    return;
  }
  const t = Ye();
  !t.captureSession || (Rl(t), qt("history", ({ from: e, to: i }) => {
    e === void 0 || e === i || Rl(Ye());
  }));
}
function Pb(t) {
  t._metadata = t._metadata || {}, t._metadata.sdk = t._metadata.sdk || {
    name: "sentry.javascript.react",
    packages: [
      {
        name: "npm:@sentry/react",
        version: ts
      }
    ],
    version: ts
  }, kb(t);
}
var qi = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Ab(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
function Mb(t) {
  var e = t.default;
  if (typeof e == "function") {
    var i = function() {
      return e.apply(this, arguments);
    };
    i.prototype = e.prototype;
  } else
    i = {};
  return Object.defineProperty(i, "__esModule", { value: !0 }), Object.keys(t).forEach(function(r) {
    var s = Object.getOwnPropertyDescriptor(t, r);
    Object.defineProperty(i, r, s.get ? s : {
      enumerable: !0,
      get: function() {
        return t[r];
      }
    });
  }), i;
}
var Rs = { exports: {} }, Ls = {};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Db = ue, Ib = Symbol.for("react.element"), Rb = Symbol.for("react.fragment"), Lb = Object.prototype.hasOwnProperty, Fb = Db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, zb = { key: !0, ref: !0, __self: !0, __source: !0 };
function Ff(t, e, i) {
  var r, s = {}, f = null, g = null;
  i !== void 0 && (f = "" + i), e.key !== void 0 && (f = "" + e.key), e.ref !== void 0 && (g = e.ref);
  for (r in e)
    Lb.call(e, r) && !zb.hasOwnProperty(r) && (s[r] = e[r]);
  if (t && t.defaultProps)
    for (r in e = t.defaultProps, e)
      s[r] === void 0 && (s[r] = e[r]);
  return { $$typeof: Ib, type: t, key: f, ref: g, props: s, _owner: Fb.current };
}
Ls.Fragment = Rb;
Ls.jsx = Ff;
Ls.jsxs = Ff;
(function(t) {
  t.exports = Ls;
})(Rs);
const rs = Rs.exports.Fragment, x = Rs.exports.jsx, ie = Rs.exports.jsxs;
var lc = /* @__PURE__ */ ((t) => (t.INLINE = "inline", t.OVERLAY = "overlay", t))(lc || {}), zf = /* @__PURE__ */ ((t) => (t.TOP = "top", t.BOTTOM = "bottom", t.HIDDEN = "", t))(zf || {});
const Bb = [
  {
    name: "circle",
    type: "Circle"
  },
  {
    name: "square",
    type: "Rect",
    options: {
      lockUniScaling: !1
    }
  },
  {
    name: "triangle",
    type: "Triangle"
  },
  {
    name: "ellipse",
    type: "Ellipse",
    options: {
      lockUniScaling: !1
    }
  },
  {
    name: "Arrow #1",
    type: "Path",
    options: {
      path: "M 294.9 16.4 l 15.7 42.2 c -171.4 70.3 -294 242.3 -289.1 437.4 l 14.7 -1 c 9.1 -0.6 18.1 -1.2 27.1 -1.9 l 14.7 -1 c -4.3 -170.1 102.5 -320 252 -381.3 l 15.7 42.2 c 34.7 -40.5 83.1 -76.6 144.8 -99.8 c -58.1 -26.2 -124.9 -39.6 -195.6 -36.8 z"
    }
  },
  {
    name: "Arrow #2",
    type: "Path",
    options: {
      path: "M 16 248.4 v 14.9 h 447.5 l -93.2 82.5 l 11.9 10.5 l 113.8 -100.2 l -113.6 -100.4 l -11.8 10.5 l 92.9 82.2 z"
    }
  },
  {
    name: "Arrow #3",
    type: "Path",
    options: {
      path: "M 496 256 l -118.6 -66 v 40.8 h -361.4 v 50.4 h 361.4 v 40.8 l 118.6 -66 z"
    }
  },
  {
    name: "Line",
    type: "Path",
    options: {
      path: "M 16 256 h 480",
      strokeWidth: 10,
      stroke: "#000",
      padding: 10
    }
  },
  {
    name: "Star",
    type: "Path",
    options: {
      path: "M 256 406.3 l 148.3 78 l -28.3 -165.2 l 120 -117 l -165.8 -24.1 l -74.2 -150.3 l -74.2 150.3 l -165.8 24.1 l 120 117 l -28.3 165.2 z"
    }
  },
  {
    name: "Polygon",
    type: "Path",
    options: {
      path: "M 256 19.6 l 156.6 57.1 l 83.4 144.3 l -28.9 164.2 l -127.7 107.2 h -166.8 l -127.7 -107.2 l -28.9 -164.2 l 83.4 -144.3 z"
    }
  },
  {
    name: "Badge",
    type: "Path",
    options: {
      path: "M 257.3 16.2 s -148 58.2 -204.4 81.4 c 0 75.7 -16.8 303.5 204.4 398.2 c 218.7 -94.6 201.9 -322.4 201.9 -398.2 c -62.1 -23.6 -201.9 -81.4 -201.9 -81.4 z"
    }
  }
], jb = [
  "afro-1",
  "afro",
  "agent",
  "alien-1",
  "alien",
  "angel",
  "angry-1",
  "angry-2",
  "angry-3",
  "angry-4",
  "angry-5",
  "angry",
  "arguing",
  "arrogant",
  "asian-1",
  "asian",
  "avatar",
  "baby-1",
  "baby-2",
  "baby",
  "bully",
  "burglar",
  "businessman",
  "cheeky-1",
  "cheeky",
  "clown",
  "confused-1",
  "confused-2",
  "confused-3",
  "confused",
  "creepy",
  "crying-1",
  "crying-2",
  "crying-3",
  "crying",
  "dazed-1",
  "dazed-2",
  "dazed-3",
  "dazed",
  "dead-1",
  "dead-2",
  "dead-3",
  "dead-4",
  "dead-5",
  "dead-6",
  "dead",
  "desperate-1",
  "desperate",
  "detective",
  "dissapointment",
  "doctor",
  "drunk",
  "dumb",
  "emo-1",
  "emo-2",
  "emo",
  "emoticon",
  "evil",
  "faint-1",
  "faint",
  "flirt-1",
  "flirt-2",
  "flirt",
  "flirty",
  "gangster",
  "geek-1",
  "geek",
  "gentleman-1",
  "gentleman-2",
  "gentleman-3",
  "gentleman-4",
  "gentleman",
  "ginger",
  "girl-1",
  "girl",
  "goofy-1",
  "goofy-2",
  "goofy-3",
  "goofy-4",
  "goofy",
  "grubby-1",
  "grubby",
  "happy-1",
  "happy-10",
  "happy-11",
  "happy-12",
  "happy-13",
  "happy-14",
  "happy-15",
  "happy-16",
  "happy-2",
  "happy-3",
  "happy-4",
  "happy-5",
  "happy-6",
  "happy-7",
  "happy-8",
  "happy-9",
  "happy",
  "harry-potter",
  "heisenberg",
  "hipster-1",
  "hipster-2",
  "hipster",
  "in-love-1",
  "in-love-2",
  "in-love-3",
  "in-love-4",
  "in-love-5",
  "in-love-6",
  "in-love",
  "japan",
  "jew",
  "joyful-1",
  "joyful-2",
  "joyful",
  "kiss-1",
  "kiss-2",
  "kiss-3",
  "kiss-4",
  "kiss",
  "laughing-1",
  "laughing-2",
  "laughing-3",
  "laughing",
  "listening",
  "love",
  "manly",
  "miserly-1",
  "miserly",
  "nerd-1",
  "nerd-2",
  "nerd-3",
  "nerd-4",
  "nerd",
  "ninja",
  "pirate-1",
  "pirate-2",
  "pirate",
  "punk-1",
  "punk-2",
  "punk",
  "rapper",
  "relieved",
  "rich-1",
  "rich-2",
  "rich",
  "rockstar",
  "sad-1",
  "sad-2",
  "sad-3",
  "sad-4",
  "sad-5",
  "sad-6",
  "sad",
  "scared-1",
  "scared-2",
  "scared-3",
  "scared",
  "sceptic-1",
  "sceptic-2",
  "sceptic-3",
  "sceptic-4",
  "sceptic-5",
  "sceptic-6",
  "sceptic-7",
  "sceptic",
  "secret",
  "shocked-1",
  "shocked-2",
  "shocked-3",
  "shocked",
  "sick-1",
  "sick-2",
  "sick-3",
  "sick-4",
  "sick",
  "silent",
  "skeleton",
  "smile",
  "smiling-1",
  "smiling",
  "smoked",
  "smug-1",
  "smug-2",
  "smug-3",
  "smug-4",
  "smug-5",
  "smug-6",
  "smug",
  "sporty",
  "stunned",
  "superhero-1",
  "superhero-2",
  "superhero-3",
  "superhero-4",
  "superhero",
  "surprised-1",
  "surprised",
  "thinking",
  "tired-1",
  "tired-2",
  "tired-3",
  "tired",
  "tough-1",
  "tough",
  "trendy",
  "vampire-1",
  "vampire",
  "wink-1",
  "wink-2",
  "wink",
  "winking-1",
  "winking",
  "yawning-1",
  "yawning-2",
  "yawning-3",
  "yawning",
  "yelling",
  "zombie"
];
function ne(t, e) {
  return { ...e, message: t };
}
const Nb = [
  {
    name: "emoticons",
    list: jb,
    type: "svg",
    thumbnailUrl: "images/stickers/categories/emoticon.svg"
  },
  {
    name: "doodles",
    items: 100,
    type: "svg",
    thumbnailUrl: "images/stickers/categories/doodles.svg"
  },
  {
    name: "landmarks",
    items: 100,
    type: "svg",
    thumbnailUrl: "images/stickers/categories/landmark.svg",
    invertPreview: !0
  },
  {
    name: "bubbles",
    items: 104,
    type: "png",
    thumbnailUrl: "images/stickers/categories/speech-bubble.svg"
  },
  {
    name: "transportation",
    items: 22,
    type: "svg",
    thumbnailUrl: "images/stickers/categories/transportation.svg",
    invertPreview: !0
  },
  {
    name: "beach",
    items: 22,
    type: "svg",
    thumbnailUrl: "images/stickers/categories/beach.svg",
    invertPreview: !0
  }
], Vb = {
  emoticons: ne("Emoticons"),
  doodles: ne("Doodles"),
  landmarks: ne("Landmarks"),
  bubbles: ne("Bubbles"),
  transportation: ne("Transportation"),
  beach: ne("Beach")
}, uc = {
  fill: "#1565C0",
  opacity: 1,
  backgroundColor: null,
  strokeWidth: 0.05,
  stroke: "#000"
}, $b = [
  "PencilBrush",
  "EraserBrush",
  "SprayBrush",
  "CircleBrush",
  "DiamondBrush",
  "VLineBrush",
  "HLineBrush",
  "SquareBrush"
], Bf = [1, 8, 15, 20, 25];
var ns = /* @__PURE__ */ ((t) => (t.DARK = "dark", t.LIGHT = "light", t))(ns || {});
const sa = [
  {
    name: ns.LIGHT,
    colors: {
      "--be-foreground-base": "0 0 0",
      "--be-primary-light": "191 219 254",
      "--be-primary": "59 130 246",
      "--be-primary-dark": "37 99 235",
      "--be-on-primary": "255 255 255",
      "--be-danger": "179 38 30",
      "--be-on-danger": "255 255 255",
      "--be-background": "255 255 255",
      "--be-background-alt": "250 250 250",
      "--be-paper": "255 255 255",
      "--be-disabled-bg-opacity": "12%",
      "--be-disabled-fg-opacity": "26%",
      "--be-hover-opacity": "4%",
      "--be-focus-opacity": "12%",
      "--be-selected-opacity": "8%",
      "--be-text-main-opacity": "87%",
      "--be-text-muted-opacity": "60%",
      "--be-divider-opacity": "12%"
    }
  },
  {
    name: ns.DARK,
    isDark: !0,
    colors: {
      "--be-foreground-base": "255 255 255",
      "--be-primary-light": "239 246 255",
      "--be-primary": "191 219 254",
      "--be-primary-dark": "147 197 253",
      "--be-on-primary": "56 30 114",
      "--be-danger": "242 184 181",
      "--be-on-danger": "96 20 16",
      "--be-background": "20 21 23",
      "--be-background-alt": "26 27 30",
      "--be-paper": "44 46 51",
      "--be-disabled-bg-opacity": "12%",
      "--be-disabled-fg-opacity": "30%",
      "--be-hover-opacity": "8%",
      "--be-focus-opacity": "12%",
      "--be-selected-opacity": "16%",
      "--be-text-main-opacity": "100%",
      "--be-text-muted-opacity": "70%",
      "--be-divider-opacity": "12%"
    }
  }
];
var Ae = /* @__PURE__ */ ((t) => (t.FILTER = "filter", t.RESIZE = "resize", t.CROP = "crop", t.DRAW = "draw", t.TEXT = "text", t.SHAPES = "shapes", t.STICKERS = "stickers", t.FRAME = "frame", t.CORNERS = "corners", t.MERGE = "merge", t))(Ae || {});
function jf(t) {
  var e, i, r = "";
  if (typeof t == "string" || typeof t == "number")
    r += t;
  else if (typeof t == "object")
    if (Array.isArray(t))
      for (e = 0; e < t.length; e++)
        t[e] && (i = jf(t[e])) && (r && (r += " "), r += i);
    else
      for (e in t)
        t[e] && (r && (r += " "), r += e);
  return r;
}
function ae() {
  for (var t, e, i = 0, r = ""; i < arguments.length; )
    (t = arguments[i++]) && (e = jf(t)) && (r && (r += " "), r += e);
  return r;
}
const Hb = qe((t, e) => {
  const {
    attr: i,
    size: r,
    title: s,
    className: f,
    color: g,
    style: l,
    children: n,
    viewBox: a,
    width: h,
    height: o,
    ...u
  } = t;
  return /* @__PURE__ */ ie("svg", {
    "aria-hidden": !s,
    focusable: !1,
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: a || "0 0 24 24",
    ...i,
    ...u,
    className: ae("svg-icon", f, Ub(r)),
    style: {
      color: g,
      ...l
    },
    ref: e,
    height: o || "1em",
    width: h || "1em",
    children: [s && /* @__PURE__ */ x("title", {
      children: s
    }), n]
  });
});
function Ub(t) {
  switch (t) {
    case "2xs":
      return "icon-2xs";
    case "xs":
      return "icon-xs";
    case "sm":
      return "icon-sm";
    case "md":
      return "icon-md";
    case "lg":
      return "icon-lg";
    case "xl":
      return "icon-xl";
    default:
      return t;
  }
}
function me(t, e = "", i) {
  const r = (s, f) => /* @__PURE__ */ x(Hb, {
    "data-testid": `${e}Icon`,
    ref: f,
    viewBox: i,
    ...s,
    size: s.size || "md",
    children: t
  });
  return ue.memo(ue.forwardRef(r));
}
function Wb(t, e = "") {
  const i = Nf(t);
  return me(i, e);
}
function Nf(t) {
  return (t == null ? void 0 : t.map) && t.map((e, i) => ue.createElement(e.tag, {
    key: i,
    ...e.attr
  }, Nf(e.child)));
}
const Vf = me(/* @__PURE__ */ x("path", {
  d: "M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"
}), "TuneOutlined"), Yb = me(/* @__PURE__ */ x("path", {
  d: "M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z"
}), "PhotoSizeSelectLargeOutlined"), Gb = me(/* @__PURE__ */ x("path", {
  d: "M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"
}), "CropOutlined"), Xb = me(/* @__PURE__ */ x("path", {
  d: "M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"
}), "TextFieldsOutlined"), Kb = me(/* @__PURE__ */ x("path", {
  d: "M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z"
}), "ExtensionOutlined"), qb = me(/* @__PURE__ */ x("path", {
  d: "M10.25 13c0 .69-.56 1.25-1.25 1.25S7.75 13.69 7.75 13s.56-1.25 1.25-1.25 1.25.56 1.25 1.25zM15 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm7 .25c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zM10.66 4.12C12.06 6.44 14.6 8 17.5 8c.46 0 .91-.05 1.34-.12C17.44 5.56 14.9 4 12 4c-.46 0-.91.05-1.34.12zM4.42 9.47c1.71-.97 3.03-2.55 3.66-4.44C6.37 6 5.05 7.58 4.42 9.47zM20 12c0-.78-.12-1.53-.33-2.24-.7.15-1.42.24-2.17.24-3.13 0-5.92-1.44-7.76-3.69C8.69 8.87 6.6 10.88 4 11.86c.01.04 0 .09 0 .14 0 4.41 3.59 8 8 8s8-3.59 8-8z"
}), "FaceOutlined"), Zb = me(/* @__PURE__ */ x("path", {
  d: "M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM6 18h12V8H6v10zm2-8h8v6H8v-6z"
}), "FilterFramesOutlined"), Jb = me(/* @__PURE__ */ x("path", {
  d: "M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41 6.41 21z"
}), "MergeOutlined"), Qb = me(/* @__PURE__ */ x("path", {
  d: "M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"
}), "RoundedCornerOutlined"), Ll = me(/* @__PURE__ */ x("path", {
  d: "M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"
}), "PhotoLibraryOutlined"), $f = me(/* @__PURE__ */ x("path", {
  d: "M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"
}), "HistoryOutlined"), ey = me([/* @__PURE__ */ x("path", {
  d: "m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z"
}, "0"), /* @__PURE__ */ x("circle", {
  cx: "11",
  cy: "9",
  r: "1"
}, "1"), /* @__PURE__ */ x("path", {
  d: "M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"
}, "2")], "StyleOutlined"), ty = me(/* @__PURE__ */ x("path", {
  d: "M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"
}), "DeleteOutlined"), iy = me(/* @__PURE__ */ x("path", {
  d: "M18.85,10.39l1.06-1.06c0.78-0.78,0.78-2.05,0-2.83L18.5,5.09c-0.78-0.78-2.05-0.78-2.83,0l-1.06,1.06L18.85,10.39z M14.61,11.81L7.41,19H6v-1.41l7.19-7.19L14.61,11.81z M13.19,7.56L4,16.76V21h4.24l9.19-9.19L13.19,7.56L13.19,7.56z M19,17.5 c0,2.19-2.54,3.5-5,3.5c-0.55,0-1-0.45-1-1s0.45-1,1-1c1.54,0,3-0.73,3-1.5c0-0.47-0.48-0.87-1.23-1.2l1.48-1.48 C18.32,15.45,19,16.29,19,17.5z M4.58,13.35C3.61,12.79,3,12.06,3,11c0-1.8,1.89-2.63,3.56-3.36C7.59,7.18,9,6.56,9,6 c0-0.41-0.78-1-2-1C5.74,5,5.2,5.61,5.17,5.64C4.82,6.05,4.19,6.1,3.77,5.76C3.36,5.42,3.28,4.81,3.62,4.38C3.73,4.24,4.76,3,7,3 c2.24,0,4,1.32,4,3c0,1.87-1.93,2.72-3.64,3.47C6.42,9.88,5,10.5,5,11c0,0.31,0.43,0.6,1.07,0.86L4.58,13.35z"
}), "Draw"), ry = me(/* @__PURE__ */ x("path", {
  d: "m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3 2 12h3v8h6v-6h2v6h6v-8h3L12 3z"
}), "HomeOutlined"), Kt = {
  [Ae.FILTER]: {
    name: ne("Applied Filters"),
    icon: Vf
  },
  [Ae.RESIZE]: {
    name: ne("Resized Image"),
    icon: Yb
  },
  [Ae.CROP]: {
    name: ne("Cropped Image"),
    icon: Gb
  },
  [Ae.DRAW]: {
    name: ne("Added Drawing"),
    icon: iy
  },
  [Ae.TEXT]: {
    name: ne("Added Text"),
    icon: Xb
  },
  [Ae.SHAPES]: {
    name: ne("Added Shape"),
    icon: Kb
  },
  [Ae.STICKERS]: {
    name: ne("Added Sticker"),
    icon: qb
  },
  [Ae.FRAME]: {
    name: ne("Added Frame"),
    icon: Zb
  },
  [Ae.MERGE]: {
    name: ne("Merged Objects"),
    icon: Jb
  },
  [Ae.CORNERS]: {
    name: ne("Rounded Corner"),
    icon: Qb
  },
  bgImage: {
    name: ne("Replaced Background Image"),
    icon: Ll
  },
  overlayImage: {
    name: ne("Added Image"),
    icon: Ll
  },
  initial: { name: ne("Initial"), icon: ry },
  loadedState: {
    name: ne("Loaded State"),
    icon: $f
  },
  objectStyle: {
    name: ne("Changed Style"),
    icon: ey
  },
  deletedObject: {
    name: ne("Deleted object"),
    icon: ty
  }
}, ny = Object.values(Ae).map(
  (t) => ({
    name: t,
    icon: Kt[t].icon,
    action: t === Ae.MERGE ? (e) => {
      e.tools.merge.apply();
    } : t
  })
), sy = {
  filter: ne("Filter"),
  resize: ne("Resize"),
  crop: ne("Crop"),
  draw: ne("Draw"),
  text: ne("Text"),
  shapes: ne("Shapes"),
  Stickers: ne("Stickers"),
  frame: ne("Frame"),
  corners: ne("Corners"),
  merge: ne("Merge")
}, oy = me(/* @__PURE__ */ x("path", {
  d: "M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"
}), "FileDownloadOutlined"), ay = "photalius", cy = "3.0.4", ly = "dist/photalius.umd.js", uy = "dist/photalius.es.js", hy = "dist/types/src/photalius.d.ts", fy = {
  ".": {
    import: "./dist/photalius.es.js",
    require: "./dist/photalius.umd.js"
  }
}, dy = [
  "dist"
], py = {
  dev: "vite --host",
  build: "vite build && npm run build-umd && npm run types && npm run build-cc",
  types: "tsc --skipLibCheck --emitDeclarationOnly --noEmit false --declarationMap false",
  "build-umd": "vite build --config scripts/vite-umd.config.ts",
  "build-cc": "./scripts/build-cc.sh",
  serve: "vite preview",
  extract: "node ./scripts/extract-translations.js"
}, gy = {
  "@floating-ui/react-dom": "^1.0.0",
  "@internationalized/date": "^3.0.1",
  "@internationalized/number": "^3.0.3",
  "@react-aria/focus": "3.7.0",
  "@react-aria/interactions": "^3.11.0",
  "@react-aria/overlays": "^3.10.1",
  "@react-aria/ssr": "^3.3.0",
  "@react-aria/utils": "^3.15.0",
  "@react-stately/color": "^3.3.0",
  "@react-stately/utils": "^3.5.1",
  "@sentry/react": "^7.43.0",
  "@sentry/tracing": "^7.43.0",
  "@tailwindcss/container-queries": "^0.1.1",
  "@tanstack/react-query": "^4.3.4",
  "@tanstack/react-virtual": "^3.0.0-beta.34",
  "@use-gesture/react": "^10.2.20",
  axios: "^0.27.2",
  "axios-retry": "^3.3.1",
  clsx: "^1.2.1",
  color: "^4.2.3",
  "deep-object-diff": "^1.1.7",
  deepmerge: "^4.2.2",
  "dot-object": "^2.1.4",
  fabric: "^5.2.4",
  "file-saver": "^2.0.5",
  "framer-motion": "^10.8.4",
  immer: "^9.0.15",
  "linkify-string": "^4.1.0",
  "mime-match": "^1.0.2",
  "nano-memoize": "^1.3.0",
  nanoid: "^4.0.0",
  "number-precision": "^1.5.1",
  react: ">=18.2.0",
  "react-ace": "^10.1.0",
  "react-colorful": "^5.6.1",
  "react-dom": ">=18.2.0",
  "react-hook-form": "^7.36.1",
  "react-merge-refs": "^2.0.1",
  "react-router-dom": "^6.4.1",
  "react-textarea-autosize": "^8.3.3",
  "react-use-clipboard": "^1.0.7",
  "react-use-cookie": "^1.4.0",
  slugify: "^1.6.5",
  "style-inject": "^0.3.0",
  "tus-js-client": "^3.0.1",
  zustand: "^4.1.1"
}, my = {
  react: ">=18.2.0",
  "react-dom": ">=18.2.0"
}, vy = {
  "@faker-js/faker": "^7.5.0",
  "@tailwindcss/typography": "^0.5.7",
  "@types/color": "^3.0.2",
  "@types/dot-object": "^2.1.2",
  "@types/fabric": "^4.5.12",
  "@types/file-saver": "^2.0.4",
  "@types/lodash.debounce": "^4.0.6",
  "@types/node": "^18.15.11",
  "@types/react": "^18.0.21",
  "@types/react-dom": "^18.0.6",
  "@types/react-recaptcha-v3": "^1.1.2",
  "@types/swagger-ui-react": "^4.11.0",
  "@typescript-eslint/eslint-plugin": "^5.38.0",
  "@typescript-eslint/parser": "^5.38.0",
  "@vitejs/plugin-react": "^2.1.0",
  autoprefixer: "^10.4.12",
  cssnano: "^5.1.13",
  eslint: "8.22",
  "eslint-config-prettier": "^8.3.0",
  "eslint-plugin-import": "^2.25.2",
  "eslint-plugin-jsx-a11y": "^6.6.1",
  "eslint-plugin-react": "^7.31.8",
  "eslint-plugin-react-hooks": "^4.6.0",
  "fast-glob": "^3.2.12",
  "fast-xml-parser": "^4.0.10",
  "fs-extra": "^10.1.0",
  postcss: "^8.4.16",
  prettier: "^2.7.1",
  "rollup-plugin-visualizer": "^5.8.1",
  tailwindcss: "^3.1.8",
  typescript: "^4.8.3",
  "utility-types": "^3.10.0",
  vite: "^3.1.3",
  "vite-plugin-checker": "^0.5.1",
  "vite-tsconfig-paths": "^3.6.0"
}, by = {
  name: ay,
  version: cy,
  main: ly,
  module: uy,
  types: hy,
  private: !0,
  exports: fy,
  files: dy,
  scripts: py,
  dependencies: gy,
  peerDependencies: my,
  devDependencies: vy
}, yy = by.version, Hf = {
  selector: "photalius-editor",
  textureSize: 4096,
  activeLanguage: "en",
  ui: {
    visible: !0,
    mode: lc.INLINE,
    forceOverlayModeOnMobile: !0,
    activeTheme: ns.LIGHT,
    themes: sa,
    allowEditorClose: !0,
    menubar: {
      items: [
        {
          type: "undoWidget",
          align: "left"
        },
        {
          type: "zoomWidget",
          align: "center",
          desktopOnly: !0
        },
        {
          type: "button",
          icon: $f,
          align: "right",
          desktopOnly: !0,
          action: (t) => {
            t.togglePanel("history");
          }
        },
        {
          type: "button",
          icon: oy,
          label: ne("Done"),
          align: "right",
          action: (t) => {
            var e;
            (e = t.state.config.ui) != null && e.showExportPanel ? t.state.togglePanel("export", !0) : t.tools.export.save("image");
          }
        }
      ]
    },
    nav: {
      position: zf.BOTTOM,
      items: [...ny]
    },
    openImageDialog: {
      show: !0,
      sampleImages: [
        {
          url: "images/samples/sample1.jpg",
          thumbnail: "images/samples/sample1_thumbnail.jpg"
        },
        {
          url: "images/samples/sample2.jpg",
          thumbnail: "images/samples/sample2_thumbnail.jpg"
        },
        {
          url: "images/samples/sample3.jpg",
          thumbnail: "images/samples/sample3_thumbnail.jpg"
        }
      ]
    },
    colorPresets: {
      items: [
        "rgb(0,0,0)",
        "rgb(255, 255, 255)",
        "rgb(242, 38, 19)",
        "rgb(249, 105, 14)",
        "rgb(253, 227, 167)",
        "rgb(4, 147, 114)",
        "rgb(30, 139, 195)",
        "rgb(142, 68, 173)"
      ]
    }
  },
  objectDefaults: {
    global: {
      ...uc
    },
    sticker: {
      fill: void 0
    },
    text: {
      textAlign: "initial",
      underline: !1,
      linethrough: !1,
      fontStyle: "normal",
      fontFamily: "Times New Roman",
      fontWeight: "normal",
      stroke: void 0,
      fontSize: 40
    }
  },
  tools: {
    filter: {
      items: [
        "grayscale",
        "blackWhite",
        "sharpen",
        "invert",
        "vintage",
        "polaroid",
        "kodachrome",
        "technicolor",
        "brownie",
        "sepia",
        "removeColor",
        "brightness",
        "gamma",
        "noise",
        "pixelate",
        "blur",
        "emboss",
        "blendColor"
      ]
    },
    zoom: {
      allowUserZoom: !0,
      fitImageToScreen: !0
    },
    crop: {
      allowCustomRatio: !0,
      defaultRatio: "1:1",
      presets: [
        { ratio: null, name: "Custom" },
        { ratio: "1:1", name: "Square" },
        { ratio: "4:3" },
        { ratio: "16:9" },
        { ratio: "5:3" },
        { ratio: "5:4" },
        { ratio: "6:4" },
        { ratio: "7:5" },
        { ratio: "10:8" }
      ]
    },
    text: {
      defaultText: "Double click to edit",
      controlsPadding: 6,
      items: [
        {
          family: "Roboto",
          src: "fonts/open-sans-v27-latin-ext_latin-regular.woff2"
        },
        {
          family: "Shabnam (fa)",
          src: "fonts/shabnam/Shabnam.woff2"
        },
        {
          family: "Shabnam Bold (fa)",
          src: "fonts/shabnam/Shabnam-Bold.woff2"
        },
        {
          family: "Shabnam Light (fa)",
          src: "fonts/shabnam/Shabnam-Light.woff2"
        },
        {
          family: "Shabnam Medium (fa)",
          src: "fonts/shabnam/Shabnam-Medium.woff2"
        },
        {
          family: "Shabnam Thin (fa)",
          src: "fonts/shabnam/Shabnam-Thin.woff2"
        },
        {
          family: "Fuzzy Bubbles",
          src: "fonts/fuzzy-bubbles-v3-latin-700.woff2",
          descriptors: { weight: "700" }
        },
        {
          family: "Aleo Bold",
          src: "fonts/aleo-v4-latin-ext_latin-700.woff2",
          descriptors: { weight: "700" }
        },
        {
          family: "Vazirmatn Bold (fa)",
          src: "fonts/vazirmatn/Vazirmatn-Bold.woff2"
        },
        {
          family: "Vazirmatn Light (fa)",
          src: "fonts/vazirmatn/Vazirmatn-Light.woff2"
        },
        {
          family: "Vazirmatn Medium (fa)",
          src: "fonts/vazirmatn/Vazirmatn-Medium.woff2"
        },
        {
          family: "Vazirmatn Regular (fa)",
          src: "fonts/vazirmatn/Vazirmatn-Regular.woff2"
        },
        {
          family: "Vazirmatn Thin (fa)",
          src: "fonts/vazirmatn/Vazirmatn-Thin.woff2"
        },
        {
          family: "Amatic SC",
          src: "fonts/amatic-sc-v16-latin-ext_latin-regular.woff2"
        },
        {
          family: "Tanha (fa)",
          src: "fonts/Tanha.woff2"
        },
        {
          family: "Gandom (fa)",
          src: "fonts/Gandom.woff2"
        },
        {
          family: "Nahid (fa)",
          src: "fonts/Nahid.woff2"
        },
        {
          family: "Corinthia Bold",
          src: "fonts/corinthia-v7-latin-ext_latin-700.woff2"
        },
        {
          family: "Bungee Inline",
          src: "fonts/bungee-inline-v6-latin-ext_latin-regular.woff2"
        },
        {
          family: "Robot Slab Bold",
          src: "fonts/roboto-slab-v16-latin-ext_latin-500.woff2"
        },
        {
          family: "Carter One",
          src: "fonts/carter-one-v12-latin-regular.woff2"
        },
        {
          family: "Cody Star",
          src: "fonts/codystar-v10-latin-ext_latin-regular.woff2"
        },
        {
          family: "Fira Sans",
          src: "fonts/fira-sans-v11-latin-ext_latin_cyrillic-regular.woff2"
        },
        {
          family: "Krona One",
          src: "fonts/krona-one-v9-latin-ext_latin-regular.woff2"
        },
        {
          family: "Kumar One Outline",
          src: "fonts/kumar-one-outline-v8-latin-ext_latin-regular.woff2"
        },
        {
          family: "Lobster Two",
          src: "fonts/lobster-two-v13-latin-regular.woff2"
        },
        {
          family: "Molle Italic",
          src: "fonts/molle-v11-latin-ext_latin-italic.woff2"
        },
        {
          family: "Monoton",
          src: "fonts/monoton-v10-latin-regular.woff2"
        },
        {
          family: "Nixie One",
          src: "fonts/nixie-one-v11-latin-regular.woff2"
        },
        {
          family: "Permanent Marker",
          src: "fonts/permanent-marker-v10-latin-regular.woff2"
        },
        {
          family: "Sancreek",
          src: "fonts/sancreek-v13-latin-ext_latin-regular.woff2"
        },
        {
          family: "Stint Ultra Expanded",
          src: "fonts/stint-ultra-expanded-v10-latin-regular.woff2"
        },
        {
          family: "VT323",
          src: "fonts/vt323-v12-latin-ext_latin-regular.woff2"
        },
        {
          family: "Trash Hand",
          src: "fonts/TrashHand.ttf"
        }
      ]
    },
    draw: {
      brushSizes: Bf,
      brushTypes: $b
    },
    shapes: {
      items: Bb.slice()
    },
    stickers: {
      items: Nb
    },
    import: {
      validImgExtensions: ["png", "jpg", "jpeg", "svg", "gif", "webp"],
      fitOverlayToScreen: !0,
      openDroppedImageAsBackground: !1
    },
    export: {
      defaultFormat: "png",
      defaultQuality: 1,
      defaultName: "photalius"
    },
    frame: {
      items: [
        {
          name: "basic",
          mode: "basic",
          size: {
            min: 1,
            max: 35,
            default: 10
          }
        },
        {
          name: "pine",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 15
          }
        },
        {
          name: "oak",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 15
          }
        },
        {
          name: "rainbow",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 15
          }
        },
        {
          name: "grunge1",
          display_name: "grunge #1",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 15
          }
        },
        {
          name: "grunge2",
          display_name: "grunge #2",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 20
          }
        },
        {
          name: "ebony",
          mode: "stretch",
          size: {
            min: 1,
            max: 35,
            default: 15
          }
        },
        {
          name: "art1",
          display_name: "Art #1",
          mode: "repeat",
          size: {
            min: 10,
            max: 70,
            default: 55
          }
        },
        {
          name: "art2",
          display_name: "Art #2",
          mode: "repeat",
          size: {
            min: 10,
            max: 70,
            default: 55
          }
        }
      ]
    }
  }
}, Fl = (t) => {
  let e;
  const i = /* @__PURE__ */ new Set(), r = (n, a) => {
    const h = typeof n == "function" ? n(e) : n;
    if (!Object.is(h, e)) {
      const o = e;
      e = (a != null ? a : typeof h != "object") ? h : Object.assign({}, e, h), i.forEach((u) => u(e, o));
    }
  }, s = () => e, l = { setState: r, getState: s, subscribe: (n) => (i.add(n), () => i.delete(n)), destroy: () => {
    ({ BASE_URL: "/", MODE: "production", DEV: !1, PROD: !0 } && "production") !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), i.clear();
  } };
  return e = t(r, s, l), l;
}, wy = (t) => t ? Fl(t) : Fl;
var Uf = { exports: {} }, Wf = {}, Yf = { exports: {} }, Gf = {};
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var pr = ue;
function xy(t, e) {
  return t === e && (t !== 0 || 1 / t === 1 / e) || t !== t && e !== e;
}
var _y = typeof Object.is == "function" ? Object.is : xy, Sy = pr.useState, Cy = pr.useEffect, Ty = pr.useLayoutEffect, Ey = pr.useDebugValue;
function ky(t, e) {
  var i = e(), r = Sy({ inst: { value: i, getSnapshot: e } }), s = r[0].inst, f = r[1];
  return Ty(function() {
    s.value = i, s.getSnapshot = e, vo(s) && f({ inst: s });
  }, [t, i, e]), Cy(function() {
    return vo(s) && f({ inst: s }), t(function() {
      vo(s) && f({ inst: s });
    });
  }, [t]), Ey(i), i;
}
function vo(t) {
  var e = t.getSnapshot;
  t = t.value;
  try {
    var i = e();
    return !_y(t, i);
  } catch {
    return !0;
  }
}
function Oy(t, e) {
  return e();
}
var Py = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? Oy : ky;
Gf.useSyncExternalStore = pr.useSyncExternalStore !== void 0 ? pr.useSyncExternalStore : Py;
(function(t) {
  t.exports = Gf;
})(Yf);
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Fs = ue, Ay = Yf.exports;
function My(t, e) {
  return t === e && (t !== 0 || 1 / t === 1 / e) || t !== t && e !== e;
}
var Dy = typeof Object.is == "function" ? Object.is : My, Iy = Ay.useSyncExternalStore, Ry = Fs.useRef, Ly = Fs.useEffect, Fy = Fs.useMemo, zy = Fs.useDebugValue;
Wf.useSyncExternalStoreWithSelector = function(t, e, i, r, s) {
  var f = Ry(null);
  if (f.current === null) {
    var g = { hasValue: !1, value: null };
    f.current = g;
  } else
    g = f.current;
  f = Fy(function() {
    function n(c) {
      if (!a) {
        if (a = !0, h = c, c = r(c), s !== void 0 && g.hasValue) {
          var d = g.value;
          if (s(d, c))
            return o = d;
        }
        return o = c;
      }
      if (d = o, Dy(h, c))
        return d;
      var m = r(c);
      return s !== void 0 && s(d, m) ? d : (h = c, o = m);
    }
    var a = !1, h, o, u = i === void 0 ? null : i;
    return [function() {
      return n(e());
    }, u === null ? void 0 : function() {
      return n(u());
    }];
  }, [e, i, r, s]);
  var l = Iy(t, f[0], f[1]);
  return Ly(function() {
    g.hasValue = !0, g.value = l;
  }, [l]), zy(l), l;
};
(function(t) {
  t.exports = Wf;
})(Uf);
const By = /* @__PURE__ */ Ab(Uf.exports), { useSyncExternalStoreWithSelector: jy } = By;
function Ny(t, e = t.getState, i) {
  const r = jy(
    t.subscribe,
    t.getState,
    t.getServerState || t.getState,
    e,
    i
  );
  return Em(r), r;
}
const zl = (t) => {
  ({ BASE_URL: "/", MODE: "production", DEV: !1, PROD: !0 } && "production") !== "production" && typeof t != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const e = typeof t == "function" ? wy(t) : t, i = (r, s) => Ny(e, r, s);
  return Object.assign(i, e), i;
}, Xf = (t) => t ? zl(t) : zl, Vy = (t) => (e, i, r) => {
  const s = r.subscribe;
  return r.subscribe = (g, l, n) => {
    let a = g;
    if (l) {
      const h = (n == null ? void 0 : n.equalityFn) || Object.is;
      let o = g(r.getState());
      a = (u) => {
        const c = g(u);
        if (!h(o, c)) {
          const d = o;
          l(o = c, d);
        }
      }, n != null && n.fireImmediately && l(o, o);
    }
    return s(a);
  }, t(e, i, r);
}, $y = Vy;
function St(t) {
  for (var e = arguments.length, i = Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++)
    i[r - 1] = arguments[r];
  throw Error("[Immer] minified error nr: " + t + (i.length ? " " + i.map(function(s) {
    return "'" + s + "'";
  }).join(",") : "") + ". Find the full error at: https://bit.ly/3cXEKWf");
}
function gr(t) {
  return !!t && !!t[mt];
}
function Di(t) {
  var e;
  return !!t && (function(i) {
    if (!i || typeof i != "object")
      return !1;
    var r = Object.getPrototypeOf(i);
    if (r === null)
      return !0;
    var s = Object.hasOwnProperty.call(r, "constructor") && r.constructor;
    return s === Object || typeof s == "function" && Function.toString.call(s) === qy;
  }(t) || Array.isArray(t) || !!t[Wl] || !!(!((e = t.constructor) === null || e === void 0) && e[Wl]) || hc(t) || fc(t));
}
function en(t, e, i) {
  i === void 0 && (i = !1), Sr(t) === 0 ? (i ? Object.keys : vc)(t).forEach(function(r) {
    i && typeof r == "symbol" || e(r, t[r], t);
  }) : t.forEach(function(r, s) {
    return e(s, r, t);
  });
}
function Sr(t) {
  var e = t[mt];
  return e ? e.i > 3 ? e.i - 4 : e.i : Array.isArray(t) ? 1 : hc(t) ? 2 : fc(t) ? 3 : 0;
}
function oa(t, e) {
  return Sr(t) === 2 ? t.has(e) : Object.prototype.hasOwnProperty.call(t, e);
}
function Hy(t, e) {
  return Sr(t) === 2 ? t.get(e) : t[e];
}
function Kf(t, e, i) {
  var r = Sr(t);
  r === 2 ? t.set(e, i) : r === 3 ? t.add(i) : t[e] = i;
}
function Uy(t, e) {
  return t === e ? t !== 0 || 1 / t == 1 / e : t != t && e != e;
}
function hc(t) {
  return Xy && t instanceof Map;
}
function fc(t) {
  return Ky && t instanceof Set;
}
function wi(t) {
  return t.o || t.t;
}
function dc(t) {
  if (Array.isArray(t))
    return Array.prototype.slice.call(t);
  var e = Zy(t);
  delete e[mt];
  for (var i = vc(e), r = 0; r < i.length; r++) {
    var s = i[r], f = e[s];
    f.writable === !1 && (f.writable = !0, f.configurable = !0), (f.get || f.set) && (e[s] = { configurable: !0, writable: !0, enumerable: f.enumerable, value: t[s] });
  }
  return Object.create(Object.getPrototypeOf(t), e);
}
function pc(t, e) {
  return e === void 0 && (e = !1), gc(t) || gr(t) || !Di(t) || (Sr(t) > 1 && (t.set = t.add = t.clear = t.delete = Wy), Object.freeze(t), e && en(t, function(i, r) {
    return pc(r, !0);
  }, !0)), t;
}
function Wy() {
  St(2);
}
function gc(t) {
  return t == null || typeof t != "object" || Object.isFrozen(t);
}
function Lt(t) {
  var e = Jy[t];
  return e || St(18, t), e;
}
function Bl() {
  return tn;
}
function bo(t, e) {
  e && (Lt("Patches"), t.u = [], t.s = [], t.v = e);
}
function ss(t) {
  aa(t), t.p.forEach(Yy), t.p = null;
}
function aa(t) {
  t === tn && (tn = t.l);
}
function jl(t) {
  return tn = { p: [], l: tn, h: t, m: !0, _: 0 };
}
function Yy(t) {
  var e = t[mt];
  e.i === 0 || e.i === 1 ? e.j() : e.g = !0;
}
function yo(t, e) {
  e._ = e.p.length;
  var i = e.p[0], r = t !== void 0 && t !== i;
  return e.h.O || Lt("ES5").S(e, t, r), r ? (i[mt].P && (ss(e), St(4)), Di(t) && (t = os(e, t), e.l || as(e, t)), e.u && Lt("Patches").M(i[mt].t, t, e.u, e.s)) : t = os(e, i, []), ss(e), e.u && e.v(e.u, e.s), t !== qf ? t : void 0;
}
function os(t, e, i) {
  if (gc(e))
    return e;
  var r = e[mt];
  if (!r)
    return en(e, function(l, n) {
      return Nl(t, r, e, l, n, i);
    }, !0), e;
  if (r.A !== t)
    return e;
  if (!r.P)
    return as(t, r.t, !0), r.t;
  if (!r.I) {
    r.I = !0, r.A._--;
    var s = r.i === 4 || r.i === 5 ? r.o = dc(r.k) : r.o, f = s, g = !1;
    r.i === 3 && (f = new Set(s), s.clear(), g = !0), en(f, function(l, n) {
      return Nl(t, r, s, l, n, i, g);
    }), as(t, s, !1), i && t.u && Lt("Patches").N(r, i, t.u, t.s);
  }
  return r.o;
}
function Nl(t, e, i, r, s, f, g) {
  if (gr(s)) {
    var l = os(t, s, f && e && e.i !== 3 && !oa(e.R, r) ? f.concat(r) : void 0);
    if (Kf(i, r, l), !gr(l))
      return;
    t.m = !1;
  } else
    g && i.add(s);
  if (Di(s) && !gc(s)) {
    if (!t.h.D && t._ < 1)
      return;
    os(t, s), e && e.A.l || as(t, s);
  }
}
function as(t, e, i) {
  i === void 0 && (i = !1), !t.l && t.h.D && t.m && pc(e, i);
}
function wo(t, e) {
  var i = t[mt];
  return (i ? wi(i) : t)[e];
}
function Vl(t, e) {
  if (e in t)
    for (var i = Object.getPrototypeOf(t); i; ) {
      var r = Object.getOwnPropertyDescriptor(i, e);
      if (r)
        return r;
      i = Object.getPrototypeOf(i);
    }
}
function ca(t) {
  t.P || (t.P = !0, t.l && ca(t.l));
}
function xo(t) {
  t.o || (t.o = dc(t.t));
}
function la(t, e, i) {
  var r = hc(e) ? Lt("MapSet").F(e, i) : fc(e) ? Lt("MapSet").T(e, i) : t.O ? function(s, f) {
    var g = Array.isArray(s), l = { i: g ? 1 : 0, A: f ? f.A : Bl(), P: !1, I: !1, R: {}, l: f, t: s, k: null, o: null, j: null, C: !1 }, n = l, a = ua;
    g && (n = [l], a = Br);
    var h = Proxy.revocable(n, a), o = h.revoke, u = h.proxy;
    return l.k = u, l.j = o, u;
  }(e, i) : Lt("ES5").J(e, i);
  return (i ? i.A : Bl()).p.push(r), r;
}
function Gy(t) {
  return gr(t) || St(22, t), function e(i) {
    if (!Di(i))
      return i;
    var r, s = i[mt], f = Sr(i);
    if (s) {
      if (!s.P && (s.i < 4 || !Lt("ES5").K(s)))
        return s.t;
      s.I = !0, r = $l(i, f), s.I = !1;
    } else
      r = $l(i, f);
    return en(r, function(g, l) {
      s && Hy(s.t, g) === l || Kf(r, g, e(l));
    }), f === 3 ? new Set(r) : r;
  }(t);
}
function $l(t, e) {
  switch (e) {
    case 2:
      return new Map(t);
    case 3:
      return Array.from(t);
  }
  return dc(t);
}
var Hl, tn, mc = typeof Symbol < "u" && typeof Symbol("x") == "symbol", Xy = typeof Map < "u", Ky = typeof Set < "u", Ul = typeof Proxy < "u" && Proxy.revocable !== void 0 && typeof Reflect < "u", qf = mc ? Symbol.for("immer-nothing") : ((Hl = {})["immer-nothing"] = !0, Hl), Wl = mc ? Symbol.for("immer-draftable") : "__$immer_draftable", mt = mc ? Symbol.for("immer-state") : "__$immer_state", qy = "" + Object.prototype.constructor, vc = typeof Reflect < "u" && Reflect.ownKeys ? Reflect.ownKeys : Object.getOwnPropertySymbols !== void 0 ? function(t) {
  return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));
} : Object.getOwnPropertyNames, Zy = Object.getOwnPropertyDescriptors || function(t) {
  var e = {};
  return vc(t).forEach(function(i) {
    e[i] = Object.getOwnPropertyDescriptor(t, i);
  }), e;
}, Jy = {}, ua = { get: function(t, e) {
  if (e === mt)
    return t;
  var i = wi(t);
  if (!oa(i, e))
    return function(s, f, g) {
      var l, n = Vl(f, g);
      return n ? "value" in n ? n.value : (l = n.get) === null || l === void 0 ? void 0 : l.call(s.k) : void 0;
    }(t, i, e);
  var r = i[e];
  return t.I || !Di(r) ? r : r === wo(t.t, e) ? (xo(t), t.o[e] = la(t.A.h, r, t)) : r;
}, has: function(t, e) {
  return e in wi(t);
}, ownKeys: function(t) {
  return Reflect.ownKeys(wi(t));
}, set: function(t, e, i) {
  var r = Vl(wi(t), e);
  if (r != null && r.set)
    return r.set.call(t.k, i), !0;
  if (!t.P) {
    var s = wo(wi(t), e), f = s == null ? void 0 : s[mt];
    if (f && f.t === i)
      return t.o[e] = i, t.R[e] = !1, !0;
    if (Uy(i, s) && (i !== void 0 || oa(t.t, e)))
      return !0;
    xo(t), ca(t);
  }
  return t.o[e] === i && (i !== void 0 || e in t.o) || Number.isNaN(i) && Number.isNaN(t.o[e]) || (t.o[e] = i, t.R[e] = !0), !0;
}, deleteProperty: function(t, e) {
  return wo(t.t, e) !== void 0 || e in t.t ? (t.R[e] = !1, xo(t), ca(t)) : delete t.R[e], t.o && delete t.o[e], !0;
}, getOwnPropertyDescriptor: function(t, e) {
  var i = wi(t), r = Reflect.getOwnPropertyDescriptor(i, e);
  return r && { writable: !0, configurable: t.i !== 1 || e !== "length", enumerable: r.enumerable, value: i[e] };
}, defineProperty: function() {
  St(11);
}, getPrototypeOf: function(t) {
  return Object.getPrototypeOf(t.t);
}, setPrototypeOf: function() {
  St(12);
} }, Br = {};
en(ua, function(t, e) {
  Br[t] = function() {
    return arguments[0] = arguments[0][0], e.apply(this, arguments);
  };
}), Br.deleteProperty = function(t, e) {
  return Br.set.call(this, t, e, void 0);
}, Br.set = function(t, e, i) {
  return ua.set.call(this, t[0], e, i, t[0]);
};
var Qy = function() {
  function t(i) {
    var r = this;
    this.O = Ul, this.D = !0, this.produce = function(s, f, g) {
      if (typeof s == "function" && typeof f != "function") {
        var l = f;
        f = s;
        var n = r;
        return function(m) {
          var p = this;
          m === void 0 && (m = l);
          for (var v = arguments.length, b = Array(v > 1 ? v - 1 : 0), y = 1; y < v; y++)
            b[y - 1] = arguments[y];
          return n.produce(m, function(w) {
            var _;
            return (_ = f).call.apply(_, [p, w].concat(b));
          });
        };
      }
      var a;
      if (typeof f != "function" && St(6), g !== void 0 && typeof g != "function" && St(7), Di(s)) {
        var h = jl(r), o = la(r, s, void 0), u = !0;
        try {
          a = f(o), u = !1;
        } finally {
          u ? ss(h) : aa(h);
        }
        return typeof Promise < "u" && a instanceof Promise ? a.then(function(m) {
          return bo(h, g), yo(m, h);
        }, function(m) {
          throw ss(h), m;
        }) : (bo(h, g), yo(a, h));
      }
      if (!s || typeof s != "object") {
        if ((a = f(s)) === void 0 && (a = s), a === qf && (a = void 0), r.D && pc(a, !0), g) {
          var c = [], d = [];
          Lt("Patches").M(s, a, c, d), g(c, d);
        }
        return a;
      }
      St(21, s);
    }, this.produceWithPatches = function(s, f) {
      if (typeof s == "function")
        return function(a) {
          for (var h = arguments.length, o = Array(h > 1 ? h - 1 : 0), u = 1; u < h; u++)
            o[u - 1] = arguments[u];
          return r.produceWithPatches(a, function(c) {
            return s.apply(void 0, [c].concat(o));
          });
        };
      var g, l, n = r.produce(s, f, function(a, h) {
        g = a, l = h;
      });
      return typeof Promise < "u" && n instanceof Promise ? n.then(function(a) {
        return [a, g, l];
      }) : [n, g, l];
    }, typeof (i == null ? void 0 : i.useProxies) == "boolean" && this.setUseProxies(i.useProxies), typeof (i == null ? void 0 : i.autoFreeze) == "boolean" && this.setAutoFreeze(i.autoFreeze);
  }
  var e = t.prototype;
  return e.createDraft = function(i) {
    Di(i) || St(8), gr(i) && (i = Gy(i));
    var r = jl(this), s = la(this, i, void 0);
    return s[mt].C = !0, aa(r), s;
  }, e.finishDraft = function(i, r) {
    var s = i && i[mt], f = s.A;
    return bo(f, r), yo(void 0, f);
  }, e.setAutoFreeze = function(i) {
    this.D = i;
  }, e.setUseProxies = function(i) {
    i && !Ul && St(20), this.O = i;
  }, e.applyPatches = function(i, r) {
    var s;
    for (s = r.length - 1; s >= 0; s--) {
      var f = r[s];
      if (f.path.length === 0 && f.op === "replace") {
        i = f.value;
        break;
      }
    }
    s > -1 && (r = r.slice(s + 1));
    var g = Lt("Patches").$;
    return gr(i) ? g(i, r) : this.produce(i, function(l) {
      return g(l, r);
    });
  }, t;
}(), vt = new Qy(), e1 = vt.produce;
vt.produceWithPatches.bind(vt);
vt.setAutoFreeze.bind(vt);
vt.setUseProxies.bind(vt);
vt.applyPatches.bind(vt);
vt.createDraft.bind(vt);
vt.finishDraft.bind(vt);
var t1 = function(e) {
  return i1(e) && !r1(e);
};
function i1(t) {
  return !!t && typeof t == "object";
}
function r1(t) {
  var e = Object.prototype.toString.call(t);
  return e === "[object RegExp]" || e === "[object Date]" || o1(t);
}
var n1 = typeof Symbol == "function" && Symbol.for, s1 = n1 ? Symbol.for("react.element") : 60103;
function o1(t) {
  return t.$$typeof === s1;
}
function a1(t) {
  return Array.isArray(t) ? [] : {};
}
function rn(t, e) {
  return e.clone !== !1 && e.isMergeableObject(t) ? mr(a1(t), t, e) : t;
}
function c1(t, e, i) {
  return t.concat(e).map(function(r) {
    return rn(r, i);
  });
}
function l1(t, e) {
  if (!e.customMerge)
    return mr;
  var i = e.customMerge(t);
  return typeof i == "function" ? i : mr;
}
function u1(t) {
  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(t).filter(function(e) {
    return Object.propertyIsEnumerable.call(t, e);
  }) : [];
}
function Yl(t) {
  return Object.keys(t).concat(u1(t));
}
function Zf(t, e) {
  try {
    return e in t;
  } catch {
    return !1;
  }
}
function h1(t, e) {
  return Zf(t, e) && !(Object.hasOwnProperty.call(t, e) && Object.propertyIsEnumerable.call(t, e));
}
function f1(t, e, i) {
  var r = {};
  return i.isMergeableObject(t) && Yl(t).forEach(function(s) {
    r[s] = rn(t[s], i);
  }), Yl(e).forEach(function(s) {
    h1(t, s) || (Zf(t, s) && i.isMergeableObject(e[s]) ? r[s] = l1(s, i)(t[s], e[s], i) : r[s] = rn(e[s], i));
  }), r;
}
function mr(t, e, i) {
  i = i || {}, i.arrayMerge = i.arrayMerge || c1, i.isMergeableObject = i.isMergeableObject || t1, i.cloneUnlessOtherwiseSpecified = rn;
  var r = Array.isArray(e), s = Array.isArray(t), f = r === s;
  return f ? r ? i.arrayMerge(t, e, i) : f1(t, e, i) : rn(e, i);
}
mr.all = function(e, i) {
  if (!Array.isArray(e))
    throw new Error("first argument should be an array");
  return e.reduce(function(r, s) {
    return mr(r, s, i);
  }, {});
};
var d1 = mr, Jf = d1;
function p1(t) {
  return t ? t.charAt(0).toLowerCase() + t.slice(1) : "";
}
function g1(t, e) {
  const i = Jf(e, t);
  return Qf(i, t);
}
function Qf(t, e) {
  return Object.keys(t).forEach((i) => {
    if (i.startsWith("replaceDefault") && t[i]) {
      const r = p1(
        i.replace("replaceDefault", "") || "items"
      );
      t[r] = e ? e[r] : [], delete t[i];
    } else
      typeof t[i] == "object" && t[i] !== null && Qf(t[i], e == null ? void 0 : e[i]);
  }), t;
}
const m1 = (t, e) => ({
  history: {
    ...Gl,
    updatePointerById: (i) => {
      const r = e().history.items.findIndex((s) => s.id === i);
      e().history.update(r);
    },
    update: (i, r) => {
      t((s) => {
        s.history.pointer = i, r && (s.history.items = r), s.history.canUndo = s.history.pointer > 0, s.history.canRedo = s.history.items.length > s.history.pointer + 1;
      });
    },
    reset: (i) => {
      t({ history: { ...e().history, ...i != null ? i : Gl } });
    }
  }
}), Gl = {
  items: [],
  pointer: 0,
  canUndo: !1,
  canRedo: !1
};
var wt = /* @__PURE__ */ ((t) => (t.Filter = "filter", t.Frame = "frame", t.ActiveObject = "activeObj", t.Text = "text", t))(wt || {});
const v1 = (t, e) => ({
  filter: {
    ...Xl,
    select(i, r = !1) {
      t((s) => {
        s.filter.selected = i, s.activeToolOverlay = r ? wt.Filter : null, s.dirty = !0;
      });
    },
    deselect(i) {
      e().filter.selected === i && t((r) => {
        r.filter.selected = null, r.activeToolOverlay = null, r.dirty = !0;
      });
    },
    reset() {
      t({ filter: { ...e().filter, ...Xl } });
    }
  }
}), Xl = {
  selected: null,
  applied: []
}, b1 = (t, e) => ({
  crop: {
    ...Kl,
    setCropzoneRect: (i) => {
      t((r) => {
        r.crop.zoneRect = i;
      });
    },
    setAspectRatio: (i) => {
      t((r) => {
        r.crop.selectedAspectRatio = i;
      });
    },
    setTransformAngle: (i) => {
      t((r) => {
        r.crop.straightenAngle = i;
      });
    },
    apply: async () => {
      const i = e().crop.zoneRect;
      if (i) {
        const r = {
          width: Math.ceil(i.width / e().zoom),
          height: Math.ceil(i.height / e().zoom),
          left: Math.ceil(i.left / e().zoom),
          top: Math.ceil(i.top / e().zoom)
        };
        await e().editor.tools.crop.apply(r);
      }
    },
    reset: () => {
      t({ crop: { ...e().crop, ...Kl } });
    }
  }
}), Kl = {
  zoneRect: null,
  selectedAspectRatio: null,
  straightenAngle: 0
};
function di(t) {
  return (t == null ? void 0 : t.type) === "i-text";
}
var Ne = /* @__PURE__ */ ((t) => (t.Text = "text", t.Shape = "shape", t.Sticker = "sticker", t.Drawing = "drawing", t.Image = "image", t.MainImage = "mainImage", t.StraightenAnchor = "straightenHelper", t))(Ne || {});
const y1 = {
  text: {
    name: ne("Text"),
    icon: Kt.text.icon
  },
  shape: {
    name: ne("Shape"),
    icon: Kt.shapes.icon
  },
  sticker: {
    name: ne("Sticker"),
    icon: Kt.stickers.icon
  },
  drawing: {
    name: ne("Drawing"),
    icon: Kt.draw.icon
  },
  image: {
    name: ne("Image"),
    icon: Kt.overlayImage.icon
  },
  mainImage: {
    name: ne("Background Image"),
    icon: Kt.bgImage.icon
  }
};
function w1(t) {
  return t.name === Ne.Image;
}
const ed = {
  isMoving: !1,
  editableProps: {},
  id: null,
  isText: !1,
  isImage: !1,
  name: null
};
function x1(t) {
  if (!t)
    return {};
  const e = {
    fill: t.fill,
    opacity: t.opacity,
    backgroundColor: t.backgroundColor,
    stroke: t.stroke,
    strokeWidth: t.strokeWidth
  }, i = t.shadow;
  return i && (e.shadow = {
    color: i.color,
    blur: i.blur,
    offsetX: i.offsetX,
    offsetY: i.offsetY
  }), di(t) && (e.textAlign = t.textAlign, e.underline = t.underline, e.linethrough = t.linethrough, e.fontStyle = t.fontStyle, e.fontFamily = t.fontFamily, e.fontWeight = t.fontWeight, e.fontSize = t.fontSize), e;
}
const _1 = (t, e) => ({
  objects: {
    ...ql,
    setActiveIsMoving: (i) => {
      t((r) => {
        r.objects.active.isMoving = i;
      });
    },
    setIsEditingText: (i) => {
      t((r) => {
        r.objects.isEditingText = i;
      });
    },
    setActive: (i) => {
      t(i ? (r) => {
        var s;
        r.objects.active.editableProps = x1(i), r.objects.active.id = i.data.id, r.objects.active.name = (s = i.name) != null ? s : null, r.objects.active.isText = di(i), r.objects.active.isImage = w1(i);
      } : (r) => {
        var f, g, l, n, a;
        const s = {
          ...(f = e().config.objectDefaults) == null ? void 0 : f.global,
          fontFamily: (l = (g = e().config.objectDefaults) == null ? void 0 : g.text) == null ? void 0 : l.fontFamily,
          fontSize: (a = (n = e().config.objectDefaults) == null ? void 0 : n.text) == null ? void 0 : a.fontSize
        };
        r.objects.active = {
          ...ed,
          editableProps: s
        };
      });
    },
    reset() {
      t({ objects: { ...e().objects, ...ql } });
    }
  }
}), ql = {
  all: [],
  isEditingText: !1,
  active: ed
}, S1 = (t, e) => ({
  frame: {
    ...Zl,
    select: (i) => {
      t((r) => {
        r.frame.active = i;
      }), e().frame.showOptionsPanel();
    },
    deselect: () => {
      t((i) => {
        i.frame.active = null, i.activeToolOverlay = null;
      });
    },
    showOptionsPanel: () => {
      e().activeTool === Ae.FRAME && t((i) => {
        i.activeToolOverlay = wt.Frame;
      });
    },
    reset() {
      t({ frame: { ...e().frame, ...Zl } });
    }
  }
}), Zl = {
  active: null
}, C1 = (t, e) => ({
  resize: {
    ...Jl,
    setFormValue: (i) => {
      t((r) => {
        Object.entries(i).forEach(([s, f]) => {
          r.resize.formValue[s] = f;
        });
      });
    },
    apply() {
      const i = e().resize.formValue, r = e().original;
      if (i.width === r.width && i.height === r.height)
        return !1;
      e().editor.tools.resize.apply(i);
    },
    reset() {
      t({ resize: { ...e().resize, ...Jl } });
    }
  }
}), Jl = {
  formValue: {
    width: 1,
    height: 1,
    maintainAspect: !0,
    usePercentages: !1
  }
}, T1 = (t, e) => ({
  corners: {
    ...Ql,
    setRadius: (i) => {
      t((r) => {
        r.corners.radius = i;
      });
    },
    apply() {
      return e().editor.tools.corners.apply(e().corners.radius);
    },
    reset() {
      t({ corners: { ...e().corners, ...Ql } });
    }
  }
}), Ql = {
  radius: 50
}, E1 = (t) => (e, i, r) => (r.setState = (s, f, ...g) => {
  const l = typeof s == "function" ? e1(s) : s;
  return e(l, f, ...g);
}, t(r.setState, i, r)), td = E1;
var id = { exports: {} }, k1 = {
  aliceblue: [240, 248, 255],
  antiquewhite: [250, 235, 215],
  aqua: [0, 255, 255],
  aquamarine: [127, 255, 212],
  azure: [240, 255, 255],
  beige: [245, 245, 220],
  bisque: [255, 228, 196],
  black: [0, 0, 0],
  blanchedalmond: [255, 235, 205],
  blue: [0, 0, 255],
  blueviolet: [138, 43, 226],
  brown: [165, 42, 42],
  burlywood: [222, 184, 135],
  cadetblue: [95, 158, 160],
  chartreuse: [127, 255, 0],
  chocolate: [210, 105, 30],
  coral: [255, 127, 80],
  cornflowerblue: [100, 149, 237],
  cornsilk: [255, 248, 220],
  crimson: [220, 20, 60],
  cyan: [0, 255, 255],
  darkblue: [0, 0, 139],
  darkcyan: [0, 139, 139],
  darkgoldenrod: [184, 134, 11],
  darkgray: [169, 169, 169],
  darkgreen: [0, 100, 0],
  darkgrey: [169, 169, 169],
  darkkhaki: [189, 183, 107],
  darkmagenta: [139, 0, 139],
  darkolivegreen: [85, 107, 47],
  darkorange: [255, 140, 0],
  darkorchid: [153, 50, 204],
  darkred: [139, 0, 0],
  darksalmon: [233, 150, 122],
  darkseagreen: [143, 188, 143],
  darkslateblue: [72, 61, 139],
  darkslategray: [47, 79, 79],
  darkslategrey: [47, 79, 79],
  darkturquoise: [0, 206, 209],
  darkviolet: [148, 0, 211],
  deeppink: [255, 20, 147],
  deepskyblue: [0, 191, 255],
  dimgray: [105, 105, 105],
  dimgrey: [105, 105, 105],
  dodgerblue: [30, 144, 255],
  firebrick: [178, 34, 34],
  floralwhite: [255, 250, 240],
  forestgreen: [34, 139, 34],
  fuchsia: [255, 0, 255],
  gainsboro: [220, 220, 220],
  ghostwhite: [248, 248, 255],
  gold: [255, 215, 0],
  goldenrod: [218, 165, 32],
  gray: [128, 128, 128],
  green: [0, 128, 0],
  greenyellow: [173, 255, 47],
  grey: [128, 128, 128],
  honeydew: [240, 255, 240],
  hotpink: [255, 105, 180],
  indianred: [205, 92, 92],
  indigo: [75, 0, 130],
  ivory: [255, 255, 240],
  khaki: [240, 230, 140],
  lavender: [230, 230, 250],
  lavenderblush: [255, 240, 245],
  lawngreen: [124, 252, 0],
  lemonchiffon: [255, 250, 205],
  lightblue: [173, 216, 230],
  lightcoral: [240, 128, 128],
  lightcyan: [224, 255, 255],
  lightgoldenrodyellow: [250, 250, 210],
  lightgray: [211, 211, 211],
  lightgreen: [144, 238, 144],
  lightgrey: [211, 211, 211],
  lightpink: [255, 182, 193],
  lightsalmon: [255, 160, 122],
  lightseagreen: [32, 178, 170],
  lightskyblue: [135, 206, 250],
  lightslategray: [119, 136, 153],
  lightslategrey: [119, 136, 153],
  lightsteelblue: [176, 196, 222],
  lightyellow: [255, 255, 224],
  lime: [0, 255, 0],
  limegreen: [50, 205, 50],
  linen: [250, 240, 230],
  magenta: [255, 0, 255],
  maroon: [128, 0, 0],
  mediumaquamarine: [102, 205, 170],
  mediumblue: [0, 0, 205],
  mediumorchid: [186, 85, 211],
  mediumpurple: [147, 112, 219],
  mediumseagreen: [60, 179, 113],
  mediumslateblue: [123, 104, 238],
  mediumspringgreen: [0, 250, 154],
  mediumturquoise: [72, 209, 204],
  mediumvioletred: [199, 21, 133],
  midnightblue: [25, 25, 112],
  mintcream: [245, 255, 250],
  mistyrose: [255, 228, 225],
  moccasin: [255, 228, 181],
  navajowhite: [255, 222, 173],
  navy: [0, 0, 128],
  oldlace: [253, 245, 230],
  olive: [128, 128, 0],
  olivedrab: [107, 142, 35],
  orange: [255, 165, 0],
  orangered: [255, 69, 0],
  orchid: [218, 112, 214],
  palegoldenrod: [238, 232, 170],
  palegreen: [152, 251, 152],
  paleturquoise: [175, 238, 238],
  palevioletred: [219, 112, 147],
  papayawhip: [255, 239, 213],
  peachpuff: [255, 218, 185],
  peru: [205, 133, 63],
  pink: [255, 192, 203],
  plum: [221, 160, 221],
  powderblue: [176, 224, 230],
  purple: [128, 0, 128],
  rebeccapurple: [102, 51, 153],
  red: [255, 0, 0],
  rosybrown: [188, 143, 143],
  royalblue: [65, 105, 225],
  saddlebrown: [139, 69, 19],
  salmon: [250, 128, 114],
  sandybrown: [244, 164, 96],
  seagreen: [46, 139, 87],
  seashell: [255, 245, 238],
  sienna: [160, 82, 45],
  silver: [192, 192, 192],
  skyblue: [135, 206, 235],
  slateblue: [106, 90, 205],
  slategray: [112, 128, 144],
  slategrey: [112, 128, 144],
  snow: [255, 250, 250],
  springgreen: [0, 255, 127],
  steelblue: [70, 130, 180],
  tan: [210, 180, 140],
  teal: [0, 128, 128],
  thistle: [216, 191, 216],
  tomato: [255, 99, 71],
  turquoise: [64, 224, 208],
  violet: [238, 130, 238],
  wheat: [245, 222, 179],
  white: [255, 255, 255],
  whitesmoke: [245, 245, 245],
  yellow: [255, 255, 0],
  yellowgreen: [154, 205, 50]
}, rd = { exports: {} }, O1 = function(e) {
  return !e || typeof e == "string" ? !1 : e instanceof Array || Array.isArray(e) || e.length >= 0 && (e.splice instanceof Function || Object.getOwnPropertyDescriptor(e, e.length - 1) && e.constructor.name !== "String");
}, P1 = O1, A1 = Array.prototype.concat, M1 = Array.prototype.slice, eu = rd.exports = function(e) {
  for (var i = [], r = 0, s = e.length; r < s; r++) {
    var f = e[r];
    P1(f) ? i = A1.call(i, M1.call(f)) : i.push(f);
  }
  return i;
};
eu.wrap = function(t) {
  return function() {
    return t(eu(arguments));
  };
};
var Hr = k1, vn = rd.exports, nd = Object.hasOwnProperty, sd = /* @__PURE__ */ Object.create(null);
for (var _o in Hr)
  nd.call(Hr, _o) && (sd[Hr[_o]] = _o);
var ht = id.exports = {
  to: {},
  get: {}
};
ht.get = function(t) {
  var e = t.substring(0, 3).toLowerCase(), i, r;
  switch (e) {
    case "hsl":
      i = ht.get.hsl(t), r = "hsl";
      break;
    case "hwb":
      i = ht.get.hwb(t), r = "hwb";
      break;
    default:
      i = ht.get.rgb(t), r = "rgb";
      break;
  }
  return i ? { model: r, value: i } : null;
};
ht.get.rgb = function(t) {
  if (!t)
    return null;
  var e = /^#([a-f0-9]{3,4})$/i, i = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i, r = /^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/, s = /^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/, f = /^(\w+)$/, g = [0, 0, 0, 1], l, n, a;
  if (l = t.match(i)) {
    for (a = l[2], l = l[1], n = 0; n < 3; n++) {
      var h = n * 2;
      g[n] = parseInt(l.slice(h, h + 2), 16);
    }
    a && (g[3] = parseInt(a, 16) / 255);
  } else if (l = t.match(e)) {
    for (l = l[1], a = l[3], n = 0; n < 3; n++)
      g[n] = parseInt(l[n] + l[n], 16);
    a && (g[3] = parseInt(a + a, 16) / 255);
  } else if (l = t.match(r)) {
    for (n = 0; n < 3; n++)
      g[n] = parseInt(l[n + 1], 0);
    l[4] && (l[5] ? g[3] = parseFloat(l[4]) * 0.01 : g[3] = parseFloat(l[4]));
  } else if (l = t.match(s)) {
    for (n = 0; n < 3; n++)
      g[n] = Math.round(parseFloat(l[n + 1]) * 2.55);
    l[4] && (l[5] ? g[3] = parseFloat(l[4]) * 0.01 : g[3] = parseFloat(l[4]));
  } else
    return (l = t.match(f)) ? l[1] === "transparent" ? [0, 0, 0, 0] : nd.call(Hr, l[1]) ? (g = Hr[l[1]], g[3] = 1, g) : null : null;
  for (n = 0; n < 3; n++)
    g[n] = ti(g[n], 0, 255);
  return g[3] = ti(g[3], 0, 1), g;
};
ht.get.hsl = function(t) {
  if (!t)
    return null;
  var e = /^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/, i = t.match(e);
  if (i) {
    var r = parseFloat(i[4]), s = (parseFloat(i[1]) % 360 + 360) % 360, f = ti(parseFloat(i[2]), 0, 100), g = ti(parseFloat(i[3]), 0, 100), l = ti(isNaN(r) ? 1 : r, 0, 1);
    return [s, f, g, l];
  }
  return null;
};
ht.get.hwb = function(t) {
  if (!t)
    return null;
  var e = /^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/, i = t.match(e);
  if (i) {
    var r = parseFloat(i[4]), s = (parseFloat(i[1]) % 360 + 360) % 360, f = ti(parseFloat(i[2]), 0, 100), g = ti(parseFloat(i[3]), 0, 100), l = ti(isNaN(r) ? 1 : r, 0, 1);
    return [s, f, g, l];
  }
  return null;
};
ht.to.hex = function() {
  var t = vn(arguments);
  return "#" + Bn(t[0]) + Bn(t[1]) + Bn(t[2]) + (t[3] < 1 ? Bn(Math.round(t[3] * 255)) : "");
};
ht.to.rgb = function() {
  var t = vn(arguments);
  return t.length < 4 || t[3] === 1 ? "rgb(" + Math.round(t[0]) + ", " + Math.round(t[1]) + ", " + Math.round(t[2]) + ")" : "rgba(" + Math.round(t[0]) + ", " + Math.round(t[1]) + ", " + Math.round(t[2]) + ", " + t[3] + ")";
};
ht.to.rgb.percent = function() {
  var t = vn(arguments), e = Math.round(t[0] / 255 * 100), i = Math.round(t[1] / 255 * 100), r = Math.round(t[2] / 255 * 100);
  return t.length < 4 || t[3] === 1 ? "rgb(" + e + "%, " + i + "%, " + r + "%)" : "rgba(" + e + "%, " + i + "%, " + r + "%, " + t[3] + ")";
};
ht.to.hsl = function() {
  var t = vn(arguments);
  return t.length < 4 || t[3] === 1 ? "hsl(" + t[0] + ", " + t[1] + "%, " + t[2] + "%)" : "hsla(" + t[0] + ", " + t[1] + "%, " + t[2] + "%, " + t[3] + ")";
};
ht.to.hwb = function() {
  var t = vn(arguments), e = "";
  return t.length >= 4 && t[3] !== 1 && (e = ", " + t[3]), "hwb(" + t[0] + ", " + t[1] + "%, " + t[2] + "%" + e + ")";
};
ht.to.keyword = function(t) {
  return sd[t.slice(0, 3)];
};
function ti(t, e, i) {
  return Math.min(Math.max(e, t), i);
}
function Bn(t) {
  var e = Math.round(t).toString(16).toUpperCase();
  return e.length < 2 ? "0" + e : e;
}
var D1 = {
  aliceblue: [240, 248, 255],
  antiquewhite: [250, 235, 215],
  aqua: [0, 255, 255],
  aquamarine: [127, 255, 212],
  azure: [240, 255, 255],
  beige: [245, 245, 220],
  bisque: [255, 228, 196],
  black: [0, 0, 0],
  blanchedalmond: [255, 235, 205],
  blue: [0, 0, 255],
  blueviolet: [138, 43, 226],
  brown: [165, 42, 42],
  burlywood: [222, 184, 135],
  cadetblue: [95, 158, 160],
  chartreuse: [127, 255, 0],
  chocolate: [210, 105, 30],
  coral: [255, 127, 80],
  cornflowerblue: [100, 149, 237],
  cornsilk: [255, 248, 220],
  crimson: [220, 20, 60],
  cyan: [0, 255, 255],
  darkblue: [0, 0, 139],
  darkcyan: [0, 139, 139],
  darkgoldenrod: [184, 134, 11],
  darkgray: [169, 169, 169],
  darkgreen: [0, 100, 0],
  darkgrey: [169, 169, 169],
  darkkhaki: [189, 183, 107],
  darkmagenta: [139, 0, 139],
  darkolivegreen: [85, 107, 47],
  darkorange: [255, 140, 0],
  darkorchid: [153, 50, 204],
  darkred: [139, 0, 0],
  darksalmon: [233, 150, 122],
  darkseagreen: [143, 188, 143],
  darkslateblue: [72, 61, 139],
  darkslategray: [47, 79, 79],
  darkslategrey: [47, 79, 79],
  darkturquoise: [0, 206, 209],
  darkviolet: [148, 0, 211],
  deeppink: [255, 20, 147],
  deepskyblue: [0, 191, 255],
  dimgray: [105, 105, 105],
  dimgrey: [105, 105, 105],
  dodgerblue: [30, 144, 255],
  firebrick: [178, 34, 34],
  floralwhite: [255, 250, 240],
  forestgreen: [34, 139, 34],
  fuchsia: [255, 0, 255],
  gainsboro: [220, 220, 220],
  ghostwhite: [248, 248, 255],
  gold: [255, 215, 0],
  goldenrod: [218, 165, 32],
  gray: [128, 128, 128],
  green: [0, 128, 0],
  greenyellow: [173, 255, 47],
  grey: [128, 128, 128],
  honeydew: [240, 255, 240],
  hotpink: [255, 105, 180],
  indianred: [205, 92, 92],
  indigo: [75, 0, 130],
  ivory: [255, 255, 240],
  khaki: [240, 230, 140],
  lavender: [230, 230, 250],
  lavenderblush: [255, 240, 245],
  lawngreen: [124, 252, 0],
  lemonchiffon: [255, 250, 205],
  lightblue: [173, 216, 230],
  lightcoral: [240, 128, 128],
  lightcyan: [224, 255, 255],
  lightgoldenrodyellow: [250, 250, 210],
  lightgray: [211, 211, 211],
  lightgreen: [144, 238, 144],
  lightgrey: [211, 211, 211],
  lightpink: [255, 182, 193],
  lightsalmon: [255, 160, 122],
  lightseagreen: [32, 178, 170],
  lightskyblue: [135, 206, 250],
  lightslategray: [119, 136, 153],
  lightslategrey: [119, 136, 153],
  lightsteelblue: [176, 196, 222],
  lightyellow: [255, 255, 224],
  lime: [0, 255, 0],
  limegreen: [50, 205, 50],
  linen: [250, 240, 230],
  magenta: [255, 0, 255],
  maroon: [128, 0, 0],
  mediumaquamarine: [102, 205, 170],
  mediumblue: [0, 0, 205],
  mediumorchid: [186, 85, 211],
  mediumpurple: [147, 112, 219],
  mediumseagreen: [60, 179, 113],
  mediumslateblue: [123, 104, 238],
  mediumspringgreen: [0, 250, 154],
  mediumturquoise: [72, 209, 204],
  mediumvioletred: [199, 21, 133],
  midnightblue: [25, 25, 112],
  mintcream: [245, 255, 250],
  mistyrose: [255, 228, 225],
  moccasin: [255, 228, 181],
  navajowhite: [255, 222, 173],
  navy: [0, 0, 128],
  oldlace: [253, 245, 230],
  olive: [128, 128, 0],
  olivedrab: [107, 142, 35],
  orange: [255, 165, 0],
  orangered: [255, 69, 0],
  orchid: [218, 112, 214],
  palegoldenrod: [238, 232, 170],
  palegreen: [152, 251, 152],
  paleturquoise: [175, 238, 238],
  palevioletred: [219, 112, 147],
  papayawhip: [255, 239, 213],
  peachpuff: [255, 218, 185],
  peru: [205, 133, 63],
  pink: [255, 192, 203],
  plum: [221, 160, 221],
  powderblue: [176, 224, 230],
  purple: [128, 0, 128],
  rebeccapurple: [102, 51, 153],
  red: [255, 0, 0],
  rosybrown: [188, 143, 143],
  royalblue: [65, 105, 225],
  saddlebrown: [139, 69, 19],
  salmon: [250, 128, 114],
  sandybrown: [244, 164, 96],
  seagreen: [46, 139, 87],
  seashell: [255, 245, 238],
  sienna: [160, 82, 45],
  silver: [192, 192, 192],
  skyblue: [135, 206, 235],
  slateblue: [106, 90, 205],
  slategray: [112, 128, 144],
  slategrey: [112, 128, 144],
  snow: [255, 250, 250],
  springgreen: [0, 255, 127],
  steelblue: [70, 130, 180],
  tan: [210, 180, 140],
  teal: [0, 128, 128],
  thistle: [216, 191, 216],
  tomato: [255, 99, 71],
  turquoise: [64, 224, 208],
  violet: [238, 130, 238],
  wheat: [245, 222, 179],
  white: [255, 255, 255],
  whitesmoke: [245, 245, 245],
  yellow: [255, 255, 0],
  yellowgreen: [154, 205, 50]
};
const nn = D1, od = {};
for (const t of Object.keys(nn))
  od[nn[t]] = t;
const pe = {
  rgb: { channels: 3, labels: "rgb" },
  hsl: { channels: 3, labels: "hsl" },
  hsv: { channels: 3, labels: "hsv" },
  hwb: { channels: 3, labels: "hwb" },
  cmyk: { channels: 4, labels: "cmyk" },
  xyz: { channels: 3, labels: "xyz" },
  lab: { channels: 3, labels: "lab" },
  lch: { channels: 3, labels: "lch" },
  hex: { channels: 1, labels: ["hex"] },
  keyword: { channels: 1, labels: ["keyword"] },
  ansi16: { channels: 1, labels: ["ansi16"] },
  ansi256: { channels: 1, labels: ["ansi256"] },
  hcg: { channels: 3, labels: ["h", "c", "g"] },
  apple: { channels: 3, labels: ["r16", "g16", "b16"] },
  gray: { channels: 1, labels: ["gray"] }
};
var ad = pe;
for (const t of Object.keys(pe)) {
  if (!("channels" in pe[t]))
    throw new Error("missing channels property: " + t);
  if (!("labels" in pe[t]))
    throw new Error("missing channel labels property: " + t);
  if (pe[t].labels.length !== pe[t].channels)
    throw new Error("channel and label counts mismatch: " + t);
  const { channels: e, labels: i } = pe[t];
  delete pe[t].channels, delete pe[t].labels, Object.defineProperty(pe[t], "channels", { value: e }), Object.defineProperty(pe[t], "labels", { value: i });
}
pe.rgb.hsl = function(t) {
  const e = t[0] / 255, i = t[1] / 255, r = t[2] / 255, s = Math.min(e, i, r), f = Math.max(e, i, r), g = f - s;
  let l, n;
  f === s ? l = 0 : e === f ? l = (i - r) / g : i === f ? l = 2 + (r - e) / g : r === f && (l = 4 + (e - i) / g), l = Math.min(l * 60, 360), l < 0 && (l += 360);
  const a = (s + f) / 2;
  return f === s ? n = 0 : a <= 0.5 ? n = g / (f + s) : n = g / (2 - f - s), [l, n * 100, a * 100];
};
pe.rgb.hsv = function(t) {
  let e, i, r, s, f;
  const g = t[0] / 255, l = t[1] / 255, n = t[2] / 255, a = Math.max(g, l, n), h = a - Math.min(g, l, n), o = function(u) {
    return (a - u) / 6 / h + 1 / 2;
  };
  return h === 0 ? (s = 0, f = 0) : (f = h / a, e = o(g), i = o(l), r = o(n), g === a ? s = r - i : l === a ? s = 1 / 3 + e - r : n === a && (s = 2 / 3 + i - e), s < 0 ? s += 1 : s > 1 && (s -= 1)), [
    s * 360,
    f * 100,
    a * 100
  ];
};
pe.rgb.hwb = function(t) {
  const e = t[0], i = t[1];
  let r = t[2];
  const s = pe.rgb.hsl(t)[0], f = 1 / 255 * Math.min(e, Math.min(i, r));
  return r = 1 - 1 / 255 * Math.max(e, Math.max(i, r)), [s, f * 100, r * 100];
};
pe.rgb.cmyk = function(t) {
  const e = t[0] / 255, i = t[1] / 255, r = t[2] / 255, s = Math.min(1 - e, 1 - i, 1 - r), f = (1 - e - s) / (1 - s) || 0, g = (1 - i - s) / (1 - s) || 0, l = (1 - r - s) / (1 - s) || 0;
  return [f * 100, g * 100, l * 100, s * 100];
};
function I1(t, e) {
  return (t[0] - e[0]) ** 2 + (t[1] - e[1]) ** 2 + (t[2] - e[2]) ** 2;
}
pe.rgb.keyword = function(t) {
  const e = od[t];
  if (e)
    return e;
  let i = 1 / 0, r;
  for (const s of Object.keys(nn)) {
    const f = nn[s], g = I1(t, f);
    g < i && (i = g, r = s);
  }
  return r;
};
pe.keyword.rgb = function(t) {
  return nn[t];
};
pe.rgb.xyz = function(t) {
  let e = t[0] / 255, i = t[1] / 255, r = t[2] / 255;
  e = e > 0.04045 ? ((e + 0.055) / 1.055) ** 2.4 : e / 12.92, i = i > 0.04045 ? ((i + 0.055) / 1.055) ** 2.4 : i / 12.92, r = r > 0.04045 ? ((r + 0.055) / 1.055) ** 2.4 : r / 12.92;
  const s = e * 0.4124 + i * 0.3576 + r * 0.1805, f = e * 0.2126 + i * 0.7152 + r * 0.0722, g = e * 0.0193 + i * 0.1192 + r * 0.9505;
  return [s * 100, f * 100, g * 100];
};
pe.rgb.lab = function(t) {
  const e = pe.rgb.xyz(t);
  let i = e[0], r = e[1], s = e[2];
  i /= 95.047, r /= 100, s /= 108.883, i = i > 8856e-6 ? i ** (1 / 3) : 7.787 * i + 16 / 116, r = r > 8856e-6 ? r ** (1 / 3) : 7.787 * r + 16 / 116, s = s > 8856e-6 ? s ** (1 / 3) : 7.787 * s + 16 / 116;
  const f = 116 * r - 16, g = 500 * (i - r), l = 200 * (r - s);
  return [f, g, l];
};
pe.hsl.rgb = function(t) {
  const e = t[0] / 360, i = t[1] / 100, r = t[2] / 100;
  let s, f, g;
  if (i === 0)
    return g = r * 255, [g, g, g];
  r < 0.5 ? s = r * (1 + i) : s = r + i - r * i;
  const l = 2 * r - s, n = [0, 0, 0];
  for (let a = 0; a < 3; a++)
    f = e + 1 / 3 * -(a - 1), f < 0 && f++, f > 1 && f--, 6 * f < 1 ? g = l + (s - l) * 6 * f : 2 * f < 1 ? g = s : 3 * f < 2 ? g = l + (s - l) * (2 / 3 - f) * 6 : g = l, n[a] = g * 255;
  return n;
};
pe.hsl.hsv = function(t) {
  const e = t[0];
  let i = t[1] / 100, r = t[2] / 100, s = i;
  const f = Math.max(r, 0.01);
  r *= 2, i *= r <= 1 ? r : 2 - r, s *= f <= 1 ? f : 2 - f;
  const g = (r + i) / 2, l = r === 0 ? 2 * s / (f + s) : 2 * i / (r + i);
  return [e, l * 100, g * 100];
};
pe.hsv.rgb = function(t) {
  const e = t[0] / 60, i = t[1] / 100;
  let r = t[2] / 100;
  const s = Math.floor(e) % 6, f = e - Math.floor(e), g = 255 * r * (1 - i), l = 255 * r * (1 - i * f), n = 255 * r * (1 - i * (1 - f));
  switch (r *= 255, s) {
    case 0:
      return [r, n, g];
    case 1:
      return [l, r, g];
    case 2:
      return [g, r, n];
    case 3:
      return [g, l, r];
    case 4:
      return [n, g, r];
    case 5:
      return [r, g, l];
  }
};
pe.hsv.hsl = function(t) {
  const e = t[0], i = t[1] / 100, r = t[2] / 100, s = Math.max(r, 0.01);
  let f, g;
  g = (2 - i) * r;
  const l = (2 - i) * s;
  return f = i * s, f /= l <= 1 ? l : 2 - l, f = f || 0, g /= 2, [e, f * 100, g * 100];
};
pe.hwb.rgb = function(t) {
  const e = t[0] / 360;
  let i = t[1] / 100, r = t[2] / 100;
  const s = i + r;
  let f;
  s > 1 && (i /= s, r /= s);
  const g = Math.floor(6 * e), l = 1 - r;
  f = 6 * e - g, (g & 1) !== 0 && (f = 1 - f);
  const n = i + f * (l - i);
  let a, h, o;
  switch (g) {
    default:
    case 6:
    case 0:
      a = l, h = n, o = i;
      break;
    case 1:
      a = n, h = l, o = i;
      break;
    case 2:
      a = i, h = l, o = n;
      break;
    case 3:
      a = i, h = n, o = l;
      break;
    case 4:
      a = n, h = i, o = l;
      break;
    case 5:
      a = l, h = i, o = n;
      break;
  }
  return [a * 255, h * 255, o * 255];
};
pe.cmyk.rgb = function(t) {
  const e = t[0] / 100, i = t[1] / 100, r = t[2] / 100, s = t[3] / 100, f = 1 - Math.min(1, e * (1 - s) + s), g = 1 - Math.min(1, i * (1 - s) + s), l = 1 - Math.min(1, r * (1 - s) + s);
  return [f * 255, g * 255, l * 255];
};
pe.xyz.rgb = function(t) {
  const e = t[0] / 100, i = t[1] / 100, r = t[2] / 100;
  let s, f, g;
  return s = e * 3.2406 + i * -1.5372 + r * -0.4986, f = e * -0.9689 + i * 1.8758 + r * 0.0415, g = e * 0.0557 + i * -0.204 + r * 1.057, s = s > 31308e-7 ? 1.055 * s ** (1 / 2.4) - 0.055 : s * 12.92, f = f > 31308e-7 ? 1.055 * f ** (1 / 2.4) - 0.055 : f * 12.92, g = g > 31308e-7 ? 1.055 * g ** (1 / 2.4) - 0.055 : g * 12.92, s = Math.min(Math.max(0, s), 1), f = Math.min(Math.max(0, f), 1), g = Math.min(Math.max(0, g), 1), [s * 255, f * 255, g * 255];
};
pe.xyz.lab = function(t) {
  let e = t[0], i = t[1], r = t[2];
  e /= 95.047, i /= 100, r /= 108.883, e = e > 8856e-6 ? e ** (1 / 3) : 7.787 * e + 16 / 116, i = i > 8856e-6 ? i ** (1 / 3) : 7.787 * i + 16 / 116, r = r > 8856e-6 ? r ** (1 / 3) : 7.787 * r + 16 / 116;
  const s = 116 * i - 16, f = 500 * (e - i), g = 200 * (i - r);
  return [s, f, g];
};
pe.lab.xyz = function(t) {
  const e = t[0], i = t[1], r = t[2];
  let s, f, g;
  f = (e + 16) / 116, s = i / 500 + f, g = f - r / 200;
  const l = f ** 3, n = s ** 3, a = g ** 3;
  return f = l > 8856e-6 ? l : (f - 16 / 116) / 7.787, s = n > 8856e-6 ? n : (s - 16 / 116) / 7.787, g = a > 8856e-6 ? a : (g - 16 / 116) / 7.787, s *= 95.047, f *= 100, g *= 108.883, [s, f, g];
};
pe.lab.lch = function(t) {
  const e = t[0], i = t[1], r = t[2];
  let s;
  s = Math.atan2(r, i) * 360 / 2 / Math.PI, s < 0 && (s += 360);
  const g = Math.sqrt(i * i + r * r);
  return [e, g, s];
};
pe.lch.lab = function(t) {
  const e = t[0], i = t[1], s = t[2] / 360 * 2 * Math.PI, f = i * Math.cos(s), g = i * Math.sin(s);
  return [e, f, g];
};
pe.rgb.ansi16 = function(t, e = null) {
  const [i, r, s] = t;
  let f = e === null ? pe.rgb.hsv(t)[2] : e;
  if (f = Math.round(f / 50), f === 0)
    return 30;
  let g = 30 + (Math.round(s / 255) << 2 | Math.round(r / 255) << 1 | Math.round(i / 255));
  return f === 2 && (g += 60), g;
};
pe.hsv.ansi16 = function(t) {
  return pe.rgb.ansi16(pe.hsv.rgb(t), t[2]);
};
pe.rgb.ansi256 = function(t) {
  const e = t[0], i = t[1], r = t[2];
  return e === i && i === r ? e < 8 ? 16 : e > 248 ? 231 : Math.round((e - 8) / 247 * 24) + 232 : 16 + 36 * Math.round(e / 255 * 5) + 6 * Math.round(i / 255 * 5) + Math.round(r / 255 * 5);
};
pe.ansi16.rgb = function(t) {
  let e = t % 10;
  if (e === 0 || e === 7)
    return t > 50 && (e += 3.5), e = e / 10.5 * 255, [e, e, e];
  const i = (~~(t > 50) + 1) * 0.5, r = (e & 1) * i * 255, s = (e >> 1 & 1) * i * 255, f = (e >> 2 & 1) * i * 255;
  return [r, s, f];
};
pe.ansi256.rgb = function(t) {
  if (t >= 232) {
    const f = (t - 232) * 10 + 8;
    return [f, f, f];
  }
  t -= 16;
  let e;
  const i = Math.floor(t / 36) / 5 * 255, r = Math.floor((e = t % 36) / 6) / 5 * 255, s = e % 6 / 5 * 255;
  return [i, r, s];
};
pe.rgb.hex = function(t) {
  const i = (((Math.round(t[0]) & 255) << 16) + ((Math.round(t[1]) & 255) << 8) + (Math.round(t[2]) & 255)).toString(16).toUpperCase();
  return "000000".substring(i.length) + i;
};
pe.hex.rgb = function(t) {
  const e = t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);
  if (!e)
    return [0, 0, 0];
  let i = e[0];
  e[0].length === 3 && (i = i.split("").map((l) => l + l).join(""));
  const r = parseInt(i, 16), s = r >> 16 & 255, f = r >> 8 & 255, g = r & 255;
  return [s, f, g];
};
pe.rgb.hcg = function(t) {
  const e = t[0] / 255, i = t[1] / 255, r = t[2] / 255, s = Math.max(Math.max(e, i), r), f = Math.min(Math.min(e, i), r), g = s - f;
  let l, n;
  return g < 1 ? l = f / (1 - g) : l = 0, g <= 0 ? n = 0 : s === e ? n = (i - r) / g % 6 : s === i ? n = 2 + (r - e) / g : n = 4 + (e - i) / g, n /= 6, n %= 1, [n * 360, g * 100, l * 100];
};
pe.hsl.hcg = function(t) {
  const e = t[1] / 100, i = t[2] / 100, r = i < 0.5 ? 2 * e * i : 2 * e * (1 - i);
  let s = 0;
  return r < 1 && (s = (i - 0.5 * r) / (1 - r)), [t[0], r * 100, s * 100];
};
pe.hsv.hcg = function(t) {
  const e = t[1] / 100, i = t[2] / 100, r = e * i;
  let s = 0;
  return r < 1 && (s = (i - r) / (1 - r)), [t[0], r * 100, s * 100];
};
pe.hcg.rgb = function(t) {
  const e = t[0] / 360, i = t[1] / 100, r = t[2] / 100;
  if (i === 0)
    return [r * 255, r * 255, r * 255];
  const s = [0, 0, 0], f = e % 1 * 6, g = f % 1, l = 1 - g;
  let n = 0;
  switch (Math.floor(f)) {
    case 0:
      s[0] = 1, s[1] = g, s[2] = 0;
      break;
    case 1:
      s[0] = l, s[1] = 1, s[2] = 0;
      break;
    case 2:
      s[0] = 0, s[1] = 1, s[2] = g;
      break;
    case 3:
      s[0] = 0, s[1] = l, s[2] = 1;
      break;
    case 4:
      s[0] = g, s[1] = 0, s[2] = 1;
      break;
    default:
      s[0] = 1, s[1] = 0, s[2] = l;
  }
  return n = (1 - i) * r, [
    (i * s[0] + n) * 255,
    (i * s[1] + n) * 255,
    (i * s[2] + n) * 255
  ];
};
pe.hcg.hsv = function(t) {
  const e = t[1] / 100, i = t[2] / 100, r = e + i * (1 - e);
  let s = 0;
  return r > 0 && (s = e / r), [t[0], s * 100, r * 100];
};
pe.hcg.hsl = function(t) {
  const e = t[1] / 100, r = t[2] / 100 * (1 - e) + 0.5 * e;
  let s = 0;
  return r > 0 && r < 0.5 ? s = e / (2 * r) : r >= 0.5 && r < 1 && (s = e / (2 * (1 - r))), [t[0], s * 100, r * 100];
};
pe.hcg.hwb = function(t) {
  const e = t[1] / 100, i = t[2] / 100, r = e + i * (1 - e);
  return [t[0], (r - e) * 100, (1 - r) * 100];
};
pe.hwb.hcg = function(t) {
  const e = t[1] / 100, r = 1 - t[2] / 100, s = r - e;
  let f = 0;
  return s < 1 && (f = (r - s) / (1 - s)), [t[0], s * 100, f * 100];
};
pe.apple.rgb = function(t) {
  return [t[0] / 65535 * 255, t[1] / 65535 * 255, t[2] / 65535 * 255];
};
pe.rgb.apple = function(t) {
  return [t[0] / 255 * 65535, t[1] / 255 * 65535, t[2] / 255 * 65535];
};
pe.gray.rgb = function(t) {
  return [t[0] / 100 * 255, t[0] / 100 * 255, t[0] / 100 * 255];
};
pe.gray.hsl = function(t) {
  return [0, 0, t[0]];
};
pe.gray.hsv = pe.gray.hsl;
pe.gray.hwb = function(t) {
  return [0, 100, t[0]];
};
pe.gray.cmyk = function(t) {
  return [0, 0, 0, t[0]];
};
pe.gray.lab = function(t) {
  return [t[0], 0, 0];
};
pe.gray.hex = function(t) {
  const e = Math.round(t[0] / 100 * 255) & 255, r = ((e << 16) + (e << 8) + e).toString(16).toUpperCase();
  return "000000".substring(r.length) + r;
};
pe.rgb.gray = function(t) {
  return [(t[0] + t[1] + t[2]) / 3 / 255 * 100];
};
const cs = ad;
function R1() {
  const t = {}, e = Object.keys(cs);
  for (let i = e.length, r = 0; r < i; r++)
    t[e[r]] = {
      distance: -1,
      parent: null
    };
  return t;
}
function L1(t) {
  const e = R1(), i = [t];
  for (e[t].distance = 0; i.length; ) {
    const r = i.pop(), s = Object.keys(cs[r]);
    for (let f = s.length, g = 0; g < f; g++) {
      const l = s[g], n = e[l];
      n.distance === -1 && (n.distance = e[r].distance + 1, n.parent = r, i.unshift(l));
    }
  }
  return e;
}
function F1(t, e) {
  return function(i) {
    return e(t(i));
  };
}
function z1(t, e) {
  const i = [e[t].parent, t];
  let r = cs[e[t].parent][t], s = e[t].parent;
  for (; e[s].parent; )
    i.unshift(e[s].parent), r = F1(cs[e[s].parent][s], r), s = e[s].parent;
  return r.conversion = i, r;
}
var B1 = function(t) {
  const e = L1(t), i = {}, r = Object.keys(e);
  for (let s = r.length, f = 0; f < s; f++) {
    const g = r[f];
    e[g].parent !== null && (i[g] = z1(g, e));
  }
  return i;
};
const ha = ad, j1 = B1, Zi = {}, N1 = Object.keys(ha);
function V1(t) {
  const e = function(...i) {
    const r = i[0];
    return r == null ? r : (r.length > 1 && (i = r), t(i));
  };
  return "conversion" in t && (e.conversion = t.conversion), e;
}
function $1(t) {
  const e = function(...i) {
    const r = i[0];
    if (r == null)
      return r;
    r.length > 1 && (i = r);
    const s = t(i);
    if (typeof s == "object")
      for (let f = s.length, g = 0; g < f; g++)
        s[g] = Math.round(s[g]);
    return s;
  };
  return "conversion" in t && (e.conversion = t.conversion), e;
}
N1.forEach((t) => {
  Zi[t] = {}, Object.defineProperty(Zi[t], "channels", { value: ha[t].channels }), Object.defineProperty(Zi[t], "labels", { value: ha[t].labels });
  const e = j1(t);
  Object.keys(e).forEach((r) => {
    const s = e[r];
    Zi[t][r] = $1(s), Zi[t][r].raw = V1(s);
  });
});
var H1 = Zi;
const Ji = id.exports, ut = H1, cd = [
  "keyword",
  "gray",
  "hex"
], fa = {};
for (const t of Object.keys(ut))
  fa[[...ut[t].labels].sort().join("")] = t;
const ls = {};
function We(t, e) {
  if (!(this instanceof We))
    return new We(t, e);
  if (e && e in cd && (e = null), e && !(e in ut))
    throw new Error("Unknown model: " + e);
  let i, r;
  if (t == null)
    this.model = "rgb", this.color = [0, 0, 0], this.valpha = 1;
  else if (t instanceof We)
    this.model = t.model, this.color = [...t.color], this.valpha = t.valpha;
  else if (typeof t == "string") {
    const s = Ji.get(t);
    if (s === null)
      throw new Error("Unable to parse color from string: " + t);
    this.model = s.model, r = ut[this.model].channels, this.color = s.value.slice(0, r), this.valpha = typeof s.value[r] == "number" ? s.value[r] : 1;
  } else if (t.length > 0) {
    this.model = e || "rgb", r = ut[this.model].channels;
    const s = Array.prototype.slice.call(t, 0, r);
    this.color = da(s, r), this.valpha = typeof t[r] == "number" ? t[r] : 1;
  } else if (typeof t == "number")
    this.model = "rgb", this.color = [
      t >> 16 & 255,
      t >> 8 & 255,
      t & 255
    ], this.valpha = 1;
  else {
    this.valpha = 1;
    const s = Object.keys(t);
    "alpha" in t && (s.splice(s.indexOf("alpha"), 1), this.valpha = typeof t.alpha == "number" ? t.alpha : 0);
    const f = s.sort().join("");
    if (!(f in fa))
      throw new Error("Unable to parse color from object: " + JSON.stringify(t));
    this.model = fa[f];
    const { labels: g } = ut[this.model], l = [];
    for (i = 0; i < g.length; i++)
      l.push(t[g[i]]);
    this.color = da(l);
  }
  if (ls[this.model])
    for (r = ut[this.model].channels, i = 0; i < r; i++) {
      const s = ls[this.model][i];
      s && (this.color[i] = s(this.color[i]));
    }
  this.valpha = Math.max(0, Math.min(1, this.valpha)), Object.freeze && Object.freeze(this);
}
We.prototype = {
  toString() {
    return this.string();
  },
  toJSON() {
    return this[this.model]();
  },
  string(t) {
    let e = this.model in Ji.to ? this : this.rgb();
    e = e.round(typeof t == "number" ? t : 1);
    const i = e.valpha === 1 ? e.color : [...e.color, this.valpha];
    return Ji.to[e.model](i);
  },
  percentString(t) {
    const e = this.rgb().round(typeof t == "number" ? t : 1), i = e.valpha === 1 ? e.color : [...e.color, this.valpha];
    return Ji.to.rgb.percent(i);
  },
  array() {
    return this.valpha === 1 ? [...this.color] : [...this.color, this.valpha];
  },
  object() {
    const t = {}, { channels: e } = ut[this.model], { labels: i } = ut[this.model];
    for (let r = 0; r < e; r++)
      t[i[r]] = this.color[r];
    return this.valpha !== 1 && (t.alpha = this.valpha), t;
  },
  unitArray() {
    const t = this.rgb().color;
    return t[0] /= 255, t[1] /= 255, t[2] /= 255, this.valpha !== 1 && t.push(this.valpha), t;
  },
  unitObject() {
    const t = this.rgb().object();
    return t.r /= 255, t.g /= 255, t.b /= 255, this.valpha !== 1 && (t.alpha = this.valpha), t;
  },
  round(t) {
    return t = Math.max(t || 0, 0), new We([...this.color.map(W1(t)), this.valpha], this.model);
  },
  alpha(t) {
    return t !== void 0 ? new We([...this.color, Math.max(0, Math.min(1, t))], this.model) : this.valpha;
  },
  red: Be("rgb", 0, He(255)),
  green: Be("rgb", 1, He(255)),
  blue: Be("rgb", 2, He(255)),
  hue: Be(["hsl", "hsv", "hsl", "hwb", "hcg"], 0, (t) => (t % 360 + 360) % 360),
  saturationl: Be("hsl", 1, He(100)),
  lightness: Be("hsl", 2, He(100)),
  saturationv: Be("hsv", 1, He(100)),
  value: Be("hsv", 2, He(100)),
  chroma: Be("hcg", 1, He(100)),
  gray: Be("hcg", 2, He(100)),
  white: Be("hwb", 1, He(100)),
  wblack: Be("hwb", 2, He(100)),
  cyan: Be("cmyk", 0, He(100)),
  magenta: Be("cmyk", 1, He(100)),
  yellow: Be("cmyk", 2, He(100)),
  black: Be("cmyk", 3, He(100)),
  x: Be("xyz", 0, He(95.047)),
  y: Be("xyz", 1, He(100)),
  z: Be("xyz", 2, He(108.833)),
  l: Be("lab", 0, He(100)),
  a: Be("lab", 1),
  b: Be("lab", 2),
  keyword(t) {
    return t !== void 0 ? new We(t) : ut[this.model].keyword(this.color);
  },
  hex(t) {
    return t !== void 0 ? new We(t) : Ji.to.hex(this.rgb().round().color);
  },
  hexa(t) {
    if (t !== void 0)
      return new We(t);
    const e = this.rgb().round().color;
    let i = Math.round(this.valpha * 255).toString(16).toUpperCase();
    return i.length === 1 && (i = "0" + i), Ji.to.hex(e) + i;
  },
  rgbNumber() {
    const t = this.rgb().color;
    return (t[0] & 255) << 16 | (t[1] & 255) << 8 | t[2] & 255;
  },
  luminosity() {
    const t = this.rgb().color, e = [];
    for (const [i, r] of t.entries()) {
      const s = r / 255;
      e[i] = s <= 0.04045 ? s / 12.92 : ((s + 0.055) / 1.055) ** 2.4;
    }
    return 0.2126 * e[0] + 0.7152 * e[1] + 0.0722 * e[2];
  },
  contrast(t) {
    const e = this.luminosity(), i = t.luminosity();
    return e > i ? (e + 0.05) / (i + 0.05) : (i + 0.05) / (e + 0.05);
  },
  level(t) {
    const e = this.contrast(t);
    return e >= 7 ? "AAA" : e >= 4.5 ? "AA" : "";
  },
  isDark() {
    const t = this.rgb().color;
    return (t[0] * 2126 + t[1] * 7152 + t[2] * 722) / 1e4 < 128;
  },
  isLight() {
    return !this.isDark();
  },
  negate() {
    const t = this.rgb();
    for (let e = 0; e < 3; e++)
      t.color[e] = 255 - t.color[e];
    return t;
  },
  lighten(t) {
    const e = this.hsl();
    return e.color[2] += e.color[2] * t, e;
  },
  darken(t) {
    const e = this.hsl();
    return e.color[2] -= e.color[2] * t, e;
  },
  saturate(t) {
    const e = this.hsl();
    return e.color[1] += e.color[1] * t, e;
  },
  desaturate(t) {
    const e = this.hsl();
    return e.color[1] -= e.color[1] * t, e;
  },
  whiten(t) {
    const e = this.hwb();
    return e.color[1] += e.color[1] * t, e;
  },
  blacken(t) {
    const e = this.hwb();
    return e.color[2] += e.color[2] * t, e;
  },
  grayscale() {
    const t = this.rgb().color, e = t[0] * 0.3 + t[1] * 0.59 + t[2] * 0.11;
    return We.rgb(e, e, e);
  },
  fade(t) {
    return this.alpha(this.valpha - this.valpha * t);
  },
  opaquer(t) {
    return this.alpha(this.valpha + this.valpha * t);
  },
  rotate(t) {
    const e = this.hsl();
    let i = e.color[0];
    return i = (i + t) % 360, i = i < 0 ? 360 + i : i, e.color[0] = i, e;
  },
  mix(t, e) {
    if (!t || !t.rgb)
      throw new Error('Argument to "mix" was not a Color instance, but rather an instance of ' + typeof t);
    const i = t.rgb(), r = this.rgb(), s = e === void 0 ? 0.5 : e, f = 2 * s - 1, g = i.alpha() - r.alpha(), l = ((f * g === -1 ? f : (f + g) / (1 + f * g)) + 1) / 2, n = 1 - l;
    return We.rgb(
      l * i.red() + n * r.red(),
      l * i.green() + n * r.green(),
      l * i.blue() + n * r.blue(),
      i.alpha() * s + r.alpha() * (1 - s)
    );
  }
};
for (const t of Object.keys(ut)) {
  if (cd.includes(t))
    continue;
  const { channels: e } = ut[t];
  We.prototype[t] = function(...i) {
    return this.model === t ? new We(this) : i.length > 0 ? new We(i, t) : new We([...Y1(ut[this.model][t].raw(this.color)), this.valpha], t);
  }, We[t] = function(...i) {
    let r = i[0];
    return typeof r == "number" && (r = da(i, e)), new We(r, t);
  };
}
function U1(t, e) {
  return Number(t.toFixed(e));
}
function W1(t) {
  return function(e) {
    return U1(e, t);
  };
}
function Be(t, e, i) {
  t = Array.isArray(t) ? t : [t];
  for (const r of t)
    (ls[r] || (ls[r] = []))[e] = i;
  return t = t[0], function(r) {
    let s;
    return r !== void 0 ? (i && (r = i(r)), s = this[t](), s.color[e] = r, s) : (s = this[t]().color[e], i && (s = i(s)), s);
  };
}
function He(t) {
  return function(e) {
    return Math.max(0, Math.min(t, e));
  };
}
function Y1(t) {
  return Array.isArray(t) ? t : [t];
}
function da(t, e) {
  for (let i = 0; i < e; i++)
    typeof t[i] != "number" && (t[i] = 0);
  return t;
}
var G1 = We;
const X1 = G1;
function K1(t) {
  const e = t.isDark ? sa.find((s) => s.isDark) : sa.find((s) => !s.isDark), i = {
    ...e,
    ...t,
    colors: {
      ...e == null ? void 0 : e.colors,
      ...t.colors
    }
  }, r = Object.entries(i.colors).map(
    ([s, f]) => [s, q1(f)]
  );
  return {
    id: i.name,
    name: i.name,
    colors: Object.fromEntries(r),
    is_dark: i.isDark
  };
}
function q1(t) {
  return t.endsWith("%") || t.split(" ").length === 3 ? t : X1(t).rgb().array().slice(0, 3).join(" ");
}
var Gh;
let _t = typeof document < "u" ? (Gh = document.getElementById("root")) != null ? Gh : document.body : void 0;
function Z1(t) {
  _t = t;
}
function J1(t, e) {
  _t == null || _t.style.setProperty(t, e);
}
function Q1(t) {
  Object.entries(t.colors).forEach(([e, i]) => {
    J1(e, i);
  }), t.is_dark ? _t.classList.add("dark") : _t.classList.remove("dark");
}
const tu = {
  top: 0,
  right: 0,
  bottom: 0,
  left: 0,
  width: 0,
  height: 0
}, oe = Xf()(
  $y(
    td((t, e) => ({
      editor: null,
      fabric: null,
      bootstrapData: {},
      config: Hf,
      zoom: 1,
      dirty: !1,
      original: {
        width: 1,
        height: 1
      },
      stageSize: tu,
      canvasSize: tu,
      canvasRef: null,
      activeTool: null,
      activeToolOverlay: null,
      loading: !1,
      openPanels: {
        newImage: !1,
        history: !1,
        objects: !1,
        export: !1
      },
      ...m1(t, e),
      ..._1(t, e),
      ...v1(t, e),
      ...b1(t, e),
      ...S1(t, e),
      ...C1(t, e),
      ...T1(t, e),
      setZoom: (i) => t((r) => {
        r.zoom = i;
      }),
      setOriginal: (i, r) => t((s) => {
        s.original = { width: i, height: r };
      }),
      setDirty: (i) => t((r) => {
        r.dirty = i;
      }),
      toggleLoading: (i) => t((r) => {
        r.loading = i;
      }),
      setStageSize: (i) => t((r) => {
        r.stageSize = i;
      }),
      setCanvasSize: (i) => t((r) => {
        r.canvasSize = i;
      }),
      setActiveTool: (i, r) => {
        t((s) => {
          s.activeTool = i, s.activeToolOverlay = r;
        });
      },
      setConfig: (i) => t((r) => {
        var a, h;
        const s = g1(i, e().config);
        r.config = s;
        const f = s.activeLanguage || "en", g = (a = s.languages) == null ? void 0 : a[f], l = (((h = s.ui) == null ? void 0 : h.themes) || []).map(
          (o) => K1(o)
        ), n = l.find(
          (o) => {
            var u;
            return o.id === ((u = s.ui) == null ? void 0 : u.activeTheme);
          }
        );
        n && Q1(n), r.bootstrapData = {
          i18n: { language: f, name: f, id: 0, lines: g },
          themes: {
            all: l
          }
        };
      }),
      togglePanel: (i, r) => t((s) => {
        s.openPanels[i] = r != null ? r : !s.openPanels[i];
      }),
      applyChanges: async () => {
        var f;
        const i = e().activeTool;
        if (!i)
          return;
        const r = e()[i], s = await ((f = r == null ? void 0 : r.apply) == null ? void 0 : f.call(r));
        t((g) => {
          g.dirty = !1, g.activeTool = null, g.activeToolOverlay = null;
        }), s !== !1 && e().editor.tools.history.addHistoryItem({ name: i }), r == null || r.reset();
      },
      cancelChanges: async () => {
        const i = e().activeTool;
        if (!i)
          return;
        const r = e().dirty;
        t((f) => {
          f.dirty = !1, f.activeTool = null, f.activeToolOverlay = null;
        }), r && await e().editor.tools.history.reload();
        const s = e()[i];
        s == null || s.reset();
      },
      reset: () => {
        e().editor.tools.transform.resetStraightenAnchor(), t({
          activeTool: null,
          activeToolOverlay: null,
          zoom: 1,
          dirty: !1,
          loading: !1,
          openPanels: {
            newImage: !1,
            history: !1,
            objects: !1,
            export: !1
          }
        }), e().history.reset(), e().objects.reset(), e().filter.reset(), e().crop.reset(), e().frame.reset(), e().resize.reset(), e().corners.reset();
      }
    }))
  )
);
function O() {
  return oe.getState();
}
function I() {
  return O().editor.tools;
}
function he() {
  return O().fabric;
}
function pa(t) {
  var i, r, s, f, g;
  I().canvas.clear(), I().frame.remove();
  const e = !((i = O().config.ui) != null && i.visible);
  return O().setConfig({ image: void 0, blankCanvasSize: void 0, ...t }), O().reset(), (r = O().config.ui) != null && r.defaultTool && O().setActiveTool((s = O().config.ui) == null ? void 0 : s.defaultTool, null), e && ((g = (f = O().config).onOpen) == null || g.call(f)), new Promise((l) => setTimeout(l));
}
async function zs(t) {
  return (await fetch(t)).json();
}
const zi = {
  selectable: !1,
  evented: !1,
  lockMovementX: !0,
  lockMovementY: !0,
  lockRotation: !0,
  lockScalingX: !0,
  lockScalingY: !0,
  lockUniScaling: !0,
  hasControls: !1,
  hasBorders: !1,
  hasRotatingPoint: !1,
  strokeWidth: 0
};
function us(t = []) {
  var r;
  t = [
    ...Object.keys(zi),
    "crossOrigin",
    "name",
    "displayName",
    "data",
    ...t
  ];
  const e = he().toJSON(
    t
  );
  e.objects = e.objects.filter((s) => !s.data.photaliusInternal).map((s) => (s.type === "image" && O().config.crossOrigin && (s.crossOrigin = "anonymous"), di(s) && (s.selectable = !0, s.lockMovementX = !1, s.lockMovementY = !1, s.lockUniScaling = !1), { ...s, data: s.data ? { ...s.data } : {} }));
  const i = I().frame.active.config ? {
    name: I().frame.active.config.name,
    sizePercent: I().frame.active.currentSizeInPercent
  } : null;
  return {
    canvas: e,
    editor: {
      frame: i,
      zoom: O().zoom,
      activeObjectId: ((r = O().objects.active) == null ? void 0 : r.id) || null
    },
    canvasWidth: O().original.width,
    canvasHeight: O().original.height
  };
}
function bc(t = null) {
  if (O().dirty)
    return;
  I().zoom.fitToScreen();
  const [e, i] = ld(
    he().getActiveObject()
  );
  t ? O().setActiveTool(t, e === t ? i : null) : O().setActiveTool(e, i);
}
function ld(t) {
  switch (t == null ? void 0 : t.name) {
    case Ne.Text:
      return [Ae.TEXT, wt.Text];
    case Ne.Sticker:
      return [Ae.STICKERS, wt.ActiveObject];
    case Ne.Image:
      return [null, wt.ActiveObject];
    case Ne.Shape:
      return [Ae.SHAPES, wt.ActiveObject];
    default:
      return [null, null];
  }
}
const ew = `/*! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com*/.pi *,.pi :after,.pi :before{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));border-style:solid;border-width:0;box-sizing:border-box}.pi :after,.pi :before{--tw-content:""}.pi hr{border-top-width:1px;color:inherit;height:0}.pi abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6{font-size:inherit;font-weight:inherit}.pi a{color:inherit;text-decoration:inherit}.pi b,.pi strong{font-weight:bolder}.pi code,.pi kbd,.pi pre,.pi samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}.pi small{font-size:80%}.pi sub,.pi sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.pi sub{bottom:-.25em}.pi sup{top:-.5em}.pi table{border-collapse:collapse;border-color:inherit;text-indent:0}.pi button,.pi input,.pi optgroup,.pi select,.pi textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}.pi button,.pi select{text-transform:none}.pi [type=button],.pi [type=reset],.pi [type=submit],.pi button{-webkit-appearance:button;background-color:transparent;background-image:none}.pi :-moz-focusring{outline:auto}.pi :-moz-ui-invalid{box-shadow:none}.pi progress{vertical-align:baseline}.pi ::-webkit-inner-spin-button,.pi ::-webkit-outer-spin-button{height:auto}.pi [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.pi ::-webkit-search-decoration{-webkit-appearance:none}.pi ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.pi summary{display:list-item}.pi blockquote,.pi dd,.pi dl,.pi figure,.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6,.pi hr,.pi p,.pi pre{margin:0}.pi fieldset{margin:0;padding:0}.pi legend{padding:0}.pi menu,.pi ol,.pi ul{list-style:none;margin:0;padding:0}.pi textarea{resize:vertical}.pi input::-moz-placeholder,.pi textarea::-moz-placeholder{color:#9ca3af;opacity:1}.pi input::placeholder,.pi textarea::placeholder{color:#9ca3af;opacity:1}.pi [role=button],.pi button{cursor:pointer}.pi :disabled{cursor:default}.pi audio,.pi canvas,.pi embed,.pi iframe,.pi img,.pi object,.pi svg,.pi video{display:block;vertical-align:middle}.pi img,.pi video{height:auto;max-width:100%}.pi [hidden]{display:none}.pi *,.pi :after,.pi :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi .\\!container{width:100%!important}.pi .container{width:100%}@media (min-width:640px){.pi .\\!container{max-width:640px!important}.pi .container{max-width:640px}}@media (min-width:768px){.pi .\\!container{max-width:768px!important}.pi .container{max-width:768px}}@media (min-width:1024px){.pi .\\!container{max-width:1024px!important}.pi .container{max-width:1024px}}@media (min-width:1280px){.pi .\\!container{max-width:1280px!important}.pi .container{max-width:1280px}}@media (min-width:1536px){.pi .\\!container{max-width:1536px!important}.pi .container{max-width:1536px}}.pi .sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.pi .pointer-events-none{pointer-events:none}.pi .pointer-events-auto{pointer-events:auto}.pi .\\!visible{visibility:visible!important}.pi .visible{visibility:visible}.pi .invisible{visibility:hidden}.pi .collapse{visibility:collapse}.pi .static{position:static}.pi .fixed{position:fixed}.pi .absolute{position:absolute}.pi .relative{position:relative}.pi .sticky{position:sticky}.pi .inset-0{inset:0}.pi .inset-x-0{left:0;right:0}.pi .-bottom-10{bottom:-10px}.pi .-bottom-14{bottom:-14px}.pi .-bottom-20{bottom:-20px}.pi .-bottom-5{bottom:-5px}.pi .-bottom-6{bottom:-6px}.pi .-left-5{left:-5px}.pi .-left-8{left:-8px}.pi .-left-80{left:-80px}.pi .-right-5{right:-5px}.pi .-right-6{right:-6px}.pi .-top-144{top:-144px}.pi .-top-40{top:-40px}.pi .-top-5{top:-5px}.pi .bottom-0{bottom:0}.pi .bottom-12{bottom:12px}.pi .bottom-20{bottom:20px}.pi .left-0{left:0}.pi .left-1\\/2{left:50%}.pi .left-16{left:16px}.pi .left-20{left:20px}.pi .left-30{left:30px}.pi .right-0{right:0}.pi .right-16{right:16px}.pi .right-2{right:2px}.pi .right-20{right:20px}.pi .right-4{right:4px}.pi .top-0{top:0}.pi .top-1\\/2{top:50%}.pi .top-10{top:10px}.pi .top-2{top:2px}.pi .top-24{top:24px}.pi .top-26{top:26px}.pi .isolate{isolation:isolate}.pi .z-10{z-index:10}.pi .z-20{z-index:20}.pi .z-30{z-index:30}.pi .z-40{z-index:40}.pi .z-50{z-index:50}.pi .z-cropzone{z-index:10}.pi .z-loading-indicator{z-index:50}.pi .z-modal{z-index:110}.pi .z-navbar{z-index:40}.pi .z-obj-box{z-index:20}.pi .z-popover{z-index:130}.pi .z-toast{z-index:160}.pi .z-tool-overlay{z-index:30}.pi .z-tooltip{z-index:150}.pi .z-tray{z-index:120}.pi .m-1{margin:1px}.pi .m-auto{margin:auto}.pi .mx-14{margin-left:14px;margin-right:14px}.pi .mx-20{margin-left:20px;margin-right:20px}.pi .mx-4{margin-left:4px;margin-right:4px}.pi .mx-8{margin-left:8px;margin-right:8px}.pi .mx-auto{margin-left:auto;margin-right:auto}.pi .my-10{margin-bottom:10px;margin-top:10px}.pi .my-100{margin-bottom:6.25rem;margin-top:6.25rem}.pi .my-12{margin-bottom:12px;margin-top:12px}.pi .my-14{margin-bottom:14px;margin-top:14px}.pi .my-16{margin-bottom:16px;margin-top:16px}.pi .my-20{margin-bottom:20px;margin-top:20px}.pi .my-24{margin-bottom:24px;margin-top:24px}.pi .my-30{margin-bottom:30px;margin-top:30px}.pi .my-32{margin-bottom:32px;margin-top:32px}.pi .my-4{margin-bottom:4px;margin-top:4px}.pi .my-40{margin-bottom:40px;margin-top:40px}.pi .my-50{margin-bottom:50px;margin-top:50px}.pi .my-60{margin-bottom:60px;margin-top:60px}.pi .my-8{margin-bottom:8px;margin-top:8px}.pi .my-80{margin-bottom:80px;margin-top:80px}.pi .my-auto{margin-bottom:auto;margin-top:auto}.pi .-ml-1{margin-left:-1px}.pi .-ml-10{margin-left:-10px}.pi .-ml-12{margin-left:-12px}.pi .-ml-3{margin-left:-3px}.pi .-ml-4{margin-left:-4px}.pi .-ml-6{margin-left:-6px}.pi .-mr-4{margin-right:-4px}.pi .-mr-8{margin-right:-8px}.pi .-mt-2{margin-top:-2px}.pi .mb-1{margin-bottom:1px}.pi .mb-10{margin-bottom:10px}.pi .mb-12{margin-bottom:12px}.pi .mb-14{margin-bottom:14px}.pi .mb-16{margin-bottom:16px}.pi .mb-2{margin-bottom:2px}.pi .mb-20{margin-bottom:20px}.pi .mb-24{margin-bottom:24px}.pi .mb-30{margin-bottom:30px}.pi .mb-32{margin-bottom:32px}.pi .mb-4{margin-bottom:4px}.pi .mb-40{margin-bottom:40px}.pi .mb-48{margin-bottom:48px}.pi .mb-50{margin-bottom:50px}.pi .mb-6{margin-bottom:6px}.pi .mb-64{margin-bottom:64px}.pi .mb-8{margin-bottom:8px}.pi .ml-10{margin-left:10px}.pi .ml-12{margin-left:12px}.pi .ml-6{margin-left:6px}.pi .ml-8{margin-left:8px}.pi .ml-auto{margin-left:auto}.pi .mr-10{margin-right:10px}.pi .mr-12{margin-right:12px}.pi .mr-14{margin-right:14px}.pi .mr-16{margin-right:16px}.pi .mr-2{margin-right:2px}.pi .mr-20{margin-right:20px}.pi .mr-24{margin-right:24px}.pi .mr-4{margin-right:4px}.pi .mr-5{margin-right:5px}.pi .mr-6{margin-right:6px}.pi .mr-8{margin-right:8px}.pi .mr-auto{margin-right:auto}.pi .mt-0{margin-top:0}.pi .mt-10{margin-top:10px}.pi .mt-12{margin-top:12px}.pi .mt-14{margin-top:14px}.pi .mt-16{margin-top:16px}.pi .mt-18{margin-top:18px}.pi .mt-2{margin-top:2px}.pi .mt-20{margin-top:20px}.pi .mt-24{margin-top:24px}.pi .mt-30{margin-top:30px}.pi .mt-32{margin-top:32px}.pi .mt-34{margin-top:2.125rem}.pi .mt-36{margin-top:36px}.pi .mt-4{margin-top:4px}.pi .mt-40{margin-top:40px}.pi .mt-50{margin-top:50px}.pi .mt-6{margin-top:6px}.pi .mt-60{margin-top:60px}.pi .mt-8{margin-top:8px}.pi .mt-80{margin-top:80px}.pi .mt-auto{margin-top:auto}.pi .box-content{box-sizing:content-box}.pi .block{display:block}.pi .inline-block{display:inline-block}.pi .inline{display:inline}.pi .flex{display:flex}.pi .inline-flex{display:inline-flex}.pi .table{display:table}.pi .table-cell{display:table-cell}.pi .table-row{display:table-row}.pi .\\!grid{display:grid!important}.pi .grid{display:grid}.pi .contents{display:contents}.pi .hidden{display:none}.pi .aspect-square{aspect-ratio:1/1}.pi .aspect-video{aspect-ratio:16/9}.pi .h-1{height:1px}.pi .h-12{height:12px}.pi .h-128{height:128px}.pi .h-14{height:14px}.pi .h-144{height:144px}.pi .h-16{height:16px}.pi .h-18{height:18px}.pi .h-192{height:192px}.pi .h-2{height:2px}.pi .h-2\\/4{height:50%}.pi .h-20{height:20px}.pi .h-22{height:22px}.pi .h-24{height:24px}.pi .h-26{height:26px}.pi .h-28{height:28px}.pi .h-30{height:30px}.pi .h-32{height:32px}.pi .h-36{height:36px}.pi .h-38{height:2.375rem}.pi .h-4{height:4px}.pi .h-40{height:40px}.pi .h-400{height:25rem}.pi .h-42{height:42px}.pi .h-46{height:2.875rem}.pi .h-48{height:48px}.pi .h-50{height:50px}.pi .h-54{height:3.375rem}.pi .h-56{height:56px}.pi .h-6{height:6px}.pi .h-60{height:60px}.pi .h-64{height:64px}.pi .h-68{height:68px}.pi .h-8{height:8px}.pi .h-80{height:80px}.pi .h-84{height:84px}.pi .h-90{height:5.625rem}.pi .h-92{height:92px}.pi .h-\\[186px\\]{height:186px}.pi .h-\\[54px\\]{height:54px}.pi .h-\\[97px\\]{height:97px}.pi .h-auto{height:auto}.pi .h-font{height:1em}.pi .h-full{height:100%}.pi .h-px{height:1px}.pi .max-h-100{max-height:6.25rem}.pi .max-h-240{max-height:240px}.pi .max-h-26{max-height:26px}.pi .max-h-36{max-height:36px}.pi .max-h-400{max-height:25rem}.pi .max-h-8{max-height:8px}.pi .max-h-\\[340px\\]{max-height:340px}.pi .max-h-\\[36px\\]{max-height:36px}.pi .max-h-\\[600px\\]{max-height:600px}.pi .max-h-\\[calc\\(100\\%-30px\\)\\]{max-height:calc(100% - 30px)}.pi .max-h-\\[calc\\(100\\%-40px\\)\\]{max-height:calc(100% - 40px)}.pi .max-h-\\[calc\\(100vh-90px\\)\\]{max-height:calc(100vh - 90px)}.pi .max-h-dialog{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .max-h-full{max-height:100%}.pi .max-h-inherit{max-height:inherit}.pi .max-h-tray{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-200{min-height:12.5rem}.pi .min-h-24{min-height:24px}.pi .min-h-30{min-height:30px}.pi .min-h-36{min-height:36px}.pi .min-h-42{min-height:42px}.pi .min-h-440{min-height:27.5rem}.pi .min-h-50{min-height:50px}.pi .min-h-60{min-height:60px}.pi .min-h-70{min-height:70px}.pi .min-h-86{min-height:86px}.pi .min-h-90{min-height:5.625rem}.pi .min-h-\\[238px\\]{min-height:238px}.pi .min-h-\\[303px\\]{min-height:303px}.pi .min-h-\\[340px\\]{min-height:340px}.pi .min-h-dialog{min-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-full{min-height:100%}.pi .\\!w-auto{width:auto!important}.pi .w-1{width:1px}.pi .w-1\\/2{width:50%}.pi .w-1\\/3{width:33.333333%}.pi .w-100{width:6.25rem}.pi .w-110{width:110px}.pi .w-12{width:12px}.pi .w-128{width:128px}.pi .w-1280{width:80rem}.pi .w-14{width:14px}.pi .w-144{width:144px}.pi .w-16{width:16px}.pi .w-18{width:18px}.pi .w-192{width:192px}.pi .w-2{width:2px}.pi .w-20{width:20px}.pi .w-22{width:22px}.pi .w-224{width:224px}.pi .w-24{width:24px}.pi .w-240{width:240px}.pi .w-256{width:256px}.pi .w-26{width:26px}.pi .w-28{width:28px}.pi .w-280{width:17.5rem}.pi .w-288{width:288px}.pi .w-30{width:30px}.pi .w-32{width:32px}.pi .w-320{width:320px}.pi .w-36{width:36px}.pi .w-38{width:2.375rem}.pi .w-384{width:384px}.pi .w-40{width:40px}.pi .w-42{width:42px}.pi .w-440{width:27.5rem}.pi .w-46{width:2.875rem}.pi .w-50{width:50px}.pi .w-56{width:56px}.pi .w-60{width:60px}.pi .w-620{width:38.75rem}.pi .w-64{width:64px}.pi .w-68{width:68px}.pi .w-780{width:48.75rem}.pi .w-8{width:8px}.pi .w-80{width:80px}.pi .w-84{width:84px}.pi .w-850{width:53.125rem}.pi .w-90{width:5.625rem}.pi .w-96{width:96px}.pi .w-\\[168px\\]{width:168px}.pi .w-\\[170px\\]{width:170px}.pi .w-\\[233px\\]{width:233px}.pi .w-\\[480px\\]{width:480px}.pi .w-\\[4ch\\]{width:4ch}.pi .w-\\[calc\\(100\\%-40px\\)\\]{width:calc(100% - 40px)}.pi .w-auto{width:auto}.pi .w-font{width:1em}.pi .w-full{width:100%}.pi .w-max{width:-moz-max-content;width:max-content}.pi .w-min{width:-moz-min-content;width:min-content}.pi .w-px{width:1px}.pi .min-w-0{min-width:0}.pi .min-w-128{min-width:128px}.pi .min-w-140{min-width:8.75rem}.pi .min-w-144{min-width:144px}.pi .min-w-160{min-width:160px}.pi .min-w-180{min-width:11.25rem}.pi .min-w-192{min-width:192px}.pi .min-w-200{min-width:12.5rem}.pi .min-w-288{min-width:288px}.pi .min-w-320{min-width:320px}.pi .min-w-4{min-width:4px}.pi .min-w-40{min-width:40px}.pi .min-w-42{min-width:42px}.pi .min-w-500{min-width:31.25rem}.pi .min-w-80{min-width:80px}.pi .min-w-90{min-width:5.625rem}.pi .min-w-\\[300px\\]{min-width:300px}.pi .min-w-min{min-width:-moz-min-content;min-width:min-content}.pi .max-w-100{max-width:6.25rem}.pi .max-w-110{max-width:110px}.pi .max-w-112{max-width:112px}.pi .max-w-124{max-width:7.75rem}.pi .max-w-180{max-width:11.25rem}.pi .max-w-224{max-width:224px}.pi .max-w-240{max-width:240px}.pi .max-w-280{max-width:17.5rem}.pi .max-w-288{max-width:288px}.pi .max-w-320{max-width:320px}.pi .max-w-36{max-width:36px}.pi .max-w-375{max-width:375px}.pi .max-w-384{max-width:384px}.pi .max-w-4\\/5{max-width:80%}.pi .max-w-400{max-width:25rem}.pi .max-w-440{max-width:27.5rem}.pi .max-w-500{max-width:31.25rem}.pi .max-w-580{max-width:36.25rem}.pi .max-w-620{max-width:38.75rem}.pi .max-w-84{max-width:84px}.pi .max-w-\\[464px\\]{max-width:464px}.pi .max-w-\\[90\\%\\]{max-width:90%}.pi .max-w-\\[calc\\(100\\%-40px\\)\\]{max-width:calc(100% - 40px)}.pi .max-w-\\[calc\\(100vw-90px\\)\\]{max-width:calc(100vw - 90px)}.pi .max-w-dialog{max-width:calc(var(--be-viewport-width, 100vw)*.9)}.pi .max-w-full{max-width:100%}.pi .max-w-max{max-width:-moz-max-content;max-width:max-content}.pi .flex-1{flex:1 1 0%}.pi .flex-2{flex:2 1 0%}.pi .flex-3{flex:3 1 0%}.pi .flex-auto{flex:1 1 auto}.pi .flex-initial{flex:0 1 auto}.pi .flex-shrink-0,.pi .shrink-0{flex-shrink:0}.pi .origin-\\[100\\%\\]{transform-origin:100%}.pi .-translate-x-1\\/2{--tw-translate-x:-50%}.pi .-translate-x-1\\/2,.pi .-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .-translate-y-1\\/2{--tw-translate-y:-50%}.pi .rotate-0{--tw-rotate:0deg}.pi .rotate-0,.pi .rotate-180{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-180{--tw-rotate:180deg}.pi .rotate-45{--tw-rotate:45deg}.pi .rotate-45,.pi .rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-90{--tw-rotate:90deg}.pi .transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .cursor-default{cursor:default}.pi .cursor-move{cursor:move}.pi .cursor-nesw-resize{cursor:nesw-resize}.pi .cursor-not-allowed{cursor:not-allowed}.pi .cursor-nwse-resize{cursor:nwse-resize}.pi .cursor-pointer{cursor:pointer}.pi .cursor-se-resize{cursor:se-resize}.pi .cursor-sw-resize{cursor:sw-resize}.pi .cursor-zoom-in{cursor:zoom-in}.pi .touch-none{touch-action:none}.pi .select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .resize-none{resize:none}.pi .resize{resize:both}.pi .snap-x{scroll-snap-type:x var(--tw-scroll-snap-strictness)}.pi .snap-mandatory{--tw-scroll-snap-strictness:mandatory}.pi .snap-start{scroll-snap-align:start}.pi .snap-normal{scroll-snap-stop:normal}.pi .snap-always{scroll-snap-stop:always}.pi .appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.pi .break-inside-avoid{-moz-column-break-inside:avoid;break-inside:avoid}.pi .grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.pi .grid-cols-5-min-content{grid-template-columns:repeat(5,min-content)}.pi .grid-cols-\\[repeat\\(auto-fill\\,minmax\\(90px\\,1fr\\)\\)\\]{grid-template-columns:repeat(auto-fill,minmax(90px,1fr))}.pi .flex-row{flex-direction:row}.pi .flex-col{flex-direction:column}.pi .flex-col-reverse{flex-direction:column-reverse}.pi .flex-wrap{flex-wrap:wrap}.pi .flex-nowrap{flex-wrap:nowrap}.pi .items-start{align-items:flex-start}.pi .items-end{align-items:flex-end}.pi .items-center{align-items:center}.pi .items-stretch{align-items:stretch}.pi .justify-start{justify-content:flex-start}.pi .justify-end{justify-content:flex-end}.pi .justify-center{justify-content:center}.pi .justify-between{justify-content:space-between}.pi .gap-10{gap:10px}.pi .gap-12{gap:12px}.pi .gap-14{gap:14px}.pi .gap-16{gap:16px}.pi .gap-18{gap:18px}.pi .gap-2{gap:2px}.pi .gap-20{gap:20px}.pi .gap-24{gap:24px}.pi .gap-30{gap:30px}.pi .gap-32{gap:32px}.pi .gap-36{gap:36px}.pi .gap-4{gap:4px}.pi .gap-40{gap:40px}.pi .gap-6{gap:6px}.pi .gap-64{gap:64px}.pi .gap-8{gap:8px}.pi .gap-x-10{-moz-column-gap:10px;column-gap:10px}.pi .gap-x-16{-moz-column-gap:16px;column-gap:16px}.pi .space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(10px*var(--tw-space-y-reverse));margin-top:calc(10px*(1 - var(--tw-space-y-reverse)))}.pi .self-stretch{align-self:stretch}.pi .overflow-auto{overflow:auto}.pi .overflow-hidden{overflow:hidden}.pi .overflow-x-auto{overflow-x:auto}.pi .overflow-y-auto{overflow-y:auto}.pi .overflow-x-hidden{overflow-x:hidden}.pi .overflow-y-hidden{overflow-y:hidden}.pi .overflow-y-visible{overflow-y:visible}.pi .scroll-smooth{scroll-behavior:smooth}.pi .truncate{overflow:hidden;white-space:nowrap}.pi .overflow-ellipsis,.pi .text-ellipsis,.pi .truncate{text-overflow:ellipsis}.pi .whitespace-normal{white-space:normal}.pi .whitespace-nowrap{white-space:nowrap}.pi .whitespace-pre-wrap{white-space:pre-wrap}.pi .break-words{overflow-wrap:break-word}.pi .rounded{border-radius:4px}.pi .rounded-2xl{border-radius:16px}.pi .rounded-3xl{border-radius:24px}.pi .rounded-full{border-radius:9999px}.pi .rounded-lg{border-radius:8px}.pi .rounded-md{border-radius:6px}.pi .rounded-none{border-radius:0}.pi .rounded-sm{border-radius:2px}.pi .rounded-xl{border-radius:12px}.pi .rounded-l{border-bottom-left-radius:4px;border-top-left-radius:4px}.pi .rounded-l-full{border-bottom-left-radius:9999px;border-top-left-radius:9999px}.pi .rounded-l-md{border-bottom-left-radius:6px;border-top-left-radius:6px}.pi .rounded-l-none{border-bottom-left-radius:0;border-top-left-radius:0}.pi .rounded-r{border-bottom-right-radius:4px;border-top-right-radius:4px}.pi .rounded-r-full{border-bottom-right-radius:9999px;border-top-right-radius:9999px}.pi .rounded-r-md{border-bottom-right-radius:6px;border-top-right-radius:6px}.pi .rounded-r-none{border-bottom-right-radius:0;border-top-right-radius:0}.pi .rounded-t{border-top-left-radius:4px;border-top-right-radius:4px}.pi .rounded-bl-none{border-bottom-left-radius:0}.pi .rounded-br-none{border-bottom-right-radius:0}.pi .rounded-tl-none{border-top-left-radius:0}.pi .rounded-tr-none{border-top-right-radius:0}.pi .border{border-width:1px}.pi .border-2{border-width:2px}.pi .border-4{border-width:4px}.pi .border-\\[3px\\]{border-width:3px}.pi .border-x{border-left-width:1px;border-right-width:1px}.pi .border-y{border-top-width:1px}.pi .border-b,.pi .border-y{border-bottom-width:1px}.pi .border-b-4{border-bottom-width:4px}.pi .border-l{border-left-width:1px}.pi .border-l-4{border-left-width:4px}.pi .border-r{border-right-width:1px}.pi .border-r-4{border-right-width:4px}.pi .border-t{border-top-width:1px}.pi .border-t-4{border-top-width:4px}.pi .border-dotted{border-style:dotted}.pi .border-none{border-style:none}.pi .border-background{--tw-border-opacity:1;border-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-bg-alt{--tw-border-opacity:1;border-color:rgb(var(--be-background-alt)/var(--tw-border-opacity))}.pi .border-chip{--tw-border-opacity:1;border-color:rgb(var(--be-background-chip)/var(--tw-border-opacity))}.pi .border-danger{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-danger\\/50{border-color:#ef444480}.pi .border-divider{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-paper{--tw-border-opacity:1;border-color:rgb(var(--be-paper)/var(--tw-border-opacity))}.pi .border-primary{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-primary\\/50{border-color:rgb(var(--be-primary)/.5)}.pi .border-text-muted{border-color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .border-transparent{border-color:transparent}.pi .border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .border-white\\/30{border-color:#ffffff4d}.pi .border-white\\/50{border-color:#ffffff80}.pi .border-b-divider{border-bottom-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-b-primary{--tw-border-opacity:1;border-bottom-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-l-danger{--tw-border-opacity:1;border-left-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-l-positive{--tw-border-opacity:1;border-left-color:rgb(34 197 94/var(--tw-border-opacity))}.pi .border-l-primary{--tw-border-opacity:1;border-left-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-l-transparent{border-left-color:transparent}.pi .border-l-warning{--tw-border-opacity:1;border-left-color:rgb(243 164 50/var(--tw-border-opacity))}.pi .border-r-primary-light{--tw-border-opacity:1;border-right-color:rgb(var(--be-primary-light)/var(--tw-border-opacity))}.pi .border-r-transparent{border-right-color:transparent}.pi .border-t-divider{border-top-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-alt{--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi .bg-background{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-background\\/70{background-color:rgb(var(--be-background)/.7)}.pi .bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.pi .bg-black\\/20{background-color:#0003}.pi .bg-black\\/30{background-color:#0000004d}.pi .bg-black\\/50{background-color:#00000080}.pi .bg-black\\/60{background-color:#0009}.pi .bg-black\\/80{background-color:#000c}.pi .bg-chip{--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi .bg-controls{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-danger{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .bg-danger-lighter{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.pi .bg-danger\\/6{background-color:#ef44440f}.pi .bg-danger\\/focus{background-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .bg-divider{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg-envato{--tw-bg-opacity:1;background-color:rgb(108 161 43/var(--tw-bg-opacity))}.pi .bg-fg-base\\/4{background-color:rgb(var(--be-foreground-base)/4%)}.pi .bg-fg-base\\/8{background-color:rgb(var(--be-foreground-base)/8%)}.pi .bg-focus{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .bg-inherit{background-color:inherit}.pi .bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}.pi .bg-positive{--tw-bg-opacity:1;background-color:rgb(34 197 94/var(--tw-bg-opacity))}.pi .bg-positive-lighter{--tw-bg-opacity:1;background-color:rgb(187 247 208/var(--tw-bg-opacity))}.pi .bg-positive\\/focus{background-color:rgb(34 197 94/var(--be-focus-opacity))}.pi .bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .bg-primary-dark{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .bg-primary-light{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-light)/var(--tw-bg-opacity))}.pi .bg-primary-light\\/20{background-color:rgb(var(--be-primary-light)/.2)}.pi .bg-primary-light\\/40{background-color:rgb(var(--be-primary-light)/.4)}.pi .bg-primary\\/10{background-color:rgb(var(--be-primary)/.1)}.pi .bg-primary\\/5{background-color:rgb(var(--be-primary)/.05)}.pi .bg-primary\\/focus{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .bg-primary\\/hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .bg-primary\\/selected{background-color:rgb(var(--be-primary)/var(--be-selected-opacity))}.pi .bg-selected{background-color:rgb(var(--be-foreground-base)/var(--be-selected-opacity))}.pi .bg-slider-disabled{--tw-bg-opacity:1;background-color:rgb(189 189 189/var(--tw-bg-opacity))}.pi .bg-slider-disabled\\/60{background-color:#bdbdbd99}.pi .bg-toast{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-transparent{background-color:transparent}.pi .bg-warning{--tw-bg-opacity:1;background-color:rgb(243 164 50/var(--tw-bg-opacity))}.pi .bg-warning\\/15{background-color:#f3a43226}.pi .bg-warning\\/focus{background-color:rgb(243 164 50/var(--be-focus-opacity))}.pi .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .bg-white\\/20{background-color:#fff3}.pi .bg-white\\/40{background-color:#fff6}.pi .bg-white\\/50{background-color:#ffffff80}.pi .bg-opacity-95{--tw-bg-opacity:.95}.pi .bg-contain{background-size:contain}.pi .bg-cover{background-size:cover}.pi .bg-bottom{background-position:bottom}.pi .bg-center{background-position:50%}.pi .bg-no-repeat{background-repeat:no-repeat}.pi .bg-repeat-x{background-repeat:repeat-x}.pi .fill-current{fill:currentColor}.pi .fill-transparent{fill:transparent}.pi .stroke-current{stroke:currentColor}.pi .object-contain{-o-object-fit:contain;object-fit:contain}.pi .object-cover{-o-object-fit:cover;object-fit:cover}.pi .p-0{padding:0}.pi .p-10{padding:10px}.pi .p-12{padding:12px}.pi .p-14{padding:14px}.pi .p-16{padding:16px}.pi .p-18{padding:18px}.pi .p-2{padding:2px}.pi .p-20{padding:20px}.pi .p-24{padding:24px}.pi .p-4{padding:4px}.pi .p-40{padding:40px}.pi .p-6{padding:6px}.pi .p-8{padding:8px}.pi .px-10{padding-left:10px;padding-right:10px}.pi .px-12{padding-left:12px;padding-right:12px}.pi .px-14{padding-left:14px;padding-right:14px}.pi .px-16{padding-left:16px;padding-right:16px}.pi .px-18{padding-left:18px;padding-right:18px}.pi .px-20{padding-left:20px;padding-right:20px}.pi .px-22{padding-left:22px;padding-right:22px}.pi .px-24{padding-left:24px;padding-right:24px}.pi .px-26{padding-left:26px;padding-right:26px}.pi .px-28{padding-left:28px;padding-right:28px}.pi .px-32{padding-left:32px;padding-right:32px}.pi .px-4{padding-left:4px;padding-right:4px}.pi .px-40{padding-left:40px;padding-right:40px}.pi .px-5vw{padding-left:5vw;padding-right:5vw}.pi .px-6{padding-left:6px;padding-right:6px}.pi .px-8{padding-left:8px;padding-right:8px}.pi .py-10{padding-bottom:10px;padding-top:10px}.pi .py-12{padding-bottom:12px;padding-top:12px}.pi .py-14{padding-bottom:14px;padding-top:14px}.pi .py-2{padding-bottom:2px;padding-top:2px}.pi .py-20{padding-bottom:20px;padding-top:20px}.pi .py-28{padding-bottom:28px;padding-top:28px}.pi .py-3{padding-bottom:3px;padding-top:3px}.pi .py-32{padding-bottom:32px;padding-top:32px}.pi .py-4{padding-bottom:4px;padding-top:4px}.pi .py-40{padding-bottom:40px;padding-top:40px}.pi .py-5{padding-bottom:5px;padding-top:5px}.pi .py-56{padding-bottom:56px;padding-top:56px}.pi .py-6{padding-bottom:6px;padding-top:6px}.pi .py-8{padding-bottom:8px;padding-top:8px}.pi .py-90{padding-bottom:5.625rem;padding-top:5.625rem}.pi .py-96{padding-bottom:96px;padding-top:96px}.pi .py-\\[9px\\]{padding-bottom:9px;padding-top:9px}.pi .pb-10{padding-bottom:10px}.pi .pb-12{padding-bottom:12px}.pi .pb-14{padding-bottom:14px}.pi .pb-16{padding-bottom:16px}.pi .pb-18{padding-bottom:18px}.pi .pb-20{padding-bottom:20px}.pi .pb-24{padding-bottom:24px}.pi .pb-28{padding-bottom:28px}.pi .pb-30{padding-bottom:30px}.pi .pb-32{padding-bottom:32px}.pi .pb-4{padding-bottom:4px}.pi .pb-48{padding-bottom:48px}.pi .pb-6{padding-bottom:6px}.pi .pb-8{padding-bottom:8px}.pi .pb-safe-area{padding-bottom:env(safe-area-inset-bottom)}.pi .pl-10{padding-left:10px}.pi .pl-12{padding-left:12px}.pi .pl-14{padding-left:14px}.pi .pl-16{padding-left:16px}.pi .pl-18{padding-left:18px}.pi .pl-20{padding-left:20px}.pi .pl-28{padding-left:28px}.pi .pl-4{padding-left:4px}.pi .pl-46{padding-left:2.875rem}.pi .pl-54{padding-left:3.375rem}.pi .pl-8{padding-left:8px}.pi .pr-0{padding-right:0}.pi .pr-10{padding-right:10px}.pi .pr-12{padding-right:12px}.pi .pr-18{padding-right:18px}.pi .pr-28{padding-right:28px}.pi .pr-46{padding-right:2.875rem}.pi .pr-54{padding-right:3.375rem}.pi .pr-6{padding-right:6px}.pi .pr-8{padding-right:8px}.pi .pt-10{padding-top:10px}.pi .pt-12{padding-top:12px}.pi .pt-14{padding-top:14px}.pi .pt-16{padding-top:16px}.pi .pt-20{padding-top:20px}.pi .pt-24{padding-top:24px}.pi .pt-26{padding-top:26px}.pi .pt-30{padding-top:30px}.pi .pt-36{padding-top:36px}.pi .pt-40{padding-top:40px}.pi .pt-42{padding-top:42px}.pi .pt-50{padding-top:50px}.pi .pt-54{padding-top:3.375rem}.pi .pt-6{padding-top:6px}.pi .pt-70{padding-top:70px}.pi .text-left{text-align:left}.pi .text-center{text-align:center}.pi .text-right{text-align:right}.pi .text-start{text-align:start}.pi .text-end{text-align:end}.pi .align-top{vertical-align:top}.pi .align-middle{vertical-align:middle}.pi .font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.pi .text-2xl{font-size:24px;line-height:32px}.pi .text-3xl{font-size:30px;line-height:36px}.pi .text-4xl{font-size:36px;line-height:40px}.pi .text-5xl{font-size:48px;line-height:1}.pi .text-6xl{font-size:60px;line-height:1}.pi .text-base{font-size:16px;line-height:24px}.pi .text-lg{font-size:18px;line-height:28px}.pi .text-sm{font-size:14px;line-height:20px}.pi .text-xl{font-size:20px;line-height:28px}.pi .text-xs{font-size:12px;line-height:16px}.pi .font-bold{font-weight:700}.pi .font-light{font-weight:300}.pi .font-medium{font-weight:500}.pi .font-normal{font-weight:400}.pi .font-semibold{font-weight:600}.pi .uppercase{text-transform:uppercase}.pi .capitalize{text-transform:capitalize}.pi .italic{font-style:italic}.pi .tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.pi .leading-3{line-height:.75rem}.pi .leading-5{line-height:1.25rem}.pi .leading-none{line-height:1}.pi .tracking-wide{letter-spacing:.025em}.pi .\\!text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))!important}.pi .text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.pi .text-black\\/30{color:#0000004d}.pi .text-danger{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.pi .text-danger-darker{--tw-text-opacity:1;color:rgb(153 27 27/var(--tw-text-opacity))}.pi .text-disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .text-facebook{--tw-text-opacity:1;color:rgb(59 89 152/var(--tw-text-opacity))}.pi .text-main{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-muted{color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .text-on-primary{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .text-positive{--tw-text-opacity:1;color:rgb(34 197 94/var(--tw-text-opacity))}.pi .text-positive-darker{--tw-text-opacity:1;color:rgb(22 101 52/var(--tw-text-opacity))}.pi .text-primary{--tw-text-opacity:1;color:rgb(var(--be-primary)/var(--tw-text-opacity))}.pi .text-primary-light{--tw-text-opacity:1;color:rgb(var(--be-primary-light)/var(--tw-text-opacity))}.pi .text-primary\\/40{color:rgb(var(--be-primary)/.4)}.pi .text-twitter{--tw-text-opacity:1;color:rgb(29 161 242/var(--tw-text-opacity))}.pi .text-warning{--tw-text-opacity:1;color:rgb(243 164 50/var(--tw-text-opacity))}.pi .text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.pi .text-white\\/87{color:#ffffffde}.pi .underline{text-decoration-line:underline}.pi .no-underline{text-decoration-line:none}.pi .caret-transparent{caret-color:transparent}.pi .opacity-0{opacity:0}.pi .opacity-100{opacity:1}.pi .opacity-70{opacity:.7}.pi .opacity-80{opacity:.8}.pi .opacity-90{opacity:.9}.pi .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .shadow,.pi .shadow-2xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\]{--tw-shadow:15px 0 30px 0 rgba(0,0,0,.18);--tw-shadow-colored:15px 0 30px 0 var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\],.pi .shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.pi .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .shadow-md,.pi .shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.pi .shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.pi .shadow-sm,.pi .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.pi .outline-none{outline:2px solid transparent;outline-offset:2px}.pi .outline{outline-color:rgb(var(--be-primary-lighter)/1);outline-style:solid;outline-width:2px}.pi .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring,.pi .ring-2{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring-inset{--tw-ring-inset:inset}.pi .ring-primary{--tw-ring-opacity:1;--tw-ring-color:rgb(var(--be-primary)/var(--tw-ring-opacity))}.pi .ring-offset-2{--tw-ring-offset-width:2px}.pi .ring-offset-4{--tw-ring-offset-width:4px}.pi .blur{--tw-blur:blur(8px)}.pi .blur,.pi .grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .grayscale{--tw-grayscale:grayscale(100%)}.pi .invert{--tw-invert:invert(100%)}.pi .invert,.pi .sepia{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .sepia{--tw-sepia:sepia(100%)}.pi .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-bg-color{transition-duration:.15s;transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-button{transition-duration:.15s;transition-property:background-color,box-shadow,border-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-shadow{transition-duration:.15s;transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-width{transition-duration:.15s;transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .duration-100{transition-duration:.1s}.pi .duration-200{transition-duration:.2s}.pi .duration-300{transition-duration:.3s}.pi .will-change-\\[width\\]{will-change:width}.pi .will-change-transform{will-change:transform}.pi .icon-2xs{font-size:.75rem}.pi .icon-xs{font-size:1rem}.pi .icon-sm{font-size:1.25rem}.pi .icon-md{font-size:1.5rem}.pi .icon-lg{font-size:2.1875rem}.pi .icon-xl{font-size:2.6875rem}.pi .no-tap-highlight{-webkit-tap-highlight-color:transparent}@media only screen and (min-device-width:768px){.pi .tiny-scrollbar{scrollbar-color:rgba(0,0,0,.2) transparent;scrollbar-width:thin}.pi .tiny-scrollbar::-webkit-scrollbar{background-color:transparent;height:6px;width:6px}.pi .tiny-scrollbar::-webkit-scrollbar-thumb{background-color:rgb(var(--be-foreground-base)/.2);border-radius:10px}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:start{background:transparent}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:end{background:transparent}}.pi .hide-scrollbar{scrollbar-width:none}.pi .hide-scrollbar::-webkit-scrollbar{background:transparent;height:0;width:0}.pi .svg-icon{fill:currentColor;display:inline-block;flex-shrink:0;transition-duration:.15s;transition-property:transform,fill;transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .cropzone:not(.moving) .cropzone-transition{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .first-letter\\:capitalize:first-letter{text-transform:capitalize}.pi .file\\:mr-10::file-selector-button{margin-right:10px}.pi .file\\:h-24::file-selector-button{height:24px}.pi .file\\:rounded::file-selector-button{border-radius:4px}.pi .file\\:border-none::file-selector-button{border-style:none}.pi .file\\:bg-primary::file-selector-button{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .file\\:px-10::file-selector-button{padding-left:10px;padding-right:10px}.pi .file\\:text-sm::file-selector-button{font-size:14px;line-height:20px}.pi .file\\:font-semibold::file-selector-button{font-weight:600}.pi .file\\:text-on-primary::file-selector-button{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .before\\:absolute:before{content:var(--tw-content);position:absolute}.pi .before\\:left-0:before{content:var(--tw-content);left:0}.pi .before\\:top-1\\/2:before{content:var(--tw-content);top:50%}.pi .before\\:z-10:before{content:var(--tw-content);z-index:10}.pi .before\\:block:before{content:var(--tw-content);display:block}.pi .before\\:h-1:before{content:var(--tw-content);height:1px}.pi .before\\:h-12:before{content:var(--tw-content);height:12px}.pi .before\\:h-14:before{content:var(--tw-content);height:14px}.pi .before\\:h-18:before{content:var(--tw-content);height:18px}.pi .before\\:h-22:before{content:var(--tw-content);height:22px}.pi .before\\:h-28:before{content:var(--tw-content);height:28px}.pi .before\\:h-full:before{content:var(--tw-content);height:100%}.pi .before\\:w-12:before{content:var(--tw-content);width:12px}.pi .before\\:w-14:before{content:var(--tw-content);width:14px}.pi .before\\:w-18:before{content:var(--tw-content);width:18px}.pi .before\\:w-22:before{content:var(--tw-content);width:22px}.pi .before\\:w-28:before{content:var(--tw-content);width:28px}.pi .before\\:w-full:before{content:var(--tw-content);width:100%}.pi .before\\:-translate-y-1\\/2:before{--tw-translate-y:-50%}.pi .before\\:-translate-y-1\\/2:before,.pi .before\\:translate-x-2:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:translate-x-2:before{--tw-translate-x:2px}.pi .before\\:scale-10:before{--tw-scale-x:.1;--tw-scale-y:.1;content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:rounded-3xl:before{border-radius:24px;content:var(--tw-content)}.pi .before\\:rounded-full:before{border-radius:9999px;content:var(--tw-content)}.pi .before\\:border:before{border-width:1px;content:var(--tw-content)}.pi .before\\:bg-divider:before{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));content:var(--tw-content)}.pi .before\\:bg-primary:before{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity));content:var(--tw-content)}.pi .before\\:bg-white:before{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity));content:var(--tw-content)}.pi .before\\:opacity-0:before{content:var(--tw-content);opacity:0}.pi .before\\:transition:before{content:var(--tw-content);transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:transition-transform:before{content:var(--tw-content);transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:duration-200:before{content:var(--tw-content);transition-duration:.2s}.pi .before\\:content-\\[\\\\\\\\00a0\\]:before{--tw-content:\\\\00a0;content:var(--tw-content)}.pi .after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.pi .after\\:absolute:after{content:var(--tw-content);position:absolute}.pi .after\\:inset-0:after{content:var(--tw-content);inset:0}.pi .first\\:capitalize:first-child{text-transform:capitalize}.pi .checked\\:border-danger:checked{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .checked\\:border-primary:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .checked\\:bg-danger:checked{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .checked\\:bg-primary:checked{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .checked\\:before\\:translate-x-16:checked:before{--tw-translate-x:16px}.pi .checked\\:before\\:translate-x-16:checked:before,.pi .checked\\:before\\:translate-x-20:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-20:checked:before{--tw-translate-x:20px}.pi .checked\\:before\\:translate-x-24:checked:before{--tw-translate-x:24px}.pi .checked\\:before\\:translate-x-24:checked:before,.pi .checked\\:before\\:translate-x-30:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-30:checked:before{--tw-translate-x:30px}.pi .checked\\:before\\:translate-x-36:checked:before{--tw-translate-x:36px}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before,.pi .checked\\:before\\:translate-x-36:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before{--tw-scale-x:.65;--tw-scale-y:.65}.pi .checked\\:before\\:border-white:checked:before{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity));content:var(--tw-content)}.pi .checked\\:before\\:opacity-100:checked:before{content:var(--tw-content);opacity:1}.pi .focus-within\\:border-primary\\/60:focus-within{border-color:rgb(var(--be-primary)/.6)}.pi .focus-within\\:ring:focus-within{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-within\\:ring-primary\\/focus:focus-within{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05}.pi .hover\\:scale-105:hover,.pi .hover\\:scale-110:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.pi .hover\\:cursor-move:hover{cursor:move}.pi .hover\\:border-chip\\/90:hover{border-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:border-danger:hover{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .hover\\:border-danger\\/90:hover{border-color:#ef4444e6}.pi .hover\\:border-paper\\/90:hover{border-color:rgb(var(--be-paper)/.9)}.pi .hover\\:border-primary:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .hover\\:border-primary-dark:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .hover\\:bg-chip\\/90:hover{background-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:bg-danger\\/4:hover{background-color:#ef44440a}.pi .hover\\:bg-danger\\/90:hover{background-color:#ef4444e6}.pi .hover\\:bg-fg-base\\/15:hover{background-color:rgb(var(--be-foreground-base)/15%)}.pi .hover\\:bg-focus:hover{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .hover\\:bg-hover:hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .hover\\:bg-paper\\/90:hover{background-color:rgb(var(--be-paper)/.9)}.pi .hover\\:bg-primary-dark:hover{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:bg-primary\\/10:hover{background-color:rgb(var(--be-primary)/.1)}.pi .hover\\:bg-primary\\/4:hover{background-color:rgb(var(--be-primary)/4%)}.pi .hover\\:bg-primary\\/focus:hover{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:bg-primary\\/hover:hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .hover\\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .hover\\:bg-white\\/20:hover{background-color:#fff3}.pi .hover\\:bg-white\\/hover:hover{background-color:rgb(255 255 255/var(--be-hover-opacity))}.pi .hover\\:text:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-fg-base:hover{--tw-text-opacity:1;color:rgb(var(--be-foreground-base)/var(--tw-text-opacity))}.pi .hover\\:text-main:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-primary-dark:hover{--tw-text-opacity:1;color:rgb(var(--be-primary-dark)/var(--tw-text-opacity))}.pi .hover\\:underline:hover{text-decoration-line:underline}.pi .hover\\:opacity-100:hover{opacity:1}.pi .hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .before\\:hover\\:bg-primary-dark:hover:before{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity));content:var(--tw-content)}.pi .hover\\:after\\:bg-black\\/5:hover:after{background-color:#0000000d;content:var(--tw-content)}.pi .checked\\:hover\\:border-primary-dark:hover:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .focus\\:border-danger\\/60:focus{border-color:#ef444499}.pi .focus\\:border-primary\\/60:focus{border-color:rgb(var(--be-primary)/.6)}.pi .focus\\:bg-primary:focus{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .focus\\:text-on-primary:focus{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.pi .focus\\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus\\:ring-danger\\/focus:focus{--tw-ring-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .focus\\:ring-primary\\/focus:focus{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus\\:after\\:bg-black\\/10:focus:after{background-color:#0000001a;content:var(--tw-content)}.pi .focus-visible\\:bg-focus:focus-visible{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .focus-visible\\:bg-primary\\/focus:focus-visible{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus-visible\\:underline:focus-visible{text-decoration-line:underline}.pi .focus-visible\\:outline:focus-visible{outline-style:solid;outline-width:2px}.pi .focus-visible\\:outline-offset-2:focus-visible{outline-offset:2px}.pi .focus-visible\\:outline:focus-visible{outline-color:rgb(var(--be-primary-lighter)/1)}.pi .focus-visible\\:outline-primary-light:focus-visible{outline-color:rgb(var(--be-primary-light)/1)}.pi .focus-visible\\:ring:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.pi .disabled\\:pointer-events-none:disabled{pointer-events:none}.pi .disabled\\:cursor-default:disabled{cursor:default}.pi .disabled\\:border-disabled-bg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:border-disabled-fg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:border-transparent:disabled{border-color:transparent}.pi .disabled\\:border-r-transparent:disabled{border-right-color:transparent}.pi .disabled\\:bg-disabled:disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:bg-transparent:disabled{background-color:transparent}.pi .disabled\\:text-disabled:disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:text-white\\/70:disabled{color:#ffffffb3}.pi .disabled\\:shadow-none:disabled{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .disabled\\:before\\:bg-disabled-fg:disabled:before{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity));content:var(--tw-content)}.pi .group:hover .group-hover\\:visible{visibility:visible}.pi .group:hover .group-hover\\:bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-alt){--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-chip){--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-none){background-image:none}.pi :is(.dark .dark\\:text-white\\/50){color:#ffffff80}.pi :is(.dark .dark\\:opacity-5){opacity:.05}.pi :is(.dark .dark\\:opacity-80){opacity:.8}.pi :is(.dark .dark\\:checked\\:border-primary-dark:checked){--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi :is(.dark .dark\\:checked\\:bg-primary-dark:checked){--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}@media (min-width:640px){.pi .sm\\:justify-start{justify-content:flex-start}.pi .sm\\:text-sm{font-size:14px;line-height:20px}}@media (min-width:768px){.pi .md\\:invisible{visibility:hidden}.pi .md\\:mx-40{margin-left:40px;margin-right:40px}.pi .md\\:my-24{margin-bottom:24px;margin-top:24px}.pi .md\\:my-64{margin-bottom:64px;margin-top:64px}.pi .md\\:my-80{margin-bottom:80px;margin-top:80px}.pi .md\\:mb-0{margin-bottom:0}.pi .md\\:mb-24{margin-bottom:24px}.pi .md\\:mb-40{margin-bottom:40px}.pi .md\\:mb-70{margin-bottom:70px}.pi .md\\:mr-0{margin-right:0}.pi .md\\:mr-10{margin-right:10px}.pi .md\\:mr-24{margin-right:24px}.pi .md\\:mr-80{margin-right:80px}.pi .md\\:mt-0{margin-top:0}.pi .md\\:mt-60{margin-top:60px}.pi .md\\:block{display:block}.pi .md\\:flex{display:flex}.pi .md\\:h-0{height:0}.pi .md\\:w-1\\/3{width:33.333333%}.pi .md\\:w-320{width:320px}.pi .md\\:w-400{width:25rem}.pi .md\\:min-w-240{min-width:240px}.pi .md\\:min-w-86{min-width:86px}.pi .md\\:max-w-350{max-width:21.875rem}.pi .md\\:max-w-950{max-width:59.375rem}.pi .md\\:flex-row{flex-direction:row}.pi .md\\:items-start{align-items:flex-start}.pi .md\\:items-center{align-items:center}.pi .md\\:gap-112{gap:112px}.pi .md\\:gap-12{gap:12px}.pi .md\\:gap-24{gap:24px}.pi .md\\:gap-80{gap:80px}.pi .md\\:overflow-hidden{overflow:hidden}.pi .md\\:p-24{padding:24px}.pi .md\\:p-40{padding:40px}.pi .md\\:px-0{padding-left:0;padding-right:0}.pi .md\\:px-10vw{padding-left:10vw;padding-right:10vw}.pi .md\\:px-176{padding-left:176px;padding-right:176px}.pi .md\\:px-20{padding-left:20px;padding-right:20px}.pi .md\\:px-24{padding-left:24px;padding-right:24px}.pi .md\\:px-30{padding-left:30px;padding-right:30px}.pi .md\\:py-80{padding-bottom:80px;padding-top:80px}.pi .md\\:pb-0{padding-bottom:0}.pi .md\\:pb-54{padding-bottom:3.375rem}.pi .md\\:pl-20{padding-left:20px}.pi .md\\:pt-128{padding-top:128px}.pi .md\\:text-left{text-align:left}.pi .md\\:text-3xl{font-size:30px;line-height:36px}.pi .md\\:text-4xl{font-size:36px;line-height:40px}.pi .md\\:text-5xl{font-size:48px;line-height:1}.pi .md\\:text-base{font-size:16px;line-height:24px}.pi .md\\:text-lg{font-size:18px;line-height:28px}.pi .md\\:font-medium{font-weight:500}.pi .md\\:font-normal{font-weight:400}.pi .md\\:shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media (min-width:1024px){.pi .lg\\:block{display:block}.pi .lg\\:flex-row{flex-direction:row}.pi .lg\\:px-96{padding-left:96px;padding-right:96px}.pi .lg\\:py-96{padding-bottom:96px;padding-top:96px}.pi .lg\\:pb-0{padding-bottom:0}}@media (min-width:1280px){.pi .xl\\:w-1\\/2{width:50%}.pi .xl\\:pt-96{padding-top:96px}}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-2:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-inset:focus-visible>.tree-label{--tw-ring-inset:inset}
`;
let ud = (t = 21) => crypto.getRandomValues(new Uint8Array(t)).reduce((e, i) => (i &= 63, i < 36 ? e += i.toString(36) : i < 62 ? e += (i - 26).toString(36).toUpperCase() : i > 62 ? e += "-" : e += "_", e), "");
class tw {
  constructor(e, i) {
    Se(this, "timerId");
    Se(this, "createdAt", 0);
    this.callback = e, this.remaining = i, this.resume();
  }
  pause() {
    clearTimeout(this.timerId), this.remaining -= Date.now() - this.createdAt;
  }
  resume() {
    this.createdAt = Date.now(), this.timerId && clearTimeout(this.timerId), this.timerId = setTimeout(this.callback, this.remaining);
  }
  clear() {
    clearTimeout(this.timerId);
  }
}
const iw = 1;
function rw(t) {
  switch (t) {
    case "danger":
      return 8e3;
    case "loading":
      return 0;
    default:
      return 3e3;
  }
}
const hd = Xf()(
  td((t, e) => ({
    toasts: [],
    add: (i, r) => {
      var h;
      const s = e().toasts.length + 1 - iw;
      s > 0 && t((o) => {
        o.toasts.splice(0, s);
      });
      const f = (r == null ? void 0 : r.id) || ud(6), g = (r == null ? void 0 : r.type) || "positive", l = (h = r == null ? void 0 : r.duration) != null ? h : rw(g), n = {
        timer: l > 0 ? new tw(() => e().remove(f), l) : null,
        message: i,
        ...r,
        id: f,
        type: g,
        position: (r == null ? void 0 : r.position) || "bottom-center",
        duration: l,
        disableExitAnimation: r == null ? void 0 : r.disableExitAnimation,
        disableEnterAnimation: r == null ? void 0 : r.disableEnterAnimation
      }, a = e().toasts.findIndex((o) => o.id === n.id);
      a > -1 ? t((o) => {
        o.toasts[a] = n;
      }) : t((o) => {
        o.toasts.push(n);
      });
    },
    remove: (i) => {
      const r = e().toasts.filter((s) => {
        var f;
        return i === s.id ? ((f = s.timer) == null || f.clear(), !1) : !0;
      });
      t((s) => {
        s.toasts = r;
      });
    }
  }))
);
function vr() {
  return hd.getState();
}
function Cr(t, e) {
  vr().add(t, e);
}
Cr.danger = (t, e) => {
  vr().add(t, { ...e, type: "danger" });
};
Cr.positive = (t, e) => {
  vr().add(t, { ...e, type: "positive" });
};
Cr.loading = (t, e) => {
  vr().add(t, { ...e, type: "loading" });
};
var fd, iu = Am;
fd = iu.createRoot, iu.hydrateRoot;
const dd = fi({
  transformPagePoint: (t) => t,
  isStatic: !1,
  reducedMotion: "never"
}), Bs = fi({}), yc = fi(null), js = typeof document < "u", hs = js ? pn : Te, wc = fi({ strict: !1 });
function nw(t, e, i, r) {
  const { visualElement: s } = Fe(Bs), f = Fe(wc), g = Fe(yc), l = Fe(dd).reducedMotion, n = ge();
  r = r || f.renderer, !n.current && r && (n.current = r(t, {
    visualState: e,
    parent: s,
    props: i,
    presenceContext: g,
    blockInitialAnimation: g ? g.initial === !1 : !1,
    reducedMotionConfig: l
  }));
  const a = n.current;
  return qh(() => {
    a && a.update(i, g);
  }), hs(() => {
    a && a.render();
  }), Te(() => {
    a && a.updateFeatures();
  }), (window.HandoffAppearAnimations ? hs : Te)(() => {
    a && a.animationState && a.animationState.animateChanges();
  }), a;
}
function pd(t) {
  return typeof t == "object" && Object.prototype.hasOwnProperty.call(t, "current");
}
function sw(t, e, i) {
  return Oe(
    (r) => {
      r && t.mount && t.mount(r), e && (r ? e.mount(r) : e.unmount()), i && (typeof i == "function" ? i(r) : pd(i) && (i.current = r));
    },
    [e]
  );
}
function sn(t) {
  return typeof t == "string" || Array.isArray(t);
}
function Ns(t) {
  return typeof t == "object" && typeof t.start == "function";
}
const xc = [
  "animate",
  "whileInView",
  "whileFocus",
  "whileHover",
  "whileTap",
  "whileDrag",
  "exit"
], _c = ["initial", ...xc];
function Vs(t) {
  return Ns(t.animate) || _c.some((e) => sn(t[e]));
}
function gd(t) {
  return Boolean(Vs(t) || t.variants);
}
function ow(t, e) {
  if (Vs(t)) {
    const { initial: i, animate: r } = t;
    return {
      initial: i === !1 || sn(i) ? i : void 0,
      animate: sn(r) ? r : void 0
    };
  }
  return t.inherit !== !1 ? e : {};
}
function aw(t) {
  const { initial: e, animate: i } = ow(t, Fe(Bs));
  return Ke(() => ({ initial: e, animate: i }), [ru(e), ru(i)]);
}
function ru(t) {
  return Array.isArray(t) ? t.join(" ") : t;
}
const nu = {
  animation: [
    "animate",
    "variants",
    "whileHover",
    "whileTap",
    "exit",
    "whileInView",
    "whileFocus",
    "whileDrag"
  ],
  exit: ["exit"],
  drag: ["drag", "dragControls"],
  focus: ["whileFocus"],
  hover: ["whileHover", "onHoverStart", "onHoverEnd"],
  tap: ["whileTap", "onTap", "onTapStart", "onTapCancel"],
  pan: ["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"],
  inView: ["whileInView", "onViewportEnter", "onViewportLeave"],
  layout: ["layout", "layoutId"]
}, on = {};
for (const t in nu)
  on[t] = {
    isEnabled: (e) => nu[t].some((i) => !!e[i])
  };
function ga(t) {
  for (const e in t)
    on[e] = {
      ...on[e],
      ...t[e]
    };
}
const md = fi({}), cw = fi({}), lw = Symbol.for("motionComponentSymbol");
function uw({
  preloadedFeatures: t,
  createVisualElement: e,
  useRender: i,
  useVisualState: r,
  Component: s
}) {
  t && ga(t);
  function f(l, n) {
    let a;
    const h = {
      ...Fe(dd),
      ...l,
      layoutId: hw(l)
    }, {
      isStatic: o
    } = h, u = aw(l), c = r(l, o);
    if (!o && js) {
      u.visualElement = nw(s, c, h, e);
      const d = Fe(cw), m = Fe(wc).strict;
      u.visualElement && (a = u.visualElement.loadFeatures(
        h,
        m,
        t,
        d
      ));
    }
    return /* @__PURE__ */ ie(Bs.Provider, {
      value: u,
      children: [a && u.visualElement ? /* @__PURE__ */ x(a, {
        visualElement: u.visualElement,
        ...h
      }) : null, i(s, l, sw(c, u.visualElement, n), c, o, u.visualElement)]
    });
  }
  const g = qe(f);
  return g[lw] = s, g;
}
function hw({
  layoutId: t
}) {
  const e = Fe(md).id;
  return e && t !== void 0 ? e + "-" + t : t;
}
function fw(t) {
  function e(r, s = {}) {
    return uw(t(r, s));
  }
  if (typeof Proxy > "u")
    return e;
  const i = /* @__PURE__ */ new Map();
  return new Proxy(e, {
    get: (r, s) => (i.has(s) || i.set(s, e(s)), i.get(s))
  });
}
const dw = [
  "animate",
  "circle",
  "defs",
  "desc",
  "ellipse",
  "g",
  "image",
  "line",
  "filter",
  "marker",
  "mask",
  "metadata",
  "path",
  "pattern",
  "polygon",
  "polyline",
  "rect",
  "stop",
  "switch",
  "symbol",
  "svg",
  "text",
  "tspan",
  "use",
  "view"
];
function Sc(t) {
  return typeof t != "string" || t.includes("-") ? !1 : !!(dw.indexOf(t) > -1 || /[A-Z]/.test(t));
}
const pw = {}, bn = [
  "transformPerspective",
  "x",
  "y",
  "z",
  "translateX",
  "translateY",
  "translateZ",
  "scale",
  "scaleX",
  "scaleY",
  "rotate",
  "rotateX",
  "rotateY",
  "rotateZ",
  "skew",
  "skewX",
  "skewY"
], Bi = new Set(bn);
function vd(t, { layout: e, layoutId: i }) {
  return Bi.has(t) || t.startsWith("origin") || (e || i !== void 0) && (!!pw[t] || t === "opacity");
}
const bt = (t) => Boolean(t && t.getVelocity), gw = {
  x: "translateX",
  y: "translateY",
  z: "translateZ",
  transformPerspective: "perspective"
}, mw = bn.length;
function vw(t, { enableHardwareAcceleration: e = !0, allowTransformNone: i = !0 }, r, s) {
  let f = "";
  for (let g = 0; g < mw; g++) {
    const l = bn[g];
    if (t[l] !== void 0) {
      const n = gw[l] || l;
      f += `${n}(${t[l]}) `;
    }
  }
  return e && !t.z && (f += "translateZ(0)"), f = f.trim(), s ? f = s(t, r ? "" : f) : i && r && (f = "none"), f;
}
const bd = (t) => (e) => typeof e == "string" && e.startsWith(t), yd = bd("--"), ma = bd("var(--"), bw = /var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g, yw = (t, e) => e && typeof t == "number" ? e.transform(t) : t, br = (t, e, i) => Math.min(Math.max(i, t), e), ji = {
  test: (t) => typeof t == "number",
  parse: parseFloat,
  transform: (t) => t
}, Ur = {
  ...ji,
  transform: (t) => br(0, 1, t)
}, jn = {
  ...ji,
  default: 1
}, Wr = (t) => Math.round(t * 1e5) / 1e5, $s = /(-)?([\d]*\.?[\d])+/g, wd = /(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi, ww = /^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;
function yn(t) {
  return typeof t == "string";
}
const wn = (t) => ({
  test: (e) => yn(e) && e.endsWith(t) && e.split(" ").length === 1,
  parse: parseFloat,
  transform: (e) => `${e}${t}`
}), Gt = wn("deg"), cr = wn("%"), xe = wn("px"), xw = wn("vh"), _w = wn("vw"), su = {
  ...cr,
  parse: (t) => cr.parse(t) / 100,
  transform: (t) => cr.transform(t * 100)
}, ou = {
  ...ji,
  transform: Math.round
}, xd = {
  borderWidth: xe,
  borderTopWidth: xe,
  borderRightWidth: xe,
  borderBottomWidth: xe,
  borderLeftWidth: xe,
  borderRadius: xe,
  radius: xe,
  borderTopLeftRadius: xe,
  borderTopRightRadius: xe,
  borderBottomRightRadius: xe,
  borderBottomLeftRadius: xe,
  width: xe,
  maxWidth: xe,
  height: xe,
  maxHeight: xe,
  size: xe,
  top: xe,
  right: xe,
  bottom: xe,
  left: xe,
  padding: xe,
  paddingTop: xe,
  paddingRight: xe,
  paddingBottom: xe,
  paddingLeft: xe,
  margin: xe,
  marginTop: xe,
  marginRight: xe,
  marginBottom: xe,
  marginLeft: xe,
  rotate: Gt,
  rotateX: Gt,
  rotateY: Gt,
  rotateZ: Gt,
  scale: jn,
  scaleX: jn,
  scaleY: jn,
  scaleZ: jn,
  skew: Gt,
  skewX: Gt,
  skewY: Gt,
  distance: xe,
  translateX: xe,
  translateY: xe,
  translateZ: xe,
  x: xe,
  y: xe,
  z: xe,
  perspective: xe,
  transformPerspective: xe,
  opacity: Ur,
  originX: su,
  originY: su,
  originZ: xe,
  zIndex: ou,
  fillOpacity: Ur,
  strokeOpacity: Ur,
  numOctaves: ou
};
function Cc(t, e, i, r) {
  const { style: s, vars: f, transform: g, transformOrigin: l } = t;
  let n = !1, a = !1, h = !0;
  for (const o in e) {
    const u = e[o];
    if (yd(o)) {
      f[o] = u;
      continue;
    }
    const c = xd[o], d = yw(u, c);
    if (Bi.has(o)) {
      if (n = !0, g[o] = d, !h)
        continue;
      u !== (c.default || 0) && (h = !1);
    } else
      o.startsWith("origin") ? (a = !0, l[o] = d) : s[o] = d;
  }
  if (e.transform || (n || r ? s.transform = vw(t.transform, i, h, r) : s.transform && (s.transform = "none")), a) {
    const { originX: o = "50%", originY: u = "50%", originZ: c = 0 } = l;
    s.transformOrigin = `${o} ${u} ${c}`;
  }
}
const Tc = () => ({
  style: {},
  transform: {},
  transformOrigin: {},
  vars: {}
});
function _d(t, e, i) {
  for (const r in e)
    !bt(e[r]) && !vd(r, i) && (t[r] = e[r]);
}
function Sw({ transformTemplate: t }, e, i) {
  return Ke(() => {
    const r = Tc();
    return Cc(r, e, { enableHardwareAcceleration: !i }, t), Object.assign({}, r.vars, r.style);
  }, [e]);
}
function Cw(t, e, i) {
  const r = t.style || {}, s = {};
  return _d(s, r, t), Object.assign(s, Sw(t, e, i)), t.transformValues ? t.transformValues(s) : s;
}
function Tw(t, e, i) {
  const r = {}, s = Cw(t, e, i);
  return t.drag && t.dragListener !== !1 && (r.draggable = !1, s.userSelect = s.WebkitUserSelect = s.WebkitTouchCallout = "none", s.touchAction = t.drag === !0 ? "none" : `pan-${t.drag === "x" ? "y" : "x"}`), t.tabIndex === void 0 && (t.onTap || t.onTapStart || t.whileTap) && (r.tabIndex = 0), r.style = s, r;
}
const Ew = /* @__PURE__ */ new Set([
  "animate",
  "exit",
  "variants",
  "initial",
  "style",
  "values",
  "variants",
  "transition",
  "transformTemplate",
  "transformValues",
  "custom",
  "inherit",
  "onLayoutAnimationStart",
  "onLayoutAnimationComplete",
  "onLayoutMeasure",
  "onBeforeLayoutMeasure",
  "onAnimationStart",
  "onAnimationComplete",
  "onUpdate",
  "onDragStart",
  "onDrag",
  "onDragEnd",
  "onMeasureDragConstraints",
  "onDirectionLock",
  "onDragTransitionEnd",
  "_dragX",
  "_dragY",
  "onHoverStart",
  "onHoverEnd",
  "onViewportEnter",
  "onViewportLeave",
  "ignoreStrict",
  "viewport"
]);
function fs(t) {
  return t.startsWith("while") || t.startsWith("drag") && t !== "draggable" || t.startsWith("layout") || t.startsWith("onTap") || t.startsWith("onPan") || Ew.has(t);
}
let Sd = (t) => !fs(t);
function kw(t) {
  !t || (Sd = (e) => e.startsWith("on") ? !fs(e) : t(e));
}
try {
  kw(require("@emotion/is-prop-valid").default);
} catch {
}
function Ow(t, e, i) {
  const r = {};
  for (const s in t)
    s === "values" && typeof t.values == "object" || (Sd(s) || i === !0 && fs(s) || !e && !fs(s) || t.draggable && s.startsWith("onDrag")) && (r[s] = t[s]);
  return r;
}
function au(t, e, i) {
  return typeof t == "string" ? t : xe.transform(e + i * t);
}
function Pw(t, e, i) {
  const r = au(e, t.x, t.width), s = au(i, t.y, t.height);
  return `${r} ${s}`;
}
const Aw = {
  offset: "stroke-dashoffset",
  array: "stroke-dasharray"
}, Mw = {
  offset: "strokeDashoffset",
  array: "strokeDasharray"
};
function Dw(t, e, i = 1, r = 0, s = !0) {
  t.pathLength = 1;
  const f = s ? Aw : Mw;
  t[f.offset] = xe.transform(-r);
  const g = xe.transform(e), l = xe.transform(i);
  t[f.array] = `${g} ${l}`;
}
function Ec(t, {
  attrX: e,
  attrY: i,
  attrScale: r,
  originX: s,
  originY: f,
  pathLength: g,
  pathSpacing: l = 1,
  pathOffset: n = 0,
  ...a
}, h, o, u) {
  if (Cc(t, a, h, u), o) {
    t.style.viewBox && (t.attrs.viewBox = t.style.viewBox);
    return;
  }
  t.attrs = t.style, t.style = {};
  const { attrs: c, style: d, dimensions: m } = t;
  c.transform && (m && (d.transform = c.transform), delete c.transform), m && (s !== void 0 || f !== void 0 || d.transform) && (d.transformOrigin = Pw(m, s !== void 0 ? s : 0.5, f !== void 0 ? f : 0.5)), e !== void 0 && (c.x = e), i !== void 0 && (c.y = i), r !== void 0 && (c.scale = r), g !== void 0 && Dw(c, g, l, n, !1);
}
const Cd = () => ({
  ...Tc(),
  attrs: {}
}), kc = (t) => typeof t == "string" && t.toLowerCase() === "svg";
function Iw(t, e, i, r) {
  const s = Ke(() => {
    const f = Cd();
    return Ec(f, e, { enableHardwareAcceleration: !1 }, kc(r), t.transformTemplate), {
      ...f.attrs,
      style: { ...f.style }
    };
  }, [e]);
  if (t.style) {
    const f = {};
    _d(f, t.style, t), s.style = { ...f, ...s.style };
  }
  return s;
}
function Rw(t = !1) {
  return (i, r, s, { latestValues: f }, g) => {
    const n = (Sc(i) ? Iw : Tw)(r, f, g, i), h = {
      ...Ow(r, typeof i == "string", t),
      ...n,
      ref: s
    }, { children: o } = r, u = Ke(() => bt(o) ? o.get() : o, [o]);
    return km(i, {
      ...h,
      children: u
    });
  };
}
const Oc = (t) => t.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
function Td(t, { style: e, vars: i }, r, s) {
  Object.assign(t.style, e, s && s.getProjectionStyles(r));
  for (const f in i)
    t.style.setProperty(f, i[f]);
}
const Ed = /* @__PURE__ */ new Set([
  "baseFrequency",
  "diffuseConstant",
  "kernelMatrix",
  "kernelUnitLength",
  "keySplines",
  "keyTimes",
  "limitingConeAngle",
  "markerHeight",
  "markerWidth",
  "numOctaves",
  "targetX",
  "targetY",
  "surfaceScale",
  "specularConstant",
  "specularExponent",
  "stdDeviation",
  "tableValues",
  "viewBox",
  "gradientTransform",
  "pathLength",
  "startOffset",
  "textLength",
  "lengthAdjust"
]);
function kd(t, e, i, r) {
  Td(t, e, void 0, r);
  for (const s in e.attrs)
    t.setAttribute(Ed.has(s) ? s : Oc(s), e.attrs[s]);
}
function Pc(t, e) {
  const { style: i } = t, r = {};
  for (const s in i)
    (bt(i[s]) || e.style && bt(e.style[s]) || vd(s, t)) && (r[s] = i[s]);
  return r;
}
function Od(t, e) {
  const i = Pc(t, e);
  for (const r in t)
    if (bt(t[r]) || bt(e[r])) {
      const s = bn.indexOf(r) !== -1 ? "attr" + r.charAt(0).toUpperCase() + r.substring(1) : r;
      i[s] = t[r];
    }
  return i;
}
function Ac(t, e, i, r = {}, s = {}) {
  return typeof e == "function" && (e = e(i !== void 0 ? i : t.custom, r, s)), typeof e == "string" && (e = t.variants && t.variants[e]), typeof e == "function" && (e = e(i !== void 0 ? i : t.custom, r, s)), e;
}
function Pd(t) {
  const e = ge(null);
  return e.current === null && (e.current = t()), e.current;
}
const ds = (t) => Array.isArray(t), Lw = (t) => Boolean(t && typeof t == "object" && t.mix && t.toValue), Fw = (t) => ds(t) ? t[t.length - 1] || 0 : t;
function zw(t) {
  const e = bt(t) ? t.get() : t;
  return Lw(e) ? e.toValue() : e;
}
function Bw({ scrapeMotionValuesFromProps: t, createRenderState: e, onMount: i }, r, s, f) {
  const g = {
    latestValues: jw(r, s, f, t),
    renderState: e()
  };
  return i && (g.mount = (l) => i(r, l, g)), g;
}
const Ad = (t) => (e, i) => {
  const r = Fe(Bs), s = Fe(yc), f = () => Bw(t, e, r, s);
  return i ? f() : Pd(f);
};
function jw(t, e, i, r) {
  const s = {}, f = r(t, {});
  for (const u in f)
    s[u] = zw(f[u]);
  let { initial: g, animate: l } = t;
  const n = Vs(t), a = gd(t);
  e && a && !n && t.inherit !== !1 && (g === void 0 && (g = e.initial), l === void 0 && (l = e.animate));
  let h = i ? i.initial === !1 : !1;
  h = h || g === !1;
  const o = h ? l : g;
  return o && typeof o != "boolean" && !Ns(o) && (Array.isArray(o) ? o : [o]).forEach((c) => {
    const d = Ac(t, c);
    if (!d)
      return;
    const { transitionEnd: m, transition: p, ...v } = d;
    for (const b in v) {
      let y = v[b];
      if (Array.isArray(y)) {
        const w = h ? y.length - 1 : 0;
        y = y[w];
      }
      y !== null && (s[b] = y);
    }
    for (const b in m)
      s[b] = m[b];
  }), s;
}
const Nw = {
  useVisualState: Ad({
    scrapeMotionValuesFromProps: Od,
    createRenderState: Cd,
    onMount: (t, e, { renderState: i, latestValues: r }) => {
      try {
        i.dimensions = typeof e.getBBox == "function" ? e.getBBox() : e.getBoundingClientRect();
      } catch {
        i.dimensions = {
          x: 0,
          y: 0,
          width: 0,
          height: 0
        };
      }
      Ec(i, r, { enableHardwareAcceleration: !1 }, kc(e.tagName), t.transformTemplate), kd(e, i);
    }
  })
}, Vw = {
  useVisualState: Ad({
    scrapeMotionValuesFromProps: Pc,
    createRenderState: Tc
  })
};
function $w(t, { forwardMotionProps: e = !1 }, i, r) {
  return {
    ...Sc(t) ? Nw : Vw,
    preloadedFeatures: i,
    useRender: Rw(e),
    createVisualElement: r,
    Component: t
  };
}
function Si(t, e, i, r = { passive: !0 }) {
  return t.addEventListener(e, i, r), () => t.removeEventListener(e, i);
}
const Hw = (t) => t.pointerType === "mouse" ? typeof t.button != "number" || t.button <= 0 : t.isPrimary !== !1;
function Md(t, e = "page") {
  return {
    point: {
      x: t[e + "X"],
      y: t[e + "Y"]
    }
  };
}
const Uw = (t) => (e) => Hw(e) && t(e, Md(e));
function Kn(t, e, i, r) {
  return Si(t, e, Uw(i), r);
}
const Ww = (t, e) => (i) => e(t(i)), Ei = (...t) => t.reduce(Ww);
function Dd(t) {
  let e = null;
  return () => {
    const i = () => {
      e = null;
    };
    return e === null ? (e = t, i) : !1;
  };
}
const cu = Dd("dragHorizontal"), lu = Dd("dragVertical");
function Yw(t) {
  let e = !1;
  if (t === "y")
    e = lu();
  else if (t === "x")
    e = cu();
  else {
    const i = cu(), r = lu();
    i && r ? e = () => {
      i(), r();
    } : (i && i(), r && r());
  }
  return e;
}
function Id() {
  const t = Yw(!0);
  return t ? (t(), !1) : !0;
}
class Tr {
  constructor(e) {
    this.isMounted = !1, this.node = e;
  }
  update() {
  }
}
function Gw(t) {
  let e = [], i = [], r = 0, s = !1, f = !1;
  const g = /* @__PURE__ */ new WeakSet(), l = {
    schedule: (n, a = !1, h = !1) => {
      const o = h && s, u = o ? e : i;
      return a && g.add(n), u.indexOf(n) === -1 && (u.push(n), o && s && (r = e.length)), n;
    },
    cancel: (n) => {
      const a = i.indexOf(n);
      a !== -1 && i.splice(a, 1), g.delete(n);
    },
    process: (n) => {
      if (s) {
        f = !0;
        return;
      }
      if (s = !0, [e, i] = [i, e], i.length = 0, r = e.length, r)
        for (let a = 0; a < r; a++) {
          const h = e[a];
          h(n), g.has(h) && (l.schedule(h), t());
        }
      s = !1, f && (f = !1, l.process(n));
    }
  };
  return l;
}
const Dt = {
  delta: 0,
  timestamp: 0,
  isProcessing: !1
}, Xw = 40;
let va = !0, an = !1;
const Hs = [
  "read",
  "update",
  "preRender",
  "render",
  "postRender"
], Mc = Hs.reduce((t, e) => (t[e] = Gw(() => an = !0), t), {}), Kw = (t) => Mc[t].process(Dt), Rd = (t) => {
  an = !1, Dt.delta = va ? 1e3 / 60 : Math.max(Math.min(t - Dt.timestamp, Xw), 1), Dt.timestamp = t, Dt.isProcessing = !0, Hs.forEach(Kw), Dt.isProcessing = !1, an && (va = !1, requestAnimationFrame(Rd));
}, qw = () => {
  an = !0, va = !0, Dt.isProcessing || requestAnimationFrame(Rd);
}, at = Hs.reduce((t, e) => {
  const i = Mc[e];
  return t[e] = (r, s = !1, f = !1) => (an || qw(), i.schedule(r, s, f)), t;
}, {});
function ps(t) {
  Hs.forEach((e) => Mc[e].cancel(t));
}
function uu(t, e) {
  const i = "pointer" + (e ? "enter" : "leave"), r = "onHover" + (e ? "Start" : "End"), s = (f, g) => {
    if (f.type === "touch" || Id())
      return;
    const l = t.getProps();
    t.animationState && l.whileHover && t.animationState.setActive("whileHover", e), l[r] && at.update(() => l[r](f, g));
  };
  return Kn(t.current, i, s, {
    passive: !t.getProps()[r]
  });
}
class Zw extends Tr {
  mount() {
    this.unmount = Ei(uu(this.node, !0), uu(this.node, !1));
  }
  unmount() {
  }
}
class Jw extends Tr {
  constructor() {
    super(...arguments), this.isActive = !1;
  }
  onFocus() {
    let e = !1;
    try {
      e = this.node.current.matches(":focus-visible");
    } catch {
      e = !0;
    }
    !e || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !0), this.isActive = !0);
  }
  onBlur() {
    !this.isActive || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !1), this.isActive = !1);
  }
  mount() {
    this.unmount = Ei(Si(this.node.current, "focus", () => this.onFocus()), Si(this.node.current, "blur", () => this.onBlur()));
  }
  unmount() {
  }
}
const Ld = (t, e) => e ? t === e ? !0 : Ld(t, e.parentElement) : !1, ot = (t) => t;
function So(t, e) {
  if (!e)
    return;
  const i = new PointerEvent("pointer" + t);
  e(i, Md(i));
}
class Qw extends Tr {
  constructor() {
    super(...arguments), this.removeStartListeners = ot, this.removeEndListeners = ot, this.removeAccessibleListeners = ot, this.startPointerPress = (e, i) => {
      if (this.removeEndListeners(), this.isPressing)
        return;
      const r = this.node.getProps(), f = Kn(window, "pointerup", (l, n) => {
        if (!this.checkPressEnd())
          return;
        const { onTap: a, onTapCancel: h } = this.node.getProps();
        at.update(() => {
          Ld(this.node.current, l.target) ? a && a(l, n) : h && h(l, n);
        });
      }, { passive: !(r.onTap || r.onPointerUp) }), g = Kn(window, "pointercancel", (l, n) => this.cancelPress(l, n), { passive: !(r.onTapCancel || r.onPointerCancel) });
      this.removeEndListeners = Ei(f, g), this.startPress(e, i);
    }, this.startAccessiblePress = () => {
      const e = (f) => {
        if (f.key !== "Enter" || this.isPressing)
          return;
        const g = (l) => {
          l.key !== "Enter" || !this.checkPressEnd() || So("up", (n, a) => {
            const { onTap: h } = this.node.getProps();
            h && at.update(() => h(n, a));
          });
        };
        this.removeEndListeners(), this.removeEndListeners = Si(this.node.current, "keyup", g), So("down", (l, n) => {
          this.startPress(l, n);
        });
      }, i = Si(this.node.current, "keydown", e), r = () => {
        !this.isPressing || So("cancel", (f, g) => this.cancelPress(f, g));
      }, s = Si(this.node.current, "blur", r);
      this.removeAccessibleListeners = Ei(i, s);
    };
  }
  startPress(e, i) {
    this.isPressing = !0;
    const { onTapStart: r, whileTap: s } = this.node.getProps();
    s && this.node.animationState && this.node.animationState.setActive("whileTap", !0), r && at.update(() => r(e, i));
  }
  checkPressEnd() {
    return this.removeEndListeners(), this.isPressing = !1, this.node.getProps().whileTap && this.node.animationState && this.node.animationState.setActive("whileTap", !1), !Id();
  }
  cancelPress(e, i) {
    if (!this.checkPressEnd())
      return;
    const { onTapCancel: r } = this.node.getProps();
    r && at.update(() => r(e, i));
  }
  mount() {
    const e = this.node.getProps(), i = Kn(this.node.current, "pointerdown", this.startPointerPress, { passive: !(e.onTapStart || e.onPointerStart) }), r = Si(this.node.current, "focus", this.startAccessiblePress);
    this.removeStartListeners = Ei(i, r);
  }
  unmount() {
    this.removeStartListeners(), this.removeEndListeners(), this.removeAccessibleListeners();
  }
}
const ba = /* @__PURE__ */ new WeakMap(), Co = /* @__PURE__ */ new WeakMap(), ex = (t) => {
  const e = ba.get(t.target);
  e && e(t);
}, tx = (t) => {
  t.forEach(ex);
};
function ix({ root: t, ...e }) {
  const i = t || document;
  Co.has(i) || Co.set(i, {});
  const r = Co.get(i), s = JSON.stringify(e);
  return r[s] || (r[s] = new IntersectionObserver(tx, { root: t, ...e })), r[s];
}
function rx(t, e, i) {
  const r = ix(e);
  return ba.set(t, i), r.observe(t), () => {
    ba.delete(t), r.unobserve(t);
  };
}
const nx = {
  some: 0,
  all: 1
};
class sx extends Tr {
  constructor() {
    super(...arguments), this.hasEnteredView = !1, this.isInView = !1;
  }
  startObserver() {
    this.unmount();
    const { viewport: e = {} } = this.node.getProps(), { root: i, margin: r, amount: s = "some", once: f } = e, g = {
      root: i ? i.current : void 0,
      rootMargin: r,
      threshold: typeof s == "number" ? s : nx[s]
    }, l = (n) => {
      const { isIntersecting: a } = n;
      if (this.isInView === a || (this.isInView = a, f && !a && this.hasEnteredView))
        return;
      a && (this.hasEnteredView = !0), this.node.animationState && this.node.animationState.setActive("whileInView", a);
      const { onViewportEnter: h, onViewportLeave: o } = this.node.getProps(), u = a ? h : o;
      u && u(n);
    };
    return rx(this.node.current, g, l);
  }
  mount() {
    this.startObserver();
  }
  update() {
    if (typeof IntersectionObserver > "u")
      return;
    const { props: e, prevProps: i } = this.node;
    ["amount", "margin", "root"].some(ox(e, i)) && this.startObserver();
  }
  unmount() {
  }
}
function ox({ viewport: t = {} }, { viewport: e = {} } = {}) {
  return (i) => t[i] !== e[i];
}
const ax = {
  inView: {
    Feature: sx
  },
  tap: {
    Feature: Qw
  },
  focus: {
    Feature: Jw
  },
  hover: {
    Feature: Zw
  }
};
function Fd(t, e) {
  if (!Array.isArray(e))
    return !1;
  const i = e.length;
  if (i !== t.length)
    return !1;
  for (let r = 0; r < i; r++)
    if (e[r] !== t[r])
      return !1;
  return !0;
}
function cx(t) {
  const e = {};
  return t.values.forEach((i, r) => e[r] = i.get()), e;
}
function lx(t) {
  const e = {};
  return t.values.forEach((i, r) => e[r] = i.getVelocity()), e;
}
function Us(t, e, i) {
  const r = t.getProps();
  return Ac(r, e, i !== void 0 ? i : r.custom, cx(t), lx(t));
}
const ux = "framerAppearId", hx = "data-" + Oc(ux);
let Dc = ot, Ws = ot;
const ki = (t) => t * 1e3, ii = (t) => t / 1e3, fx = {
  current: !1
}, zd = (t) => Array.isArray(t) && typeof t[0] == "number";
function Bd(t) {
  return Boolean(!t || typeof t == "string" && jd[t] || zd(t) || Array.isArray(t) && t.every(Bd));
}
const jr = ([t, e, i, r]) => `cubic-bezier(${t}, ${e}, ${i}, ${r})`, jd = {
  linear: "linear",
  ease: "ease",
  easeIn: "ease-in",
  easeOut: "ease-out",
  easeInOut: "ease-in-out",
  circIn: jr([0, 0.65, 0.55, 1]),
  circOut: jr([0.55, 0, 1, 0.45]),
  backIn: jr([0.31, 0.01, 0.66, -0.59]),
  backOut: jr([0.33, 1.53, 0.69, 0.99])
};
function Nd(t) {
  if (!!t)
    return zd(t) ? jr(t) : Array.isArray(t) ? t.map(Nd) : jd[t];
}
function dx(t, e, i, { delay: r = 0, duration: s, repeat: f = 0, repeatType: g = "loop", ease: l, times: n } = {}) {
  const a = { [e]: i };
  n && (a.offset = n);
  const h = Nd(l);
  return Array.isArray(h) && (a.easing = h), t.animate(a, {
    delay: r,
    duration: s,
    easing: Array.isArray(h) ? "linear" : h,
    fill: "both",
    iterations: f + 1,
    direction: g === "reverse" ? "alternate" : "normal"
  });
}
const hu = {
  waapi: () => Object.hasOwnProperty.call(Element.prototype, "animate")
}, To = {}, Vd = {};
for (const t in hu)
  Vd[t] = () => (To[t] === void 0 && (To[t] = hu[t]()), To[t]);
function px(t, { repeat: e, repeatType: i = "loop" }) {
  const r = e && i !== "loop" && e % 2 === 1 ? 0 : t.length - 1;
  return t[r];
}
const $d = (t, e, i) => (((1 - 3 * i + 3 * e) * t + (3 * i - 6 * e)) * t + 3 * e) * t, gx = 1e-7, mx = 12;
function vx(t, e, i, r, s) {
  let f, g, l = 0;
  do
    g = e + (i - e) / 2, f = $d(g, r, s) - t, f > 0 ? i = g : e = g;
  while (Math.abs(f) > gx && ++l < mx);
  return g;
}
function xn(t, e, i, r) {
  if (t === e && i === r)
    return ot;
  const s = (f) => vx(f, 0, 1, t, i);
  return (f) => f === 0 || f === 1 ? f : $d(s(f), e, r);
}
const bx = xn(0.42, 0, 1, 1), yx = xn(0, 0, 0.58, 1), Hd = xn(0.42, 0, 0.58, 1), wx = (t) => Array.isArray(t) && typeof t[0] != "number", Ud = (t) => (e) => e <= 0.5 ? t(2 * e) / 2 : (2 - t(2 * (1 - e))) / 2, Wd = (t) => (e) => 1 - t(1 - e), Yd = (t) => 1 - Math.sin(Math.acos(t)), Gd = Wd(Yd), xx = Ud(Gd), Xd = xn(0.33, 1.53, 0.69, 0.99), Ic = Wd(Xd), _x = Ud(Ic), Sx = (t) => (t *= 2) < 1 ? 0.5 * Ic(t) : 0.5 * (2 - Math.pow(2, -10 * (t - 1))), Cx = {
  linear: ot,
  easeIn: bx,
  easeInOut: Hd,
  easeOut: yx,
  circIn: Yd,
  circInOut: xx,
  circOut: Gd,
  backIn: Ic,
  backInOut: _x,
  backOut: Xd,
  anticipate: Sx
}, fu = (t) => {
  if (Array.isArray(t)) {
    Ws(t.length === 4);
    const [e, i, r, s] = t;
    return xn(e, i, r, s);
  } else if (typeof t == "string")
    return Cx[t];
  return t;
}, Rc = (t, e) => (i) => Boolean(yn(i) && ww.test(i) && i.startsWith(t) || e && Object.prototype.hasOwnProperty.call(i, e)), Kd = (t, e, i) => (r) => {
  if (!yn(r))
    return r;
  const [s, f, g, l] = r.match($s);
  return {
    [t]: parseFloat(s),
    [e]: parseFloat(f),
    [i]: parseFloat(g),
    alpha: l !== void 0 ? parseFloat(l) : 1
  };
}, Tx = (t) => br(0, 255, t), Eo = {
  ...ji,
  transform: (t) => Math.round(Tx(t))
}, Ci = {
  test: Rc("rgb", "red"),
  parse: Kd("red", "green", "blue"),
  transform: ({ red: t, green: e, blue: i, alpha: r = 1 }) => "rgba(" + Eo.transform(t) + ", " + Eo.transform(e) + ", " + Eo.transform(i) + ", " + Wr(Ur.transform(r)) + ")"
};
function Ex(t) {
  let e = "", i = "", r = "", s = "";
  return t.length > 5 ? (e = t.substring(1, 3), i = t.substring(3, 5), r = t.substring(5, 7), s = t.substring(7, 9)) : (e = t.substring(1, 2), i = t.substring(2, 3), r = t.substring(3, 4), s = t.substring(4, 5), e += e, i += i, r += r, s += s), {
    red: parseInt(e, 16),
    green: parseInt(i, 16),
    blue: parseInt(r, 16),
    alpha: s ? parseInt(s, 16) / 255 : 1
  };
}
const ya = {
  test: Rc("#"),
  parse: Ex,
  transform: Ci.transform
}, tr = {
  test: Rc("hsl", "hue"),
  parse: Kd("hue", "saturation", "lightness"),
  transform: ({ hue: t, saturation: e, lightness: i, alpha: r = 1 }) => "hsla(" + Math.round(t) + ", " + cr.transform(Wr(e)) + ", " + cr.transform(Wr(i)) + ", " + Wr(Ur.transform(r)) + ")"
}, it = {
  test: (t) => Ci.test(t) || ya.test(t) || tr.test(t),
  parse: (t) => Ci.test(t) ? Ci.parse(t) : tr.test(t) ? tr.parse(t) : ya.parse(t),
  transform: (t) => yn(t) ? t : t.hasOwnProperty("red") ? Ci.transform(t) : tr.transform(t)
}, Ys = (t, e, i) => -i * t + i * e + t;
function ko(t, e, i) {
  return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + (e - t) * 6 * i : i < 1 / 2 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t;
}
function kx({ hue: t, saturation: e, lightness: i, alpha: r }) {
  t /= 360, e /= 100, i /= 100;
  let s = 0, f = 0, g = 0;
  if (!e)
    s = f = g = i;
  else {
    const l = i < 0.5 ? i * (1 + e) : i + e - i * e, n = 2 * i - l;
    s = ko(n, l, t + 1 / 3), f = ko(n, l, t), g = ko(n, l, t - 1 / 3);
  }
  return {
    red: Math.round(s * 255),
    green: Math.round(f * 255),
    blue: Math.round(g * 255),
    alpha: r
  };
}
const Oo = (t, e, i) => {
  const r = t * t;
  return Math.sqrt(Math.max(0, i * (e * e - r) + r));
}, Ox = [ya, Ci, tr], Px = (t) => Ox.find((e) => e.test(t));
function du(t) {
  const e = Px(t);
  let i = e.parse(t);
  return e === tr && (i = kx(i)), i;
}
const qd = (t, e) => {
  const i = du(t), r = du(e), s = { ...i };
  return (f) => (s.red = Oo(i.red, r.red, f), s.green = Oo(i.green, r.green, f), s.blue = Oo(i.blue, r.blue, f), s.alpha = Ys(i.alpha, r.alpha, f), Ci.transform(s));
};
function Ax(t) {
  var e, i;
  return isNaN(t) && yn(t) && (((e = t.match($s)) === null || e === void 0 ? void 0 : e.length) || 0) + (((i = t.match(wd)) === null || i === void 0 ? void 0 : i.length) || 0) > 0;
}
const Zd = {
  regex: bw,
  countKey: "Vars",
  token: "${v}",
  parse: ot
}, Jd = {
  regex: wd,
  countKey: "Colors",
  token: "${c}",
  parse: it.parse
}, Qd = {
  regex: $s,
  countKey: "Numbers",
  token: "${n}",
  parse: ji.parse
};
function Po(t, { regex: e, countKey: i, token: r, parse: s }) {
  const f = t.tokenised.match(e);
  !f || (t["num" + i] = f.length, t.tokenised = t.tokenised.replace(e, r), t.values.push(...f.map(s)));
}
function gs(t) {
  const e = t.toString(), i = {
    value: e,
    tokenised: e,
    values: [],
    numVars: 0,
    numColors: 0,
    numNumbers: 0
  };
  return i.value.includes("var(--") && Po(i, Zd), Po(i, Jd), Po(i, Qd), i;
}
function ep(t) {
  return gs(t).values;
}
function tp(t) {
  const { values: e, numColors: i, numVars: r, tokenised: s } = gs(t), f = e.length;
  return (g) => {
    let l = s;
    for (let n = 0; n < f; n++)
      n < r ? l = l.replace(Zd.token, g[n]) : n < r + i ? l = l.replace(Jd.token, it.transform(g[n])) : l = l.replace(Qd.token, Wr(g[n]));
    return l;
  };
}
const Mx = (t) => typeof t == "number" ? 0 : t;
function Dx(t) {
  const e = ep(t);
  return tp(t)(e.map(Mx));
}
const Er = {
  test: Ax,
  parse: ep,
  createTransformer: tp,
  getAnimatableNone: Dx
}, ip = (t, e) => (i) => `${i > 0 ? e : t}`;
function rp(t, e) {
  return typeof t == "number" ? (i) => Ys(t, e, i) : it.test(t) ? qd(t, e) : t.startsWith("var(") ? ip(t, e) : sp(t, e);
}
const np = (t, e) => {
  const i = [...t], r = i.length, s = t.map((f, g) => rp(f, e[g]));
  return (f) => {
    for (let g = 0; g < r; g++)
      i[g] = s[g](f);
    return i;
  };
}, Ix = (t, e) => {
  const i = { ...t, ...e }, r = {};
  for (const s in i)
    t[s] !== void 0 && e[s] !== void 0 && (r[s] = rp(t[s], e[s]));
  return (s) => {
    for (const f in r)
      i[f] = r[f](s);
    return i;
  };
}, sp = (t, e) => {
  const i = Er.createTransformer(e), r = gs(t), s = gs(e);
  return r.numVars === s.numVars && r.numColors === s.numColors && r.numNumbers >= s.numNumbers ? Ei(np(r.values, s.values), i) : (Dc(!0), ip(t, e));
}, op = (t, e, i) => {
  const r = e - t;
  return r === 0 ? 1 : (i - t) / r;
}, pu = (t, e) => (i) => Ys(t, e, i);
function Rx(t) {
  return typeof t == "number" ? pu : typeof t == "string" ? it.test(t) ? qd : sp : Array.isArray(t) ? np : typeof t == "object" ? Ix : pu;
}
function Lx(t, e, i) {
  const r = [], s = i || Rx(t[0]), f = t.length - 1;
  for (let g = 0; g < f; g++) {
    let l = s(t[g], t[g + 1]);
    if (e) {
      const n = Array.isArray(e) ? e[g] || ot : e;
      l = Ei(n, l);
    }
    r.push(l);
  }
  return r;
}
function ap(t, e, { clamp: i = !0, ease: r, mixer: s } = {}) {
  const f = t.length;
  if (Ws(f === e.length), f === 1)
    return () => e[0];
  t[0] > t[f - 1] && (t = [...t].reverse(), e = [...e].reverse());
  const g = Lx(e, r, s), l = g.length, n = (a) => {
    let h = 0;
    if (l > 1)
      for (; h < t.length - 2 && !(a < t[h + 1]); h++)
        ;
    const o = op(t[h], t[h + 1], a);
    return g[h](o);
  };
  return i ? (a) => n(br(t[0], t[f - 1], a)) : n;
}
function Fx(t, e) {
  const i = t[t.length - 1];
  for (let r = 1; r <= e; r++) {
    const s = op(0, e, r);
    t.push(Ys(i, 1, s));
  }
}
function zx(t) {
  const e = [0];
  return Fx(e, t.length - 1), e;
}
function Bx(t, e) {
  return t.map((i) => i * e);
}
function jx(t, e) {
  return t.map(() => e || Hd).splice(0, t.length - 1);
}
function ms({ duration: t = 300, keyframes: e, times: i, ease: r = "easeInOut" }) {
  const s = wx(r) ? r.map(fu) : fu(r), f = {
    done: !1,
    value: e[0]
  }, g = Bx(
    i && i.length === e.length ? i : zx(e),
    t
  ), l = ap(g, e, {
    ease: Array.isArray(s) ? s : jx(e, s)
  });
  return {
    calculatedDuration: t,
    next: (n) => (f.value = l(n), f.done = n >= t, f)
  };
}
function cp(t, e) {
  return e ? t * (1e3 / e) : 0;
}
const Nx = 5;
function lp(t, e, i) {
  const r = Math.max(e - Nx, 0);
  return cp(i - t(r), e - r);
}
const Ao = 1e-3, Vx = 0.01, gu = 10, $x = 0.05, Hx = 1;
function Ux({ duration: t = 800, bounce: e = 0.25, velocity: i = 0, mass: r = 1 }) {
  let s, f;
  Dc(t <= ki(gu));
  let g = 1 - e;
  g = br($x, Hx, g), t = br(Vx, gu, ii(t)), g < 1 ? (s = (a) => {
    const h = a * g, o = h * t, u = h - i, c = wa(a, g), d = Math.exp(-o);
    return Ao - u / c * d;
  }, f = (a) => {
    const o = a * g * t, u = o * i + i, c = Math.pow(g, 2) * Math.pow(a, 2) * t, d = Math.exp(-o), m = wa(Math.pow(a, 2), g);
    return (-s(a) + Ao > 0 ? -1 : 1) * ((u - c) * d) / m;
  }) : (s = (a) => {
    const h = Math.exp(-a * t), o = (a - i) * t + 1;
    return -Ao + h * o;
  }, f = (a) => {
    const h = Math.exp(-a * t), o = (i - a) * (t * t);
    return h * o;
  });
  const l = 5 / t, n = Yx(s, f, l);
  if (t = ki(t), isNaN(n))
    return {
      stiffness: 100,
      damping: 10,
      duration: t
    };
  {
    const a = Math.pow(n, 2) * r;
    return {
      stiffness: a,
      damping: g * 2 * Math.sqrt(r * a),
      duration: t
    };
  }
}
const Wx = 12;
function Yx(t, e, i) {
  let r = i;
  for (let s = 1; s < Wx; s++)
    r = r - t(r) / e(r);
  return r;
}
function wa(t, e) {
  return t * Math.sqrt(1 - e * e);
}
const Gx = ["duration", "bounce"], Xx = ["stiffness", "damping", "mass"];
function mu(t, e) {
  return e.some((i) => t[i] !== void 0);
}
function Kx(t) {
  let e = {
    velocity: 0,
    stiffness: 100,
    damping: 10,
    mass: 1,
    isResolvedFromDuration: !1,
    ...t
  };
  if (!mu(t, Xx) && mu(t, Gx)) {
    const i = Ux(t);
    e = {
      ...e,
      ...i,
      velocity: 0,
      mass: 1
    }, e.isResolvedFromDuration = !0;
  }
  return e;
}
function up({ keyframes: t, restDelta: e, restSpeed: i, ...r }) {
  const s = t[0], f = t[t.length - 1], g = { done: !1, value: s }, { stiffness: l, damping: n, mass: a, velocity: h, duration: o, isResolvedFromDuration: u } = Kx(r), c = h ? -ii(h) : 0, d = n / (2 * Math.sqrt(l * a)), m = f - s, p = ii(Math.sqrt(l / a)), v = Math.abs(m) < 5;
  i || (i = v ? 0.01 : 2), e || (e = v ? 5e-3 : 0.5);
  let b;
  if (d < 1) {
    const y = wa(p, d);
    b = (w) => {
      const _ = Math.exp(-d * p * w);
      return f - _ * ((c + d * p * m) / y * Math.sin(y * w) + m * Math.cos(y * w));
    };
  } else if (d === 1)
    b = (y) => f - Math.exp(-p * y) * (m + (c + p * m) * y);
  else {
    const y = p * Math.sqrt(d * d - 1);
    b = (w) => {
      const _ = Math.exp(-d * p * w), S = Math.min(y * w, 300);
      return f - _ * ((c + d * p * m) * Math.sinh(S) + y * m * Math.cosh(S)) / y;
    };
  }
  return {
    calculatedDuration: u && o || null,
    next: (y) => {
      const w = b(y);
      if (u)
        g.done = y >= o;
      else {
        let _ = c;
        y !== 0 && (d < 1 ? _ = lp(b, y, w) : _ = 0);
        const S = Math.abs(_) <= i, C = Math.abs(f - w) <= e;
        g.done = S && C;
      }
      return g.value = g.done ? f : w, g;
    }
  };
}
function vu({ keyframes: t, velocity: e = 0, power: i = 0.8, timeConstant: r = 325, bounceDamping: s = 10, bounceStiffness: f = 500, modifyTarget: g, min: l, max: n, restDelta: a = 0.5, restSpeed: h }) {
  const o = t[0], u = {
    done: !1,
    value: o
  }, c = (k) => l !== void 0 && k < l || n !== void 0 && k > n, d = (k) => l === void 0 ? n : n === void 0 || Math.abs(l - k) < Math.abs(n - k) ? l : n;
  let m = i * e;
  const p = o + m, v = g === void 0 ? p : g(p);
  v !== p && (m = v - o);
  const b = (k) => -m * Math.exp(-k / r), y = (k) => v + b(k), w = (k) => {
    const R = b(k), B = y(k);
    u.done = Math.abs(R) <= a, u.value = u.done ? v : B;
  };
  let _, S;
  const C = (k) => {
    !c(u.value) || (_ = k, S = up({
      keyframes: [u.value, d(u.value)],
      velocity: lp(y, k, u.value),
      damping: s,
      stiffness: f,
      restDelta: a,
      restSpeed: h
    }));
  };
  return C(0), {
    calculatedDuration: null,
    next: (k) => {
      let R = !1;
      return !S && _ === void 0 && (R = !0, w(k), C(k)), _ !== void 0 && k > _ ? S.next(k - _) : (!R && w(k), u);
    }
  };
}
const qx = (t) => {
  const e = ({ timestamp: i }) => t(i);
  return {
    start: () => at.update(e, !0),
    stop: () => ps(e),
    now: () => Dt.isProcessing ? Dt.timestamp : performance.now()
  };
}, bu = 2e4;
function yu(t) {
  let e = 0;
  const i = 50;
  let r = t.next(e);
  for (; !r.done && e < bu; )
    e += i, r = t.next(e);
  return e >= bu ? 1 / 0 : e;
}
const Zx = {
  decay: vu,
  inertia: vu,
  tween: ms,
  keyframes: ms,
  spring: up
};
function vs({ autoplay: t = !0, delay: e = 0, driver: i = qx, keyframes: r, type: s = "keyframes", repeat: f = 0, repeatDelay: g = 0, repeatType: l = "loop", onPlay: n, onStop: a, onComplete: h, onUpdate: o, ...u }) {
  let c = 1, d = !1, m, p;
  const v = () => {
    m && m(), p = new Promise((A) => {
      m = A;
    });
  };
  v();
  let b;
  const y = Zx[s] || ms;
  let w;
  y !== ms && typeof r[0] != "number" && (w = ap([0, 100], r, {
    clamp: !1
  }), r = [0, 100]);
  const _ = y({ ...u, keyframes: r });
  let S;
  l === "mirror" && (S = y({
    ...u,
    keyframes: [...r].reverse(),
    velocity: -(u.velocity || 0)
  }));
  let C = "idle", k = null, R = null, B = null;
  _.calculatedDuration === null && f && (_.calculatedDuration = yu(_));
  const { calculatedDuration: N } = _;
  let K = 1 / 0, ee = 1 / 0;
  N !== null && (K = N + g, ee = K * (f + 1) - g);
  let G = 0;
  const W = (A) => {
    if (R === null)
      return;
    c > 0 && (R = Math.min(R, A)), k !== null ? G = k : G = (A - R) * c;
    const D = G - e, V = D < 0;
    G = Math.max(D, 0), C === "finished" && k === null && (G = ee);
    let P = G, E = _;
    if (f) {
      const H = G / K;
      let Z = Math.floor(H), Q = H % 1;
      !Q && H >= 1 && (Q = 1), Q === 1 && Z--, Z = Math.min(Z, f + 1);
      const te = Boolean(Z % 2);
      te && (l === "reverse" ? (Q = 1 - Q, g && (Q -= g / K)) : l === "mirror" && (E = S));
      let $ = br(0, 1, Q);
      G > ee && ($ = l === "reverse" && te ? 1 : 0), P = $ * K;
    }
    const L = V ? { done: !1, value: r[0] } : E.next(P);
    w && (L.value = w(L.value));
    let { done: j } = L;
    !V && N !== null && (j = G >= ee);
    const Y = k === null && (C === "finished" || C === "running" && j || c < 0 && G <= 0);
    return o && o(L.value), Y && le(), L;
  }, re = () => {
    b && b.stop(), b = void 0;
  }, ce = () => {
    C = "idle", re(), v(), R = B = null;
  }, le = () => {
    C = "finished", h && h(), re(), v();
  }, T = () => {
    if (d)
      return;
    b || (b = i(W));
    const A = b.now();
    n && n(), k !== null ? R = A - k : (!R || C === "finished") && (R = A), B = R, k = null, C = "running", b.start();
  };
  t && T();
  const M = {
    then(A, D) {
      return p.then(A, D);
    },
    get time() {
      return ii(G);
    },
    set time(A) {
      A = ki(A), G = A, k !== null || !b || c === 0 ? k = A : R = b.now() - A / c;
    },
    get duration() {
      const A = _.calculatedDuration === null ? yu(_) : _.calculatedDuration;
      return ii(A);
    },
    get speed() {
      return c;
    },
    set speed(A) {
      A === c || !b || (c = A, M.time = ii(G));
    },
    get state() {
      return C;
    },
    play: T,
    pause: () => {
      C = "paused", k = G;
    },
    stop: () => {
      d = !0, C !== "idle" && (C = "idle", a && a(), ce());
    },
    cancel: () => {
      B !== null && W(B), ce();
    },
    complete: () => {
      C = "finished";
    },
    sample: (A) => (R = 0, W(A))
  };
  return M;
}
const Jx = /* @__PURE__ */ new Set([
  "opacity",
  "clipPath",
  "filter",
  "transform",
  "backgroundColor"
]), Nn = 10, Qx = 2e4, e2 = (t, e) => e.type === "spring" || t === "backgroundColor" || !Bd(e.ease);
function t2(t, e, { onUpdate: i, onComplete: r, ...s }) {
  if (!(Vd.waapi() && Jx.has(e) && !s.repeatDelay && s.repeatType !== "mirror" && s.damping !== 0 && s.type !== "inertia"))
    return !1;
  let g = !1, l, n;
  const a = () => {
    n = new Promise((v) => {
      l = v;
    });
  };
  a();
  let { keyframes: h, duration: o = 300, ease: u, times: c } = s;
  if (e2(e, s)) {
    const v = vs({
      ...s,
      repeat: 0,
      delay: 0
    });
    let b = { done: !1, value: h[0] };
    const y = [];
    let w = 0;
    for (; !b.done && w < Qx; )
      b = v.sample(w), y.push(b.value), w += Nn;
    c = void 0, h = y, o = w - Nn, u = "linear";
  }
  const d = dx(t.owner.current, e, h, {
    ...s,
    duration: o,
    ease: u,
    times: c
  }), m = () => d.cancel(), p = () => {
    at.update(m), l(), a();
  };
  return d.onfinish = () => {
    t.set(px(h, s)), r && r(), p();
  }, {
    then(v, b) {
      return n.then(v, b);
    },
    get time() {
      return ii(d.currentTime || 0);
    },
    set time(v) {
      d.currentTime = ki(v);
    },
    get speed() {
      return d.playbackRate;
    },
    set speed(v) {
      d.playbackRate = v;
    },
    get duration() {
      return ii(o);
    },
    play: () => {
      g || (d.play(), ps(m));
    },
    pause: () => d.pause(),
    stop: () => {
      if (g = !0, d.playState === "idle")
        return;
      const { currentTime: v } = d;
      if (v) {
        const b = vs({
          ...s,
          autoplay: !1
        });
        t.setWithVelocity(b.sample(v - Nn).value, b.sample(v).value, Nn);
      }
      p();
    },
    complete: () => d.finish(),
    cancel: p
  };
}
function i2({ keyframes: t, delay: e, onUpdate: i, onComplete: r }) {
  const s = () => (i && i(t[t.length - 1]), r && r(), {
    time: 0,
    speed: 1,
    duration: 0,
    play: ot,
    pause: ot,
    stop: ot,
    then: (f) => (f(), Promise.resolve()),
    cancel: ot,
    complete: ot
  });
  return e ? vs({
    keyframes: [0, 1],
    duration: 0,
    delay: e,
    onComplete: s
  }) : s();
}
const r2 = {
  type: "spring",
  stiffness: 500,
  damping: 25,
  restSpeed: 10
}, n2 = (t) => ({
  type: "spring",
  stiffness: 550,
  damping: t === 0 ? 2 * Math.sqrt(550) : 30,
  restSpeed: 10
}), s2 = {
  type: "keyframes",
  duration: 0.8
}, o2 = {
  type: "keyframes",
  ease: [0.25, 0.1, 0.35, 1],
  duration: 0.3
}, a2 = (t, { keyframes: e }) => e.length > 2 ? s2 : Bi.has(t) ? t.startsWith("scale") ? n2(e[1]) : r2 : o2, xa = (t, e) => t === "zIndex" ? !1 : !!(typeof e == "number" || Array.isArray(e) || typeof e == "string" && (Er.test(e) || e === "0") && !e.startsWith("url(")), c2 = /* @__PURE__ */ new Set(["brightness", "contrast", "saturate", "opacity"]);
function l2(t) {
  const [e, i] = t.slice(0, -1).split("(");
  if (e === "drop-shadow")
    return t;
  const [r] = i.match($s) || [];
  if (!r)
    return t;
  const s = i.replace(r, "");
  let f = c2.has(e) ? 1 : 0;
  return r !== i && (f *= 100), e + "(" + f + s + ")";
}
const u2 = /([a-z-]*)\(.*?\)/g, _a = {
  ...Er,
  getAnimatableNone: (t) => {
    const e = t.match(u2);
    return e ? e.map(l2).join(" ") : t;
  }
}, h2 = {
  ...xd,
  color: it,
  backgroundColor: it,
  outlineColor: it,
  fill: it,
  stroke: it,
  borderColor: it,
  borderTopColor: it,
  borderRightColor: it,
  borderBottomColor: it,
  borderLeftColor: it,
  filter: _a,
  WebkitFilter: _a
}, Lc = (t) => h2[t];
function hp(t, e) {
  let i = Lc(t);
  return i !== _a && (i = Er), i.getAnimatableNone ? i.getAnimatableNone(e) : void 0;
}
const fp = (t) => /^0[^.\s]+$/.test(t);
function f2(t) {
  if (typeof t == "number")
    return t === 0;
  if (t !== null)
    return t === "none" || t === "0" || fp(t);
}
function d2(t, e, i, r) {
  const s = xa(e, i);
  let f;
  Array.isArray(i) ? f = [...i] : f = [null, i];
  const g = r.from !== void 0 ? r.from : t.get();
  let l;
  const n = [];
  for (let a = 0; a < f.length; a++)
    f[a] === null && (f[a] = a === 0 ? g : f[a - 1]), f2(f[a]) && n.push(a), typeof f[a] == "string" && f[a] !== "none" && f[a] !== "0" && (l = f[a]);
  if (s && n.length && l)
    for (let a = 0; a < n.length; a++) {
      const h = n[a];
      f[h] = hp(e, l);
    }
  return f;
}
function p2({ when: t, delay: e, delayChildren: i, staggerChildren: r, staggerDirection: s, repeat: f, repeatType: g, repeatDelay: l, from: n, elapsed: a, ...h }) {
  return !!Object.keys(h).length;
}
function g2(t, e) {
  return t[e] || t.default || t;
}
const m2 = (t, e, i, r = {}) => (s) => {
  const f = g2(r, t) || {}, g = f.delay || r.delay || 0;
  let { elapsed: l = 0 } = r;
  l = l - ki(g);
  const n = d2(e, t, i, f), a = n[0], h = n[n.length - 1], o = xa(t, a), u = xa(t, h);
  Dc(o === u);
  let c = {
    keyframes: n,
    velocity: e.getVelocity(),
    ease: "easeOut",
    ...f,
    delay: -l,
    onUpdate: (d) => {
      e.set(d), f.onUpdate && f.onUpdate(d);
    },
    onComplete: () => {
      s(), f.onComplete && f.onComplete();
    }
  };
  if (p2(f) || (c = {
    ...c,
    ...a2(t, c)
  }), c.duration && (c.duration = ki(c.duration)), c.repeatDelay && (c.repeatDelay = ki(c.repeatDelay)), !o || !u || fx.current || f.type === !1)
    return i2(c);
  if (e.owner && e.owner.current instanceof HTMLElement && !e.owner.getProps().onUpdate) {
    const d = t2(e, t, c);
    if (d)
      return d;
  }
  return vs(c);
};
function bs(t) {
  return Boolean(bt(t) && t.add);
}
const v2 = (t) => /^\-?\d*\.?\d+$/.test(t);
function b2(t, e) {
  t.indexOf(e) === -1 && t.push(e);
}
function y2(t, e) {
  const i = t.indexOf(e);
  i > -1 && t.splice(i, 1);
}
class dp {
  constructor() {
    this.subscriptions = [];
  }
  add(e) {
    return b2(this.subscriptions, e), () => y2(this.subscriptions, e);
  }
  notify(e, i, r) {
    const s = this.subscriptions.length;
    if (!!s)
      if (s === 1)
        this.subscriptions[0](e, i, r);
      else
        for (let f = 0; f < s; f++) {
          const g = this.subscriptions[f];
          g && g(e, i, r);
        }
  }
  getSize() {
    return this.subscriptions.length;
  }
  clear() {
    this.subscriptions.length = 0;
  }
}
const w2 = (t) => !isNaN(parseFloat(t));
class x2 {
  constructor(e, i = {}) {
    this.version = "10.12.12", this.timeDelta = 0, this.lastUpdated = 0, this.canTrackVelocity = !1, this.events = {}, this.updateAndNotify = (r, s = !0) => {
      this.prev = this.current, this.current = r;
      const { delta: f, timestamp: g } = Dt;
      this.lastUpdated !== g && (this.timeDelta = f, this.lastUpdated = g, at.postRender(this.scheduleVelocityCheck)), this.prev !== this.current && this.events.change && this.events.change.notify(this.current), this.events.velocityChange && this.events.velocityChange.notify(this.getVelocity()), s && this.events.renderRequest && this.events.renderRequest.notify(this.current);
    }, this.scheduleVelocityCheck = () => at.postRender(this.velocityCheck), this.velocityCheck = ({ timestamp: r }) => {
      r !== this.lastUpdated && (this.prev = this.current, this.events.velocityChange && this.events.velocityChange.notify(this.getVelocity()));
    }, this.hasAnimated = !1, this.prev = this.current = e, this.canTrackVelocity = w2(this.current), this.owner = i.owner;
  }
  onChange(e) {
    return this.on("change", e);
  }
  on(e, i) {
    this.events[e] || (this.events[e] = new dp());
    const r = this.events[e].add(i);
    return e === "change" ? () => {
      r(), at.read(() => {
        this.events.change.getSize() || this.stop();
      });
    } : r;
  }
  clearListeners() {
    for (const e in this.events)
      this.events[e].clear();
  }
  attach(e, i) {
    this.passiveEffect = e, this.stopPassiveEffect = i;
  }
  set(e, i = !0) {
    !i || !this.passiveEffect ? this.updateAndNotify(e, i) : this.passiveEffect(e, this.updateAndNotify);
  }
  setWithVelocity(e, i, r) {
    this.set(i), this.prev = e, this.timeDelta = r;
  }
  jump(e) {
    this.updateAndNotify(e), this.prev = e, this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
  get() {
    return this.current;
  }
  getPrevious() {
    return this.prev;
  }
  getVelocity() {
    return this.canTrackVelocity ? cp(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;
  }
  start(e) {
    return this.stop(), new Promise((i) => {
      this.hasAnimated = !0, this.animation = e(i), this.events.animationStart && this.events.animationStart.notify();
    }).then(() => {
      this.events.animationComplete && this.events.animationComplete.notify(), this.clearAnimation();
    });
  }
  stop() {
    this.animation && (this.animation.stop(), this.events.animationCancel && this.events.animationCancel.notify()), this.clearAnimation();
  }
  isAnimating() {
    return !!this.animation;
  }
  clearAnimation() {
    delete this.animation;
  }
  destroy() {
    this.clearListeners(), this.stop(), this.stopPassiveEffect && this.stopPassiveEffect();
  }
}
function cn(t, e) {
  return new x2(t, e);
}
const pp = (t) => (e) => e.test(t), _2 = {
  test: (t) => t === "auto",
  parse: (t) => t
}, gp = [ji, xe, cr, Gt, _w, xw, _2], Dr = (t) => gp.find(pp(t)), S2 = [...gp, it, Er], C2 = (t) => S2.find(pp(t));
function T2(t, e, i) {
  t.hasValue(e) ? t.getValue(e).set(i) : t.addValue(e, cn(i));
}
function E2(t, e) {
  const i = Us(t, e);
  let { transitionEnd: r = {}, transition: s = {}, ...f } = i ? t.makeTargetAnimatable(i, !1) : {};
  f = { ...f, ...r };
  for (const g in f) {
    const l = Fw(f[g]);
    T2(t, g, l);
  }
}
function k2(t, e, i) {
  var r, s;
  const f = Object.keys(e).filter((l) => !t.hasValue(l)), g = f.length;
  if (!!g)
    for (let l = 0; l < g; l++) {
      const n = f[l], a = e[n];
      let h = null;
      Array.isArray(a) && (h = a[0]), h === null && (h = (s = (r = i[n]) !== null && r !== void 0 ? r : t.readValue(n)) !== null && s !== void 0 ? s : e[n]), h != null && (typeof h == "string" && (v2(h) || fp(h)) ? h = parseFloat(h) : !C2(h) && Er.test(a) && (h = hp(n, a)), t.addValue(n, cn(h, { owner: t })), i[n] === void 0 && (i[n] = h), h !== null && t.setBaseTarget(n, h));
    }
}
function O2(t, e) {
  return e ? (e[t] || e.default || e).from : void 0;
}
function P2(t, e, i) {
  const r = {};
  for (const s in t) {
    const f = O2(s, e);
    if (f !== void 0)
      r[s] = f;
    else {
      const g = i.getValue(s);
      g && (r[s] = g.get());
    }
  }
  return r;
}
function A2({ protectedKeys: t, needsAnimating: e }, i) {
  const r = t.hasOwnProperty(i) && e[i] !== !0;
  return e[i] = !1, r;
}
function mp(t, e, { delay: i = 0, transitionOverride: r, type: s } = {}) {
  let { transition: f = t.getDefaultTransition(), transitionEnd: g, ...l } = t.makeTargetAnimatable(e);
  const n = t.getValue("willChange");
  r && (f = r);
  const a = [], h = s && t.animationState && t.animationState.getState()[s];
  for (const o in l) {
    const u = t.getValue(o), c = l[o];
    if (!u || c === void 0 || h && A2(h, o))
      continue;
    const d = { delay: i, elapsed: 0, ...f };
    if (window.HandoffAppearAnimations && !u.hasAnimated) {
      const p = t.getProps()[hx];
      p && (d.elapsed = window.HandoffAppearAnimations(p, o, u, at));
    }
    u.start(m2(o, u, c, t.shouldReduceMotion && Bi.has(o) ? { type: !1 } : d));
    const m = u.animation;
    bs(n) && (n.add(o), m.then(() => n.remove(o))), a.push(m);
  }
  return g && Promise.all(a).then(() => {
    g && E2(t, g);
  }), a;
}
function Sa(t, e, i = {}) {
  const r = Us(t, e, i.custom);
  let { transition: s = t.getDefaultTransition() || {} } = r || {};
  i.transitionOverride && (s = i.transitionOverride);
  const f = r ? () => Promise.all(mp(t, r, i)) : () => Promise.resolve(), g = t.variantChildren && t.variantChildren.size ? (n = 0) => {
    const { delayChildren: a = 0, staggerChildren: h, staggerDirection: o } = s;
    return M2(t, e, a + n, h, o, i);
  } : () => Promise.resolve(), { when: l } = s;
  if (l) {
    const [n, a] = l === "beforeChildren" ? [f, g] : [g, f];
    return n().then(() => a());
  } else
    return Promise.all([f(), g(i.delay)]);
}
function M2(t, e, i = 0, r = 0, s = 1, f) {
  const g = [], l = (t.variantChildren.size - 1) * r, n = s === 1 ? (a = 0) => a * r : (a = 0) => l - a * r;
  return Array.from(t.variantChildren).sort(D2).forEach((a, h) => {
    a.notify("AnimationStart", e), g.push(Sa(a, e, {
      ...f,
      delay: i + n(h)
    }).then(() => a.notify("AnimationComplete", e)));
  }), Promise.all(g);
}
function D2(t, e) {
  return t.sortNodePosition(e);
}
function I2(t, e, i = {}) {
  t.notify("AnimationStart", e);
  let r;
  if (Array.isArray(e)) {
    const s = e.map((f) => Sa(t, f, i));
    r = Promise.all(s);
  } else if (typeof e == "string")
    r = Sa(t, e, i);
  else {
    const s = typeof e == "function" ? Us(t, e, i.custom) : e;
    r = Promise.all(mp(t, s, i));
  }
  return r.then(() => t.notify("AnimationComplete", e));
}
const R2 = [...xc].reverse(), L2 = xc.length;
function F2(t) {
  return (e) => Promise.all(e.map(({ animation: i, options: r }) => I2(t, i, r)));
}
function z2(t) {
  let e = F2(t);
  const i = j2();
  let r = !0;
  const s = (n, a) => {
    const h = Us(t, a);
    if (h) {
      const { transition: o, transitionEnd: u, ...c } = h;
      n = { ...n, ...c, ...u };
    }
    return n;
  };
  function f(n) {
    e = n(t);
  }
  function g(n, a) {
    const h = t.getProps(), o = t.getVariantContext(!0) || {}, u = [], c = /* @__PURE__ */ new Set();
    let d = {}, m = 1 / 0;
    for (let v = 0; v < L2; v++) {
      const b = R2[v], y = i[b], w = h[b] !== void 0 ? h[b] : o[b], _ = sn(w), S = b === a ? y.isActive : null;
      S === !1 && (m = v);
      let C = w === o[b] && w !== h[b] && _;
      if (C && r && t.manuallyAnimateOnMount && (C = !1), y.protectedKeys = { ...d }, !y.isActive && S === null || !w && !y.prevProp || Ns(w) || typeof w == "boolean")
        continue;
      const k = B2(y.prevProp, w);
      let R = k || b === a && y.isActive && !C && _ || v > m && _;
      const B = Array.isArray(w) ? w : [w];
      let N = B.reduce(s, {});
      S === !1 && (N = {});
      const { prevResolvedValues: K = {} } = y, ee = {
        ...K,
        ...N
      }, G = (W) => {
        R = !0, c.delete(W), y.needsAnimating[W] = !0;
      };
      for (const W in ee) {
        const re = N[W], ce = K[W];
        d.hasOwnProperty(W) || (re !== ce ? ds(re) && ds(ce) ? !Fd(re, ce) || k ? G(W) : y.protectedKeys[W] = !0 : re !== void 0 ? G(W) : c.add(W) : re !== void 0 && c.has(W) ? G(W) : y.protectedKeys[W] = !0);
      }
      y.prevProp = w, y.prevResolvedValues = N, y.isActive && (d = { ...d, ...N }), r && t.blockInitialAnimation && (R = !1), R && !C && u.push(...B.map((W) => ({
        animation: W,
        options: { type: b, ...n }
      })));
    }
    if (c.size) {
      const v = {};
      c.forEach((b) => {
        const y = t.getBaseTarget(b);
        y !== void 0 && (v[b] = y);
      }), u.push({ animation: v });
    }
    let p = Boolean(u.length);
    return r && h.initial === !1 && !t.manuallyAnimateOnMount && (p = !1), r = !1, p ? e(u) : Promise.resolve();
  }
  function l(n, a, h) {
    var o;
    if (i[n].isActive === a)
      return Promise.resolve();
    (o = t.variantChildren) === null || o === void 0 || o.forEach((c) => {
      var d;
      return (d = c.animationState) === null || d === void 0 ? void 0 : d.setActive(n, a);
    }), i[n].isActive = a;
    const u = g(h, n);
    for (const c in i)
      i[c].protectedKeys = {};
    return u;
  }
  return {
    animateChanges: g,
    setActive: l,
    setAnimateFunction: f,
    getState: () => i
  };
}
function B2(t, e) {
  return typeof e == "string" ? e !== t : Array.isArray(e) ? !Fd(e, t) : !1;
}
function mi(t = !1) {
  return {
    isActive: t,
    protectedKeys: {},
    needsAnimating: {},
    prevResolvedValues: {}
  };
}
function j2() {
  return {
    animate: mi(!0),
    whileInView: mi(),
    whileHover: mi(),
    whileTap: mi(),
    whileDrag: mi(),
    whileFocus: mi(),
    exit: mi()
  };
}
class N2 extends Tr {
  constructor(e) {
    super(e), e.animationState || (e.animationState = z2(e));
  }
  updateAnimationControlsSubscription() {
    const { animate: e } = this.node.getProps();
    this.unmount(), Ns(e) && (this.unmount = e.subscribe(this.node));
  }
  mount() {
    this.updateAnimationControlsSubscription();
  }
  update() {
    const { animate: e } = this.node.getProps(), { animate: i } = this.node.prevProps || {};
    e !== i && this.updateAnimationControlsSubscription();
  }
  unmount() {
  }
}
let V2 = 0;
class $2 extends Tr {
  constructor() {
    super(...arguments), this.id = V2++;
  }
  update() {
    if (!this.node.presenceContext)
      return;
    const { isPresent: e, onExitComplete: i, custom: r } = this.node.presenceContext, { isPresent: s } = this.node.prevPresenceContext || {};
    if (!this.node.animationState || e === s)
      return;
    const f = this.node.animationState.setActive("exit", !e, { custom: r != null ? r : this.node.getProps().custom });
    i && !e && f.then(() => i(this.id));
  }
  mount() {
    const { register: e } = this.node.presenceContext || {};
    e && (this.unmount = e(this.id));
  }
  unmount() {
  }
}
const H2 = {
  animation: {
    Feature: N2
  },
  exit: {
    Feature: $2
  }
}, wu = () => ({ min: 0, max: 0 }), vp = () => ({
  x: wu(),
  y: wu()
});
function U2({ top: t, left: e, right: i, bottom: r }) {
  return {
    x: { min: e, max: i },
    y: { min: t, max: r }
  };
}
function W2(t, e) {
  if (!e)
    return t;
  const i = e({ x: t.left, y: t.top }), r = e({ x: t.right, y: t.bottom });
  return {
    top: i.y,
    left: i.x,
    bottom: r.y,
    right: r.x
  };
}
function Y2(t, e) {
  return U2(W2(t.getBoundingClientRect(), e));
}
const G2 = /var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;
function X2(t) {
  const e = G2.exec(t);
  if (!e)
    return [,];
  const [, i, r] = e;
  return [i, r];
}
function Ca(t, e, i = 1) {
  const [r, s] = X2(t);
  if (!r)
    return;
  const f = window.getComputedStyle(e).getPropertyValue(r);
  return f ? f.trim() : ma(s) ? Ca(s, e, i + 1) : s;
}
function K2(t, { ...e }, i) {
  const r = t.current;
  if (!(r instanceof Element))
    return { target: e, transitionEnd: i };
  i && (i = { ...i }), t.values.forEach((s) => {
    const f = s.get();
    if (!ma(f))
      return;
    const g = Ca(f, r);
    g && s.set(g);
  });
  for (const s in e) {
    const f = e[s];
    if (!ma(f))
      continue;
    const g = Ca(f, r);
    !g || (e[s] = g, i || (i = {}), i[s] === void 0 && (i[s] = f));
  }
  return { target: e, transitionEnd: i };
}
const q2 = /* @__PURE__ */ new Set([
  "width",
  "height",
  "top",
  "left",
  "right",
  "bottom",
  "x",
  "y"
]), bp = (t) => q2.has(t), Z2 = (t) => Object.keys(t).some(bp), xu = (t) => t === ji || t === xe, _u = (t, e) => parseFloat(t.split(", ")[e]), Su = (t, e) => (i, { transform: r }) => {
  if (r === "none" || !r)
    return 0;
  const s = r.match(/^matrix3d\((.+)\)$/);
  if (s)
    return _u(s[1], e);
  {
    const f = r.match(/^matrix\((.+)\)$/);
    return f ? _u(f[1], t) : 0;
  }
}, J2 = /* @__PURE__ */ new Set(["x", "y", "z"]), Q2 = bn.filter((t) => !J2.has(t));
function e_(t) {
  const e = [];
  return Q2.forEach((i) => {
    const r = t.getValue(i);
    r !== void 0 && (e.push([i, r.get()]), r.set(i.startsWith("scale") ? 1 : 0));
  }), e.length && t.render(), e;
}
const Cu = {
  width: ({ x: t }, { paddingLeft: e = "0", paddingRight: i = "0" }) => t.max - t.min - parseFloat(e) - parseFloat(i),
  height: ({ y: t }, { paddingTop: e = "0", paddingBottom: i = "0" }) => t.max - t.min - parseFloat(e) - parseFloat(i),
  top: (t, { top: e }) => parseFloat(e),
  left: (t, { left: e }) => parseFloat(e),
  bottom: ({ y: t }, { top: e }) => parseFloat(e) + (t.max - t.min),
  right: ({ x: t }, { left: e }) => parseFloat(e) + (t.max - t.min),
  x: Su(4, 13),
  y: Su(5, 14)
}, t_ = (t, e, i) => {
  const r = e.measureViewportBox(), s = e.current, f = getComputedStyle(s), { display: g } = f, l = {};
  g === "none" && e.setStaticValue("display", t.display || "block"), i.forEach((a) => {
    l[a] = Cu[a](r, f);
  }), e.render();
  const n = e.measureViewportBox();
  return i.forEach((a) => {
    const h = e.getValue(a);
    h && h.jump(l[a]), t[a] = Cu[a](n, f);
  }), t;
}, i_ = (t, e, i = {}, r = {}) => {
  e = { ...e }, r = { ...r };
  const s = Object.keys(e).filter(bp);
  let f = [], g = !1;
  const l = [];
  if (s.forEach((n) => {
    const a = t.getValue(n);
    if (!t.hasValue(n))
      return;
    let h = i[n], o = Dr(h);
    const u = e[n];
    let c;
    if (ds(u)) {
      const d = u.length, m = u[0] === null ? 1 : 0;
      h = u[m], o = Dr(h);
      for (let p = m; p < d && u[p] !== null; p++)
        c ? Ws(Dr(u[p]) === c) : c = Dr(u[p]);
    } else
      c = Dr(u);
    if (o !== c)
      if (xu(o) && xu(c)) {
        const d = a.get();
        typeof d == "string" && a.set(parseFloat(d)), typeof u == "string" ? e[n] = parseFloat(u) : Array.isArray(u) && c === xe && (e[n] = u.map(parseFloat));
      } else
        (o == null ? void 0 : o.transform) && (c == null ? void 0 : c.transform) && (h === 0 || u === 0) ? h === 0 ? a.set(c.transform(h)) : e[n] = o.transform(u) : (g || (f = e_(t), g = !0), l.push(n), r[n] = r[n] !== void 0 ? r[n] : e[n], a.jump(u));
  }), l.length) {
    const n = l.indexOf("height") >= 0 ? window.pageYOffset : null, a = t_(e, t, l);
    return f.length && f.forEach(([h, o]) => {
      t.getValue(h).set(o);
    }), t.render(), js && n !== null && window.scrollTo({ top: n }), { target: a, transitionEnd: r };
  } else
    return { target: e, transitionEnd: r };
};
function r_(t, e, i, r) {
  return Z2(e) ? i_(t, e, i, r) : { target: e, transitionEnd: r };
}
const n_ = (t, e, i, r) => {
  const s = K2(t, e, r);
  return e = s.target, r = s.transitionEnd, r_(t, e, i, r);
}, Ta = { current: null }, yp = { current: !1 };
function s_() {
  if (yp.current = !0, !!js)
    if (window.matchMedia) {
      const t = window.matchMedia("(prefers-reduced-motion)"), e = () => Ta.current = t.matches;
      t.addListener(e), e();
    } else
      Ta.current = !1;
}
function o_(t, e, i) {
  const { willChange: r } = e;
  for (const s in e) {
    const f = e[s], g = i[s];
    if (bt(f))
      t.addValue(s, f), bs(r) && r.add(s);
    else if (bt(g))
      t.addValue(s, cn(f, { owner: t })), bs(r) && r.remove(s);
    else if (g !== f)
      if (t.hasValue(s)) {
        const l = t.getValue(s);
        !l.hasAnimated && l.set(f);
      } else {
        const l = t.getStaticValue(s);
        t.addValue(s, cn(l !== void 0 ? l : f, { owner: t }));
      }
  }
  for (const s in i)
    e[s] === void 0 && t.removeValue(s);
  return e;
}
const Tu = /* @__PURE__ */ new WeakMap(), wp = Object.keys(on), a_ = wp.length, Eu = [
  "AnimationStart",
  "AnimationComplete",
  "Update",
  "BeforeLayoutMeasure",
  "LayoutMeasure",
  "LayoutAnimationStart",
  "LayoutAnimationComplete"
], c_ = _c.length;
class l_ {
  constructor({ parent: e, props: i, presenceContext: r, reducedMotionConfig: s, visualState: f }, g = {}) {
    this.current = null, this.children = /* @__PURE__ */ new Set(), this.isVariantNode = !1, this.isControllingVariants = !1, this.shouldReduceMotion = null, this.values = /* @__PURE__ */ new Map(), this.features = {}, this.valueSubscriptions = /* @__PURE__ */ new Map(), this.prevMotionValues = {}, this.events = {}, this.propEventSubscriptions = {}, this.notifyUpdate = () => this.notify("Update", this.latestValues), this.render = () => {
      !this.current || (this.triggerBuild(), this.renderInstance(this.current, this.renderState, this.props.style, this.projection));
    }, this.scheduleRender = () => at.render(this.render, !1, !0);
    const { latestValues: l, renderState: n } = f;
    this.latestValues = l, this.baseTarget = { ...l }, this.initialValues = i.initial ? { ...l } : {}, this.renderState = n, this.parent = e, this.props = i, this.presenceContext = r, this.depth = e ? e.depth + 1 : 0, this.reducedMotionConfig = s, this.options = g, this.isControllingVariants = Vs(i), this.isVariantNode = gd(i), this.isVariantNode && (this.variantChildren = /* @__PURE__ */ new Set()), this.manuallyAnimateOnMount = Boolean(e && e.current);
    const { willChange: a, ...h } = this.scrapeMotionValuesFromProps(i, {});
    for (const o in h) {
      const u = h[o];
      l[o] !== void 0 && bt(u) && (u.set(l[o], !1), bs(a) && a.add(o));
    }
  }
  scrapeMotionValuesFromProps(e, i) {
    return {};
  }
  mount(e) {
    this.current = e, Tu.set(e, this), this.projection && !this.projection.instance && this.projection.mount(e), this.parent && this.isVariantNode && !this.isControllingVariants && (this.removeFromVariantTree = this.parent.addVariantChild(this)), this.values.forEach((i, r) => this.bindToMotionValue(r, i)), yp.current || s_(), this.shouldReduceMotion = this.reducedMotionConfig === "never" ? !1 : this.reducedMotionConfig === "always" ? !0 : Ta.current, this.parent && this.parent.children.add(this), this.update(this.props, this.presenceContext);
  }
  unmount() {
    Tu.delete(this.current), this.projection && this.projection.unmount(), ps(this.notifyUpdate), ps(this.render), this.valueSubscriptions.forEach((e) => e()), this.removeFromVariantTree && this.removeFromVariantTree(), this.parent && this.parent.children.delete(this);
    for (const e in this.events)
      this.events[e].clear();
    for (const e in this.features)
      this.features[e].unmount();
    this.current = null;
  }
  bindToMotionValue(e, i) {
    const r = Bi.has(e), s = i.on("change", (g) => {
      this.latestValues[e] = g, this.props.onUpdate && at.update(this.notifyUpdate, !1, !0), r && this.projection && (this.projection.isTransformDirty = !0);
    }), f = i.on("renderRequest", this.scheduleRender);
    this.valueSubscriptions.set(e, () => {
      s(), f();
    });
  }
  sortNodePosition(e) {
    return !this.current || !this.sortInstanceNodePosition || this.type !== e.type ? 0 : this.sortInstanceNodePosition(this.current, e.current);
  }
  loadFeatures({ children: e, ...i }, r, s, f) {
    let g, l;
    for (let n = 0; n < a_; n++) {
      const a = wp[n], { isEnabled: h, Feature: o, ProjectionNode: u, MeasureLayout: c } = on[a];
      u && (g = u), h(i) && (!this.features[a] && o && (this.features[a] = new o(this)), c && (l = c));
    }
    if (!this.projection && g) {
      this.projection = new g(this.latestValues, this.parent && this.parent.projection);
      const { layoutId: n, layout: a, drag: h, dragConstraints: o, layoutScroll: u, layoutRoot: c } = i;
      this.projection.setOptions({
        layoutId: n,
        layout: a,
        alwaysMeasureLayout: Boolean(h) || o && pd(o),
        visualElement: this,
        scheduleRender: () => this.scheduleRender(),
        animationType: typeof a == "string" ? a : "both",
        initialPromotionConfig: f,
        layoutScroll: u,
        layoutRoot: c
      });
    }
    return l;
  }
  updateFeatures() {
    for (const e in this.features) {
      const i = this.features[e];
      i.isMounted ? i.update() : (i.mount(), i.isMounted = !0);
    }
  }
  triggerBuild() {
    this.build(this.renderState, this.latestValues, this.options, this.props);
  }
  measureViewportBox() {
    return this.current ? this.measureInstanceViewportBox(this.current, this.props) : vp();
  }
  getStaticValue(e) {
    return this.latestValues[e];
  }
  setStaticValue(e, i) {
    this.latestValues[e] = i;
  }
  makeTargetAnimatable(e, i = !0) {
    return this.makeTargetAnimatableFromInstance(e, this.props, i);
  }
  update(e, i) {
    (e.transformTemplate || this.props.transformTemplate) && this.scheduleRender(), this.prevProps = this.props, this.props = e, this.prevPresenceContext = this.presenceContext, this.presenceContext = i;
    for (let r = 0; r < Eu.length; r++) {
      const s = Eu[r];
      this.propEventSubscriptions[s] && (this.propEventSubscriptions[s](), delete this.propEventSubscriptions[s]);
      const f = e["on" + s];
      f && (this.propEventSubscriptions[s] = this.on(s, f));
    }
    this.prevMotionValues = o_(this, this.scrapeMotionValuesFromProps(e, this.prevProps), this.prevMotionValues), this.handleChildMotionValue && this.handleChildMotionValue();
  }
  getProps() {
    return this.props;
  }
  getVariant(e) {
    return this.props.variants ? this.props.variants[e] : void 0;
  }
  getDefaultTransition() {
    return this.props.transition;
  }
  getTransformPagePoint() {
    return this.props.transformPagePoint;
  }
  getClosestVariantNode() {
    return this.isVariantNode ? this : this.parent ? this.parent.getClosestVariantNode() : void 0;
  }
  getVariantContext(e = !1) {
    if (e)
      return this.parent ? this.parent.getVariantContext() : void 0;
    if (!this.isControllingVariants) {
      const r = this.parent ? this.parent.getVariantContext() || {} : {};
      return this.props.initial !== void 0 && (r.initial = this.props.initial), r;
    }
    const i = {};
    for (let r = 0; r < c_; r++) {
      const s = _c[r], f = this.props[s];
      (sn(f) || f === !1) && (i[s] = f);
    }
    return i;
  }
  addVariantChild(e) {
    const i = this.getClosestVariantNode();
    if (i)
      return i.variantChildren && i.variantChildren.add(e), () => i.variantChildren.delete(e);
  }
  addValue(e, i) {
    i !== this.values.get(e) && (this.removeValue(e), this.bindToMotionValue(e, i)), this.values.set(e, i), this.latestValues[e] = i.get();
  }
  removeValue(e) {
    this.values.delete(e);
    const i = this.valueSubscriptions.get(e);
    i && (i(), this.valueSubscriptions.delete(e)), delete this.latestValues[e], this.removeValueFromRenderState(e, this.renderState);
  }
  hasValue(e) {
    return this.values.has(e);
  }
  getValue(e, i) {
    if (this.props.values && this.props.values[e])
      return this.props.values[e];
    let r = this.values.get(e);
    return r === void 0 && i !== void 0 && (r = cn(i, { owner: this }), this.addValue(e, r)), r;
  }
  readValue(e) {
    return this.latestValues[e] !== void 0 || !this.current ? this.latestValues[e] : this.readValueFromInstance(this.current, e, this.options);
  }
  setBaseTarget(e, i) {
    this.baseTarget[e] = i;
  }
  getBaseTarget(e) {
    var i;
    const { initial: r } = this.props, s = typeof r == "string" || typeof r == "object" ? (i = Ac(this.props, r)) === null || i === void 0 ? void 0 : i[e] : void 0;
    if (r && s !== void 0)
      return s;
    const f = this.getBaseTargetFromProps(this.props, e);
    return f !== void 0 && !bt(f) ? f : this.initialValues[e] !== void 0 && s === void 0 ? void 0 : this.baseTarget[e];
  }
  on(e, i) {
    return this.events[e] || (this.events[e] = new dp()), this.events[e].add(i);
  }
  notify(e, ...i) {
    this.events[e] && this.events[e].notify(...i);
  }
}
class xp extends l_ {
  sortInstanceNodePosition(e, i) {
    return e.compareDocumentPosition(i) & 2 ? 1 : -1;
  }
  getBaseTargetFromProps(e, i) {
    return e.style ? e.style[i] : void 0;
  }
  removeValueFromRenderState(e, { vars: i, style: r }) {
    delete i[e], delete r[e];
  }
  makeTargetAnimatableFromInstance({ transition: e, transitionEnd: i, ...r }, { transformValues: s }, f) {
    let g = P2(r, e || {}, this);
    if (s && (i && (i = s(i)), r && (r = s(r)), g && (g = s(g))), f) {
      k2(this, r, g);
      const l = n_(this, r, g, i);
      i = l.transitionEnd, r = l.target;
    }
    return {
      transition: e,
      transitionEnd: i,
      ...r
    };
  }
}
function u_(t) {
  return window.getComputedStyle(t);
}
class h_ extends xp {
  readValueFromInstance(e, i) {
    if (Bi.has(i)) {
      const r = Lc(i);
      return r && r.default || 0;
    } else {
      const r = u_(e), s = (yd(i) ? r.getPropertyValue(i) : r[i]) || 0;
      return typeof s == "string" ? s.trim() : s;
    }
  }
  measureInstanceViewportBox(e, { transformPagePoint: i }) {
    return Y2(e, i);
  }
  build(e, i, r, s) {
    Cc(e, i, r, s.transformTemplate);
  }
  scrapeMotionValuesFromProps(e, i) {
    return Pc(e, i);
  }
  handleChildMotionValue() {
    this.childSubscription && (this.childSubscription(), delete this.childSubscription);
    const { children: e } = this.props;
    bt(e) && (this.childSubscription = e.on("change", (i) => {
      this.current && (this.current.textContent = `${i}`);
    }));
  }
  renderInstance(e, i, r, s) {
    Td(e, i, r, s);
  }
}
class f_ extends xp {
  constructor() {
    super(...arguments), this.isSVGTag = !1;
  }
  getBaseTargetFromProps(e, i) {
    return e[i];
  }
  readValueFromInstance(e, i) {
    if (Bi.has(i)) {
      const r = Lc(i);
      return r && r.default || 0;
    }
    return i = Ed.has(i) ? i : Oc(i), e.getAttribute(i);
  }
  measureInstanceViewportBox() {
    return vp();
  }
  scrapeMotionValuesFromProps(e, i) {
    return Od(e, i);
  }
  build(e, i, r, s) {
    Ec(e, i, r, this.isSVGTag, s.transformTemplate);
  }
  renderInstance(e, i, r, s) {
    kd(e, i, r, s);
  }
  mount(e) {
    this.isSVGTag = kc(e.tagName), super.mount(e);
  }
}
const d_ = (t, e) => Sc(t) ? new f_(e, { enableHardwareAcceleration: !1 }) : new h_(e, { enableHardwareAcceleration: !0 }), et = fw($w);
function _p() {
  const t = ge(!1);
  return hs(() => (t.current = !0, () => {
    t.current = !1;
  }), []), t;
}
function p_() {
  const t = _p(), [e, i] = Me(0), r = Oe(() => {
    t.current && i(e + 1);
  }, [e]);
  return [Oe(() => at.postRender(r), [r]), e];
}
class g_ extends _e.Component {
  getSnapshotBeforeUpdate(e) {
    const i = this.props.childRef.current;
    if (i && e.isPresent && !this.props.isPresent) {
      const r = this.props.sizeRef.current;
      r.height = i.offsetHeight || 0, r.width = i.offsetWidth || 0, r.top = i.offsetTop, r.left = i.offsetLeft;
    }
    return null;
  }
  componentDidUpdate() {
  }
  render() {
    return this.props.children;
  }
}
function m_({
  children: t,
  isPresent: e
}) {
  const i = Ot(), r = ge(null), s = ge({
    width: 0,
    height: 0,
    top: 0,
    left: 0
  });
  return qh(() => {
    const {
      width: f,
      height: g,
      top: l,
      left: n
    } = s.current;
    if (e || !r.current || !f || !g)
      return;
    r.current.dataset.motionPopId = i;
    const a = document.createElement("style");
    return document.head.appendChild(a), a.sheet && a.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            top: ${l}px !important;
            left: ${n}px !important;
          }
        `), () => {
      document.head.removeChild(a);
    };
  }, [e]), /* @__PURE__ */ x(g_, {
    isPresent: e,
    childRef: r,
    sizeRef: s,
    children: _e.cloneElement(t, {
      ref: r
    })
  });
}
const Mo = ({
  children: t,
  initial: e,
  isPresent: i,
  onExitComplete: r,
  custom: s,
  presenceAffectsLayout: f,
  mode: g
}) => {
  const l = Pd(v_), n = Ot(), a = Ke(
    () => ({
      id: n,
      initial: e,
      isPresent: i,
      custom: s,
      onExitComplete: (h) => {
        l.set(h, !0);
        for (const o of l.values())
          if (!o)
            return;
        r && r();
      },
      register: (h) => (l.set(h, !1), () => l.delete(h))
    }),
    f ? void 0 : [i]
  );
  return Ke(() => {
    l.forEach((h, o) => l.set(o, !1));
  }, [i]), _e.useEffect(() => {
    !i && !l.size && r && r();
  }, [i]), g === "popLayout" && (t = /* @__PURE__ */ x(m_, {
    isPresent: i,
    children: t
  })), /* @__PURE__ */ x(yc.Provider, {
    value: a,
    children: t
  });
};
function v_() {
  return /* @__PURE__ */ new Map();
}
function b_(t) {
  return Te(() => () => t(), []);
}
const Qi = (t) => t.key || "";
function y_(t, e) {
  t.forEach((i) => {
    const r = Qi(i);
    e.set(r, i);
  });
}
function w_(t) {
  const e = [];
  return Pi.forEach(t, (i) => {
    Ht(i) && e.push(i);
  }), e;
}
const Ut = ({
  children: t,
  custom: e,
  initial: i = !0,
  onExitComplete: r,
  exitBeforeEnter: s,
  presenceAffectsLayout: f = !0,
  mode: g = "sync"
}) => {
  Ws(!s);
  const l = Fe(md).forceRender || p_()[0], n = _p(), a = w_(t);
  let h = a;
  const o = ge(/* @__PURE__ */ new Map()).current, u = ge(h), c = ge(/* @__PURE__ */ new Map()).current, d = ge(!0);
  if (hs(() => {
    d.current = !1, y_(a, c), u.current = h;
  }), b_(() => {
    d.current = !0, c.clear(), o.clear();
  }), d.current)
    return /* @__PURE__ */ x(rs, {
      children: h.map((b) => /* @__PURE__ */ x(Mo, {
        isPresent: !0,
        initial: i ? void 0 : !1,
        presenceAffectsLayout: f,
        mode: g,
        children: b
      }, Qi(b)))
    });
  h = [...h];
  const m = u.current.map(Qi), p = a.map(Qi), v = m.length;
  for (let b = 0; b < v; b++) {
    const y = m[b];
    p.indexOf(y) === -1 && !o.has(y) && o.set(y, void 0);
  }
  return g === "wait" && o.size && (h = []), o.forEach((b, y) => {
    if (p.indexOf(y) !== -1)
      return;
    const w = c.get(y);
    if (!w)
      return;
    const _ = m.indexOf(y);
    let S = b;
    S || (S = /* @__PURE__ */ x(Mo, {
      isPresent: !1,
      onExitComplete: () => {
        c.delete(y), o.delete(y);
        const k = u.current.findIndex((R) => R.key === y);
        if (u.current.splice(k, 1), !o.size) {
          if (u.current = a, n.current === !1)
            return;
          l(), r && r();
        }
      },
      custom: e,
      presenceAffectsLayout: f,
      mode: g,
      children: w
    }, Qi(w)), o.set(y, S)), h.splice(_, 0, S);
  }), h = h.map((b) => {
    const y = b.key;
    return o.has(y) ? b : /* @__PURE__ */ x(Mo, {
      isPresent: !0,
      presenceAffectsLayout: f,
      mode: g,
      children: b
    }, Qi(b));
  }), /* @__PURE__ */ x(rs, {
    children: o.size ? h : h.map((b) => ct(b))
  });
};
function x_({
  children: t,
  features: e,
  strict: i = !1
}) {
  const [, r] = Me(!Do(e)), s = ge(void 0);
  if (!Do(e)) {
    const {
      renderer: f,
      ...g
    } = e;
    s.current = f, ga(g);
  }
  return Te(() => {
    Do(e) && e().then(({
      renderer: f,
      ...g
    }) => {
      ga(g), s.current = f, r(!0);
    });
  }, []), /* @__PURE__ */ x(wc.Provider, {
    value: {
      renderer: s.current,
      strict: i
    },
    children: t
  });
}
function Do(t) {
  return typeof t == "function";
}
const __ = {
  renderer: d_,
  ...H2,
  ...ax
};
function Ii(t, e, i) {
  let [r, s] = Me(t || e), f = ge(t !== void 0), g = f.current, l = t !== void 0, n = ge(r);
  g !== l && console.warn(`WARN: A component changed from ${g ? "controlled" : "uncontrolled"} to ${l ? "controlled" : "uncontrolled"}.`), f.current = l;
  let a = Oe((h, ...o) => {
    let u = (c, ...d) => {
      i && (Object.is(n.current, c) || i(c, ...d)), l || (n.current = c);
    };
    typeof h == "function" ? (console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"), s((d, ...m) => {
      let p = h(l ? n.current : d, ...m);
      return u(p, ...o), l ? d : p;
    })) : (l || s(h), u(h, ...o));
  }, [
    l,
    i
  ]);
  return l ? n.current = t : t = r, [
    t,
    a
  ];
}
function Oi(t, e = -1 / 0, i = 1 / 0) {
  return Math.min(Math.max(t, e), i);
}
function S_(t, e, i, r) {
  let s = (t - (isNaN(e) ? 0 : e)) % r, f = Math.abs(s) * 2 >= r ? t + Math.sign(s) * (r - Math.abs(s)) : t - s;
  isNaN(e) ? !isNaN(i) && f > i && (f = Math.floor(i / r) * r) : f < e ? f = e : !isNaN(i) && f > i && (f = e + Math.floor((i - e) / r) * r);
  let g = r.toString(), l = g.indexOf("."), n = l >= 0 ? g.length - l : 0;
  if (n > 0) {
    let a = Math.pow(10, n);
    f = Math.round(f * a) / a;
  }
  return f;
}
function $e(t, e, i = 10) {
  const r = Math.pow(i, e);
  return Math.round(t * r) / r;
}
const C_ = {
  prefix: String(Math.round(Math.random() * 1e10)),
  current: 0,
  isSSR: !1
}, T_ = /* @__PURE__ */ ue.createContext(C_);
function E_() {
  return Fe(T_).isSSR;
}
const ci = typeof window < "u" ? ue.useLayoutEffect : () => {
};
let ku = /* @__PURE__ */ new Map();
function k_(t, e) {
  if (t === e)
    return t;
  let i = ku.get(t);
  if (i)
    return i(e), e;
  let r = ku.get(e);
  return r ? (r(t), t) : e;
}
function O_(...t) {
  return (...e) => {
    for (let i of t)
      typeof i == "function" && i(...e);
  };
}
function Wt(...t) {
  let e = {
    ...t[0]
  };
  for (let i = 1; i < t.length; i++) {
    let r = t[i];
    for (let s in r) {
      let f = e[s], g = r[s];
      typeof f == "function" && typeof g == "function" && s[0] === "o" && s[1] === "n" && s.charCodeAt(2) >= 65 && s.charCodeAt(2) <= 90 ? e[s] = O_(f, g) : (s === "className" || s === "UNSAFE_className") && typeof f == "string" && typeof g == "string" ? e[s] = ae(f, g) : s === "id" && f && g ? e.id = k_(f, g) : e[s] = g !== void 0 ? g : f;
    }
  }
  return e;
}
function Ou(t) {
  if (P_())
    t.focus({
      preventScroll: !0
    });
  else {
    let e = A_(t);
    t.focus(), M_(e);
  }
}
let Vn = null;
function P_() {
  if (Vn == null) {
    Vn = !1;
    try {
      var t = document.createElement("div");
      t.focus({
        get preventScroll() {
          return Vn = !0, !0;
        }
      });
    } catch {
    }
  }
  return Vn;
}
function A_(t) {
  for (var e = t.parentNode, i = [], r = document.scrollingElement || document.documentElement; e instanceof HTMLElement && e !== r; )
    (e.offsetHeight < e.scrollHeight || e.offsetWidth < e.scrollWidth) && i.push({
      element: e,
      scrollTop: e.scrollTop,
      scrollLeft: e.scrollLeft
    }), e = e.parentNode;
  return r instanceof HTMLElement && i.push({
    element: r,
    scrollTop: r.scrollTop,
    scrollLeft: r.scrollLeft
  }), i;
}
function M_(t) {
  for (let { element: e, scrollTop: i, scrollLeft: r } of t)
    e.scrollTop = i, e.scrollLeft = r;
}
let er = /* @__PURE__ */ new Map(), Ea = /* @__PURE__ */ new Set();
function Pu() {
  if (typeof window > "u")
    return;
  let t = (i) => {
    let r = er.get(i.target);
    r || (r = /* @__PURE__ */ new Set(), er.set(i.target, r), i.target.addEventListener("transitioncancel", e)), r.add(i.propertyName);
  }, e = (i) => {
    let r = er.get(i.target);
    if (!!r && (r.delete(i.propertyName), r.size === 0 && (i.target.removeEventListener("transitioncancel", e), er.delete(i.target)), er.size === 0)) {
      for (let s of Ea)
        s();
      Ea.clear();
    }
  };
  document.body.addEventListener("transitionrun", t), document.body.addEventListener("transitionend", e);
}
typeof document < "u" && (document.readyState !== "loading" ? Pu() : document.addEventListener("DOMContentLoaded", Pu));
function D_(t) {
  requestAnimationFrame(() => {
    er.size === 0 ? t() : Ea.add(t);
  });
}
function Fc() {
  let t = ge(/* @__PURE__ */ new Map()), e = Oe((s, f, g, l) => {
    let n = l != null && l.once ? (...a) => {
      t.current.delete(g), g(...a);
    } : g;
    t.current.set(g, {
      type: f,
      eventTarget: s,
      fn: n,
      options: l
    }), s.addEventListener(f, g, l);
  }, []), i = Oe((s, f, g, l) => {
    var n;
    let a = ((n = t.current.get(g)) === null || n === void 0 ? void 0 : n.fn) || g;
    s.removeEventListener(f, a, l), t.current.delete(g);
  }, []), r = Oe(() => {
    t.current.forEach((s, f) => {
      i(s.eventTarget, s.type, f, s.options);
    });
  }, [
    i
  ]);
  return Te(() => r, [
    r
  ]), {
    addGlobalListener: e,
    removeGlobalListener: i,
    removeAllGlobalListeners: r
  };
}
function Ni(t) {
  const e = ge();
  return ci(() => {
    if (!!t)
      return typeof t == "function" ? t(e.current) : t.current = e.current, () => {
        typeof t == "function" ? t(null) : t.current = null;
      };
  }, [
    t
  ]), e;
}
let At = typeof window < "u" && window.visualViewport;
function I_() {
  let [t, e] = Me(() => Au());
  return Te(() => {
    let i = () => {
      e((r) => {
        let s = Au();
        return s.width === r.width && s.height === r.height ? r : s;
      });
    };
    return At ? At.addEventListener("resize", i) : window.addEventListener("resize", i), () => {
      At ? At.removeEventListener("resize", i) : window.removeEventListener("resize", i);
    };
  }, []), t;
}
function Au() {
  return {
    width: (At == null ? void 0 : At.width) || window.innerWidth,
    height: (At == null ? void 0 : At.height) || window.innerHeight
  };
}
function R_(t) {
  var e;
  return typeof window > "u" || window.navigator == null ? !1 : ((e = window.navigator.userAgentData) === null || e === void 0 ? void 0 : e.brands.some((i) => t.test(i.brand))) || t.test(window.navigator.userAgent);
}
function L_(t) {
  var e;
  return typeof window < "u" && window.navigator != null ? t.test(((e = window.navigator.userAgentData) === null || e === void 0 ? void 0 : e.platform) || window.navigator.platform) : !1;
}
function Sp() {
  return L_(/^Mac/i);
}
function F_() {
  return R_(/Android/i);
}
function z_(t) {
  return t.mozInputSource === 0 && t.isTrusted ? !0 : F_() && t.pointerType ? t.type === "click" && t.buttons === 1 : t.detail === 0 && !t.pointerType;
}
var ye = {};
const B_ = {}, j_ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: B_
}, Symbol.toStringTag, { value: "Module" })), Io = /* @__PURE__ */ Mb(j_);
(function(t) {
  /*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
  var e = e || { version: "5.3.0" };
  if (t.fabric = e, typeof document < "u" && typeof window < "u")
    document instanceof (typeof HTMLDocument < "u" ? HTMLDocument : Document) ? e.document = document : e.document = document.implementation.createHTMLDocument(""), e.window = window;
  else {
    var i = Io, r = new i.JSDOM(
      decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),
      {
        features: {
          FetchExternalResources: ["img"]
        },
        resources: "usable"
      }
    ).window;
    e.document = r.document, e.jsdomImplForWrapper = Io.implForWrapper, e.nodeCanvas = Io.Canvas, e.window = r, DOMParser = e.window.DOMParser;
  }
  e.isTouchSupported = "ontouchstart" in e.window || "ontouchstart" in e.document || e.window && e.window.navigator && e.window.navigator.maxTouchPoints > 0, e.isLikelyNode = typeof Buffer < "u" && typeof window > "u", e.SHARED_ATTRIBUTES = [
    "display",
    "transform",
    "fill",
    "fill-opacity",
    "fill-rule",
    "opacity",
    "stroke",
    "stroke-dasharray",
    "stroke-linecap",
    "stroke-dashoffset",
    "stroke-linejoin",
    "stroke-miterlimit",
    "stroke-opacity",
    "stroke-width",
    "id",
    "paint-order",
    "vector-effect",
    "instantiated_by_use",
    "clip-path"
  ], e.DPI = 96, e.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)", e.commaWsp = "(?:\\s+,?\\s*|,\\s*)", e.rePathCommand = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig, e.reNonWord = /[ \n\.,;!\?\-]/, e.fontPaths = {}, e.iMatrix = [1, 0, 0, 1, 0, 0], e.svgNS = "http://www.w3.org/2000/svg", e.perfLimitSizeTotal = 2097152, e.maxCacheSideLimit = 4096, e.minCacheSideLimit = 256, e.charWidthsCache = {}, e.textureSize = 2048, e.disableStyleCopyPaste = !1, e.enableGLFiltering = !0, e.devicePixelRatio = e.window.devicePixelRatio || e.window.webkitDevicePixelRatio || e.window.mozDevicePixelRatio || 1, e.browserShadowBlurConstant = 1, e.arcToSegmentsCache = {}, e.boundsOfCurveCache = {}, e.cachesBoundsOfCurve = !0, e.forceGLPutImageData = !1, e.initFilterBackend = function() {
    if (e.enableGLFiltering && e.isWebglSupported && e.isWebglSupported(e.textureSize))
      return console.log("max texture size: " + e.maxTextureSize), new e.WebglFilterBackend({ tileSize: e.textureSize });
    if (e.Canvas2dFilterBackend)
      return new e.Canvas2dFilterBackend();
  }, typeof document < "u" && typeof window < "u" && (window.fabric = e), function() {
    function l(c, d) {
      if (!!this.__eventListeners[c]) {
        var m = this.__eventListeners[c];
        d ? m[m.indexOf(d)] = !1 : e.util.array.fill(m, !1);
      }
    }
    function n(c, d) {
      if (this.__eventListeners || (this.__eventListeners = {}), arguments.length === 1)
        for (var m in c)
          this.on(m, c[m]);
      else
        this.__eventListeners[c] || (this.__eventListeners[c] = []), this.__eventListeners[c].push(d);
      return this;
    }
    function a(c, d) {
      var m = function() {
        d.apply(this, arguments), this.off(c, m);
      }.bind(this);
      this.on(c, m);
    }
    function h(c, d) {
      if (arguments.length === 1)
        for (var m in c)
          a.call(this, m, c[m]);
      else
        a.call(this, c, d);
      return this;
    }
    function o(c, d) {
      if (!this.__eventListeners)
        return this;
      if (arguments.length === 0)
        for (c in this.__eventListeners)
          l.call(this, c);
      else if (arguments.length === 1 && typeof arguments[0] == "object")
        for (var m in c)
          l.call(this, m, c[m]);
      else
        l.call(this, c, d);
      return this;
    }
    function u(c, d) {
      if (!this.__eventListeners)
        return this;
      var m = this.__eventListeners[c];
      if (!m)
        return this;
      for (var p = 0, v = m.length; p < v; p++)
        m[p] && m[p].call(this, d || {});
      return this.__eventListeners[c] = m.filter(function(b) {
        return b !== !1;
      }), this;
    }
    e.Observable = {
      fire: u,
      on: n,
      once: h,
      off: o
    };
  }(), e.Collection = {
    _objects: [],
    add: function() {
      if (this._objects.push.apply(this._objects, arguments), this._onObjectAdded)
        for (var l = 0, n = arguments.length; l < n; l++)
          this._onObjectAdded(arguments[l]);
      return this.renderOnAddRemove && this.requestRenderAll(), this;
    },
    insertAt: function(l, n, a) {
      var h = this._objects;
      return a ? h[n] = l : h.splice(n, 0, l), this._onObjectAdded && this._onObjectAdded(l), this.renderOnAddRemove && this.requestRenderAll(), this;
    },
    remove: function() {
      for (var l = this._objects, n, a = !1, h = 0, o = arguments.length; h < o; h++)
        n = l.indexOf(arguments[h]), n !== -1 && (a = !0, l.splice(n, 1), this._onObjectRemoved && this._onObjectRemoved(arguments[h]));
      return this.renderOnAddRemove && a && this.requestRenderAll(), this;
    },
    forEachObject: function(l, n) {
      for (var a = this.getObjects(), h = 0, o = a.length; h < o; h++)
        l.call(n, a[h], h, a);
      return this;
    },
    getObjects: function(l) {
      return typeof l > "u" ? this._objects.concat() : this._objects.filter(function(n) {
        return n.type === l;
      });
    },
    item: function(l) {
      return this._objects[l];
    },
    isEmpty: function() {
      return this._objects.length === 0;
    },
    size: function() {
      return this._objects.length;
    },
    contains: function(l, n) {
      return this._objects.indexOf(l) > -1 ? !0 : n ? this._objects.some(function(a) {
        return typeof a.contains == "function" && a.contains(l, !0);
      }) : !1;
    },
    complexity: function() {
      return this._objects.reduce(function(l, n) {
        return l += n.complexity ? n.complexity() : 0, l;
      }, 0);
    }
  }, e.CommonMethods = {
    _setOptions: function(l) {
      for (var n in l)
        this.set(n, l[n]);
    },
    _initGradient: function(l, n) {
      l && l.colorStops && !(l instanceof e.Gradient) && this.set(n, new e.Gradient(l));
    },
    _initPattern: function(l, n, a) {
      l && l.source && !(l instanceof e.Pattern) ? this.set(n, new e.Pattern(l, a)) : a && a();
    },
    _setObject: function(l) {
      for (var n in l)
        this._set(n, l[n]);
    },
    set: function(l, n) {
      return typeof l == "object" ? this._setObject(l) : this._set(l, n), this;
    },
    _set: function(l, n) {
      this[l] = n;
    },
    toggle: function(l) {
      var n = this.get(l);
      return typeof n == "boolean" && this.set(l, !n), this;
    },
    get: function(l) {
      return this[l];
    }
  }, function(l) {
    var n = Math.sqrt, a = Math.atan2, h = Math.pow, o = Math.PI / 180, u = Math.PI / 2;
    e.util = {
      cos: function(c) {
        if (c === 0)
          return 1;
        c < 0 && (c = -c);
        var d = c / u;
        switch (d) {
          case 1:
          case 3:
            return 0;
          case 2:
            return -1;
        }
        return Math.cos(c);
      },
      sin: function(c) {
        if (c === 0)
          return 0;
        var d = c / u, m = 1;
        switch (c < 0 && (m = -1), d) {
          case 1:
            return m;
          case 2:
            return 0;
          case 3:
            return -m;
        }
        return Math.sin(c);
      },
      removeFromArray: function(c, d) {
        var m = c.indexOf(d);
        return m !== -1 && c.splice(m, 1), c;
      },
      getRandomInt: function(c, d) {
        return Math.floor(Math.random() * (d - c + 1)) + c;
      },
      degreesToRadians: function(c) {
        return c * o;
      },
      radiansToDegrees: function(c) {
        return c / o;
      },
      rotatePoint: function(c, d, m) {
        var p = new e.Point(c.x - d.x, c.y - d.y), v = e.util.rotateVector(p, m);
        return new e.Point(v.x, v.y).addEquals(d);
      },
      rotateVector: function(c, d) {
        var m = e.util.sin(d), p = e.util.cos(d), v = c.x * p - c.y * m, b = c.x * m + c.y * p;
        return {
          x: v,
          y: b
        };
      },
      createVector: function(c, d) {
        return new e.Point(d.x - c.x, d.y - c.y);
      },
      calcAngleBetweenVectors: function(c, d) {
        return Math.acos((c.x * d.x + c.y * d.y) / (Math.hypot(c.x, c.y) * Math.hypot(d.x, d.y)));
      },
      getHatVector: function(c) {
        return new e.Point(c.x, c.y).multiply(1 / Math.hypot(c.x, c.y));
      },
      getBisector: function(c, d, m) {
        var p = e.util.createVector(c, d), v = e.util.createVector(c, m), b = e.util.calcAngleBetweenVectors(p, v), y = e.util.calcAngleBetweenVectors(e.util.rotateVector(p, b), v), w = b * (y === 0 ? 1 : -1) / 2;
        return {
          vector: e.util.getHatVector(e.util.rotateVector(p, w)),
          angle: b
        };
      },
      projectStrokeOnPoints: function(c, d, m) {
        var p = [], v = d.strokeWidth / 2, b = d.strokeUniform ? new e.Point(1 / d.scaleX, 1 / d.scaleY) : new e.Point(1, 1), y = function(w) {
          var _ = v / Math.hypot(w.x, w.y);
          return new e.Point(w.x * _ * b.x, w.y * _ * b.y);
        };
        return c.length <= 1 || c.forEach(function(w, _) {
          var S = new e.Point(w.x, w.y), C, k;
          _ === 0 ? (k = c[_ + 1], C = m ? y(e.util.createVector(k, S)).addEquals(S) : c[c.length - 1]) : _ === c.length - 1 ? (C = c[_ - 1], k = m ? y(e.util.createVector(C, S)).addEquals(S) : c[0]) : (C = c[_ - 1], k = c[_ + 1]);
          var R = e.util.getBisector(S, C, k), B = R.vector, N = R.angle, K, ee;
          if (d.strokeLineJoin === "miter" && (K = -v / Math.sin(N / 2), ee = new e.Point(
            B.x * K * b.x,
            B.y * K * b.y
          ), Math.hypot(ee.x, ee.y) / v <= d.strokeMiterLimit)) {
            p.push(S.add(ee)), p.push(S.subtract(ee));
            return;
          }
          K = -v * Math.SQRT2, ee = new e.Point(
            B.x * K * b.x,
            B.y * K * b.y
          ), p.push(S.add(ee)), p.push(S.subtract(ee));
        }), p;
      },
      transformPoint: function(c, d, m) {
        return m ? new e.Point(
          d[0] * c.x + d[2] * c.y,
          d[1] * c.x + d[3] * c.y
        ) : new e.Point(
          d[0] * c.x + d[2] * c.y + d[4],
          d[1] * c.x + d[3] * c.y + d[5]
        );
      },
      makeBoundingBoxFromPoints: function(c, d) {
        if (d)
          for (var m = 0; m < c.length; m++)
            c[m] = e.util.transformPoint(c[m], d);
        var p = [c[0].x, c[1].x, c[2].x, c[3].x], v = e.util.array.min(p), b = e.util.array.max(p), y = b - v, w = [c[0].y, c[1].y, c[2].y, c[3].y], _ = e.util.array.min(w), S = e.util.array.max(w), C = S - _;
        return {
          left: v,
          top: _,
          width: y,
          height: C
        };
      },
      invertTransform: function(c) {
        var d = 1 / (c[0] * c[3] - c[1] * c[2]), m = [d * c[3], -d * c[1], -d * c[2], d * c[0]], p = e.util.transformPoint({ x: c[4], y: c[5] }, m, !0);
        return m[4] = -p.x, m[5] = -p.y, m;
      },
      toFixed: function(c, d) {
        return parseFloat(Number(c).toFixed(d));
      },
      parseUnit: function(c, d) {
        var m = /\D{0,2}$/.exec(c), p = parseFloat(c);
        switch (d || (d = e.Text.DEFAULT_SVG_FONT_SIZE), m[0]) {
          case "mm":
            return p * e.DPI / 25.4;
          case "cm":
            return p * e.DPI / 2.54;
          case "in":
            return p * e.DPI;
          case "pt":
            return p * e.DPI / 72;
          case "pc":
            return p * e.DPI / 72 * 12;
          case "em":
            return p * d;
          default:
            return p;
        }
      },
      falseFunction: function() {
        return !1;
      },
      getKlass: function(c, d) {
        return c = e.util.string.camelize(c.charAt(0).toUpperCase() + c.slice(1)), e.util.resolveNamespace(d)[c];
      },
      getSvgAttributes: function(c) {
        var d = [
          "instantiated_by_use",
          "style",
          "id",
          "class"
        ];
        switch (c) {
          case "linearGradient":
            d = d.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
            break;
          case "radialGradient":
            d = d.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
            break;
          case "stop":
            d = d.concat(["offset", "stop-color", "stop-opacity"]);
            break;
        }
        return d;
      },
      resolveNamespace: function(c) {
        if (!c)
          return e;
        var d = c.split("."), m = d.length, p, v = l || e.window;
        for (p = 0; p < m; ++p)
          v = v[d[p]];
        return v;
      },
      loadImage: function(c, d, m, p) {
        if (!c) {
          d && d.call(m, c);
          return;
        }
        var v = e.util.createImage(), b = function() {
          d && d.call(m, v, !1), v = v.onload = v.onerror = null;
        };
        v.onload = b, v.onerror = function() {
          e.log("Error loading " + v.src), d && d.call(m, null, !0), v = v.onload = v.onerror = null;
        }, c.indexOf("data") !== 0 && p !== void 0 && p !== null && (v.crossOrigin = p), c.substring(0, 14) === "data:image/svg" && (v.onload = null, e.util.loadImageInDom(v, b)), v.src = c;
      },
      loadImageInDom: function(c, d) {
        var m = e.document.createElement("div");
        m.style.width = m.style.height = "1px", m.style.left = m.style.top = "-100%", m.style.position = "absolute", m.appendChild(c), e.document.querySelector("body").appendChild(m), c.onload = function() {
          d(), m.parentNode.removeChild(m), m = null;
        };
      },
      enlivenObjects: function(c, d, m, p) {
        c = c || [];
        var v = [], b = 0, y = c.length;
        function w() {
          ++b === y && d && d(v.filter(function(_) {
            return _;
          }));
        }
        if (!y) {
          d && d(v);
          return;
        }
        c.forEach(function(_, S) {
          if (!_ || !_.type) {
            w();
            return;
          }
          var C = e.util.getKlass(_.type, m);
          C.fromObject(_, function(k, R) {
            R || (v[S] = k), p && p(_, k, R), w();
          });
        });
      },
      enlivenObjectEnlivables: function(c, d, m) {
        var p = e.Object.ENLIVEN_PROPS.filter(function(v) {
          return !!c[v];
        });
        e.util.enlivenObjects(p.map(function(v) {
          return c[v];
        }), function(v) {
          var b = {};
          p.forEach(function(y, w) {
            b[y] = v[w], d && (d[y] = v[w]);
          }), m && m(b);
        });
      },
      enlivenPatterns: function(c, d) {
        c = c || [];
        function m() {
          ++v === b && d && d(p);
        }
        var p = [], v = 0, b = c.length;
        if (!b) {
          d && d(p);
          return;
        }
        c.forEach(function(y, w) {
          y && y.source ? new e.Pattern(y, function(_) {
            p[w] = _, m();
          }) : (p[w] = y, m());
        });
      },
      groupSVGElements: function(c, d, m) {
        var p;
        return c && c.length === 1 ? (typeof m < "u" && (c[0].sourcePath = m), c[0]) : (d && (d.width && d.height ? d.centerPoint = {
          x: d.width / 2,
          y: d.height / 2
        } : (delete d.width, delete d.height)), p = new e.Group(c, d), typeof m < "u" && (p.sourcePath = m), p);
      },
      populateWithProperties: function(c, d, m) {
        if (m && Array.isArray(m))
          for (var p = 0, v = m.length; p < v; p++)
            m[p] in c && (d[m[p]] = c[m[p]]);
      },
      createCanvasElement: function() {
        return e.document.createElement("canvas");
      },
      copyCanvasElement: function(c) {
        var d = e.util.createCanvasElement();
        return d.width = c.width, d.height = c.height, d.getContext("2d").drawImage(c, 0, 0), d;
      },
      toDataURL: function(c, d, m) {
        return c.toDataURL("image/" + d, m);
      },
      createImage: function() {
        return e.document.createElement("img");
      },
      multiplyTransformMatrices: function(c, d, m) {
        return [
          c[0] * d[0] + c[2] * d[1],
          c[1] * d[0] + c[3] * d[1],
          c[0] * d[2] + c[2] * d[3],
          c[1] * d[2] + c[3] * d[3],
          m ? 0 : c[0] * d[4] + c[2] * d[5] + c[4],
          m ? 0 : c[1] * d[4] + c[3] * d[5] + c[5]
        ];
      },
      qrDecompose: function(c) {
        var d = a(c[1], c[0]), m = h(c[0], 2) + h(c[1], 2), p = n(m), v = (c[0] * c[3] - c[2] * c[1]) / p, b = a(c[0] * c[2] + c[1] * c[3], m);
        return {
          angle: d / o,
          scaleX: p,
          scaleY: v,
          skewX: b / o,
          skewY: 0,
          translateX: c[4],
          translateY: c[5]
        };
      },
      calcRotateMatrix: function(c) {
        if (!c.angle)
          return e.iMatrix.concat();
        var d = e.util.degreesToRadians(c.angle), m = e.util.cos(d), p = e.util.sin(d);
        return [m, p, -p, m, 0, 0];
      },
      calcDimensionsMatrix: function(c) {
        var d = typeof c.scaleX > "u" ? 1 : c.scaleX, m = typeof c.scaleY > "u" ? 1 : c.scaleY, p = [
          c.flipX ? -d : d,
          0,
          0,
          c.flipY ? -m : m,
          0,
          0
        ], v = e.util.multiplyTransformMatrices, b = e.util.degreesToRadians;
        return c.skewX && (p = v(
          p,
          [1, 0, Math.tan(b(c.skewX)), 1],
          !0
        )), c.skewY && (p = v(
          p,
          [1, Math.tan(b(c.skewY)), 0, 1],
          !0
        )), p;
      },
      composeMatrix: function(c) {
        var d = [1, 0, 0, 1, c.translateX || 0, c.translateY || 0], m = e.util.multiplyTransformMatrices;
        return c.angle && (d = m(d, e.util.calcRotateMatrix(c))), (c.scaleX !== 1 || c.scaleY !== 1 || c.skewX || c.skewY || c.flipX || c.flipY) && (d = m(d, e.util.calcDimensionsMatrix(c))), d;
      },
      resetObjectTransform: function(c) {
        c.scaleX = 1, c.scaleY = 1, c.skewX = 0, c.skewY = 0, c.flipX = !1, c.flipY = !1, c.rotate(0);
      },
      saveObjectTransform: function(c) {
        return {
          scaleX: c.scaleX,
          scaleY: c.scaleY,
          skewX: c.skewX,
          skewY: c.skewY,
          angle: c.angle,
          left: c.left,
          flipX: c.flipX,
          flipY: c.flipY,
          top: c.top
        };
      },
      isTransparent: function(c, d, m, p) {
        p > 0 && (d > p ? d -= p : d = 0, m > p ? m -= p : m = 0);
        var v = !0, b, y, w = c.getImageData(d, m, p * 2 || 1, p * 2 || 1), _ = w.data.length;
        for (b = 3; b < _ && (y = w.data[b], v = y <= 0, v !== !1); b += 4)
          ;
        return w = null, v;
      },
      parsePreserveAspectRatioAttribute: function(c) {
        var d = "meet", m = "Mid", p = "Mid", v = c.split(" "), b;
        return v && v.length && (d = v.pop(), d !== "meet" && d !== "slice" ? (b = d, d = "meet") : v.length && (b = v.pop())), m = b !== "none" ? b.slice(1, 4) : "none", p = b !== "none" ? b.slice(5, 8) : "none", {
          meetOrSlice: d,
          alignX: m,
          alignY: p
        };
      },
      clearFabricFontCache: function(c) {
        c = (c || "").toLowerCase(), c ? e.charWidthsCache[c] && delete e.charWidthsCache[c] : e.charWidthsCache = {};
      },
      limitDimsByArea: function(c, d) {
        var m = Math.sqrt(d * c), p = Math.floor(d / m);
        return { x: Math.floor(m), y: p };
      },
      capValue: function(c, d, m) {
        return Math.max(c, Math.min(d, m));
      },
      findScaleToFit: function(c, d) {
        return Math.min(d.width / c.width, d.height / c.height);
      },
      findScaleToCover: function(c, d) {
        return Math.max(d.width / c.width, d.height / c.height);
      },
      matrixToSVG: function(c) {
        return "matrix(" + c.map(function(d) {
          return e.util.toFixed(d, e.Object.NUM_FRACTION_DIGITS);
        }).join(" ") + ")";
      },
      removeTransformFromObject: function(c, d) {
        var m = e.util.invertTransform(d), p = e.util.multiplyTransformMatrices(m, c.calcOwnMatrix());
        e.util.applyTransformToObject(c, p);
      },
      addTransformToObject: function(c, d) {
        e.util.applyTransformToObject(
          c,
          e.util.multiplyTransformMatrices(d, c.calcOwnMatrix())
        );
      },
      applyTransformToObject: function(c, d) {
        var m = e.util.qrDecompose(d), p = new e.Point(m.translateX, m.translateY);
        c.flipX = !1, c.flipY = !1, c.set("scaleX", m.scaleX), c.set("scaleY", m.scaleY), c.skewX = m.skewX, c.skewY = m.skewY, c.angle = m.angle, c.setPositionByOrigin(p, "center", "center");
      },
      sizeAfterTransform: function(c, d, m) {
        var p = c / 2, v = d / 2, b = [
          {
            x: -p,
            y: -v
          },
          {
            x: p,
            y: -v
          },
          {
            x: -p,
            y: v
          },
          {
            x: p,
            y: v
          }
        ], y = e.util.calcDimensionsMatrix(m), w = e.util.makeBoundingBoxFromPoints(b, y);
        return {
          x: w.width,
          y: w.height
        };
      },
      mergeClipPaths: function(c, d) {
        var m = c, p = d;
        m.inverted && !p.inverted && (m = d, p = c), e.util.applyTransformToObject(
          p,
          e.util.multiplyTransformMatrices(
            e.util.invertTransform(m.calcTransformMatrix()),
            p.calcTransformMatrix()
          )
        );
        var v = m.inverted && p.inverted;
        return v && (m.inverted = p.inverted = !1), new e.Group([m], { clipPath: p, inverted: v });
      },
      hasStyleChanged: function(c, d, m) {
        return m = m || !1, c.fill !== d.fill || c.stroke !== d.stroke || c.strokeWidth !== d.strokeWidth || c.fontSize !== d.fontSize || c.fontFamily !== d.fontFamily || c.fontWeight !== d.fontWeight || c.fontStyle !== d.fontStyle || c.textBackgroundColor !== d.textBackgroundColor || c.deltaY !== d.deltaY || m && (c.overline !== d.overline || c.underline !== d.underline || c.linethrough !== d.linethrough);
      },
      stylesToArray: function(m, d) {
        for (var m = e.util.object.clone(m, !0), p = d.split(`
`), v = -1, b = {}, y = [], w = 0; w < p.length; w++) {
          if (!m[w]) {
            v += p[w].length;
            continue;
          }
          for (var _ = 0; _ < p[w].length; _++) {
            v++;
            var S = m[w][_];
            if (S && Object.keys(S).length > 0) {
              var C = e.util.hasStyleChanged(b, S, !0);
              C ? y.push({
                start: v,
                end: v + 1,
                style: S
              }) : y[y.length - 1].end++;
            }
            b = S || {};
          }
        }
        return y;
      },
      stylesFromArray: function(c, d) {
        if (!Array.isArray(c))
          return c;
        for (var m = d.split(`
`), p = -1, v = 0, b = {}, y = 0; y < m.length; y++)
          for (var w = 0; w < m[y].length; w++)
            p++, c[v] && c[v].start <= p && p < c[v].end && (b[y] = b[y] || {}, b[y][w] = Object.assign({}, c[v].style), p === c[v].end - 1 && v++);
        return b;
      }
    };
  }(t), function() {
    var l = Array.prototype.join, n = {
      m: 2,
      l: 2,
      h: 1,
      v: 1,
      c: 6,
      s: 4,
      q: 4,
      t: 2,
      a: 7
    }, a = {
      m: "l",
      M: "L"
    };
    function h(T, M, A, D, V, P, E, L, j, Y, H) {
      var Z = e.util.cos(T), Q = e.util.sin(T), te = e.util.cos(M), $ = e.util.sin(M), z = A * V * te - D * P * $ + E, q = D * V * te + A * P * $ + L, J = Y + j * (-A * V * Q - D * P * Z), F = H + j * (-D * V * Q + A * P * Z), U = z + j * (A * V * $ + D * P * te), se = q + j * (D * V * $ - A * P * te);
      return [
        "C",
        J,
        F,
        U,
        se,
        z,
        q
      ];
    }
    function o(T, M, A, D, V, P, E) {
      var L = Math.PI, j = E * L / 180, Y = e.util.sin(j), H = e.util.cos(j), Z = 0, Q = 0;
      A = Math.abs(A), D = Math.abs(D);
      var te = -H * T * 0.5 - Y * M * 0.5, $ = -H * M * 0.5 + Y * T * 0.5, z = A * A, q = D * D, J = $ * $, F = te * te, U = z * q - z * J - q * F, se = 0;
      if (U < 0) {
        var be = Math.sqrt(1 - U / (z * q));
        A *= be, D *= be;
      } else
        se = (V === P ? -1 : 1) * Math.sqrt(U / (z * J + q * F));
      var de = se * A * $ / D, X = -se * D * te / A, fe = H * de - Y * X + T * 0.5, we = Y * de + H * X + M * 0.5, Ee = u(1, 0, (te - de) / A, ($ - X) / D), Re = u((te - de) / A, ($ - X) / D, (-te - de) / A, (-$ - X) / D);
      P === 0 && Re > 0 ? Re -= 2 * L : P === 1 && Re < 0 && (Re += 2 * L);
      for (var Pe = Math.ceil(Math.abs(Re / L * 2)), tt = [], Ve = Re / Pe, gi = 8 / 3 * Math.sin(Ve / 4) * Math.sin(Ve / 4) / Math.sin(Ve / 2), Mr = Ee + Ve, Pt = 0; Pt < Pe; Pt++)
        tt[Pt] = h(Ee, Mr, H, Y, A, D, fe, we, gi, Z, Q), Z = tt[Pt][5], Q = tt[Pt][6], Ee = Mr, Mr += Ve;
      return tt;
    }
    function u(T, M, A, D) {
      var V = Math.atan2(M, T), P = Math.atan2(D, A);
      return P >= V ? P - V : 2 * Math.PI - (V - P);
    }
    function c(T, M, A, D, V, P, E, L) {
      var j;
      if (e.cachesBoundsOfCurve && (j = l.call(arguments), e.boundsOfCurveCache[j]))
        return e.boundsOfCurveCache[j];
      var Y = Math.sqrt, H = Math.min, Z = Math.max, Q = Math.abs, te = [], $ = [[], []], z, q, J, F, U, se, be, de;
      q = 6 * T - 12 * A + 6 * V, z = -3 * T + 9 * A - 9 * V + 3 * E, J = 3 * A - 3 * T;
      for (var X = 0; X < 2; ++X) {
        if (X > 0 && (q = 6 * M - 12 * D + 6 * P, z = -3 * M + 9 * D - 9 * P + 3 * L, J = 3 * D - 3 * M), Q(z) < 1e-12) {
          if (Q(q) < 1e-12)
            continue;
          F = -J / q, 0 < F && F < 1 && te.push(F);
          continue;
        }
        be = q * q - 4 * J * z, !(be < 0) && (de = Y(be), U = (-q + de) / (2 * z), 0 < U && U < 1 && te.push(U), se = (-q - de) / (2 * z), 0 < se && se < 1 && te.push(se));
      }
      for (var fe, we, Ee = te.length, Re = Ee, Pe; Ee--; )
        F = te[Ee], Pe = 1 - F, fe = Pe * Pe * Pe * T + 3 * Pe * Pe * F * A + 3 * Pe * F * F * V + F * F * F * E, $[0][Ee] = fe, we = Pe * Pe * Pe * M + 3 * Pe * Pe * F * D + 3 * Pe * F * F * P + F * F * F * L, $[1][Ee] = we;
      $[0][Re] = T, $[1][Re] = M, $[0][Re + 1] = E, $[1][Re + 1] = L;
      var tt = [
        {
          x: H.apply(null, $[0]),
          y: H.apply(null, $[1])
        },
        {
          x: Z.apply(null, $[0]),
          y: Z.apply(null, $[1])
        }
      ];
      return e.cachesBoundsOfCurve && (e.boundsOfCurveCache[j] = tt), tt;
    }
    function d(T, M, A) {
      for (var D = A[1], V = A[2], P = A[3], E = A[4], L = A[5], j = A[6], Y = A[7], H = o(j - T, Y - M, D, V, E, L, P), Z = 0, Q = H.length; Z < Q; Z++)
        H[Z][1] += T, H[Z][2] += M, H[Z][3] += T, H[Z][4] += M, H[Z][5] += T, H[Z][6] += M;
      return H;
    }
    function m(T) {
      var M = 0, A = 0, D = T.length, V = 0, P = 0, E, L, j, Y = [], H, Z, Q;
      for (L = 0; L < D; ++L) {
        switch (j = !1, E = T[L].slice(0), E[0]) {
          case "l":
            E[0] = "L", E[1] += M, E[2] += A;
          case "L":
            M = E[1], A = E[2];
            break;
          case "h":
            E[1] += M;
          case "H":
            E[0] = "L", E[2] = A, M = E[1];
            break;
          case "v":
            E[1] += A;
          case "V":
            E[0] = "L", A = E[1], E[1] = M, E[2] = A;
            break;
          case "m":
            E[0] = "M", E[1] += M, E[2] += A;
          case "M":
            M = E[1], A = E[2], V = E[1], P = E[2];
            break;
          case "c":
            E[0] = "C", E[1] += M, E[2] += A, E[3] += M, E[4] += A, E[5] += M, E[6] += A;
          case "C":
            Z = E[3], Q = E[4], M = E[5], A = E[6];
            break;
          case "s":
            E[0] = "S", E[1] += M, E[2] += A, E[3] += M, E[4] += A;
          case "S":
            H === "C" ? (Z = 2 * M - Z, Q = 2 * A - Q) : (Z = M, Q = A), M = E[3], A = E[4], E[0] = "C", E[5] = E[3], E[6] = E[4], E[3] = E[1], E[4] = E[2], E[1] = Z, E[2] = Q, Z = E[3], Q = E[4];
            break;
          case "q":
            E[0] = "Q", E[1] += M, E[2] += A, E[3] += M, E[4] += A;
          case "Q":
            Z = E[1], Q = E[2], M = E[3], A = E[4];
            break;
          case "t":
            E[0] = "T", E[1] += M, E[2] += A;
          case "T":
            H === "Q" ? (Z = 2 * M - Z, Q = 2 * A - Q) : (Z = M, Q = A), E[0] = "Q", M = E[1], A = E[2], E[1] = Z, E[2] = Q, E[3] = M, E[4] = A;
            break;
          case "a":
            E[0] = "A", E[6] += M, E[7] += A;
          case "A":
            j = !0, Y = Y.concat(d(M, A, E)), M = E[6], A = E[7];
            break;
          case "z":
          case "Z":
            M = V, A = P;
            break;
        }
        j || Y.push(E), H = E[0];
      }
      return Y;
    }
    function p(T, M, A, D) {
      return Math.sqrt((A - T) * (A - T) + (D - M) * (D - M));
    }
    function v(T) {
      return T * T * T;
    }
    function b(T) {
      return 3 * T * T * (1 - T);
    }
    function y(T) {
      return 3 * T * (1 - T) * (1 - T);
    }
    function w(T) {
      return (1 - T) * (1 - T) * (1 - T);
    }
    function _(T, M, A, D, V, P, E, L) {
      return function(j) {
        var Y = v(j), H = b(j), Z = y(j), Q = w(j);
        return {
          x: E * Y + V * H + A * Z + T * Q,
          y: L * Y + P * H + D * Z + M * Q
        };
      };
    }
    function S(T, M, A, D, V, P, E, L) {
      return function(j) {
        var Y = 1 - j, H = 3 * Y * Y * (A - T) + 6 * Y * j * (V - A) + 3 * j * j * (E - V), Z = 3 * Y * Y * (D - M) + 6 * Y * j * (P - D) + 3 * j * j * (L - P);
        return Math.atan2(Z, H);
      };
    }
    function C(T) {
      return T * T;
    }
    function k(T) {
      return 2 * T * (1 - T);
    }
    function R(T) {
      return (1 - T) * (1 - T);
    }
    function B(T, M, A, D, V, P) {
      return function(E) {
        var L = C(E), j = k(E), Y = R(E);
        return {
          x: V * L + A * j + T * Y,
          y: P * L + D * j + M * Y
        };
      };
    }
    function N(T, M, A, D, V, P) {
      return function(E) {
        var L = 1 - E, j = 2 * L * (A - T) + 2 * E * (V - A), Y = 2 * L * (D - M) + 2 * E * (P - D);
        return Math.atan2(Y, j);
      };
    }
    function K(T, M, A) {
      var D = { x: M, y: A }, V, P = 0, E;
      for (E = 1; E <= 100; E += 1)
        V = T(E / 100), P += p(D.x, D.y, V.x, V.y), D = V;
      return P;
    }
    function ee(T, M) {
      for (var A = 0, D = 0, V = T.iterator, P = { x: T.x, y: T.y }, E, L, j = 0.01, Y = T.angleFinder, H; D < M && j > 1e-4; )
        E = V(A), H = A, L = p(P.x, P.y, E.x, E.y), L + D > M ? (A -= j, j /= 2) : (P = E, A += j, D += L);
      return E.angle = Y(H), E;
    }
    function G(T) {
      for (var M = 0, A = T.length, D, V = 0, P = 0, E = 0, L = 0, j = [], Y, H, Z, Q = 0; Q < A; Q++) {
        switch (D = T[Q], H = {
          x: V,
          y: P,
          command: D[0]
        }, D[0]) {
          case "M":
            H.length = 0, E = V = D[1], L = P = D[2];
            break;
          case "L":
            H.length = p(V, P, D[1], D[2]), V = D[1], P = D[2];
            break;
          case "C":
            Y = _(
              V,
              P,
              D[1],
              D[2],
              D[3],
              D[4],
              D[5],
              D[6]
            ), Z = S(
              V,
              P,
              D[1],
              D[2],
              D[3],
              D[4],
              D[5],
              D[6]
            ), H.iterator = Y, H.angleFinder = Z, H.length = K(Y, V, P), V = D[5], P = D[6];
            break;
          case "Q":
            Y = B(
              V,
              P,
              D[1],
              D[2],
              D[3],
              D[4]
            ), Z = N(
              V,
              P,
              D[1],
              D[2],
              D[3],
              D[4]
            ), H.iterator = Y, H.angleFinder = Z, H.length = K(Y, V, P), V = D[3], P = D[4];
            break;
          case "Z":
          case "z":
            H.destX = E, H.destY = L, H.length = p(V, P, E, L), V = E, P = L;
            break;
        }
        M += H.length, j.push(H);
      }
      return j.push({ length: M, x: V, y: P }), j;
    }
    function W(T, M, A) {
      A || (A = G(T));
      for (var D = 0; M - A[D].length > 0 && D < A.length - 2; )
        M -= A[D].length, D++;
      var V = A[D], P = M / V.length, E = V.command, L = T[D], j;
      switch (E) {
        case "M":
          return { x: V.x, y: V.y, angle: 0 };
        case "Z":
        case "z":
          return j = new e.Point(V.x, V.y).lerp(
            new e.Point(V.destX, V.destY),
            P
          ), j.angle = Math.atan2(V.destY - V.y, V.destX - V.x), j;
        case "L":
          return j = new e.Point(V.x, V.y).lerp(
            new e.Point(L[1], L[2]),
            P
          ), j.angle = Math.atan2(L[2] - V.y, L[1] - V.x), j;
        case "C":
          return ee(V, M);
        case "Q":
          return ee(V, M);
      }
    }
    function re(T) {
      var M = [], A = [], D, V, P = e.rePathCommand, E = "[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*", L = "(" + E + ")" + e.commaWsp, j = "([01])" + e.commaWsp + "?", Y = L + "?" + L + "?" + L + j + j + L + "?(" + E + ")", H = new RegExp(Y, "g"), Z, Q, te;
      if (!T || !T.match)
        return M;
      te = T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);
      for (var $ = 0, z, q = te.length; $ < q; $++) {
        D = te[$], Q = D.slice(1).trim(), A.length = 0;
        var J = D.charAt(0);
        if (z = [J], J.toLowerCase() === "a")
          for (var F; F = H.exec(Q); )
            for (var U = 1; U < F.length; U++)
              A.push(F[U]);
        else
          for (; Z = P.exec(Q); )
            A.push(Z[0]);
        for (var U = 0, se = A.length; U < se; U++)
          V = parseFloat(A[U]), isNaN(V) || z.push(V);
        var be = n[J.toLowerCase()], de = a[J] || J;
        if (z.length - 1 > be)
          for (var X = 1, fe = z.length; X < fe; X += be)
            M.push([J].concat(z.slice(X, X + be))), J = de;
        else
          M.push(z);
      }
      return M;
    }
    function ce(T, M) {
      var A = [], D, V = new e.Point(T[0].x, T[0].y), P = new e.Point(T[1].x, T[1].y), E = T.length, L = 1, j = 0, Y = E > 2;
      for (M = M || 0, Y && (L = T[2].x < P.x ? -1 : T[2].x === P.x ? 0 : 1, j = T[2].y < P.y ? -1 : T[2].y === P.y ? 0 : 1), A.push(["M", V.x - L * M, V.y - j * M]), D = 1; D < E; D++) {
        if (!V.eq(P)) {
          var H = V.midPointFrom(P);
          A.push(["Q", V.x, V.y, H.x, H.y]);
        }
        V = T[D], D + 1 < T.length && (P = T[D + 1]);
      }
      return Y && (L = V.x > T[D - 2].x ? 1 : V.x === T[D - 2].x ? 0 : -1, j = V.y > T[D - 2].y ? 1 : V.y === T[D - 2].y ? 0 : -1), A.push(["L", V.x + L * M, V.y + j * M]), A;
    }
    function le(T, M, A) {
      return A && (M = e.util.multiplyTransformMatrices(
        M,
        [1, 0, 0, 1, -A.x, -A.y]
      )), T.map(function(D) {
        for (var V = D.slice(0), P = {}, E = 1; E < D.length - 1; E += 2)
          P.x = D[E], P.y = D[E + 1], P = e.util.transformPoint(P, M), V[E] = P.x, V[E + 1] = P.y;
        return V;
      });
    }
    e.util.joinPath = function(T) {
      return T.map(function(M) {
        return M.join(" ");
      }).join(" ");
    }, e.util.parsePath = re, e.util.makePathSimpler = m, e.util.getSmoothPathFromPoints = ce, e.util.getPathSegmentsInfo = G, e.util.getBoundsOfCurve = c, e.util.getPointOnPath = W, e.util.transformPath = le;
  }(), function() {
    var l = Array.prototype.slice;
    function n(c, d) {
      for (var m = l.call(arguments, 2), p = [], v = 0, b = c.length; v < b; v++)
        p[v] = m.length ? c[v][d].apply(c[v], m) : c[v][d].call(c[v]);
      return p;
    }
    function a(c, d) {
      return u(c, d, function(m, p) {
        return m >= p;
      });
    }
    function h(c, d) {
      return u(c, d, function(m, p) {
        return m < p;
      });
    }
    function o(c, d) {
      for (var m = c.length; m--; )
        c[m] = d;
      return c;
    }
    function u(c, d, m) {
      if (!(!c || c.length === 0)) {
        var p = c.length - 1, v = d ? c[p][d] : c[p];
        if (d)
          for (; p--; )
            m(c[p][d], v) && (v = c[p][d]);
        else
          for (; p--; )
            m(c[p], v) && (v = c[p]);
        return v;
      }
    }
    e.util.array = {
      fill: o,
      invoke: n,
      min: h,
      max: a
    };
  }(), function() {
    function l(a, h, o) {
      if (o)
        if (!e.isLikelyNode && h instanceof Element)
          a = h;
        else if (h instanceof Array) {
          a = [];
          for (var u = 0, c = h.length; u < c; u++)
            a[u] = l({}, h[u], o);
        } else if (h && typeof h == "object")
          for (var d in h)
            d === "canvas" || d === "group" ? a[d] = null : h.hasOwnProperty(d) && (a[d] = l({}, h[d], o));
        else
          a = h;
      else
        for (var d in h)
          a[d] = h[d];
      return a;
    }
    function n(a, h) {
      return l({}, a, h);
    }
    e.util.object = {
      extend: l,
      clone: n
    }, e.util.object.extend(e.util, e.Observable);
  }(), function() {
    function l(u) {
      return u.replace(/-+(.)?/g, function(c, d) {
        return d ? d.toUpperCase() : "";
      });
    }
    function n(u, c) {
      return u.charAt(0).toUpperCase() + (c ? u.slice(1) : u.slice(1).toLowerCase());
    }
    function a(u) {
      return u.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }
    function h(u) {
      var c = 0, d, m = [];
      for (c = 0, d; c < u.length; c++)
        (d = o(u, c)) !== !1 && m.push(d);
      return m;
    }
    function o(u, c) {
      var d = u.charCodeAt(c);
      if (isNaN(d))
        return "";
      if (d < 55296 || d > 57343)
        return u.charAt(c);
      if (55296 <= d && d <= 56319) {
        if (u.length <= c + 1)
          throw "High surrogate without following low surrogate";
        var m = u.charCodeAt(c + 1);
        if (56320 > m || m > 57343)
          throw "High surrogate without following low surrogate";
        return u.charAt(c) + u.charAt(c + 1);
      }
      if (c === 0)
        throw "Low surrogate without preceding high surrogate";
      var p = u.charCodeAt(c - 1);
      if (55296 > p || p > 56319)
        throw "Low surrogate without preceding high surrogate";
      return !1;
    }
    e.util.string = {
      camelize: l,
      capitalize: n,
      escapeXml: a,
      graphemeSplit: h
    };
  }(), function() {
    var l = Array.prototype.slice, n = function() {
    }, a = function() {
      for (var d in { toString: 1 })
        if (d === "toString")
          return !1;
      return !0;
    }(), h = function(d, m, p) {
      for (var v in m)
        v in d.prototype && typeof d.prototype[v] == "function" && (m[v] + "").indexOf("callSuper") > -1 ? d.prototype[v] = function(b) {
          return function() {
            var y = this.constructor.superclass;
            this.constructor.superclass = p;
            var w = m[b].apply(this, arguments);
            if (this.constructor.superclass = y, b !== "initialize")
              return w;
          };
        }(v) : d.prototype[v] = m[v], a && (m.toString !== Object.prototype.toString && (d.prototype.toString = m.toString), m.valueOf !== Object.prototype.valueOf && (d.prototype.valueOf = m.valueOf));
    };
    function o() {
    }
    function u(d) {
      for (var m = null, p = this; p.constructor.superclass; ) {
        var v = p.constructor.superclass.prototype[d];
        if (p[d] !== v) {
          m = v;
          break;
        }
        p = p.constructor.superclass.prototype;
      }
      return m ? arguments.length > 1 ? m.apply(this, l.call(arguments, 1)) : m.call(this) : console.log("tried to callSuper " + d + ", method not found in prototype chain", this);
    }
    function c() {
      var d = null, m = l.call(arguments, 0);
      typeof m[0] == "function" && (d = m.shift());
      function p() {
        this.initialize.apply(this, arguments);
      }
      p.superclass = d, p.subclasses = [], d && (o.prototype = d.prototype, p.prototype = new o(), d.subclasses.push(p));
      for (var v = 0, b = m.length; v < b; v++)
        h(p, m[v], d);
      return p.prototype.initialize || (p.prototype.initialize = n), p.prototype.constructor = p, p.prototype.callSuper = u, p;
    }
    e.util.createClass = c;
  }(), function() {
    var l = !!e.document.createElement("div").attachEvent, n = ["touchstart", "touchmove", "touchend"];
    e.util.addListener = function(h, o, u, c) {
      h && h.addEventListener(o, u, l ? !1 : c);
    }, e.util.removeListener = function(h, o, u, c) {
      h && h.removeEventListener(o, u, l ? !1 : c);
    };
    function a(h) {
      var o = h.changedTouches;
      return o && o[0] ? o[0] : h;
    }
    e.util.getPointer = function(h) {
      var o = h.target, u = e.util.getScrollLeftTop(o), c = a(h);
      return {
        x: c.clientX + u.left,
        y: c.clientY + u.top
      };
    }, e.util.isTouchEvent = function(h) {
      return n.indexOf(h.type) > -1 || h.pointerType === "touch";
    };
  }(), function() {
    function l(c, d) {
      var m = c.style;
      if (!m)
        return c;
      if (typeof d == "string")
        return c.style.cssText += ";" + d, d.indexOf("opacity") > -1 ? u(c, d.match(/opacity:\s*(\d?\.?\d*)/)[1]) : c;
      for (var p in d)
        if (p === "opacity")
          u(c, d[p]);
        else {
          var v = p === "float" || p === "cssFloat" ? typeof m.styleFloat > "u" ? "cssFloat" : "styleFloat" : p;
          m.setProperty(v, d[p]);
        }
      return c;
    }
    var n = e.document.createElement("div"), a = typeof n.style.opacity == "string", h = typeof n.style.filter == "string", o = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/, u = function(c) {
      return c;
    };
    a ? u = function(c, d) {
      return c.style.opacity = d, c;
    } : h && (u = function(c, d) {
      var m = c.style;
      return c.currentStyle && !c.currentStyle.hasLayout && (m.zoom = 1), o.test(m.filter) ? (d = d >= 0.9999 ? "" : "alpha(opacity=" + d * 100 + ")", m.filter = m.filter.replace(o, d)) : m.filter += " alpha(opacity=" + d * 100 + ")", c;
    }), e.util.setStyle = l;
  }(), function() {
    var l = Array.prototype.slice;
    function n(w) {
      return typeof w == "string" ? e.document.getElementById(w) : w;
    }
    var a, h = function(w) {
      return l.call(w, 0);
    };
    try {
      a = h(e.document.childNodes) instanceof Array;
    } catch {
    }
    a || (h = function(w) {
      for (var _ = new Array(w.length), S = w.length; S--; )
        _[S] = w[S];
      return _;
    });
    function o(w, _) {
      var S = e.document.createElement(w);
      for (var C in _)
        C === "class" ? S.className = _[C] : C === "for" ? S.htmlFor = _[C] : S.setAttribute(C, _[C]);
      return S;
    }
    function u(w, _) {
      w && (" " + w.className + " ").indexOf(" " + _ + " ") === -1 && (w.className += (w.className ? " " : "") + _);
    }
    function c(w, _, S) {
      return typeof _ == "string" && (_ = o(_, S)), w.parentNode && w.parentNode.replaceChild(_, w), _.appendChild(w), _;
    }
    function d(w) {
      for (var _ = 0, S = 0, C = e.document.documentElement, k = e.document.body || {
        scrollLeft: 0,
        scrollTop: 0
      }; w && (w.parentNode || w.host) && (w = w.parentNode || w.host, w === e.document ? (_ = k.scrollLeft || C.scrollLeft || 0, S = k.scrollTop || C.scrollTop || 0) : (_ += w.scrollLeft || 0, S += w.scrollTop || 0), !(w.nodeType === 1 && w.style.position === "fixed")); )
        ;
      return { left: _, top: S };
    }
    function m(w) {
      var _, S = w && w.ownerDocument, C = { left: 0, top: 0 }, k = { left: 0, top: 0 }, R, B = {
        borderLeftWidth: "left",
        borderTopWidth: "top",
        paddingLeft: "left",
        paddingTop: "top"
      };
      if (!S)
        return k;
      for (var N in B)
        k[B[N]] += parseInt(p(w, N), 10) || 0;
      return _ = S.documentElement, typeof w.getBoundingClientRect < "u" && (C = w.getBoundingClientRect()), R = d(w), {
        left: C.left + R.left - (_.clientLeft || 0) + k.left,
        top: C.top + R.top - (_.clientTop || 0) + k.top
      };
    }
    var p;
    e.document.defaultView && e.document.defaultView.getComputedStyle ? p = function(w, _) {
      var S = e.document.defaultView.getComputedStyle(w, null);
      return S ? S[_] : void 0;
    } : p = function(w, _) {
      var S = w.style[_];
      return !S && w.currentStyle && (S = w.currentStyle[_]), S;
    }, function() {
      var w = e.document.documentElement.style, _ = "userSelect" in w ? "userSelect" : "MozUserSelect" in w ? "MozUserSelect" : "WebkitUserSelect" in w ? "WebkitUserSelect" : "KhtmlUserSelect" in w ? "KhtmlUserSelect" : "";
      function S(k) {
        return typeof k.onselectstart < "u" && (k.onselectstart = e.util.falseFunction), _ ? k.style[_] = "none" : typeof k.unselectable == "string" && (k.unselectable = "on"), k;
      }
      function C(k) {
        return typeof k.onselectstart < "u" && (k.onselectstart = null), _ ? k.style[_] = "" : typeof k.unselectable == "string" && (k.unselectable = ""), k;
      }
      e.util.makeElementUnselectable = S, e.util.makeElementSelectable = C;
    }();
    function v(w) {
      var _ = e.jsdomImplForWrapper(w);
      return _._canvas || _._image;
    }
    function b(w) {
      if (!!e.isLikelyNode) {
        var _ = e.jsdomImplForWrapper(w);
        _ && (_._image = null, _._canvas = null, _._currentSrc = null, _._attributes = null, _._classList = null);
      }
    }
    function y(w, _) {
      w.imageSmoothingEnabled = w.imageSmoothingEnabled || w.webkitImageSmoothingEnabled || w.mozImageSmoothingEnabled || w.msImageSmoothingEnabled || w.oImageSmoothingEnabled, w.imageSmoothingEnabled = _;
    }
    e.util.setImageSmoothing = y, e.util.getById = n, e.util.toArray = h, e.util.addClass = u, e.util.makeElement = o, e.util.wrapElement = c, e.util.getScrollLeftTop = d, e.util.getElementOffset = m, e.util.getNodeCanvas = v, e.util.cleanUpJsdomNode = b;
  }(), function() {
    function l(h, o) {
      return h + (/\?/.test(h) ? "&" : "?") + o;
    }
    function n() {
    }
    function a(h, o) {
      o || (o = {});
      var u = o.method ? o.method.toUpperCase() : "GET", c = o.onComplete || function() {
      }, d = new e.window.XMLHttpRequest(), m = o.body || o.parameters;
      return d.onreadystatechange = function() {
        d.readyState === 4 && (c(d), d.onreadystatechange = n);
      }, u === "GET" && (m = null, typeof o.parameters == "string" && (h = l(h, o.parameters))), d.open(u, h, !0), (u === "POST" || u === "PUT") && d.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), d.send(m), d;
    }
    e.util.request = a;
  }(), e.log = console.log, e.warn = console.warn, function() {
    var l = e.util.object.extend, n = e.util.object.clone, a = [];
    e.util.object.extend(a, {
      cancelAll: function() {
        var v = this.splice(0);
        return v.forEach(function(b) {
          b.cancel();
        }), v;
      },
      cancelByCanvas: function(v) {
        if (!v)
          return [];
        var b = this.filter(function(y) {
          return typeof y.target == "object" && y.target.canvas === v;
        });
        return b.forEach(function(y) {
          y.cancel();
        }), b;
      },
      cancelByTarget: function(v) {
        var b = this.findAnimationsByTarget(v);
        return b.forEach(function(y) {
          y.cancel();
        }), b;
      },
      findAnimationIndex: function(v) {
        return this.indexOf(this.findAnimation(v));
      },
      findAnimation: function(v) {
        return this.find(function(b) {
          return b.cancel === v;
        });
      },
      findAnimationsByTarget: function(v) {
        return v ? this.filter(function(b) {
          return b.target === v;
        }) : [];
      }
    });
    function h() {
      return !1;
    }
    function o(v, b, y, w) {
      return -y * Math.cos(v / w * (Math.PI / 2)) + y + b;
    }
    function u(v) {
      v || (v = {});
      var b = !1, y, w = function() {
        var _ = e.runningAnimations.indexOf(y);
        return _ > -1 && e.runningAnimations.splice(_, 1)[0];
      };
      return y = l(n(v), {
        cancel: function() {
          return b = !0, w();
        },
        currentValue: "startValue" in v ? v.startValue : 0,
        completionRate: 0,
        durationRate: 0
      }), e.runningAnimations.push(y), m(function(_) {
        var S = _ || +new Date(), C = v.duration || 500, k = S + C, R, B = v.onChange || h, N = v.abort || h, K = v.onComplete || h, ee = v.easing || o, G = "startValue" in v ? v.startValue.length > 0 : !1, W = "startValue" in v ? v.startValue : 0, re = "endValue" in v ? v.endValue : 100, ce = v.byValue || (G ? W.map(function(le, T) {
          return re[T] - W[T];
        }) : re - W);
        v.onStart && v.onStart(), function le(T) {
          R = T || +new Date();
          var M = R > k ? C : R - S, A = M / C, D = G ? W.map(function(P, E) {
            return ee(M, W[E], ce[E], C);
          }) : ee(M, W, ce, C), V = Math.abs(G ? (D[0] - W[0]) / ce[0] : (D - W) / ce);
          if (y.currentValue = G ? D.slice() : D, y.completionRate = V, y.durationRate = A, !b) {
            if (N(D, V, A)) {
              w();
              return;
            }
            if (R > k) {
              y.currentValue = G ? re.slice() : re, y.completionRate = 1, y.durationRate = 1, B(G ? re.slice() : re, 1, 1), K(re, 1, 1), w();
              return;
            } else
              B(D, V, A), m(le);
          }
        }(S);
      }), y.cancel;
    }
    var c = e.window.requestAnimationFrame || e.window.webkitRequestAnimationFrame || e.window.mozRequestAnimationFrame || e.window.oRequestAnimationFrame || e.window.msRequestAnimationFrame || function(v) {
      return e.window.setTimeout(v, 1e3 / 60);
    }, d = e.window.cancelAnimationFrame || e.window.clearTimeout;
    function m() {
      return c.apply(e.window, arguments);
    }
    function p() {
      return d.apply(e.window, arguments);
    }
    e.util.animate = u, e.util.requestAnimFrame = m, e.util.cancelAnimFrame = p, e.runningAnimations = a;
  }(), function() {
    function l(a, h, o) {
      var u = "rgba(" + parseInt(a[0] + o * (h[0] - a[0]), 10) + "," + parseInt(a[1] + o * (h[1] - a[1]), 10) + "," + parseInt(a[2] + o * (h[2] - a[2]), 10);
      return u += "," + (a && h ? parseFloat(a[3] + o * (h[3] - a[3])) : 1), u += ")", u;
    }
    function n(a, h, o, u) {
      var c = new e.Color(a).getSource(), d = new e.Color(h).getSource(), m = u.onComplete, p = u.onChange;
      return u = u || {}, e.util.animate(e.util.object.extend(u, {
        duration: o || 500,
        startValue: c,
        endValue: d,
        byValue: d,
        easing: function(v, b, y, w) {
          var _ = u.colorEasing ? u.colorEasing(v, w) : 1 - Math.cos(v / w * (Math.PI / 2));
          return l(b, y, _);
        },
        onComplete: function(v, b, y) {
          if (m)
            return m(
              l(d, d, 0),
              b,
              y
            );
        },
        onChange: function(v, b, y) {
          if (p) {
            if (Array.isArray(v))
              return p(
                l(v, v, 0),
                b,
                y
              );
            p(v, b, y);
          }
        }
      }));
    }
    e.util.animateColor = n;
  }(), function() {
    function l(T, M, A, D) {
      return T < Math.abs(M) ? (T = M, D = A / 4) : M === 0 && T === 0 ? D = A / (2 * Math.PI) * Math.asin(1) : D = A / (2 * Math.PI) * Math.asin(M / T), { a: T, c: M, p: A, s: D };
    }
    function n(T, M, A) {
      return T.a * Math.pow(2, 10 * (M -= 1)) * Math.sin((M * A - T.s) * (2 * Math.PI) / T.p);
    }
    function a(T, M, A, D) {
      return A * ((T = T / D - 1) * T * T + 1) + M;
    }
    function h(T, M, A, D) {
      return T /= D / 2, T < 1 ? A / 2 * T * T * T + M : A / 2 * ((T -= 2) * T * T + 2) + M;
    }
    function o(T, M, A, D) {
      return A * (T /= D) * T * T * T + M;
    }
    function u(T, M, A, D) {
      return -A * ((T = T / D - 1) * T * T * T - 1) + M;
    }
    function c(T, M, A, D) {
      return T /= D / 2, T < 1 ? A / 2 * T * T * T * T + M : -A / 2 * ((T -= 2) * T * T * T - 2) + M;
    }
    function d(T, M, A, D) {
      return A * (T /= D) * T * T * T * T + M;
    }
    function m(T, M, A, D) {
      return A * ((T = T / D - 1) * T * T * T * T + 1) + M;
    }
    function p(T, M, A, D) {
      return T /= D / 2, T < 1 ? A / 2 * T * T * T * T * T + M : A / 2 * ((T -= 2) * T * T * T * T + 2) + M;
    }
    function v(T, M, A, D) {
      return -A * Math.cos(T / D * (Math.PI / 2)) + A + M;
    }
    function b(T, M, A, D) {
      return A * Math.sin(T / D * (Math.PI / 2)) + M;
    }
    function y(T, M, A, D) {
      return -A / 2 * (Math.cos(Math.PI * T / D) - 1) + M;
    }
    function w(T, M, A, D) {
      return T === 0 ? M : A * Math.pow(2, 10 * (T / D - 1)) + M;
    }
    function _(T, M, A, D) {
      return T === D ? M + A : A * (-Math.pow(2, -10 * T / D) + 1) + M;
    }
    function S(T, M, A, D) {
      return T === 0 ? M : T === D ? M + A : (T /= D / 2, T < 1 ? A / 2 * Math.pow(2, 10 * (T - 1)) + M : A / 2 * (-Math.pow(2, -10 * --T) + 2) + M);
    }
    function C(T, M, A, D) {
      return -A * (Math.sqrt(1 - (T /= D) * T) - 1) + M;
    }
    function k(T, M, A, D) {
      return A * Math.sqrt(1 - (T = T / D - 1) * T) + M;
    }
    function R(T, M, A, D) {
      return T /= D / 2, T < 1 ? -A / 2 * (Math.sqrt(1 - T * T) - 1) + M : A / 2 * (Math.sqrt(1 - (T -= 2) * T) + 1) + M;
    }
    function B(T, M, A, D) {
      var V = 1.70158, P = 0, E = A;
      if (T === 0)
        return M;
      if (T /= D, T === 1)
        return M + A;
      P || (P = D * 0.3);
      var L = l(E, A, P, V);
      return -n(L, T, D) + M;
    }
    function N(T, M, A, D) {
      var V = 1.70158, P = 0, E = A;
      if (T === 0)
        return M;
      if (T /= D, T === 1)
        return M + A;
      P || (P = D * 0.3);
      var L = l(E, A, P, V);
      return L.a * Math.pow(2, -10 * T) * Math.sin((T * D - L.s) * (2 * Math.PI) / L.p) + L.c + M;
    }
    function K(T, M, A, D) {
      var V = 1.70158, P = 0, E = A;
      if (T === 0)
        return M;
      if (T /= D / 2, T === 2)
        return M + A;
      P || (P = D * (0.3 * 1.5));
      var L = l(E, A, P, V);
      return T < 1 ? -0.5 * n(L, T, D) + M : L.a * Math.pow(2, -10 * (T -= 1)) * Math.sin((T * D - L.s) * (2 * Math.PI) / L.p) * 0.5 + L.c + M;
    }
    function ee(T, M, A, D, V) {
      return V === void 0 && (V = 1.70158), A * (T /= D) * T * ((V + 1) * T - V) + M;
    }
    function G(T, M, A, D, V) {
      return V === void 0 && (V = 1.70158), A * ((T = T / D - 1) * T * ((V + 1) * T + V) + 1) + M;
    }
    function W(T, M, A, D, V) {
      return V === void 0 && (V = 1.70158), T /= D / 2, T < 1 ? A / 2 * (T * T * (((V *= 1.525) + 1) * T - V)) + M : A / 2 * ((T -= 2) * T * (((V *= 1.525) + 1) * T + V) + 2) + M;
    }
    function re(T, M, A, D) {
      return A - ce(D - T, 0, A, D) + M;
    }
    function ce(T, M, A, D) {
      return (T /= D) < 1 / 2.75 ? A * (7.5625 * T * T) + M : T < 2 / 2.75 ? A * (7.5625 * (T -= 1.5 / 2.75) * T + 0.75) + M : T < 2.5 / 2.75 ? A * (7.5625 * (T -= 2.25 / 2.75) * T + 0.9375) + M : A * (7.5625 * (T -= 2.625 / 2.75) * T + 0.984375) + M;
    }
    function le(T, M, A, D) {
      return T < D / 2 ? re(T * 2, 0, A, D) * 0.5 + M : ce(T * 2 - D, 0, A, D) * 0.5 + A * 0.5 + M;
    }
    e.util.ease = {
      easeInQuad: function(T, M, A, D) {
        return A * (T /= D) * T + M;
      },
      easeOutQuad: function(T, M, A, D) {
        return -A * (T /= D) * (T - 2) + M;
      },
      easeInOutQuad: function(T, M, A, D) {
        return T /= D / 2, T < 1 ? A / 2 * T * T + M : -A / 2 * (--T * (T - 2) - 1) + M;
      },
      easeInCubic: function(T, M, A, D) {
        return A * (T /= D) * T * T + M;
      },
      easeOutCubic: a,
      easeInOutCubic: h,
      easeInQuart: o,
      easeOutQuart: u,
      easeInOutQuart: c,
      easeInQuint: d,
      easeOutQuint: m,
      easeInOutQuint: p,
      easeInSine: v,
      easeOutSine: b,
      easeInOutSine: y,
      easeInExpo: w,
      easeOutExpo: _,
      easeInOutExpo: S,
      easeInCirc: C,
      easeOutCirc: k,
      easeInOutCirc: R,
      easeInElastic: B,
      easeOutElastic: N,
      easeInOutElastic: K,
      easeInBack: ee,
      easeOutBack: G,
      easeInOutBack: W,
      easeInBounce: re,
      easeOutBounce: ce,
      easeInOutBounce: le
    };
  }(), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.util.object.clone, o = n.util.toFixed, u = n.util.parseUnit, c = n.util.multiplyTransformMatrices, d = [
      "path",
      "circle",
      "polygon",
      "polyline",
      "ellipse",
      "rect",
      "line",
      "image",
      "text"
    ], m = ["symbol", "image", "marker", "pattern", "view", "svg"], p = ["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"], v = ["symbol", "g", "a", "svg", "clipPath", "defs"], b = {
      cx: "left",
      x: "left",
      r: "radius",
      cy: "top",
      y: "top",
      display: "visible",
      visibility: "visible",
      transform: "transformMatrix",
      "fill-opacity": "fillOpacity",
      "fill-rule": "fillRule",
      "font-family": "fontFamily",
      "font-size": "fontSize",
      "font-style": "fontStyle",
      "font-weight": "fontWeight",
      "letter-spacing": "charSpacing",
      "paint-order": "paintFirst",
      "stroke-dasharray": "strokeDashArray",
      "stroke-dashoffset": "strokeDashOffset",
      "stroke-linecap": "strokeLineCap",
      "stroke-linejoin": "strokeLineJoin",
      "stroke-miterlimit": "strokeMiterLimit",
      "stroke-opacity": "strokeOpacity",
      "stroke-width": "strokeWidth",
      "text-decoration": "textDecoration",
      "text-anchor": "textAnchor",
      opacity: "opacity",
      "clip-path": "clipPath",
      "clip-rule": "clipRule",
      "vector-effect": "strokeUniform",
      "image-rendering": "imageSmoothing"
    }, y = {
      stroke: "strokeOpacity",
      fill: "fillOpacity"
    }, w = "font-size", _ = "clip-path";
    n.svgValidTagNamesRegEx = k(d), n.svgViewBoxElementsRegEx = k(m), n.svgInvalidAncestorsRegEx = k(p), n.svgValidParentsRegEx = k(v), n.cssRules = {}, n.gradientDefs = {}, n.clipPaths = {};
    function S(P) {
      return P in b ? b[P] : P;
    }
    function C(P, E, L, j) {
      var Y = Array.isArray(E), H;
      if ((P === "fill" || P === "stroke") && E === "none")
        E = "";
      else {
        if (P === "strokeUniform")
          return E === "non-scaling-stroke";
        if (P === "strokeDashArray")
          E === "none" ? E = null : E = E.replace(/,/g, " ").split(/\s+/).map(parseFloat);
        else if (P === "transformMatrix")
          L && L.transformMatrix ? E = c(
            L.transformMatrix,
            n.parseTransformAttribute(E)
          ) : E = n.parseTransformAttribute(E);
        else if (P === "visible")
          E = E !== "none" && E !== "hidden", L && L.visible === !1 && (E = !1);
        else if (P === "opacity")
          E = parseFloat(E), L && typeof L.opacity < "u" && (E *= L.opacity);
        else if (P === "textAnchor")
          E = E === "start" ? "left" : E === "end" ? "right" : "center";
        else if (P === "charSpacing")
          H = u(E, j) / j * 1e3;
        else if (P === "paintFirst") {
          var Z = E.indexOf("fill"), Q = E.indexOf("stroke"), E = "fill";
          (Z > -1 && Q > -1 && Q < Z || Z === -1 && Q > -1) && (E = "stroke");
        } else {
          if (P === "href" || P === "xlink:href" || P === "font")
            return E;
          if (P === "imageSmoothing")
            return E === "optimizeQuality";
          H = Y ? E.map(u) : u(E, j);
        }
      }
      return !Y && isNaN(H) ? E : H;
    }
    function k(P) {
      return new RegExp("^(" + P.join("|") + ")\\b", "i");
    }
    function R(P) {
      for (var E in y)
        if (!(typeof P[y[E]] > "u" || P[E] === "")) {
          if (typeof P[E] > "u") {
            if (!n.Object.prototype[E])
              continue;
            P[E] = n.Object.prototype[E];
          }
          if (P[E].indexOf("url(") !== 0) {
            var L = new n.Color(P[E]);
            P[E] = L.setAlpha(o(L.getAlpha() * P[y[E]], 2)).toRgba();
          }
        }
      return P;
    }
    function B(P, E) {
      var L, j = [], Y, H, Z;
      for (H = 0, Z = E.length; H < Z; H++)
        L = E[H], Y = P.getElementsByTagName(L), j = j.concat(Array.prototype.slice.call(Y));
      return j;
    }
    n.parseTransformAttribute = function() {
      function P(X, fe) {
        var we = n.util.cos(fe[0]), Ee = n.util.sin(fe[0]), Re = 0, Pe = 0;
        fe.length === 3 && (Re = fe[1], Pe = fe[2]), X[0] = we, X[1] = Ee, X[2] = -Ee, X[3] = we, X[4] = Re - (we * Re - Ee * Pe), X[5] = Pe - (Ee * Re + we * Pe);
      }
      function E(X, fe) {
        var we = fe[0], Ee = fe.length === 2 ? fe[1] : fe[0];
        X[0] = we, X[3] = Ee;
      }
      function L(X, fe, we) {
        X[we] = Math.tan(n.util.degreesToRadians(fe[0]));
      }
      function j(X, fe) {
        X[4] = fe[0], fe.length === 2 && (X[5] = fe[1]);
      }
      var Y = n.iMatrix, H = n.reNum, Z = n.commaWsp, Q = "(?:(skewX)\\s*\\(\\s*(" + H + ")\\s*\\))", te = "(?:(skewY)\\s*\\(\\s*(" + H + ")\\s*\\))", $ = "(?:(rotate)\\s*\\(\\s*(" + H + ")(?:" + Z + "(" + H + ")" + Z + "(" + H + "))?\\s*\\))", z = "(?:(scale)\\s*\\(\\s*(" + H + ")(?:" + Z + "(" + H + "))?\\s*\\))", q = "(?:(translate)\\s*\\(\\s*(" + H + ")(?:" + Z + "(" + H + "))?\\s*\\))", J = "(?:(matrix)\\s*\\(\\s*(" + H + ")" + Z + "(" + H + ")" + Z + "(" + H + ")" + Z + "(" + H + ")" + Z + "(" + H + ")" + Z + "(" + H + ")\\s*\\))", F = "(?:" + J + "|" + q + "|" + z + "|" + $ + "|" + Q + "|" + te + ")", U = "(?:" + F + "(?:" + Z + "*" + F + ")*)", se = "^\\s*(?:" + U + "?)\\s*$", be = new RegExp(se), de = new RegExp(F, "g");
      return function(X) {
        var fe = Y.concat(), we = [];
        if (!X || X && !be.test(X))
          return fe;
        X.replace(de, function(Re) {
          var Pe = new RegExp(F).exec(Re).filter(function(gi) {
            return !!gi;
          }), tt = Pe[1], Ve = Pe.slice(2).map(parseFloat);
          switch (tt) {
            case "translate":
              j(fe, Ve);
              break;
            case "rotate":
              Ve[0] = n.util.degreesToRadians(Ve[0]), P(fe, Ve);
              break;
            case "scale":
              E(fe, Ve);
              break;
            case "skewX":
              L(fe, Ve, 2);
              break;
            case "skewY":
              L(fe, Ve, 1);
              break;
            case "matrix":
              fe = Ve;
              break;
          }
          we.push(fe.concat()), fe = Y.concat();
        });
        for (var Ee = we[0]; we.length > 1; )
          we.shift(), Ee = n.util.multiplyTransformMatrices(Ee, we[0]);
        return Ee;
      };
    }();
    function N(P, E) {
      var L, j;
      P.replace(/;\s*$/, "").split(";").forEach(function(Y) {
        var H = Y.split(":");
        L = H[0].trim().toLowerCase(), j = H[1].trim(), E[L] = j;
      });
    }
    function K(P, E) {
      var L, j;
      for (var Y in P)
        typeof P[Y] > "u" || (L = Y.toLowerCase(), j = P[Y], E[L] = j);
    }
    function ee(P, E) {
      var L = {};
      for (var j in n.cssRules[E])
        if (G(P, j.split(" ")))
          for (var Y in n.cssRules[E][j])
            L[Y] = n.cssRules[E][j][Y];
      return L;
    }
    function G(P, E) {
      var L, j = !0;
      return L = re(P, E.pop()), L && E.length && (j = W(P, E)), L && j && E.length === 0;
    }
    function W(P, E) {
      for (var L, j = !0; P.parentNode && P.parentNode.nodeType === 1 && E.length; )
        j && (L = E.pop()), P = P.parentNode, j = re(P, L);
      return E.length === 0;
    }
    function re(P, E) {
      var L = P.nodeName, j = P.getAttribute("class"), Y = P.getAttribute("id"), H, Z;
      if (H = new RegExp("^" + L, "i"), E = E.replace(H, ""), Y && E.length && (H = new RegExp("#" + Y + "(?![a-zA-Z\\-]+)", "i"), E = E.replace(H, "")), j && E.length)
        for (j = j.split(" "), Z = j.length; Z--; )
          H = new RegExp("\\." + j[Z] + "(?![a-zA-Z\\-]+)", "i"), E = E.replace(H, "");
      return E.length === 0;
    }
    function ce(P, E) {
      var L;
      if (P.getElementById && (L = P.getElementById(E)), L)
        return L;
      var j, Y, H, Z = P.getElementsByTagName("*");
      for (Y = 0, H = Z.length; Y < H; Y++)
        if (j = Z[Y], E === j.getAttribute("id"))
          return j;
    }
    function le(P) {
      for (var E = B(P, ["use", "svg:use"]), L = 0; E.length && L < E.length; ) {
        var j = E[L], Y = j.getAttribute("xlink:href") || j.getAttribute("href");
        if (Y === null)
          return;
        var H = Y.slice(1), Z = j.getAttribute("x") || 0, Q = j.getAttribute("y") || 0, te = ce(P, H).cloneNode(!0), $ = (te.getAttribute("transform") || "") + " translate(" + Z + ", " + Q + ")", z, q = E.length, J, F, U, se, be = n.svgNS;
        if (M(te), /^svg$/i.test(te.nodeName)) {
          var de = te.ownerDocument.createElementNS(be, "g");
          for (F = 0, U = te.attributes, se = U.length; F < se; F++)
            J = U.item(F), de.setAttributeNS(be, J.nodeName, J.nodeValue);
          for (; te.firstChild; )
            de.appendChild(te.firstChild);
          te = de;
        }
        for (F = 0, U = j.attributes, se = U.length; F < se; F++)
          J = U.item(F), !(J.nodeName === "x" || J.nodeName === "y" || J.nodeName === "xlink:href" || J.nodeName === "href") && (J.nodeName === "transform" ? $ = J.nodeValue + " " + $ : te.setAttribute(J.nodeName, J.nodeValue));
        te.setAttribute("transform", $), te.setAttribute("instantiated_by_use", "1"), te.removeAttribute("id"), z = j.parentNode, z.replaceChild(te, j), E.length === q && L++;
      }
    }
    var T = new RegExp(
      "^\\s*(" + n.reNum + "+)\\s*,?\\s*(" + n.reNum + "+)\\s*,?\\s*(" + n.reNum + "+)\\s*,?\\s*(" + n.reNum + "+)\\s*$"
    );
    function M(P) {
      if (!n.svgViewBoxElementsRegEx.test(P.nodeName))
        return {};
      var E = P.getAttribute("viewBox"), L = 1, j = 1, Y = 0, H = 0, Z, Q, te, $, z = P.getAttribute("width"), q = P.getAttribute("height"), J = P.getAttribute("x") || 0, F = P.getAttribute("y") || 0, U = P.getAttribute("preserveAspectRatio") || "", se = !E || !(E = E.match(T)), be = !z || !q || z === "100%" || q === "100%", de = se && be, X = {}, fe = "", we = 0, Ee = 0;
      if (X.width = 0, X.height = 0, X.toBeParsed = de, se && (J || F) && P.parentNode && P.parentNode.nodeName !== "#document" && (fe = " translate(" + u(J) + " " + u(F) + ") ", te = (P.getAttribute("transform") || "") + fe, P.setAttribute("transform", te), P.removeAttribute("x"), P.removeAttribute("y")), de)
        return X;
      if (se)
        return X.width = u(z), X.height = u(q), X;
      if (Y = -parseFloat(E[1]), H = -parseFloat(E[2]), Z = parseFloat(E[3]), Q = parseFloat(E[4]), X.minX = Y, X.minY = H, X.viewBoxWidth = Z, X.viewBoxHeight = Q, be ? (X.width = Z, X.height = Q) : (X.width = u(z), X.height = u(q), L = X.width / Z, j = X.height / Q), U = n.util.parsePreserveAspectRatioAttribute(U), U.alignX !== "none" && (U.meetOrSlice === "meet" && (j = L = L > j ? j : L), U.meetOrSlice === "slice" && (j = L = L > j ? L : j), we = X.width - Z * L, Ee = X.height - Q * L, U.alignX === "Mid" && (we /= 2), U.alignY === "Mid" && (Ee /= 2), U.alignX === "Min" && (we = 0), U.alignY === "Min" && (Ee = 0)), L === 1 && j === 1 && Y === 0 && H === 0 && J === 0 && F === 0)
        return X;
      if ((J || F) && P.parentNode.nodeName !== "#document" && (fe = " translate(" + u(J) + " " + u(F) + ") "), te = fe + " matrix(" + L + " 0 0 " + j + " " + (Y * L + we) + " " + (H * j + Ee) + ") ", P.nodeName === "svg") {
        for ($ = P.ownerDocument.createElementNS(n.svgNS, "g"); P.firstChild; )
          $.appendChild(P.firstChild);
        P.appendChild($);
      } else
        $ = P, $.removeAttribute("x"), $.removeAttribute("y"), te = $.getAttribute("transform") + te;
      return $.setAttribute("transform", te), X;
    }
    function A(P, E) {
      for (; P && (P = P.parentNode); )
        if (P.nodeName && E.test(P.nodeName.replace("svg:", "")) && !P.getAttribute("instantiated_by_use"))
          return !0;
      return !1;
    }
    n.parseSVGDocument = function(P, E, L, j) {
      if (!!P) {
        le(P);
        var Y = n.Object.__uid++, H, Z, Q = M(P), te = n.util.toArray(P.getElementsByTagName("*"));
        if (Q.crossOrigin = j && j.crossOrigin, Q.svgUid = Y, te.length === 0 && n.isLikelyNode) {
          te = P.selectNodes('//*[name(.)!="svg"]');
          var $ = [];
          for (H = 0, Z = te.length; H < Z; H++)
            $[H] = te[H];
          te = $;
        }
        var z = te.filter(function(J) {
          return M(J), n.svgValidTagNamesRegEx.test(J.nodeName.replace("svg:", "")) && !A(J, n.svgInvalidAncestorsRegEx);
        });
        if (!z || z && !z.length) {
          E && E([], {});
          return;
        }
        var q = {};
        te.filter(function(J) {
          return J.nodeName.replace("svg:", "") === "clipPath";
        }).forEach(function(J) {
          var F = J.getAttribute("id");
          q[F] = n.util.toArray(J.getElementsByTagName("*")).filter(function(U) {
            return n.svgValidTagNamesRegEx.test(U.nodeName.replace("svg:", ""));
          });
        }), n.gradientDefs[Y] = n.getGradientDefs(P), n.cssRules[Y] = n.getCSSRules(P), n.clipPaths[Y] = q, n.parseElements(z, function(J, F) {
          E && (E(J, Q, F, te), delete n.gradientDefs[Y], delete n.cssRules[Y], delete n.clipPaths[Y]);
        }, h(Q), L, j);
      }
    };
    function D(P, E) {
      var L = ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"], j = "xlink:href", Y = E.getAttribute(j).slice(1), H = ce(P, Y);
      if (H && H.getAttribute(j) && D(P, H), L.forEach(function(Q) {
        H && !E.hasAttribute(Q) && H.hasAttribute(Q) && E.setAttribute(Q, H.getAttribute(Q));
      }), !E.children.length)
        for (var Z = H.cloneNode(!0); Z.firstChild; )
          E.appendChild(Z.firstChild);
      E.removeAttribute(j);
    }
    var V = new RegExp(
      "(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + n.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + n.reNum + "))?\\s+(.*)"
    );
    a(n, {
      parseFontDeclaration: function(P, E) {
        var L = P.match(V);
        if (!!L) {
          var j = L[1], Y = L[3], H = L[4], Z = L[5], Q = L[6];
          j && (E.fontStyle = j), Y && (E.fontWeight = isNaN(parseFloat(Y)) ? Y : parseFloat(Y)), H && (E.fontSize = u(H)), Q && (E.fontFamily = Q), Z && (E.lineHeight = Z === "normal" ? 1 : Z);
        }
      },
      getGradientDefs: function(P) {
        var E = [
          "linearGradient",
          "radialGradient",
          "svg:linearGradient",
          "svg:radialGradient"
        ], L = B(P, E), j, Y = 0, H = {};
        for (Y = L.length; Y--; )
          j = L[Y], j.getAttribute("xlink:href") && D(P, j), H[j.getAttribute("id")] = j;
        return H;
      },
      parseAttributes: function(P, E, L) {
        if (!!P) {
          var j, Y = {}, H, Z;
          typeof L > "u" && (L = P.getAttribute("svgUid")), P.parentNode && n.svgValidParentsRegEx.test(P.parentNode.nodeName) && (Y = n.parseAttributes(P.parentNode, E, L));
          var Q = E.reduce(function(U, se) {
            return j = P.getAttribute(se), j && (U[se] = j), U;
          }, {}), te = a(
            ee(P, L),
            n.parseStyleAttribute(P)
          );
          Q = a(
            Q,
            te
          ), te[_] && P.setAttribute(_, te[_]), H = Z = Y.fontSize || n.Text.DEFAULT_SVG_FONT_SIZE, Q[w] && (Q[w] = H = u(Q[w], Z));
          var $, z, q = {};
          for (var J in Q)
            $ = S(J), z = C($, Q[J], Y, H), q[$] = z;
          q && q.font && n.parseFontDeclaration(q.font, q);
          var F = a(Y, q);
          return n.svgValidParentsRegEx.test(P.nodeName) ? F : R(F);
        }
      },
      parseElements: function(P, E, L, j, Y) {
        new n.ElementsParser(P, E, L, j, Y).parse();
      },
      parseStyleAttribute: function(P) {
        var E = {}, L = P.getAttribute("style");
        return L && (typeof L == "string" ? N(L, E) : K(L, E)), E;
      },
      parsePointsAttribute: function(P) {
        if (!P)
          return null;
        P = P.replace(/,/g, " ").trim(), P = P.split(/\s+/);
        var E = [], L, j;
        for (L = 0, j = P.length; L < j; L += 2)
          E.push({
            x: parseFloat(P[L]),
            y: parseFloat(P[L + 1])
          });
        return E;
      },
      getCSSRules: function(P) {
        var E = P.getElementsByTagName("style"), L, j, Y = {}, H;
        for (L = 0, j = E.length; L < j; L++) {
          var Z = E[L].textContent;
          Z = Z.replace(/\/\*[\s\S]*?\*\//g, ""), Z.trim() !== "" && (H = Z.split("}"), H = H.filter(function(Q) {
            return Q.trim();
          }), H.forEach(function(Q) {
            var te = Q.split("{"), $ = {}, z = te[1].trim(), q = z.split(";").filter(function(se) {
              return se.trim();
            });
            for (L = 0, j = q.length; L < j; L++) {
              var J = q[L].split(":"), F = J[0].trim(), U = J[1].trim();
              $[F] = U;
            }
            Q = te[0].trim(), Q.split(",").forEach(function(se) {
              se = se.replace(/^svg/i, "").trim(), se !== "" && (Y[se] ? n.util.object.extend(Y[se], $) : Y[se] = n.util.object.clone($));
            });
          }));
        }
        return Y;
      },
      loadSVGFromURL: function(P, E, L, j) {
        P = P.replace(/^\n\s*/, "").trim(), new n.util.request(P, {
          method: "get",
          onComplete: Y
        });
        function Y(H) {
          var Z = H.responseXML;
          if (!Z || !Z.documentElement)
            return E && E(null), !1;
          n.parseSVGDocument(Z.documentElement, function(Q, te, $, z) {
            E && E(Q, te, $, z);
          }, L, j);
        }
      },
      loadSVGFromString: function(P, E, L, j) {
        var Y = new n.window.DOMParser(), H = Y.parseFromString(P.trim(), "text/xml");
        n.parseSVGDocument(H.documentElement, function(Z, Q, te, $) {
          E(Z, Q, te, $);
        }, L, j);
      }
    });
  }(t), e.ElementsParser = function(l, n, a, h, o, u) {
    this.elements = l, this.callback = n, this.options = a, this.reviver = h, this.svgUid = a && a.svgUid || 0, this.parsingOptions = o, this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g, this.doc = u;
  }, function(l) {
    l.parse = function() {
      this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects();
    }, l.createObjects = function() {
      var n = this;
      this.elements.forEach(function(a, h) {
        a.setAttribute("svgUid", n.svgUid), n.createObject(a, h);
      });
    }, l.findTag = function(n) {
      return e[e.util.string.capitalize(n.tagName.replace("svg:", ""))];
    }, l.createObject = function(n, a) {
      var h = this.findTag(n);
      if (h && h.fromElement)
        try {
          h.fromElement(n, this.createCallback(a, n), this.options);
        } catch (o) {
          e.log(o);
        }
      else
        this.checkIfDone();
    }, l.createCallback = function(n, a) {
      var h = this;
      return function(o) {
        var u;
        h.resolveGradient(o, a, "fill"), h.resolveGradient(o, a, "stroke"), o instanceof e.Image && o._originalElement && (u = o.parsePreserveAspectRatioAttribute(a)), o._removeTransformMatrix(u), h.resolveClipPath(o, a), h.reviver && h.reviver(a, o), h.instances[n] = o, h.checkIfDone();
      };
    }, l.extractPropertyDefinition = function(n, a, h) {
      var o = n[a], u = this.regexUrl;
      if (!!u.test(o)) {
        u.lastIndex = 0;
        var c = u.exec(o)[1];
        return u.lastIndex = 0, e[h][this.svgUid][c];
      }
    }, l.resolveGradient = function(n, a, h) {
      var o = this.extractPropertyDefinition(n, h, "gradientDefs");
      if (o) {
        var u = a.getAttribute(h + "-opacity"), c = e.Gradient.fromElement(o, n, u, this.options);
        n.set(h, c);
      }
    }, l.createClipPathCallback = function(n, a) {
      return function(h) {
        h._removeTransformMatrix(), h.fillRule = h.clipRule, a.push(h);
      };
    }, l.resolveClipPath = function(n, a) {
      var h = this.extractPropertyDefinition(n, "clipPath", "clipPaths"), o, u, c, d, m, p;
      if (h) {
        d = [], c = e.util.invertTransform(n.calcTransformMatrix());
        for (var v = h[0].parentNode, b = a; b.parentNode && b.getAttribute("clip-path") !== n.clipPath; )
          b = b.parentNode;
        b.parentNode.appendChild(v);
        for (var y = 0; y < h.length; y++)
          o = h[y], u = this.findTag(o), u.fromElement(
            o,
            this.createClipPathCallback(n, d),
            this.options
          );
        d.length === 1 ? h = d[0] : h = new e.Group(d), m = e.util.multiplyTransformMatrices(
          c,
          h.calcTransformMatrix()
        ), h.clipPath && this.resolveClipPath(h, b);
        var p = e.util.qrDecompose(m);
        h.flipX = !1, h.flipY = !1, h.set("scaleX", p.scaleX), h.set("scaleY", p.scaleY), h.angle = p.angle, h.skewX = p.skewX, h.skewY = 0, h.setPositionByOrigin({ x: p.translateX, y: p.translateY }, "center", "center"), n.clipPath = h;
      } else
        delete n.clipPath;
    }, l.checkIfDone = function() {
      --this.numElements === 0 && (this.instances = this.instances.filter(function(n) {
        return n != null;
      }), this.callback(this.instances, this.elements));
    };
  }(e.ElementsParser.prototype), function(l) {
    var n = l.fabric || (l.fabric = {});
    if (n.Point) {
      n.warn("fabric.Point is already defined");
      return;
    }
    n.Point = a;
    function a(h, o) {
      this.x = h, this.y = o;
    }
    a.prototype = {
      type: "point",
      constructor: a,
      add: function(h) {
        return new a(this.x + h.x, this.y + h.y);
      },
      addEquals: function(h) {
        return this.x += h.x, this.y += h.y, this;
      },
      scalarAdd: function(h) {
        return new a(this.x + h, this.y + h);
      },
      scalarAddEquals: function(h) {
        return this.x += h, this.y += h, this;
      },
      subtract: function(h) {
        return new a(this.x - h.x, this.y - h.y);
      },
      subtractEquals: function(h) {
        return this.x -= h.x, this.y -= h.y, this;
      },
      scalarSubtract: function(h) {
        return new a(this.x - h, this.y - h);
      },
      scalarSubtractEquals: function(h) {
        return this.x -= h, this.y -= h, this;
      },
      multiply: function(h) {
        return new a(this.x * h, this.y * h);
      },
      multiplyEquals: function(h) {
        return this.x *= h, this.y *= h, this;
      },
      divide: function(h) {
        return new a(this.x / h, this.y / h);
      },
      divideEquals: function(h) {
        return this.x /= h, this.y /= h, this;
      },
      eq: function(h) {
        return this.x === h.x && this.y === h.y;
      },
      lt: function(h) {
        return this.x < h.x && this.y < h.y;
      },
      lte: function(h) {
        return this.x <= h.x && this.y <= h.y;
      },
      gt: function(h) {
        return this.x > h.x && this.y > h.y;
      },
      gte: function(h) {
        return this.x >= h.x && this.y >= h.y;
      },
      lerp: function(h, o) {
        return typeof o > "u" && (o = 0.5), o = Math.max(Math.min(1, o), 0), new a(this.x + (h.x - this.x) * o, this.y + (h.y - this.y) * o);
      },
      distanceFrom: function(h) {
        var o = this.x - h.x, u = this.y - h.y;
        return Math.sqrt(o * o + u * u);
      },
      midPointFrom: function(h) {
        return this.lerp(h);
      },
      min: function(h) {
        return new a(Math.min(this.x, h.x), Math.min(this.y, h.y));
      },
      max: function(h) {
        return new a(Math.max(this.x, h.x), Math.max(this.y, h.y));
      },
      toString: function() {
        return this.x + "," + this.y;
      },
      setXY: function(h, o) {
        return this.x = h, this.y = o, this;
      },
      setX: function(h) {
        return this.x = h, this;
      },
      setY: function(h) {
        return this.y = h, this;
      },
      setFromPoint: function(h) {
        return this.x = h.x, this.y = h.y, this;
      },
      swap: function(h) {
        var o = this.x, u = this.y;
        this.x = h.x, this.y = h.y, h.x = o, h.y = u;
      },
      clone: function() {
        return new a(this.x, this.y);
      }
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {});
    if (n.Intersection) {
      n.warn("fabric.Intersection is already defined");
      return;
    }
    function a(h) {
      this.status = h, this.points = [];
    }
    n.Intersection = a, n.Intersection.prototype = {
      constructor: a,
      appendPoint: function(h) {
        return this.points.push(h), this;
      },
      appendPoints: function(h) {
        return this.points = this.points.concat(h), this;
      }
    }, n.Intersection.intersectLineLine = function(h, o, u, c) {
      var d, m = (c.x - u.x) * (h.y - u.y) - (c.y - u.y) * (h.x - u.x), p = (o.x - h.x) * (h.y - u.y) - (o.y - h.y) * (h.x - u.x), v = (c.y - u.y) * (o.x - h.x) - (c.x - u.x) * (o.y - h.y);
      if (v !== 0) {
        var b = m / v, y = p / v;
        0 <= b && b <= 1 && 0 <= y && y <= 1 ? (d = new a("Intersection"), d.appendPoint(new n.Point(h.x + b * (o.x - h.x), h.y + b * (o.y - h.y)))) : d = new a();
      } else
        m === 0 || p === 0 ? d = new a("Coincident") : d = new a("Parallel");
      return d;
    }, n.Intersection.intersectLinePolygon = function(h, o, u) {
      var c = new a(), d = u.length, m, p, v, b;
      for (b = 0; b < d; b++)
        m = u[b], p = u[(b + 1) % d], v = a.intersectLineLine(h, o, m, p), c.appendPoints(v.points);
      return c.points.length > 0 && (c.status = "Intersection"), c;
    }, n.Intersection.intersectPolygonPolygon = function(h, o) {
      var u = new a(), c = h.length, d;
      for (d = 0; d < c; d++) {
        var m = h[d], p = h[(d + 1) % c], v = a.intersectLinePolygon(m, p, o);
        u.appendPoints(v.points);
      }
      return u.points.length > 0 && (u.status = "Intersection"), u;
    }, n.Intersection.intersectPolygonRectangle = function(h, o, u) {
      var c = o.min(u), d = o.max(u), m = new n.Point(d.x, c.y), p = new n.Point(c.x, d.y), v = a.intersectLinePolygon(c, m, h), b = a.intersectLinePolygon(m, d, h), y = a.intersectLinePolygon(d, p, h), w = a.intersectLinePolygon(p, c, h), _ = new a();
      return _.appendPoints(v.points), _.appendPoints(b.points), _.appendPoints(y.points), _.appendPoints(w.points), _.points.length > 0 && (_.status = "Intersection"), _;
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {});
    if (n.Color) {
      n.warn("fabric.Color is already defined.");
      return;
    }
    function a(o) {
      o ? this._tryParsingColor(o) : this.setSource([0, 0, 0, 1]);
    }
    n.Color = a, n.Color.prototype = {
      _tryParsingColor: function(o) {
        var u;
        o in a.colorNameMap && (o = a.colorNameMap[o]), o === "transparent" && (u = [255, 255, 255, 0]), u || (u = a.sourceFromHex(o)), u || (u = a.sourceFromRgb(o)), u || (u = a.sourceFromHsl(o)), u || (u = [0, 0, 0, 1]), u && this.setSource(u);
      },
      _rgbToHsl: function(o, u, c) {
        o /= 255, u /= 255, c /= 255;
        var d, m, p, v = n.util.array.max([o, u, c]), b = n.util.array.min([o, u, c]);
        if (p = (v + b) / 2, v === b)
          d = m = 0;
        else {
          var y = v - b;
          switch (m = p > 0.5 ? y / (2 - v - b) : y / (v + b), v) {
            case o:
              d = (u - c) / y + (u < c ? 6 : 0);
              break;
            case u:
              d = (c - o) / y + 2;
              break;
            case c:
              d = (o - u) / y + 4;
              break;
          }
          d /= 6;
        }
        return [
          Math.round(d * 360),
          Math.round(m * 100),
          Math.round(p * 100)
        ];
      },
      getSource: function() {
        return this._source;
      },
      setSource: function(o) {
        this._source = o;
      },
      toRgb: function() {
        var o = this.getSource();
        return "rgb(" + o[0] + "," + o[1] + "," + o[2] + ")";
      },
      toRgba: function() {
        var o = this.getSource();
        return "rgba(" + o[0] + "," + o[1] + "," + o[2] + "," + o[3] + ")";
      },
      toHsl: function() {
        var o = this.getSource(), u = this._rgbToHsl(o[0], o[1], o[2]);
        return "hsl(" + u[0] + "," + u[1] + "%," + u[2] + "%)";
      },
      toHsla: function() {
        var o = this.getSource(), u = this._rgbToHsl(o[0], o[1], o[2]);
        return "hsla(" + u[0] + "," + u[1] + "%," + u[2] + "%," + o[3] + ")";
      },
      toHex: function() {
        var o = this.getSource(), u, c, d;
        return u = o[0].toString(16), u = u.length === 1 ? "0" + u : u, c = o[1].toString(16), c = c.length === 1 ? "0" + c : c, d = o[2].toString(16), d = d.length === 1 ? "0" + d : d, u.toUpperCase() + c.toUpperCase() + d.toUpperCase();
      },
      toHexa: function() {
        var o = this.getSource(), u;
        return u = Math.round(o[3] * 255), u = u.toString(16), u = u.length === 1 ? "0" + u : u, this.toHex() + u.toUpperCase();
      },
      getAlpha: function() {
        return this.getSource()[3];
      },
      setAlpha: function(o) {
        var u = this.getSource();
        return u[3] = o, this.setSource(u), this;
      },
      toGrayscale: function() {
        var o = this.getSource(), u = parseInt((o[0] * 0.3 + o[1] * 0.59 + o[2] * 0.11).toFixed(0), 10), c = o[3];
        return this.setSource([u, u, u, c]), this;
      },
      toBlackWhite: function(o) {
        var u = this.getSource(), c = (u[0] * 0.3 + u[1] * 0.59 + u[2] * 0.11).toFixed(0), d = u[3];
        return o = o || 127, c = Number(c) < Number(o) ? 0 : 255, this.setSource([c, c, c, d]), this;
      },
      overlayWith: function(o) {
        o instanceof a || (o = new a(o));
        var u = [], c = this.getAlpha(), d = 0.5, m = this.getSource(), p = o.getSource(), v;
        for (v = 0; v < 3; v++)
          u.push(Math.round(m[v] * (1 - d) + p[v] * d));
        return u[3] = c, this.setSource(u), this;
      }
    }, n.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i, n.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i, n.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i, n.Color.colorNameMap = {
      aliceblue: "#F0F8FF",
      antiquewhite: "#FAEBD7",
      aqua: "#00FFFF",
      aquamarine: "#7FFFD4",
      azure: "#F0FFFF",
      beige: "#F5F5DC",
      bisque: "#FFE4C4",
      black: "#000000",
      blanchedalmond: "#FFEBCD",
      blue: "#0000FF",
      blueviolet: "#8A2BE2",
      brown: "#A52A2A",
      burlywood: "#DEB887",
      cadetblue: "#5F9EA0",
      chartreuse: "#7FFF00",
      chocolate: "#D2691E",
      coral: "#FF7F50",
      cornflowerblue: "#6495ED",
      cornsilk: "#FFF8DC",
      crimson: "#DC143C",
      cyan: "#00FFFF",
      darkblue: "#00008B",
      darkcyan: "#008B8B",
      darkgoldenrod: "#B8860B",
      darkgray: "#A9A9A9",
      darkgrey: "#A9A9A9",
      darkgreen: "#006400",
      darkkhaki: "#BDB76B",
      darkmagenta: "#8B008B",
      darkolivegreen: "#556B2F",
      darkorange: "#FF8C00",
      darkorchid: "#9932CC",
      darkred: "#8B0000",
      darksalmon: "#E9967A",
      darkseagreen: "#8FBC8F",
      darkslateblue: "#483D8B",
      darkslategray: "#2F4F4F",
      darkslategrey: "#2F4F4F",
      darkturquoise: "#00CED1",
      darkviolet: "#9400D3",
      deeppink: "#FF1493",
      deepskyblue: "#00BFFF",
      dimgray: "#696969",
      dimgrey: "#696969",
      dodgerblue: "#1E90FF",
      firebrick: "#B22222",
      floralwhite: "#FFFAF0",
      forestgreen: "#228B22",
      fuchsia: "#FF00FF",
      gainsboro: "#DCDCDC",
      ghostwhite: "#F8F8FF",
      gold: "#FFD700",
      goldenrod: "#DAA520",
      gray: "#808080",
      grey: "#808080",
      green: "#008000",
      greenyellow: "#ADFF2F",
      honeydew: "#F0FFF0",
      hotpink: "#FF69B4",
      indianred: "#CD5C5C",
      indigo: "#4B0082",
      ivory: "#FFFFF0",
      khaki: "#F0E68C",
      lavender: "#E6E6FA",
      lavenderblush: "#FFF0F5",
      lawngreen: "#7CFC00",
      lemonchiffon: "#FFFACD",
      lightblue: "#ADD8E6",
      lightcoral: "#F08080",
      lightcyan: "#E0FFFF",
      lightgoldenrodyellow: "#FAFAD2",
      lightgray: "#D3D3D3",
      lightgrey: "#D3D3D3",
      lightgreen: "#90EE90",
      lightpink: "#FFB6C1",
      lightsalmon: "#FFA07A",
      lightseagreen: "#20B2AA",
      lightskyblue: "#87CEFA",
      lightslategray: "#778899",
      lightslategrey: "#778899",
      lightsteelblue: "#B0C4DE",
      lightyellow: "#FFFFE0",
      lime: "#00FF00",
      limegreen: "#32CD32",
      linen: "#FAF0E6",
      magenta: "#FF00FF",
      maroon: "#800000",
      mediumaquamarine: "#66CDAA",
      mediumblue: "#0000CD",
      mediumorchid: "#BA55D3",
      mediumpurple: "#9370DB",
      mediumseagreen: "#3CB371",
      mediumslateblue: "#7B68EE",
      mediumspringgreen: "#00FA9A",
      mediumturquoise: "#48D1CC",
      mediumvioletred: "#C71585",
      midnightblue: "#191970",
      mintcream: "#F5FFFA",
      mistyrose: "#FFE4E1",
      moccasin: "#FFE4B5",
      navajowhite: "#FFDEAD",
      navy: "#000080",
      oldlace: "#FDF5E6",
      olive: "#808000",
      olivedrab: "#6B8E23",
      orange: "#FFA500",
      orangered: "#FF4500",
      orchid: "#DA70D6",
      palegoldenrod: "#EEE8AA",
      palegreen: "#98FB98",
      paleturquoise: "#AFEEEE",
      palevioletred: "#DB7093",
      papayawhip: "#FFEFD5",
      peachpuff: "#FFDAB9",
      peru: "#CD853F",
      pink: "#FFC0CB",
      plum: "#DDA0DD",
      powderblue: "#B0E0E6",
      purple: "#800080",
      rebeccapurple: "#663399",
      red: "#FF0000",
      rosybrown: "#BC8F8F",
      royalblue: "#4169E1",
      saddlebrown: "#8B4513",
      salmon: "#FA8072",
      sandybrown: "#F4A460",
      seagreen: "#2E8B57",
      seashell: "#FFF5EE",
      sienna: "#A0522D",
      silver: "#C0C0C0",
      skyblue: "#87CEEB",
      slateblue: "#6A5ACD",
      slategray: "#708090",
      slategrey: "#708090",
      snow: "#FFFAFA",
      springgreen: "#00FF7F",
      steelblue: "#4682B4",
      tan: "#D2B48C",
      teal: "#008080",
      thistle: "#D8BFD8",
      tomato: "#FF6347",
      turquoise: "#40E0D0",
      violet: "#EE82EE",
      wheat: "#F5DEB3",
      white: "#FFFFFF",
      whitesmoke: "#F5F5F5",
      yellow: "#FFFF00",
      yellowgreen: "#9ACD32"
    };
    function h(o, u, c) {
      return c < 0 && (c += 1), c > 1 && (c -= 1), c < 1 / 6 ? o + (u - o) * 6 * c : c < 1 / 2 ? u : c < 2 / 3 ? o + (u - o) * (2 / 3 - c) * 6 : o;
    }
    n.Color.fromRgb = function(o) {
      return a.fromSource(a.sourceFromRgb(o));
    }, n.Color.sourceFromRgb = function(o) {
      var u = o.match(a.reRGBa);
      if (u) {
        var c = parseInt(u[1], 10) / (/%$/.test(u[1]) ? 100 : 1) * (/%$/.test(u[1]) ? 255 : 1), d = parseInt(u[2], 10) / (/%$/.test(u[2]) ? 100 : 1) * (/%$/.test(u[2]) ? 255 : 1), m = parseInt(u[3], 10) / (/%$/.test(u[3]) ? 100 : 1) * (/%$/.test(u[3]) ? 255 : 1);
        return [
          parseInt(c, 10),
          parseInt(d, 10),
          parseInt(m, 10),
          u[4] ? parseFloat(u[4]) : 1
        ];
      }
    }, n.Color.fromRgba = a.fromRgb, n.Color.fromHsl = function(o) {
      return a.fromSource(a.sourceFromHsl(o));
    }, n.Color.sourceFromHsl = function(o) {
      var u = o.match(a.reHSLa);
      if (!!u) {
        var c = (parseFloat(u[1]) % 360 + 360) % 360 / 360, d = parseFloat(u[2]) / (/%$/.test(u[2]) ? 100 : 1), m = parseFloat(u[3]) / (/%$/.test(u[3]) ? 100 : 1), p, v, b;
        if (d === 0)
          p = v = b = m;
        else {
          var y = m <= 0.5 ? m * (d + 1) : m + d - m * d, w = m * 2 - y;
          p = h(w, y, c + 1 / 3), v = h(w, y, c), b = h(w, y, c - 1 / 3);
        }
        return [
          Math.round(p * 255),
          Math.round(v * 255),
          Math.round(b * 255),
          u[4] ? parseFloat(u[4]) : 1
        ];
      }
    }, n.Color.fromHsla = a.fromHsl, n.Color.fromHex = function(o) {
      return a.fromSource(a.sourceFromHex(o));
    }, n.Color.sourceFromHex = function(o) {
      if (o.match(a.reHex)) {
        var u = o.slice(o.indexOf("#") + 1), c = u.length === 3 || u.length === 4, d = u.length === 8 || u.length === 4, m = c ? u.charAt(0) + u.charAt(0) : u.substring(0, 2), p = c ? u.charAt(1) + u.charAt(1) : u.substring(2, 4), v = c ? u.charAt(2) + u.charAt(2) : u.substring(4, 6), b = d ? c ? u.charAt(3) + u.charAt(3) : u.substring(6, 8) : "FF";
        return [
          parseInt(m, 16),
          parseInt(p, 16),
          parseInt(v, 16),
          parseFloat((parseInt(b, 16) / 255).toFixed(2))
        ];
      }
    }, n.Color.fromSource = function(o) {
      var u = new a();
      return u.setSource(o), u;
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = ["e", "se", "s", "sw", "w", "nw", "n", "ne", "e"], h = ["ns", "nesw", "ew", "nwse"], o = {}, u = "left", c = "top", d = "right", m = "bottom", p = "center", v = {
      top: m,
      bottom: c,
      left: d,
      right: u,
      center: p
    }, b = n.util.radiansToDegrees, y = Math.sign || function($) {
      return ($ > 0) - ($ < 0) || +$;
    };
    function w($, z) {
      var q = $.angle + b(Math.atan2(z.y, z.x)) + 360;
      return Math.round(q % 360 / 45);
    }
    function _($, z) {
      var q = z.transform.target, J = q.canvas, F = n.util.object.clone(z);
      F.target = q, J && J.fire("object:" + $, F), q.fire($, z);
    }
    function S($, z) {
      var q = z.canvas, J = q.uniScaleKey, F = $[J];
      return q.uniformScaling && !F || !q.uniformScaling && F;
    }
    function C($) {
      return $.originX === p && $.originY === p;
    }
    function k($, z, q) {
      var J = $.lockScalingX, F = $.lockScalingY;
      return !!(J && F || !z && (J || F) && q || J && z === "x" || F && z === "y");
    }
    function R($, z, q) {
      var J = "not-allowed", F = S($, q), U = "";
      if (z.x !== 0 && z.y === 0 ? U = "x" : z.x === 0 && z.y !== 0 && (U = "y"), k(q, U, F))
        return J;
      var se = w(q, z);
      return a[se] + "-resize";
    }
    function B($, z, q) {
      var J = "not-allowed";
      if (z.x !== 0 && q.lockSkewingY || z.y !== 0 && q.lockSkewingX)
        return J;
      var F = w(q, z) % 4;
      return h[F] + "-resize";
    }
    function N($, z, q) {
      return $[q.canvas.altActionKey] ? o.skewCursorStyleHandler($, z, q) : o.scaleCursorStyleHandler($, z, q);
    }
    function K($, z, q) {
      var J = $[q.canvas.altActionKey];
      if (z.x === 0)
        return J ? "skewX" : "scaleY";
      if (z.y === 0)
        return J ? "skewY" : "scaleX";
    }
    function ee($, z, q) {
      return q.lockRotation ? "not-allowed" : z.cursorStyle;
    }
    function G($, z, q, J) {
      return {
        e: $,
        transform: z,
        pointer: {
          x: q,
          y: J
        }
      };
    }
    function W($) {
      return function(z, q, J, F) {
        var U = q.target, se = U.getCenterPoint(), be = U.translateToOriginPoint(se, q.originX, q.originY), de = $(z, q, J, F);
        return U.setPositionByOrigin(be, q.originX, q.originY), de;
      };
    }
    function re($, z) {
      return function(q, J, F, U) {
        var se = z(q, J, F, U);
        return se && _($, G(q, J, F, U)), se;
      };
    }
    function ce($, z, q, J, F) {
      var U = $.target, se = U.controls[$.corner], be = U.canvas.getZoom(), de = U.padding / be, X = U.toLocalPoint(new n.Point(J, F), z, q);
      return X.x >= de && (X.x -= de), X.x <= -de && (X.x += de), X.y >= de && (X.y -= de), X.y <= de && (X.y += de), X.x -= se.offsetX, X.y -= se.offsetY, X;
    }
    function le($) {
      return $.flipX !== $.flipY;
    }
    function T($, z, q, J, F) {
      if ($[z] !== 0) {
        var U = $._getTransformedDimensions()[J], se = F / U * $[q];
        $.set(q, se);
      }
    }
    function M($, z, q, J) {
      var F = z.target, U = F._getTransformedDimensions(0, F.skewY), se = ce(z, z.originX, z.originY, q, J), be = Math.abs(se.x * 2) - U.x, de = F.skewX, X;
      be < 2 ? X = 0 : (X = b(
        Math.atan2(be / F.scaleX, U.y / F.scaleY)
      ), z.originX === u && z.originY === m && (X = -X), z.originX === d && z.originY === c && (X = -X), le(F) && (X = -X));
      var fe = de !== X;
      if (fe) {
        var we = F._getTransformedDimensions().y;
        F.set("skewX", X), T(F, "skewY", "scaleY", "y", we);
      }
      return fe;
    }
    function A($, z, q, J) {
      var F = z.target, U = F._getTransformedDimensions(F.skewX, 0), se = ce(z, z.originX, z.originY, q, J), be = Math.abs(se.y * 2) - U.y, de = F.skewY, X;
      be < 2 ? X = 0 : (X = b(
        Math.atan2(be / F.scaleY, U.x / F.scaleX)
      ), z.originX === u && z.originY === m && (X = -X), z.originX === d && z.originY === c && (X = -X), le(F) && (X = -X));
      var fe = de !== X;
      if (fe) {
        var we = F._getTransformedDimensions().x;
        F.set("skewY", X), T(F, "skewX", "scaleX", "x", we);
      }
      return fe;
    }
    function D($, z, q, J) {
      var F = z.target, U = F.skewX, se, be = z.originY;
      if (F.lockSkewingX)
        return !1;
      if (U === 0) {
        var de = ce(z, p, p, q, J);
        de.x > 0 ? se = u : se = d;
      } else
        U > 0 && (se = be === c ? u : d), U < 0 && (se = be === c ? d : u), le(F) && (se = se === u ? d : u);
      z.originX = se;
      var X = re("skewing", W(M));
      return X($, z, q, J);
    }
    function V($, z, q, J) {
      var F = z.target, U = F.skewY, se, be = z.originX;
      if (F.lockSkewingY)
        return !1;
      if (U === 0) {
        var de = ce(z, p, p, q, J);
        de.y > 0 ? se = c : se = m;
      } else
        U > 0 && (se = be === u ? c : m), U < 0 && (se = be === u ? m : c), le(F) && (se = se === c ? m : c);
      z.originY = se;
      var X = re("skewing", W(A));
      return X($, z, q, J);
    }
    function P($, z, q, J) {
      var F = z, U = F.target, se = U.translateToOriginPoint(U.getCenterPoint(), F.originX, F.originY);
      if (U.lockRotation)
        return !1;
      var be = Math.atan2(F.ey - se.y, F.ex - se.x), de = Math.atan2(J - se.y, q - se.x), X = b(de - be + F.theta), fe = !0;
      if (U.snapAngle > 0) {
        var we = U.snapAngle, Ee = U.snapThreshold || we, Re = Math.ceil(X / we) * we, Pe = Math.floor(X / we) * we;
        Math.abs(X - Pe) < Ee ? X = Pe : Math.abs(X - Re) < Ee && (X = Re);
      }
      return X < 0 && (X = 360 + X), X %= 360, fe = U.angle !== X, U.angle = X, fe;
    }
    function E($, z, q, J, F) {
      F = F || {};
      var U = z.target, se = U.lockScalingX, be = U.lockScalingY, de = F.by, X, fe, we, Ee, Re = S($, U), Pe = k(U, de, Re), tt, Ve, gi = z.gestureScale;
      if (Pe)
        return !1;
      if (gi)
        fe = z.scaleX * gi, we = z.scaleY * gi;
      else {
        if (X = ce(z, z.originX, z.originY, q, J), tt = de !== "y" ? y(X.x) : 1, Ve = de !== "x" ? y(X.y) : 1, z.signX || (z.signX = tt), z.signY || (z.signY = Ve), U.lockScalingFlip && (z.signX !== tt || z.signY !== Ve))
          return !1;
        if (Ee = U._getTransformedDimensions(), Re && !de) {
          var Mr = Math.abs(X.x) + Math.abs(X.y), Pt = z.original, xm = Math.abs(Ee.x * Pt.scaleX / U.scaleX) + Math.abs(Ee.y * Pt.scaleY / U.scaleY), hl = Mr / xm;
          fe = Pt.scaleX * hl, we = Pt.scaleY * hl;
        } else
          fe = Math.abs(X.x * U.scaleX / Ee.x), we = Math.abs(X.y * U.scaleY / Ee.y);
        C(z) && (fe *= 2, we *= 2), z.signX !== tt && de !== "y" && (z.originX = v[z.originX], fe *= -1, z.signX = tt), z.signY !== Ve && de !== "x" && (z.originY = v[z.originY], we *= -1, z.signY = Ve);
      }
      var _m = U.scaleX, Sm = U.scaleY;
      return de ? (de === "x" && U.set("scaleX", fe), de === "y" && U.set("scaleY", we)) : (!se && U.set("scaleX", fe), !be && U.set("scaleY", we)), _m !== U.scaleX || Sm !== U.scaleY;
    }
    function L($, z, q, J) {
      return E($, z, q, J);
    }
    function j($, z, q, J) {
      return E($, z, q, J, { by: "x" });
    }
    function Y($, z, q, J) {
      return E($, z, q, J, { by: "y" });
    }
    function H($, z, q, J) {
      return $[z.target.canvas.altActionKey] ? o.skewHandlerX($, z, q, J) : o.scalingY($, z, q, J);
    }
    function Z($, z, q, J) {
      return $[z.target.canvas.altActionKey] ? o.skewHandlerY($, z, q, J) : o.scalingX($, z, q, J);
    }
    function Q($, z, q, J) {
      var F = z.target, U = ce(z, z.originX, z.originY, q, J), se = F.strokeWidth / (F.strokeUniform ? F.scaleX : 1), be = C(z) ? 2 : 1, de = F.width, X = Math.abs(U.x * be / F.scaleX) - se;
      return F.set("width", Math.max(X, 0)), de !== X;
    }
    function te($, z, q, J) {
      var F = z.target, U = q - z.offsetX, se = J - z.offsetY, be = !F.get("lockMovementX") && F.left !== U, de = !F.get("lockMovementY") && F.top !== se;
      return be && F.set("left", U), de && F.set("top", se), (be || de) && _("moving", G($, z, q, J)), be || de;
    }
    o.scaleCursorStyleHandler = R, o.skewCursorStyleHandler = B, o.scaleSkewCursorStyleHandler = N, o.rotationWithSnapping = re("rotating", W(P)), o.scalingEqually = re("scaling", W(L)), o.scalingX = re("scaling", W(j)), o.scalingY = re("scaling", W(Y)), o.scalingYOrSkewingX = H, o.scalingXOrSkewingY = Z, o.changeWidth = re("resizing", W(Q)), o.skewHandlerX = D, o.skewHandlerY = V, o.dragHandler = te, o.scaleOrSkewActionName = K, o.rotationStyleHandler = ee, o.fireEvent = _, o.wrapWithFixedAnchor = W, o.wrapWithFireEvent = re, o.getLocalPoint = ce, n.controlsUtils = o;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.degreesToRadians, h = n.controlsUtils;
    function o(c, d, m, p, v) {
      p = p || {};
      var b = this.sizeX || p.cornerSize || v.cornerSize, y = this.sizeY || p.cornerSize || v.cornerSize, w = typeof p.transparentCorners < "u" ? p.transparentCorners : v.transparentCorners, _ = w ? "stroke" : "fill", S = !w && (p.cornerStrokeColor || v.cornerStrokeColor), C = d, k = m, R;
      c.save(), c.fillStyle = p.cornerColor || v.cornerColor, c.strokeStyle = p.cornerStrokeColor || v.cornerStrokeColor, b > y ? (R = b, c.scale(1, y / b), k = m * b / y) : y > b ? (R = y, c.scale(b / y, 1), C = d * y / b) : R = b, c.lineWidth = 1, c.beginPath(), c.arc(C, k, R / 2, 0, 2 * Math.PI, !1), c[_](), S && c.stroke(), c.restore();
    }
    function u(c, d, m, p, v) {
      p = p || {};
      var b = this.sizeX || p.cornerSize || v.cornerSize, y = this.sizeY || p.cornerSize || v.cornerSize, w = typeof p.transparentCorners < "u" ? p.transparentCorners : v.transparentCorners, _ = w ? "stroke" : "fill", S = !w && (p.cornerStrokeColor || v.cornerStrokeColor), C = b / 2, k = y / 2;
      c.save(), c.fillStyle = p.cornerColor || v.cornerColor, c.strokeStyle = p.cornerStrokeColor || v.cornerStrokeColor, c.lineWidth = 1, c.translate(d, m), c.rotate(a(v.angle)), c[_ + "Rect"](-C, -k, b, y), S && c.strokeRect(-C, -k, b, y), c.restore();
    }
    h.renderCircleControl = o, h.renderSquareControl = u;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {});
    function a(h) {
      for (var o in h)
        this[o] = h[o];
    }
    n.Control = a, n.Control.prototype = {
      visible: !0,
      actionName: "scale",
      angle: 0,
      x: 0,
      y: 0,
      offsetX: 0,
      offsetY: 0,
      sizeX: null,
      sizeY: null,
      touchSizeX: null,
      touchSizeY: null,
      cursorStyle: "crosshair",
      withConnection: !1,
      actionHandler: function() {
      },
      mouseDownHandler: function() {
      },
      mouseUpHandler: function() {
      },
      getActionHandler: function() {
        return this.actionHandler;
      },
      getMouseDownHandler: function() {
        return this.mouseDownHandler;
      },
      getMouseUpHandler: function() {
        return this.mouseUpHandler;
      },
      cursorStyleHandler: function(h, o) {
        return o.cursorStyle;
      },
      getActionName: function(h, o) {
        return o.actionName;
      },
      getVisibility: function(h, o) {
        var u = h._controlsVisibility;
        return u && typeof u[o] < "u" ? u[o] : this.visible;
      },
      setVisibility: function(h) {
        this.visible = h;
      },
      positionHandler: function(h, o) {
        var u = n.util.transformPoint({
          x: this.x * h.x + this.offsetX,
          y: this.y * h.y + this.offsetY
        }, o);
        return u;
      },
      calcCornerCoords: function(h, o, u, c, d) {
        var m, p, v, b, y = d ? this.touchSizeX : this.sizeX, w = d ? this.touchSizeY : this.sizeY;
        if (y && w && y !== w) {
          var _ = Math.atan2(w, y), S = Math.sqrt(y * y + w * w) / 2, C = _ - n.util.degreesToRadians(h), k = Math.PI / 2 - _ - n.util.degreesToRadians(h);
          m = S * n.util.cos(C), p = S * n.util.sin(C), v = S * n.util.cos(k), b = S * n.util.sin(k);
        } else {
          var R = y && w ? y : o;
          S = R * 0.7071067812;
          var C = n.util.degreesToRadians(45 - h);
          m = v = S * n.util.cos(C), p = b = S * n.util.sin(C);
        }
        return {
          tl: {
            x: u - b,
            y: c - v
          },
          tr: {
            x: u + m,
            y: c - p
          },
          bl: {
            x: u - m,
            y: c + p
          },
          br: {
            x: u + b,
            y: c + v
          }
        };
      },
      render: function(h, o, u, c, d) {
        switch (c = c || {}, c.cornerStyle || d.cornerStyle) {
          case "circle":
            n.controlsUtils.renderCircleControl.call(this, h, o, u, c, d);
            break;
          default:
            n.controlsUtils.renderSquareControl.call(this, h, o, u, c, d);
        }
      }
    };
  }(t), function() {
    function l(u, c) {
      var d = u.getAttribute("style"), m = u.getAttribute("offset") || 0, p, v, b, y;
      if (m = parseFloat(m) / (/%$/.test(m) ? 100 : 1), m = m < 0 ? 0 : m > 1 ? 1 : m, d) {
        var w = d.split(/\s*;\s*/);
        for (w[w.length - 1] === "" && w.pop(), y = w.length; y--; ) {
          var _ = w[y].split(/\s*:\s*/), S = _[0].trim(), C = _[1].trim();
          S === "stop-color" ? p = C : S === "stop-opacity" && (b = C);
        }
      }
      return p || (p = u.getAttribute("stop-color") || "rgb(0,0,0)"), b || (b = u.getAttribute("stop-opacity")), p = new e.Color(p), v = p.getAlpha(), b = isNaN(parseFloat(b)) ? 1 : parseFloat(b), b *= v * c, {
        offset: m,
        color: p.toRgb(),
        opacity: b
      };
    }
    function n(u) {
      return {
        x1: u.getAttribute("x1") || 0,
        y1: u.getAttribute("y1") || 0,
        x2: u.getAttribute("x2") || "100%",
        y2: u.getAttribute("y2") || 0
      };
    }
    function a(u) {
      return {
        x1: u.getAttribute("fx") || u.getAttribute("cx") || "50%",
        y1: u.getAttribute("fy") || u.getAttribute("cy") || "50%",
        r1: 0,
        x2: u.getAttribute("cx") || "50%",
        y2: u.getAttribute("cy") || "50%",
        r2: u.getAttribute("r") || "50%"
      };
    }
    var h = e.util.object.clone;
    e.Gradient = e.util.createClass({
      offsetX: 0,
      offsetY: 0,
      gradientTransform: null,
      gradientUnits: "pixels",
      type: "linear",
      initialize: function(u) {
        u || (u = {}), u.coords || (u.coords = {});
        var c, d = this;
        Object.keys(u).forEach(function(m) {
          d[m] = u[m];
        }), this.id ? this.id += "_" + e.Object.__uid++ : this.id = e.Object.__uid++, c = {
          x1: u.coords.x1 || 0,
          y1: u.coords.y1 || 0,
          x2: u.coords.x2 || 0,
          y2: u.coords.y2 || 0
        }, this.type === "radial" && (c.r1 = u.coords.r1 || 0, c.r2 = u.coords.r2 || 0), this.coords = c, this.colorStops = u.colorStops.slice();
      },
      addColorStop: function(u) {
        for (var c in u) {
          var d = new e.Color(u[c]);
          this.colorStops.push({
            offset: parseFloat(c),
            color: d.toRgb(),
            opacity: d.getAlpha()
          });
        }
        return this;
      },
      toObject: function(u) {
        var c = {
          type: this.type,
          coords: this.coords,
          colorStops: this.colorStops,
          offsetX: this.offsetX,
          offsetY: this.offsetY,
          gradientUnits: this.gradientUnits,
          gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
        };
        return e.util.populateWithProperties(this, c, u), c;
      },
      toSVG: function(u, v) {
        var d = h(this.coords, !0), m, p, v = v || {}, b, y, w = h(this.colorStops, !0), _ = d.r1 > d.r2, S = this.gradientTransform ? this.gradientTransform.concat() : e.iMatrix.concat(), C = -this.offsetX, k = -this.offsetY, R = !!v.additionalTransform, B = this.gradientUnits === "pixels" ? "userSpaceOnUse" : "objectBoundingBox";
        if (w.sort(function(W, re) {
          return W.offset - re.offset;
        }), B === "objectBoundingBox" ? (C /= u.width, k /= u.height) : (C += u.width / 2, k += u.height / 2), u.type === "path" && this.gradientUnits !== "percentage" && (C -= u.pathOffset.x, k -= u.pathOffset.y), S[4] -= C, S[5] -= k, y = 'id="SVGID_' + this.id + '" gradientUnits="' + B + '"', y += ' gradientTransform="' + (R ? v.additionalTransform + " " : "") + e.util.matrixToSVG(S) + '" ', this.type === "linear" ? b = [
          "<linearGradient ",
          y,
          ' x1="',
          d.x1,
          '" y1="',
          d.y1,
          '" x2="',
          d.x2,
          '" y2="',
          d.y2,
          `">
`
        ] : this.type === "radial" && (b = [
          "<radialGradient ",
          y,
          ' cx="',
          _ ? d.x1 : d.x2,
          '" cy="',
          _ ? d.y1 : d.y2,
          '" r="',
          _ ? d.r1 : d.r2,
          '" fx="',
          _ ? d.x2 : d.x1,
          '" fy="',
          _ ? d.y2 : d.y1,
          `">
`
        ]), this.type === "radial") {
          if (_)
            for (w = w.concat(), w.reverse(), m = 0, p = w.length; m < p; m++)
              w[m].offset = 1 - w[m].offset;
          var N = Math.min(d.r1, d.r2);
          if (N > 0) {
            var K = Math.max(d.r1, d.r2), ee = N / K;
            for (m = 0, p = w.length; m < p; m++)
              w[m].offset += ee * (1 - w[m].offset);
          }
        }
        for (m = 0, p = w.length; m < p; m++) {
          var G = w[m];
          b.push(
            "<stop ",
            'offset="',
            G.offset * 100 + "%",
            '" style="stop-color:',
            G.color,
            typeof G.opacity < "u" ? ";stop-opacity: " + G.opacity : ";",
            `"/>
`
          );
        }
        return b.push(this.type === "linear" ? `</linearGradient>
` : `</radialGradient>
`), b.join("");
      },
      toLive: function(u) {
        var c, d = e.util.object.clone(this.coords), m, p;
        if (!!this.type) {
          for (this.type === "linear" ? c = u.createLinearGradient(
            d.x1,
            d.y1,
            d.x2,
            d.y2
          ) : this.type === "radial" && (c = u.createRadialGradient(
            d.x1,
            d.y1,
            d.r1,
            d.x2,
            d.y2,
            d.r2
          )), m = 0, p = this.colorStops.length; m < p; m++) {
            var v = this.colorStops[m].color, b = this.colorStops[m].opacity, y = this.colorStops[m].offset;
            typeof b < "u" && (v = new e.Color(v).setAlpha(b).toRgba()), c.addColorStop(y, v);
          }
          return c;
        }
      }
    }), e.util.object.extend(e.Gradient, {
      fromElement: function(u, c, d, m) {
        var p = parseFloat(d) / (/%$/.test(d) ? 100 : 1);
        p = p < 0 ? 0 : p > 1 ? 1 : p, isNaN(p) && (p = 1);
        var v = u.getElementsByTagName("stop"), b, y = u.getAttribute("gradientUnits") === "userSpaceOnUse" ? "pixels" : "percentage", w = u.getAttribute("gradientTransform") || "", _ = [], S, C, k = 0, R = 0, B;
        for (u.nodeName === "linearGradient" || u.nodeName === "LINEARGRADIENT" ? (b = "linear", S = n(u)) : (b = "radial", S = a(u)), C = v.length; C--; )
          _.push(l(v[C], p));
        B = e.parseTransformAttribute(w), o(c, S, m, y), y === "pixels" && (k = -c.left, R = -c.top);
        var N = new e.Gradient({
          id: u.getAttribute("id"),
          type: b,
          coords: S,
          colorStops: _,
          gradientUnits: y,
          gradientTransform: B,
          offsetX: k,
          offsetY: R
        });
        return N;
      }
    });
    function o(u, c, d, m) {
      var p, v;
      Object.keys(c).forEach(function(b) {
        p = c[b], p === "Infinity" ? v = 1 : p === "-Infinity" ? v = 0 : (v = parseFloat(c[b], 10), typeof p == "string" && /^(\d+\.\d+)%|(\d+)%$/.test(p) && (v *= 0.01, m === "pixels" && ((b === "x1" || b === "x2" || b === "r2") && (v *= d.viewBoxWidth || d.width), (b === "y1" || b === "y2") && (v *= d.viewBoxHeight || d.height)))), c[b] = v;
      });
    }
  }(), function() {
    var l = e.util.toFixed;
    e.Pattern = e.util.createClass({
      repeat: "repeat",
      offsetX: 0,
      offsetY: 0,
      crossOrigin: "",
      patternTransform: null,
      initialize: function(n, a) {
        if (n || (n = {}), this.id = e.Object.__uid++, this.setOptions(n), !n.source || n.source && typeof n.source != "string") {
          a && a(this);
          return;
        } else {
          var h = this;
          this.source = e.util.createImage(), e.util.loadImage(n.source, function(o, u) {
            h.source = o, a && a(h, u);
          }, null, this.crossOrigin);
        }
      },
      toObject: function(n) {
        var a = e.Object.NUM_FRACTION_DIGITS, h, o;
        return typeof this.source.src == "string" ? h = this.source.src : typeof this.source == "object" && this.source.toDataURL && (h = this.source.toDataURL()), o = {
          type: "pattern",
          source: h,
          repeat: this.repeat,
          crossOrigin: this.crossOrigin,
          offsetX: l(this.offsetX, a),
          offsetY: l(this.offsetY, a),
          patternTransform: this.patternTransform ? this.patternTransform.concat() : null
        }, e.util.populateWithProperties(this, o, n), o;
      },
      toSVG: function(n) {
        var a = typeof this.source == "function" ? this.source() : this.source, h = a.width / n.width, o = a.height / n.height, u = this.offsetX / n.width, c = this.offsetY / n.height, d = "";
        return (this.repeat === "repeat-x" || this.repeat === "no-repeat") && (o = 1, c && (o += Math.abs(c))), (this.repeat === "repeat-y" || this.repeat === "no-repeat") && (h = 1, u && (h += Math.abs(u))), a.src ? d = a.src : a.toDataURL && (d = a.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + u + '" y="' + c + '" width="' + h + '" height="' + o + `">
<image x="0" y="0" width="` + a.width + '" height="' + a.height + '" xlink:href="' + d + `"></image>
</pattern>
`;
      },
      setOptions: function(n) {
        for (var a in n)
          this[a] = n[a];
      },
      toLive: function(n) {
        var a = this.source;
        return !a || typeof a.src < "u" && (!a.complete || a.naturalWidth === 0 || a.naturalHeight === 0) ? "" : n.createPattern(a, this.repeat);
      }
    });
  }(), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.toFixed;
    if (n.Shadow) {
      n.warn("fabric.Shadow is already defined.");
      return;
    }
    n.Shadow = n.util.createClass({
      color: "rgb(0,0,0)",
      blur: 0,
      offsetX: 0,
      offsetY: 0,
      affectStroke: !1,
      includeDefaultValues: !0,
      nonScaling: !1,
      initialize: function(h) {
        typeof h == "string" && (h = this._parseShadow(h));
        for (var o in h)
          this[o] = h[o];
        this.id = n.Object.__uid++;
      },
      _parseShadow: function(h) {
        var o = h.trim(), u = n.Shadow.reOffsetsAndBlur.exec(o) || [], c = o.replace(n.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)";
        return {
          color: c.trim(),
          offsetX: parseFloat(u[1], 10) || 0,
          offsetY: parseFloat(u[2], 10) || 0,
          blur: parseFloat(u[3], 10) || 0
        };
      },
      toString: function() {
        return [this.offsetX, this.offsetY, this.blur, this.color].join("px ");
      },
      toSVG: function(h) {
        var o = 40, u = 40, c = n.Object.NUM_FRACTION_DIGITS, d = n.util.rotateVector(
          { x: this.offsetX, y: this.offsetY },
          n.util.degreesToRadians(-h.angle)
        ), m = 20, p = new n.Color(this.color);
        return h.width && h.height && (o = a((Math.abs(d.x) + this.blur) / h.width, c) * 100 + m, u = a((Math.abs(d.y) + this.blur) / h.height, c) * 100 + m), h.flipX && (d.x *= -1), h.flipY && (d.y *= -1), '<filter id="SVGID_' + this.id + '" y="-' + u + '%" height="' + (100 + 2 * u) + '%" x="-' + o + '%" width="' + (100 + 2 * o) + `%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="` + a(this.blur ? this.blur / 2 : 0, c) + `"></feGaussianBlur>
	<feOffset dx="` + a(d.x, c) + '" dy="' + a(d.y, c) + `" result="oBlur" ></feOffset>
	<feFlood flood-color="` + p.toRgb() + '" flood-opacity="' + p.getAlpha() + `"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`;
      },
      toObject: function() {
        if (this.includeDefaultValues)
          return {
            color: this.color,
            blur: this.blur,
            offsetX: this.offsetX,
            offsetY: this.offsetY,
            affectStroke: this.affectStroke,
            nonScaling: this.nonScaling
          };
        var h = {}, o = n.Shadow.prototype;
        return ["color", "blur", "offsetX", "offsetY", "affectStroke", "nonScaling"].forEach(function(u) {
          this[u] !== o[u] && (h[u] = this[u]);
        }, this), h;
      }
    }), n.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/;
  }(t), function() {
    if (e.StaticCanvas) {
      e.warn("fabric.StaticCanvas is already defined.");
      return;
    }
    var l = e.util.object.extend, n = e.util.getElementOffset, a = e.util.removeFromArray, h = e.util.toFixed, o = e.util.transformPoint, u = e.util.invertTransform, c = e.util.getNodeCanvas, d = e.util.createCanvasElement, m = new Error("Could not initialize `canvas` element");
    e.StaticCanvas = e.util.createClass(e.CommonMethods, {
      initialize: function(p, v) {
        v || (v = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(p, v);
      },
      backgroundColor: "",
      backgroundImage: null,
      overlayColor: "",
      overlayImage: null,
      includeDefaultValues: !0,
      stateful: !1,
      renderOnAddRemove: !0,
      controlsAboveOverlay: !1,
      allowTouchScrolling: !1,
      imageSmoothingEnabled: !0,
      viewportTransform: e.iMatrix.concat(),
      backgroundVpt: !0,
      overlayVpt: !0,
      enableRetinaScaling: !0,
      vptCoords: {},
      skipOffscreen: !0,
      clipPath: void 0,
      _initStatic: function(p, v) {
        var b = this.requestRenderAllBound;
        this._objects = [], this._createLowerCanvas(p), this._initOptions(v), this.interactive || this._initRetinaScaling(), v.overlayImage && this.setOverlayImage(v.overlayImage, b), v.backgroundImage && this.setBackgroundImage(v.backgroundImage, b), v.backgroundColor && this.setBackgroundColor(v.backgroundColor, b), v.overlayColor && this.setOverlayColor(v.overlayColor, b), this.calcOffset();
      },
      _isRetinaScaling: function() {
        return e.devicePixelRatio > 1 && this.enableRetinaScaling;
      },
      getRetinaScaling: function() {
        return this._isRetinaScaling() ? Math.max(1, e.devicePixelRatio) : 1;
      },
      _initRetinaScaling: function() {
        if (!!this._isRetinaScaling()) {
          var p = e.devicePixelRatio;
          this.__initRetinaScaling(p, this.lowerCanvasEl, this.contextContainer), this.upperCanvasEl && this.__initRetinaScaling(p, this.upperCanvasEl, this.contextTop);
        }
      },
      __initRetinaScaling: function(p, v, b) {
        v.setAttribute("width", this.width * p), v.setAttribute("height", this.height * p), b.scale(p, p);
      },
      calcOffset: function() {
        return this._offset = n(this.lowerCanvasEl), this;
      },
      setOverlayImage: function(p, v, b) {
        return this.__setBgOverlayImage("overlayImage", p, v, b);
      },
      setBackgroundImage: function(p, v, b) {
        return this.__setBgOverlayImage("backgroundImage", p, v, b);
      },
      setOverlayColor: function(p, v) {
        return this.__setBgOverlayColor("overlayColor", p, v);
      },
      setBackgroundColor: function(p, v) {
        return this.__setBgOverlayColor("backgroundColor", p, v);
      },
      __setBgOverlayImage: function(p, v, b, y) {
        return typeof v == "string" ? e.util.loadImage(v, function(w, _) {
          if (w) {
            var S = new e.Image(w, y);
            this[p] = S, S.canvas = this;
          }
          b && b(w, _);
        }, this, y && y.crossOrigin) : (y && v.setOptions(y), this[p] = v, v && (v.canvas = this), b && b(v, !1)), this;
      },
      __setBgOverlayColor: function(p, v, b) {
        return this[p] = v, this._initGradient(v, p), this._initPattern(v, p, b), this;
      },
      _createCanvasElement: function() {
        var p = d();
        if (!p || (p.style || (p.style = {}), typeof p.getContext > "u"))
          throw m;
        return p;
      },
      _initOptions: function(p) {
        var v = this.lowerCanvasEl;
        this._setOptions(p), this.width = this.width || parseInt(v.width, 10) || 0, this.height = this.height || parseInt(v.height, 10) || 0, this.lowerCanvasEl.style && (v.width = this.width, v.height = this.height, v.style.width = this.width + "px", v.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice());
      },
      _createLowerCanvas: function(p) {
        p && p.getContext ? this.lowerCanvasEl = p : this.lowerCanvasEl = e.util.getById(p) || this._createCanvasElement(), e.util.addClass(this.lowerCanvasEl, "lower-canvas"), this._originalCanvasStyle = this.lowerCanvasEl.style, this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d");
      },
      getWidth: function() {
        return this.width;
      },
      getHeight: function() {
        return this.height;
      },
      setWidth: function(p, v) {
        return this.setDimensions({ width: p }, v);
      },
      setHeight: function(p, v) {
        return this.setDimensions({ height: p }, v);
      },
      setDimensions: function(p, v) {
        var b;
        v = v || {};
        for (var y in p)
          b = p[y], v.cssOnly || (this._setBackstoreDimension(y, p[y]), b += "px", this.hasLostContext = !0), v.backstoreOnly || this._setCssDimension(y, b);
        return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(this.contextTop), this._initRetinaScaling(), this.calcOffset(), v.cssOnly || this.requestRenderAll(), this;
      },
      _setBackstoreDimension: function(p, v) {
        return this.lowerCanvasEl[p] = v, this.upperCanvasEl && (this.upperCanvasEl[p] = v), this.cacheCanvasEl && (this.cacheCanvasEl[p] = v), this[p] = v, this;
      },
      _setCssDimension: function(p, v) {
        return this.lowerCanvasEl.style[p] = v, this.upperCanvasEl && (this.upperCanvasEl.style[p] = v), this.wrapperEl && (this.wrapperEl.style[p] = v), this;
      },
      getZoom: function() {
        return this.viewportTransform[0];
      },
      setViewportTransform: function(p) {
        var v = this._activeObject, b = this.backgroundImage, y = this.overlayImage, w, _, S;
        for (this.viewportTransform = p, _ = 0, S = this._objects.length; _ < S; _++)
          w = this._objects[_], w.group || w.setCoords(!0);
        return v && v.setCoords(), b && b.setCoords(!0), y && y.setCoords(!0), this.calcViewportBoundaries(), this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      zoomToPoint: function(p, v) {
        var b = p, y = this.viewportTransform.slice(0);
        p = o(p, u(this.viewportTransform)), y[0] = v, y[3] = v;
        var w = o(p, y);
        return y[4] += b.x - w.x, y[5] += b.y - w.y, this.setViewportTransform(y);
      },
      setZoom: function(p) {
        return this.zoomToPoint(new e.Point(0, 0), p), this;
      },
      absolutePan: function(p) {
        var v = this.viewportTransform.slice(0);
        return v[4] = -p.x, v[5] = -p.y, this.setViewportTransform(v);
      },
      relativePan: function(p) {
        return this.absolutePan(new e.Point(
          -p.x - this.viewportTransform[4],
          -p.y - this.viewportTransform[5]
        ));
      },
      getElement: function() {
        return this.lowerCanvasEl;
      },
      _onObjectAdded: function(p) {
        this.stateful && p.setupState(), p._set("canvas", this), p.setCoords(), this.fire("object:added", { target: p }), p.fire("added");
      },
      _onObjectRemoved: function(p) {
        this.fire("object:removed", { target: p }), p.fire("removed"), delete p.canvas;
      },
      clearContext: function(p) {
        return p.clearRect(0, 0, this.width, this.height), this;
      },
      getContext: function() {
        return this.contextContainer;
      },
      clear: function() {
        return this.remove.apply(this, this.getObjects()), this.backgroundImage = null, this.overlayImage = null, this.backgroundColor = "", this.overlayColor = "", this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler), this._iTextInstances = null, this._hasITextHandlers = !1), this.clearContext(this.contextContainer), this.fire("canvas:cleared"), this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      renderAll: function() {
        var p = this.contextContainer;
        return this.renderCanvas(p, this._objects), this;
      },
      renderAndReset: function() {
        this.isRendering = 0, this.renderAll();
      },
      requestRenderAll: function() {
        return this.isRendering || (this.isRendering = e.util.requestAnimFrame(this.renderAndResetBound)), this;
      },
      calcViewportBoundaries: function() {
        var p = {}, v = this.width, b = this.height, y = u(this.viewportTransform);
        return p.tl = o({ x: 0, y: 0 }, y), p.br = o({ x: v, y: b }, y), p.tr = new e.Point(p.br.x, p.tl.y), p.bl = new e.Point(p.tl.x, p.br.y), this.vptCoords = p, p;
      },
      cancelRequestedRender: function() {
        this.isRendering && (e.util.cancelAnimFrame(this.isRendering), this.isRendering = 0);
      },
      renderCanvas: function(p, v) {
        var b = this.viewportTransform, y = this.clipPath;
        this.cancelRequestedRender(), this.calcViewportBoundaries(), this.clearContext(p), e.util.setImageSmoothing(p, this.imageSmoothingEnabled), this.fire("before:render", { ctx: p }), this._renderBackground(p), p.save(), p.transform(b[0], b[1], b[2], b[3], b[4], b[5]), this._renderObjects(p, v), p.restore(), !this.controlsAboveOverlay && this.interactive && this.drawControls(p), y && (y.canvas = this, y.shouldCache(), y._transformDone = !0, y.renderCache({ forClipping: !0 }), this.drawClipPathOnCanvas(p)), this._renderOverlay(p), this.controlsAboveOverlay && this.interactive && this.drawControls(p), this.fire("after:render", { ctx: p });
      },
      drawClipPathOnCanvas: function(p) {
        var v = this.viewportTransform, b = this.clipPath;
        p.save(), p.transform(v[0], v[1], v[2], v[3], v[4], v[5]), p.globalCompositeOperation = "destination-in", b.transform(p), p.scale(1 / b.zoomX, 1 / b.zoomY), p.drawImage(b._cacheCanvas, -b.cacheTranslationX, -b.cacheTranslationY), p.restore();
      },
      _renderObjects: function(p, v) {
        var b, y;
        for (b = 0, y = v.length; b < y; ++b)
          v[b] && v[b].render(p);
      },
      _renderBackgroundOrOverlay: function(p, v) {
        var b = this[v + "Color"], y = this[v + "Image"], w = this.viewportTransform, _ = this[v + "Vpt"];
        if (!(!b && !y)) {
          if (b) {
            p.save(), p.beginPath(), p.moveTo(0, 0), p.lineTo(this.width, 0), p.lineTo(this.width, this.height), p.lineTo(0, this.height), p.closePath(), p.fillStyle = b.toLive ? b.toLive(p, this) : b, _ && p.transform(w[0], w[1], w[2], w[3], w[4], w[5]), p.transform(1, 0, 0, 1, b.offsetX || 0, b.offsetY || 0);
            var S = b.gradientTransform || b.patternTransform;
            S && p.transform(S[0], S[1], S[2], S[3], S[4], S[5]), p.fill(), p.restore();
          }
          y && (p.save(), _ && p.transform(w[0], w[1], w[2], w[3], w[4], w[5]), y.render(p), p.restore());
        }
      },
      _renderBackground: function(p) {
        this._renderBackgroundOrOverlay(p, "background");
      },
      _renderOverlay: function(p) {
        this._renderBackgroundOrOverlay(p, "overlay");
      },
      getCenter: function() {
        return {
          top: this.height / 2,
          left: this.width / 2
        };
      },
      getCenterPoint: function() {
        return new e.Point(this.width / 2, this.height / 2);
      },
      centerObjectH: function(p) {
        return this._centerObject(p, new e.Point(this.getCenterPoint().x, p.getCenterPoint().y));
      },
      centerObjectV: function(p) {
        return this._centerObject(p, new e.Point(p.getCenterPoint().x, this.getCenterPoint().y));
      },
      centerObject: function(p) {
        var v = this.getCenterPoint();
        return this._centerObject(p, v);
      },
      viewportCenterObject: function(p) {
        var v = this.getVpCenter();
        return this._centerObject(p, v);
      },
      viewportCenterObjectH: function(p) {
        var v = this.getVpCenter();
        return this._centerObject(p, new e.Point(v.x, p.getCenterPoint().y)), this;
      },
      viewportCenterObjectV: function(p) {
        var v = this.getVpCenter();
        return this._centerObject(p, new e.Point(p.getCenterPoint().x, v.y));
      },
      getVpCenter: function() {
        var p = this.getCenterPoint(), v = u(this.viewportTransform);
        return o(p, v);
      },
      _centerObject: function(p, v) {
        return p.setPositionByOrigin(v, "center", "center"), p.setCoords(), this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      toDatalessJSON: function(p) {
        return this.toDatalessObject(p);
      },
      toObject: function(p) {
        return this._toObjectMethod("toObject", p);
      },
      toDatalessObject: function(p) {
        return this._toObjectMethod("toDatalessObject", p);
      },
      _toObjectMethod: function(p, v) {
        var b = this.clipPath, y = {
          version: e.version,
          objects: this._toObjects(p, v)
        };
        return b && !b.excludeFromExport && (y.clipPath = this._toObject(this.clipPath, p, v)), l(y, this.__serializeBgOverlay(p, v)), e.util.populateWithProperties(this, y, v), y;
      },
      _toObjects: function(p, v) {
        return this._objects.filter(function(b) {
          return !b.excludeFromExport;
        }).map(function(b) {
          return this._toObject(b, p, v);
        }, this);
      },
      _toObject: function(p, v, b) {
        var y;
        this.includeDefaultValues || (y = p.includeDefaultValues, p.includeDefaultValues = !1);
        var w = p[v](b);
        return this.includeDefaultValues || (p.includeDefaultValues = y), w;
      },
      __serializeBgOverlay: function(p, v) {
        var b = {}, y = this.backgroundImage, w = this.overlayImage, _ = this.backgroundColor, S = this.overlayColor;
        return _ && _.toObject ? _.excludeFromExport || (b.background = _.toObject(v)) : _ && (b.background = _), S && S.toObject ? S.excludeFromExport || (b.overlay = S.toObject(v)) : S && (b.overlay = S), y && !y.excludeFromExport && (b.backgroundImage = this._toObject(y, p, v)), w && !w.excludeFromExport && (b.overlayImage = this._toObject(w, p, v)), b;
      },
      svgViewportTransformation: !0,
      toSVG: function(p, v) {
        p || (p = {}), p.reviver = v;
        var b = [];
        return this._setSVGPreamble(b, p), this._setSVGHeader(b, p), this.clipPath && b.push('<g clip-path="url(#' + this.clipPath.clipPathId + `)" >
`), this._setSVGBgOverlayColor(b, "background"), this._setSVGBgOverlayImage(b, "backgroundImage", v), this._setSVGObjects(b, v), this.clipPath && b.push(`</g>
`), this._setSVGBgOverlayColor(b, "overlay"), this._setSVGBgOverlayImage(b, "overlayImage", v), b.push("</svg>"), b.join("");
      },
      _setSVGPreamble: function(p, v) {
        v.suppressPreamble || p.push(
          '<?xml version="1.0" encoding="',
          v.encoding || "UTF-8",
          `" standalone="no" ?>
`,
          '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',
          `"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`
        );
      },
      _setSVGHeader: function(p, v) {
        var b = v.width || this.width, y = v.height || this.height, w, _ = 'viewBox="0 0 ' + this.width + " " + this.height + '" ', S = e.Object.NUM_FRACTION_DIGITS;
        v.viewBox ? _ = 'viewBox="' + v.viewBox.x + " " + v.viewBox.y + " " + v.viewBox.width + " " + v.viewBox.height + '" ' : this.svgViewportTransformation && (w = this.viewportTransform, _ = 'viewBox="' + h(-w[4] / w[0], S) + " " + h(-w[5] / w[3], S) + " " + h(this.width / w[0], S) + " " + h(this.height / w[3], S) + '" '), p.push(
          "<svg ",
          'xmlns="http://www.w3.org/2000/svg" ',
          'xmlns:xlink="http://www.w3.org/1999/xlink" ',
          'version="1.1" ',
          'width="',
          b,
          '" ',
          'height="',
          y,
          '" ',
          _,
          `xml:space="preserve">
`,
          "<desc>Created with Fabric.js ",
          e.version,
          `</desc>
`,
          `<defs>
`,
          this.createSVGFontFacesMarkup(),
          this.createSVGRefElementsMarkup(),
          this.createSVGClipPathMarkup(v),
          `</defs>
`
        );
      },
      createSVGClipPathMarkup: function(p) {
        var v = this.clipPath;
        return v ? (v.clipPathId = "CLIPPATH_" + e.Object.__uid++, '<clipPath id="' + v.clipPathId + `" >
` + this.clipPath.toClipPathSVG(p.reviver) + `</clipPath>
`) : "";
      },
      createSVGRefElementsMarkup: function() {
        var p = this, v = ["background", "overlay"].map(function(b) {
          var y = p[b + "Color"];
          if (y && y.toLive) {
            var w = p[b + "Vpt"], _ = p.viewportTransform, S = {
              width: p.width / (w ? _[0] : 1),
              height: p.height / (w ? _[3] : 1)
            };
            return y.toSVG(
              S,
              { additionalTransform: w ? e.util.matrixToSVG(_) : "" }
            );
          }
        });
        return v.join("");
      },
      createSVGFontFacesMarkup: function() {
        var p = "", v = {}, b, y, w, _, S, C, k, R, B, N = e.fontPaths, K = [];
        for (this._objects.forEach(function G(W) {
          K.push(W), W._objects && W._objects.forEach(G);
        }), R = 0, B = K.length; R < B; R++)
          if (b = K[R], y = b.fontFamily, !(b.type.indexOf("text") === -1 || v[y] || !N[y]) && (v[y] = !0, !!b.styles)) {
            w = b.styles;
            for (S in w) {
              _ = w[S];
              for (k in _)
                C = _[k], y = C.fontFamily, !v[y] && N[y] && (v[y] = !0);
            }
          }
        for (var ee in v)
          p += [
            `		@font-face {
`,
            "			font-family: '",
            ee,
            `';
`,
            "			src: url('",
            N[ee],
            `');
`,
            `		}
`
          ].join("");
        return p && (p = [
          '	<style type="text/css">',
          `<![CDATA[
`,
          p,
          "]]>",
          `</style>
`
        ].join("")), p;
      },
      _setSVGObjects: function(p, v) {
        var b, y, w, _ = this._objects;
        for (y = 0, w = _.length; y < w; y++)
          b = _[y], !b.excludeFromExport && this._setSVGObject(p, b, v);
      },
      _setSVGObject: function(p, v, b) {
        p.push(v.toSVG(b));
      },
      _setSVGBgOverlayImage: function(p, v, b) {
        this[v] && !this[v].excludeFromExport && this[v].toSVG && p.push(this[v].toSVG(b));
      },
      _setSVGBgOverlayColor: function(p, v) {
        var b = this[v + "Color"], y = this.viewportTransform, w = this.width, _ = this.height;
        if (!!b)
          if (b.toLive) {
            var S = b.repeat, C = e.util.invertTransform(y), k = this[v + "Vpt"], R = k ? e.util.matrixToSVG(C) : "";
            p.push(
              '<rect transform="' + R + " translate(",
              w / 2,
              ",",
              _ / 2,
              ')"',
              ' x="',
              b.offsetX - w / 2,
              '" y="',
              b.offsetY - _ / 2,
              '" ',
              'width="',
              S === "repeat-y" || S === "no-repeat" ? b.source.width : w,
              '" height="',
              S === "repeat-x" || S === "no-repeat" ? b.source.height : _,
              '" fill="url(#SVGID_' + b.id + ')"',
              `></rect>
`
            );
          } else
            p.push(
              '<rect x="0" y="0" width="100%" height="100%" ',
              'fill="',
              b,
              '"',
              `></rect>
`
            );
      },
      sendToBack: function(p) {
        if (!p)
          return this;
        var v = this._activeObject, b, y, w;
        if (p === v && p.type === "activeSelection")
          for (w = v._objects, b = w.length; b--; )
            y = w[b], a(this._objects, y), this._objects.unshift(y);
        else
          a(this._objects, p), this._objects.unshift(p);
        return this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      bringToFront: function(p) {
        if (!p)
          return this;
        var v = this._activeObject, b, y, w;
        if (p === v && p.type === "activeSelection")
          for (w = v._objects, b = 0; b < w.length; b++)
            y = w[b], a(this._objects, y), this._objects.push(y);
        else
          a(this._objects, p), this._objects.push(p);
        return this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      sendBackwards: function(p, v) {
        if (!p)
          return this;
        var b = this._activeObject, y, w, _, S, C, k = 0;
        if (p === b && p.type === "activeSelection")
          for (C = b._objects, y = 0; y < C.length; y++)
            w = C[y], _ = this._objects.indexOf(w), _ > 0 + k && (S = _ - 1, a(this._objects, w), this._objects.splice(S, 0, w)), k++;
        else
          _ = this._objects.indexOf(p), _ !== 0 && (S = this._findNewLowerIndex(p, _, v), a(this._objects, p), this._objects.splice(S, 0, p));
        return this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      _findNewLowerIndex: function(p, v, b) {
        var y, w;
        if (b)
          for (y = v, w = v - 1; w >= 0; --w) {
            var _ = p.intersectsWithObject(this._objects[w]) || p.isContainedWithinObject(this._objects[w]) || this._objects[w].isContainedWithinObject(p);
            if (_) {
              y = w;
              break;
            }
          }
        else
          y = v - 1;
        return y;
      },
      bringForward: function(p, v) {
        if (!p)
          return this;
        var b = this._activeObject, y, w, _, S, C, k = 0;
        if (p === b && p.type === "activeSelection")
          for (C = b._objects, y = C.length; y--; )
            w = C[y], _ = this._objects.indexOf(w), _ < this._objects.length - 1 - k && (S = _ + 1, a(this._objects, w), this._objects.splice(S, 0, w)), k++;
        else
          _ = this._objects.indexOf(p), _ !== this._objects.length - 1 && (S = this._findNewUpperIndex(p, _, v), a(this._objects, p), this._objects.splice(S, 0, p));
        return this.renderOnAddRemove && this.requestRenderAll(), this;
      },
      _findNewUpperIndex: function(p, v, b) {
        var y, w, _;
        if (b)
          for (y = v, w = v + 1, _ = this._objects.length; w < _; ++w) {
            var S = p.intersectsWithObject(this._objects[w]) || p.isContainedWithinObject(this._objects[w]) || this._objects[w].isContainedWithinObject(p);
            if (S) {
              y = w;
              break;
            }
          }
        else
          y = v + 1;
        return y;
      },
      moveTo: function(p, v) {
        return a(this._objects, p), this._objects.splice(v, 0, p), this.renderOnAddRemove && this.requestRenderAll();
      },
      dispose: function() {
        return this.isRendering && (e.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.forEachObject(function(p) {
          p.dispose && p.dispose();
        }), this._objects = [], this.backgroundImage && this.backgroundImage.dispose && this.backgroundImage.dispose(), this.backgroundImage = null, this.overlayImage && this.overlayImage.dispose && this.overlayImage.dispose(), this.overlayImage = null, this._iTextInstances = null, this.contextContainer = null, this.lowerCanvasEl.classList.remove("lower-canvas"), e.util.setStyle(this.lowerCanvasEl, this._originalCanvasStyle), delete this._originalCanvasStyle, this.lowerCanvasEl.setAttribute("width", this.width), this.lowerCanvasEl.setAttribute("height", this.height), e.util.cleanUpJsdomNode(this.lowerCanvasEl), this.lowerCanvasEl = void 0, this;
      },
      toString: function() {
        return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>";
      }
    }), l(e.StaticCanvas.prototype, e.Observable), l(e.StaticCanvas.prototype, e.Collection), l(e.StaticCanvas.prototype, e.DataURLExporter), l(e.StaticCanvas, {
      EMPTY_JSON: '{"objects": [], "background": "white"}',
      supports: function(p) {
        var v = d();
        if (!v || !v.getContext)
          return null;
        var b = v.getContext("2d");
        if (!b)
          return null;
        switch (p) {
          case "setLineDash":
            return typeof b.setLineDash < "u";
          default:
            return null;
        }
      }
    }), e.StaticCanvas.prototype.toJSON = e.StaticCanvas.prototype.toObject, e.isLikelyNode && (e.StaticCanvas.prototype.createPNGStream = function() {
      var p = c(this.lowerCanvasEl);
      return p && p.createPNGStream();
    }, e.StaticCanvas.prototype.createJPEGStream = function(p) {
      var v = c(this.lowerCanvasEl);
      return v && v.createJPEGStream(p);
    });
  }(), e.BaseBrush = e.util.createClass({
    color: "rgb(0, 0, 0)",
    width: 1,
    shadow: null,
    strokeLineCap: "round",
    strokeLineJoin: "round",
    strokeMiterLimit: 10,
    strokeDashArray: null,
    limitedToCanvasSize: !1,
    _setBrushStyles: function(l) {
      l.strokeStyle = this.color, l.lineWidth = this.width, l.lineCap = this.strokeLineCap, l.miterLimit = this.strokeMiterLimit, l.lineJoin = this.strokeLineJoin, l.setLineDash(this.strokeDashArray || []);
    },
    _saveAndTransform: function(l) {
      var n = this.canvas.viewportTransform;
      l.save(), l.transform(n[0], n[1], n[2], n[3], n[4], n[5]);
    },
    _setShadow: function() {
      if (!!this.shadow) {
        var l = this.canvas, n = this.shadow, a = l.contextTop, h = l.getZoom();
        l && l._isRetinaScaling() && (h *= e.devicePixelRatio), a.shadowColor = n.color, a.shadowBlur = n.blur * h, a.shadowOffsetX = n.offsetX * h, a.shadowOffsetY = n.offsetY * h;
      }
    },
    needsFullRender: function() {
      var l = new e.Color(this.color);
      return l.getAlpha() < 1 || !!this.shadow;
    },
    _resetShadow: function() {
      var l = this.canvas.contextTop;
      l.shadowColor = "", l.shadowBlur = l.shadowOffsetX = l.shadowOffsetY = 0;
    },
    _isOutSideCanvas: function(l) {
      return l.x < 0 || l.x > this.canvas.getWidth() || l.y < 0 || l.y > this.canvas.getHeight();
    }
  }), function() {
    e.PencilBrush = e.util.createClass(e.BaseBrush, {
      decimate: 0.4,
      drawStraightLine: !1,
      straightLineKey: "shiftKey",
      initialize: function(l) {
        this.canvas = l, this._points = [];
      },
      needsFullRender: function() {
        return this.callSuper("needsFullRender") || this._hasStraightLine;
      },
      _drawSegment: function(l, n, a) {
        var h = n.midPointFrom(a);
        return l.quadraticCurveTo(n.x, n.y, h.x, h.y), h;
      },
      onMouseDown: function(l, n) {
        !this.canvas._isMainEvent(n.e) || (this.drawStraightLine = n.e[this.straightLineKey], this._prepareForDrawing(l), this._captureDrawingPath(l), this._render());
      },
      onMouseMove: function(l, n) {
        if (!!this.canvas._isMainEvent(n.e) && (this.drawStraightLine = n.e[this.straightLineKey], !(this.limitedToCanvasSize === !0 && this._isOutSideCanvas(l)) && this._captureDrawingPath(l) && this._points.length > 1))
          if (this.needsFullRender())
            this.canvas.clearContext(this.canvas.contextTop), this._render();
          else {
            var a = this._points, h = a.length, o = this.canvas.contextTop;
            this._saveAndTransform(o), this.oldEnd && (o.beginPath(), o.moveTo(this.oldEnd.x, this.oldEnd.y)), this.oldEnd = this._drawSegment(o, a[h - 2], a[h - 1], !0), o.stroke(), o.restore();
          }
      },
      onMouseUp: function(l) {
        return this.canvas._isMainEvent(l.e) ? (this.drawStraightLine = !1, this.oldEnd = void 0, this._finalizeAndAddPath(), !1) : !0;
      },
      _prepareForDrawing: function(l) {
        var n = new e.Point(l.x, l.y);
        this._reset(), this._addPoint(n), this.canvas.contextTop.moveTo(n.x, n.y);
      },
      _addPoint: function(l) {
        return this._points.length > 1 && l.eq(this._points[this._points.length - 1]) ? !1 : (this.drawStraightLine && this._points.length > 1 && (this._hasStraightLine = !0, this._points.pop()), this._points.push(l), !0);
      },
      _reset: function() {
        this._points = [], this._setBrushStyles(this.canvas.contextTop), this._setShadow(), this._hasStraightLine = !1;
      },
      _captureDrawingPath: function(l) {
        var n = new e.Point(l.x, l.y);
        return this._addPoint(n);
      },
      _render: function(l) {
        var n, a, h = this._points[0], o = this._points[1];
        if (l = l || this.canvas.contextTop, this._saveAndTransform(l), l.beginPath(), this._points.length === 2 && h.x === o.x && h.y === o.y) {
          var u = this.width / 1e3;
          h = new e.Point(h.x, h.y), o = new e.Point(o.x, o.y), h.x -= u, o.x += u;
        }
        for (l.moveTo(h.x, h.y), n = 1, a = this._points.length; n < a; n++)
          this._drawSegment(l, h, o), h = this._points[n], o = this._points[n + 1];
        l.lineTo(h.x, h.y), l.stroke(), l.restore();
      },
      convertPointsToSVGPath: function(l) {
        var n = this.width / 1e3;
        return e.util.getSmoothPathFromPoints(l, n);
      },
      _isEmptySVGPath: function(l) {
        var n = e.util.joinPath(l);
        return n === "M 0 0 Q 0 0 0 0 L 0 0";
      },
      createPath: function(l) {
        var n = new e.Path(l, {
          fill: null,
          stroke: this.color,
          strokeWidth: this.width,
          strokeLineCap: this.strokeLineCap,
          strokeMiterLimit: this.strokeMiterLimit,
          strokeLineJoin: this.strokeLineJoin,
          strokeDashArray: this.strokeDashArray
        });
        return this.shadow && (this.shadow.affectStroke = !0, n.shadow = new e.Shadow(this.shadow)), n;
      },
      decimatePoints: function(l, n) {
        if (l.length <= 2)
          return l;
        var a = this.canvas.getZoom(), h = Math.pow(n / a, 2), o, u = l.length - 1, c = l[0], d = [c], m;
        for (o = 1; o < u - 1; o++)
          m = Math.pow(c.x - l[o].x, 2) + Math.pow(c.y - l[o].y, 2), m >= h && (c = l[o], d.push(c));
        return d.push(l[u]), d;
      },
      _finalizeAndAddPath: function() {
        var l = this.canvas.contextTop;
        l.closePath(), this.decimate && (this._points = this.decimatePoints(this._points, this.decimate));
        var n = this.convertPointsToSVGPath(this._points);
        if (this._isEmptySVGPath(n)) {
          this.canvas.requestRenderAll();
          return;
        }
        var a = this.createPath(n);
        this.canvas.clearContext(this.canvas.contextTop), this.canvas.fire("before:path:created", { path: a }), this.canvas.add(a), this.canvas.requestRenderAll(), a.setCoords(), this._resetShadow(), this.canvas.fire("path:created", { path: a });
      }
    });
  }(), e.CircleBrush = e.util.createClass(e.BaseBrush, {
    width: 10,
    initialize: function(l) {
      this.canvas = l, this.points = [];
    },
    drawDot: function(l) {
      var n = this.addPoint(l), a = this.canvas.contextTop;
      this._saveAndTransform(a), this.dot(a, n), a.restore();
    },
    dot: function(l, n) {
      l.fillStyle = n.fill, l.beginPath(), l.arc(n.x, n.y, n.radius, 0, Math.PI * 2, !1), l.closePath(), l.fill();
    },
    onMouseDown: function(l) {
      this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(l);
    },
    _render: function() {
      var l = this.canvas.contextTop, n, a, h = this.points;
      for (this._saveAndTransform(l), n = 0, a = h.length; n < a; n++)
        this.dot(l, h[n]);
      l.restore();
    },
    onMouseMove: function(l) {
      this.limitedToCanvasSize === !0 && this._isOutSideCanvas(l) || (this.needsFullRender() ? (this.canvas.clearContext(this.canvas.contextTop), this.addPoint(l), this._render()) : this.drawDot(l));
    },
    onMouseUp: function() {
      var l = this.canvas.renderOnAddRemove, n, a;
      this.canvas.renderOnAddRemove = !1;
      var h = [];
      for (n = 0, a = this.points.length; n < a; n++) {
        var o = this.points[n], u = new e.Circle({
          radius: o.radius,
          left: o.x,
          top: o.y,
          originX: "center",
          originY: "center",
          fill: o.fill
        });
        this.shadow && (u.shadow = new e.Shadow(this.shadow)), h.push(u);
      }
      var c = new e.Group(h);
      c.canvas = this.canvas, this.canvas.fire("before:path:created", { path: c }), this.canvas.add(c), this.canvas.fire("path:created", { path: c }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = l, this.canvas.requestRenderAll();
    },
    addPoint: function(l) {
      var n = new e.Point(l.x, l.y), a = e.util.getRandomInt(
        Math.max(0, this.width - 20),
        this.width + 20
      ) / 2, h = new e.Color(this.color).setAlpha(e.util.getRandomInt(0, 100) / 100).toRgba();
      return n.radius = a, n.fill = h, this.points.push(n), n;
    }
  }), e.SprayBrush = e.util.createClass(e.BaseBrush, {
    width: 10,
    density: 20,
    dotWidth: 1,
    dotWidthVariance: 1,
    randomOpacity: !1,
    optimizeOverlapping: !0,
    initialize: function(l) {
      this.canvas = l, this.sprayChunks = [];
    },
    onMouseDown: function(l) {
      this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(l), this.render(this.sprayChunkPoints);
    },
    onMouseMove: function(l) {
      this.limitedToCanvasSize === !0 && this._isOutSideCanvas(l) || (this.addSprayChunk(l), this.render(this.sprayChunkPoints));
    },
    onMouseUp: function() {
      var l = this.canvas.renderOnAddRemove;
      this.canvas.renderOnAddRemove = !1;
      for (var n = [], a = 0, h = this.sprayChunks.length; a < h; a++)
        for (var o = this.sprayChunks[a], u = 0, c = o.length; u < c; u++) {
          var d = new e.Rect({
            width: o[u].width,
            height: o[u].width,
            left: o[u].x + 1,
            top: o[u].y + 1,
            originX: "center",
            originY: "center",
            fill: this.color
          });
          n.push(d);
        }
      this.optimizeOverlapping && (n = this._getOptimizedRects(n));
      var m = new e.Group(n);
      this.shadow && m.set("shadow", new e.Shadow(this.shadow)), this.canvas.fire("before:path:created", { path: m }), this.canvas.add(m), this.canvas.fire("path:created", { path: m }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = l, this.canvas.requestRenderAll();
    },
    _getOptimizedRects: function(l) {
      var n = {}, a, h, o;
      for (h = 0, o = l.length; h < o; h++)
        a = l[h].left + "" + l[h].top, n[a] || (n[a] = l[h]);
      var u = [];
      for (a in n)
        u.push(n[a]);
      return u;
    },
    render: function(l) {
      var n = this.canvas.contextTop, a, h;
      for (n.fillStyle = this.color, this._saveAndTransform(n), a = 0, h = l.length; a < h; a++) {
        var o = l[a];
        typeof o.opacity < "u" && (n.globalAlpha = o.opacity), n.fillRect(o.x, o.y, o.width, o.width);
      }
      n.restore();
    },
    _render: function() {
      var l = this.canvas.contextTop, n, a;
      for (l.fillStyle = this.color, this._saveAndTransform(l), n = 0, a = this.sprayChunks.length; n < a; n++)
        this.render(this.sprayChunks[n]);
      l.restore();
    },
    addSprayChunk: function(l) {
      this.sprayChunkPoints = [];
      var n, a, h, o = this.width / 2, u;
      for (u = 0; u < this.density; u++) {
        n = e.util.getRandomInt(l.x - o, l.x + o), a = e.util.getRandomInt(l.y - o, l.y + o), this.dotWidthVariance ? h = e.util.getRandomInt(
          Math.max(1, this.dotWidth - this.dotWidthVariance),
          this.dotWidth + this.dotWidthVariance
        ) : h = this.dotWidth;
        var c = new e.Point(n, a);
        c.width = h, this.randomOpacity && (c.opacity = e.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(c);
      }
      this.sprayChunks.push(this.sprayChunkPoints);
    }
  }), e.PatternBrush = e.util.createClass(e.PencilBrush, {
    getPatternSrc: function() {
      var l = 20, n = 5, a = e.util.createCanvasElement(), h = a.getContext("2d");
      return a.width = a.height = l + n, h.fillStyle = this.color, h.beginPath(), h.arc(l / 2, l / 2, l / 2, 0, Math.PI * 2, !1), h.closePath(), h.fill(), a;
    },
    getPatternSrcFunction: function() {
      return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"');
    },
    getPattern: function(l) {
      return l.createPattern(this.source || this.getPatternSrc(), "repeat");
    },
    _setBrushStyles: function(l) {
      this.callSuper("_setBrushStyles", l), l.strokeStyle = this.getPattern(l);
    },
    createPath: function(l) {
      var n = this.callSuper("createPath", l), a = n._getLeftTopCoords().scalarAdd(n.strokeWidth / 2);
      return n.stroke = new e.Pattern({
        source: this.source || this.getPatternSrcFunction(),
        offsetX: -a.x,
        offsetY: -a.y
      }), n;
    }
  }), function() {
    var l = e.util.getPointer, n = e.util.degreesToRadians, a = e.util.isTouchEvent;
    e.Canvas = e.util.createClass(e.StaticCanvas, {
      initialize: function(o, u) {
        u || (u = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(o, u), this._initInteractive(), this._createCacheCanvas();
      },
      uniformScaling: !0,
      uniScaleKey: "shiftKey",
      centeredScaling: !1,
      centeredRotation: !1,
      centeredKey: "altKey",
      altActionKey: "shiftKey",
      interactive: !0,
      selection: !0,
      selectionKey: "shiftKey",
      altSelectionKey: null,
      selectionColor: "rgba(100, 100, 255, 0.3)",
      selectionDashArray: [],
      selectionBorderColor: "rgba(255, 255, 255, 0.3)",
      selectionLineWidth: 1,
      selectionFullyContained: !1,
      hoverCursor: "move",
      moveCursor: "move",
      defaultCursor: "default",
      freeDrawingCursor: "crosshair",
      notAllowedCursor: "not-allowed",
      containerClass: "canvas-container",
      perPixelTargetFind: !1,
      targetFindTolerance: 0,
      skipTargetFind: !1,
      isDrawingMode: !1,
      preserveObjectStacking: !1,
      snapAngle: 0,
      snapThreshold: null,
      stopContextMenu: !1,
      fireRightClick: !1,
      fireMiddleClick: !1,
      targets: [],
      enablePointerEvents: !1,
      _hoveredTarget: null,
      _hoveredTargets: [],
      _initInteractive: function() {
        this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this._initRetinaScaling(), this.freeDrawingBrush = e.PencilBrush && new e.PencilBrush(this), this.calcOffset();
      },
      _chooseObjectsToRender: function() {
        var o = this.getActiveObjects(), u, c, d;
        if (o.length > 0 && !this.preserveObjectStacking) {
          c = [], d = [];
          for (var m = 0, p = this._objects.length; m < p; m++)
            u = this._objects[m], o.indexOf(u) === -1 ? c.push(u) : d.push(u);
          o.length > 1 && (this._activeObject._objects = d), c.push.apply(c, d);
        } else
          c = this._objects;
        return c;
      },
      renderAll: function() {
        this.contextTopDirty && !this._groupSelector && !this.isDrawingMode && (this.clearContext(this.contextTop), this.contextTopDirty = !1), this.hasLostContext && (this.renderTopLayer(this.contextTop), this.hasLostContext = !1);
        var o = this.contextContainer;
        return this.renderCanvas(o, this._chooseObjectsToRender()), this;
      },
      renderTopLayer: function(o) {
        o.save(), this.isDrawingMode && this._isCurrentlyDrawing && (this.freeDrawingBrush && this.freeDrawingBrush._render(), this.contextTopDirty = !0), this.selection && this._groupSelector && (this._drawSelection(o), this.contextTopDirty = !0), o.restore();
      },
      renderTop: function() {
        var o = this.contextTop;
        return this.clearContext(o), this.renderTopLayer(o), this.fire("after:render"), this;
      },
      _normalizePointer: function(o, u) {
        var c = o.calcTransformMatrix(), d = e.util.invertTransform(c), m = this.restorePointerVpt(u);
        return e.util.transformPoint(m, d);
      },
      isTargetTransparent: function(o, u, c) {
        if (o.shouldCache() && o._cacheCanvas && o !== this._activeObject) {
          var d = this._normalizePointer(o, { x: u, y: c }), m = Math.max(o.cacheTranslationX + d.x * o.zoomX, 0), p = Math.max(o.cacheTranslationY + d.y * o.zoomY, 0), w = e.util.isTransparent(
            o._cacheContext,
            Math.round(m),
            Math.round(p),
            this.targetFindTolerance
          );
          return w;
        }
        var v = this.contextCache, b = o.selectionBackgroundColor, y = this.viewportTransform;
        o.selectionBackgroundColor = "", this.clearContext(v), v.save(), v.transform(y[0], y[1], y[2], y[3], y[4], y[5]), o.render(v), v.restore(), o.selectionBackgroundColor = b;
        var w = e.util.isTransparent(
          v,
          u,
          c,
          this.targetFindTolerance
        );
        return w;
      },
      _isSelectionKeyPressed: function(o) {
        var u = !1;
        return Array.isArray(this.selectionKey) ? u = !!this.selectionKey.find(function(c) {
          return o[c] === !0;
        }) : u = o[this.selectionKey], u;
      },
      _shouldClearSelection: function(o, u) {
        var c = this.getActiveObjects(), d = this._activeObject;
        return !u || u && d && c.length > 1 && c.indexOf(u) === -1 && d !== u && !this._isSelectionKeyPressed(o) || u && !u.evented || u && !u.selectable && d && d !== u;
      },
      _shouldCenterTransform: function(o, u, c) {
        if (!!o) {
          var d;
          return u === "scale" || u === "scaleX" || u === "scaleY" || u === "resizing" ? d = this.centeredScaling || o.centeredScaling : u === "rotate" && (d = this.centeredRotation || o.centeredRotation), d ? !c : c;
        }
      },
      _getOriginFromCorner: function(o, u) {
        var c = {
          x: o.originX,
          y: o.originY
        };
        return u === "ml" || u === "tl" || u === "bl" ? c.x = "right" : (u === "mr" || u === "tr" || u === "br") && (c.x = "left"), u === "tl" || u === "mt" || u === "tr" ? c.y = "bottom" : (u === "bl" || u === "mb" || u === "br") && (c.y = "top"), c;
      },
      _getActionFromCorner: function(o, u, c, d) {
        if (!u || !o)
          return "drag";
        var m = d.controls[u];
        return m.getActionName(c, m, d);
      },
      _setupCurrentTransform: function(o, u, c) {
        if (!!u) {
          var d = this.getPointer(o), m = u.__corner, p = u.controls[m], v = c && m ? p.getActionHandler(o, u, p) : e.controlsUtils.dragHandler, b = this._getActionFromCorner(c, m, o, u), y = this._getOriginFromCorner(u, m), w = o[this.centeredKey], _ = {
            target: u,
            action: b,
            actionHandler: v,
            corner: m,
            scaleX: u.scaleX,
            scaleY: u.scaleY,
            skewX: u.skewX,
            skewY: u.skewY,
            offsetX: d.x - u.left,
            offsetY: d.y - u.top,
            originX: y.x,
            originY: y.y,
            ex: d.x,
            ey: d.y,
            lastX: d.x,
            lastY: d.y,
            theta: n(u.angle),
            width: u.width * u.scaleX,
            shiftKey: o.shiftKey,
            altKey: w,
            original: e.util.saveObjectTransform(u)
          };
          this._shouldCenterTransform(u, b, w) && (_.originX = "center", _.originY = "center"), _.original.originX = y.x, _.original.originY = y.y, this._currentTransform = _, this._beforeTransform(o);
        }
      },
      setCursor: function(o) {
        this.upperCanvasEl.style.cursor = o;
      },
      _drawSelection: function(o) {
        var u = this._groupSelector, c = new e.Point(u.ex, u.ey), d = e.util.transformPoint(c, this.viewportTransform), m = new e.Point(u.ex + u.left, u.ey + u.top), p = e.util.transformPoint(m, this.viewportTransform), v = Math.min(d.x, p.x), b = Math.min(d.y, p.y), y = Math.max(d.x, p.x), w = Math.max(d.y, p.y), _ = this.selectionLineWidth / 2;
        this.selectionColor && (o.fillStyle = this.selectionColor, o.fillRect(v, b, y - v, w - b)), !(!this.selectionLineWidth || !this.selectionBorderColor) && (o.lineWidth = this.selectionLineWidth, o.strokeStyle = this.selectionBorderColor, v += _, b += _, y -= _, w -= _, e.Object.prototype._setLineDash.call(this, o, this.selectionDashArray), o.strokeRect(v, b, y - v, w - b));
      },
      findTarget: function(o, u) {
        if (!this.skipTargetFind) {
          var c = !0, d = this.getPointer(o, c), m = this._activeObject, p = this.getActiveObjects(), v, b, y = a(o), w = p.length > 1 && !u || p.length === 1;
          if (this.targets = [], w && m._findTargetCorner(d, y) || p.length > 1 && !u && m === this._searchPossibleTargets([m], d))
            return m;
          if (p.length === 1 && m === this._searchPossibleTargets([m], d))
            if (this.preserveObjectStacking)
              v = m, b = this.targets, this.targets = [];
            else
              return m;
          var _ = this._searchPossibleTargets(this._objects, d);
          return o[this.altSelectionKey] && _ && v && _ !== v && (_ = v, this.targets = b), _;
        }
      },
      _checkTarget: function(o, u, c) {
        if (u && u.visible && u.evented && u.containsPoint(o))
          if ((this.perPixelTargetFind || u.perPixelTargetFind) && !u.isEditing) {
            var d = this.isTargetTransparent(u, c.x, c.y);
            if (!d)
              return !0;
          } else
            return !0;
      },
      _searchPossibleTargets: function(o, u) {
        for (var c, d = o.length, m; d--; ) {
          var p = o[d], v = p.group ? this._normalizePointer(p.group, u) : u;
          if (this._checkTarget(v, p, u)) {
            c = o[d], c.subTargetCheck && c instanceof e.Group && (m = this._searchPossibleTargets(c._objects, u), m && this.targets.push(m));
            break;
          }
        }
        return c;
      },
      restorePointerVpt: function(o) {
        return e.util.transformPoint(
          o,
          e.util.invertTransform(this.viewportTransform)
        );
      },
      getPointer: function(o, u) {
        if (this._absolutePointer && !u)
          return this._absolutePointer;
        if (this._pointer && u)
          return this._pointer;
        var c = l(o), d = this.upperCanvasEl, m = d.getBoundingClientRect(), p = m.width || 0, v = m.height || 0, b;
        (!p || !v) && ("top" in m && "bottom" in m && (v = Math.abs(m.top - m.bottom)), "right" in m && "left" in m && (p = Math.abs(m.right - m.left))), this.calcOffset(), c.x = c.x - this._offset.left, c.y = c.y - this._offset.top, u || (c = this.restorePointerVpt(c));
        var y = this.getRetinaScaling();
        return y !== 1 && (c.x /= y, c.y /= y), p === 0 || v === 0 ? b = { width: 1, height: 1 } : b = {
          width: d.width / p,
          height: d.height / v
        }, {
          x: c.x * b.width,
          y: c.y * b.height
        };
      },
      _createUpperCanvas: function() {
        var o = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, ""), u = this.lowerCanvasEl, c = this.upperCanvasEl;
        c ? c.className = "" : (c = this._createCanvasElement(), this.upperCanvasEl = c), e.util.addClass(c, "upper-canvas " + o), this.wrapperEl.appendChild(c), this._copyCanvasStyle(u, c), this._applyCanvasStyle(c), this.contextTop = c.getContext("2d");
      },
      getTopContext: function() {
        return this.contextTop;
      },
      _createCacheCanvas: function() {
        this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d");
      },
      _initWrapperElement: function() {
        this.wrapperEl = e.util.wrapElement(this.lowerCanvasEl, "div", {
          class: this.containerClass
        }), e.util.setStyle(this.wrapperEl, {
          width: this.width + "px",
          height: this.height + "px",
          position: "relative"
        }), e.util.makeElementUnselectable(this.wrapperEl);
      },
      _applyCanvasStyle: function(o) {
        var u = this.width || o.width, c = this.height || o.height;
        e.util.setStyle(o, {
          position: "absolute",
          width: u + "px",
          height: c + "px",
          left: 0,
          top: 0,
          "touch-action": this.allowTouchScrolling ? "manipulation" : "none",
          "-ms-touch-action": this.allowTouchScrolling ? "manipulation" : "none"
        }), o.width = u, o.height = c, e.util.makeElementUnselectable(o);
      },
      _copyCanvasStyle: function(o, u) {
        u.style.cssText = o.style.cssText;
      },
      getSelectionContext: function() {
        return this.contextTop;
      },
      getSelectionElement: function() {
        return this.upperCanvasEl;
      },
      getActiveObject: function() {
        return this._activeObject;
      },
      getActiveObjects: function() {
        var o = this._activeObject;
        return o ? o.type === "activeSelection" && o._objects ? o._objects.slice(0) : [o] : [];
      },
      _onObjectRemoved: function(o) {
        o === this._activeObject && (this.fire("before:selection:cleared", { target: o }), this._discardActiveObject(), this.fire("selection:cleared", { target: o }), o.fire("deselected")), o === this._hoveredTarget && (this._hoveredTarget = null, this._hoveredTargets = []), this.callSuper("_onObjectRemoved", o);
      },
      _fireSelectionEvents: function(o, u) {
        var c = !1, d = this.getActiveObjects(), m = [], p = [];
        o.forEach(function(v) {
          d.indexOf(v) === -1 && (c = !0, v.fire("deselected", {
            e: u,
            target: v
          }), p.push(v));
        }), d.forEach(function(v) {
          o.indexOf(v) === -1 && (c = !0, v.fire("selected", {
            e: u,
            target: v
          }), m.push(v));
        }), o.length > 0 && d.length > 0 ? c && this.fire("selection:updated", {
          e: u,
          selected: m,
          deselected: p
        }) : d.length > 0 ? this.fire("selection:created", {
          e: u,
          selected: m
        }) : o.length > 0 && this.fire("selection:cleared", {
          e: u,
          deselected: p
        });
      },
      setActiveObject: function(o, u) {
        var c = this.getActiveObjects();
        return this._setActiveObject(o, u), this._fireSelectionEvents(c, u), this;
      },
      _setActiveObject: function(o, u) {
        return this._activeObject === o || !this._discardActiveObject(u, o) || o.onSelect({ e: u }) ? !1 : (this._activeObject = o, !0);
      },
      _discardActiveObject: function(o, u) {
        var c = this._activeObject;
        if (c) {
          if (c.onDeselect({ e: o, object: u }))
            return !1;
          this._activeObject = null;
        }
        return !0;
      },
      discardActiveObject: function(o) {
        var u = this.getActiveObjects(), c = this.getActiveObject();
        return u.length && this.fire("before:selection:cleared", { target: c, e: o }), this._discardActiveObject(o), this._fireSelectionEvents(u, o), this;
      },
      dispose: function() {
        var o = this.wrapperEl;
        return this.removeListeners(), o.removeChild(this.upperCanvasEl), o.removeChild(this.lowerCanvasEl), this.contextCache = null, this.contextTop = null, ["upperCanvasEl", "cacheCanvasEl"].forEach(function(u) {
          e.util.cleanUpJsdomNode(this[u]), this[u] = void 0;
        }.bind(this)), o.parentNode && o.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl), delete this.wrapperEl, e.StaticCanvas.prototype.dispose.call(this), this;
      },
      clear: function() {
        return this.discardActiveObject(), this.clearContext(this.contextTop), this.callSuper("clear");
      },
      drawControls: function(o) {
        var u = this._activeObject;
        u && u._renderControls(o);
      },
      _toObject: function(o, u, c) {
        var d = this._realizeGroupTransformOnObject(o), m = this.callSuper("_toObject", o, u, c);
        return this._unwindGroupTransformOnObject(o, d), m;
      },
      _realizeGroupTransformOnObject: function(o) {
        if (o.group && o.group.type === "activeSelection" && this._activeObject === o.group) {
          var u = ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"], c = {};
          return u.forEach(function(d) {
            c[d] = o[d];
          }), e.util.addTransformToObject(o, this._activeObject.calcOwnMatrix()), c;
        } else
          return null;
      },
      _unwindGroupTransformOnObject: function(o, u) {
        u && o.set(u);
      },
      _setSVGObject: function(o, u, c) {
        var d = this._realizeGroupTransformOnObject(u);
        this.callSuper("_setSVGObject", o, u, c), this._unwindGroupTransformOnObject(u, d);
      },
      setViewportTransform: function(o) {
        this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(), e.StaticCanvas.prototype.setViewportTransform.call(this, o);
      }
    });
    for (var h in e.StaticCanvas)
      h !== "prototype" && (e.Canvas[h] = e.StaticCanvas[h]);
  }(), function() {
    var l = e.util.addListener, n = e.util.removeListener, a = 3, h = 2, o = 1, u = { passive: !1 };
    function c(d, m) {
      return d.button && d.button === m - 1;
    }
    e.util.object.extend(e.Canvas.prototype, {
      mainTouchId: null,
      _initEventListeners: function() {
        this.removeListeners(), this._bindEvents(), this.addOrRemove(l, "add");
      },
      _getEventPrefix: function() {
        return this.enablePointerEvents ? "pointer" : "mouse";
      },
      addOrRemove: function(d, m) {
        var p = this.upperCanvasEl, v = this._getEventPrefix();
        d(e.window, "resize", this._onResize), d(p, v + "down", this._onMouseDown), d(p, v + "move", this._onMouseMove, u), d(p, v + "out", this._onMouseOut), d(p, v + "enter", this._onMouseEnter), d(p, "wheel", this._onMouseWheel), d(p, "contextmenu", this._onContextMenu), d(p, "dblclick", this._onDoubleClick), d(p, "dragover", this._onDragOver), d(p, "dragenter", this._onDragEnter), d(p, "dragleave", this._onDragLeave), d(p, "drop", this._onDrop), this.enablePointerEvents || d(p, "touchstart", this._onTouchStart, u), typeof eventjs < "u" && m in eventjs && (eventjs[m](p, "gesture", this._onGesture), eventjs[m](p, "drag", this._onDrag), eventjs[m](p, "orientation", this._onOrientationChange), eventjs[m](p, "shake", this._onShake), eventjs[m](p, "longpress", this._onLongPress));
      },
      removeListeners: function() {
        this.addOrRemove(n, "remove");
        var d = this._getEventPrefix();
        n(e.document, d + "up", this._onMouseUp), n(e.document, "touchend", this._onTouchEnd, u), n(e.document, d + "move", this._onMouseMove, u), n(e.document, "touchmove", this._onMouseMove, u);
      },
      _bindEvents: function() {
        this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this), this._onTouchStart = this._onTouchStart.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onTouchEnd = this._onTouchEnd.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this), this._onMouseOut = this._onMouseOut.bind(this), this._onMouseEnter = this._onMouseEnter.bind(this), this._onContextMenu = this._onContextMenu.bind(this), this._onDoubleClick = this._onDoubleClick.bind(this), this._onDragOver = this._onDragOver.bind(this), this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"), this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"), this._onDrop = this._onDrop.bind(this), this.eventsBound = !0);
      },
      _onGesture: function(d, m) {
        this.__onTransformGesture && this.__onTransformGesture(d, m);
      },
      _onDrag: function(d, m) {
        this.__onDrag && this.__onDrag(d, m);
      },
      _onMouseWheel: function(d) {
        this.__onMouseWheel(d);
      },
      _onMouseOut: function(d) {
        var m = this._hoveredTarget;
        this.fire("mouse:out", { target: m, e: d }), this._hoveredTarget = null, m && m.fire("mouseout", { e: d });
        var p = this;
        this._hoveredTargets.forEach(function(v) {
          p.fire("mouse:out", { target: m, e: d }), v && m.fire("mouseout", { e: d });
        }), this._hoveredTargets = [];
      },
      _onMouseEnter: function(d) {
        !this._currentTransform && !this.findTarget(d) && (this.fire("mouse:over", { target: null, e: d }), this._hoveredTarget = null, this._hoveredTargets = []);
      },
      _onOrientationChange: function(d, m) {
        this.__onOrientationChange && this.__onOrientationChange(d, m);
      },
      _onShake: function(d, m) {
        this.__onShake && this.__onShake(d, m);
      },
      _onLongPress: function(d, m) {
        this.__onLongPress && this.__onLongPress(d, m);
      },
      _onDragOver: function(d) {
        d.preventDefault();
        var m = this._simpleEventHandler("dragover", d);
        this._fireEnterLeaveEvents(m, d);
      },
      _onDrop: function(d) {
        return this._simpleEventHandler("drop:before", d), this._simpleEventHandler("drop", d);
      },
      _onContextMenu: function(d) {
        return this.stopContextMenu && (d.stopPropagation(), d.preventDefault()), !1;
      },
      _onDoubleClick: function(d) {
        this._cacheTransformEventData(d), this._handleEvent(d, "dblclick"), this._resetTransformEventData(d);
      },
      getPointerId: function(d) {
        var m = d.changedTouches;
        return m ? m[0] && m[0].identifier : this.enablePointerEvents ? d.pointerId : -1;
      },
      _isMainEvent: function(d) {
        return d.isPrimary === !0 ? !0 : d.isPrimary === !1 ? !1 : d.type === "touchend" && d.touches.length === 0 ? !0 : d.changedTouches ? d.changedTouches[0].identifier === this.mainTouchId : !0;
      },
      _onTouchStart: function(d) {
        d.preventDefault(), this.mainTouchId === null && (this.mainTouchId = this.getPointerId(d)), this.__onMouseDown(d), this._resetTransformEventData();
        var m = this.upperCanvasEl, p = this._getEventPrefix();
        l(e.document, "touchend", this._onTouchEnd, u), l(e.document, "touchmove", this._onMouseMove, u), n(m, p + "down", this._onMouseDown);
      },
      _onMouseDown: function(d) {
        this.__onMouseDown(d), this._resetTransformEventData();
        var m = this.upperCanvasEl, p = this._getEventPrefix();
        n(m, p + "move", this._onMouseMove, u), l(e.document, p + "up", this._onMouseUp), l(e.document, p + "move", this._onMouseMove, u);
      },
      _onTouchEnd: function(d) {
        if (!(d.touches.length > 0)) {
          this.__onMouseUp(d), this._resetTransformEventData(), this.mainTouchId = null;
          var m = this._getEventPrefix();
          n(e.document, "touchend", this._onTouchEnd, u), n(e.document, "touchmove", this._onMouseMove, u);
          var p = this;
          this._willAddMouseDown && clearTimeout(this._willAddMouseDown), this._willAddMouseDown = setTimeout(function() {
            l(p.upperCanvasEl, m + "down", p._onMouseDown), p._willAddMouseDown = 0;
          }, 400);
        }
      },
      _onMouseUp: function(d) {
        this.__onMouseUp(d), this._resetTransformEventData();
        var m = this.upperCanvasEl, p = this._getEventPrefix();
        this._isMainEvent(d) && (n(e.document, p + "up", this._onMouseUp), n(e.document, p + "move", this._onMouseMove, u), l(m, p + "move", this._onMouseMove, u));
      },
      _onMouseMove: function(d) {
        !this.allowTouchScrolling && d.preventDefault && d.preventDefault(), this.__onMouseMove(d);
      },
      _onResize: function() {
        this.calcOffset();
      },
      _shouldRender: function(d) {
        var m = this._activeObject;
        return !!m != !!d || m && d && m !== d ? !0 : (m && m.isEditing, !1);
      },
      __onMouseUp: function(d) {
        var m, p = this._currentTransform, v = this._groupSelector, b = !1, y = !v || v.left === 0 && v.top === 0;
        if (this._cacheTransformEventData(d), m = this._target, this._handleEvent(d, "up:before"), c(d, a)) {
          this.fireRightClick && this._handleEvent(d, "up", a, y);
          return;
        }
        if (c(d, h)) {
          this.fireMiddleClick && this._handleEvent(d, "up", h, y), this._resetTransformEventData();
          return;
        }
        if (this.isDrawingMode && this._isCurrentlyDrawing) {
          this._onMouseUpInDrawingMode(d);
          return;
        }
        if (!!this._isMainEvent(d)) {
          if (p && (this._finalizeCurrentTransform(d), b = p.actionPerformed), !y) {
            var w = m === this._activeObject;
            this._maybeGroupObjects(d), b || (b = this._shouldRender(m) || !w && m === this._activeObject);
          }
          var _, S;
          if (m) {
            if (_ = m._findTargetCorner(
              this.getPointer(d, !0),
              e.util.isTouchEvent(d)
            ), m.selectable && m !== this._activeObject && m.activeOn === "up")
              this.setActiveObject(m, d), b = !0;
            else {
              var C = m.controls[_], k = C && C.getMouseUpHandler(d, m, C);
              k && (S = this.getPointer(d), k(d, p, S.x, S.y));
            }
            m.isMoving = !1;
          }
          if (p && (p.target !== m || p.corner !== _)) {
            var R = p.target && p.target.controls[p.corner], B = R && R.getMouseUpHandler(d, m, C);
            S = S || this.getPointer(d), B && B(d, p, S.x, S.y);
          }
          this._setCursorFromEvent(d, m), this._handleEvent(d, "up", o, y), this._groupSelector = null, this._currentTransform = null, m && (m.__corner = 0), b ? this.requestRenderAll() : y || this.renderTop();
        }
      },
      _simpleEventHandler: function(d, m) {
        var p = this.findTarget(m), v = this.targets, b = {
          e: m,
          target: p,
          subTargets: v
        };
        if (this.fire(d, b), p && p.fire(d, b), !v)
          return p;
        for (var y = 0; y < v.length; y++)
          v[y].fire(d, b);
        return p;
      },
      _handleEvent: function(d, m, p, v) {
        var b = this._target, y = this.targets || [], w = {
          e: d,
          target: b,
          subTargets: y,
          button: p || o,
          isClick: v || !1,
          pointer: this._pointer,
          absolutePointer: this._absolutePointer,
          transform: this._currentTransform
        };
        m === "up" && (w.currentTarget = this.findTarget(d), w.currentSubTargets = this.targets), this.fire("mouse:" + m, w), b && b.fire("mouse" + m, w);
        for (var _ = 0; _ < y.length; _++)
          y[_].fire("mouse" + m, w);
      },
      _finalizeCurrentTransform: function(d) {
        var m = this._currentTransform, p = m.target, v = {
          e: d,
          target: p,
          transform: m,
          action: m.action
        };
        p._scaling && (p._scaling = !1), p.setCoords(), (m.actionPerformed || this.stateful && p.hasStateChanged()) && this._fire("modified", v);
      },
      _onMouseDownInDrawingMode: function(d) {
        this._isCurrentlyDrawing = !0, this.getActiveObject() && this.discardActiveObject(d).requestRenderAll();
        var m = this.getPointer(d);
        this.freeDrawingBrush.onMouseDown(m, { e: d, pointer: m }), this._handleEvent(d, "down");
      },
      _onMouseMoveInDrawingMode: function(d) {
        if (this._isCurrentlyDrawing) {
          var m = this.getPointer(d);
          this.freeDrawingBrush.onMouseMove(m, { e: d, pointer: m });
        }
        this.setCursor(this.freeDrawingCursor), this._handleEvent(d, "move");
      },
      _onMouseUpInDrawingMode: function(d) {
        var m = this.getPointer(d);
        this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e: d, pointer: m }), this._handleEvent(d, "up");
      },
      __onMouseDown: function(d) {
        this._cacheTransformEventData(d), this._handleEvent(d, "down:before");
        var m = this._target;
        if (c(d, a)) {
          this.fireRightClick && this._handleEvent(d, "down", a);
          return;
        }
        if (c(d, h)) {
          this.fireMiddleClick && this._handleEvent(d, "down", h);
          return;
        }
        if (this.isDrawingMode) {
          this._onMouseDownInDrawingMode(d);
          return;
        }
        if (!!this._isMainEvent(d) && !this._currentTransform) {
          var p = this._pointer;
          this._previousPointer = p;
          var v = this._shouldRender(m), b = this._shouldGroup(d, m);
          if (this._shouldClearSelection(d, m) ? this.discardActiveObject(d) : b && (this._handleGrouping(d, m), m = this._activeObject), this.selection && (!m || !m.selectable && !m.isEditing && m !== this._activeObject) && (this._groupSelector = {
            ex: this._absolutePointer.x,
            ey: this._absolutePointer.y,
            top: 0,
            left: 0
          }), m) {
            var y = m === this._activeObject;
            m.selectable && m.activeOn === "down" && this.setActiveObject(m, d);
            var w = m._findTargetCorner(
              this.getPointer(d, !0),
              e.util.isTouchEvent(d)
            );
            if (m.__corner = w, m === this._activeObject && (w || !b)) {
              this._setupCurrentTransform(d, m, y);
              var _ = m.controls[w], p = this.getPointer(d), S = _ && _.getMouseDownHandler(d, m, _);
              S && S(d, this._currentTransform, p.x, p.y);
            }
          }
          this._handleEvent(d, "down"), (v || b) && this.requestRenderAll();
        }
      },
      _resetTransformEventData: function() {
        this._target = null, this._pointer = null, this._absolutePointer = null;
      },
      _cacheTransformEventData: function(d) {
        this._resetTransformEventData(), this._pointer = this.getPointer(d, !0), this._absolutePointer = this.restorePointerVpt(this._pointer), this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(d) || null;
      },
      _beforeTransform: function(d) {
        var m = this._currentTransform;
        this.stateful && m.target.saveState(), this.fire("before:transform", {
          e: d,
          transform: m
        });
      },
      __onMouseMove: function(d) {
        this._handleEvent(d, "move:before"), this._cacheTransformEventData(d);
        var m, p;
        if (this.isDrawingMode) {
          this._onMouseMoveInDrawingMode(d);
          return;
        }
        if (!!this._isMainEvent(d)) {
          var v = this._groupSelector;
          v ? (p = this._absolutePointer, v.left = p.x - v.ex, v.top = p.y - v.ey, this.renderTop()) : this._currentTransform ? this._transformObject(d) : (m = this.findTarget(d) || null, this._setCursorFromEvent(d, m), this._fireOverOutEvents(m, d)), this._handleEvent(d, "move"), this._resetTransformEventData();
        }
      },
      _fireOverOutEvents: function(d, m) {
        var p = this._hoveredTarget, v = this._hoveredTargets, b = this.targets, y = Math.max(v.length, b.length);
        this.fireSyntheticInOutEvents(d, m, {
          oldTarget: p,
          evtOut: "mouseout",
          canvasEvtOut: "mouse:out",
          evtIn: "mouseover",
          canvasEvtIn: "mouse:over"
        });
        for (var w = 0; w < y; w++)
          this.fireSyntheticInOutEvents(b[w], m, {
            oldTarget: v[w],
            evtOut: "mouseout",
            evtIn: "mouseover"
          });
        this._hoveredTarget = d, this._hoveredTargets = this.targets.concat();
      },
      _fireEnterLeaveEvents: function(d, m) {
        var p = this._draggedoverTarget, v = this._hoveredTargets, b = this.targets, y = Math.max(v.length, b.length);
        this.fireSyntheticInOutEvents(d, m, {
          oldTarget: p,
          evtOut: "dragleave",
          evtIn: "dragenter"
        });
        for (var w = 0; w < y; w++)
          this.fireSyntheticInOutEvents(b[w], m, {
            oldTarget: v[w],
            evtOut: "dragleave",
            evtIn: "dragenter"
          });
        this._draggedoverTarget = d;
      },
      fireSyntheticInOutEvents: function(d, m, p) {
        var v, b, y = p.oldTarget, w, _, S = y !== d, C = p.canvasEvtIn, k = p.canvasEvtOut;
        S && (v = { e: m, target: d, previousTarget: y }, b = { e: m, target: y, nextTarget: d }), _ = d && S, w = y && S, w && (k && this.fire(k, b), y.fire(p.evtOut, b)), _ && (C && this.fire(C, v), d.fire(p.evtIn, v));
      },
      __onMouseWheel: function(d) {
        this._cacheTransformEventData(d), this._handleEvent(d, "wheel"), this._resetTransformEventData();
      },
      _transformObject: function(d) {
        var m = this.getPointer(d), p = this._currentTransform;
        p.reset = !1, p.shiftKey = d.shiftKey, p.altKey = d[this.centeredKey], this._performTransformAction(d, p, m), p.actionPerformed && this.requestRenderAll();
      },
      _performTransformAction: function(d, m, p) {
        var v = p.x, b = p.y, y = m.action, w = !1, _ = m.actionHandler;
        _ && (w = _(d, m, v, b)), y === "drag" && w && (m.target.isMoving = !0, this.setCursor(m.target.moveCursor || this.moveCursor)), m.actionPerformed = m.actionPerformed || w;
      },
      _fire: e.controlsUtils.fireEvent,
      _setCursorFromEvent: function(d, m) {
        if (!m)
          return this.setCursor(this.defaultCursor), !1;
        var p = m.hoverCursor || this.hoverCursor, v = this._activeObject && this._activeObject.type === "activeSelection" ? this._activeObject : null, b = (!v || !v.contains(m)) && m._findTargetCorner(this.getPointer(d, !0));
        b ? this.setCursor(this.getCornerCursor(b, m, d)) : (m.subTargetCheck && this.targets.concat().reverse().map(function(y) {
          p = y.hoverCursor || p;
        }), this.setCursor(p));
      },
      getCornerCursor: function(d, m, p) {
        var v = m.controls[d];
        return v.cursorStyleHandler(p, v, m);
      }
    });
  }(), function() {
    var l = Math.min, n = Math.max;
    e.util.object.extend(e.Canvas.prototype, {
      _shouldGroup: function(a, h) {
        var o = this._activeObject;
        return o && this._isSelectionKeyPressed(a) && h && h.selectable && this.selection && (o !== h || o.type === "activeSelection") && !h.onSelect({ e: a });
      },
      _handleGrouping: function(a, h) {
        var o = this._activeObject;
        o.__corner || h === o && (h = this.findTarget(a, !0), !h || !h.selectable) || (o && o.type === "activeSelection" ? this._updateActiveSelection(h, a) : this._createActiveSelection(h, a));
      },
      _updateActiveSelection: function(a, h) {
        var o = this._activeObject, u = o._objects.slice(0);
        o.contains(a) ? (o.removeWithUpdate(a), this._hoveredTarget = a, this._hoveredTargets = this.targets.concat(), o.size() === 1 && this._setActiveObject(o.item(0), h)) : (o.addWithUpdate(a), this._hoveredTarget = o, this._hoveredTargets = this.targets.concat()), this._fireSelectionEvents(u, h);
      },
      _createActiveSelection: function(a, h) {
        var o = this.getActiveObjects(), u = this._createGroup(a);
        this._hoveredTarget = u, this._setActiveObject(u, h), this._fireSelectionEvents(o, h);
      },
      _createGroup: function(a) {
        var h = this._objects, o = h.indexOf(this._activeObject) < h.indexOf(a), u = o ? [this._activeObject, a] : [a, this._activeObject];
        return this._activeObject.isEditing && this._activeObject.exitEditing(), new e.ActiveSelection(u, {
          canvas: this
        });
      },
      _groupSelectedObjects: function(a) {
        var h = this._collectObjects(a), o;
        h.length === 1 ? this.setActiveObject(h[0], a) : h.length > 1 && (o = new e.ActiveSelection(h.reverse(), {
          canvas: this
        }), this.setActiveObject(o, a));
      },
      _collectObjects: function(a) {
        for (var h = [], o, u = this._groupSelector.ex, c = this._groupSelector.ey, d = u + this._groupSelector.left, m = c + this._groupSelector.top, p = new e.Point(l(u, d), l(c, m)), v = new e.Point(n(u, d), n(c, m)), b = !this.selectionFullyContained, y = u === d && c === m, w = this._objects.length; w-- && (o = this._objects[w], !(!(!o || !o.selectable || !o.visible) && (b && o.intersectsWithRect(p, v, !0) || o.isContainedWithinRect(p, v, !0) || b && o.containsPoint(p, null, !0) || b && o.containsPoint(v, null, !0)) && (h.push(o), y))); )
          ;
        return h.length > 1 && (h = h.filter(function(_) {
          return !_.onSelect({ e: a });
        })), h;
      },
      _maybeGroupObjects: function(a) {
        this.selection && this._groupSelector && this._groupSelectedObjects(a), this.setCursor(this.defaultCursor), this._groupSelector = null;
      }
    });
  }(), function() {
    e.util.object.extend(e.StaticCanvas.prototype, {
      toDataURL: function(l) {
        l || (l = {});
        var n = l.format || "png", a = l.quality || 1, h = (l.multiplier || 1) * (l.enableRetinaScaling ? this.getRetinaScaling() : 1), o = this.toCanvasElement(h, l);
        return e.util.toDataURL(o, n, a);
      },
      toCanvasElement: function(l, n) {
        l = l || 1, n = n || {};
        var a = (n.width || this.width) * l, h = (n.height || this.height) * l, o = this.getZoom(), u = this.width, c = this.height, d = o * l, m = this.viewportTransform, p = (m[4] - (n.left || 0)) * l, v = (m[5] - (n.top || 0)) * l, b = this.interactive, y = [d, 0, 0, d, p, v], w = this.enableRetinaScaling, _ = e.util.createCanvasElement(), S = this.contextTop;
        return _.width = a, _.height = h, this.contextTop = null, this.enableRetinaScaling = !1, this.interactive = !1, this.viewportTransform = y, this.width = a, this.height = h, this.calcViewportBoundaries(), this.renderCanvas(_.getContext("2d"), this._objects), this.viewportTransform = m, this.width = u, this.height = c, this.calcViewportBoundaries(), this.interactive = b, this.enableRetinaScaling = w, this.contextTop = S, _;
      }
    });
  }(), e.util.object.extend(e.StaticCanvas.prototype, {
    loadFromJSON: function(l, n, a) {
      if (!!l) {
        var h = typeof l == "string" ? JSON.parse(l) : e.util.object.clone(l), o = this, u = h.clipPath, c = this.renderOnAddRemove;
        return this.renderOnAddRemove = !1, delete h.clipPath, this._enlivenObjects(h.objects, function(d) {
          o.clear(), o._setBgOverlay(h, function() {
            u ? o._enlivenObjects([u], function(m) {
              o.clipPath = m[0], o.__setupCanvas.call(o, h, d, c, n);
            }) : o.__setupCanvas.call(o, h, d, c, n);
          });
        }, a), this;
      }
    },
    __setupCanvas: function(l, n, a, h) {
      var o = this;
      n.forEach(function(u, c) {
        o.insertAt(u, c);
      }), this.renderOnAddRemove = a, delete l.objects, delete l.backgroundImage, delete l.overlayImage, delete l.background, delete l.overlay, this._setOptions(l), this.renderAll(), h && h();
    },
    _setBgOverlay: function(l, n) {
      var a = {
        backgroundColor: !1,
        overlayColor: !1,
        backgroundImage: !1,
        overlayImage: !1
      };
      if (!l.backgroundImage && !l.overlayImage && !l.background && !l.overlay) {
        n && n();
        return;
      }
      var h = function() {
        a.backgroundImage && a.overlayImage && a.backgroundColor && a.overlayColor && n && n();
      };
      this.__setBgOverlay("backgroundImage", l.backgroundImage, a, h), this.__setBgOverlay("overlayImage", l.overlayImage, a, h), this.__setBgOverlay("backgroundColor", l.background, a, h), this.__setBgOverlay("overlayColor", l.overlay, a, h);
    },
    __setBgOverlay: function(l, n, a, h) {
      var o = this;
      if (!n) {
        a[l] = !0, h && h();
        return;
      }
      l === "backgroundImage" || l === "overlayImage" ? e.util.enlivenObjects([n], function(u) {
        o[l] = u[0], a[l] = !0, h && h();
      }) : this["set" + e.util.string.capitalize(l, !0)](n, function() {
        a[l] = !0, h && h();
      });
    },
    _enlivenObjects: function(l, n, a) {
      if (!l || l.length === 0) {
        n && n([]);
        return;
      }
      e.util.enlivenObjects(l, function(h) {
        n && n(h);
      }, null, a);
    },
    _toDataURL: function(l, n) {
      this.clone(function(a) {
        n(a.toDataURL(l));
      });
    },
    _toDataURLWithMultiplier: function(l, n, a) {
      this.clone(function(h) {
        a(h.toDataURLWithMultiplier(l, n));
      });
    },
    clone: function(l, n) {
      var a = JSON.stringify(this.toJSON(n));
      this.cloneWithoutData(function(h) {
        h.loadFromJSON(a, function() {
          l && l(h);
        });
      });
    },
    cloneWithoutData: function(l) {
      var n = e.util.createCanvasElement();
      n.width = this.width, n.height = this.height;
      var a = new e.Canvas(n);
      this.backgroundImage ? (a.setBackgroundImage(this.backgroundImage.src, function() {
        a.renderAll(), l && l(a);
      }), a.backgroundImageOpacity = this.backgroundImageOpacity, a.backgroundImageStretch = this.backgroundImageStretch) : l && l(a);
    }
  }), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.util.object.clone, o = n.util.toFixed, u = n.util.string.capitalize, c = n.util.degreesToRadians, d = !n.isLikelyNode, m = 2;
    n.Object || (n.Object = n.util.createClass(n.CommonMethods, {
      type: "object",
      originX: "left",
      originY: "top",
      top: 0,
      left: 0,
      width: 0,
      height: 0,
      scaleX: 1,
      scaleY: 1,
      flipX: !1,
      flipY: !1,
      opacity: 1,
      angle: 0,
      skewX: 0,
      skewY: 0,
      cornerSize: 13,
      touchCornerSize: 24,
      transparentCorners: !0,
      hoverCursor: null,
      moveCursor: null,
      padding: 0,
      borderColor: "rgb(178,204,255)",
      borderDashArray: null,
      cornerColor: "rgb(178,204,255)",
      cornerStrokeColor: null,
      cornerStyle: "rect",
      cornerDashArray: null,
      centeredScaling: !1,
      centeredRotation: !0,
      fill: "rgb(0,0,0)",
      fillRule: "nonzero",
      globalCompositeOperation: "source-over",
      backgroundColor: "",
      selectionBackgroundColor: "",
      stroke: null,
      strokeWidth: 1,
      strokeDashArray: null,
      strokeDashOffset: 0,
      strokeLineCap: "butt",
      strokeLineJoin: "miter",
      strokeMiterLimit: 4,
      shadow: null,
      borderOpacityWhenMoving: 0.4,
      borderScaleFactor: 1,
      minScaleLimit: 0,
      selectable: !0,
      evented: !0,
      visible: !0,
      hasControls: !0,
      hasBorders: !0,
      perPixelTargetFind: !1,
      includeDefaultValues: !0,
      lockMovementX: !1,
      lockMovementY: !1,
      lockRotation: !1,
      lockScalingX: !1,
      lockScalingY: !1,
      lockSkewingX: !1,
      lockSkewingY: !1,
      lockScalingFlip: !1,
      excludeFromExport: !1,
      objectCaching: d,
      statefullCache: !1,
      noScaleCache: !0,
      strokeUniform: !1,
      dirty: !0,
      __corner: 0,
      paintFirst: "fill",
      activeOn: "down",
      stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
      cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),
      colorProperties: "fill stroke backgroundColor".split(" "),
      clipPath: void 0,
      inverted: !1,
      absolutePositioned: !1,
      initialize: function(p) {
        p && this.setOptions(p);
      },
      _createCacheCanvas: function() {
        this._cacheProperties = {}, this._cacheCanvas = n.util.createCanvasElement(), this._cacheContext = this._cacheCanvas.getContext("2d"), this._updateCacheCanvas(), this.dirty = !0;
      },
      _limitCacheSize: function(p) {
        var v = n.perfLimitSizeTotal, b = p.width, y = p.height, w = n.maxCacheSideLimit, _ = n.minCacheSideLimit;
        if (b <= w && y <= w && b * y <= v)
          return b < _ && (p.width = _), y < _ && (p.height = _), p;
        var S = b / y, C = n.util.limitDimsByArea(S, v), k = n.util.capValue, R = k(_, C.x, w), B = k(_, C.y, w);
        return b > R && (p.zoomX /= b / R, p.width = R, p.capped = !0), y > B && (p.zoomY /= y / B, p.height = B, p.capped = !0), p;
      },
      _getCacheCanvasDimensions: function() {
        var p = this.getTotalObjectScaling(), v = this._getTransformedDimensions(0, 0), b = v.x * p.scaleX / this.scaleX, y = v.y * p.scaleY / this.scaleY;
        return {
          width: b + m,
          height: y + m,
          zoomX: p.scaleX,
          zoomY: p.scaleY,
          x: b,
          y
        };
      },
      _updateCacheCanvas: function() {
        var p = this.canvas;
        if (this.noScaleCache && p && p._currentTransform) {
          var v = p._currentTransform.target, b = p._currentTransform.action;
          if (this === v && b.slice && b.slice(0, 5) === "scale")
            return !1;
        }
        var y = this._cacheCanvas, w = this._limitCacheSize(this._getCacheCanvasDimensions()), _ = n.minCacheSideLimit, S = w.width, C = w.height, k, R, B = w.zoomX, N = w.zoomY, K = S !== this.cacheWidth || C !== this.cacheHeight, ee = this.zoomX !== B || this.zoomY !== N, G = K || ee, W = 0, re = 0, ce = !1;
        if (K) {
          var le = this._cacheCanvas.width, T = this._cacheCanvas.height, M = S > le || C > T, A = (S < le * 0.9 || C < T * 0.9) && le > _ && T > _;
          ce = M || A, M && !w.capped && (S > _ || C > _) && (W = S * 0.1, re = C * 0.1);
        }
        return this instanceof n.Text && this.path && (G = !0, ce = !0, W += this.getHeightOfLine(0) * this.zoomX, re += this.getHeightOfLine(0) * this.zoomY), G ? (ce ? (y.width = Math.ceil(S + W), y.height = Math.ceil(C + re)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0), this._cacheContext.clearRect(0, 0, y.width, y.height)), k = w.x / 2, R = w.y / 2, this.cacheTranslationX = Math.round(y.width / 2 - k) + k, this.cacheTranslationY = Math.round(y.height / 2 - R) + R, this.cacheWidth = S, this.cacheHeight = C, this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY), this._cacheContext.scale(B, N), this.zoomX = B, this.zoomY = N, !0) : !1;
      },
      setOptions: function(p) {
        this._setOptions(p), this._initGradient(p.fill, "fill"), this._initGradient(p.stroke, "stroke"), this._initPattern(p.fill, "fill"), this._initPattern(p.stroke, "stroke");
      },
      transform: function(p) {
        var v = this.group && !this.group._transformDone || this.group && this.canvas && p === this.canvas.contextTop, b = this.calcTransformMatrix(!v);
        p.transform(b[0], b[1], b[2], b[3], b[4], b[5]);
      },
      toObject: function(p) {
        var v = n.Object.NUM_FRACTION_DIGITS, b = {
          type: this.type,
          version: n.version,
          originX: this.originX,
          originY: this.originY,
          left: o(this.left, v),
          top: o(this.top, v),
          width: o(this.width, v),
          height: o(this.height, v),
          fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
          stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
          strokeWidth: o(this.strokeWidth, v),
          strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
          strokeLineCap: this.strokeLineCap,
          strokeDashOffset: this.strokeDashOffset,
          strokeLineJoin: this.strokeLineJoin,
          strokeUniform: this.strokeUniform,
          strokeMiterLimit: o(this.strokeMiterLimit, v),
          scaleX: o(this.scaleX, v),
          scaleY: o(this.scaleY, v),
          angle: o(this.angle, v),
          flipX: this.flipX,
          flipY: this.flipY,
          opacity: o(this.opacity, v),
          shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
          visible: this.visible,
          backgroundColor: this.backgroundColor,
          fillRule: this.fillRule,
          paintFirst: this.paintFirst,
          globalCompositeOperation: this.globalCompositeOperation,
          skewX: o(this.skewX, v),
          skewY: o(this.skewY, v)
        };
        return this.clipPath && !this.clipPath.excludeFromExport && (b.clipPath = this.clipPath.toObject(p), b.clipPath.inverted = this.clipPath.inverted, b.clipPath.absolutePositioned = this.clipPath.absolutePositioned), n.util.populateWithProperties(this, b, p), this.includeDefaultValues || (b = this._removeDefaultValues(b)), b;
      },
      toDatalessObject: function(p) {
        return this.toObject(p);
      },
      _removeDefaultValues: function(p) {
        var v = n.util.getKlass(p.type).prototype, b = v.stateProperties;
        return b.forEach(function(y) {
          y === "left" || y === "top" || (p[y] === v[y] && delete p[y], Array.isArray(p[y]) && Array.isArray(v[y]) && p[y].length === 0 && v[y].length === 0 && delete p[y]);
        }), p;
      },
      toString: function() {
        return "#<fabric." + u(this.type) + ">";
      },
      getObjectScaling: function() {
        if (!this.group)
          return {
            scaleX: this.scaleX,
            scaleY: this.scaleY
          };
        var p = n.util.qrDecompose(this.calcTransformMatrix());
        return { scaleX: Math.abs(p.scaleX), scaleY: Math.abs(p.scaleY) };
      },
      getTotalObjectScaling: function() {
        var p = this.getObjectScaling(), v = p.scaleX, b = p.scaleY;
        if (this.canvas) {
          var y = this.canvas.getZoom(), w = this.canvas.getRetinaScaling();
          v *= y * w, b *= y * w;
        }
        return { scaleX: v, scaleY: b };
      },
      getObjectOpacity: function() {
        var p = this.opacity;
        return this.group && (p *= this.group.getObjectOpacity()), p;
      },
      _set: function(p, v) {
        var b = p === "scaleX" || p === "scaleY", y = this[p] !== v, w = !1;
        return b && (v = this._constrainScale(v)), p === "scaleX" && v < 0 ? (this.flipX = !this.flipX, v *= -1) : p === "scaleY" && v < 0 ? (this.flipY = !this.flipY, v *= -1) : p === "shadow" && v && !(v instanceof n.Shadow) ? v = new n.Shadow(v) : p === "dirty" && this.group && this.group.set("dirty", v), this[p] = v, y && (w = this.group && this.group.isOnACache(), this.cacheProperties.indexOf(p) > -1 ? (this.dirty = !0, w && this.group.set("dirty", !0)) : w && this.stateProperties.indexOf(p) > -1 && this.group.set("dirty", !0)), this;
      },
      setOnGroup: function() {
      },
      getViewportTransform: function() {
        return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : n.iMatrix.concat();
      },
      isNotVisible: function() {
        return this.opacity === 0 || !this.width && !this.height && this.strokeWidth === 0 || !this.visible;
      },
      render: function(p) {
        this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (p.save(), this._setupCompositeOperation(p), this.drawSelectionBackground(p), this.transform(p), this._setOpacity(p), this._setShadow(p, this), this.shouldCache() ? (this.renderCache(), this.drawCacheOnCanvas(p)) : (this._removeCacheCanvas(), this.dirty = !1, this.drawObject(p), this.objectCaching && this.statefullCache && this.saveState({ propertySet: "cacheProperties" })), p.restore());
      },
      renderCache: function(p) {
        p = p || {}, (!this._cacheCanvas || !this._cacheContext) && this._createCacheCanvas(), this.isCacheDirty() && (this.statefullCache && this.saveState({ propertySet: "cacheProperties" }), this.drawObject(this._cacheContext, p.forClipping), this.dirty = !1);
      },
      _removeCacheCanvas: function() {
        this._cacheCanvas = null, this._cacheContext = null, this.cacheWidth = 0, this.cacheHeight = 0;
      },
      hasStroke: function() {
        return this.stroke && this.stroke !== "transparent" && this.strokeWidth !== 0;
      },
      hasFill: function() {
        return this.fill && this.fill !== "transparent";
      },
      needsItsOwnCache: function() {
        return !!(this.paintFirst === "stroke" && this.hasFill() && this.hasStroke() && typeof this.shadow == "object" || this.clipPath);
      },
      shouldCache: function() {
        return this.ownCaching = this.needsItsOwnCache() || this.objectCaching && (!this.group || !this.group.isOnACache()), this.ownCaching;
      },
      willDrawShadow: function() {
        return !!this.shadow && (this.shadow.offsetX !== 0 || this.shadow.offsetY !== 0);
      },
      drawClipPathOnCache: function(p, v) {
        if (p.save(), v.inverted ? p.globalCompositeOperation = "destination-out" : p.globalCompositeOperation = "destination-in", v.absolutePositioned) {
          var b = n.util.invertTransform(this.calcTransformMatrix());
          p.transform(b[0], b[1], b[2], b[3], b[4], b[5]);
        }
        v.transform(p), p.scale(1 / v.zoomX, 1 / v.zoomY), p.drawImage(v._cacheCanvas, -v.cacheTranslationX, -v.cacheTranslationY), p.restore();
      },
      drawObject: function(p, v) {
        var b = this.fill, y = this.stroke;
        v ? (this.fill = "black", this.stroke = "", this._setClippingProperties(p)) : this._renderBackground(p), this._render(p), this._drawClipPath(p, this.clipPath), this.fill = b, this.stroke = y;
      },
      _drawClipPath: function(p, v) {
        !v || (v.canvas = this.canvas, v.shouldCache(), v._transformDone = !0, v.renderCache({ forClipping: !0 }), this.drawClipPathOnCache(p, v));
      },
      drawCacheOnCanvas: function(p) {
        p.scale(1 / this.zoomX, 1 / this.zoomY), p.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY);
      },
      isCacheDirty: function(p) {
        if (this.isNotVisible())
          return !1;
        if (this._cacheCanvas && this._cacheContext && !p && this._updateCacheCanvas())
          return !0;
        if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) {
          if (this._cacheCanvas && this._cacheContext && !p) {
            var v = this.cacheWidth / this.zoomX, b = this.cacheHeight / this.zoomY;
            this._cacheContext.clearRect(-v / 2, -b / 2, v, b);
          }
          return !0;
        }
        return !1;
      },
      _renderBackground: function(p) {
        if (!!this.backgroundColor) {
          var v = this._getNonTransformedDimensions();
          p.fillStyle = this.backgroundColor, p.fillRect(
            -v.x / 2,
            -v.y / 2,
            v.x,
            v.y
          ), this._removeShadow(p);
        }
      },
      _setOpacity: function(p) {
        this.group && !this.group._transformDone ? p.globalAlpha = this.getObjectOpacity() : p.globalAlpha *= this.opacity;
      },
      _setStrokeStyles: function(p, v) {
        var b = v.stroke;
        b && (p.lineWidth = v.strokeWidth, p.lineCap = v.strokeLineCap, p.lineDashOffset = v.strokeDashOffset, p.lineJoin = v.strokeLineJoin, p.miterLimit = v.strokeMiterLimit, b.toLive ? b.gradientUnits === "percentage" || b.gradientTransform || b.patternTransform ? this._applyPatternForTransformedGradient(p, b) : (p.strokeStyle = b.toLive(p, this), this._applyPatternGradientTransform(p, b)) : p.strokeStyle = v.stroke);
      },
      _setFillStyles: function(p, v) {
        var b = v.fill;
        b && (b.toLive ? (p.fillStyle = b.toLive(p, this), this._applyPatternGradientTransform(p, v.fill)) : p.fillStyle = b);
      },
      _setClippingProperties: function(p) {
        p.globalAlpha = 1, p.strokeStyle = "transparent", p.fillStyle = "#000000";
      },
      _setLineDash: function(p, v) {
        !v || v.length === 0 || (1 & v.length && v.push.apply(v, v), p.setLineDash(v));
      },
      _renderControls: function(p, v) {
        var b = this.getViewportTransform(), y = this.calcTransformMatrix(), w, _, S;
        v = v || {}, _ = typeof v.hasBorders < "u" ? v.hasBorders : this.hasBorders, S = typeof v.hasControls < "u" ? v.hasControls : this.hasControls, y = n.util.multiplyTransformMatrices(b, y), w = n.util.qrDecompose(y), p.save(), p.translate(w.translateX, w.translateY), p.lineWidth = 1 * this.borderScaleFactor, this.group || (p.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1), this.flipX && (w.angle -= 180), p.rotate(c(this.group ? w.angle : this.angle)), v.forActiveSelection || this.group ? _ && this.drawBordersInGroup(p, w, v) : _ && this.drawBorders(p, v), S && this.drawControls(p, v), p.restore();
      },
      _setShadow: function(p) {
        if (!!this.shadow) {
          var v = this.shadow, b = this.canvas, y, w = b && b.viewportTransform[0] || 1, _ = b && b.viewportTransform[3] || 1;
          v.nonScaling ? y = { scaleX: 1, scaleY: 1 } : y = this.getObjectScaling(), b && b._isRetinaScaling() && (w *= n.devicePixelRatio, _ *= n.devicePixelRatio), p.shadowColor = v.color, p.shadowBlur = v.blur * n.browserShadowBlurConstant * (w + _) * (y.scaleX + y.scaleY) / 4, p.shadowOffsetX = v.offsetX * w * y.scaleX, p.shadowOffsetY = v.offsetY * _ * y.scaleY;
        }
      },
      _removeShadow: function(p) {
        !this.shadow || (p.shadowColor = "", p.shadowBlur = p.shadowOffsetX = p.shadowOffsetY = 0);
      },
      _applyPatternGradientTransform: function(p, v) {
        if (!v || !v.toLive)
          return { offsetX: 0, offsetY: 0 };
        var b = v.gradientTransform || v.patternTransform, y = -this.width / 2 + v.offsetX || 0, w = -this.height / 2 + v.offsetY || 0;
        return v.gradientUnits === "percentage" ? p.transform(this.width, 0, 0, this.height, y, w) : p.transform(1, 0, 0, 1, y, w), b && p.transform(b[0], b[1], b[2], b[3], b[4], b[5]), { offsetX: y, offsetY: w };
      },
      _renderPaintInOrder: function(p) {
        this.paintFirst === "stroke" ? (this._renderStroke(p), this._renderFill(p)) : (this._renderFill(p), this._renderStroke(p));
      },
      _render: function() {
      },
      _renderFill: function(p) {
        !this.fill || (p.save(), this._setFillStyles(p, this), this.fillRule === "evenodd" ? p.fill("evenodd") : p.fill(), p.restore());
      },
      _renderStroke: function(p) {
        if (!(!this.stroke || this.strokeWidth === 0)) {
          if (this.shadow && !this.shadow.affectStroke && this._removeShadow(p), p.save(), this.strokeUniform && this.group) {
            var v = this.getObjectScaling();
            p.scale(1 / v.scaleX, 1 / v.scaleY);
          } else
            this.strokeUniform && p.scale(1 / this.scaleX, 1 / this.scaleY);
          this._setLineDash(p, this.strokeDashArray), this._setStrokeStyles(p, this), p.stroke(), p.restore();
        }
      },
      _applyPatternForTransformedGradient: function(p, v) {
        var b = this._limitCacheSize(this._getCacheCanvasDimensions()), y = n.util.createCanvasElement(), w, _ = this.canvas.getRetinaScaling(), S = b.x / this.scaleX / _, C = b.y / this.scaleY / _;
        y.width = S, y.height = C, w = y.getContext("2d"), w.beginPath(), w.moveTo(0, 0), w.lineTo(S, 0), w.lineTo(S, C), w.lineTo(0, C), w.closePath(), w.translate(S / 2, C / 2), w.scale(
          b.zoomX / this.scaleX / _,
          b.zoomY / this.scaleY / _
        ), this._applyPatternGradientTransform(w, v), w.fillStyle = v.toLive(p), w.fill(), p.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2), p.scale(
          _ * this.scaleX / b.zoomX,
          _ * this.scaleY / b.zoomY
        ), p.strokeStyle = w.createPattern(y, "no-repeat");
      },
      _findCenterFromElement: function() {
        return { x: this.left + this.width / 2, y: this.top + this.height / 2 };
      },
      _assignTransformMatrixProps: function() {
        if (this.transformMatrix) {
          var p = n.util.qrDecompose(this.transformMatrix);
          this.flipX = !1, this.flipY = !1, this.set("scaleX", p.scaleX), this.set("scaleY", p.scaleY), this.angle = p.angle, this.skewX = p.skewX, this.skewY = 0;
        }
      },
      _removeTransformMatrix: function(p) {
        var v = this._findCenterFromElement();
        this.transformMatrix && (this._assignTransformMatrixProps(), v = n.util.transformPoint(v, this.transformMatrix)), this.transformMatrix = null, p && (this.scaleX *= p.scaleX, this.scaleY *= p.scaleY, this.cropX = p.cropX, this.cropY = p.cropY, v.x += p.offsetLeft, v.y += p.offsetTop, this.width = p.width, this.height = p.height), this.setPositionByOrigin(v, "center", "center");
      },
      clone: function(p, v) {
        var b = this.toObject(v);
        this.constructor.fromObject ? this.constructor.fromObject(b, p) : n.Object._fromObject("Object", b, p);
      },
      cloneAsImage: function(p, v) {
        var b = this.toCanvasElement(v);
        return p && p(new n.Image(b)), this;
      },
      toCanvasElement: function(p) {
        p || (p = {});
        var v = n.util, b = v.saveObjectTransform(this), y = this.group, w = this.shadow, _ = Math.abs, S = (p.multiplier || 1) * (p.enableRetinaScaling ? n.devicePixelRatio : 1);
        delete this.group, p.withoutTransform && v.resetObjectTransform(this), p.withoutShadow && (this.shadow = null);
        var C = n.util.createCanvasElement(), k = this.getBoundingRect(!0, !0), R = this.shadow, B, N = { x: 0, y: 0 }, K, ee, G;
        R && (K = R.blur, R.nonScaling ? B = { scaleX: 1, scaleY: 1 } : B = this.getObjectScaling(), N.x = 2 * Math.round(_(R.offsetX) + K) * _(B.scaleX), N.y = 2 * Math.round(_(R.offsetY) + K) * _(B.scaleY)), ee = k.width + N.x, G = k.height + N.y, C.width = Math.ceil(ee), C.height = Math.ceil(G);
        var W = new n.StaticCanvas(C, {
          enableRetinaScaling: !1,
          renderOnAddRemove: !1,
          skipOffscreen: !1
        });
        p.format === "jpeg" && (W.backgroundColor = "#fff"), this.setPositionByOrigin(new n.Point(W.width / 2, W.height / 2), "center", "center");
        var re = this.canvas;
        W.add(this);
        var ce = W.toCanvasElement(S || 1, p);
        return this.shadow = w, this.set("canvas", re), y && (this.group = y), this.set(b).setCoords(), W._objects = [], W.dispose(), W = null, ce;
      },
      toDataURL: function(p) {
        return p || (p = {}), n.util.toDataURL(this.toCanvasElement(p), p.format || "png", p.quality || 1);
      },
      isType: function(p) {
        return arguments.length > 1 ? Array.from(arguments).includes(this.type) : this.type === p;
      },
      complexity: function() {
        return 1;
      },
      toJSON: function(p) {
        return this.toObject(p);
      },
      rotate: function(p) {
        var v = (this.originX !== "center" || this.originY !== "center") && this.centeredRotation;
        return v && this._setOriginToCenter(), this.set("angle", p), v && this._resetOrigin(), this;
      },
      centerH: function() {
        return this.canvas && this.canvas.centerObjectH(this), this;
      },
      viewportCenterH: function() {
        return this.canvas && this.canvas.viewportCenterObjectH(this), this;
      },
      centerV: function() {
        return this.canvas && this.canvas.centerObjectV(this), this;
      },
      viewportCenterV: function() {
        return this.canvas && this.canvas.viewportCenterObjectV(this), this;
      },
      center: function() {
        return this.canvas && this.canvas.centerObject(this), this;
      },
      viewportCenter: function() {
        return this.canvas && this.canvas.viewportCenterObject(this), this;
      },
      getLocalPointer: function(p, v) {
        v = v || this.canvas.getPointer(p);
        var b = new n.Point(v.x, v.y), y = this._getLeftTopCoords();
        return this.angle && (b = n.util.rotatePoint(
          b,
          y,
          c(-this.angle)
        )), {
          x: b.x - y.x,
          y: b.y - y.y
        };
      },
      _setupCompositeOperation: function(p) {
        this.globalCompositeOperation && (p.globalCompositeOperation = this.globalCompositeOperation);
      },
      dispose: function() {
        n.runningAnimations && n.runningAnimations.cancelByTarget(this);
      }
    }), n.util.createAccessors && n.util.createAccessors(n.Object), a(n.Object.prototype, n.Observable), n.Object.NUM_FRACTION_DIGITS = 2, n.Object.ENLIVEN_PROPS = ["clipPath"], n.Object._fromObject = function(p, v, b, y) {
      var w = n[p];
      v = h(v, !0), n.util.enlivenPatterns([v.fill, v.stroke], function(_) {
        typeof _[0] < "u" && (v.fill = _[0]), typeof _[1] < "u" && (v.stroke = _[1]), n.util.enlivenObjectEnlivables(v, v, function() {
          var S = y ? new w(v[y], v) : new w(v);
          b && b(S);
        });
      });
    }, n.Object.__uid = 0);
  }(t), function() {
    var l = e.util.degreesToRadians, n = {
      left: -0.5,
      center: 0,
      right: 0.5
    }, a = {
      top: -0.5,
      center: 0,
      bottom: 0.5
    };
    e.util.object.extend(e.Object.prototype, {
      translateToGivenOrigin: function(h, o, u, c, d) {
        var m = h.x, p = h.y, v, b, y;
        return typeof o == "string" ? o = n[o] : o -= 0.5, typeof c == "string" ? c = n[c] : c -= 0.5, v = c - o, typeof u == "string" ? u = a[u] : u -= 0.5, typeof d == "string" ? d = a[d] : d -= 0.5, b = d - u, (v || b) && (y = this._getTransformedDimensions(), m = h.x + v * y.x, p = h.y + b * y.y), new e.Point(m, p);
      },
      translateToCenterPoint: function(h, o, u) {
        var c = this.translateToGivenOrigin(h, o, u, "center", "center");
        return this.angle ? e.util.rotatePoint(c, h, l(this.angle)) : c;
      },
      translateToOriginPoint: function(h, o, u) {
        var c = this.translateToGivenOrigin(h, "center", "center", o, u);
        return this.angle ? e.util.rotatePoint(c, h, l(this.angle)) : c;
      },
      getCenterPoint: function() {
        var h = new e.Point(this.left, this.top);
        return this.translateToCenterPoint(h, this.originX, this.originY);
      },
      getPointByOrigin: function(h, o) {
        var u = this.getCenterPoint();
        return this.translateToOriginPoint(u, h, o);
      },
      toLocalPoint: function(h, o, u) {
        var c = this.getCenterPoint(), d, m;
        return typeof o < "u" && typeof u < "u" ? d = this.translateToGivenOrigin(c, "center", "center", o, u) : d = new e.Point(this.left, this.top), m = new e.Point(h.x, h.y), this.angle && (m = e.util.rotatePoint(m, c, -l(this.angle))), m.subtractEquals(d);
      },
      setPositionByOrigin: function(h, o, u) {
        var c = this.translateToCenterPoint(h, o, u), d = this.translateToOriginPoint(c, this.originX, this.originY);
        this.set("left", d.x), this.set("top", d.y);
      },
      adjustPosition: function(h) {
        var o = l(this.angle), u = this.getScaledWidth(), c = e.util.cos(o) * u, d = e.util.sin(o) * u, m, p;
        typeof this.originX == "string" ? m = n[this.originX] : m = this.originX - 0.5, typeof h == "string" ? p = n[h] : p = h - 0.5, this.left += c * (p - m), this.top += d * (p - m), this.setCoords(), this.originX = h;
      },
      _setOriginToCenter: function() {
        this._originalOriginX = this.originX, this._originalOriginY = this.originY;
        var h = this.getCenterPoint();
        this.originX = "center", this.originY = "center", this.left = h.x, this.top = h.y;
      },
      _resetOrigin: function() {
        var h = this.translateToOriginPoint(
          this.getCenterPoint(),
          this._originalOriginX,
          this._originalOriginY
        );
        this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = h.x, this.top = h.y, this._originalOriginX = null, this._originalOriginY = null;
      },
      _getLeftTopCoords: function() {
        return this.translateToOriginPoint(this.getCenterPoint(), "left", "top");
      }
    });
  }(), function() {
    function l(u) {
      return [
        new e.Point(u.tl.x, u.tl.y),
        new e.Point(u.tr.x, u.tr.y),
        new e.Point(u.br.x, u.br.y),
        new e.Point(u.bl.x, u.bl.y)
      ];
    }
    var n = e.util, a = n.degreesToRadians, h = n.multiplyTransformMatrices, o = n.transformPoint;
    n.object.extend(e.Object.prototype, {
      oCoords: null,
      aCoords: null,
      lineCoords: null,
      ownMatrixCache: null,
      matrixCache: null,
      controls: {},
      _getCoords: function(u, c) {
        return c ? u ? this.calcACoords() : this.calcLineCoords() : ((!this.aCoords || !this.lineCoords) && this.setCoords(!0), u ? this.aCoords : this.lineCoords);
      },
      getCoords: function(u, c) {
        return l(this._getCoords(u, c));
      },
      intersectsWithRect: function(u, c, d, m) {
        var p = this.getCoords(d, m), v = e.Intersection.intersectPolygonRectangle(
          p,
          u,
          c
        );
        return v.status === "Intersection";
      },
      intersectsWithObject: function(u, c, d) {
        var m = e.Intersection.intersectPolygonPolygon(
          this.getCoords(c, d),
          u.getCoords(c, d)
        );
        return m.status === "Intersection" || u.isContainedWithinObject(this, c, d) || this.isContainedWithinObject(u, c, d);
      },
      isContainedWithinObject: function(u, c, d) {
        for (var m = this.getCoords(c, d), p = c ? u.aCoords : u.lineCoords, v = 0, b = u._getImageLines(p); v < 4; v++)
          if (!u.containsPoint(m[v], b))
            return !1;
        return !0;
      },
      isContainedWithinRect: function(u, c, d, m) {
        var p = this.getBoundingRect(d, m);
        return p.left >= u.x && p.left + p.width <= c.x && p.top >= u.y && p.top + p.height <= c.y;
      },
      containsPoint: function(u, v, d, m) {
        var p = this._getCoords(d, m), v = v || this._getImageLines(p), b = this._findCrossPoints(u, v);
        return b !== 0 && b % 2 === 1;
      },
      isOnScreen: function(u) {
        if (!this.canvas)
          return !1;
        var c = this.canvas.vptCoords.tl, d = this.canvas.vptCoords.br, m = this.getCoords(!0, u);
        return m.some(function(p) {
          return p.x <= d.x && p.x >= c.x && p.y <= d.y && p.y >= c.y;
        }) || this.intersectsWithRect(c, d, !0, u) ? !0 : this._containsCenterOfCanvas(c, d, u);
      },
      _containsCenterOfCanvas: function(u, c, d) {
        var m = { x: (u.x + c.x) / 2, y: (u.y + c.y) / 2 };
        return !!this.containsPoint(m, null, !0, d);
      },
      isPartiallyOnScreen: function(u) {
        if (!this.canvas)
          return !1;
        var c = this.canvas.vptCoords.tl, d = this.canvas.vptCoords.br;
        if (this.intersectsWithRect(c, d, !0, u))
          return !0;
        var m = this.getCoords(!0, u).every(function(p) {
          return (p.x >= d.x || p.x <= c.x) && (p.y >= d.y || p.y <= c.y);
        });
        return m && this._containsCenterOfCanvas(c, d, u);
      },
      _getImageLines: function(u) {
        var c = {
          topline: {
            o: u.tl,
            d: u.tr
          },
          rightline: {
            o: u.tr,
            d: u.br
          },
          bottomline: {
            o: u.br,
            d: u.bl
          },
          leftline: {
            o: u.bl,
            d: u.tl
          }
        };
        return c;
      },
      _findCrossPoints: function(u, c) {
        var d, m, p, v, b, y = 0, w;
        for (var _ in c)
          if (w = c[_], !(w.o.y < u.y && w.d.y < u.y) && !(w.o.y >= u.y && w.d.y >= u.y) && (w.o.x === w.d.x && w.o.x >= u.x ? b = w.o.x : (d = 0, m = (w.d.y - w.o.y) / (w.d.x - w.o.x), p = u.y - d * u.x, v = w.o.y - m * w.o.x, b = -(p - v) / (d - m)), b >= u.x && (y += 1), y === 2))
            break;
        return y;
      },
      getBoundingRect: function(u, c) {
        var d = this.getCoords(u, c);
        return n.makeBoundingBoxFromPoints(d);
      },
      getScaledWidth: function() {
        return this._getTransformedDimensions().x;
      },
      getScaledHeight: function() {
        return this._getTransformedDimensions().y;
      },
      _constrainScale: function(u) {
        return Math.abs(u) < this.minScaleLimit ? u < 0 ? -this.minScaleLimit : this.minScaleLimit : u === 0 ? 1e-4 : u;
      },
      scale: function(u) {
        return this._set("scaleX", u), this._set("scaleY", u), this.setCoords();
      },
      scaleToWidth: function(u, c) {
        var d = this.getBoundingRect(c).width / this.getScaledWidth();
        return this.scale(u / this.width / d);
      },
      scaleToHeight: function(u, c) {
        var d = this.getBoundingRect(c).height / this.getScaledHeight();
        return this.scale(u / this.height / d);
      },
      calcLineCoords: function() {
        var u = this.getViewportTransform(), c = this.padding, d = a(this.angle), m = n.cos(d), p = n.sin(d), v = m * c, b = p * c, y = v + b, w = v - b, _ = this.calcACoords(), S = {
          tl: o(_.tl, u),
          tr: o(_.tr, u),
          bl: o(_.bl, u),
          br: o(_.br, u)
        };
        return c && (S.tl.x -= w, S.tl.y -= y, S.tr.x += y, S.tr.y -= w, S.bl.x -= y, S.bl.y += w, S.br.x += w, S.br.y += y), S;
      },
      calcOCoords: function() {
        var u = this._calcRotateMatrix(), c = this._calcTranslateMatrix(), d = this.getViewportTransform(), m = h(d, c), p = h(m, u), p = h(p, [1 / d[0], 0, 0, 1 / d[3], 0, 0]), v = this._calculateCurrentDimensions(), b = {};
        return this.forEachControl(function(y, w, _) {
          b[w] = y.positionHandler(v, p, _);
        }), b;
      },
      calcACoords: function() {
        var u = this._calcRotateMatrix(), c = this._calcTranslateMatrix(), d = h(c, u), m = this._getTransformedDimensions(), p = m.x / 2, v = m.y / 2;
        return {
          tl: o({ x: -p, y: -v }, d),
          tr: o({ x: p, y: -v }, d),
          bl: o({ x: -p, y: v }, d),
          br: o({ x: p, y: v }, d)
        };
      },
      setCoords: function(u) {
        return this.aCoords = this.calcACoords(), this.lineCoords = this.group ? this.aCoords : this.calcLineCoords(), u ? this : (this.oCoords = this.calcOCoords(), this._setCornerCoords && this._setCornerCoords(), this);
      },
      _calcRotateMatrix: function() {
        return n.calcRotateMatrix(this);
      },
      _calcTranslateMatrix: function() {
        var u = this.getCenterPoint();
        return [1, 0, 0, 1, u.x, u.y];
      },
      transformMatrixKey: function(u) {
        var c = "_", d = "";
        return !u && this.group && (d = this.group.transformMatrixKey(u) + c), d + this.top + c + this.left + c + this.scaleX + c + this.scaleY + c + this.skewX + c + this.skewY + c + this.angle + c + this.originX + c + this.originY + c + this.width + c + this.height + c + this.strokeWidth + this.flipX + this.flipY;
      },
      calcTransformMatrix: function(u) {
        var c = this.calcOwnMatrix();
        if (u || !this.group)
          return c;
        var d = this.transformMatrixKey(u), m = this.matrixCache || (this.matrixCache = {});
        return m.key === d ? m.value : (this.group && (c = h(this.group.calcTransformMatrix(!1), c)), m.key = d, m.value = c, c);
      },
      calcOwnMatrix: function() {
        var u = this.transformMatrixKey(!0), c = this.ownMatrixCache || (this.ownMatrixCache = {});
        if (c.key === u)
          return c.value;
        var d = this._calcTranslateMatrix(), m = {
          angle: this.angle,
          translateX: d[4],
          translateY: d[5],
          scaleX: this.scaleX,
          scaleY: this.scaleY,
          skewX: this.skewX,
          skewY: this.skewY,
          flipX: this.flipX,
          flipY: this.flipY
        };
        return c.key = u, c.value = n.composeMatrix(m), c.value;
      },
      _getNonTransformedDimensions: function() {
        var u = this.strokeWidth, c = this.width + u, d = this.height + u;
        return { x: c, y: d };
      },
      _getTransformedDimensions: function(u, c) {
        typeof u > "u" && (u = this.skewX), typeof c > "u" && (c = this.skewY);
        var d, m, p, v = u === 0 && c === 0;
        if (this.strokeUniform ? (m = this.width, p = this.height) : (d = this._getNonTransformedDimensions(), m = d.x, p = d.y), v)
          return this._finalizeDimensions(m * this.scaleX, p * this.scaleY);
        var b = n.sizeAfterTransform(m, p, {
          scaleX: this.scaleX,
          scaleY: this.scaleY,
          skewX: u,
          skewY: c
        });
        return this._finalizeDimensions(b.x, b.y);
      },
      _finalizeDimensions: function(u, c) {
        return this.strokeUniform ? { x: u + this.strokeWidth, y: c + this.strokeWidth } : { x: u, y: c };
      },
      _calculateCurrentDimensions: function() {
        var u = this.getViewportTransform(), c = this._getTransformedDimensions(), d = o(c, u, !0);
        return d.scalarAdd(2 * this.padding);
      }
    });
  }(), e.util.object.extend(e.Object.prototype, {
    sendToBack: function() {
      return this.group ? e.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas && this.canvas.sendToBack(this), this;
    },
    bringToFront: function() {
      return this.group ? e.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas && this.canvas.bringToFront(this), this;
    },
    sendBackwards: function(l) {
      return this.group ? e.StaticCanvas.prototype.sendBackwards.call(this.group, this, l) : this.canvas && this.canvas.sendBackwards(this, l), this;
    },
    bringForward: function(l) {
      return this.group ? e.StaticCanvas.prototype.bringForward.call(this.group, this, l) : this.canvas && this.canvas.bringForward(this, l), this;
    },
    moveTo: function(l) {
      return this.group && this.group.type !== "activeSelection" ? e.StaticCanvas.prototype.moveTo.call(this.group, this, l) : this.canvas && this.canvas.moveTo(this, l), this;
    }
  }), function() {
    function l(a, h) {
      if (h) {
        if (h.toLive)
          return a + ": url(#SVGID_" + h.id + "); ";
        var o = new e.Color(h), u = a + ": " + o.toRgb() + "; ", c = o.getAlpha();
        return c !== 1 && (u += a + "-opacity: " + c.toString() + "; "), u;
      } else
        return a + ": none; ";
    }
    var n = e.util.toFixed;
    e.util.object.extend(e.Object.prototype, {
      getSvgStyles: function(a) {
        var h = this.fillRule ? this.fillRule : "nonzero", o = this.strokeWidth ? this.strokeWidth : "0", u = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none", c = this.strokeDashOffset ? this.strokeDashOffset : "0", d = this.strokeLineCap ? this.strokeLineCap : "butt", m = this.strokeLineJoin ? this.strokeLineJoin : "miter", p = this.strokeMiterLimit ? this.strokeMiterLimit : "4", v = typeof this.opacity < "u" ? this.opacity : "1", b = this.visible ? "" : " visibility: hidden;", y = a ? "" : this.getSvgFilter(), w = l("fill", this.fill), _ = l("stroke", this.stroke);
        return [
          _,
          "stroke-width: ",
          o,
          "; ",
          "stroke-dasharray: ",
          u,
          "; ",
          "stroke-linecap: ",
          d,
          "; ",
          "stroke-dashoffset: ",
          c,
          "; ",
          "stroke-linejoin: ",
          m,
          "; ",
          "stroke-miterlimit: ",
          p,
          "; ",
          w,
          "fill-rule: ",
          h,
          "; ",
          "opacity: ",
          v,
          ";",
          y,
          b
        ].join("");
      },
      getSvgSpanStyles: function(a, h) {
        var o = "; ", c = a.fontFamily ? "font-family: " + (a.fontFamily.indexOf("'") === -1 && a.fontFamily.indexOf('"') === -1 ? "'" + a.fontFamily + "'" : a.fontFamily) + o : "", u = a.strokeWidth ? "stroke-width: " + a.strokeWidth + o : "", c = c, d = a.fontSize ? "font-size: " + a.fontSize + "px" + o : "", m = a.fontStyle ? "font-style: " + a.fontStyle + o : "", p = a.fontWeight ? "font-weight: " + a.fontWeight + o : "", v = a.fill ? l("fill", a.fill) : "", b = a.stroke ? l("stroke", a.stroke) : "", y = this.getSvgTextDecoration(a), w = a.deltaY ? "baseline-shift: " + -a.deltaY + "; " : "";
        return y && (y = "text-decoration: " + y + o), [
          b,
          u,
          c,
          d,
          m,
          p,
          y,
          v,
          w,
          h ? "white-space: pre; " : ""
        ].join("");
      },
      getSvgTextDecoration: function(a) {
        return ["overline", "underline", "line-through"].filter(function(h) {
          return a[h.replace("-", "")];
        }).join(" ");
      },
      getSvgFilter: function() {
        return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : "";
      },
      getSvgCommons: function() {
        return [
          this.id ? 'id="' + this.id + '" ' : "",
          this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""
        ].join("");
      },
      getSvgTransform: function(a, h) {
        var o = a ? this.calcTransformMatrix() : this.calcOwnMatrix(), u = 'transform="' + e.util.matrixToSVG(o);
        return u + (h || "") + '" ';
      },
      _setSVGBg: function(a) {
        if (this.backgroundColor) {
          var h = e.Object.NUM_FRACTION_DIGITS;
          a.push(
            "		<rect ",
            this._getFillAttributes(this.backgroundColor),
            ' x="',
            n(-this.width / 2, h),
            '" y="',
            n(-this.height / 2, h),
            '" width="',
            n(this.width, h),
            '" height="',
            n(this.height, h),
            `"></rect>
`
          );
        }
      },
      toSVG: function(a) {
        return this._createBaseSVGMarkup(this._toSVG(a), { reviver: a });
      },
      toClipPathSVG: function(a) {
        return "	" + this._createBaseClipPathSVGMarkup(this._toSVG(a), { reviver: a });
      },
      _createBaseClipPathSVGMarkup: function(a, h) {
        h = h || {};
        var o = h.reviver, u = h.additionalTransform || "", c = [
          this.getSvgTransform(!0, u),
          this.getSvgCommons()
        ].join(""), d = a.indexOf("COMMON_PARTS");
        return a[d] = c, o ? o(a.join("")) : a.join("");
      },
      _createBaseSVGMarkup: function(a, h) {
        h = h || {};
        var o = h.noStyle, u = h.reviver, c = o ? "" : 'style="' + this.getSvgStyles() + '" ', d = h.withShadow ? 'style="' + this.getSvgFilter() + '" ' : "", m = this.clipPath, p = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "", v = m && m.absolutePositioned, b = this.stroke, y = this.fill, w = this.shadow, _, S = [], C, k = a.indexOf("COMMON_PARTS"), R = h.additionalTransform;
        return m && (m.clipPathId = "CLIPPATH_" + e.Object.__uid++, C = '<clipPath id="' + m.clipPathId + `" >
` + m.toClipPathSVG(u) + `</clipPath>
`), v && S.push(
          "<g ",
          d,
          this.getSvgCommons(),
          ` >
`
        ), S.push(
          "<g ",
          this.getSvgTransform(!1),
          v ? "" : d + this.getSvgCommons(),
          ` >
`
        ), _ = [
          c,
          p,
          o ? "" : this.addPaintOrder(),
          " ",
          R ? 'transform="' + R + '" ' : ""
        ].join(""), a[k] = _, y && y.toLive && S.push(y.toSVG(this)), b && b.toLive && S.push(b.toSVG(this)), w && S.push(w.toSVG(this)), m && S.push(C), S.push(a.join("")), S.push(`</g>
`), v && S.push(`</g>
`), u ? u(S.join("")) : S.join("");
      },
      addPaintOrder: function() {
        return this.paintFirst !== "fill" ? ' paint-order="' + this.paintFirst + '" ' : "";
      }
    });
  }(), function() {
    var l = e.util.object.extend, n = "stateProperties";
    function a(o, u, c) {
      var d = {}, m = !0;
      c.forEach(function(p) {
        d[p] = o[p];
      }), l(o[u], d, m);
    }
    function h(o, u, c) {
      if (o === u)
        return !0;
      if (Array.isArray(o)) {
        if (!Array.isArray(u) || o.length !== u.length)
          return !1;
        for (var d = 0, m = o.length; d < m; d++)
          if (!h(o[d], u[d]))
            return !1;
        return !0;
      } else if (o && typeof o == "object") {
        var p = Object.keys(o), v;
        if (!u || typeof u != "object" || !c && p.length !== Object.keys(u).length)
          return !1;
        for (var d = 0, m = p.length; d < m; d++)
          if (v = p[d], !(v === "canvas" || v === "group") && !h(o[v], u[v]))
            return !1;
        return !0;
      }
    }
    e.util.object.extend(e.Object.prototype, {
      hasStateChanged: function(o) {
        o = o || n;
        var u = "_" + o;
        return Object.keys(this[u]).length < this[o].length ? !0 : !h(this[u], this, !0);
      },
      saveState: function(o) {
        var u = o && o.propertySet || n, c = "_" + u;
        return this[c] ? (a(this, c, this[u]), o && o.stateProperties && a(this, c, o.stateProperties), this) : this.setupState(o);
      },
      setupState: function(o) {
        o = o || {};
        var u = o.propertySet || n;
        return o.propertySet = u, this["_" + u] = {}, this.saveState(o), this;
      }
    });
  }(), function() {
    var l = e.util.degreesToRadians;
    e.util.object.extend(e.Object.prototype, {
      _findTargetCorner: function(n, a) {
        if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this)
          return !1;
        var h = n.x, o = n.y, u, c, d = Object.keys(this.oCoords), m = d.length - 1, p;
        for (this.__corner = 0; m >= 0; m--)
          if (p = d[m], !!this.isControlVisible(p) && (c = this._getImageLines(a ? this.oCoords[p].touchCorner : this.oCoords[p].corner), u = this._findCrossPoints({ x: h, y: o }, c), u !== 0 && u % 2 === 1))
            return this.__corner = p, p;
        return !1;
      },
      forEachControl: function(n) {
        for (var a in this.controls)
          n(this.controls[a], a, this);
      },
      _setCornerCoords: function() {
        var n = this.oCoords;
        for (var a in n) {
          var h = this.controls[a];
          n[a].corner = h.calcCornerCoords(
            this.angle,
            this.cornerSize,
            n[a].x,
            n[a].y,
            !1
          ), n[a].touchCorner = h.calcCornerCoords(
            this.angle,
            this.touchCornerSize,
            n[a].x,
            n[a].y,
            !0
          );
        }
      },
      drawSelectionBackground: function(n) {
        if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this)
          return this;
        n.save();
        var a = this.getCenterPoint(), h = this._calculateCurrentDimensions(), o = this.canvas.viewportTransform;
        return n.translate(a.x, a.y), n.scale(1 / o[0], 1 / o[3]), n.rotate(l(this.angle)), n.fillStyle = this.selectionBackgroundColor, n.fillRect(-h.x / 2, -h.y / 2, h.x, h.y), n.restore(), this;
      },
      drawBorders: function(n, a) {
        a = a || {};
        var h = this._calculateCurrentDimensions(), o = this.borderScaleFactor, u = h.x + o, c = h.y + o, d = typeof a.hasControls < "u" ? a.hasControls : this.hasControls, m = !1;
        return n.save(), n.strokeStyle = a.borderColor || this.borderColor, this._setLineDash(n, a.borderDashArray || this.borderDashArray), n.strokeRect(
          -u / 2,
          -c / 2,
          u,
          c
        ), d && (n.beginPath(), this.forEachControl(function(p, v, b) {
          p.withConnection && p.getVisibility(b, v) && (m = !0, n.moveTo(p.x * u, p.y * c), n.lineTo(
            p.x * u + p.offsetX,
            p.y * c + p.offsetY
          ));
        }), m && n.stroke()), n.restore(), this;
      },
      drawBordersInGroup: function(n, a, h) {
        h = h || {};
        var o = e.util.sizeAfterTransform(this.width, this.height, a), u = this.strokeWidth, c = this.strokeUniform, d = this.borderScaleFactor, m = o.x + u * (c ? this.canvas.getZoom() : a.scaleX) + d, p = o.y + u * (c ? this.canvas.getZoom() : a.scaleY) + d;
        return n.save(), this._setLineDash(n, h.borderDashArray || this.borderDashArray), n.strokeStyle = h.borderColor || this.borderColor, n.strokeRect(
          -m / 2,
          -p / 2,
          m,
          p
        ), n.restore(), this;
      },
      drawControls: function(n, a) {
        a = a || {}, n.save();
        var h = this.canvas.getRetinaScaling(), o, u;
        return n.setTransform(h, 0, 0, h, 0, 0), n.strokeStyle = n.fillStyle = a.cornerColor || this.cornerColor, this.transparentCorners || (n.strokeStyle = a.cornerStrokeColor || this.cornerStrokeColor), this._setLineDash(n, a.cornerDashArray || this.cornerDashArray), this.setCoords(), this.group && (o = this.group.calcTransformMatrix()), this.forEachControl(function(c, d, m) {
          u = m.oCoords[d], c.getVisibility(m, d) && (o && (u = e.util.transformPoint(u, o)), c.render(n, u.x, u.y, a, m));
        }), n.restore(), this;
      },
      isControlVisible: function(n) {
        return this.controls[n] && this.controls[n].getVisibility(this, n);
      },
      setControlVisible: function(n, a) {
        return this._controlsVisibility || (this._controlsVisibility = {}), this._controlsVisibility[n] = a, this;
      },
      setControlsVisibility: function(n) {
        n || (n = {});
        for (var a in n)
          this.setControlVisible(a, n[a]);
        return this;
      },
      onDeselect: function() {
      },
      onSelect: function() {
      }
    });
  }(), e.util.object.extend(e.StaticCanvas.prototype, {
    FX_DURATION: 500,
    fxCenterObjectH: function(l, n) {
      n = n || {};
      var a = function() {
      }, h = n.onComplete || a, o = n.onChange || a, u = this;
      return e.util.animate({
        target: this,
        startValue: l.left,
        endValue: this.getCenterPoint().x,
        duration: this.FX_DURATION,
        onChange: function(c) {
          l.set("left", c), u.requestRenderAll(), o();
        },
        onComplete: function() {
          l.setCoords(), h();
        }
      });
    },
    fxCenterObjectV: function(l, n) {
      n = n || {};
      var a = function() {
      }, h = n.onComplete || a, o = n.onChange || a, u = this;
      return e.util.animate({
        target: this,
        startValue: l.top,
        endValue: this.getCenterPoint().y,
        duration: this.FX_DURATION,
        onChange: function(c) {
          l.set("top", c), u.requestRenderAll(), o();
        },
        onComplete: function() {
          l.setCoords(), h();
        }
      });
    },
    fxRemove: function(l, n) {
      n = n || {};
      var a = function() {
      }, h = n.onComplete || a, o = n.onChange || a, u = this;
      return e.util.animate({
        target: this,
        startValue: l.opacity,
        endValue: 0,
        duration: this.FX_DURATION,
        onChange: function(c) {
          l.set("opacity", c), u.requestRenderAll(), o();
        },
        onComplete: function() {
          u.remove(l), h();
        }
      });
    }
  }), e.util.object.extend(e.Object.prototype, {
    animate: function() {
      if (arguments[0] && typeof arguments[0] == "object") {
        var l = [], n, a, h = [];
        for (n in arguments[0])
          l.push(n);
        for (var o = 0, u = l.length; o < u; o++)
          n = l[o], a = o !== u - 1, h.push(this._animate(n, arguments[0][n], arguments[1], a));
        return h;
      } else
        return this._animate.apply(this, arguments);
    },
    _animate: function(l, n, a, h) {
      var o = this, u;
      n = n.toString(), a ? a = e.util.object.clone(a) : a = {}, ~l.indexOf(".") && (u = l.split("."));
      var c = o.colorProperties.indexOf(l) > -1 || u && o.colorProperties.indexOf(u[1]) > -1, d = u ? this.get(u[0])[u[1]] : this.get(l);
      "from" in a || (a.from = d), c || (~n.indexOf("=") ? n = d + parseFloat(n.replace("=", "")) : n = parseFloat(n));
      var m = {
        target: this,
        startValue: a.from,
        endValue: n,
        byValue: a.by,
        easing: a.easing,
        duration: a.duration,
        abort: a.abort && function(p, v, b) {
          return a.abort.call(o, p, v, b);
        },
        onChange: function(p, v, b) {
          u ? o[u[0]][u[1]] = p : o.set(l, p), !h && a.onChange && a.onChange(p, v, b);
        },
        onComplete: function(p, v, b) {
          h || (o.setCoords(), a.onComplete && a.onComplete(p, v, b));
        }
      };
      return c ? e.util.animateColor(m.startValue, m.endValue, m.duration, m) : e.util.animate(m);
    }
  }), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.util.object.clone, o = { x1: 1, x2: 1, y1: 1, y2: 1 };
    if (n.Line) {
      n.warn("fabric.Line is already defined");
      return;
    }
    n.Line = n.util.createClass(n.Object, {
      type: "line",
      x1: 0,
      y1: 0,
      x2: 0,
      y2: 0,
      cacheProperties: n.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
      initialize: function(c, d) {
        c || (c = [0, 0, 0, 0]), this.callSuper("initialize", d), this.set("x1", c[0]), this.set("y1", c[1]), this.set("x2", c[2]), this.set("y2", c[3]), this._setWidthHeight(d);
      },
      _setWidthHeight: function(c) {
        c || (c = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in c ? c.left : this._getLeftToOriginX(), this.top = "top" in c ? c.top : this._getTopToOriginY();
      },
      _set: function(c, d) {
        return this.callSuper("_set", c, d), typeof o[c] < "u" && this._setWidthHeight(), this;
      },
      _getLeftToOriginX: u(
        {
          origin: "originX",
          axis1: "x1",
          axis2: "x2",
          dimension: "width"
        },
        {
          nearest: "left",
          center: "center",
          farthest: "right"
        }
      ),
      _getTopToOriginY: u(
        {
          origin: "originY",
          axis1: "y1",
          axis2: "y2",
          dimension: "height"
        },
        {
          nearest: "top",
          center: "center",
          farthest: "bottom"
        }
      ),
      _render: function(c) {
        c.beginPath();
        var d = this.calcLinePoints();
        c.moveTo(d.x1, d.y1), c.lineTo(d.x2, d.y2), c.lineWidth = this.strokeWidth;
        var m = c.strokeStyle;
        c.strokeStyle = this.stroke || c.fillStyle, this.stroke && this._renderStroke(c), c.strokeStyle = m;
      },
      _findCenterFromElement: function() {
        return {
          x: (this.x1 + this.x2) / 2,
          y: (this.y1 + this.y2) / 2
        };
      },
      toObject: function(c) {
        return a(this.callSuper("toObject", c), this.calcLinePoints());
      },
      _getNonTransformedDimensions: function() {
        var c = this.callSuper("_getNonTransformedDimensions");
        return this.strokeLineCap === "butt" && (this.width === 0 && (c.y -= this.strokeWidth), this.height === 0 && (c.x -= this.strokeWidth)), c;
      },
      calcLinePoints: function() {
        var c = this.x1 <= this.x2 ? -1 : 1, d = this.y1 <= this.y2 ? -1 : 1, m = c * this.width * 0.5, p = d * this.height * 0.5, v = c * this.width * -0.5, b = d * this.height * -0.5;
        return {
          x1: m,
          x2: v,
          y1: p,
          y2: b
        };
      },
      _toSVG: function() {
        var c = this.calcLinePoints();
        return [
          "<line ",
          "COMMON_PARTS",
          'x1="',
          c.x1,
          '" y1="',
          c.y1,
          '" x2="',
          c.x2,
          '" y2="',
          c.y2,
          `" />
`
        ];
      }
    }), n.Line.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), n.Line.fromElement = function(c, d, m) {
      m = m || {};
      var p = n.parseAttributes(c, n.Line.ATTRIBUTE_NAMES), v = [
        p.x1 || 0,
        p.y1 || 0,
        p.x2 || 0,
        p.y2 || 0
      ];
      d(new n.Line(v, a(p, m)));
    }, n.Line.fromObject = function(c, d) {
      function m(v) {
        delete v.points, d && d(v);
      }
      var p = h(c, !0);
      p.points = [c.x1, c.y1, c.x2, c.y2], n.Object._fromObject("Line", p, m, "points");
    };
    function u(c, d) {
      var m = c.origin, p = c.axis1, v = c.axis2, b = c.dimension, y = d.nearest, w = d.center, _ = d.farthest;
      return function() {
        switch (this.get(m)) {
          case y:
            return Math.min(this.get(p), this.get(v));
          case w:
            return Math.min(this.get(p), this.get(v)) + 0.5 * this.get(b);
          case _:
            return Math.max(this.get(p), this.get(v));
        }
      };
    }
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.degreesToRadians;
    if (n.Circle) {
      n.warn("fabric.Circle is already defined.");
      return;
    }
    n.Circle = n.util.createClass(n.Object, {
      type: "circle",
      radius: 0,
      startAngle: 0,
      endAngle: 360,
      cacheProperties: n.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
      _set: function(o, u) {
        return this.callSuper("_set", o, u), o === "radius" && this.setRadius(u), this;
      },
      toObject: function(o) {
        return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(o));
      },
      _toSVG: function() {
        var o, u = 0, c = 0, d = (this.endAngle - this.startAngle) % 360;
        if (d === 0)
          o = [
            "<circle ",
            "COMMON_PARTS",
            'cx="' + u + '" cy="' + c + '" ',
            'r="',
            this.radius,
            `" />
`
          ];
        else {
          var m = a(this.startAngle), p = a(this.endAngle), v = this.radius, b = n.util.cos(m) * v, y = n.util.sin(m) * v, w = n.util.cos(p) * v, _ = n.util.sin(p) * v, S = d > 180 ? "1" : "0";
          o = [
            '<path d="M ' + b + " " + y,
            " A " + v + " " + v,
            " 0 ",
            +S + " 1",
            " " + w + " " + _,
            '" ',
            "COMMON_PARTS",
            ` />
`
          ];
        }
        return o;
      },
      _render: function(o) {
        o.beginPath(), o.arc(
          0,
          0,
          this.radius,
          a(this.startAngle),
          a(this.endAngle),
          !1
        ), this._renderPaintInOrder(o);
      },
      getRadiusX: function() {
        return this.get("radius") * this.get("scaleX");
      },
      getRadiusY: function() {
        return this.get("radius") * this.get("scaleY");
      },
      setRadius: function(o) {
        return this.radius = o, this.set("width", o * 2).set("height", o * 2);
      }
    }), n.Circle.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), n.Circle.fromElement = function(o, u) {
      var c = n.parseAttributes(o, n.Circle.ATTRIBUTE_NAMES);
      if (!h(c))
        throw new Error("value of `r` attribute is required and can not be negative");
      c.left = (c.left || 0) - c.radius, c.top = (c.top || 0) - c.radius, u(new n.Circle(c));
    };
    function h(o) {
      return "radius" in o && o.radius >= 0;
    }
    n.Circle.fromObject = function(o, u) {
      n.Object._fromObject("Circle", o, u);
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {});
    if (n.Triangle) {
      n.warn("fabric.Triangle is already defined");
      return;
    }
    n.Triangle = n.util.createClass(n.Object, {
      type: "triangle",
      width: 100,
      height: 100,
      _render: function(a) {
        var h = this.width / 2, o = this.height / 2;
        a.beginPath(), a.moveTo(-h, o), a.lineTo(0, -o), a.lineTo(h, o), a.closePath(), this._renderPaintInOrder(a);
      },
      _toSVG: function() {
        var a = this.width / 2, h = this.height / 2, o = [
          -a + " " + h,
          "0 " + -h,
          a + " " + h
        ].join(",");
        return [
          "<polygon ",
          "COMMON_PARTS",
          'points="',
          o,
          '" />'
        ];
      }
    }), n.Triangle.fromObject = function(a, h) {
      return n.Object._fromObject("Triangle", a, h);
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = Math.PI * 2;
    if (n.Ellipse) {
      n.warn("fabric.Ellipse is already defined.");
      return;
    }
    n.Ellipse = n.util.createClass(n.Object, {
      type: "ellipse",
      rx: 0,
      ry: 0,
      cacheProperties: n.Object.prototype.cacheProperties.concat("rx", "ry"),
      initialize: function(h) {
        this.callSuper("initialize", h), this.set("rx", h && h.rx || 0), this.set("ry", h && h.ry || 0);
      },
      _set: function(h, o) {
        switch (this.callSuper("_set", h, o), h) {
          case "rx":
            this.rx = o, this.set("width", o * 2);
            break;
          case "ry":
            this.ry = o, this.set("height", o * 2);
            break;
        }
        return this;
      },
      getRx: function() {
        return this.get("rx") * this.get("scaleX");
      },
      getRy: function() {
        return this.get("ry") * this.get("scaleY");
      },
      toObject: function(h) {
        return this.callSuper("toObject", ["rx", "ry"].concat(h));
      },
      _toSVG: function() {
        return [
          "<ellipse ",
          "COMMON_PARTS",
          'cx="0" cy="0" ',
          'rx="',
          this.rx,
          '" ry="',
          this.ry,
          `" />
`
        ];
      },
      _render: function(h) {
        h.beginPath(), h.save(), h.transform(1, 0, 0, this.ry / this.rx, 0, 0), h.arc(
          0,
          0,
          this.rx,
          0,
          a,
          !1
        ), h.restore(), this._renderPaintInOrder(h);
      }
    }), n.Ellipse.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), n.Ellipse.fromElement = function(h, o) {
      var u = n.parseAttributes(h, n.Ellipse.ATTRIBUTE_NAMES);
      u.left = (u.left || 0) - u.rx, u.top = (u.top || 0) - u.ry, o(new n.Ellipse(u));
    }, n.Ellipse.fromObject = function(h, o) {
      n.Object._fromObject("Ellipse", h, o);
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend;
    if (n.Rect) {
      n.warn("fabric.Rect is already defined");
      return;
    }
    n.Rect = n.util.createClass(n.Object, {
      stateProperties: n.Object.prototype.stateProperties.concat("rx", "ry"),
      type: "rect",
      rx: 0,
      ry: 0,
      cacheProperties: n.Object.prototype.cacheProperties.concat("rx", "ry"),
      initialize: function(h) {
        this.callSuper("initialize", h), this._initRxRy();
      },
      _initRxRy: function() {
        this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry);
      },
      _render: function(h) {
        var o = this.rx ? Math.min(this.rx, this.width / 2) : 0, u = this.ry ? Math.min(this.ry, this.height / 2) : 0, c = this.width, d = this.height, m = -this.width / 2, p = -this.height / 2, v = o !== 0 || u !== 0, b = 1 - 0.5522847498;
        h.beginPath(), h.moveTo(m + o, p), h.lineTo(m + c - o, p), v && h.bezierCurveTo(m + c - b * o, p, m + c, p + b * u, m + c, p + u), h.lineTo(m + c, p + d - u), v && h.bezierCurveTo(m + c, p + d - b * u, m + c - b * o, p + d, m + c - o, p + d), h.lineTo(m + o, p + d), v && h.bezierCurveTo(m + b * o, p + d, m, p + d - b * u, m, p + d - u), h.lineTo(m, p + u), v && h.bezierCurveTo(m, p + b * u, m + b * o, p, m + o, p), h.closePath(), this._renderPaintInOrder(h);
      },
      toObject: function(h) {
        return this.callSuper("toObject", ["rx", "ry"].concat(h));
      },
      _toSVG: function() {
        var h = -this.width / 2, o = -this.height / 2;
        return [
          "<rect ",
          "COMMON_PARTS",
          'x="',
          h,
          '" y="',
          o,
          '" rx="',
          this.rx,
          '" ry="',
          this.ry,
          '" width="',
          this.width,
          '" height="',
          this.height,
          `" />
`
        ];
      }
    }), n.Rect.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), n.Rect.fromElement = function(h, o, u) {
      if (!h)
        return o(null);
      u = u || {};
      var c = n.parseAttributes(h, n.Rect.ATTRIBUTE_NAMES);
      c.left = c.left || 0, c.top = c.top || 0, c.height = c.height || 0, c.width = c.width || 0;
      var d = new n.Rect(a(u ? n.util.object.clone(u) : {}, c));
      d.visible = d.visible && d.width > 0 && d.height > 0, o(d);
    }, n.Rect.fromObject = function(h, o) {
      return n.Object._fromObject("Rect", h, o);
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.util.array.min, o = n.util.array.max, u = n.util.toFixed, c = n.util.projectStrokeOnPoints;
    if (n.Polyline) {
      n.warn("fabric.Polyline is already defined");
      return;
    }
    n.Polyline = n.util.createClass(n.Object, {
      type: "polyline",
      points: null,
      exactBoundingBox: !1,
      cacheProperties: n.Object.prototype.cacheProperties.concat("points"),
      initialize: function(d, m) {
        m = m || {}, this.points = d || [], this.callSuper("initialize", m), this._setPositionDimensions(m);
      },
      _projectStrokeOnPoints: function() {
        return c(this.points, this, !0);
      },
      _setPositionDimensions: function(d) {
        var m = this._calcDimensions(d), p, v = this.exactBoundingBox ? this.strokeWidth : 0;
        this.width = m.width - v, this.height = m.height - v, d.fromSVG || (p = this.translateToGivenOrigin(
          {
            x: m.left - this.strokeWidth / 2 + v / 2,
            y: m.top - this.strokeWidth / 2 + v / 2
          },
          "left",
          "top",
          this.originX,
          this.originY
        )), typeof d.left > "u" && (this.left = d.fromSVG ? m.left : p.x), typeof d.top > "u" && (this.top = d.fromSVG ? m.top : p.y), this.pathOffset = {
          x: m.left + this.width / 2 + v / 2,
          y: m.top + this.height / 2 + v / 2
        };
      },
      _calcDimensions: function() {
        var d = this.exactBoundingBox ? this._projectStrokeOnPoints() : this.points, m = h(d, "x") || 0, p = h(d, "y") || 0, v = o(d, "x") || 0, b = o(d, "y") || 0, y = v - m, w = b - p;
        return {
          left: m,
          top: p,
          width: y,
          height: w
        };
      },
      toObject: function(d) {
        return a(this.callSuper("toObject", d), {
          points: this.points.concat()
        });
      },
      _toSVG: function() {
        for (var d = [], m = this.pathOffset.x, p = this.pathOffset.y, v = n.Object.NUM_FRACTION_DIGITS, b = 0, y = this.points.length; b < y; b++)
          d.push(
            u(this.points[b].x - m, v),
            ",",
            u(this.points[b].y - p, v),
            " "
          );
        return [
          "<" + this.type + " ",
          "COMMON_PARTS",
          'points="',
          d.join(""),
          `" />
`
        ];
      },
      commonRender: function(d) {
        var m, p = this.points.length, v = this.pathOffset.x, b = this.pathOffset.y;
        if (!p || isNaN(this.points[p - 1].y))
          return !1;
        d.beginPath(), d.moveTo(this.points[0].x - v, this.points[0].y - b);
        for (var y = 0; y < p; y++)
          m = this.points[y], d.lineTo(m.x - v, m.y - b);
        return !0;
      },
      _render: function(d) {
        !this.commonRender(d) || this._renderPaintInOrder(d);
      },
      complexity: function() {
        return this.get("points").length;
      }
    }), n.Polyline.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat(), n.Polyline.fromElementGenerator = function(d) {
      return function(m, p, v) {
        if (!m)
          return p(null);
        v || (v = {});
        var b = n.parsePointsAttribute(m.getAttribute("points")), y = n.parseAttributes(m, n[d].ATTRIBUTE_NAMES);
        y.fromSVG = !0, p(new n[d](b, a(y, v)));
      };
    }, n.Polyline.fromElement = n.Polyline.fromElementGenerator("Polyline"), n.Polyline.fromObject = function(d, m) {
      return n.Object._fromObject("Polyline", d, m, "points");
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.projectStrokeOnPoints;
    if (n.Polygon) {
      n.warn("fabric.Polygon is already defined");
      return;
    }
    n.Polygon = n.util.createClass(n.Polyline, {
      type: "polygon",
      _projectStrokeOnPoints: function() {
        return a(this.points, this);
      },
      _render: function(h) {
        !this.commonRender(h) || (h.closePath(), this._renderPaintInOrder(h));
      }
    }), n.Polygon.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat(), n.Polygon.fromElement = n.Polyline.fromElementGenerator("Polygon"), n.Polygon.fromObject = function(h, o) {
      n.Object._fromObject("Polygon", h, o, "points");
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.array.min, h = n.util.array.max, o = n.util.object.extend, u = n.util.object.clone, c = n.util.toFixed;
    if (n.Path) {
      n.warn("fabric.Path is already defined");
      return;
    }
    n.Path = n.util.createClass(n.Object, {
      type: "path",
      path: null,
      cacheProperties: n.Object.prototype.cacheProperties.concat("path", "fillRule"),
      stateProperties: n.Object.prototype.stateProperties.concat("path"),
      initialize: function(d, m) {
        m = u(m || {}), delete m.path, this.callSuper("initialize", m), this._setPath(d || [], m);
      },
      _setPath: function(d, m) {
        this.path = n.util.makePathSimpler(
          Array.isArray(d) ? d : n.util.parsePath(d)
        ), n.Polyline.prototype._setPositionDimensions.call(this, m || {});
      },
      _renderPathCommands: function(d) {
        var m, p = 0, v = 0, b = 0, y = 0, w = 0, _ = 0, S = -this.pathOffset.x, C = -this.pathOffset.y;
        d.beginPath();
        for (var k = 0, R = this.path.length; k < R; ++k)
          switch (m = this.path[k], m[0]) {
            case "L":
              b = m[1], y = m[2], d.lineTo(b + S, y + C);
              break;
            case "M":
              b = m[1], y = m[2], p = b, v = y, d.moveTo(b + S, y + C);
              break;
            case "C":
              b = m[5], y = m[6], w = m[3], _ = m[4], d.bezierCurveTo(
                m[1] + S,
                m[2] + C,
                w + S,
                _ + C,
                b + S,
                y + C
              );
              break;
            case "Q":
              d.quadraticCurveTo(
                m[1] + S,
                m[2] + C,
                m[3] + S,
                m[4] + C
              ), b = m[3], y = m[4], w = m[1], _ = m[2];
              break;
            case "z":
            case "Z":
              b = p, y = v, d.closePath();
              break;
          }
      },
      _render: function(d) {
        this._renderPathCommands(d), this._renderPaintInOrder(d);
      },
      toString: function() {
        return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>";
      },
      toObject: function(d) {
        return o(this.callSuper("toObject", d), {
          path: this.path.map(function(m) {
            return m.slice();
          })
        });
      },
      toDatalessObject: function(d) {
        var m = this.toObject(["sourcePath"].concat(d));
        return m.sourcePath && delete m.path, m;
      },
      _toSVG: function() {
        var d = n.util.joinPath(this.path);
        return [
          "<path ",
          "COMMON_PARTS",
          'd="',
          d,
          '" stroke-linecap="round" ',
          `/>
`
        ];
      },
      _getOffsetTransform: function() {
        var d = n.Object.NUM_FRACTION_DIGITS;
        return " translate(" + c(-this.pathOffset.x, d) + ", " + c(-this.pathOffset.y, d) + ")";
      },
      toClipPathSVG: function(d) {
        var m = this._getOffsetTransform();
        return "	" + this._createBaseClipPathSVGMarkup(
          this._toSVG(),
          { reviver: d, additionalTransform: m }
        );
      },
      toSVG: function(d) {
        var m = this._getOffsetTransform();
        return this._createBaseSVGMarkup(this._toSVG(), { reviver: d, additionalTransform: m });
      },
      complexity: function() {
        return this.path.length;
      },
      _calcDimensions: function() {
        for (var d = [], m = [], p, v = 0, b = 0, y = 0, w = 0, _, S = 0, C = this.path.length; S < C; ++S) {
          switch (p = this.path[S], p[0]) {
            case "L":
              y = p[1], w = p[2], _ = [];
              break;
            case "M":
              y = p[1], w = p[2], v = y, b = w, _ = [];
              break;
            case "C":
              _ = n.util.getBoundsOfCurve(
                y,
                w,
                p[1],
                p[2],
                p[3],
                p[4],
                p[5],
                p[6]
              ), y = p[5], w = p[6];
              break;
            case "Q":
              _ = n.util.getBoundsOfCurve(
                y,
                w,
                p[1],
                p[2],
                p[1],
                p[2],
                p[3],
                p[4]
              ), y = p[3], w = p[4];
              break;
            case "z":
            case "Z":
              y = v, w = b;
              break;
          }
          _.forEach(function(G) {
            d.push(G.x), m.push(G.y);
          }), d.push(y), m.push(w);
        }
        var k = a(d) || 0, R = a(m) || 0, B = h(d) || 0, N = h(m) || 0, K = B - k, ee = N - R;
        return {
          left: k,
          top: R,
          width: K,
          height: ee
        };
      }
    }), n.Path.fromObject = function(d, m) {
      if (typeof d.sourcePath == "string") {
        var p = d.sourcePath;
        n.loadSVGFromURL(p, function(v) {
          var b = v[0];
          b.setOptions(d), d.clipPath ? n.util.enlivenObjects([d.clipPath], function(y) {
            b.clipPath = y[0], m && m(b);
          }) : m && m(b);
        });
      } else
        n.Object._fromObject("Path", d, m, "path");
    }, n.Path.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat(["d"]), n.Path.fromElement = function(d, m, p) {
      var v = n.parseAttributes(d, n.Path.ATTRIBUTE_NAMES);
      v.fromSVG = !0, m(new n.Path(v.d, o(v, p)));
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.array.min, h = n.util.array.max;
    n.Group || (n.Group = n.util.createClass(n.Object, n.Collection, {
      type: "group",
      strokeWidth: 0,
      subTargetCheck: !1,
      cacheProperties: [],
      useSetOnGroup: !1,
      initialize: function(o, u, c) {
        u = u || {}, this._objects = [], c && this.callSuper("initialize", u), this._objects = o || [];
        for (var d = this._objects.length; d--; )
          this._objects[d].group = this;
        if (c)
          this._updateObjectsACoords();
        else {
          var m = u && u.centerPoint;
          u.originX !== void 0 && (this.originX = u.originX), u.originY !== void 0 && (this.originY = u.originY), m || this._calcBounds(), this._updateObjectsCoords(m), delete u.centerPoint, this.callSuper("initialize", u);
        }
        this.setCoords();
      },
      _updateObjectsACoords: function() {
        for (var o = !0, u = this._objects.length; u--; )
          this._objects[u].setCoords(o);
      },
      _updateObjectsCoords: function(u) {
        for (var u = u || this.getCenterPoint(), c = this._objects.length; c--; )
          this._updateObjectCoords(this._objects[c], u);
      },
      _updateObjectCoords: function(o, u) {
        var c = o.left, d = o.top, m = !0;
        o.set({
          left: c - u.x,
          top: d - u.y
        }), o.group = this, o.setCoords(m);
      },
      toString: function() {
        return "#<fabric.Group: (" + this.complexity() + ")>";
      },
      addWithUpdate: function(o) {
        var u = !!this.group;
        return this._restoreObjectsState(), n.util.resetObjectTransform(this), o && (u && n.util.removeTransformFromObject(o, this.group.calcTransformMatrix()), this._objects.push(o), o.group = this, o._set("canvas", this.canvas)), this._calcBounds(), this._updateObjectsCoords(), this.dirty = !0, u ? this.group.addWithUpdate() : this.setCoords(), this;
      },
      removeWithUpdate: function(o) {
        return this._restoreObjectsState(), n.util.resetObjectTransform(this), this.remove(o), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this;
      },
      _onObjectAdded: function(o) {
        this.dirty = !0, o.group = this, o._set("canvas", this.canvas);
      },
      _onObjectRemoved: function(o) {
        this.dirty = !0, delete o.group;
      },
      _set: function(o, u) {
        var c = this._objects.length;
        if (this.useSetOnGroup)
          for (; c--; )
            this._objects[c].setOnGroup(o, u);
        if (o === "canvas")
          for (; c--; )
            this._objects[c]._set(o, u);
        n.Object.prototype._set.call(this, o, u);
      },
      toObject: function(o) {
        var u = this.includeDefaultValues, c = this._objects.filter(function(m) {
          return !m.excludeFromExport;
        }).map(function(m) {
          var p = m.includeDefaultValues;
          m.includeDefaultValues = u;
          var v = m.toObject(o);
          return m.includeDefaultValues = p, v;
        }), d = n.Object.prototype.toObject.call(this, o);
        return d.objects = c, d;
      },
      toDatalessObject: function(o) {
        var u, c = this.sourcePath;
        if (c)
          u = c;
        else {
          var d = this.includeDefaultValues;
          u = this._objects.map(function(p) {
            var v = p.includeDefaultValues;
            p.includeDefaultValues = d;
            var b = p.toDatalessObject(o);
            return p.includeDefaultValues = v, b;
          });
        }
        var m = n.Object.prototype.toDatalessObject.call(this, o);
        return m.objects = u, m;
      },
      render: function(o) {
        this._transformDone = !0, this.callSuper("render", o), this._transformDone = !1;
      },
      shouldCache: function() {
        var o = n.Object.prototype.shouldCache.call(this);
        if (o) {
          for (var u = 0, c = this._objects.length; u < c; u++)
            if (this._objects[u].willDrawShadow())
              return this.ownCaching = !1, !1;
        }
        return o;
      },
      willDrawShadow: function() {
        if (n.Object.prototype.willDrawShadow.call(this))
          return !0;
        for (var o = 0, u = this._objects.length; o < u; o++)
          if (this._objects[o].willDrawShadow())
            return !0;
        return !1;
      },
      isOnACache: function() {
        return this.ownCaching || this.group && this.group.isOnACache();
      },
      drawObject: function(o) {
        for (var u = 0, c = this._objects.length; u < c; u++)
          this._objects[u].render(o);
        this._drawClipPath(o, this.clipPath);
      },
      isCacheDirty: function(o) {
        if (this.callSuper("isCacheDirty", o))
          return !0;
        if (!this.statefullCache)
          return !1;
        for (var u = 0, c = this._objects.length; u < c; u++)
          if (this._objects[u].isCacheDirty(!0)) {
            if (this._cacheCanvas) {
              var d = this.cacheWidth / this.zoomX, m = this.cacheHeight / this.zoomY;
              this._cacheContext.clearRect(-d / 2, -m / 2, d, m);
            }
            return !0;
          }
        return !1;
      },
      _restoreObjectsState: function() {
        var o = this.calcOwnMatrix();
        return this._objects.forEach(function(u) {
          n.util.addTransformToObject(u, o), delete u.group, u.setCoords();
        }), this;
      },
      destroy: function() {
        return this._objects.forEach(function(o) {
          o.set("dirty", !0);
        }), this._restoreObjectsState();
      },
      dispose: function() {
        this.callSuper("dispose"), this.forEachObject(function(o) {
          o.dispose && o.dispose();
        }), this._objects = [];
      },
      toActiveSelection: function() {
        if (!!this.canvas) {
          var o = this._objects, u = this.canvas;
          this._objects = [];
          var c = this.toObject();
          delete c.objects;
          var d = new n.ActiveSelection([]);
          return d.set(c), d.type = "activeSelection", u.remove(this), o.forEach(function(m) {
            m.group = d, m.dirty = !0, u.add(m);
          }), d.canvas = u, d._objects = o, u._activeObject = d, d.setCoords(), d;
        }
      },
      ungroupOnCanvas: function() {
        return this._restoreObjectsState();
      },
      setObjectsCoords: function() {
        var o = !0;
        return this.forEachObject(function(u) {
          u.setCoords(o);
        }), this;
      },
      _calcBounds: function(o) {
        for (var u = [], c = [], d, m, p, v = ["tr", "br", "bl", "tl"], b = 0, y = this._objects.length, w, _ = v.length; b < y; ++b) {
          for (d = this._objects[b], p = d.calcACoords(), w = 0; w < _; w++)
            m = v[w], u.push(p[m].x), c.push(p[m].y);
          d.aCoords = p;
        }
        this._getBounds(u, c, o);
      },
      _getBounds: function(o, u, c) {
        var d = new n.Point(a(o), a(u)), m = new n.Point(h(o), h(u)), p = d.y || 0, v = d.x || 0, b = m.x - d.x || 0, y = m.y - d.y || 0;
        this.width = b, this.height = y, c || this.setPositionByOrigin({ x: v, y: p }, "left", "top");
      },
      _toSVG: function(o) {
        for (var u = ["<g ", "COMMON_PARTS", ` >
`], c = 0, d = this._objects.length; c < d; c++)
          u.push("		", this._objects[c].toSVG(o));
        return u.push(`</g>
`), u;
      },
      getSvgStyles: function() {
        var o = typeof this.opacity < "u" && this.opacity !== 1 ? "opacity: " + this.opacity + ";" : "", u = this.visible ? "" : " visibility: hidden;";
        return [
          o,
          this.getSvgFilter(),
          u
        ].join("");
      },
      toClipPathSVG: function(o) {
        for (var u = [], c = 0, d = this._objects.length; c < d; c++)
          u.push("	", this._objects[c].toClipPathSVG(o));
        return this._createBaseClipPathSVGMarkup(u, { reviver: o });
      }
    }), n.Group.fromObject = function(o, u) {
      var c = o.objects, d = n.util.object.clone(o, !0);
      if (delete d.objects, typeof c == "string") {
        n.loadSVGFromURL(c, function(m) {
          var p = n.util.groupSVGElements(m, o, c), v = d.clipPath;
          delete d.clipPath, p.set(d), v ? n.util.enlivenObjects([v], function(b) {
            p.clipPath = b[0], u && u(p);
          }) : u && u(p);
        });
        return;
      }
      n.util.enlivenObjects(c, function(m) {
        n.util.enlivenObjectEnlivables(o, d, function() {
          u && u(new n.Group(m, d, !0));
        });
      });
    });
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {});
    n.ActiveSelection || (n.ActiveSelection = n.util.createClass(n.Group, {
      type: "activeSelection",
      initialize: function(a, h) {
        h = h || {}, this._objects = a || [];
        for (var o = this._objects.length; o--; )
          this._objects[o].group = this;
        h.originX && (this.originX = h.originX), h.originY && (this.originY = h.originY), this._calcBounds(), this._updateObjectsCoords(), n.Object.prototype.initialize.call(this, h), this.setCoords();
      },
      toGroup: function() {
        var a = this._objects.concat();
        this._objects = [];
        var h = n.Object.prototype.toObject.call(this), o = new n.Group([]);
        if (delete h.type, o.set(h), a.forEach(function(c) {
          c.canvas.remove(c), c.group = o;
        }), o._objects = a, !this.canvas)
          return o;
        var u = this.canvas;
        return u.add(o), u._activeObject = o, o.setCoords(), o;
      },
      onDeselect: function() {
        return this.destroy(), !1;
      },
      toString: function() {
        return "#<fabric.ActiveSelection: (" + this.complexity() + ")>";
      },
      shouldCache: function() {
        return !1;
      },
      isOnACache: function() {
        return !1;
      },
      _renderControls: function(a, h, o) {
        a.save(), a.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, this.callSuper("_renderControls", a, h), o = o || {}, typeof o.hasControls > "u" && (o.hasControls = !1), o.forActiveSelection = !0;
        for (var u = 0, c = this._objects.length; u < c; u++)
          this._objects[u]._renderControls(a, o);
        a.restore();
      }
    }), n.ActiveSelection.fromObject = function(a, h) {
      n.util.enlivenObjects(a.objects, function(o) {
        delete a.objects, h && h(new n.ActiveSelection(o, a, !0));
      });
    });
  }(t), function(l) {
    var n = e.util.object.extend;
    if (l.fabric || (l.fabric = {}), l.fabric.Image) {
      e.warn("fabric.Image is already defined.");
      return;
    }
    e.Image = e.util.createClass(e.Object, {
      type: "image",
      strokeWidth: 0,
      srcFromAttribute: !1,
      _lastScaleX: 1,
      _lastScaleY: 1,
      _filterScalingX: 1,
      _filterScalingY: 1,
      minimumScaleTrigger: 0.5,
      stateProperties: e.Object.prototype.stateProperties.concat("cropX", "cropY"),
      cacheProperties: e.Object.prototype.cacheProperties.concat("cropX", "cropY"),
      cacheKey: "",
      cropX: 0,
      cropY: 0,
      imageSmoothing: !0,
      initialize: function(a, h) {
        h || (h = {}), this.filters = [], this.cacheKey = "texture" + e.Object.__uid++, this.callSuper("initialize", h), this._initElement(a, h);
      },
      getElement: function() {
        return this._element || {};
      },
      setElement: function(a, h) {
        return this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._element = a, this._originalElement = a, this._initConfig(h), this.filters.length !== 0 && this.applyFilters(), this.resizeFilter && this.applyResizeFilters(), this;
      },
      removeTexture: function(a) {
        var h = e.filterBackend;
        h && h.evictCachesForKey && h.evictCachesForKey(a);
      },
      dispose: function() {
        this.callSuper("dispose"), this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._cacheContext = void 0, ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function(a) {
          e.util.cleanUpJsdomNode(this[a]), this[a] = void 0;
        }.bind(this));
      },
      getCrossOrigin: function() {
        return this._originalElement && (this._originalElement.crossOrigin || null);
      },
      getOriginalSize: function() {
        var a = this.getElement();
        return {
          width: a.naturalWidth || a.width,
          height: a.naturalHeight || a.height
        };
      },
      _stroke: function(a) {
        if (!(!this.stroke || this.strokeWidth === 0)) {
          var h = this.width / 2, o = this.height / 2;
          a.beginPath(), a.moveTo(-h, -o), a.lineTo(h, -o), a.lineTo(h, o), a.lineTo(-h, o), a.lineTo(-h, -o), a.closePath();
        }
      },
      toObject: function(a) {
        var h = [];
        this.filters.forEach(function(u) {
          u && h.push(u.toObject());
        });
        var o = n(
          this.callSuper(
            "toObject",
            ["cropX", "cropY"].concat(a)
          ),
          {
            src: this.getSrc(),
            crossOrigin: this.getCrossOrigin(),
            filters: h
          }
        );
        return this.resizeFilter && (o.resizeFilter = this.resizeFilter.toObject()), o;
      },
      hasCrop: function() {
        return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height;
      },
      _toSVG: function() {
        var a = [], h = [], o, u = this._element, c = -this.width / 2, d = -this.height / 2, m = "", p = "";
        if (!u)
          return [];
        if (this.hasCrop()) {
          var v = e.Object.__uid++;
          a.push(
            '<clipPath id="imageCrop_' + v + `">
`,
            '	<rect x="' + c + '" y="' + d + '" width="' + this.width + '" height="' + this.height + `" />
`,
            `</clipPath>
`
          ), m = ' clip-path="url(#imageCrop_' + v + ')" ';
        }
        if (this.imageSmoothing || (p = '" image-rendering="optimizeSpeed'), h.push(
          "	<image ",
          "COMMON_PARTS",
          'xlink:href="',
          this.getSvgSrc(!0),
          '" x="',
          c - this.cropX,
          '" y="',
          d - this.cropY,
          '" width="',
          u.width || u.naturalWidth,
          '" height="',
          u.height || u.height,
          p,
          '"',
          m,
          `></image>
`
        ), this.stroke || this.strokeDashArray) {
          var b = this.fill;
          this.fill = null, o = [
            "	<rect ",
            'x="',
            c,
            '" y="',
            d,
            '" width="',
            this.width,
            '" height="',
            this.height,
            '" style="',
            this.getSvgStyles(),
            `"/>
`
          ], this.fill = b;
        }
        return this.paintFirst !== "fill" ? a = a.concat(o, h) : a = a.concat(h, o), a;
      },
      getSrc: function(a) {
        var h = a ? this._element : this._originalElement;
        return h ? h.toDataURL ? h.toDataURL() : this.srcFromAttribute ? h.getAttribute("src") : h.src : this.src || "";
      },
      setSrc: function(a, h, o) {
        return e.util.loadImage(a, function(u, c) {
          this.setElement(u, o), this._setWidthHeight(), h && h(this, c);
        }, this, o && o.crossOrigin), this;
      },
      toString: function() {
        return '#<fabric.Image: { src: "' + this.getSrc() + '" }>';
      },
      applyResizeFilters: function() {
        var a = this.resizeFilter, h = this.minimumScaleTrigger, o = this.getTotalObjectScaling(), u = o.scaleX, c = o.scaleY, d = this._filteredEl || this._originalElement;
        if (this.group && this.set("dirty", !0), !a || u > h && c > h) {
          this._element = d, this._filterScalingX = 1, this._filterScalingY = 1, this._lastScaleX = u, this._lastScaleY = c;
          return;
        }
        e.filterBackend || (e.filterBackend = e.initFilterBackend());
        var m = e.util.createCanvasElement(), p = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey, v = d.width, b = d.height;
        m.width = v, m.height = b, this._element = m, this._lastScaleX = a.scaleX = u, this._lastScaleY = a.scaleY = c, e.filterBackend.applyFilters(
          [a],
          d,
          v,
          b,
          this._element,
          p
        ), this._filterScalingX = m.width / this._originalElement.width, this._filterScalingY = m.height / this._originalElement.height;
      },
      applyFilters: function(a) {
        if (a = a || this.filters || [], a = a.filter(function(d) {
          return d && !d.isNeutralState();
        }), this.set("dirty", !0), this.removeTexture(this.cacheKey + "_filtered"), a.length === 0)
          return this._element = this._originalElement, this._filteredEl = null, this._filterScalingX = 1, this._filterScalingY = 1, this;
        var h = this._originalElement, o = h.naturalWidth || h.width, u = h.naturalHeight || h.height;
        if (this._element === this._originalElement) {
          var c = e.util.createCanvasElement();
          c.width = o, c.height = u, this._element = c, this._filteredEl = c;
        } else
          this._element = this._filteredEl, this._filteredEl.getContext("2d").clearRect(0, 0, o, u), this._lastScaleX = 1, this._lastScaleY = 1;
        return e.filterBackend || (e.filterBackend = e.initFilterBackend()), e.filterBackend.applyFilters(
          a,
          this._originalElement,
          o,
          u,
          this._element,
          this.cacheKey
        ), (this._originalElement.width !== this._element.width || this._originalElement.height !== this._element.height) && (this._filterScalingX = this._element.width / this._originalElement.width, this._filterScalingY = this._element.height / this._originalElement.height), this;
      },
      _render: function(a) {
        e.util.setImageSmoothing(a, this.imageSmoothing), this.isMoving !== !0 && this.resizeFilter && this._needsResize() && this.applyResizeFilters(), this._stroke(a), this._renderPaintInOrder(a);
      },
      drawCacheOnCanvas: function(a) {
        e.util.setImageSmoothing(a, this.imageSmoothing), e.Object.prototype.drawCacheOnCanvas.call(this, a);
      },
      shouldCache: function() {
        return this.needsItsOwnCache();
      },
      _renderFill: function(a) {
        var h = this._element;
        if (!!h) {
          var o = this._filterScalingX, u = this._filterScalingY, c = this.width, d = this.height, m = Math.min, p = Math.max, v = p(this.cropX, 0), b = p(this.cropY, 0), y = h.naturalWidth || h.width, w = h.naturalHeight || h.height, _ = v * o, S = b * u, C = m(c * o, y - _), k = m(d * u, w - S), R = -c / 2, B = -d / 2, N = m(c, y / o - v), K = m(d, w / u - b);
          h && a.drawImage(h, _, S, C, k, R, B, N, K);
        }
      },
      _needsResize: function() {
        var a = this.getTotalObjectScaling();
        return a.scaleX !== this._lastScaleX || a.scaleY !== this._lastScaleY;
      },
      _resetWidthHeight: function() {
        this.set(this.getOriginalSize());
      },
      _initElement: function(a, h) {
        this.setElement(e.util.getById(a), h), e.util.addClass(this.getElement(), e.Image.CSS_CANVAS);
      },
      _initConfig: function(a) {
        a || (a = {}), this.setOptions(a), this._setWidthHeight(a);
      },
      _initFilters: function(a, h) {
        a && a.length ? e.util.enlivenObjects(a, function(o) {
          h && h(o);
        }, "fabric.Image.filters") : h && h();
      },
      _setWidthHeight: function(a) {
        a || (a = {});
        var h = this.getElement();
        this.width = a.width || h.naturalWidth || h.width || 0, this.height = a.height || h.naturalHeight || h.height || 0;
      },
      parsePreserveAspectRatioAttribute: function() {
        var a = e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""), h = this._element.width, o = this._element.height, u = 1, c = 1, d = 0, m = 0, p = 0, v = 0, b, y = this.width, w = this.height, _ = { width: y, height: w };
        return a && (a.alignX !== "none" || a.alignY !== "none") ? (a.meetOrSlice === "meet" && (u = c = e.util.findScaleToFit(this._element, _), b = (y - h * u) / 2, a.alignX === "Min" && (d = -b), a.alignX === "Max" && (d = b), b = (w - o * c) / 2, a.alignY === "Min" && (m = -b), a.alignY === "Max" && (m = b)), a.meetOrSlice === "slice" && (u = c = e.util.findScaleToCover(this._element, _), b = h - y / u, a.alignX === "Mid" && (p = b / 2), a.alignX === "Max" && (p = b), b = o - w / c, a.alignY === "Mid" && (v = b / 2), a.alignY === "Max" && (v = b), h = y / u, o = w / c)) : (u = y / h, c = w / o), {
          width: h,
          height: o,
          scaleX: u,
          scaleY: c,
          offsetLeft: d,
          offsetTop: m,
          cropX: p,
          cropY: v
        };
      }
    }), e.Image.CSS_CANVAS = "canvas-img", e.Image.prototype.getSvgSrc = e.Image.prototype.getSrc, e.Image.fromObject = function(a, h) {
      var o = e.util.object.clone(a);
      e.util.loadImage(o.src, function(u, c) {
        if (c) {
          h && h(null, !0);
          return;
        }
        e.Image.prototype._initFilters.call(o, o.filters, function(d) {
          o.filters = d || [], e.Image.prototype._initFilters.call(o, [o.resizeFilter], function(m) {
            o.resizeFilter = m[0], e.util.enlivenObjectEnlivables(o, o, function() {
              var p = new e.Image(u, o);
              h(p, !1);
            });
          });
        });
      }, null, o.crossOrigin);
    }, e.Image.fromURL = function(a, h, o) {
      e.util.loadImage(a, function(u, c) {
        h && h(new e.Image(u, o), c);
      }, null, o && o.crossOrigin);
    }, e.Image.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(
      "x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")
    ), e.Image.fromElement = function(a, h, o) {
      var u = e.parseAttributes(a, e.Image.ATTRIBUTE_NAMES);
      e.Image.fromURL(
        u["xlink:href"],
        h,
        n(o ? e.util.object.clone(o) : {}, u)
      );
    };
  }(t), e.util.object.extend(e.Object.prototype, {
    _getAngleValueForStraighten: function() {
      var l = this.angle % 360;
      return l > 0 ? Math.round((l - 1) / 90) * 90 : Math.round(l / 90) * 90;
    },
    straighten: function() {
      return this.rotate(this._getAngleValueForStraighten());
    },
    fxStraighten: function(l) {
      l = l || {};
      var n = function() {
      }, a = l.onComplete || n, h = l.onChange || n, o = this;
      return e.util.animate({
        target: this,
        startValue: this.get("angle"),
        endValue: this._getAngleValueForStraighten(),
        duration: this.FX_DURATION,
        onChange: function(u) {
          o.rotate(u), h();
        },
        onComplete: function() {
          o.setCoords(), a();
        }
      });
    }
  }), e.util.object.extend(e.StaticCanvas.prototype, {
    straightenObject: function(l) {
      return l.straighten(), this.requestRenderAll(), this;
    },
    fxStraightenObject: function(l) {
      return l.fxStraighten({
        onChange: this.requestRenderAllBound
      });
    }
  }), function() {
    function l(a, h) {
      var o = "precision " + h + ` float;
void main(){}`, u = a.createShader(a.FRAGMENT_SHADER);
      return a.shaderSource(u, o), a.compileShader(u), !!a.getShaderParameter(u, a.COMPILE_STATUS);
    }
    e.isWebglSupported = function(a) {
      if (e.isLikelyNode)
        return !1;
      a = a || e.WebglFilterBackend.prototype.tileSize;
      var h = document.createElement("canvas"), o = h.getContext("webgl") || h.getContext("experimental-webgl"), u = !1;
      if (o) {
        e.maxTextureSize = o.getParameter(o.MAX_TEXTURE_SIZE), u = e.maxTextureSize >= a;
        for (var c = ["highp", "mediump", "lowp"], d = 0; d < 3; d++)
          if (l(o, c[d])) {
            e.webGlPrecision = c[d];
            break;
          }
      }
      return this.isSupported = u, u;
    }, e.WebglFilterBackend = n;
    function n(a) {
      a && a.tileSize && (this.tileSize = a.tileSize), this.setupGLContext(this.tileSize, this.tileSize), this.captureGPUInfo();
    }
    n.prototype = {
      tileSize: 2048,
      resources: {},
      setupGLContext: function(a, h) {
        this.dispose(), this.createWebGLCanvas(a, h), this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), this.chooseFastestCopyGLTo2DMethod(a, h);
      },
      chooseFastestCopyGLTo2DMethod: function(a, h) {
        var o = typeof window.performance < "u", u;
        try {
          new ImageData(1, 1), u = !0;
        } catch {
          u = !1;
        }
        var c = typeof ArrayBuffer < "u", d = typeof Uint8ClampedArray < "u";
        if (!!(o && u && c && d)) {
          var m = e.util.createCanvasElement(), p = new ArrayBuffer(a * h * 4);
          if (e.forceGLPutImageData) {
            this.imageBuffer = p, this.copyGLTo2D = g;
            return;
          }
          var v = {
            imageBuffer: p,
            destinationWidth: a,
            destinationHeight: h,
            targetCanvas: m
          }, b, y, w;
          m.width = a, m.height = h, b = window.performance.now(), f.call(v, this.gl, v), y = window.performance.now() - b, b = window.performance.now(), g.call(v, this.gl, v), w = window.performance.now() - b, y > w ? (this.imageBuffer = p, this.copyGLTo2D = g) : this.copyGLTo2D = f;
        }
      },
      createWebGLCanvas: function(a, h) {
        var o = e.util.createCanvasElement();
        o.width = a, o.height = h;
        var u = {
          alpha: !0,
          premultipliedAlpha: !1,
          depth: !1,
          stencil: !1,
          antialias: !1
        }, c = o.getContext("webgl", u);
        c || (c = o.getContext("experimental-webgl", u)), c && (c.clearColor(0, 0, 0, 0), this.canvas = o, this.gl = c);
      },
      applyFilters: function(a, h, o, u, c, d) {
        var m = this.gl, p;
        d && (p = this.getCachedTexture(d, h));
        var v = {
          originalWidth: h.width || h.originalWidth,
          originalHeight: h.height || h.originalHeight,
          sourceWidth: o,
          sourceHeight: u,
          destinationWidth: o,
          destinationHeight: u,
          context: m,
          sourceTexture: this.createTexture(m, o, u, !p && h),
          targetTexture: this.createTexture(m, o, u),
          originalTexture: p || this.createTexture(m, o, u, !p && h),
          passes: a.length,
          webgl: !0,
          aPosition: this.aPosition,
          programCache: this.programCache,
          pass: 0,
          filterBackend: this,
          targetCanvas: c
        }, b = m.createFramebuffer();
        return m.bindFramebuffer(m.FRAMEBUFFER, b), a.forEach(function(y) {
          y && y.applyTo(v);
        }), s(v), this.copyGLTo2D(m, v), m.bindTexture(m.TEXTURE_2D, null), m.deleteTexture(v.sourceTexture), m.deleteTexture(v.targetTexture), m.deleteFramebuffer(b), c.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), v;
      },
      dispose: function() {
        this.canvas && (this.canvas = null, this.gl = null), this.clearWebGLCaches();
      },
      clearWebGLCaches: function() {
        this.programCache = {}, this.textureCache = {};
      },
      createTexture: function(a, h, o, u, c) {
        var d = a.createTexture();
        return a.bindTexture(a.TEXTURE_2D, d), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, c || a.NEAREST), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, c || a.NEAREST), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE), u ? a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, u) : a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, h, o, 0, a.RGBA, a.UNSIGNED_BYTE, null), d;
      },
      getCachedTexture: function(a, h) {
        if (this.textureCache[a])
          return this.textureCache[a];
        var o = this.createTexture(
          this.gl,
          h.width,
          h.height,
          h
        );
        return this.textureCache[a] = o, o;
      },
      evictCachesForKey: function(a) {
        this.textureCache[a] && (this.gl.deleteTexture(this.textureCache[a]), delete this.textureCache[a]);
      },
      copyGLTo2D: f,
      captureGPUInfo: function() {
        if (this.gpuInfo)
          return this.gpuInfo;
        var a = this.gl, h = { renderer: "", vendor: "" };
        if (!a)
          return h;
        var o = a.getExtension("WEBGL_debug_renderer_info");
        if (o) {
          var u = a.getParameter(o.UNMASKED_RENDERER_WEBGL), c = a.getParameter(o.UNMASKED_VENDOR_WEBGL);
          u && (h.renderer = u.toLowerCase()), c && (h.vendor = c.toLowerCase());
        }
        return this.gpuInfo = h, h;
      }
    };
  }();
  function s(l) {
    var n = l.targetCanvas, a = n.width, h = n.height, o = l.destinationWidth, u = l.destinationHeight;
    (a !== o || h !== u) && (n.width = o, n.height = u);
  }
  function f(l, n) {
    var a = l.canvas, h = n.targetCanvas, o = h.getContext("2d");
    o.translate(0, h.height), o.scale(1, -1);
    var u = a.height - h.height;
    o.drawImage(
      a,
      0,
      u,
      h.width,
      h.height,
      0,
      0,
      h.width,
      h.height
    );
  }
  function g(l, n) {
    var a = n.targetCanvas, h = a.getContext("2d"), o = n.destinationWidth, u = n.destinationHeight, c = o * u * 4, d = new Uint8Array(this.imageBuffer, 0, c), m = new Uint8ClampedArray(this.imageBuffer, 0, c);
    l.readPixels(0, 0, o, u, l.RGBA, l.UNSIGNED_BYTE, d);
    var p = new ImageData(m, o, u);
    h.putImageData(p, 0, 0);
  }
  (function() {
    var l = function() {
    };
    e.Canvas2dFilterBackend = n;
    function n() {
    }
    n.prototype = {
      evictCachesForKey: l,
      dispose: l,
      clearWebGLCaches: l,
      resources: {},
      applyFilters: function(a, h, o, u, c) {
        var d = c.getContext("2d");
        d.drawImage(h, 0, 0, o, u);
        var m = d.getImageData(0, 0, o, u), p = d.getImageData(0, 0, o, u), v = {
          sourceWidth: o,
          sourceHeight: u,
          imageData: m,
          originalEl: h,
          originalImageData: p,
          canvasEl: c,
          ctx: d,
          filterBackend: this
        };
        return a.forEach(function(b) {
          b.applyTo(v);
        }), (v.imageData.width !== o || v.imageData.height !== u) && (c.width = v.imageData.width, c.height = v.imageData.height), d.putImageData(v.imageData, 0, 0), v;
      }
    };
  })(), e.Image = e.Image || {}, e.Image.filters = e.Image.filters || {}, e.Image.filters.BaseFilter = e.util.createClass({
    type: "BaseFilter",
    vertexSource: `attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,
    fragmentSource: `precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,
    initialize: function(l) {
      l && this.setOptions(l);
    },
    setOptions: function(l) {
      for (var n in l)
        this[n] = l[n];
    },
    createProgram: function(l, n, a) {
      n = n || this.fragmentSource, a = a || this.vertexSource, e.webGlPrecision !== "highp" && (n = n.replace(
        /precision highp float/g,
        "precision " + e.webGlPrecision + " float"
      ));
      var h = l.createShader(l.VERTEX_SHADER);
      if (l.shaderSource(h, a), l.compileShader(h), !l.getShaderParameter(h, l.COMPILE_STATUS))
        throw new Error(
          "Vertex shader compile error for " + this.type + ": " + l.getShaderInfoLog(h)
        );
      var o = l.createShader(l.FRAGMENT_SHADER);
      if (l.shaderSource(o, n), l.compileShader(o), !l.getShaderParameter(o, l.COMPILE_STATUS))
        throw new Error(
          "Fragment shader compile error for " + this.type + ": " + l.getShaderInfoLog(o)
        );
      var u = l.createProgram();
      if (l.attachShader(u, h), l.attachShader(u, o), l.linkProgram(u), !l.getProgramParameter(u, l.LINK_STATUS))
        throw new Error(
          'Shader link error for "${this.type}" ' + l.getProgramInfoLog(u)
        );
      var c = this.getAttributeLocations(l, u), d = this.getUniformLocations(l, u) || {};
      return d.uStepW = l.getUniformLocation(u, "uStepW"), d.uStepH = l.getUniformLocation(u, "uStepH"), {
        program: u,
        attributeLocations: c,
        uniformLocations: d
      };
    },
    getAttributeLocations: function(l, n) {
      return {
        aPosition: l.getAttribLocation(n, "aPosition")
      };
    },
    getUniformLocations: function() {
      return {};
    },
    sendAttributeData: function(l, n, a) {
      var h = n.aPosition, o = l.createBuffer();
      l.bindBuffer(l.ARRAY_BUFFER, o), l.enableVertexAttribArray(h), l.vertexAttribPointer(h, 2, l.FLOAT, !1, 0, 0), l.bufferData(l.ARRAY_BUFFER, a, l.STATIC_DRAW);
    },
    _setupFrameBuffer: function(l) {
      var n = l.context, a, h;
      l.passes > 1 ? (a = l.destinationWidth, h = l.destinationHeight, (l.sourceWidth !== a || l.sourceHeight !== h) && (n.deleteTexture(l.targetTexture), l.targetTexture = l.filterBackend.createTexture(n, a, h)), n.framebufferTexture2D(
        n.FRAMEBUFFER,
        n.COLOR_ATTACHMENT0,
        n.TEXTURE_2D,
        l.targetTexture,
        0
      )) : (n.bindFramebuffer(n.FRAMEBUFFER, null), n.finish());
    },
    _swapTextures: function(l) {
      l.passes--, l.pass++;
      var n = l.targetTexture;
      l.targetTexture = l.sourceTexture, l.sourceTexture = n;
    },
    isNeutralState: function() {
      var l = this.mainParameter, n = e.Image.filters[this.type].prototype;
      if (l)
        if (Array.isArray(n[l])) {
          for (var a = n[l].length; a--; )
            if (this[l][a] !== n[l][a])
              return !1;
          return !0;
        } else
          return n[l] === this[l];
      else
        return !1;
    },
    applyTo: function(l) {
      l.webgl ? (this._setupFrameBuffer(l), this.applyToWebGL(l), this._swapTextures(l)) : this.applyTo2d(l);
    },
    retrieveShader: function(l) {
      return l.programCache.hasOwnProperty(this.type) || (l.programCache[this.type] = this.createProgram(l.context)), l.programCache[this.type];
    },
    applyToWebGL: function(l) {
      var n = l.context, a = this.retrieveShader(l);
      l.pass === 0 && l.originalTexture ? n.bindTexture(n.TEXTURE_2D, l.originalTexture) : n.bindTexture(n.TEXTURE_2D, l.sourceTexture), n.useProgram(a.program), this.sendAttributeData(n, a.attributeLocations, l.aPosition), n.uniform1f(a.uniformLocations.uStepW, 1 / l.sourceWidth), n.uniform1f(a.uniformLocations.uStepH, 1 / l.sourceHeight), this.sendUniformData(n, a.uniformLocations), n.viewport(0, 0, l.destinationWidth, l.destinationHeight), n.drawArrays(n.TRIANGLE_STRIP, 0, 4);
    },
    bindAdditionalTexture: function(l, n, a) {
      l.activeTexture(a), l.bindTexture(l.TEXTURE_2D, n), l.activeTexture(l.TEXTURE0);
    },
    unbindAdditionalTexture: function(l, n) {
      l.activeTexture(n), l.bindTexture(l.TEXTURE_2D, null), l.activeTexture(l.TEXTURE0);
    },
    getMainParameter: function() {
      return this[this.mainParameter];
    },
    setMainParameter: function(l) {
      this[this.mainParameter] = l;
    },
    sendUniformData: function() {
    },
    createHelpLayer: function(l) {
      if (!l.helpLayer) {
        var n = document.createElement("canvas");
        n.width = l.sourceWidth, n.height = l.sourceHeight, l.helpLayer = n;
      }
    },
    toObject: function() {
      var l = { type: this.type }, n = this.mainParameter;
      return n && (l[n] = this[n]), l;
    },
    toJSON: function() {
      return this.toObject();
    }
  }), e.Image.filters.BaseFilter.fromObject = function(l, n) {
    var a = new e.Image.filters[l.type](l);
    return n && n(a), a;
  }, function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.ColorMatrix = h(a.BaseFilter, {
      type: "ColorMatrix",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,
      matrix: [
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ],
      mainParameter: "matrix",
      colorsOnly: !0,
      initialize: function(o) {
        this.callSuper("initialize", o), this.matrix = this.matrix.slice(0);
      },
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d = c.length, m = this.matrix, p, v, b, y, w, _ = this.colorsOnly;
        for (w = 0; w < d; w += 4)
          p = c[w], v = c[w + 1], b = c[w + 2], _ ? (c[w] = p * m[0] + v * m[1] + b * m[2] + m[4] * 255, c[w + 1] = p * m[5] + v * m[6] + b * m[7] + m[9] * 255, c[w + 2] = p * m[10] + v * m[11] + b * m[12] + m[14] * 255) : (y = c[w + 3], c[w] = p * m[0] + v * m[1] + b * m[2] + y * m[3] + m[4] * 255, c[w + 1] = p * m[5] + v * m[6] + b * m[7] + y * m[8] + m[9] * 255, c[w + 2] = p * m[10] + v * m[11] + b * m[12] + y * m[13] + m[14] * 255, c[w + 3] = p * m[15] + v * m[16] + b * m[17] + y * m[18] + m[19] * 255);
      },
      getUniformLocations: function(o, u) {
        return {
          uColorMatrix: o.getUniformLocation(u, "uColorMatrix"),
          uConstants: o.getUniformLocation(u, "uConstants")
        };
      },
      sendUniformData: function(o, u) {
        var c = this.matrix, d = [
          c[0],
          c[1],
          c[2],
          c[3],
          c[5],
          c[6],
          c[7],
          c[8],
          c[10],
          c[11],
          c[12],
          c[13],
          c[15],
          c[16],
          c[17],
          c[18]
        ], m = [c[4], c[9], c[14], c[19]];
        o.uniformMatrix4fv(u.uColorMatrix, !1, d), o.uniform4fv(u.uConstants, m);
      }
    }), n.Image.filters.ColorMatrix.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Brightness = h(a.BaseFilter, {
      type: "Brightness",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,
      brightness: 0,
      mainParameter: "brightness",
      applyTo2d: function(o) {
        if (this.brightness !== 0) {
          var u = o.imageData, c = u.data, d, m = c.length, p = Math.round(this.brightness * 255);
          for (d = 0; d < m; d += 4)
            c[d] = c[d] + p, c[d + 1] = c[d + 1] + p, c[d + 2] = c[d + 2] + p;
        }
      },
      getUniformLocations: function(o, u) {
        return {
          uBrightness: o.getUniformLocation(u, "uBrightness")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1f(u.uBrightness, this.brightness);
      }
    }), n.Image.filters.Brightness.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.Image.filters, o = n.util.createClass;
    h.Convolute = o(h.BaseFilter, {
      type: "Convolute",
      opaque: !1,
      matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
      fragmentSource: {
        Convolute_3_1: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,
        Convolute_3_0: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,
        Convolute_5_1: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,
        Convolute_5_0: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,
        Convolute_7_1: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,
        Convolute_7_0: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,
        Convolute_9_1: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,
        Convolute_9_0: `precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`
      },
      retrieveShader: function(u) {
        var c = Math.sqrt(this.matrix.length), d = this.type + "_" + c + "_" + (this.opaque ? 1 : 0), m = this.fragmentSource[d];
        return u.programCache.hasOwnProperty(d) || (u.programCache[d] = this.createProgram(u.context, m)), u.programCache[d];
      },
      applyTo2d: function(u) {
        var c = u.imageData, d = c.data, m = this.matrix, p = Math.round(Math.sqrt(m.length)), v = Math.floor(p / 2), b = c.width, y = c.height, w = u.ctx.createImageData(b, y), _ = w.data, S = this.opaque ? 1 : 0, C, k, R, B, N, K, ee, G, W, re, ce, le, T;
        for (ce = 0; ce < y; ce++)
          for (re = 0; re < b; re++) {
            for (N = (ce * b + re) * 4, C = 0, k = 0, R = 0, B = 0, T = 0; T < p; T++)
              for (le = 0; le < p; le++)
                ee = ce + T - v, K = re + le - v, !(ee < 0 || ee >= y || K < 0 || K >= b) && (G = (ee * b + K) * 4, W = m[T * p + le], C += d[G] * W, k += d[G + 1] * W, R += d[G + 2] * W, S || (B += d[G + 3] * W));
            _[N] = C, _[N + 1] = k, _[N + 2] = R, S ? _[N + 3] = d[N + 3] : _[N + 3] = B;
          }
        u.imageData = w;
      },
      getUniformLocations: function(u, c) {
        return {
          uMatrix: u.getUniformLocation(c, "uMatrix"),
          uOpaque: u.getUniformLocation(c, "uOpaque"),
          uHalfSize: u.getUniformLocation(c, "uHalfSize"),
          uSize: u.getUniformLocation(c, "uSize")
        };
      },
      sendUniformData: function(u, c) {
        u.uniform1fv(c.uMatrix, this.matrix);
      },
      toObject: function() {
        return a(this.callSuper("toObject"), {
          opaque: this.opaque,
          matrix: this.matrix
        });
      }
    }), n.Image.filters.Convolute.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Grayscale = h(a.BaseFilter, {
      type: "Grayscale",
      fragmentSource: {
        average: `precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,
        lightness: `precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,
        luminosity: `precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`
      },
      mode: "average",
      mainParameter: "mode",
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d, m = c.length, p, v = this.mode;
        for (d = 0; d < m; d += 4)
          v === "average" ? p = (c[d] + c[d + 1] + c[d + 2]) / 3 : v === "lightness" ? p = (Math.min(c[d], c[d + 1], c[d + 2]) + Math.max(c[d], c[d + 1], c[d + 2])) / 2 : v === "luminosity" && (p = 0.21 * c[d] + 0.72 * c[d + 1] + 0.07 * c[d + 2]), c[d] = p, c[d + 1] = p, c[d + 2] = p;
      },
      retrieveShader: function(o) {
        var u = this.type + "_" + this.mode;
        if (!o.programCache.hasOwnProperty(u)) {
          var c = this.fragmentSource[this.mode];
          o.programCache[u] = this.createProgram(o.context, c);
        }
        return o.programCache[u];
      },
      getUniformLocations: function(o, u) {
        return {
          uMode: o.getUniformLocation(u, "uMode")
        };
      },
      sendUniformData: function(o, u) {
        var c = 1;
        o.uniform1i(u.uMode, c);
      },
      isNeutralState: function() {
        return !1;
      }
    }), n.Image.filters.Grayscale.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Invert = h(a.BaseFilter, {
      type: "Invert",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,
      invert: !0,
      mainParameter: "invert",
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d, m = c.length;
        for (d = 0; d < m; d += 4)
          c[d] = 255 - c[d], c[d + 1] = 255 - c[d + 1], c[d + 2] = 255 - c[d + 2];
      },
      isNeutralState: function() {
        return !this.invert;
      },
      getUniformLocations: function(o, u) {
        return {
          uInvert: o.getUniformLocation(u, "uInvert")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1i(u.uInvert, this.invert);
      }
    }), n.Image.filters.Invert.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.Image.filters, o = n.util.createClass;
    h.Noise = o(h.BaseFilter, {
      type: "Noise",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,
      mainParameter: "noise",
      noise: 0,
      applyTo2d: function(u) {
        if (this.noise !== 0) {
          var c = u.imageData, d = c.data, m, p = d.length, v = this.noise, b;
          for (m = 0, p = d.length; m < p; m += 4)
            b = (0.5 - Math.random()) * v, d[m] += b, d[m + 1] += b, d[m + 2] += b;
        }
      },
      getUniformLocations: function(u, c) {
        return {
          uNoise: u.getUniformLocation(c, "uNoise"),
          uSeed: u.getUniformLocation(c, "uSeed")
        };
      },
      sendUniformData: function(u, c) {
        u.uniform1f(c.uNoise, this.noise / 255), u.uniform1f(c.uSeed, Math.random());
      },
      toObject: function() {
        return a(this.callSuper("toObject"), {
          noise: this.noise
        });
      }
    }), n.Image.filters.Noise.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Pixelate = h(a.BaseFilter, {
      type: "Pixelate",
      blocksize: 4,
      mainParameter: "blocksize",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d = u.height, m = u.width, p, v, b, y, w, _, S, C, k, R, B;
        for (v = 0; v < d; v += this.blocksize)
          for (b = 0; b < m; b += this.blocksize)
            for (p = v * 4 * m + b * 4, y = c[p], w = c[p + 1], _ = c[p + 2], S = c[p + 3], R = Math.min(v + this.blocksize, d), B = Math.min(b + this.blocksize, m), C = v; C < R; C++)
              for (k = b; k < B; k++)
                p = C * 4 * m + k * 4, c[p] = y, c[p + 1] = w, c[p + 2] = _, c[p + 3] = S;
      },
      isNeutralState: function() {
        return this.blocksize === 1;
      },
      getUniformLocations: function(o, u) {
        return {
          uBlocksize: o.getUniformLocation(u, "uBlocksize"),
          uStepW: o.getUniformLocation(u, "uStepW"),
          uStepH: o.getUniformLocation(u, "uStepH")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1f(u.uBlocksize, this.blocksize);
      }
    }), n.Image.filters.Pixelate.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.extend, h = n.Image.filters, o = n.util.createClass;
    h.RemoveColor = o(h.BaseFilter, {
      type: "RemoveColor",
      color: "#FFFFFF",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,
      distance: 0.02,
      useAlpha: !1,
      applyTo2d: function(u) {
        var c = u.imageData, d = c.data, m, p = this.distance * 255, v, b, y, w = new n.Color(this.color).getSource(), _ = [
          w[0] - p,
          w[1] - p,
          w[2] - p
        ], S = [
          w[0] + p,
          w[1] + p,
          w[2] + p
        ];
        for (m = 0; m < d.length; m += 4)
          v = d[m], b = d[m + 1], y = d[m + 2], v > _[0] && b > _[1] && y > _[2] && v < S[0] && b < S[1] && y < S[2] && (d[m + 3] = 0);
      },
      getUniformLocations: function(u, c) {
        return {
          uLow: u.getUniformLocation(c, "uLow"),
          uHigh: u.getUniformLocation(c, "uHigh")
        };
      },
      sendUniformData: function(u, c) {
        var d = new n.Color(this.color).getSource(), m = parseFloat(this.distance), p = [
          0 + d[0] / 255 - m,
          0 + d[1] / 255 - m,
          0 + d[2] / 255 - m,
          1
        ], v = [
          d[0] / 255 + m,
          d[1] / 255 + m,
          d[2] / 255 + m,
          1
        ];
        u.uniform4fv(c.uLow, p), u.uniform4fv(c.uHigh, v);
      },
      toObject: function() {
        return a(this.callSuper("toObject"), {
          color: this.color,
          distance: this.distance
        });
      }
    }), n.Image.filters.RemoveColor.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass, o = {
      Brownie: [
        0.5997,
        0.34553,
        -0.27082,
        0,
        0.186,
        -0.0377,
        0.86095,
        0.15059,
        0,
        -0.1449,
        0.24113,
        -0.07441,
        0.44972,
        0,
        -0.02965,
        0,
        0,
        0,
        1,
        0
      ],
      Vintage: [
        0.62793,
        0.32021,
        -0.03965,
        0,
        0.03784,
        0.02578,
        0.64411,
        0.03259,
        0,
        0.02926,
        0.0466,
        -0.08512,
        0.52416,
        0,
        0.02023,
        0,
        0,
        0,
        1,
        0
      ],
      Kodachrome: [
        1.12855,
        -0.39673,
        -0.03992,
        0,
        0.24991,
        -0.16404,
        1.08352,
        -0.05498,
        0,
        0.09698,
        -0.16786,
        -0.56034,
        1.60148,
        0,
        0.13972,
        0,
        0,
        0,
        1,
        0
      ],
      Technicolor: [
        1.91252,
        -0.85453,
        -0.09155,
        0,
        0.04624,
        -0.30878,
        1.76589,
        -0.10601,
        0,
        -0.27589,
        -0.2311,
        -0.75018,
        1.84759,
        0,
        0.12137,
        0,
        0,
        0,
        1,
        0
      ],
      Polaroid: [
        1.438,
        -0.062,
        -0.062,
        0,
        0,
        -0.122,
        1.378,
        -0.122,
        0,
        0,
        -0.016,
        -0.016,
        1.483,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ],
      Sepia: [
        0.393,
        0.769,
        0.189,
        0,
        0,
        0.349,
        0.686,
        0.168,
        0,
        0,
        0.272,
        0.534,
        0.131,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ],
      BlackWhite: [
        1.5,
        1.5,
        1.5,
        0,
        -1,
        1.5,
        1.5,
        1.5,
        0,
        -1,
        1.5,
        1.5,
        1.5,
        0,
        -1,
        0,
        0,
        0,
        1,
        0
      ]
    };
    for (var u in o)
      a[u] = h(a.ColorMatrix, {
        type: u,
        matrix: o[u],
        mainParameter: !1,
        colorsOnly: !0
      }), n.Image.filters[u].fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric, a = n.Image.filters, h = n.util.createClass;
    a.BlendColor = h(a.BaseFilter, {
      type: "BlendColor",
      color: "#F95C63",
      mode: "multiply",
      alpha: 1,
      fragmentSource: {
        multiply: `gl_FragColor.rgb *= uColor.rgb;
`,
        screen: `gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,
        add: `gl_FragColor.rgb += uColor.rgb;
`,
        diff: `gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,
        subtract: `gl_FragColor.rgb -= uColor.rgb;
`,
        lighten: `gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,
        darken: `gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,
        exclusion: `gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,
        overlay: `if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,
        tint: `gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`
      },
      buildSource: function(o) {
        return `precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
` + this.fragmentSource[o] + `}
}`;
      },
      retrieveShader: function(o) {
        var u = this.type + "_" + this.mode, c;
        return o.programCache.hasOwnProperty(u) || (c = this.buildSource(this.mode), o.programCache[u] = this.createProgram(o.context, c)), o.programCache[u];
      },
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d = c.length, m, p, v, b, y, w, _, S = 1 - this.alpha;
        _ = new n.Color(this.color).getSource(), m = _[0] * this.alpha, p = _[1] * this.alpha, v = _[2] * this.alpha;
        for (var C = 0; C < d; C += 4)
          switch (b = c[C], y = c[C + 1], w = c[C + 2], this.mode) {
            case "multiply":
              c[C] = b * m / 255, c[C + 1] = y * p / 255, c[C + 2] = w * v / 255;
              break;
            case "screen":
              c[C] = 255 - (255 - b) * (255 - m) / 255, c[C + 1] = 255 - (255 - y) * (255 - p) / 255, c[C + 2] = 255 - (255 - w) * (255 - v) / 255;
              break;
            case "add":
              c[C] = b + m, c[C + 1] = y + p, c[C + 2] = w + v;
              break;
            case "diff":
            case "difference":
              c[C] = Math.abs(b - m), c[C + 1] = Math.abs(y - p), c[C + 2] = Math.abs(w - v);
              break;
            case "subtract":
              c[C] = b - m, c[C + 1] = y - p, c[C + 2] = w - v;
              break;
            case "darken":
              c[C] = Math.min(b, m), c[C + 1] = Math.min(y, p), c[C + 2] = Math.min(w, v);
              break;
            case "lighten":
              c[C] = Math.max(b, m), c[C + 1] = Math.max(y, p), c[C + 2] = Math.max(w, v);
              break;
            case "overlay":
              c[C] = m < 128 ? 2 * b * m / 255 : 255 - 2 * (255 - b) * (255 - m) / 255, c[C + 1] = p < 128 ? 2 * y * p / 255 : 255 - 2 * (255 - y) * (255 - p) / 255, c[C + 2] = v < 128 ? 2 * w * v / 255 : 255 - 2 * (255 - w) * (255 - v) / 255;
              break;
            case "exclusion":
              c[C] = m + b - 2 * m * b / 255, c[C + 1] = p + y - 2 * p * y / 255, c[C + 2] = v + w - 2 * v * w / 255;
              break;
            case "tint":
              c[C] = m + b * S, c[C + 1] = p + y * S, c[C + 2] = v + w * S;
          }
      },
      getUniformLocations: function(o, u) {
        return {
          uColor: o.getUniformLocation(u, "uColor")
        };
      },
      sendUniformData: function(o, u) {
        var c = new n.Color(this.color).getSource();
        c[0] = this.alpha * c[0] / 255, c[1] = this.alpha * c[1] / 255, c[2] = this.alpha * c[2] / 255, c[3] = this.alpha, o.uniform4fv(u.uColor, c);
      },
      toObject: function() {
        return {
          type: this.type,
          color: this.color,
          mode: this.mode,
          alpha: this.alpha
        };
      }
    }), n.Image.filters.BlendColor.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric, a = n.Image.filters, h = n.util.createClass;
    a.BlendImage = h(a.BaseFilter, {
      type: "BlendImage",
      image: null,
      mode: "multiply",
      alpha: 1,
      vertexSource: `attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,
      fragmentSource: {
        multiply: `precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,
        mask: `precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`
      },
      retrieveShader: function(o) {
        var u = this.type + "_" + this.mode, c = this.fragmentSource[this.mode];
        return o.programCache.hasOwnProperty(u) || (o.programCache[u] = this.createProgram(o.context, c)), o.programCache[u];
      },
      applyToWebGL: function(o) {
        var u = o.context, c = this.createTexture(o.filterBackend, this.image);
        this.bindAdditionalTexture(u, c, u.TEXTURE1), this.callSuper("applyToWebGL", o), this.unbindAdditionalTexture(u, u.TEXTURE1);
      },
      createTexture: function(o, u) {
        return o.getCachedTexture(u.cacheKey, u._element);
      },
      calculateMatrix: function() {
        var o = this.image, u = o._element.width, c = o._element.height;
        return [
          1 / o.scaleX,
          0,
          0,
          0,
          1 / o.scaleY,
          0,
          -o.left / u,
          -o.top / c,
          1
        ];
      },
      applyTo2d: function(o) {
        var u = o.imageData, c = o.filterBackend.resources, d = u.data, m = d.length, p = u.width, v = u.height, b, y, w, _, S, C, k, R, B, N, K = this.image, ee;
        c.blendImage || (c.blendImage = n.util.createCanvasElement()), B = c.blendImage, N = B.getContext("2d"), B.width !== p || B.height !== v ? (B.width = p, B.height = v) : N.clearRect(0, 0, p, v), N.setTransform(K.scaleX, 0, 0, K.scaleY, K.left, K.top), N.drawImage(K._element, 0, 0, p, v), ee = N.getImageData(0, 0, p, v).data;
        for (var G = 0; G < m; G += 4)
          switch (S = d[G], C = d[G + 1], k = d[G + 2], R = d[G + 3], b = ee[G], y = ee[G + 1], w = ee[G + 2], _ = ee[G + 3], this.mode) {
            case "multiply":
              d[G] = S * b / 255, d[G + 1] = C * y / 255, d[G + 2] = k * w / 255, d[G + 3] = R * _ / 255;
              break;
            case "mask":
              d[G + 3] = _;
              break;
          }
      },
      getUniformLocations: function(o, u) {
        return {
          uTransformMatrix: o.getUniformLocation(u, "uTransformMatrix"),
          uImage: o.getUniformLocation(u, "uImage")
        };
      },
      sendUniformData: function(o, u) {
        var c = this.calculateMatrix();
        o.uniform1i(u.uImage, 1), o.uniformMatrix3fv(u.uTransformMatrix, !1, c);
      },
      toObject: function() {
        return {
          type: this.type,
          image: this.image && this.image.toObject(),
          mode: this.mode,
          alpha: this.alpha
        };
      }
    }), n.Image.filters.BlendImage.fromObject = function(o, u) {
      n.Image.fromObject(o.image, function(c) {
        var d = n.util.object.clone(o);
        d.image = c, u(new n.Image.filters.BlendImage(d));
      });
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = Math.pow, h = Math.floor, o = Math.sqrt, u = Math.abs, c = Math.round, d = Math.sin, m = Math.ceil, p = n.Image.filters, v = n.util.createClass;
    p.Resize = v(p.BaseFilter, {
      type: "Resize",
      resizeType: "hermite",
      scaleX: 1,
      scaleY: 1,
      lanczosLobes: 3,
      getUniformLocations: function(b, y) {
        return {
          uDelta: b.getUniformLocation(y, "uDelta"),
          uTaps: b.getUniformLocation(y, "uTaps")
        };
      },
      sendUniformData: function(b, y) {
        b.uniform2fv(y.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]), b.uniform1fv(y.uTaps, this.taps);
      },
      retrieveShader: function(b) {
        var y = this.getFilterWindow(), w = this.type + "_" + y;
        if (!b.programCache.hasOwnProperty(w)) {
          var _ = this.generateShader(y);
          b.programCache[w] = this.createProgram(b.context, _);
        }
        return b.programCache[w];
      },
      getFilterWindow: function() {
        var b = this.tempScale;
        return Math.ceil(this.lanczosLobes / b);
      },
      getTaps: function() {
        for (var b = this.lanczosCreate(this.lanczosLobes), y = this.tempScale, w = this.getFilterWindow(), _ = new Array(w), S = 1; S <= w; S++)
          _[S - 1] = b(S * y);
        return _;
      },
      generateShader: function(_) {
        for (var y = new Array(_), w = this.fragmentSourceTOP, _, S = 1; S <= _; S++)
          y[S - 1] = S + ".0 * uDelta";
        return w += "uniform float uTaps[" + _ + `];
`, w += `void main() {
`, w += `  vec4 color = texture2D(uTexture, vTexCoord);
`, w += `  float sum = 1.0;
`, y.forEach(function(C, k) {
          w += "  color += texture2D(uTexture, vTexCoord + " + C + ") * uTaps[" + k + `];
`, w += "  color += texture2D(uTexture, vTexCoord - " + C + ") * uTaps[" + k + `];
`, w += "  sum += 2.0 * uTaps[" + k + `];
`;
        }), w += `  gl_FragColor = color / sum;
`, w += "}", w;
      },
      fragmentSourceTOP: `precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,
      applyTo: function(b) {
        b.webgl ? (b.passes++, this.width = b.sourceWidth, this.horizontal = !0, this.dW = Math.round(this.width * this.scaleX), this.dH = b.sourceHeight, this.tempScale = this.dW / this.width, this.taps = this.getTaps(), b.destinationWidth = this.dW, this._setupFrameBuffer(b), this.applyToWebGL(b), this._swapTextures(b), b.sourceWidth = b.destinationWidth, this.height = b.sourceHeight, this.horizontal = !1, this.dH = Math.round(this.height * this.scaleY), this.tempScale = this.dH / this.height, this.taps = this.getTaps(), b.destinationHeight = this.dH, this._setupFrameBuffer(b), this.applyToWebGL(b), this._swapTextures(b), b.sourceHeight = b.destinationHeight) : this.applyTo2d(b);
      },
      isNeutralState: function() {
        return this.scaleX === 1 && this.scaleY === 1;
      },
      lanczosCreate: function(b) {
        return function(y) {
          if (y >= b || y <= -b)
            return 0;
          if (y < 11920929e-14 && y > -11920929e-14)
            return 1;
          y *= Math.PI;
          var w = y / b;
          return d(y) / y * d(w) / w;
        };
      },
      applyTo2d: function(b) {
        var y = b.imageData, w = this.scaleX, _ = this.scaleY;
        this.rcpScaleX = 1 / w, this.rcpScaleY = 1 / _;
        var S = y.width, C = y.height, k = c(S * w), R = c(C * _), B;
        this.resizeType === "sliceHack" ? B = this.sliceByTwo(b, S, C, k, R) : this.resizeType === "hermite" ? B = this.hermiteFastResize(b, S, C, k, R) : this.resizeType === "bilinear" ? B = this.bilinearFiltering(b, S, C, k, R) : this.resizeType === "lanczos" && (B = this.lanczosResize(b, S, C, k, R)), b.imageData = B;
      },
      sliceByTwo: function(b, y, w, _, S) {
        var C = b.imageData, k = 0.5, R = !1, B = !1, N = y * k, K = w * k, ee = n.filterBackend.resources, G, W, re = 0, ce = 0, le = y, T = 0;
        for (ee.sliceByTwo || (ee.sliceByTwo = document.createElement("canvas")), G = ee.sliceByTwo, (G.width < y * 1.5 || G.height < w) && (G.width = y * 1.5, G.height = w), W = G.getContext("2d"), W.clearRect(0, 0, y * 1.5, w), W.putImageData(C, 0, 0), _ = h(_), S = h(S); !R || !B; )
          y = N, w = K, _ < h(N * k) ? N = h(N * k) : (N = _, R = !0), S < h(K * k) ? K = h(K * k) : (K = S, B = !0), W.drawImage(G, re, ce, y, w, le, T, N, K), re = le, ce = T, T += K;
        return W.getImageData(re, ce, _, S);
      },
      lanczosResize: function(b, y, w, _, S) {
        function C(A) {
          var D, V, P, E, L, j, Y, H, Z, Q, te;
          for (T.x = (A + 0.5) * K, M.x = h(T.x), D = 0; D < S; D++) {
            for (T.y = (D + 0.5) * ee, M.y = h(T.y), L = 0, j = 0, Y = 0, H = 0, Z = 0, V = M.x - re; V <= M.x + re; V++)
              if (!(V < 0 || V >= y)) {
                Q = h(1e3 * u(V - T.x)), le[Q] || (le[Q] = {});
                for (var $ = M.y - ce; $ <= M.y + ce; $++)
                  $ < 0 || $ >= w || (te = h(1e3 * u($ - T.y)), le[Q][te] || (le[Q][te] = N(o(a(Q * G, 2) + a(te * W, 2)) / 1e3)), P = le[Q][te], P > 0 && (E = ($ * y + V) * 4, L += P, j += P * k[E], Y += P * k[E + 1], H += P * k[E + 2], Z += P * k[E + 3]));
              }
            E = (D * _ + A) * 4, B[E] = j / L, B[E + 1] = Y / L, B[E + 2] = H / L, B[E + 3] = Z / L;
          }
          return ++A < _ ? C(A) : R;
        }
        var k = b.imageData.data, R = b.ctx.createImageData(_, S), B = R.data, N = this.lanczosCreate(this.lanczosLobes), K = this.rcpScaleX, ee = this.rcpScaleY, G = 2 / this.rcpScaleX, W = 2 / this.rcpScaleY, re = m(K * this.lanczosLobes / 2), ce = m(ee * this.lanczosLobes / 2), le = {}, T = {}, M = {};
        return C(0);
      },
      bilinearFiltering: function(b, y, w, _, S) {
        var C, k, R, B, N, K, ee, G, W, re, ce, le, T = 0, M, A = this.rcpScaleX, D = this.rcpScaleY, V = 4 * (y - 1), P = b.imageData, E = P.data, L = b.ctx.createImageData(_, S), j = L.data;
        for (ee = 0; ee < S; ee++)
          for (G = 0; G < _; G++)
            for (N = h(A * G), K = h(D * ee), W = A * G - N, re = D * ee - K, M = 4 * (K * y + N), ce = 0; ce < 4; ce++)
              C = E[M + ce], k = E[M + 4 + ce], R = E[M + V + ce], B = E[M + V + 4 + ce], le = C * (1 - W) * (1 - re) + k * W * (1 - re) + R * re * (1 - W) + B * W * re, j[T++] = le;
        return L;
      },
      hermiteFastResize: function(b, y, w, _, S) {
        for (var C = this.rcpScaleX, k = this.rcpScaleY, R = m(C / 2), B = m(k / 2), N = b.imageData, K = N.data, ee = b.ctx.createImageData(_, S), G = ee.data, W = 0; W < S; W++)
          for (var re = 0; re < _; re++) {
            for (var ce = (re + W * _) * 4, le = 0, T = 0, M = 0, A = 0, D = 0, V = 0, P = 0, E = (W + 0.5) * k, L = h(W * k); L < (W + 1) * k; L++)
              for (var j = u(E - (L + 0.5)) / B, Y = (re + 0.5) * C, H = j * j, Z = h(re * C); Z < (re + 1) * C; Z++) {
                var Q = u(Y - (Z + 0.5)) / R, te = o(H + Q * Q);
                te > 1 && te < -1 || (le = 2 * te * te * te - 3 * te * te + 1, le > 0 && (Q = 4 * (Z + L * y), P += le * K[Q + 3], M += le, K[Q + 3] < 255 && (le = le * K[Q + 3] / 250), A += le * K[Q], D += le * K[Q + 1], V += le * K[Q + 2], T += le));
              }
            G[ce] = A / T, G[ce + 1] = D / T, G[ce + 2] = V / T, G[ce + 3] = P / M;
          }
        return ee;
      },
      toObject: function() {
        return {
          type: this.type,
          scaleX: this.scaleX,
          scaleY: this.scaleY,
          resizeType: this.resizeType,
          lanczosLobes: this.lanczosLobes
        };
      }
    }), n.Image.filters.Resize.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Contrast = h(a.BaseFilter, {
      type: "Contrast",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,
      contrast: 0,
      mainParameter: "contrast",
      applyTo2d: function(o) {
        if (this.contrast !== 0) {
          var u = o.imageData, c, m, d = u.data, m = d.length, p = Math.floor(this.contrast * 255), v = 259 * (p + 255) / (255 * (259 - p));
          for (c = 0; c < m; c += 4)
            d[c] = v * (d[c] - 128) + 128, d[c + 1] = v * (d[c + 1] - 128) + 128, d[c + 2] = v * (d[c + 2] - 128) + 128;
        }
      },
      getUniformLocations: function(o, u) {
        return {
          uContrast: o.getUniformLocation(u, "uContrast")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1f(u.uContrast, this.contrast);
      }
    }), n.Image.filters.Contrast.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Saturation = h(a.BaseFilter, {
      type: "Saturation",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,
      saturation: 0,
      mainParameter: "saturation",
      applyTo2d: function(o) {
        if (this.saturation !== 0) {
          var u = o.imageData, c = u.data, d = c.length, m = -this.saturation, p, v;
          for (p = 0; p < d; p += 4)
            v = Math.max(c[p], c[p + 1], c[p + 2]), c[p] += v !== c[p] ? (v - c[p]) * m : 0, c[p + 1] += v !== c[p + 1] ? (v - c[p + 1]) * m : 0, c[p + 2] += v !== c[p + 2] ? (v - c[p + 2]) * m : 0;
        }
      },
      getUniformLocations: function(o, u) {
        return {
          uSaturation: o.getUniformLocation(u, "uSaturation")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1f(u.uSaturation, -this.saturation);
      }
    }), n.Image.filters.Saturation.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Vibrance = h(a.BaseFilter, {
      type: "Vibrance",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,
      vibrance: 0,
      mainParameter: "vibrance",
      applyTo2d: function(o) {
        if (this.vibrance !== 0) {
          var u = o.imageData, c = u.data, d = c.length, m = -this.vibrance, p, v, b, y;
          for (p = 0; p < d; p += 4)
            v = Math.max(c[p], c[p + 1], c[p + 2]), b = (c[p] + c[p + 1] + c[p + 2]) / 3, y = Math.abs(v - b) * 2 / 255 * m, c[p] += v !== c[p] ? (v - c[p]) * y : 0, c[p + 1] += v !== c[p + 1] ? (v - c[p + 1]) * y : 0, c[p + 2] += v !== c[p + 2] ? (v - c[p + 2]) * y : 0;
        }
      },
      getUniformLocations: function(o, u) {
        return {
          uVibrance: o.getUniformLocation(u, "uVibrance")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform1f(u.uVibrance, -this.vibrance);
      }
    }), n.Image.filters.Vibrance.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Blur = h(a.BaseFilter, {
      type: "Blur",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,
      blur: 0,
      mainParameter: "blur",
      applyTo: function(o) {
        o.webgl ? (this.aspectRatio = o.sourceWidth / o.sourceHeight, o.passes++, this._setupFrameBuffer(o), this.horizontal = !0, this.applyToWebGL(o), this._swapTextures(o), this._setupFrameBuffer(o), this.horizontal = !1, this.applyToWebGL(o), this._swapTextures(o)) : this.applyTo2d(o);
      },
      applyTo2d: function(o) {
        o.imageData = this.simpleBlur(o);
      },
      simpleBlur: function(o) {
        var u = o.filterBackend.resources, c, d, m = o.imageData.width, p = o.imageData.height;
        u.blurLayer1 || (u.blurLayer1 = n.util.createCanvasElement(), u.blurLayer2 = n.util.createCanvasElement()), c = u.blurLayer1, d = u.blurLayer2, (c.width !== m || c.height !== p) && (d.width = c.width = m, d.height = c.height = p);
        var v = c.getContext("2d"), b = d.getContext("2d"), y = 15, w, _, S, C, k = this.blur * 0.06 * 0.5;
        for (v.putImageData(o.imageData, 0, 0), b.clearRect(0, 0, m, p), C = -y; C <= y; C++)
          w = (Math.random() - 0.5) / 4, _ = C / y, S = k * _ * m + w, b.globalAlpha = 1 - Math.abs(_), b.drawImage(c, S, w), v.drawImage(d, 0, 0), b.globalAlpha = 1, b.clearRect(0, 0, d.width, d.height);
        for (C = -y; C <= y; C++)
          w = (Math.random() - 0.5) / 4, _ = C / y, S = k * _ * p + w, b.globalAlpha = 1 - Math.abs(_), b.drawImage(c, w, S), v.drawImage(d, 0, 0), b.globalAlpha = 1, b.clearRect(0, 0, d.width, d.height);
        o.ctx.drawImage(c, 0, 0);
        var R = o.ctx.getImageData(0, 0, c.width, c.height);
        return v.globalAlpha = 1, v.clearRect(0, 0, c.width, c.height), R;
      },
      getUniformLocations: function(o, u) {
        return {
          delta: o.getUniformLocation(u, "uDelta")
        };
      },
      sendUniformData: function(o, u) {
        var c = this.chooseRightDelta();
        o.uniform2fv(u.delta, c);
      },
      chooseRightDelta: function() {
        var o = 1, u = [0, 0], c;
        return this.horizontal ? this.aspectRatio > 1 && (o = 1 / this.aspectRatio) : this.aspectRatio < 1 && (o = this.aspectRatio), c = o * this.blur * 0.12, this.horizontal ? u[0] = c : u[1] = c, u;
      }
    }), a.Blur.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Gamma = h(a.BaseFilter, {
      type: "Gamma",
      fragmentSource: `precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,
      gamma: [1, 1, 1],
      mainParameter: "gamma",
      initialize: function(o) {
        this.gamma = [1, 1, 1], a.BaseFilter.prototype.initialize.call(this, o);
      },
      applyTo2d: function(o) {
        var u = o.imageData, c = u.data, d = this.gamma, m = c.length, p = 1 / d[0], v = 1 / d[1], b = 1 / d[2], y;
        for (this.rVals || (this.rVals = new Uint8Array(256), this.gVals = new Uint8Array(256), this.bVals = new Uint8Array(256)), y = 0, m = 256; y < m; y++)
          this.rVals[y] = Math.pow(y / 255, p) * 255, this.gVals[y] = Math.pow(y / 255, v) * 255, this.bVals[y] = Math.pow(y / 255, b) * 255;
        for (y = 0, m = c.length; y < m; y += 4)
          c[y] = this.rVals[c[y]], c[y + 1] = this.gVals[c[y + 1]], c[y + 2] = this.bVals[c[y + 2]];
      },
      getUniformLocations: function(o, u) {
        return {
          uGamma: o.getUniformLocation(u, "uGamma")
        };
      },
      sendUniformData: function(o, u) {
        o.uniform3fv(u.uGamma, this.gamma);
      }
    }), n.Image.filters.Gamma.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.Composed = h(a.BaseFilter, {
      type: "Composed",
      subFilters: [],
      initialize: function(o) {
        this.callSuper("initialize", o), this.subFilters = this.subFilters.slice(0);
      },
      applyTo: function(o) {
        o.passes += this.subFilters.length - 1, this.subFilters.forEach(function(u) {
          u.applyTo(o);
        });
      },
      toObject: function() {
        return n.util.object.extend(this.callSuper("toObject"), {
          subFilters: this.subFilters.map(function(o) {
            return o.toObject();
          })
        });
      },
      isNeutralState: function() {
        return !this.subFilters.some(function(o) {
          return !o.isNeutralState();
        });
      }
    }), n.Image.filters.Composed.fromObject = function(o, u) {
      var c = o.subFilters || [], d = c.map(function(p) {
        return new n.Image.filters[p.type](p);
      }), m = new n.Image.filters.Composed({ subFilters: d });
      return u && u(m), m;
    };
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.Image.filters, h = n.util.createClass;
    a.HueRotation = h(a.ColorMatrix, {
      type: "HueRotation",
      rotation: 0,
      mainParameter: "rotation",
      calculateMatrix: function() {
        var o = this.rotation * Math.PI, u = n.util.cos(o), c = n.util.sin(o), d = 1 / 3, m = Math.sqrt(d) * c, p = 1 - u;
        this.matrix = [
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0
        ], this.matrix[0] = u + p / 3, this.matrix[1] = d * p - m, this.matrix[2] = d * p + m, this.matrix[5] = d * p + m, this.matrix[6] = u + d * p, this.matrix[7] = d * p - m, this.matrix[10] = d * p - m, this.matrix[11] = d * p + m, this.matrix[12] = u + d * p;
      },
      isNeutralState: function(o) {
        return this.calculateMatrix(), a.BaseFilter.prototype.isNeutralState.call(this, o);
      },
      applyTo: function(o) {
        this.calculateMatrix(), a.BaseFilter.prototype.applyTo.call(this, o);
      }
    }), n.Image.filters.HueRotation.fromObject = n.Image.filters.BaseFilter.fromObject;
  }(t), function(l) {
    var n = l.fabric || (l.fabric = {}), a = n.util.object.clone;
    if (n.Text) {
      n.warn("fabric.Text is already defined");
      return;
    }
    var h = "fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");
    n.Text = n.util.createClass(n.Object, {
      _dimensionAffectingProps: [
        "fontSize",
        "fontWeight",
        "fontFamily",
        "fontStyle",
        "lineHeight",
        "text",
        "charSpacing",
        "textAlign",
        "styles",
        "path",
        "pathStartOffset",
        "pathSide",
        "pathAlign"
      ],
      _reNewline: /\r?\n/,
      _reSpacesAndTabs: /[ \t\r]/g,
      _reSpaceAndTab: /[ \t\r]/,
      _reWords: /\S+/g,
      type: "text",
      fontSize: 40,
      fontWeight: "normal",
      fontFamily: "Times New Roman",
      underline: !1,
      overline: !1,
      linethrough: !1,
      textAlign: "left",
      fontStyle: "normal",
      lineHeight: 1.16,
      superscript: {
        size: 0.6,
        baseline: -0.35
      },
      subscript: {
        size: 0.6,
        baseline: 0.11
      },
      textBackgroundColor: "",
      stateProperties: n.Object.prototype.stateProperties.concat(h),
      cacheProperties: n.Object.prototype.cacheProperties.concat(h),
      stroke: null,
      shadow: null,
      path: null,
      pathStartOffset: 0,
      pathSide: "left",
      pathAlign: "baseline",
      _fontSizeFraction: 0.222,
      offsets: {
        underline: 0.1,
        linethrough: -0.315,
        overline: -0.88
      },
      _fontSizeMult: 1.13,
      charSpacing: 0,
      styles: null,
      _measuringContext: null,
      deltaY: 0,
      direction: "ltr",
      _styleProperties: [
        "stroke",
        "strokeWidth",
        "fill",
        "fontFamily",
        "fontSize",
        "fontWeight",
        "fontStyle",
        "underline",
        "overline",
        "linethrough",
        "deltaY",
        "textBackgroundColor"
      ],
      __charBounds: [],
      CACHE_FONT_SIZE: 400,
      MIN_TEXT_WIDTH: 2,
      initialize: function(o, u) {
        this.styles = u ? u.styles || {} : {}, this.text = o, this.__skipDimension = !0, this.callSuper("initialize", u), this.path && this.setPathInfo(), this.__skipDimension = !1, this.initDimensions(), this.setCoords(), this.setupState({ propertySet: "_dimensionAffectingProps" });
      },
      setPathInfo: function() {
        var o = this.path;
        o && (o.segmentsInfo = n.util.getPathSegmentsInfo(o.path));
      },
      getMeasuringContext: function() {
        return n._measuringContext || (n._measuringContext = this.canvas && this.canvas.contextCache || n.util.createCanvasElement().getContext("2d")), n._measuringContext;
      },
      _splitText: function() {
        var o = this._splitTextIntoLines(this.text);
        return this.textLines = o.lines, this._textLines = o.graphemeLines, this._unwrappedTextLines = o._unwrappedLines, this._text = o.graphemeText, o;
      },
      initDimensions: function() {
        this.__skipDimension || (this._splitText(), this._clearCache(), this.path ? (this.width = this.path.width, this.height = this.path.height) : (this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH, this.height = this.calcTextHeight()), this.textAlign.indexOf("justify") !== -1 && this.enlargeSpaces(), this.saveState({ propertySet: "_dimensionAffectingProps" }));
      },
      enlargeSpaces: function() {
        for (var o, u, c, d, m, p, v, b = 0, y = this._textLines.length; b < y; b++)
          if (!(this.textAlign !== "justify" && (b === y - 1 || this.isEndOfWrapping(b))) && (d = 0, m = this._textLines[b], u = this.getLineWidth(b), u < this.width && (v = this.textLines[b].match(this._reSpacesAndTabs)))) {
            c = v.length, o = (this.width - u) / c;
            for (var w = 0, _ = m.length; w <= _; w++)
              p = this.__charBounds[b][w], this._reSpaceAndTab.test(m[w]) ? (p.width += o, p.kernedWidth += o, p.left += d, d += o) : p.left += d;
          }
      },
      isEndOfWrapping: function(o) {
        return o === this._textLines.length - 1;
      },
      missingNewlineOffset: function() {
        return 1;
      },
      toString: function() {
        return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>';
      },
      _getCacheCanvasDimensions: function() {
        var o = this.callSuper("_getCacheCanvasDimensions"), u = this.fontSize;
        return o.width += u * o.zoomX, o.height += u * o.zoomY, o;
      },
      _render: function(o) {
        var u = this.path;
        u && !u.isNotVisible() && u._render(o), this._setTextStyles(o), this._renderTextLinesBackground(o), this._renderTextDecoration(o, "underline"), this._renderText(o), this._renderTextDecoration(o, "overline"), this._renderTextDecoration(o, "linethrough");
      },
      _renderText: function(o) {
        this.paintFirst === "stroke" ? (this._renderTextStroke(o), this._renderTextFill(o)) : (this._renderTextFill(o), this._renderTextStroke(o));
      },
      _setTextStyles: function(o, u, c) {
        if (o.textBaseline = "alphabetical", this.path)
          switch (this.pathAlign) {
            case "center":
              o.textBaseline = "middle";
              break;
            case "ascender":
              o.textBaseline = "top";
              break;
            case "descender":
              o.textBaseline = "bottom";
              break;
          }
        o.font = this._getFontDeclaration(u, c);
      },
      calcTextWidth: function() {
        for (var o = this.getLineWidth(0), u = 1, c = this._textLines.length; u < c; u++) {
          var d = this.getLineWidth(u);
          d > o && (o = d);
        }
        return o;
      },
      _renderTextLine: function(o, u, c, d, m, p) {
        this._renderChars(o, u, c, d, m, p);
      },
      _renderTextLinesBackground: function(o) {
        if (!(!this.textBackgroundColor && !this.styleHas("textBackgroundColor"))) {
          for (var u, c, d = o.fillStyle, m, p, v = this._getLeftOffset(), b = this._getTopOffset(), y = 0, w = 0, _, S, C = this.path, k, R = 0, B = this._textLines.length; R < B; R++) {
            if (u = this.getHeightOfLine(R), !this.textBackgroundColor && !this.styleHas("textBackgroundColor", R)) {
              b += u;
              continue;
            }
            m = this._textLines[R], c = this._getLineLeftOffset(R), w = 0, y = 0, p = this.getValueOfPropertyAt(R, 0, "textBackgroundColor");
            for (var N = 0, K = m.length; N < K; N++)
              _ = this.__charBounds[R][N], S = this.getValueOfPropertyAt(R, N, "textBackgroundColor"), C ? (o.save(), o.translate(_.renderLeft, _.renderTop), o.rotate(_.angle), o.fillStyle = S, S && o.fillRect(
                -_.width / 2,
                -u / this.lineHeight * (1 - this._fontSizeFraction),
                _.width,
                u / this.lineHeight
              ), o.restore()) : S !== p ? (k = v + c + y, this.direction === "rtl" && (k = this.width - k - w), o.fillStyle = p, p && o.fillRect(
                k,
                b,
                w,
                u / this.lineHeight
              ), y = _.left, w = _.width, p = S) : w += _.kernedWidth;
            S && !C && (k = v + c + y, this.direction === "rtl" && (k = this.width - k - w), o.fillStyle = S, o.fillRect(
              k,
              b,
              w,
              u / this.lineHeight
            )), b += u;
          }
          o.fillStyle = d, this._removeShadow(o);
        }
      },
      getFontCache: function(o) {
        var u = o.fontFamily.toLowerCase();
        n.charWidthsCache[u] || (n.charWidthsCache[u] = {});
        var c = n.charWidthsCache[u], d = o.fontStyle.toLowerCase() + "_" + (o.fontWeight + "").toLowerCase();
        return c[d] || (c[d] = {}), c[d];
      },
      _measureChar: function(o, u, c, d) {
        var m = this.getFontCache(u), p = this._getFontDeclaration(u), v = this._getFontDeclaration(d), b = c + o, y = p === v, w, _, S, C = u.fontSize / this.CACHE_FONT_SIZE, k;
        if (c && m[c] !== void 0 && (S = m[c]), m[o] !== void 0 && (k = w = m[o]), y && m[b] !== void 0 && (_ = m[b], k = _ - S), w === void 0 || S === void 0 || _ === void 0) {
          var R = this.getMeasuringContext();
          this._setTextStyles(R, u, !0);
        }
        return w === void 0 && (k = w = R.measureText(o).width, m[o] = w), S === void 0 && y && c && (S = R.measureText(c).width, m[c] = S), y && _ === void 0 && (_ = R.measureText(b).width, m[b] = _, k = _ - S), { width: w * C, kernedWidth: k * C };
      },
      getHeightOfChar: function(o, u) {
        return this.getValueOfPropertyAt(o, u, "fontSize");
      },
      measureLine: function(o) {
        var u = this._measureLine(o);
        return this.charSpacing !== 0 && (u.width -= this._getWidthOfCharSpacing()), u.width < 0 && (u.width = 0), u;
      },
      _measureLine: function(o) {
        var u = 0, c, d, m = this._textLines[o], p, v, b = 0, y = new Array(m.length), w = 0, _, S, C = this.path, k = this.pathSide === "right";
        for (this.__charBounds[o] = y, c = 0; c < m.length; c++)
          d = m[c], v = this._getGraphemeBox(d, o, c, p), y[c] = v, u += v.kernedWidth, p = d;
        if (y[c] = {
          left: v ? v.left + v.width : 0,
          width: 0,
          kernedWidth: 0,
          height: this.fontSize
        }, C) {
          switch (S = C.segmentsInfo[C.segmentsInfo.length - 1].length, _ = n.util.getPointOnPath(C.path, 0, C.segmentsInfo), _.x += C.pathOffset.x, _.y += C.pathOffset.y, this.textAlign) {
            case "left":
              w = k ? S - u : 0;
              break;
            case "center":
              w = (S - u) / 2;
              break;
            case "right":
              w = k ? 0 : S - u;
              break;
          }
          for (w += this.pathStartOffset * (k ? -1 : 1), c = k ? m.length - 1 : 0; k ? c >= 0 : c < m.length; k ? c-- : c++)
            v = y[c], w > S ? w %= S : w < 0 && (w += S), this._setGraphemeOnPath(w, v, _), w += v.kernedWidth;
        }
        return { width: u, numOfSpaces: b };
      },
      _setGraphemeOnPath: function(o, u, c) {
        var d = o + u.kernedWidth / 2, m = this.path, p = n.util.getPointOnPath(m.path, d, m.segmentsInfo);
        u.renderLeft = p.x - c.x, u.renderTop = p.y - c.y, u.angle = p.angle + (this.pathSide === "right" ? Math.PI : 0);
      },
      _getGraphemeBox: function(o, u, c, d, m) {
        var p = this.getCompleteStyleDeclaration(u, c), v = d ? this.getCompleteStyleDeclaration(u, c - 1) : {}, b = this._measureChar(o, p, d, v), y = b.kernedWidth, w = b.width, _;
        this.charSpacing !== 0 && (_ = this._getWidthOfCharSpacing(), w += _, y += _);
        var S = {
          width: w,
          left: 0,
          height: p.fontSize,
          kernedWidth: y,
          deltaY: p.deltaY
        };
        if (c > 0 && !m) {
          var C = this.__charBounds[u][c - 1];
          S.left = C.left + C.width + b.kernedWidth - b.width;
        }
        return S;
      },
      getHeightOfLine: function(o) {
        if (this.__lineHeights[o])
          return this.__lineHeights[o];
        for (var u = this._textLines[o], c = this.getHeightOfChar(o, 0), d = 1, m = u.length; d < m; d++)
          c = Math.max(this.getHeightOfChar(o, d), c);
        return this.__lineHeights[o] = c * this.lineHeight * this._fontSizeMult;
      },
      calcTextHeight: function() {
        for (var o, u = 0, c = 0, d = this._textLines.length; c < d; c++)
          o = this.getHeightOfLine(c), u += c === d - 1 ? o / this.lineHeight : o;
        return u;
      },
      _getLeftOffset: function() {
        return this.direction === "ltr" ? -this.width / 2 : this.width / 2;
      },
      _getTopOffset: function() {
        return -this.height / 2;
      },
      _renderTextCommon: function(o, u) {
        o.save();
        for (var c = 0, d = this._getLeftOffset(), m = this._getTopOffset(), p = 0, v = this._textLines.length; p < v; p++) {
          var b = this.getHeightOfLine(p), y = b / this.lineHeight, w = this._getLineLeftOffset(p);
          this._renderTextLine(
            u,
            o,
            this._textLines[p],
            d + w,
            m + c + y,
            p
          ), c += b;
        }
        o.restore();
      },
      _renderTextFill: function(o) {
        !this.fill && !this.styleHas("fill") || this._renderTextCommon(o, "fillText");
      },
      _renderTextStroke: function(o) {
        (!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles() || (this.shadow && !this.shadow.affectStroke && this._removeShadow(o), o.save(), this._setLineDash(o, this.strokeDashArray), o.beginPath(), this._renderTextCommon(o, "strokeText"), o.closePath(), o.restore());
      },
      _renderChars: function(o, u, c, d, m, p) {
        var v = this.getHeightOfLine(p), b = this.textAlign.indexOf("justify") !== -1, y, w, _ = "", S, C = 0, k, R = this.path, B = !b && this.charSpacing === 0 && this.isEmptyStyles(p) && !R, N = this.direction === "ltr", K = this.direction === "ltr" ? 1 : -1, ee, G = u.canvas.getAttribute("dir");
        if (u.save(), G !== this.direction && (u.canvas.setAttribute("dir", N ? "ltr" : "rtl"), u.direction = N ? "ltr" : "rtl", u.textAlign = N ? "left" : "right"), m -= v * this._fontSizeFraction / this.lineHeight, B) {
          this._renderChar(o, u, p, 0, c.join(""), d, m, v), u.restore();
          return;
        }
        for (var W = 0, re = c.length - 1; W <= re; W++)
          k = W === re || this.charSpacing || R, _ += c[W], S = this.__charBounds[p][W], C === 0 ? (d += K * (S.kernedWidth - S.width), C += S.width) : C += S.kernedWidth, b && !k && this._reSpaceAndTab.test(c[W]) && (k = !0), k || (y = y || this.getCompleteStyleDeclaration(p, W), w = this.getCompleteStyleDeclaration(p, W + 1), k = n.util.hasStyleChanged(y, w, !1)), k && (R ? (u.save(), u.translate(S.renderLeft, S.renderTop), u.rotate(S.angle), this._renderChar(o, u, p, W, _, -C / 2, 0, v), u.restore()) : (ee = d, this._renderChar(o, u, p, W, _, ee, m, v)), _ = "", y = w, d += K * C, C = 0);
        u.restore();
      },
      _applyPatternGradientTransformText: function(o) {
        var u = n.util.createCanvasElement(), c, d = this.width + this.strokeWidth, m = this.height + this.strokeWidth;
        return u.width = d, u.height = m, c = u.getContext("2d"), c.beginPath(), c.moveTo(0, 0), c.lineTo(d, 0), c.lineTo(d, m), c.lineTo(0, m), c.closePath(), c.translate(d / 2, m / 2), c.fillStyle = o.toLive(c), this._applyPatternGradientTransform(c, o), c.fill(), c.createPattern(u, "no-repeat");
      },
      handleFiller: function(o, u, c) {
        var d, m;
        return c.toLive ? c.gradientUnits === "percentage" || c.gradientTransform || c.patternTransform ? (d = -this.width / 2, m = -this.height / 2, o.translate(d, m), o[u] = this._applyPatternGradientTransformText(c), { offsetX: d, offsetY: m }) : (o[u] = c.toLive(o, this), this._applyPatternGradientTransform(o, c)) : (o[u] = c, { offsetX: 0, offsetY: 0 });
      },
      _setStrokeStyles: function(o, u) {
        return o.lineWidth = u.strokeWidth, o.lineCap = this.strokeLineCap, o.lineDashOffset = this.strokeDashOffset, o.lineJoin = this.strokeLineJoin, o.miterLimit = this.strokeMiterLimit, this.handleFiller(o, "strokeStyle", u.stroke);
      },
      _setFillStyles: function(o, u) {
        return this.handleFiller(o, "fillStyle", u.fill);
      },
      _renderChar: function(o, u, c, d, m, p, v) {
        var b = this._getStyleDeclaration(c, d), y = this.getCompleteStyleDeclaration(c, d), w = o === "fillText" && y.fill, _ = o === "strokeText" && y.stroke && y.strokeWidth, S, C;
        !_ && !w || (u.save(), w && (S = this._setFillStyles(u, y)), _ && (C = this._setStrokeStyles(u, y)), u.font = this._getFontDeclaration(y), b && b.textBackgroundColor && this._removeShadow(u), b && b.deltaY && (v += b.deltaY), w && u.fillText(m, p - S.offsetX, v - S.offsetY), _ && u.strokeText(m, p - C.offsetX, v - C.offsetY), u.restore());
      },
      setSuperscript: function(o, u) {
        return this._setScript(o, u, this.superscript);
      },
      setSubscript: function(o, u) {
        return this._setScript(o, u, this.subscript);
      },
      _setScript: function(o, u, c) {
        var d = this.get2DCursorLocation(o, !0), m = this.getValueOfPropertyAt(d.lineIndex, d.charIndex, "fontSize"), p = this.getValueOfPropertyAt(d.lineIndex, d.charIndex, "deltaY"), v = { fontSize: m * c.size, deltaY: p + m * c.baseline };
        return this.setSelectionStyles(v, o, u), this;
      },
      _getLineLeftOffset: function(o) {
        var u = this.getLineWidth(o), c = this.width - u, d = this.textAlign, m = this.direction, v, p = 0, v = this.isEndOfWrapping(o);
        return d === "justify" || d === "justify-center" && !v || d === "justify-right" && !v || d === "justify-left" && !v ? 0 : (d === "center" && (p = c / 2), d === "right" && (p = c), d === "justify-center" && (p = c / 2), d === "justify-right" && (p = c), m === "rtl" && (p -= c), p);
      },
      _clearCache: function() {
        this.__lineWidths = [], this.__lineHeights = [], this.__charBounds = [];
      },
      _shouldClearDimensionCache: function() {
        var o = this._forceClearCache;
        return o || (o = this.hasStateChanged("_dimensionAffectingProps")), o && (this.dirty = !0, this._forceClearCache = !1), o;
      },
      getLineWidth: function(o) {
        if (this.__lineWidths[o] !== void 0)
          return this.__lineWidths[o];
        var u = this.measureLine(o), c = u.width;
        return this.__lineWidths[o] = c, c;
      },
      _getWidthOfCharSpacing: function() {
        return this.charSpacing !== 0 ? this.fontSize * this.charSpacing / 1e3 : 0;
      },
      getValueOfPropertyAt: function(o, u, c) {
        var d = this._getStyleDeclaration(o, u);
        return d && typeof d[c] < "u" ? d[c] : this[c];
      },
      _renderTextDecoration: function(o, u) {
        if (!(!this[u] && !this.styleHas(u))) {
          for (var c, d, m, p, v, b, y, w, _ = this._getLeftOffset(), S = this._getTopOffset(), C, k, R, B, N, K, ee, G, W = this.path, re = this._getWidthOfCharSpacing(), ce = this.offsets[u], le = 0, T = this._textLines.length; le < T; le++) {
            if (c = this.getHeightOfLine(le), !this[u] && !this.styleHas(u, le)) {
              S += c;
              continue;
            }
            y = this._textLines[le], K = c / this.lineHeight, p = this._getLineLeftOffset(le), k = 0, R = 0, w = this.getValueOfPropertyAt(le, 0, u), G = this.getValueOfPropertyAt(le, 0, "fill"), C = S + K * (1 - this._fontSizeFraction), d = this.getHeightOfChar(le, 0), v = this.getValueOfPropertyAt(le, 0, "deltaY");
            for (var M = 0, A = y.length; M < A; M++)
              if (B = this.__charBounds[le][M], N = this.getValueOfPropertyAt(le, M, u), ee = this.getValueOfPropertyAt(le, M, "fill"), m = this.getHeightOfChar(le, M), b = this.getValueOfPropertyAt(le, M, "deltaY"), W && N && ee)
                o.save(), o.fillStyle = G, o.translate(B.renderLeft, B.renderTop), o.rotate(B.angle), o.fillRect(
                  -B.kernedWidth / 2,
                  ce * m + b,
                  B.kernedWidth,
                  this.fontSize / 15
                ), o.restore();
              else if ((N !== w || ee !== G || m !== d || b !== v) && R > 0) {
                var D = _ + p + k;
                this.direction === "rtl" && (D = this.width - D - R), w && G && (o.fillStyle = G, o.fillRect(
                  D,
                  C + ce * d + v,
                  R,
                  this.fontSize / 15
                )), k = B.left, R = B.width, w = N, G = ee, d = m, v = b;
              } else
                R += B.kernedWidth;
            var D = _ + p + k;
            this.direction === "rtl" && (D = this.width - D - R), o.fillStyle = ee, N && ee && o.fillRect(
              D,
              C + ce * d + v,
              R - re,
              this.fontSize / 15
            ), S += c;
          }
          this._removeShadow(o);
        }
      },
      _getFontDeclaration: function(o, u) {
        var c = o || this, d = this.fontFamily, m = n.Text.genericFonts.indexOf(d.toLowerCase()) > -1, p = d === void 0 || d.indexOf("'") > -1 || d.indexOf(",") > -1 || d.indexOf('"') > -1 || m ? c.fontFamily : '"' + c.fontFamily + '"';
        return [
          n.isLikelyNode ? c.fontWeight : c.fontStyle,
          n.isLikelyNode ? c.fontStyle : c.fontWeight,
          u ? this.CACHE_FONT_SIZE + "px" : c.fontSize + "px",
          p
        ].join(" ");
      },
      render: function(o) {
        !this.visible || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(), this.callSuper("render", o));
      },
      _splitTextIntoLines: function(o) {
        for (var u = o.split(this._reNewline), c = new Array(u.length), d = [`
`], m = [], p = 0; p < u.length; p++)
          c[p] = n.util.string.graphemeSplit(u[p]), m = m.concat(c[p], d);
        return m.pop(), { _unwrappedLines: c, lines: u, graphemeText: m, graphemeLines: c };
      },
      toObject: function(o) {
        var u = h.concat(o), c = this.callSuper("toObject", u);
        return c.styles = n.util.stylesToArray(this.styles, this.text), c.path && (c.path = this.path.toObject()), c;
      },
      set: function(o, u) {
        this.callSuper("set", o, u);
        var c = !1, d = !1;
        if (typeof o == "object")
          for (var m in o)
            m === "path" && this.setPathInfo(), c = c || this._dimensionAffectingProps.indexOf(m) !== -1, d = d || m === "path";
        else
          c = this._dimensionAffectingProps.indexOf(o) !== -1, d = o === "path";
        return d && this.setPathInfo(), c && (this.initDimensions(), this.setCoords()), this;
      },
      complexity: function() {
        return 1;
      }
    }), n.Text.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat(
      "x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")
    ), n.Text.DEFAULT_SVG_FONT_SIZE = 16, n.Text.fromElement = function(o, u, c) {
      if (!o)
        return u(null);
      var d = n.parseAttributes(o, n.Text.ATTRIBUTE_NAMES), m = d.textAnchor || "left";
      if (c = n.util.object.extend(c ? a(c) : {}, d), c.top = c.top || 0, c.left = c.left || 0, d.textDecoration) {
        var p = d.textDecoration;
        p.indexOf("underline") !== -1 && (c.underline = !0), p.indexOf("overline") !== -1 && (c.overline = !0), p.indexOf("line-through") !== -1 && (c.linethrough = !0), delete c.textDecoration;
      }
      "dx" in d && (c.left += d.dx), "dy" in d && (c.top += d.dy), "fontSize" in c || (c.fontSize = n.Text.DEFAULT_SVG_FONT_SIZE);
      var v = "";
      "textContent" in o ? v = o.textContent : "firstChild" in o && o.firstChild !== null && "data" in o.firstChild && o.firstChild.data !== null && (v = o.firstChild.data), v = v.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
      var b = c.strokeWidth;
      c.strokeWidth = 0;
      var y = new n.Text(v, c), w = y.getScaledHeight() / y.height, _ = (y.height + y.strokeWidth) * y.lineHeight - y.height, S = _ * w, C = y.getScaledHeight() + S, k = 0;
      m === "center" && (k = y.getScaledWidth() / 2), m === "right" && (k = y.getScaledWidth()), y.set({
        left: y.left - k,
        top: y.top - (C - y.fontSize * (0.07 + y._fontSizeFraction)) / y.lineHeight,
        strokeWidth: typeof b < "u" ? b : 1
      }), u(y);
    }, n.Text.fromObject = function(o, u) {
      var c = a(o), d = o.path;
      return delete c.path, n.Object._fromObject("Text", c, function(m) {
        m.styles = n.util.stylesFromArray(o.styles, o.text), d ? n.Object._fromObject("Path", d, function(p) {
          m.set("path", p), u(m);
        }, "path") : u(m);
      }, "text");
    }, n.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"], n.util.createAccessors && n.util.createAccessors(n.Text);
  }(t), function() {
    e.util.object.extend(e.Text.prototype, {
      isEmptyStyles: function(l) {
        if (!this.styles || typeof l < "u" && !this.styles[l])
          return !0;
        var n = typeof l > "u" ? this.styles : { line: this.styles[l] };
        for (var a in n)
          for (var h in n[a])
            for (var o in n[a][h])
              return !1;
        return !0;
      },
      styleHas: function(l, n) {
        if (!this.styles || !l || l === "" || typeof n < "u" && !this.styles[n])
          return !1;
        var a = typeof n > "u" ? this.styles : { 0: this.styles[n] };
        for (var h in a)
          for (var o in a[h])
            if (typeof a[h][o][l] < "u")
              return !0;
        return !1;
      },
      cleanStyle: function(l) {
        if (!this.styles || !l || l === "")
          return !1;
        var n = this.styles, a = 0, h, o, u = !0, c = 0, d;
        for (var m in n) {
          h = 0;
          for (var p in n[m]) {
            var d = n[m][p], v = d.hasOwnProperty(l);
            a++, v ? (o ? d[l] !== o && (u = !1) : o = d[l], d[l] === this[l] && delete d[l]) : u = !1, Object.keys(d).length !== 0 ? h++ : delete n[m][p];
          }
          h === 0 && delete n[m];
        }
        for (var b = 0; b < this._textLines.length; b++)
          c += this._textLines[b].length;
        u && a === c && (this[l] = o, this.removeStyle(l));
      },
      removeStyle: function(l) {
        if (!(!this.styles || !l || l === "")) {
          var n = this.styles, a, h, o;
          for (h in n) {
            a = n[h];
            for (o in a)
              delete a[o][l], Object.keys(a[o]).length === 0 && delete a[o];
            Object.keys(a).length === 0 && delete n[h];
          }
        }
      },
      _extendStyles: function(l, n) {
        var a = this.get2DCursorLocation(l);
        this._getLineStyle(a.lineIndex) || this._setLineStyle(a.lineIndex), this._getStyleDeclaration(a.lineIndex, a.charIndex) || this._setStyleDeclaration(a.lineIndex, a.charIndex, {}), e.util.object.extend(this._getStyleDeclaration(a.lineIndex, a.charIndex), n);
      },
      get2DCursorLocation: function(l, n) {
        typeof l > "u" && (l = this.selectionStart);
        for (var a = n ? this._unwrappedTextLines : this._textLines, h = a.length, o = 0; o < h; o++) {
          if (l <= a[o].length)
            return {
              lineIndex: o,
              charIndex: l
            };
          l -= a[o].length + this.missingNewlineOffset(o);
        }
        return {
          lineIndex: o - 1,
          charIndex: a[o - 1].length < l ? a[o - 1].length : l
        };
      },
      getSelectionStyles: function(l, n, a) {
        typeof l > "u" && (l = this.selectionStart || 0), typeof n > "u" && (n = this.selectionEnd || l);
        for (var h = [], o = l; o < n; o++)
          h.push(this.getStyleAtPosition(o, a));
        return h;
      },
      getStyleAtPosition: function(l, n) {
        var a = this.get2DCursorLocation(l), h = n ? this.getCompleteStyleDeclaration(a.lineIndex, a.charIndex) : this._getStyleDeclaration(a.lineIndex, a.charIndex);
        return h || {};
      },
      setSelectionStyles: function(l, n, a) {
        typeof n > "u" && (n = this.selectionStart || 0), typeof a > "u" && (a = this.selectionEnd || n);
        for (var h = n; h < a; h++)
          this._extendStyles(h, l);
        return this._forceClearCache = !0, this;
      },
      _getStyleDeclaration: function(l, n) {
        var a = this.styles && this.styles[l];
        return a ? a[n] : null;
      },
      getCompleteStyleDeclaration: function(l, n) {
        for (var a = this._getStyleDeclaration(l, n) || {}, h = {}, o, u = 0; u < this._styleProperties.length; u++)
          o = this._styleProperties[u], h[o] = typeof a[o] > "u" ? this[o] : a[o];
        return h;
      },
      _setStyleDeclaration: function(l, n, a) {
        this.styles[l][n] = a;
      },
      _deleteStyleDeclaration: function(l, n) {
        delete this.styles[l][n];
      },
      _getLineStyle: function(l) {
        return !!this.styles[l];
      },
      _setLineStyle: function(l) {
        this.styles[l] = {};
      },
      _deleteLineStyle: function(l) {
        delete this.styles[l];
      }
    });
  }(), function() {
    function l(n) {
      n.textDecoration && (n.textDecoration.indexOf("underline") > -1 && (n.underline = !0), n.textDecoration.indexOf("line-through") > -1 && (n.linethrough = !0), n.textDecoration.indexOf("overline") > -1 && (n.overline = !0), delete n.textDecoration);
    }
    e.IText = e.util.createClass(e.Text, e.Observable, {
      type: "i-text",
      selectionStart: 0,
      selectionEnd: 0,
      selectionColor: "rgba(17,119,255,0.3)",
      isEditing: !1,
      editable: !0,
      editingBorderColor: "rgba(102,153,255,0.25)",
      cursorWidth: 2,
      cursorColor: "",
      cursorDelay: 1e3,
      cursorDuration: 600,
      caching: !0,
      hiddenTextareaContainer: null,
      _reSpace: /\s|\n/,
      _currentCursorOpacity: 0,
      _selectionDirection: null,
      _abortCursorAnimation: !1,
      __widthOfSpace: [],
      inCompositionMode: !1,
      initialize: function(n, a) {
        this.callSuper("initialize", n, a), this.initBehavior();
      },
      setSelectionStart: function(n) {
        n = Math.max(n, 0), this._updateAndFire("selectionStart", n);
      },
      setSelectionEnd: function(n) {
        n = Math.min(n, this.text.length), this._updateAndFire("selectionEnd", n);
      },
      _updateAndFire: function(n, a) {
        this[n] !== a && (this._fireSelectionChanged(), this[n] = a), this._updateTextarea();
      },
      _fireSelectionChanged: function() {
        this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", { target: this });
      },
      initDimensions: function() {
        this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this.callSuper("initDimensions");
      },
      render: function(n) {
        this.clearContextTop(), this.callSuper("render", n), this.cursorOffsetCache = {}, this.renderCursorOrSelection();
      },
      _render: function(n) {
        this.callSuper("_render", n);
      },
      clearContextTop: function(n) {
        if (!(!this.isEditing || !this.canvas || !this.canvas.contextTop)) {
          var a = this.canvas.contextTop, h = this.canvas.viewportTransform;
          a.save(), a.transform(h[0], h[1], h[2], h[3], h[4], h[5]), this.transform(a), this._clearTextArea(a), n || a.restore();
        }
      },
      renderCursorOrSelection: function() {
        if (!(!this.isEditing || !this.canvas || !this.canvas.contextTop)) {
          var n = this._getCursorBoundaries(), a = this.canvas.contextTop;
          this.clearContextTop(!0), this.selectionStart === this.selectionEnd ? this.renderCursor(n, a) : this.renderSelection(n, a), a.restore();
        }
      },
      _clearTextArea: function(n) {
        var a = this.width + 4, h = this.height + 4;
        n.clearRect(-a / 2, -h / 2, a, h);
      },
      _getCursorBoundaries: function(n) {
        typeof n > "u" && (n = this.selectionStart);
        var a = this._getLeftOffset(), h = this._getTopOffset(), o = this._getCursorBoundariesOffsets(n);
        return {
          left: a,
          top: h,
          leftOffset: o.left,
          topOffset: o.top
        };
      },
      _getCursorBoundariesOffsets: function(n) {
        if (this.cursorOffsetCache && "top" in this.cursorOffsetCache)
          return this.cursorOffsetCache;
        var a, h, o, u = 0, c = 0, d, m = this.get2DCursorLocation(n);
        o = m.charIndex, h = m.lineIndex;
        for (var p = 0; p < h; p++)
          u += this.getHeightOfLine(p);
        a = this._getLineLeftOffset(h);
        var v = this.__charBounds[h][o];
        return v && (c = v.left), this.charSpacing !== 0 && o === this._textLines[h].length && (c -= this._getWidthOfCharSpacing()), d = {
          top: u,
          left: a + (c > 0 ? c : 0)
        }, this.direction === "rtl" && (d.left *= -1), this.cursorOffsetCache = d, this.cursorOffsetCache;
      },
      renderCursor: function(n, a) {
        var h = this.get2DCursorLocation(), o = h.lineIndex, u = h.charIndex > 0 ? h.charIndex - 1 : 0, c = this.getValueOfPropertyAt(o, u, "fontSize"), d = this.scaleX * this.canvas.getZoom(), m = this.cursorWidth / d, p = n.topOffset, v = this.getValueOfPropertyAt(o, u, "deltaY");
        p += (1 - this._fontSizeFraction) * this.getHeightOfLine(o) / this.lineHeight - c * (1 - this._fontSizeFraction), this.inCompositionMode && this.renderSelection(n, a), a.fillStyle = this.cursorColor || this.getValueOfPropertyAt(o, u, "fill"), a.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, a.fillRect(
          n.left + n.leftOffset - m / 2,
          p + n.top + v,
          m,
          c
        );
      },
      renderSelection: function(n, a) {
        for (var h = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, o = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, u = this.textAlign.indexOf("justify") !== -1, c = this.get2DCursorLocation(h), d = this.get2DCursorLocation(o), m = c.lineIndex, p = d.lineIndex, v = c.charIndex < 0 ? 0 : c.charIndex, b = d.charIndex < 0 ? 0 : d.charIndex, y = m; y <= p; y++) {
          var w = this._getLineLeftOffset(y) || 0, _ = this.getHeightOfLine(y), S = 0, C = 0, k = 0;
          if (y === m && (C = this.__charBounds[m][v].left), y >= m && y < p)
            k = u && !this.isEndOfWrapping(y) ? this.width : this.getLineWidth(y) || 5;
          else if (y === p)
            if (b === 0)
              k = this.__charBounds[p][b].left;
            else {
              var R = this._getWidthOfCharSpacing();
              k = this.__charBounds[p][b - 1].left + this.__charBounds[p][b - 1].width - R;
            }
          S = _, (this.lineHeight < 1 || y === p && this.lineHeight > 1) && (_ /= this.lineHeight);
          var B = n.left + w + C, N = k - C, K = _, ee = 0;
          this.inCompositionMode ? (a.fillStyle = this.compositionColor || "black", K = 1, ee = _) : a.fillStyle = this.selectionColor, this.direction === "rtl" && (B = this.width - B - N), a.fillRect(
            B,
            n.top + n.topOffset + ee,
            N,
            K
          ), n.topOffset += S;
        }
      },
      getCurrentCharFontSize: function() {
        var n = this._getCurrentCharIndex();
        return this.getValueOfPropertyAt(n.l, n.c, "fontSize");
      },
      getCurrentCharColor: function() {
        var n = this._getCurrentCharIndex();
        return this.getValueOfPropertyAt(n.l, n.c, "fill");
      },
      _getCurrentCharIndex: function() {
        var n = this.get2DCursorLocation(this.selectionStart, !0), a = n.charIndex > 0 ? n.charIndex - 1 : 0;
        return { l: n.lineIndex, c: a };
      }
    }), e.IText.fromObject = function(n, a) {
      var h = e.util.stylesFromArray(n.styles, n.text), o = Object.assign({}, n, { styles: h });
      if (l(o), o.styles)
        for (var u in o.styles)
          for (var c in o.styles[u])
            l(o.styles[u][c]);
      e.Object._fromObject("IText", o, a, "text");
    };
  }(), function() {
    var l = e.util.object.clone;
    e.util.object.extend(e.IText.prototype, {
      initBehavior: function() {
        this.initAddedHandler(), this.initRemovedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation(), this.mouseMoveHandler = this.mouseMoveHandler.bind(this);
      },
      onDeselect: function() {
        this.isEditing && this.exitEditing(), this.selected = !1;
      },
      initAddedHandler: function() {
        var n = this;
        this.on("added", function() {
          var a = n.canvas;
          a && (a._hasITextHandlers || (a._hasITextHandlers = !0, n._initCanvasHandlers(a)), a._iTextInstances = a._iTextInstances || [], a._iTextInstances.push(n));
        });
      },
      initRemovedHandler: function() {
        var n = this;
        this.on("removed", function() {
          var a = n.canvas;
          a && (a._iTextInstances = a._iTextInstances || [], e.util.removeFromArray(a._iTextInstances, n), a._iTextInstances.length === 0 && (a._hasITextHandlers = !1, n._removeCanvasHandlers(a)));
        });
      },
      _initCanvasHandlers: function(n) {
        n._mouseUpITextHandler = function() {
          n._iTextInstances && n._iTextInstances.forEach(function(a) {
            a.__isMousedown = !1;
          });
        }, n.on("mouse:up", n._mouseUpITextHandler);
      },
      _removeCanvasHandlers: function(n) {
        n.off("mouse:up", n._mouseUpITextHandler);
      },
      _tick: function() {
        this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete");
      },
      _animateCursor: function(n, a, h, o) {
        var u;
        return u = {
          isAborted: !1,
          abort: function() {
            this.isAborted = !0;
          }
        }, n.animate("_currentCursorOpacity", a, {
          duration: h,
          onComplete: function() {
            u.isAborted || n[o]();
          },
          onChange: function() {
            n.canvas && n.selectionStart === n.selectionEnd && n.renderCursorOrSelection();
          },
          abort: function() {
            return u.isAborted;
          }
        }), u;
      },
      _onTickComplete: function() {
        var n = this;
        this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout(function() {
          n._currentTickCompleteState = n._animateCursor(n, 0, this.cursorDuration / 2, "_tick");
        }, 100);
      },
      initDelayedCursor: function(n) {
        var a = this, h = n ? 0 : this.cursorDelay;
        this.abortCursorAnimation(), this._currentCursorOpacity = 1, this._cursorTimeout2 = setTimeout(function() {
          a._tick();
        }, h);
      },
      abortCursorAnimation: function() {
        var n = this._currentTickState || this._currentTickCompleteState, a = this.canvas;
        this._currentTickState && this._currentTickState.abort(), this._currentTickCompleteState && this._currentTickCompleteState.abort(), clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, n && a && a.clearContext(a.contextTop || a.contextContainer);
      },
      selectAll: function() {
        return this.selectionStart = 0, this.selectionEnd = this._text.length, this._fireSelectionChanged(), this._updateTextarea(), this;
      },
      getSelectedText: function() {
        return this._text.slice(this.selectionStart, this.selectionEnd).join("");
      },
      findWordBoundaryLeft: function(n) {
        var a = 0, h = n - 1;
        if (this._reSpace.test(this._text[h]))
          for (; this._reSpace.test(this._text[h]); )
            a++, h--;
        for (; /\S/.test(this._text[h]) && h > -1; )
          a++, h--;
        return n - a;
      },
      findWordBoundaryRight: function(n) {
        var a = 0, h = n;
        if (this._reSpace.test(this._text[h]))
          for (; this._reSpace.test(this._text[h]); )
            a++, h++;
        for (; /\S/.test(this._text[h]) && h < this._text.length; )
          a++, h++;
        return n + a;
      },
      findLineBoundaryLeft: function(n) {
        for (var a = 0, h = n - 1; !/\n/.test(this._text[h]) && h > -1; )
          a++, h--;
        return n - a;
      },
      findLineBoundaryRight: function(n) {
        for (var a = 0, h = n; !/\n/.test(this._text[h]) && h < this._text.length; )
          a++, h++;
        return n + a;
      },
      searchWordBoundary: function(n, a) {
        for (var h = this._text, o = this._reSpace.test(h[n]) ? n - 1 : n, u = h[o], c = e.reNonWord; !c.test(u) && o > 0 && o < h.length; )
          o += a, u = h[o];
        return c.test(u) && (o += a === 1 ? 0 : 1), o;
      },
      selectWord: function(n) {
        n = n || this.selectionStart;
        var a = this.searchWordBoundary(n, -1), h = this.searchWordBoundary(n, 1);
        this.selectionStart = a, this.selectionEnd = h, this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection();
      },
      selectLine: function(n) {
        n = n || this.selectionStart;
        var a = this.findLineBoundaryLeft(n), h = this.findLineBoundaryRight(n);
        return this.selectionStart = a, this.selectionEnd = h, this._fireSelectionChanged(), this._updateTextarea(), this;
      },
      enterEditing: function(n) {
        if (!(this.isEditing || !this.editable))
          return this.canvas && (this.canvas.calcOffset(), this.exitEditingOnOthers(this.canvas)), this.isEditing = !0, this.initHiddenTextarea(n), this.hiddenTextarea.focus(), this.hiddenTextarea.value = this.text, this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._textBeforeEdit = this.text, this._tick(), this.fire("editing:entered"), this._fireSelectionChanged(), this.canvas ? (this.canvas.fire("text:editing:entered", { target: this }), this.initMouseMoveHandler(), this.canvas.requestRenderAll(), this) : this;
      },
      exitEditingOnOthers: function(n) {
        n._iTextInstances && n._iTextInstances.forEach(function(a) {
          a.selected = !1, a.isEditing && a.exitEditing();
        });
      },
      initMouseMoveHandler: function() {
        this.canvas.on("mouse:move", this.mouseMoveHandler);
      },
      mouseMoveHandler: function(n) {
        if (!(!this.__isMousedown || !this.isEditing)) {
          document.activeElement !== this.hiddenTextarea && this.hiddenTextarea.focus();
          var a = this.getSelectionStartFromPointer(n.e), h = this.selectionStart, o = this.selectionEnd;
          (a !== this.__selectionStartOnMouseDown || h === o) && (h === a || o === a) || (a > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown, this.selectionEnd = a) : (this.selectionStart = a, this.selectionEnd = this.__selectionStartOnMouseDown), (this.selectionStart !== h || this.selectionEnd !== o) && (this.restartCursorIfNeeded(), this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()));
        }
      },
      _setEditingProps: function() {
        this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0;
      },
      fromStringToGraphemeSelection: function(n, a, h) {
        var o = h.slice(0, n), u = e.util.string.graphemeSplit(o).length;
        if (n === a)
          return { selectionStart: u, selectionEnd: u };
        var c = h.slice(n, a), d = e.util.string.graphemeSplit(c).length;
        return { selectionStart: u, selectionEnd: u + d };
      },
      fromGraphemeToStringSelection: function(n, a, h) {
        var o = h.slice(0, n), u = o.join("").length;
        if (n === a)
          return { selectionStart: u, selectionEnd: u };
        var c = h.slice(n, a), d = c.join("").length;
        return { selectionStart: u, selectionEnd: u + d };
      },
      _updateTextarea: function() {
        if (this.cursorOffsetCache = {}, !!this.hiddenTextarea) {
          if (!this.inCompositionMode) {
            var n = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
            this.hiddenTextarea.selectionStart = n.selectionStart, this.hiddenTextarea.selectionEnd = n.selectionEnd;
          }
          this.updateTextareaPosition();
        }
      },
      updateFromTextArea: function() {
        if (!!this.hiddenTextarea) {
          this.cursorOffsetCache = {}, this.text = this.hiddenTextarea.value, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords());
          var n = this.fromStringToGraphemeSelection(
            this.hiddenTextarea.selectionStart,
            this.hiddenTextarea.selectionEnd,
            this.hiddenTextarea.value
          );
          this.selectionEnd = this.selectionStart = n.selectionEnd, this.inCompositionMode || (this.selectionStart = n.selectionStart), this.updateTextareaPosition();
        }
      },
      updateTextareaPosition: function() {
        if (this.selectionStart === this.selectionEnd) {
          var n = this._calcTextareaPosition();
          this.hiddenTextarea.style.left = n.left, this.hiddenTextarea.style.top = n.top;
        }
      },
      _calcTextareaPosition: function() {
        if (!this.canvas)
          return { x: 1, y: 1 };
        var n = this.inCompositionMode ? this.compositionStart : this.selectionStart, a = this._getCursorBoundaries(n), h = this.get2DCursorLocation(n), o = h.lineIndex, u = h.charIndex, c = this.getValueOfPropertyAt(o, u, "fontSize") * this.lineHeight, d = a.leftOffset, m = this.calcTransformMatrix(), p = {
          x: a.left + d,
          y: a.top + a.topOffset + c
        }, v = this.canvas.getRetinaScaling(), b = this.canvas.upperCanvasEl, y = b.width / v, w = b.height / v, _ = y - c, S = w - c, C = b.clientWidth / y, k = b.clientHeight / w;
        return p = e.util.transformPoint(p, m), p = e.util.transformPoint(p, this.canvas.viewportTransform), p.x *= C, p.y *= k, p.x < 0 && (p.x = 0), p.x > _ && (p.x = _), p.y < 0 && (p.y = 0), p.y > S && (p.y = S), p.x += this.canvas._offset.left, p.y += this.canvas._offset.top, { left: p.x + "px", top: p.y + "px", fontSize: c + "px", charHeight: c };
      },
      _saveEditingProps: function() {
        this._savedProps = {
          hasControls: this.hasControls,
          borderColor: this.borderColor,
          lockMovementX: this.lockMovementX,
          lockMovementY: this.lockMovementY,
          hoverCursor: this.hoverCursor,
          selectable: this.selectable,
          defaultCursor: this.canvas && this.canvas.defaultCursor,
          moveCursor: this.canvas && this.canvas.moveCursor
        };
      },
      _restoreEditingProps: function() {
        !this._savedProps || (this.hoverCursor = this._savedProps.hoverCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.selectable = this._savedProps.selectable, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor));
      },
      exitEditing: function() {
        var n = this._textBeforeEdit !== this.text, a = this.hiddenTextarea;
        return this.selected = !1, this.isEditing = !1, this.selectionEnd = this.selectionStart, a && (a.blur && a.blur(), a.parentNode && a.parentNode.removeChild(a)), this.hiddenTextarea = null, this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this.fire("editing:exited"), n && this.fire("modified"), this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler), this.canvas.fire("text:editing:exited", { target: this }), n && this.canvas.fire("object:modified", { target: this })), this;
      },
      _removeExtraneousStyles: function() {
        for (var n in this.styles)
          this._textLines[n] || delete this.styles[n];
      },
      removeStyleFromTo: function(n, a) {
        var h = this.get2DCursorLocation(n, !0), o = this.get2DCursorLocation(a, !0), u = h.lineIndex, c = h.charIndex, d = o.lineIndex, m = o.charIndex, p, v;
        if (u !== d) {
          if (this.styles[u])
            for (p = c; p < this._unwrappedTextLines[u].length; p++)
              delete this.styles[u][p];
          if (this.styles[d])
            for (p = m; p < this._unwrappedTextLines[d].length; p++)
              v = this.styles[d][p], v && (this.styles[u] || (this.styles[u] = {}), this.styles[u][c + p - m] = v);
          for (p = u + 1; p <= d; p++)
            delete this.styles[p];
          this.shiftLineStyles(d, u - d);
        } else if (this.styles[u]) {
          v = this.styles[u];
          var b = m - c, y, w;
          for (p = c; p < m; p++)
            delete v[p];
          for (w in this.styles[u])
            y = parseInt(w, 10), y >= m && (v[y - b] = v[w], delete v[w]);
        }
      },
      shiftLineStyles: function(n, a) {
        var h = l(this.styles);
        for (var o in this.styles) {
          var u = parseInt(o, 10);
          u > n && (this.styles[u + a] = h[u], h[u - a] || delete this.styles[u]);
        }
      },
      restartCursorIfNeeded: function() {
        (!this._currentTickState || this._currentTickState.isAborted || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted) && this.initDelayedCursor();
      },
      insertNewlineStyleObject: function(n, a, h, o) {
        var u, c = {}, d = !1, m = this._unwrappedTextLines[n].length === a;
        h || (h = 1), this.shiftLineStyles(n, h), this.styles[n] && (u = this.styles[n][a === 0 ? a : a - 1]);
        for (var p in this.styles[n]) {
          var v = parseInt(p, 10);
          v >= a && (d = !0, c[v - a] = this.styles[n][p], m && a === 0 || delete this.styles[n][p]);
        }
        var b = !1;
        for (d && !m && (this.styles[n + h] = c, b = !0), b && h--; h > 0; )
          o && o[h - 1] ? this.styles[n + h] = { 0: l(o[h - 1]) } : u ? this.styles[n + h] = { 0: l(u) } : delete this.styles[n + h], h--;
        this._forceClearCache = !0;
      },
      insertCharStyleObject: function(n, a, h, o) {
        this.styles || (this.styles = {});
        var u = this.styles[n], c = u ? l(u) : {};
        h || (h = 1);
        for (var d in c) {
          var m = parseInt(d, 10);
          m >= a && (u[m + h] = c[m], c[m - h] || delete u[m]);
        }
        if (this._forceClearCache = !0, o) {
          for (; h--; )
            !Object.keys(o[h]).length || (this.styles[n] || (this.styles[n] = {}), this.styles[n][a + h] = l(o[h]));
          return;
        }
        if (!!u)
          for (var p = u[a ? a - 1 : 1]; p && h--; )
            this.styles[n][a + h] = l(p);
      },
      insertNewStyleBlock: function(n, a, h) {
        for (var o = this.get2DCursorLocation(a, !0), u = [0], c = 0, d = 0; d < n.length; d++)
          n[d] === `
` ? (c++, u[c] = 0) : u[c]++;
        u[0] > 0 && (this.insertCharStyleObject(o.lineIndex, o.charIndex, u[0], h), h = h && h.slice(u[0] + 1)), c && this.insertNewlineStyleObject(
          o.lineIndex,
          o.charIndex + u[0],
          c
        );
        for (var d = 1; d < c; d++)
          u[d] > 0 ? this.insertCharStyleObject(o.lineIndex + d, 0, u[d], h) : h && this.styles[o.lineIndex + d] && h[0] && (this.styles[o.lineIndex + d][0] = h[0]), h = h && h.slice(u[d] + 1);
        u[d] > 0 && this.insertCharStyleObject(o.lineIndex + d, 0, u[d], h);
      },
      setSelectionStartEndWithShift: function(n, a, h) {
        h <= n ? (a === n ? this._selectionDirection = "left" : this._selectionDirection === "right" && (this._selectionDirection = "left", this.selectionEnd = n), this.selectionStart = h) : h > n && h < a ? this._selectionDirection === "right" ? this.selectionEnd = h : this.selectionStart = h : (a === n ? this._selectionDirection = "right" : this._selectionDirection === "left" && (this._selectionDirection = "right", this.selectionStart = a), this.selectionEnd = h);
      },
      setSelectionInBoundaries: function() {
        var n = this.text.length;
        this.selectionStart > n ? this.selectionStart = n : this.selectionStart < 0 && (this.selectionStart = 0), this.selectionEnd > n ? this.selectionEnd = n : this.selectionEnd < 0 && (this.selectionEnd = 0);
      }
    });
  }(), e.util.object.extend(e.IText.prototype, {
    initDoubleClickSimulation: function() {
      this.__lastClickTime = +new Date(), this.__lastLastClickTime = +new Date(), this.__lastPointer = {}, this.on("mousedown", this.onMouseDown);
    },
    onMouseDown: function(l) {
      if (!!this.canvas) {
        this.__newClickTime = +new Date();
        var n = l.pointer;
        this.isTripleClick(n) && (this.fire("tripleclick", l), this._stopEvent(l.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = n, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected;
      }
    },
    isTripleClick: function(l) {
      return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === l.x && this.__lastPointer.y === l.y;
    },
    _stopEvent: function(l) {
      l.preventDefault && l.preventDefault(), l.stopPropagation && l.stopPropagation();
    },
    initCursorSelectionHandlers: function() {
      this.initMousedownHandler(), this.initMouseupHandler(), this.initClicks();
    },
    doubleClickHandler: function(l) {
      !this.isEditing || this.selectWord(this.getSelectionStartFromPointer(l.e));
    },
    tripleClickHandler: function(l) {
      !this.isEditing || this.selectLine(this.getSelectionStartFromPointer(l.e));
    },
    initClicks: function() {
      this.on("mousedblclick", this.doubleClickHandler), this.on("tripleclick", this.tripleClickHandler);
    },
    _mouseDownHandler: function(l) {
      !this.canvas || !this.editable || l.e.button && l.e.button !== 1 || (this.__isMousedown = !0, this.selected && (this.inCompositionMode = !1, this.setCursorByClick(l.e)), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.selectionStart === this.selectionEnd && this.abortCursorAnimation(), this.renderCursorOrSelection()));
    },
    _mouseDownHandlerBefore: function(l) {
      !this.canvas || !this.editable || l.e.button && l.e.button !== 1 || (this.selected = this === this.canvas._activeObject);
    },
    initMousedownHandler: function() {
      this.on("mousedown", this._mouseDownHandler), this.on("mousedown:before", this._mouseDownHandlerBefore);
    },
    initMouseupHandler: function() {
      this.on("mouseup", this.mouseUpHandler);
    },
    mouseUpHandler: function(l) {
      if (this.__isMousedown = !1, !(!this.editable || this.group || l.transform && l.transform.actionPerformed || l.e.button && l.e.button !== 1)) {
        if (this.canvas) {
          var n = this.canvas._activeObject;
          if (n && n !== this)
            return;
        }
        this.__lastSelected && !this.__corner ? (this.selected = !1, this.__lastSelected = !1, this.enterEditing(l.e), this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()) : this.selected = !0;
      }
    },
    setCursorByClick: function(l) {
      var n = this.getSelectionStartFromPointer(l), a = this.selectionStart, h = this.selectionEnd;
      l.shiftKey ? this.setSelectionStartEndWithShift(a, h, n) : (this.selectionStart = n, this.selectionEnd = n), this.isEditing && (this._fireSelectionChanged(), this._updateTextarea());
    },
    getSelectionStartFromPointer: function(l) {
      for (var n = this.getLocalPointer(l), a = 0, h = 0, o = 0, u = 0, c = 0, d, m, p = 0, v = this._textLines.length; p < v && o <= n.y; p++)
        o += this.getHeightOfLine(p) * this.scaleY, c = p, p > 0 && (u += this._textLines[p - 1].length + this.missingNewlineOffset(p - 1));
      d = this._getLineLeftOffset(c), h = d * this.scaleX, m = this._textLines[c], this.direction === "rtl" && (n.x = this.width * this.scaleX - n.x + h);
      for (var b = 0, y = m.length; b < y && (a = h, h += this.__charBounds[c][b].kernedWidth * this.scaleX, h <= n.x); b++)
        u++;
      return this._getNewSelectionStartFromOffset(n, a, h, u, y);
    },
    _getNewSelectionStartFromOffset: function(l, n, a, h, o) {
      var u = l.x - n, c = a - l.x, d = c > u || c < 0 ? 0 : 1, m = h + d;
      return this.flipX && (m = o - m), m > this._text.length && (m = this._text.length), m;
    }
  }), e.util.object.extend(e.IText.prototype, {
    initHiddenTextarea: function() {
      this.hiddenTextarea = e.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.setAttribute("autocorrect", "off"), this.hiddenTextarea.setAttribute("autocomplete", "off"), this.hiddenTextarea.setAttribute("spellcheck", "false"), this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""), this.hiddenTextarea.setAttribute("wrap", "off");
      var l = this._calcTextareaPosition();
      this.hiddenTextarea.style.cssText = "position: absolute; top: " + l.top + "; left: " + l.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: " + l.fontSize + ";", this.hiddenTextareaContainer ? this.hiddenTextareaContainer.appendChild(this.hiddenTextarea) : e.document.body.appendChild(this.hiddenTextarea), e.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), e.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)), e.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)), e.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), e.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)), e.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)), e.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)), e.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)), e.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)), !this._clickHandlerInitialized && this.canvas && (e.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)), this._clickHandlerInitialized = !0);
    },
    keysMap: {
      9: "exitEditing",
      27: "exitEditing",
      33: "moveCursorUp",
      34: "moveCursorDown",
      35: "moveCursorRight",
      36: "moveCursorLeft",
      37: "moveCursorLeft",
      38: "moveCursorUp",
      39: "moveCursorRight",
      40: "moveCursorDown"
    },
    keysMapRtl: {
      9: "exitEditing",
      27: "exitEditing",
      33: "moveCursorUp",
      34: "moveCursorDown",
      35: "moveCursorLeft",
      36: "moveCursorRight",
      37: "moveCursorRight",
      38: "moveCursorUp",
      39: "moveCursorLeft",
      40: "moveCursorDown"
    },
    ctrlKeysMapUp: {
      67: "copy",
      88: "cut"
    },
    ctrlKeysMapDown: {
      65: "selectAll"
    },
    onClick: function() {
      this.hiddenTextarea && this.hiddenTextarea.focus();
    },
    onKeyDown: function(l) {
      if (!!this.isEditing) {
        var n = this.direction === "rtl" ? this.keysMapRtl : this.keysMap;
        if (l.keyCode in n)
          this[n[l.keyCode]](l);
        else if (l.keyCode in this.ctrlKeysMapDown && (l.ctrlKey || l.metaKey))
          this[this.ctrlKeysMapDown[l.keyCode]](l);
        else
          return;
        l.stopImmediatePropagation(), l.preventDefault(), l.keyCode >= 33 && l.keyCode <= 40 ? (this.inCompositionMode = !1, this.clearContextTop(), this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll();
      }
    },
    onKeyUp: function(l) {
      if (!this.isEditing || this._copyDone || this.inCompositionMode) {
        this._copyDone = !1;
        return;
      }
      if (l.keyCode in this.ctrlKeysMapUp && (l.ctrlKey || l.metaKey))
        this[this.ctrlKeysMapUp[l.keyCode]](l);
      else
        return;
      l.stopImmediatePropagation(), l.preventDefault(), this.canvas && this.canvas.requestRenderAll();
    },
    onInput: function(l) {
      var n = this.fromPaste;
      if (this.fromPaste = !1, l && l.stopPropagation(), !!this.isEditing) {
        var a = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText, h = this._text.length, o = a.length, u, c, d = o - h, m = this.selectionStart, p = this.selectionEnd, v = m !== p, b, y, w;
        if (this.hiddenTextarea.value === "") {
          this.styles = {}, this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", { target: this }), this.canvas.requestRenderAll());
          return;
        }
        var _ = this.fromStringToGraphemeSelection(
          this.hiddenTextarea.selectionStart,
          this.hiddenTextarea.selectionEnd,
          this.hiddenTextarea.value
        ), S = m > _.selectionStart;
        v ? (u = this._text.slice(m, p), d += p - m) : o < h && (S ? u = this._text.slice(p + d, p) : u = this._text.slice(m, m - d)), c = a.slice(_.selectionEnd - d, _.selectionEnd), u && u.length && (c.length && (b = this.getSelectionStyles(m, m + 1, !1), b = c.map(function() {
          return b[0];
        })), v ? (y = m, w = p) : S ? (y = p - u.length, w = p) : (y = p, w = p + u.length), this.removeStyleFromTo(y, w)), c.length && (n && c.join("") === e.copiedText && !e.disableStyleCopyPaste && (b = e.copiedTextStyle), this.insertNewStyleBlock(c, m, b)), this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", { target: this }), this.canvas.requestRenderAll());
      }
    },
    onCompositionStart: function() {
      this.inCompositionMode = !0;
    },
    onCompositionEnd: function() {
      this.inCompositionMode = !1;
    },
    onCompositionUpdate: function(l) {
      this.compositionStart = l.target.selectionStart, this.compositionEnd = l.target.selectionEnd, this.updateTextareaPosition();
    },
    copy: function() {
      this.selectionStart !== this.selectionEnd && (e.copiedText = this.getSelectedText(), e.disableStyleCopyPaste ? e.copiedTextStyle = null : e.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0), this._copyDone = !0);
    },
    paste: function() {
      this.fromPaste = !0;
    },
    _getClipboardData: function(l) {
      return l && l.clipboardData || e.window.clipboardData;
    },
    _getWidthBeforeCursor: function(l, n) {
      var a = this._getLineLeftOffset(l), h;
      return n > 0 && (h = this.__charBounds[l][n - 1], a += h.left + h.width), a;
    },
    getDownCursorOffset: function(l, n) {
      var a = this._getSelectionForOffset(l, n), h = this.get2DCursorLocation(a), o = h.lineIndex;
      if (o === this._textLines.length - 1 || l.metaKey || l.keyCode === 34)
        return this._text.length - a;
      var u = h.charIndex, c = this._getWidthBeforeCursor(o, u), d = this._getIndexOnLine(o + 1, c), m = this._textLines[o].slice(u);
      return m.length + d + 1 + this.missingNewlineOffset(o);
    },
    _getSelectionForOffset: function(l, n) {
      return l.shiftKey && this.selectionStart !== this.selectionEnd && n ? this.selectionEnd : this.selectionStart;
    },
    getUpCursorOffset: function(l, n) {
      var a = this._getSelectionForOffset(l, n), h = this.get2DCursorLocation(a), o = h.lineIndex;
      if (o === 0 || l.metaKey || l.keyCode === 33)
        return -a;
      var u = h.charIndex, c = this._getWidthBeforeCursor(o, u), d = this._getIndexOnLine(o - 1, c), m = this._textLines[o].slice(0, u), p = this.missingNewlineOffset(o - 1);
      return -this._textLines[o - 1].length + d - m.length + (1 - p);
    },
    _getIndexOnLine: function(l, n) {
      for (var a = this._textLines[l], h = this._getLineLeftOffset(l), o = h, u = 0, c, d, m = 0, p = a.length; m < p; m++)
        if (c = this.__charBounds[l][m].width, o += c, o > n) {
          d = !0;
          var v = o - c, b = o, y = Math.abs(v - n), w = Math.abs(b - n);
          u = w < y ? m : m - 1;
          break;
        }
      return d || (u = a.length - 1), u;
    },
    moveCursorDown: function(l) {
      this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", l);
    },
    moveCursorUp: function(l) {
      this.selectionStart === 0 && this.selectionEnd === 0 || this._moveCursorUpOrDown("Up", l);
    },
    _moveCursorUpOrDown: function(l, n) {
      var a = "get" + l + "CursorOffset", h = this[a](n, this._selectionDirection === "right");
      n.shiftKey ? this.moveCursorWithShift(h) : this.moveCursorWithoutShift(h), h !== 0 && (this.setSelectionInBoundaries(), this.abortCursorAnimation(), this._currentCursorOpacity = 1, this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea());
    },
    moveCursorWithShift: function(l) {
      var n = this._selectionDirection === "left" ? this.selectionStart + l : this.selectionEnd + l;
      return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, n), l !== 0;
    },
    moveCursorWithoutShift: function(l) {
      return l < 0 ? (this.selectionStart += l, this.selectionEnd = this.selectionStart) : (this.selectionEnd += l, this.selectionStart = this.selectionEnd), l !== 0;
    },
    moveCursorLeft: function(l) {
      this.selectionStart === 0 && this.selectionEnd === 0 || this._moveCursorLeftOrRight("Left", l);
    },
    _move: function(l, n, a) {
      var h;
      if (l.altKey)
        h = this["findWordBoundary" + a](this[n]);
      else if (l.metaKey || l.keyCode === 35 || l.keyCode === 36)
        h = this["findLineBoundary" + a](this[n]);
      else
        return this[n] += a === "Left" ? -1 : 1, !0;
      if (typeof h < "u" && this[n] !== h)
        return this[n] = h, !0;
    },
    _moveLeft: function(l, n) {
      return this._move(l, n, "Left");
    },
    _moveRight: function(l, n) {
      return this._move(l, n, "Right");
    },
    moveCursorLeftWithoutShift: function(l) {
      var n = !0;
      return this._selectionDirection = "left", this.selectionEnd === this.selectionStart && this.selectionStart !== 0 && (n = this._moveLeft(l, "selectionStart")), this.selectionEnd = this.selectionStart, n;
    },
    moveCursorLeftWithShift: function(l) {
      if (this._selectionDirection === "right" && this.selectionStart !== this.selectionEnd)
        return this._moveLeft(l, "selectionEnd");
      if (this.selectionStart !== 0)
        return this._selectionDirection = "left", this._moveLeft(l, "selectionStart");
    },
    moveCursorRight: function(l) {
      this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", l);
    },
    _moveCursorLeftOrRight: function(l, n) {
      var a = "moveCursor" + l + "With";
      this._currentCursorOpacity = 1, n.shiftKey ? a += "Shift" : a += "outShift", this[a](n) && (this.abortCursorAnimation(), this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea());
    },
    moveCursorRightWithShift: function(l) {
      if (this._selectionDirection === "left" && this.selectionStart !== this.selectionEnd)
        return this._moveRight(l, "selectionStart");
      if (this.selectionEnd !== this._text.length)
        return this._selectionDirection = "right", this._moveRight(l, "selectionEnd");
    },
    moveCursorRightWithoutShift: function(l) {
      var n = !0;
      return this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (n = this._moveRight(l, "selectionStart"), this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd, n;
    },
    removeChars: function(l, n) {
      typeof n > "u" && (n = l + 1), this.removeStyleFromTo(l, n), this._text.splice(l, n - l), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles();
    },
    insertChars: function(l, n, a, h) {
      typeof h > "u" && (h = a), h > a && this.removeStyleFromTo(a, h);
      var o = e.util.string.graphemeSplit(l);
      this.insertNewStyleBlock(o, a, n), this._text = [].concat(this._text.slice(0, a), o, this._text.slice(h)), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles();
    }
  }), function() {
    var l = e.util.toFixed, n = /  +/g;
    e.util.object.extend(e.Text.prototype, {
      _toSVG: function() {
        var a = this._getSVGLeftTopOffsets(), h = this._getSVGTextAndBg(a.textTop, a.textLeft);
        return this._wrapSVGTextAndBg(h);
      },
      toSVG: function(a) {
        return this._createBaseSVGMarkup(
          this._toSVG(),
          { reviver: a, noStyle: !0, withShadow: !0 }
        );
      },
      _getSVGLeftTopOffsets: function() {
        return {
          textLeft: -this.width / 2,
          textTop: -this.height / 2,
          lineTop: this.getHeightOfLine(0)
        };
      },
      _wrapSVGTextAndBg: function(a) {
        var h = !0, o = this.getSvgTextDecoration(this);
        return [
          a.textBgRects.join(""),
          '		<text xml:space="preserve" ',
          this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "",
          this.fontSize ? 'font-size="' + this.fontSize + '" ' : "",
          this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "",
          this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "",
          o ? 'text-decoration="' + o + '" ' : "",
          'style="',
          this.getSvgStyles(h),
          '"',
          this.addPaintOrder(),
          " >",
          a.textSpans.join(""),
          `</text>
`
        ];
      },
      _getSVGTextAndBg: function(a, h) {
        var o = [], u = [], c = a, d;
        this._setSVGBg(u);
        for (var m = 0, p = this._textLines.length; m < p; m++)
          d = this._getLineLeftOffset(m), (this.textBackgroundColor || this.styleHas("textBackgroundColor", m)) && this._setSVGTextLineBg(u, m, h + d, c), this._setSVGTextLineText(o, m, h + d, c), c += this.getHeightOfLine(m);
        return {
          textSpans: o,
          textBgRects: u
        };
      },
      _createTextCharSpan: function(a, h, o, u) {
        var c = a !== a.trim() || a.match(n), d = this.getSvgSpanStyles(h, c), m = d ? 'style="' + d + '"' : "", p = h.deltaY, v = "", b = e.Object.NUM_FRACTION_DIGITS;
        return p && (v = ' dy="' + l(p, b) + '" '), [
          '<tspan x="',
          l(o, b),
          '" y="',
          l(u, b),
          '" ',
          v,
          m,
          ">",
          e.util.string.escapeXml(a),
          "</tspan>"
        ].join("");
      },
      _setSVGTextLineText: function(a, h, o, u) {
        var c = this.getHeightOfLine(h), d = this.textAlign.indexOf("justify") !== -1, m, p, v = "", b, y, w = 0, _ = this._textLines[h], S;
        u += c * (1 - this._fontSizeFraction) / this.lineHeight;
        for (var C = 0, k = _.length - 1; C <= k; C++)
          S = C === k || this.charSpacing, v += _[C], b = this.__charBounds[h][C], w === 0 ? (o += b.kernedWidth - b.width, w += b.width) : w += b.kernedWidth, d && !S && this._reSpaceAndTab.test(_[C]) && (S = !0), S || (m = m || this.getCompleteStyleDeclaration(h, C), p = this.getCompleteStyleDeclaration(h, C + 1), S = e.util.hasStyleChanged(m, p, !0)), S && (y = this._getStyleDeclaration(h, C) || {}, a.push(this._createTextCharSpan(v, y, o, u)), v = "", m = p, o += w, w = 0);
      },
      _pushTextBgRect: function(a, h, o, u, c, d) {
        var m = e.Object.NUM_FRACTION_DIGITS;
        a.push(
          "		<rect ",
          this._getFillAttributes(h),
          ' x="',
          l(o, m),
          '" y="',
          l(u, m),
          '" width="',
          l(c, m),
          '" height="',
          l(d, m),
          `"></rect>
`
        );
      },
      _setSVGTextLineBg: function(a, h, o, u) {
        for (var c = this._textLines[h], d = this.getHeightOfLine(h) / this.lineHeight, m = 0, p = 0, v, b, y = this.getValueOfPropertyAt(h, 0, "textBackgroundColor"), w = 0, _ = c.length; w < _; w++)
          v = this.__charBounds[h][w], b = this.getValueOfPropertyAt(h, w, "textBackgroundColor"), b !== y ? (y && this._pushTextBgRect(
            a,
            y,
            o + p,
            u,
            m,
            d
          ), p = v.left, m = v.width, y = b) : m += v.kernedWidth;
        b && this._pushTextBgRect(
          a,
          b,
          o + p,
          u,
          m,
          d
        );
      },
      _getFillAttributes: function(a) {
        var h = a && typeof a == "string" ? new e.Color(a) : "";
        return !h || !h.getSource() || h.getAlpha() === 1 ? 'fill="' + a + '"' : 'opacity="' + h.getAlpha() + '" fill="' + h.setAlpha(1).toRgb() + '"';
      },
      _getSVGLineTopOffset: function(a) {
        for (var h = 0, o = 0, u = 0; u < a; u++)
          h += this.getHeightOfLine(u);
        return o = this.getHeightOfLine(u), {
          lineTop: h,
          offset: (this._fontSizeMult - this._fontSizeFraction) * o / (this.lineHeight * this._fontSizeMult)
        };
      },
      getSvgStyles: function(a) {
        var h = e.Object.prototype.getSvgStyles.call(this, a);
        return h + " white-space: pre;";
      }
    });
  }(), function(l) {
    var n = l.fabric || (l.fabric = {});
    n.Textbox = n.util.createClass(n.IText, n.Observable, {
      type: "textbox",
      minWidth: 20,
      dynamicMinWidth: 2,
      __cachedLines: null,
      lockScalingFlip: !0,
      noScaleCache: !1,
      _dimensionAffectingProps: n.Text.prototype._dimensionAffectingProps.concat("width"),
      _wordJoiners: /[ \t\r]/,
      splitByGrapheme: !1,
      initDimensions: function() {
        this.__skipDimension || (this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this._clearCache(), this.dynamicMinWidth = 0, this._styleMap = this._generateStyleMap(this._splitText()), this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth), this.textAlign.indexOf("justify") !== -1 && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({ propertySet: "_dimensionAffectingProps" }));
      },
      _generateStyleMap: function(a) {
        for (var h = 0, o = 0, u = 0, c = {}, d = 0; d < a.graphemeLines.length; d++)
          a.graphemeText[u] === `
` && d > 0 ? (o = 0, u++, h++) : !this.splitByGrapheme && this._reSpaceAndTab.test(a.graphemeText[u]) && d > 0 && (o++, u++), c[d] = { line: h, offset: o }, u += a.graphemeLines[d].length, o += a.graphemeLines[d].length;
        return c;
      },
      styleHas: function(a, h) {
        if (this._styleMap && !this.isWrapping) {
          var o = this._styleMap[h];
          o && (h = o.line);
        }
        return n.Text.prototype.styleHas.call(this, a, h);
      },
      isEmptyStyles: function(a) {
        if (!this.styles)
          return !0;
        var h = 0, o = a + 1, u, c, d = !1, m = this._styleMap[a], p = this._styleMap[a + 1];
        m && (a = m.line, h = m.offset), p && (o = p.line, d = o === a, u = p.offset), c = typeof a > "u" ? this.styles : { line: this.styles[a] };
        for (var v in c)
          for (var b in c[v])
            if (b >= h && (!d || b < u))
              for (var y in c[v][b])
                return !1;
        return !0;
      },
      _getStyleDeclaration: function(a, h) {
        if (this._styleMap && !this.isWrapping) {
          var o = this._styleMap[a];
          if (!o)
            return null;
          a = o.line, h = o.offset + h;
        }
        return this.callSuper("_getStyleDeclaration", a, h);
      },
      _setStyleDeclaration: function(a, h, o) {
        var u = this._styleMap[a];
        a = u.line, h = u.offset + h, this.styles[a][h] = o;
      },
      _deleteStyleDeclaration: function(a, h) {
        var o = this._styleMap[a];
        a = o.line, h = o.offset + h, delete this.styles[a][h];
      },
      _getLineStyle: function(a) {
        var h = this._styleMap[a];
        return !!this.styles[h.line];
      },
      _setLineStyle: function(a) {
        var h = this._styleMap[a];
        this.styles[h.line] = {};
      },
      _wrapText: function(a, h) {
        var o = [], u;
        for (this.isWrapping = !0, u = 0; u < a.length; u++)
          o = o.concat(this._wrapLine(a[u], u, h));
        return this.isWrapping = !1, o;
      },
      _measureWord: function(a, h, o) {
        var u = 0, c, d = !0;
        o = o || 0;
        for (var m = 0, p = a.length; m < p; m++) {
          var v = this._getGraphemeBox(a[m], h, m + o, c, d);
          u += v.kernedWidth, c = a[m];
        }
        return u;
      },
      _wrapLine: function(a, h, o, B) {
        var c = 0, d = this.splitByGrapheme, m = [], p = [], v = d ? n.util.string.graphemeSplit(a) : a.split(this._wordJoiners), b = "", y = 0, w = d ? "" : " ", _ = 0, S = 0, C = 0, k = !0, R = this._getWidthOfCharSpacing(), B = B || 0;
        v.length === 0 && v.push([]), o -= B;
        for (var N = 0; N < v.length; N++)
          b = d ? v[N] : n.util.string.graphemeSplit(v[N]), _ = this._measureWord(b, h, y), y += b.length, c += S + _ - R, c > o && !k ? (m.push(p), p = [], c = _, k = !0) : c += R, !k && !d && p.push(w), p = p.concat(b), S = d ? 0 : this._measureWord([w], h, y), y++, k = !1, _ > C && (C = _);
        return N && m.push(p), C + B > this.dynamicMinWidth && (this.dynamicMinWidth = C - R + B), m;
      },
      isEndOfWrapping: function(a) {
        return !this._styleMap[a + 1] || this._styleMap[a + 1].line !== this._styleMap[a].line;
      },
      missingNewlineOffset: function(a) {
        return this.splitByGrapheme ? this.isEndOfWrapping(a) ? 1 : 0 : 1;
      },
      _splitTextIntoLines: function(a) {
        for (var h = n.Text.prototype._splitTextIntoLines.call(this, a), o = this._wrapText(h.lines, this.width), u = new Array(o.length), c = 0; c < o.length; c++)
          u[c] = o[c].join("");
        return h.lines = u, h.graphemeLines = o, h;
      },
      getMinWidth: function() {
        return Math.max(this.minWidth, this.dynamicMinWidth);
      },
      _removeExtraneousStyles: function() {
        var a = {};
        for (var h in this._styleMap)
          this._textLines[h] && (a[this._styleMap[h].line] = 1);
        for (var h in this.styles)
          a[h] || delete this.styles[h];
      },
      toObject: function(a) {
        return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(a));
      }
    }), n.Textbox.fromObject = function(a, h) {
      var o = n.util.stylesFromArray(a.styles, a.text), u = Object.assign({}, a, { styles: o });
      return n.Object._fromObject("Textbox", u, h, "text");
    };
  }(t), function() {
    var l = e.controlsUtils, n = l.scaleSkewCursorStyleHandler, a = l.scaleCursorStyleHandler, h = l.scalingEqually, o = l.scalingYOrSkewingX, u = l.scalingXOrSkewingY, c = l.scaleOrSkewActionName, d = e.Object.prototype.controls;
    if (d.ml = new e.Control({
      x: -0.5,
      y: 0,
      cursorStyleHandler: n,
      actionHandler: u,
      getActionName: c
    }), d.mr = new e.Control({
      x: 0.5,
      y: 0,
      cursorStyleHandler: n,
      actionHandler: u,
      getActionName: c
    }), d.mb = new e.Control({
      x: 0,
      y: 0.5,
      cursorStyleHandler: n,
      actionHandler: o,
      getActionName: c
    }), d.mt = new e.Control({
      x: 0,
      y: -0.5,
      cursorStyleHandler: n,
      actionHandler: o,
      getActionName: c
    }), d.tl = new e.Control({
      x: -0.5,
      y: -0.5,
      cursorStyleHandler: a,
      actionHandler: h
    }), d.tr = new e.Control({
      x: 0.5,
      y: -0.5,
      cursorStyleHandler: a,
      actionHandler: h
    }), d.bl = new e.Control({
      x: -0.5,
      y: 0.5,
      cursorStyleHandler: a,
      actionHandler: h
    }), d.br = new e.Control({
      x: 0.5,
      y: 0.5,
      cursorStyleHandler: a,
      actionHandler: h
    }), d.mtr = new e.Control({
      x: 0,
      y: -0.5,
      actionHandler: l.rotationWithSnapping,
      cursorStyleHandler: l.rotationStyleHandler,
      offsetY: -40,
      withConnection: !0,
      actionName: "rotate"
    }), e.Textbox) {
      var m = e.Textbox.prototype.controls = {};
      m.mtr = d.mtr, m.tr = d.tr, m.br = d.br, m.tl = d.tl, m.bl = d.bl, m.mt = d.mt, m.mb = d.mb, m.mr = new e.Control({
        x: 0.5,
        y: 0,
        actionHandler: l.changeWidth,
        cursorStyleHandler: n,
        actionName: "resizing"
      }), m.ml = new e.Control({
        x: -0.5,
        y: 0,
        actionHandler: l.changeWidth,
        cursorStyleHandler: n,
        actionName: "resizing"
      });
    }
  }();
})(ye);
const Cp = {
  lockScalingFlip: !0,
  originY: "center",
  originX: "center",
  lockMovementX: !0,
  lockMovementY: !0,
  borderColor: "transparent"
};
function zc(t = 36) {
  let e = "";
  const i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  for (let r = 0; r < t; r += 1)
    e += i.charAt(Math.floor(Math.random() * i.length));
  return e;
}
function N_(t) {
  var g;
  const e = new ye.fabric.Canvas(t, { width: 1, height: 1 });
  e.preserveObjectStacking = !0, e.selection = !1, e.renderOnAddRemove = !1;
  const i = O().config.textureSize;
  i && (ye.fabric.textureSize = i);
  const s = {
    ...(g = O().config.objectDefaults) == null ? void 0 : g.global,
    ...Cp
  };
  Object.keys(s).forEach((l) => {
    ye.fabric.Object.prototype[l] = s[l];
  }), e.on("object:added", (l) => {
    var n, a;
    l.target && !((a = (n = l.target) == null ? void 0 : n.data) != null && a.id) && (l.target.data || (l.target.data = {}), l.target.data.id = zc(10));
  });
  const f = ye.fabric.Object.prototype.controls;
  return Object.keys(f).forEach((l) => {
    delete f[l];
  }), e;
}
let _n = null;
function yr(t) {
  _n = t;
}
class V_ {
  constructor() {
    Se(this, "maxZoom", 2);
    Se(this, "minZoom", 1);
    Se(this, "step", 0.05);
    this.allowUserZoom && this.bindMouseWheel(), oe.subscribe(
      (e) => e.stageSize,
      () => {
        setTimeout(() => {
          this.fitToScreen();
        }, 1);
      }
    );
  }
  get allowUserZoom() {
    var e, i, r, s;
    return (s = (r = (i = (e = O().config) == null ? void 0 : e.tools) == null ? void 0 : i.zoom) == null ? void 0 : r.allowUserZoom) != null ? s : !0;
  }
  get currentZoom() {
    return O().zoom;
  }
  zoomIn(e = this.step) {
    this.set(this.currentZoom + e);
  }
  canZoomIn(e = this.step) {
    return this.currentZoom + e <= this.maxZoom;
  }
  canZoomOut(e = this.step) {
    return this.currentZoom - e >= this.minZoom;
  }
  zoomOut(e = this.step) {
    this.set(this.currentZoom - e);
  }
  set(e, i = !0) {
    if (e < this.minZoom || e > this.maxZoom)
      return;
    const r = Yo.round(O().original.width * e, 0), s = Yo.round(O().original.height * e, 0);
    he().setZoom(e), i && he().setDimensions({ width: r, height: s }), O().setZoom(e);
  }
  fitToScreen() {
    var f, g;
    if (!((g = (f = O().config.tools) == null ? void 0 : f.zoom) != null && g.fitImageToScreen))
      return;
    const { width: e, height: i } = O().stageSize, r = Math.max(i, 1), s = Math.max(e, 1);
    if (O().original.height > r || O().original.width > s) {
      const l = Math.min(
        r / O().original.height,
        s / O().original.width
      );
      this.minZoom = Math.min(l, 1);
    } else
      this.minZoom = 1;
    this.set(this.minZoom);
  }
  bindMouseWheel() {
    he().on("mouse:wheel", (e) => {
      e.e.preventDefault(), e.e.stopPropagation(), _n == null && (e.e.deltaY < 0 ? this.zoomIn() : this.zoomOut());
    });
  }
}
function Tp(t) {
  return new Promise((e) => {
    ye.fabric.util.loadImage(
      t,
      (i) => e(new ye.fabric.Image(i)),
      null,
      O().config.crossOrigin ? "anonymous" : void 0
    );
  });
}
function Ep() {
  return !O().config.image && !O().config.blankCanvasSize && (!he() || he().getObjects().length === 0);
}
class $_ {
  constructor() {
    Se(this, "minWidth", 50);
    Se(this, "minHeight", 50);
  }
  resize(e, i, {
    applyZoom: r = !1,
    resizeHelper: s = !0
  } = {}) {
    const f = O().zoom;
    he().setWidth(e * (r ? f : 1)), he().setHeight(i * (r ? f : 1)), O().setOriginal(e, i), s && I().transform.resetStraightenAnchor();
  }
  async addMainImage(e, i = "mainImage") {
    var s, f;
    O().toggleLoading(i);
    const r = await Tp(e);
    if (!!r)
      return this.clear(), r.set(zi), r.name = Ne.MainImage, he().add(r), this.resize(r.width, r.height), r.center(), r.setCoords(), I().zoom.fitToScreen(), O().toggleLoading(!1), (f = (s = O().config).onMainImageLoaded) == null || f.call(s, r), r;
  }
  openNew(e, i, r) {
    return e = Math.max(this.minWidth, e), i = Math.max(this.minHeight, i), this.clear(), this.resize(e, i), he().backgroundColor = r, I().zoom.fitToScreen(), O().toggleLoading("newCanvas"), requestAnimationFrame(() => {
      O().toggleLoading(!1);
    }), Promise.resolve({ width: e, height: i });
  }
  getMainImage() {
    return he().getObjects().find((e) => e.name === Ne.MainImage);
  }
  render() {
    he().requestRenderAll();
  }
  async loadInitialContent() {
    var s, f;
    const e = O().config.image, i = O().config.blankCanvasSize, r = O().config.state;
    if (e && e.endsWith("json")) {
      const g = await zs(e);
      await I().import.loadState(g);
    } else
      e && e.startsWith('{"canvas') ? await I().import.loadState(e) : e ? await this.addMainImage(e) : r ? await I().import.loadState(r) : i && await this.openNew(i.width, i.height);
    return Ep() && ((f = (s = O().config.ui) == null ? void 0 : s.openImageDialog) == null ? void 0 : f.show) && O().togglePanel("newImage", !0), new Promise((g) => {
      setTimeout(() => {
        I().history.addInitial(), g();
      }, 10);
    });
  }
  clear() {
    he().clear(), I().frame.remove(), I().transform.resetStraightenAnchor();
  }
}
function H_(t) {
  return t.name === Ne.Sticker && "forEachObject" in t;
}
const U_ = [
  "fontSize",
  "fontFamily",
  "left",
  "top",
  "width",
  "height",
  "scaleX",
  "scaleY",
  "flipX",
  "flipY",
  "angle",
  "src",
  "strokeWidth"
];
function kp(t = {}) {
  he().fire("object:modified", W_(t));
}
function W_(t) {
  return {
    values: t,
    sizeOrPositionChanged: Y_(t)
  };
}
function Y_(t) {
  return Object.keys(t).some(
    (e) => U_.includes(e)
  );
}
function G_() {
  O().fabric.on("selection:created", (t) => {
    var e;
    ((e = t.selected) == null ? void 0 : e[0]) && !Mu(t) && Ro(t.selected[0]);
  }), O().fabric.on("selection:updated", (t) => {
    var e;
    Mu(t) || Ro((e = t.selected) == null ? void 0 : e[0]);
  }), O().fabric.on("selection:cleared", () => {
    Ro();
  });
}
function Mu(t) {
  var r, s;
  const [e] = ld((r = t.selected) == null ? void 0 : r[0]), i = e === O().activeTool;
  return O().dirty && (!((s = t.selected) != null && s[0]) || !i) ? (t.deselected && I().objects.select(t.deselected[0]), !0) : !1;
}
function Ro(t) {
  (t == null ? void 0 : t.data.id) !== O().objects.active.id && (O().objects.setActive(t != null ? t : null), O().activeTool !== Ae.DRAW && bc());
}
class X_ {
  constructor() {
    this.syncObjects(), G_(), O().fabric.on("text:editing:entered", () => {
      O().objects.setIsEditingText(!0);
    }), O().fabric.on("text:editing:exited", () => {
      O().objects.setIsEditingText(!1);
    }), O().fabric.on("object:added", () => {
      this.syncObjects();
    }), O().fabric.on("object:removed", () => {
      this.syncObjects();
    });
  }
  getAll() {
    return he().getObjects().filter((e) => {
      var i;
      return !((i = e == null ? void 0 : e.data) != null && i.photaliusInternal);
    });
  }
  get(e) {
    return this.getAll().find((i) => i.name === e);
  }
  getById(e) {
    return this.getAll().find((i) => i.data.id === e);
  }
  isActive(e) {
    var r;
    const i = typeof e == "string" ? e : e.data.id;
    return ((r = O().objects.active) == null ? void 0 : r.id) === i;
  }
  getActive() {
    return he().getActiveObject();
  }
  has(e) {
    return this.getAll().findIndex((i) => i.name === e) > -1;
  }
  select(e) {
    const i = typeof e == "string" ? this.getById(e) : e;
    !i || (he().setActiveObject(i), he().requestRenderAll());
  }
  deselectActive() {
    he().discardActiveObject(), he().requestRenderAll();
  }
  setValues(e, i) {
    if (i = i || this.getActive(), !i)
      return;
    let r = !1;
    H_(i) && e.fill && e.fill !== i.fill && i.forEachObject((s) => s.set("fill", e.fill)), di(i) ? ((e.fontFamily !== i.fontFamily || e.fontSize !== i.fontSize) && (r = !0), i.selectionStart !== i.selectionEnd ? i.setSelectionStyles(e) : i.set(e)) : i.set(e), r ? setTimeout(() => {
      he().requestRenderAll();
    }, 50) : he().requestRenderAll(), O().objects.setActive(i), kp(e);
  }
  move(e, i = 1, r) {
    r = r || this.getActive(), r && (e === "up" ? this.setValues({ top: r.top - i }) : e === "down" ? this.setValues({ top: r.top + i }) : e === "left" ? this.setValues({ left: r.left - i }) : e === "right" && this.setValues({ left: r.left + i }), I().canvas.render());
  }
  bringToFront(e) {
    e = e || this.getActive(), e && (e.bringToFront(), I().canvas.render());
  }
  sendToBack(e) {
    e = e || this.getActive(), e && (e.sendToBack(), I().canvas.render());
  }
  flipHorizontally(e) {
    e = e || this.getActive(), e && (this.setValues({ flipX: !e.flipX }), I().canvas.render());
  }
  duplicate(e) {
    const i = e || this.getActive();
    !i || (this.deselectActive(), i.clone((r) => {
      r.set({
        left: i.left + 40,
        top: i.top + 40,
        data: { ...i.data, id: zc(10) },
        name: i.name
      }), he().add(r), this.select(r), I().canvas.render();
    }));
  }
  delete(e) {
    e = e || this.getActive(), e && (this.deselectActive(), he().remove(e), he().requestRenderAll(), I().history.addHistoryItem({ name: "deletedObject" }));
  }
  syncObjects() {
    const e = this.getAll().map((i) => {
      var r;
      return {
        name: i.name,
        selectable: (r = i.selectable) != null ? r : !1,
        id: i.data.id
      };
    });
    oe.setState({
      objects: {
        ...O().objects,
        all: e
      }
    });
  }
}
const K_ = {
  frame: null,
  fonts: []
};
function Du(t) {
  return t.state || (t.state = us()), {
    ...t.state || us(),
    name: t.name,
    id: zc(15)
  };
}
function Op(t) {
  return t ? /^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(t) : !1;
}
class q_ {
  constructor() {
    Se(this, "loadedAssets", {});
  }
  loadAsset(e, i = { type: "js" }) {
    return this.loadedAssets[e] === "loaded" && !i.force ? new Promise((r) => r()) : !this.loadedAssets[e] || i.force && this.loadedAssets[e] === "loaded" ? (this.loadedAssets[e] = new Promise((r) => {
      const s = Op(e) ? e : `assets/${e}`, f = Lo(e, i.id);
      i.type === "css" ? this.loadStyleAsset(s, f, r) : this.loadScriptAsset(s, f, r, i.parentEl);
    }), this.loadedAssets[e]) : this.loadedAssets[e];
  }
  alreadyLoading(e) {
    return this.loadedAssets[e] != null;
  }
  loadStyleAsset(e, i, r) {
    const s = document.createElement("link");
    s.rel = "stylesheet", s.id = Lo(e, i), s.href = e, s.onload = () => {
      this.loadedAssets[e] = "loaded", r();
    }, document.head.appendChild(s);
  }
  loadScriptAsset(e, i, r, s) {
    const f = document.createElement("script");
    f.async = !0, f.id = Lo(e, i), f.src = e, f.onload = () => {
      this.loadedAssets[e] = "loaded", r();
    }, (s || document.body).appendChild(f);
  }
}
function Lo(t, e) {
  return e || t.split("/").pop();
}
const Z_ = new q_();
function J_(t) {
  return `be-fonts-${t}`;
}
function Pp(t, e) {
  const i = [], r = [];
  let s = [];
  if (t.forEach((f) => {
    "google" in f && f.google ? i.push(f) : "src" in f && r.push(f);
  }), i != null && i.length) {
    const f = t.map((l) => `${l.family}:400`).join("|"), g = Z_.loadAsset(
      `https://fonts.googleapis.com/css?family=${f}&display=swap`,
      { type: "css", id: J_(e.id) }
    );
    s.push(g);
  }
  if (r != null && r.length) {
    const f = r.map(async (g) => {
      const l = Array.from(document.fonts.values()).find((a) => a.family === g.family);
      if (l)
        return l.loaded;
      const n = new FontFace(
        g.family,
        `url(${e != null && e.prefixSrc ? e.prefixSrc(g.src) : g.src})`,
        g.descriptors
      );
      return document.fonts.add(n), n.load();
    });
    s = s.concat(f);
  }
  return Promise.all(s);
}
function gt(t) {
  return t ? Op(t) ? t : `${O().config.baseUrl ? `${O().config.baseUrl}/` : ""}${t}` : "";
}
class Q_ {
  async undo() {
    if (this.canUndo()) {
      const e = O().history.items[O().history.pointer - 1];
      await this.load(e);
    }
  }
  async redo() {
    if (this.canRedo()) {
      const e = O().history.items[O().history.pointer + 1];
      await this.load(e);
    }
  }
  canUndo() {
    return O().history.canUndo;
  }
  canRedo() {
    return O().history.canRedo;
  }
  reload() {
    return this.load(O().history.items[O().history.pointer]);
  }
  replaceCurrent() {
    const e = O().history.items[O().history.pointer], i = [...O().history.items];
    i[O().history.pointer] = Du({
      name: e.name,
      state: e
    });
  }
  addHistoryItem(e) {
    const i = Du(e), s = [...O().history.items.slice(
      0,
      O().history.pointer + 1
    ), i];
    O().history.update(s.length - 1, s);
  }
  load(e) {
    return e = { ...e, editor: e.editor || K_ }, new Promise((i) => {
      Pp(eS(e.canvas.objects), {
        prefixSrc: gt,
        id: "photalius-fonts"
      }).finally(() => {
        he().loadFromJSON(e.canvas, () => {
          I().zoom.set(1), e.canvasWidth && e.canvasHeight && I().canvas.resize(e.canvasWidth, e.canvasHeight, {
            resizeHelper: !1,
            applyZoom: !1
          }), I().frame.remove(), e.editor.frame && I().frame.add(
            e.editor.frame.name,
            e.editor.frame.sizePercent
          ), I().objects.syncObjects(), I().objects.getAll().forEach((r) => {
            var s, f;
            if (!r.data.photaliusInternal && r.originX === "left" && r.originY === "top") {
              const g = r.getPointByOrigin("center", "center");
              r.set("left", g.x), r.set("top", g.y);
            }
            r.set({ ...Cp }), r.type === "i-text" && (r.padding = (f = (s = O().config.tools) == null ? void 0 : s.text) == null ? void 0 : f.controlsPadding);
          }), I().canvas.render(), he().calcOffset(), I().zoom.fitToScreen(), O().history.updatePointerById(e.id), I().transform.resetStraightenAnchor(), i();
        });
      });
    });
  }
  addInitial(e) {
    !O().history.items.find((r) => r.name === "initial") && (e || !Ep()) && this.addHistoryItem({ name: "initial", state: e });
  }
}
function eS(t) {
  const e = [];
  return t.forEach((i) => {
    var s, f, g;
    if (!di(i))
      return;
    const r = (g = (f = (s = O().config.tools) == null ? void 0 : s.text) == null ? void 0 : f.items) == null ? void 0 : g.find(
      (l) => l.family === i.fontFamily
    );
    r && e.push(r);
  }), e;
}
class tS {
  canMerge() {
    return I().objects.getAll().filter((e) => e.name !== Ne.MainImage).length > 0;
  }
  async apply() {
    O().toggleLoading("merge");
    const e = I().export.getDataUrl();
    e && await I().canvas.addMainImage(e, "merge");
  }
}
const $n = [
  { name: "grayscale" },
  { name: "blackWhite", fabricType: "blackwhite" },
  {
    name: "sharpen",
    uses: "Convolute",
    matrix: [0, -1, 0, -1, 5, -1, 0, -1, 0]
  },
  { name: "invert" },
  { name: "vintage" },
  { name: "polaroid" },
  { name: "kodachrome" },
  { name: "technicolor" },
  { name: "brownie" },
  { name: "sepia" },
  {
    name: "removeColor",
    fabricType: "removecolor",
    options: {
      distance: { type: "slider", current: 0.1, min: 0, max: 1, step: 0.01 },
      color: { current: "#fff", type: "colorPicker" }
    }
  },
  {
    name: "brightness",
    options: {
      brightness: { type: "slider", current: 0.1, min: -1, max: 1, step: 0.1 }
    }
  },
  {
    name: "gamma",
    options: {
      red: { type: "slider", current: 0.1, min: 0.2, max: 2.2, step: 3921e-6 },
      green: { type: "slider", current: 0.1, min: 0.2, max: 2.2, step: 3921e-6 },
      blue: { type: "slider", current: 0.1, min: 0.2, max: 2.2, step: 3921e-6 }
    },
    apply: (t) => {
      t.gamma = [t.red, t.green, t.blue];
    }
  },
  {
    name: "noise",
    options: {
      noise: { type: "slider", current: 40, min: 1, max: 600 }
    }
  },
  {
    name: "pixelate",
    options: {
      blocksize: { type: "slider", min: 1, max: 40, current: 6 }
    }
  },
  {
    name: "blur",
    uses: "Convolute",
    matrix: [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9]
  },
  {
    name: "emboss",
    uses: "Convolute",
    matrix: [1, 1, 1, 1, 0.7, -1, -1, -1, -1]
  },
  {
    name: "blendColor",
    fabricType: "blendcolor",
    options: {
      alpha: { type: "slider", current: 0.5, min: 0.1, max: 1, step: 0.1 },
      mode: {
        current: "add",
        type: "select",
        available: [
          { key: "add" },
          { key: "multiply" },
          { key: "subtract" },
          { key: "diff" },
          { key: "screen" },
          { key: "lighten" },
          { key: "darken" }
        ]
      },
      color: { type: "colorPicker", current: "#FF4081" }
    }
  }
], iS = {
  grayscale: ne("grayscale"),
  blackWhite: ne("Black & White"),
  sharpen: ne("Sharpen"),
  invert: ne("Invert"),
  vintage: ne("Vintage"),
  polaroid: ne("Polaroid"),
  kodachrome: ne("Kodachrome"),
  technicolor: ne("Technicolor"),
  brownie: ne("Brownie"),
  sepia: ne("Sepia"),
  removeColor: ne("Remove Color"),
  brightness: ne("Brightness"),
  gamma: ne("Gamma"),
  noise: ne("Noise"),
  pixelate: ne("Pixelate"),
  blur: ne("Blur"),
  emboss: ne("Emboss"),
  blendColor: ne("Blend Color")
}, Fo = {
  distance: ne("distance"),
  color: ne("color"),
  brightness: ne("brightness"),
  red: ne("red"),
  green: ne("green"),
  blue: ne("blue"),
  noise: ne("noise"),
  blocksize: ne("blocksize"),
  mode: ne("mode"),
  alpha: ne("alpha")
};
function Hn(t) {
  return t && t.charAt(0).toUpperCase() + t.slice(1);
}
class rS {
  constructor() {
    oe.subscribe(
      (e) => e.history.pointer,
      () => {
        this.syncState();
      }
    );
  }
  apply(e) {
    O().filter.select(e, this.hasOptions(e));
    const i = this.getByName(e);
    if (this.isApplied(i.name)) {
      this.remove(i.name);
      return;
    }
    const r = this.create(i);
    this.getImages().forEach((s) => {
      var f;
      (f = s.filters) == null || f.push(r), s.applyFilters();
    }), this.syncState(), I().canvas.render();
  }
  remove(e) {
    O().filter.deselect(e);
    const i = this.getByName(e);
    this.getImages().forEach((r) => {
      var f;
      const s = this.findFilterIndex(
        i.name,
        r.filters
      );
      (f = r.filters) == null || f.splice(s, 1), r.applyFilters();
    }), this.syncState(), I().canvas.render();
  }
  getAll() {
    return $n;
  }
  getByName(e) {
    return $n.find((i) => i.name === e);
  }
  isApplied(e) {
    const i = I().canvas.getMainImage();
    return i ? this.findFilterIndex(e, i.filters) > -1 : !1;
  }
  applyValue(e, i, r) {
    const s = this.getByName(e);
    this.getImages().forEach((f) => {
      const g = (f.filters || []).find(
        (l) => l.type.toLowerCase() === s.name.toLowerCase()
      );
      !g || (g[i] = r, s.apply && s.apply(g, i, r), f.applyFilters());
    }), I().canvas.render();
  }
  addCustom(e, i, r, s) {
    const f = ye.fabric.Image.filters;
    f[Hn(e)] = ye.fabric.util.createClass(
      f.BaseFilter,
      i
    ), f[Hn(e)].fromObject = f.BaseFilter.fromObject, $n.push({
      name: e,
      options: r,
      initialConfig: s
    });
  }
  create(e) {
    const i = e.initialConfig || {};
    let r;
    return e.uses ? (i.matrix = e.matrix, r = new ye.fabric.Image.filters[Hn(e.uses)](i)) : (Object.entries(e.options || {}).forEach(([s, f]) => {
      i[s] = f.current;
    }), r = new ye.fabric.Image.filters[Hn(e.name)](i)), r.name = e.name, r;
  }
  hasOptions(e) {
    return !!this.getByName(e).options;
  }
  findFilterIndex(e, i) {
    if (!(i != null && i.length))
      return -1;
    const r = this.getByName(e);
    return i.findIndex((s) => this.configMatchesFabricFilter(r, s));
  }
  syncState() {
    var r;
    const e = [];
    (((r = this.getImages()[0]) == null ? void 0 : r.filters) || []).forEach((s) => {
      const f = this.getByFabricFilter(s);
      f && e.push(f.name);
    }), oe.setState({
      filter: {
        ...O().filter,
        applied: e
      }
    });
  }
  getByFabricFilter(e) {
    return $n.find((i) => this.configMatchesFabricFilter(i, e));
  }
  configMatchesFabricFilter(e, i) {
    const r = i.type.toLowerCase().replace(" ", "");
    return r === e.fabricType || r === e.name ? !0 : r === "convolute" && this.matrixAreEqual(e.matrix, i.matrix);
  }
  matrixAreEqual(e, i) {
    if (!e || !i || e.length !== i.length)
      return !1;
    for (let r = e.length; r--; )
      if (e[r] !== i[r])
        return !1;
    return !0;
  }
  getImages() {
    return I().objects.getAll().filter((e) => e.name === Ne.Image || e.name === Ne.MainImage);
  }
}
function nS(t) {
  return t.width < Iu(t.usePercentages) && (t.width = Iu(t.usePercentages), t.maintainAspect && (t.height = ys(t.width, t.usePercentages))), t.width > Ru(t.usePercentages) && (t.width = Ru(t.usePercentages), t.maintainAspect && (t.height = ys(t.width, t.usePercentages))), t.height < Lu(t.usePercentages) && (t.height = Lu(t.usePercentages), t.maintainAspect && (t.width = ka(t.height, t.usePercentages))), t.height > Fu(t.usePercentages) && (t.height = Fu(t.usePercentages), t.maintainAspect && (t.width = ka(t.height, t.usePercentages))), t;
}
function Iu(t) {
  var i, r;
  const e = ((r = (i = O().config.tools) == null ? void 0 : i.resize) == null ? void 0 : r.minWidth) || 50;
  return t ? Math.ceil(e * 100 / O().original.width) : e;
}
function Ru(t) {
  var i, r;
  const e = ((r = (i = O().config.tools) == null ? void 0 : i.resize) == null ? void 0 : r.maxWidth) || 2400;
  return t ? Math.ceil(e * 100 / O().original.width) : e;
}
function Lu(t) {
  var i, r;
  const e = ((r = (i = O().config.tools) == null ? void 0 : i.resize) == null ? void 0 : r.minHeight) || 50;
  return t ? Math.ceil(e * 100 / O().original.height) : e;
}
function Fu(t) {
  var i, r;
  const e = ((r = (i = O().config.tools) == null ? void 0 : i.resize) == null ? void 0 : r.maxHeight) || 2400;
  return t ? Math.ceil(e * 100 / O().original.height) : e;
}
function ka(t, e) {
  if (e)
    return t;
  const i = O().original.height / t;
  return Math.floor(O().original.width / i);
}
function ys(t, e) {
  if (e)
    return t;
  const i = O().original.width / t;
  return Math.floor(O().original.height / i);
}
class sS {
  apply(e) {
    const { width: i, height: r, usePercentages: s } = nS(e), f = Math.ceil(O().original.width), g = Math.ceil(O().original.height), l = Math.ceil(i), n = Math.ceil(r);
    let a, h;
    s ? (a = i / 100, h = r / 100) : (a = i / O().original.width, h = r / O().original.height), !(f === l && g === n) && this.resize(a, h);
  }
  resize(e, i) {
    I().zoom.set(1, !1);
    const r = Math.round(O().original.height * i), s = Math.round(O().original.width * e);
    I().canvas.resize(s, r, {
      applyZoom: !1,
      resizeHelper: !0
    }), I().objects.getAll().forEach((f) => {
      const g = f.scaleX || 1, l = f.scaleY || 1, n = f.left || 0, a = f.top || 0, h = g * e, o = l * i, u = n * e, c = a * i;
      f.scaleX = h, f.scaleY = o, f.left = u, f.top = c, f.setCoords();
    }), I().zoom.fitToScreen(), he().requestRenderAll();
  }
}
function oS(t, e) {
  e.innerZone !== null && (e = e, aS(t, e), cS(t, e), lS(t, e));
}
function aS(t, e) {
  e.innerZone.style.width = `${t.width}px`, e.innerZone.style.height = `${t.height}px`, e.innerZone.style.transform = `translate(${t.left}px, ${t.top}px)`;
}
function cS(t, e) {
  const i = O().canvasSize.width, r = O().canvasSize.height;
  e.maskTop.style.height = `${t.top}px`, e.maskTop.style.width = `${i}px`, e.maskLeft.style.top = `${t.top}px`, e.maskLeft.style.height = `${t.height}px`, e.maskLeft.style.width = `${t.left}px`;
  const s = t.left + t.width;
  e.maskRight.style.left = `${s}px`, e.maskRight.style.top = `${t.top}px`, e.maskRight.style.height = `${t.height}px`, e.maskRight.style.width = `${i - s}px`, e.maskBottom.style.height = `${r - (t.top + t.height)}px`, e.maskBottom.style.width = `${i}px`;
}
function lS(t, e) {
  const i = (t.width - 2) / 3;
  e.lineVer1.style.height = `${t.height}px`, e.lineVer1.style.transform = `translate(${i}px, 0)`, e.lineVer2.style.height = `${t.height}px`, e.lineVer2.style.transform = `translate(${i * 2}px, 0)`;
  const r = (t.height - 2) / 3;
  e.lineHor1.style.width = `${t.width}px`, e.lineHor1.style.transform = `translate(0, ${r}px)`, e.lineHor2.style.width = `${t.width}px`, e.lineHor2.style.transform = `translate(0, ${r * 2}px)`;
}
function Bc(t, e, i) {
  let r = e, s = i;
  return t && (i * t > e ? s = e / t : r = i * t), { width: Math.floor(r), height: Math.floor(s) };
}
function jc(t) {
  if (!t)
    return null;
  const e = t.split(":");
  return parseInt(e[0]) / parseInt(e[1]);
}
function uS(t, e = null) {
  const i = {
    width: t.width,
    height: t.height,
    top: 0,
    left: 0,
    angle: 0
  };
  if (e) {
    const r = Bc(
      e,
      i.width,
      i.height
    );
    i.width = r.width, i.height = r.height;
  }
  return i.left = (t.width - i.width) / 2, i.top = (t.height - i.height) / 2, i;
}
class hS {
  constructor() {
    Se(this, "refs", null);
  }
  apply(e) {
    var s;
    const i = (s = I().frame.active.config) == null ? void 0 : s.name, r = I().frame.active.currentSizeInPercent;
    return I().frame.active.hide(), I().merge.apply().then(() => {
      I().canvas.resize(Math.round(e.width), Math.round(e.height), {
        applyZoom: !0,
        resizeHelper: !0
      });
      const f = I().canvas.getMainImage();
      f.cropX = Math.round(e.left), f.cropY = Math.round(e.top), f.width = Math.round(e.width), f.height = Math.round(e.height), f.viewportCenter(), i && I().frame.add(i, r), I().zoom.fitToScreen(), I().canvas.render();
    });
  }
  drawZone(e) {
    var i;
    (i = this.refs) != null && i.current && (O().crop.setCropzoneRect(e), oS(e, this.refs.current));
  }
  resetCropzone(e) {
    const i = O().canvasSize, r = jc(e);
    if (!i)
      return;
    O().crop.setAspectRatio(e);
    const s = uS(i, r);
    this.drawZone(s);
  }
  registerRefs(e) {
    this.refs = e;
  }
}
class fS {
  getShapeByName(e) {
    var r, s;
    const i = (s = (r = O().config.tools) == null ? void 0 : r.shapes) == null ? void 0 : s.items;
    return (i == null ? void 0 : i.find((f) => f.name === e)) || null;
  }
  addBasicShape(e) {
    var n;
    const i = this.getShapeByName(e);
    if (!i)
      return null;
    const { width: r, height: s, ...f } = ((n = O().config.objectDefaults) == null ? void 0 : n.shape) || {}, g = {
      ...f,
      ...i.options
    };
    let l;
    if (i.name === "circle")
      l = new ye.fabric.Circle({
        ...g,
        radius: 100
      });
    else if (i.name === "ellipse")
      l = new ye.fabric.Ellipse({
        ...g,
        rx: 100,
        ry: 50
      });
    else if (i.type === "Path")
      l = new ye.fabric.Path(g.path, {
        displayName: i.name,
        ...g
      });
    else {
      const a = i.type;
      l = new ye.fabric[a]({
        ...g,
        width: 150,
        height: 150
      });
    }
    return this.addAndPositionShape(l, Ne.Shape, { width: r, height: s }), l;
  }
  addSticker(e, i) {
    var s, f, g;
    const r = (g = (f = (s = O().config.tools) == null ? void 0 : s.stickers) == null ? void 0 : f.items) == null ? void 0 : g.find(
      (l) => l.name === e
    );
    if (!r)
      return Promise.resolve();
    if (r.type === "svg") {
      const l = Oa(r, i);
      return this.addSvgSticker(l);
    }
    return this.addRegularSticker(r, i);
  }
  addRegularSticker(e, i) {
    return new Promise((r) => {
      ye.fabric.util.loadImage(Oa(e, i), (s) => {
        var a;
        const { width: f, height: g, ...l } = ((a = O().config.objectDefaults) == null ? void 0 : a.sticker) || {}, n = new ye.fabric.Image(s, l);
        this.addAndPositionShape(n, Ne.Sticker, { width: f, height: g }), r();
      });
    });
  }
  addSvgSticker(e, i = Ne.Sticker) {
    return new Promise((r) => {
      ye.fabric.loadSVGFromURL(e, (s, f) => {
        var h;
        const { width: g, height: l, ...n } = ((h = O().config.objectDefaults) == null ? void 0 : h.sticker) || {}, a = ye.fabric.util.groupSVGElements(s, f);
        a.set(n), this.addAndPositionShape(a, i, { width: g, height: l }), r();
      });
    });
  }
  addAndPositionShape(e, i, { width: r }) {
    e.name = i, e.scaleX = 1, e.scaleY = 1, he().add(e);
    const s = r || O().original.width * O().zoom / 4;
    e.scaleToWidth(Math.min(150, s)), e.viewportCenter(), e.setCoords(), I().canvas.render(), he().setActiveObject(e);
  }
}
function Oa(t, e) {
  return gt(
    `images/stickers/${t.name}/${e}.${t.type}`
  );
}
class dS {
  constructor(e) {
    Se(this, "patternCache", []);
    this.activeFrame = e;
  }
  fillParts(e) {
    this.patternCache.forEach((i) => {
      this.fillPartWithPattern(i, e);
    });
  }
  fillPartWithPattern(e, i) {
    if (!this.activeFrame.parts)
      return;
    e.canvas = new ye.fabric.StaticCanvas(null), e.canvas.add(e.img);
    const r = new ye.fabric.Pattern({
      source: e.canvas.getElement(),
      repeat: i === "repeat" ? "repeat" : "no-repeat"
    });
    this.activeFrame.parts[e.name] && this.activeFrame.parts[e.name].set("fill", r);
  }
  scale(e) {
    if (!this.activeFrame.config || !this.patternCache)
      return;
    const i = this.activeFrame.config.mode;
    e /= he().getRetinaScaling(), this.patternCache.forEach((r) => {
      !this.activeFrame.parts || (r.name === "top" || r.name === "bottom" ? i === "stretch" ? (this.scalePatternToWidth(
        r.img,
        this.activeFrame.parts.top.getScaledWidth()
      ), this.scalePatternToHeight(r.img, e)) : r.img.scaleToHeight(e) : r.name === "left" || r.name === "right" ? i === "stretch" ? (this.scalePatternToWidth(r.img, e), this.scalePatternToHeight(
        r.img,
        this.activeFrame.parts.left.getScaledHeight()
      )) : r.img.scaleToWidth(e) : i === "stretch" ? (this.scalePatternToWidth(r.img, e), this.scalePatternToHeight(r.img, e)) : r.img.scaleToWidth(e), r.canvas.setDimensions({
        width: r.img.getScaledWidth(),
        height: r.img.getScaledHeight()
      }));
    }), I().canvas.render();
  }
  scalePatternToWidth(e, i) {
    if (!e.width)
      return;
    const r = e.getBoundingRect().width / e.getScaledWidth();
    e.set("scaleX", i / e.width / r), e.setCoords();
  }
  scalePatternToHeight(e, i) {
    if (!e.height)
      return;
    const r = e.getBoundingRect().height / e.getScaledHeight();
    e.set("scaleY", i / e.height / r), e.setCoords();
  }
  load(e) {
    const i = this.activeFrame.getPartNames().map((r) => new Promise((s) => {
      const f = {
        ...zi,
        originX: "left",
        originY: "top"
      };
      O().config.crossOrigin && (f.crossOrigin = "anonymous"), ye.fabric.Image.fromURL(
        this.getPartUrl(e, r),
        (g) => {
          s({ name: r, img: g });
        },
        f
      );
    }));
    return Promise.all(i).then((r) => {
      this.patternCache = r, this.fillParts(e.mode);
    });
  }
  getPartUrl(e, i) {
    return gt(`images/frames/${e.name}/${i}.png`);
  }
}
class pS {
  constructor(e, i) {
    this.activeFrame = e, this.patterns = i;
  }
  get defaultColor() {
    var e, i;
    return (i = (e = O().config.objectDefaults) == null ? void 0 : e.global) == null ? void 0 : i.fill;
  }
  build(e, i) {
    if (this.createParts(e), this.resize(i), this.activeFrame.config = e, e.mode === "basic") {
      I().canvas.render();
      return;
    }
    this.patterns.load(e).then(() => {
      this.patterns.scale(i), I().canvas.render();
    });
  }
  createParts(e) {
    const i = {};
    this.activeFrame.getPartNames().forEach((r) => {
      const s = e.mode === "basic" ? this.defaultColor : void 0;
      i[r] = new ye.fabric.Rect({
        ...zi,
        fill: s,
        originX: "left",
        originY: "top",
        name: `frame.rect.${r}`,
        objectCaching: !1,
        data: { photaliusInternal: !0 }
      }), he().add(i[r]);
    }), this.activeFrame.parts = i;
  }
  resize(e) {
    const i = O().original.width, r = O().original.height, s = this.activeFrame, f = e;
    !s.parts || (s.parts.topLeft.set({
      width: f,
      height: f
    }), s.parts.topRight.set({
      left: i - s.parts.topLeft.getScaledWidth(),
      width: f,
      height: f
    }), s.parts.top.set({
      left: s.parts.topLeft.getScaledWidth() - 1,
      width: i - s.parts.topLeft.getScaledWidth() - s.parts.topRight.getScaledWidth() + 3,
      height: f
    }), s.parts.bottomLeft.set({
      top: r - s.parts.topLeft.getScaledHeight(),
      width: f,
      height: f
    }), s.parts.left.set({
      top: s.parts.topLeft.getScaledHeight() - 1,
      width: f,
      height: r - s.parts.topLeft.getScaledHeight() - s.parts.bottomLeft.getScaledHeight() + 3
    }), s.parts.bottomRight.set({
      left: i - s.parts.bottomLeft.getScaledWidth(),
      top: r - s.parts.topRight.getScaledWidth(),
      width: f,
      height: f
    }), s.parts.bottom.set({
      left: s.parts.top.left,
      top: r - s.parts.top.getScaledHeight(),
      width: s.parts.top.getScaledWidth(),
      height: f
    }), s.parts.right.set({
      left: i - s.parts.left.getScaledWidth(),
      top: s.parts.left.top,
      width: s.parts.left.width,
      height: s.parts.left.getScaledHeight()
    }));
  }
}
class gS {
  constructor() {
    Se(this, "corners", [
      "topLeft",
      "topRight",
      "bottomLeft",
      "bottomRight"
    ]);
    Se(this, "sides", ["top", "right", "bottom", "left"]);
    Se(this, "parts", null);
    Se(this, "config", null);
    Se(this, "currentSizeInPercent", 100);
  }
  getPartNames() {
    return [...this.corners, ...this.sides];
  }
  hide() {
    !this.parts || (Object.values(this.parts).forEach((e) => e.set({ visible: !1 })), I().canvas.render());
  }
  show() {
    !this.parts || (Object.values(this.parts).forEach((e) => e.set({ visible: !0 })), I().canvas.render());
  }
  remove() {
    !this.parts || (this.config = null, Object.values(this.parts).forEach((e) => {
      he().remove(e);
    }), this.parts = null, I().canvas.render());
  }
  is(e) {
    return this.config ? this.config.name === e.name : !1;
  }
  changeColor(e) {
    var i;
    ((i = this.config) == null ? void 0 : i.mode) !== "basic" || !this.parts || (Object.values(this.parts).forEach((r) => {
      r.set("fill", e);
    }), I().canvas.render());
  }
  getMinSize() {
    var e, i;
    return (i = (e = this.config) == null ? void 0 : e.size.min) != null ? i : 1;
  }
  getMaxSize() {
    var e, i;
    return (i = (e = this.config) == null ? void 0 : e.size.max) != null ? i : 35;
  }
}
class mS {
  constructor() {
    Se(this, "patterns");
    Se(this, "builder");
    Se(this, "active");
    this.active = new gS(), this.patterns = new dS(this.active), this.builder = new pS(this.active, this.patterns), he().on("object:added", () => {
      Object.values(this.active.parts || []).forEach((e) => e.moveTo(98));
    });
  }
  add(e, i) {
    const r = this.getByName(e);
    if (!r || this.active.is(r))
      return;
    this.active.remove(), this.active.currentSizeInPercent = i != null ? i : r.size.default;
    const s = this.calcFrameSizeInPixels(this.active.currentSizeInPercent);
    this.builder.build(r, s), O().frame.select(r);
  }
  resize(e) {
    if (!this.active.parts || !this.active.config)
      return;
    e ? this.active.currentSizeInPercent = e : e = this.active.currentSizeInPercent;
    const i = this.calcFrameSizeInPixels(e);
    this.builder.resize(i), this.patterns.scale(i), I().canvas.render();
  }
  changeColor(e) {
    this.active.changeColor(e);
  }
  remove() {
    this.active.remove(), O().frame.deselect();
  }
  getByName(e) {
    var r, s;
    const i = (s = (r = O().config.tools) == null ? void 0 : r.frame) == null ? void 0 : s.items;
    if (i)
      return i.find((f) => f.name === e);
  }
  getActiveFrameConfig() {
    return this.active.config;
  }
  calcFrameSizeInPixels(e) {
    const i = Math.min(O().original.width, O().original.height);
    return Math.ceil(e / 100 * i);
  }
}
class vS {
  constructor() {
    Se(this, "minWidth", 250);
  }
  add(e, i = {}) {
    var f, g, l, n, a;
    if (e = e || ((g = (f = O().config.tools) == null ? void 0 : f.text) == null ? void 0 : g.defaultText), !e)
      return;
    const r = {
      ...(l = O().config.objectDefaults) == null ? void 0 : l.text,
      ...i,
      name: Ne.Text,
      padding: (a = (n = O().config.tools) == null ? void 0 : n.text) == null ? void 0 : a.controlsPadding,
      editingBorderColor: uc.fill
    }, s = new ye.fabric.IText(e, r);
    he().add(s), i.left == null && i.top == null && this.autoPositionText(s), I().objects.select(s);
  }
  autoPositionText(e) {
    const i = he().getWidth(), r = he().getHeight(), s = Math.min(he().getWidth(), this.minWidth);
    e.scaleToWidth(Math.max(i / 3, s)), e.getScaledHeight() > r && e.scaleToHeight(r - e.getScaledHeight() - 20), e.viewportCenter(), he().getObjects("i-text").forEach((f) => {
      if (f !== e && f.intersectsWithObject(e)) {
        const g = f.top - e.top + f.getScaledHeight();
        let l = e.top + g;
        l > O().original.height - f.getScaledHeight() && (l = 0), e.set("top", l), e.setCoords();
      }
    });
  }
  selectOrAddText(e, i = {}) {
    if (O().objects.active.isText)
      return !1;
    const r = I().objects.getAll().find((s) => di(s));
    return r ? (I().objects.select(r), !1) : (this.add(e, i), !0);
  }
}
const bS = (t) => {
  const e = new ye.fabric.PatternBrush(t);
  return e.getPatternSrc = function() {
    const r = ye.fabric.document.createElement("canvas");
    r.width = 10, r.height = 10;
    const s = r.getContext("2d");
    return s.strokeStyle = this.color, s.lineWidth = 5, s.beginPath(), s.moveTo(0, 5), s.lineTo(10, 5), s.closePath(), s.stroke(), r;
  }, e;
}, yS = (t) => {
  const e = new ye.fabric.PatternBrush(t);
  return e.getPatternSrc = function() {
    const r = document.createElement("canvas");
    r.width = 10, r.height = 10;
    const s = r.getContext("2d");
    return s.strokeStyle = this.color, s.lineWidth = 5, s.beginPath(), s.moveTo(5, 0), s.lineTo(5, 10), s.closePath(), s.stroke(), r;
  }, e;
}, wS = (t) => {
  const e = new ye.fabric.PatternBrush(t);
  return e.getPatternSrc = function() {
    const r = this.width / 2, s = 5, f = document.createElement("canvas"), g = new ye.fabric.Rect({
      width: r,
      height: r,
      angle: 45,
      fill: this.color
    }), l = g.getBoundingRect().width;
    f.width = l + s, f.height = l + s, g.set({ left: l / 2, top: l / 2 });
    const n = f.getContext("2d");
    return g.render(n), f;
  }, e;
}, xS = (t) => {
  const e = new ye.fabric.PatternBrush(t);
  return e.getPatternSrc = function() {
    const f = document.createElement("canvas");
    f.width = 10 + 2, f.height = 10 + 2;
    const g = f.getContext("2d");
    return g.fillStyle = this.color, g.fillRect(0, 0, 10, 10), f;
  }, e;
};
var Xh, Kh;
class _S {
  constructor() {
    Se(this, "customBrushes", {
      VLineBrush: bS,
      HLineBrush: yS,
      DiamondBrush: wS,
      SquareBrush: xS
    });
    Se(this, "currentBrush", {
      type: "PencilBrush",
      color: (Kh = (Xh = O().config.objectDefaults) == null ? void 0 : Xh.global) == null ? void 0 : Kh.fill,
      width: Bf[1]
    });
    Se(this, "onPathCreated", (e) => {
      e.path.name = Ne.Drawing, e.path.set(SS()), O().setDirty(!0);
    });
  }
  enable() {
    he().on("path:created", this.onPathCreated), he().isDrawingMode = !0, this.setBrushType(this.currentBrush.type), this.setBrushSize(this.currentBrush.width);
  }
  disable() {
    he().off("path:created", this.onPathCreated), he().isDrawingMode = !1;
  }
  getBrushType() {
    return this.currentBrush.type;
  }
  setBrushType(e) {
    this.currentBrush.type = e, he().freeDrawingBrush = e in ye.fabric ? new ye.fabric[e](he()) : this.customBrushes[e](he()), this.applyBrushStyles();
  }
  applyBrushStyles() {
    Object.keys(this.currentBrush).forEach((i) => {
      he().freeDrawingBrush[i] = this.currentBrush[i];
    });
    const e = he().freeDrawingBrush;
    e.getPatternSrc && (e.source = e.getPatternSrc.call(e));
  }
  setBrushSize(e) {
    this.currentBrush.width = e, this.applyBrushStyles();
  }
  getBrushSize() {
    return this.currentBrush.width;
  }
  setBrushColor(e) {
    this.currentBrush.color = e, this.applyBrushStyles();
  }
  getBrushColor() {
    return this.currentBrush.color;
  }
}
function SS() {
  const t = { ...zi };
  return delete t.strokeWidth, t;
}
function Ap(t) {
  var i;
  return ((i = /(?:\.([^.]+))?$/.exec(t)) == null ? void 0 : i[1]) || "";
}
function CS(t) {
  const e = {
    md: "text/markdown",
    markdown: "text/markdown",
    mp4: "video/mp4",
    mp3: "audio/mp3",
    svg: "image/svg+xml",
    jpg: "image/jpeg",
    png: "image/png",
    gif: "image/gif",
    yaml: "text/yaml",
    yml: "text/yaml"
  }, i = t.name ? Ap(t.name) : null;
  return t.type ? t.type : i && i in e ? e[i] : "application/octet-stream";
}
let TS = 0;
function ES() {
  return TS;
}
class ln {
  constructor(e, i) {
    Se(this, "id");
    Se(this, "fingerprint");
    Se(this, "name");
    Se(this, "relativePath", "");
    Se(this, "size");
    Se(this, "mime", "");
    Se(this, "extension", "");
    Se(this, "native");
    Se(this, "lastModified");
    Se(this, "cachedData");
    this.id = ud(), this.name = e.name, this.size = e.size, this.mime = CS(e), this.lastModified = e.lastModified, this.extension = Ap(e.name) || "bin", this.native = e, i = i || e.webkitRelativePath || "", i = i.replace(/^\/+/g, ""), i && i.split("/").length > 1 && (this.relativePath = i), this.fingerprint = kS({
      name: this.name,
      size: this.size,
      mime: this.mime,
      lastModified: this.lastModified
    });
  }
  get data() {
    return new Promise((e) => {
      this.cachedData && e(this.cachedData);
      const i = new FileReader();
      i.addEventListener("load", () => {
        this.cachedData = i.result, e(this.cachedData);
      }), this.extension === "json" ? i.readAsText(this.native) : i.readAsDataURL(this.native);
    });
  }
}
function kS({ name: t, mime: e, size: i, relativePath: r, lastModified: s }) {
  let f = "be";
  return typeof t == "string" && (f += `-${zu(t.toLowerCase())}`), e && (f += `-${e}`), typeof r == "string" && (f += `-${zu(r.toLowerCase())}`), i !== void 0 && (f += `-${i}`), s !== void 0 && (f += `-${s}`), f += `${ES()}`, `${f}-v1`;
}
function OS(t) {
  return t.charCodeAt(0).toString(32);
}
function zu(t) {
  let e = "";
  return t.replace(/[^A-Z0-9]/gi, (i) => (e += `-${OS(i)}`, "/")) + e;
}
function PS(t = {}) {
  var r;
  const e = document.querySelector("#hidden-file-upload-input");
  e && e.remove();
  const i = document.createElement("input");
  return i.type = "file", i.multiple = (r = t.multiple) != null ? r : !1, i.classList.add("hidden"), i.style.display = "none", i.style.visibility = "hidden", i.id = "hidden-file-upload-input", i.accept = AS(t), t.directory && (i.webkitdirectory = !0), document.body.appendChild(i), i;
}
function AS({
  extensions: t = [],
  types: e = []
}) {
  const i = [];
  return t != null && t.length && (t = t.map((r) => r.startsWith(".") ? r : `.${r}`), i.push(t.join(","))), e != null && e.length && i.push(e.join(",")), i.join(",");
}
function MS(t = {}) {
  return new Promise((e) => {
    const i = PS(t);
    i.onchange = (r) => {
      const s = r.target.files;
      if (!s)
        return e([]);
      const f = Array.from(s).filter((g) => g.name !== ".DS_Store").map((g) => new ln(g));
      e(f), i.remove();
    }, document.body.appendChild(i), i.click();
  });
}
async function Bu(t, e = !0, i = !0) {
  const r = await Tp(t);
  if (!!r)
    return new Promise((s) => {
      r.name = Ne.Image, r.opacity = 0;
      const f = O().original.width, g = O().original.height;
      if (e && (r.width >= f || r.height >= g)) {
        const l = f - 0.1 * f, n = g - 0.1 * g, a = 1 / Math.min(
          n / r.getScaledHeight(),
          l / r.getScaledWidth()
        );
        r.scaleX *= 1 / a, r.scaleY *= 1 / a;
      }
      O().fabric.add(r), i && O().fabric.setActiveObject(r), r.viewportCenter(), r.setCoords(), O().fabric.requestRenderAll(), I().zoom.fitToScreen(), r.animate("opacity", "1", {
        duration: 425,
        onChange: () => {
          O().fabric.requestRenderAll();
        },
        onComplete: () => {
          s(r);
        }
      });
    });
}
var Nc = /* @__PURE__ */ ((t) => (t.image = "image/*", t.audio = "audio/*", t.json = "application/json", t.video = "video/mp4,video/mpeg,video/x-m4v,video/*", t))(Nc || {});
function DS(t) {
  if (t == null || Number.isNaN(t))
    return "";
  const e = t < 0, i = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"];
  if (e && (t = -t), t < 1)
    return `${(e ? "-" : "") + t} B`;
  const r = Math.min(
    Math.floor(Math.log(t) / Math.log(1024)),
    i.length - 1
  );
  t = Number(t / Math.pow(1024, r));
  const s = i[r];
  return t >= 10 || t % 1 === 0 ? `${(e ? "-" : "") + t.toFixed(0)} ${s}` : `${(e ? "-" : "") + t.toFixed(1)} ${s}`;
}
function Mp(t, e) {
  this.text = t = t || "", this.hasWild = ~t.indexOf("*"), this.separator = e, this.parts = t.split(e);
}
Mp.prototype.match = function(t) {
  var e = !0, i = this.parts, r, s = i.length, f;
  if (typeof t == "string" || t instanceof String)
    if (!this.hasWild && this.text != t)
      e = !1;
    else {
      for (f = (t || "").split(this.separator), r = 0; e && r < s; r++)
        i[r] !== "*" && (r < f.length ? e = i[r] === f[r] : e = !1);
      e = e && f;
    }
  else if (typeof t.splice == "function")
    for (e = [], r = t.length; r--; )
      this.match(t[r]) && (e[e.length] = t[r]);
  else if (typeof t == "object") {
    e = {};
    for (var g in t)
      this.match(g) && (e[g] = t[g]);
  }
  return e;
};
var IS = function(t, e, i) {
  var r = new Mp(t, i || /[\/\.]/);
  return typeof e < "u" ? r.match(e) : r;
}, RS = IS, LS = /[\/\+\.]/, FS = function(t, e) {
  function i(r) {
    var s = RS(r, t, LS);
    return s && s.length >= 2;
  }
  return e ? i(e.split(";")[0]) : i;
};
function zS(t, e) {
  if (!e)
    return;
  const { maxFileSize: i, allowedFileTypes: r, blockedFileTypes: s } = e;
  if (i && t.size != null && t.size > i)
    return ne("`:file` exceeds maximum allowed size of :size", {
      values: { file: t.name, size: DS(i) }
    });
  if (r != null && r.length && !ju(t, r) || s != null && s.length && ju(t, s))
    return ne("This file type is not allowed");
}
function ju(t, e) {
  return e.map((i) => i.split(",")).flat().some((i) => i.includes("/") ? t.mime ? FS(t.mime.replace(/;.*?$/, ""), i) : !1 : i.replace(".", "") && t.extension ? t.extension.toLowerCase() === i.toLowerCase() : !1);
}
function BS(t, e) {
  if (t == null)
    return 0;
  switch (e) {
    case "KB":
      return t * 1024;
    case "MB":
      return t * 1024 ** 2;
    case "GB":
      return t * 1024 ** 3;
    case "TB":
      return t * 1024 ** 4;
    case "PB":
      return t * 1024 ** 5;
    default:
      return t;
  }
}
class jS {
  async uploadAndAddImage(e = !0) {
    const i = await this.openUploadWindow();
    await this.openUploadedFile(i, e);
  }
  async uploadAndReplaceMainImage() {
    const e = await this.openUploadWindow();
    e && await this.openBackgroundImage(e);
  }
  async uploadAndOpenStateFile() {
    const e = await this.openUploadWindow(VS);
    e && await this.loadState(await e.data);
  }
  async addImageFromUrl(e, i = !0) {
    var r, s, f;
    await Bu(
      e,
      (f = (s = (r = O().config.tools) == null ? void 0 : r.import) == null ? void 0 : s.fitOverlayToScreen) != null ? f : !0,
      i
    ), I().history.addHistoryItem({ name: "overlayImage" });
  }
  async addImageFromData(e, i = !0) {
    var r, s, f;
    await Bu(
      e,
      (f = (s = (r = O().config.tools) == null ? void 0 : r.import) == null ? void 0 : s.fitOverlayToScreen) != null ? f : !0,
      i
    ), I().history.addHistoryItem({ name: "overlayImage" });
  }
  async openUploadedFile(e, i = !0) {
    if (!e)
      return;
    const r = await e.data;
    switch (e.extension) {
      case "json":
        await this.loadState(r);
        break;
      case "svg":
        await I().shape.addSvgSticker(r, Ne.Image), I().history.addHistoryItem({ name: "overlayImage" });
        break;
      default:
        await this.addImageFromData(r, i);
    }
  }
  async loadState(e) {
    O().toggleLoading("state"), await pa();
    let i;
    typeof e == "string" ? e.endsWith(".json") ? i = await zs(e) : i = JSON.parse(e) : i = e, i.history ? O().history.reset(i.history) : await I().history.addInitial(i), await I().history.reload(), O().toggleLoading(!1);
  }
  async openUploadWindow(e) {
    var r, s;
    e = e || NS();
    const i = (await MS(e))[0];
    return this.fileIsValid(i) ? ((s = (r = O().config).onFileOpen) == null || s.call(r, i), i) : null;
  }
  async openBackgroundImage(e) {
    await pa();
    let i;
    e instanceof HTMLImageElement ? i = e.src : e instanceof ln ? i = await e.data : i = e;
    const r = await I().canvas.addMainImage(i);
    return await I().history.addInitial(), r;
  }
  fileIsValid(e) {
    var f, g, l, n, a, h;
    const i = (l = (g = (f = O().config.tools) == null ? void 0 : f.import) == null ? void 0 : g.maxFileSize) != null ? l : BS(10, "MB"), r = [
      ...(h = (a = (n = O().config.tools) == null ? void 0 : n.import) == null ? void 0 : a.validImgExtensions) != null ? h : [],
      "json"
    ], s = zS(e, { maxFileSize: i, allowedFileTypes: r });
    return s ? (Cr.danger(s), !1) : !0;
  }
}
function NS() {
  var e, i;
  const t = (i = (e = O().config.tools) == null ? void 0 : e.import) == null ? void 0 : i.validImgExtensions;
  return t ? { extensions: t } : { types: [Nc.image] };
}
const VS = {
  types: [".json", Nc.json]
};
class $S {
  constructor() {
    Se(this, "watermark", null);
    Se(this, "lineStyle", {
      stroke: "rgba(255,255,255,0.3)",
      strokeWidth: 5,
      strokeLineCap: "round",
      strokeLineJoin: "round"
    });
  }
  add(e) {
    this.createGroup(), this.addText(e), this.addLines(), he().add(this.watermark), I().canvas.render();
  }
  remove() {
    !this.watermark || (he().remove(this.watermark), this.watermark = null, I().canvas.render());
  }
  createGroup() {
    this.watermark = new ye.fabric.Group(void 0, {
      ...zi,
      width: O().original.width,
      height: O().original.height,
      excludeFromExport: !0,
      top: 0,
      left: 0,
      originX: "left",
      originY: "top"
    });
  }
  addText(e) {
    var r;
    const i = new ye.fabric.Text(e, {
      fill: "rgba(255,255,255,0.3)",
      strokeWidth: 2,
      stroke: "rgba(255,255,255,0.4)",
      originX: "center",
      originY: "center",
      fontWeight: 600,
      fontSize: 150,
      fontFamily: "Courier New"
    });
    i.scaleToWidth(O().original.width / 2), (r = this.watermark) == null || r.add(i);
  }
  addLines() {
    var h;
    if (!this.watermark)
      return;
    const e = (h = this.watermark) == null ? void 0 : h.getObjects("text")[0], i = O().original.width / 2, r = O().original.height / 2, s = 100, f = e.width / 4, g = new ye.fabric.Line(void 0, this.lineStyle), l = new ye.fabric.Line(void 0, this.lineStyle), n = new ye.fabric.Line(void 0, this.lineStyle), a = new ye.fabric.Line(void 0, this.lineStyle);
    this.watermark.add(g, l, n, a), g.set({
      x1: f,
      y1: -s,
      x2: i,
      y2: -r
    }), l.set({
      x1: f,
      y1: s,
      x2: i,
      y2: r
    }), n.set({
      x1: -f,
      y1: -s,
      x2: -i,
      y2: -r
    }), a.set({
      x1: -f,
      y1: s,
      x2: -i,
      y2: r
    });
  }
}
var Dp = { exports: {} };
(function(t, e) {
  (function(i, r) {
    r();
  })(qi, function() {
    function i(a, h) {
      return typeof h > "u" ? h = { autoBom: !1 } : typeof h != "object" && (console.warn("Deprecated: Expected third argument to be a object"), h = { autoBom: !h }), h.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type) ? new Blob(["\uFEFF", a], { type: a.type }) : a;
    }
    function r(a, h, o) {
      var u = new XMLHttpRequest();
      u.open("GET", a), u.responseType = "blob", u.onload = function() {
        n(u.response, h, o);
      }, u.onerror = function() {
        console.error("could not download file");
      }, u.send();
    }
    function s(a) {
      var h = new XMLHttpRequest();
      h.open("HEAD", a, !1);
      try {
        h.send();
      } catch {
      }
      return 200 <= h.status && 299 >= h.status;
    }
    function f(a) {
      try {
        a.dispatchEvent(new MouseEvent("click"));
      } catch {
        var h = document.createEvent("MouseEvents");
        h.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), a.dispatchEvent(h);
      }
    }
    var g = typeof window == "object" && window.window === window ? window : typeof self == "object" && self.self === self ? self : typeof qi == "object" && qi.global === qi ? qi : void 0, l = g.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), n = g.saveAs || (typeof window != "object" || window !== g ? function() {
    } : "download" in HTMLAnchorElement.prototype && !l ? function(a, h, o) {
      var u = g.URL || g.webkitURL, c = document.createElement("a");
      h = h || a.name || "download", c.download = h, c.rel = "noopener", typeof a == "string" ? (c.href = a, c.origin === location.origin ? f(c) : s(c.href) ? r(a, h, o) : f(c, c.target = "_blank")) : (c.href = u.createObjectURL(a), setTimeout(function() {
        u.revokeObjectURL(c.href);
      }, 4e4), setTimeout(function() {
        f(c);
      }, 0));
    } : "msSaveOrOpenBlob" in navigator ? function(a, h, o) {
      if (h = h || a.name || "download", typeof a != "string")
        navigator.msSaveOrOpenBlob(i(a, o), h);
      else if (s(a))
        r(a, h, o);
      else {
        var u = document.createElement("a");
        u.href = a, u.target = "_blank", setTimeout(function() {
          f(u);
        });
      }
    } : function(a, h, o, u) {
      if (u = u || open("", "_blank"), u && (u.document.title = u.document.body.innerText = "downloading..."), typeof a == "string")
        return r(a, h, o);
      var c = a.type === "application/octet-stream", d = /constructor/i.test(g.HTMLElement) || g.safari, m = /CriOS\/[\d]+/.test(navigator.userAgent);
      if ((m || c && d || l) && typeof FileReader < "u") {
        var p = new FileReader();
        p.onloadend = function() {
          var y = p.result;
          y = m ? y : y.replace(/^data:[^;]*;/, "data:attachment/file;"), u ? u.location.href = y : location = y, u = null;
        }, p.readAsDataURL(a);
      } else {
        var v = g.URL || g.webkitURL, b = v.createObjectURL(a);
        u ? u.location = b : location.href = b, u = null, setTimeout(function() {
          v.revokeObjectURL(b);
        }, 4e4);
      }
    });
    g.saveAs = n.saveAs = n, t.exports = n;
  });
})(Dp);
function HS(t, e, i) {
  e = e || "", i = i || 512;
  const r = atob(t), s = [];
  for (let f = 0; f < r.length; f += i) {
    const g = r.slice(f, f + i), l = new Array(g.length);
    for (let a = 0; a < g.length; a++)
      l[a] = g.charCodeAt(a);
    const n = new Uint8Array(l);
    s.push(n);
  }
  return new Blob(s, { type: e });
}
class US {
  save(e, i, r) {
    var l, n, a;
    const s = (l = O().config.tools) == null ? void 0 : l.export;
    e = e || (s == null ? void 0 : s.defaultName), i = this.getFormat(i), r = this.getQuality(r);
    const f = `${e}.${i}`;
    this.applyWaterMark();
    const g = i === "json" ? this.getJsonState() : this.getDataUrl(i, r);
    if (I().watermark.remove(), !!g)
      if (O().config.saveUrl)
        fetch(O().config.saveUrl, {
          method: "POST",
          body: JSON.stringify({ data: g, filename: f, format: i })
        });
      else if (O().config.onSave)
        (a = (n = O().config).onSave) == null || a.call(n, g, f, i);
      else {
        const h = this.getCanvasBlob(i, g);
        Dp.exports.saveAs(h, f);
      }
  }
  getDataUrl(e, i) {
    this.prepareCanvas();
    try {
      return e === "svg" ? he().toSVG() : he().toDataURL({
        format: this.getFormat(e),
        quality: this.getQuality(i),
        multiplier: Math.max(
          O().original.width / he().width,
          O().original.height / he().height
        )
      });
    } catch (r) {
      r.message.toLowerCase().includes("tainted") && Cr.danger(ne("Could not export canvas with external image."));
    }
    return null;
  }
  getCanvasBlob(e, i) {
    if (e === "json")
      return new Blob([i], { type: "application/json" });
    if (e === "svg")
      return new Blob([i], { type: "image/svg+xml" });
    const r = `image/${e}`;
    return i = i.replace(/data:image\/([a-z]*)?;base64,/, ""), HS(i, r);
  }
  getJsonState() {
    return JSON.stringify({
      ...us(),
      history: O().history
    });
  }
  prepareCanvas() {
    he().discardActiveObject();
  }
  applyWaterMark() {
    const e = O().config.watermarkText;
    e && I().watermark.add(e);
  }
  getFormat(e) {
    var r;
    const i = (r = O().config.tools) == null ? void 0 : r.export;
    return e = e || (i == null ? void 0 : i.defaultFormat) || "png", e === "jpg" && (e = "jpeg"), e;
  }
  getQuality(e) {
    var r;
    const i = (r = O().config.tools) == null ? void 0 : r.export;
    return e = e || (i == null ? void 0 : i.defaultQuality) || 0.8, e;
  }
}
class WS {
  constructor() {
    Se(this, "previewRect", null);
  }
  async apply(e) {
    this.previewRect || this.showPreview(), this.updatePreview(e), he().remove(this.previewRect), he().clipPath = this.previewRect;
    const i = I().export.getDataUrl();
    i && I().canvas.clear(), this.hidePreview(), i && await I().canvas.addMainImage(i), he().clipPath = void 0;
  }
  getPreviewRadius() {
    var e;
    return ((e = this.previewRect) == null ? void 0 : e.rx) || 0;
  }
  updatePreview(e) {
    !this.previewRect || (this.previewRect.set({
      rx: e,
      ry: e
    }), I().canvas.render());
  }
  showPreview() {
    const e = O().original.width * 0.04;
    this.previewRect = new ye.fabric.Rect({
      width: O().original.width,
      height: O().original.height,
      rx: e,
      ry: e,
      objectCaching: !1,
      fill: "transparent",
      name: "round.rect",
      data: { photaliusInternal: !0 },
      stroke: "rgba(255,255,255,0.8)",
      strokeWidth: 3,
      strokeDashArray: [4, 4],
      selectable: !1,
      evented: !1
    }), he().add(this.previewRect), this.previewRect.moveTo(99), this.previewRect.viewportCenter(), I().canvas.render();
  }
  hidePreview() {
    !this.previewRect || (he().remove(this.previewRect), I().canvas.render(), this.previewRect = null);
  }
}
class YS {
  get straightenAnchor() {
    return he().getObjects().find(
      (e) => e.name === Ne.StraightenAnchor
    );
  }
  rotateLeft() {
    this.rotateFixed(-90);
  }
  rotateRight() {
    this.rotateFixed(90);
  }
  straighten(e) {
    this.storeObjectsRelationToHelper(), I().objects.deselectActive();
    const i = (this.straightenAnchor.data.rotateAngle || 0) + e, r = this.getImageScale(i, this.straightenAnchor);
    this.straightenAnchor.angle = i, this.straightenAnchor.scaleX = r, this.straightenAnchor.scaleY = r, this.straightenAnchor.data.straightenAngle = e, this.transformObjectsBasedOnHelper();
  }
  flip(e) {
    const i = e === "horizontal" ? "flipY" : "flipX";
    I().objects.getAll().forEach((r) => {
      r[i] = !r[i];
    }), I().canvas.render();
  }
  rotateFixed(e) {
    I().zoom.set(1, !1), I().objects.deselectActive();
    const i = this.straightenAnchor.data.rotateAngle || 0;
    e = Math.round(e / 90) * 90;
    const r = i + (this.straightenAnchor.data.straightenAngle || 0) + e;
    I().canvas.resize(O().original.height, O().original.width, {
      applyZoom: !1,
      resizeHelper: !1
    }), this.storeObjectsRelationToHelper(), this.straightenAnchor.rotate(r), this.straightenAnchor.data.rotateAngle = i + e, this.straightenAnchor.center(), this.transformObjectsBasedOnHelper(), I().frame.resize(I().frame.active.currentSizeInPercent), requestAnimationFrame(() => {
      I().zoom.fitToScreen();
    });
  }
  getImageScale(e, i) {
    e = ye.fabric.util.degreesToRadians(e);
    const r = O().original.width, s = O().original.height, f = r / 2, g = s / 2, l = i.width / 2, n = i.height / 2, a = Math.sqrt(f ** 2 + g ** 2), h = Math.asin(g / a);
    let o = (e % (Math.PI * 2) + Math.PI * 4) % (Math.PI * 2);
    o > Math.PI && (o -= Math.PI), o > Math.PI / 2 && o <= Math.PI && (o = Math.PI / 2 - (o - Math.PI / 2));
    const u = Math.PI / 2 - h - Math.abs(o), c = Math.abs(h - Math.abs(o)), d = Math.cos(u) * a, m = Math.cos(c) * a;
    return Math.max(m / l, d / n);
  }
  storeObjectsRelationToHelper() {
    I().objects.getAll().forEach((e) => {
      if (e !== this.straightenAnchor) {
        const i = ye.fabric.util.multiplyTransformMatrices(
          ye.fabric.util.invertTransform(
            this.straightenAnchor.calcTransformMatrix()
          ),
          e.calcTransformMatrix()
        );
        e.data = { ...e.data, relationToCanvas: i };
      }
    });
  }
  transformObjectsBasedOnHelper() {
    I().objects.getAll().forEach((e) => {
      if (e.data.relationToCanvas) {
        const i = ye.fabric.util.multiplyTransformMatrices(
          this.straightenAnchor.calcTransformMatrix(),
          e.data.relationToCanvas
        ), r = ye.fabric.util.qrDecompose(i);
        e.set({ flipX: !1, flipY: !1 }), e.setPositionByOrigin(
          { x: r.translateX, y: r.translateY },
          "center",
          "center"
        ), e.set(r), e.setCoords(), e.data.relationToCanvas = null;
      }
    });
  }
  resetStraightenAnchor() {
    const e = this.straightenAnchor;
    e && he().remove(e);
    const i = new ye.fabric.Rect({
      ...zi,
      name: Ne.StraightenAnchor,
      visible: !1,
      width: O().original.width,
      height: O().original.height,
      data: {
        photaliusInternal: !0,
        straightenAngle: 0,
        rotateAngle: 0
      }
    });
    he().add(i), i.viewportCenter();
  }
}
function GS(t) {
  const e = N_(t);
  O().editor.fabric = e, oe.setState({ fabric: e }), O().editor.tools = {
    canvas: new $_(),
    objects: new X_(),
    zoom: new V_(),
    history: new Q_(),
    filter: new rS(),
    resize: new sS(),
    crop: new hS(),
    merge: new tS(),
    shape: new fS(),
    frame: new mS(),
    text: new vS(),
    draw: new _S(),
    transform: new YS(),
    import: new jS(),
    watermark: new $S(),
    export: new US(),
    corners: new WS()
  };
}
function Nu(t, e) {
  const i = new ResizeObserver((r) => {
    const s = r[0].contentRect;
    e({ width: s.width, height: s.height });
  });
  return t.current && i.observe(t.current), () => {
    t.current && i.unobserve(t.current);
  };
}
function Vu(t) {
  const e = t.getBoundingClientRect();
  return {
    top: e.top,
    right: e.right,
    bottom: e.bottom,
    left: e.left,
    width: e.width,
    height: e.height
  };
}
const Ip = "flex flex-shrink-0 items-center justify-between px-12 py-[9px] w-full h-[54px]", Rp = {
  initial: {
    opacity: 0
  },
  animate: {
    opacity: 1
  },
  exit: {
    opacity: 0,
    position: "absolute"
  },
  transition: {
    type: "tween",
    duration: 0.15
  }
};
function Vc(t, { padding: e, equalWidth: i, variant: r } = {}) {
  switch (t) {
    case "2xs":
      return r === "link" ? "text-xs" : `text-xs h-24 ${i ? "w-24" : e || "px-10"}`;
    case "xs":
      return r === "link" ? "text-xs" : `text-xs h-30 ${i ? "w-30" : e || "px-14"}`;
    case "sm":
      return r === "link" ? "text-sm" : `text-sm h-36 ${i ? "w-36" : e || "px-18"}`;
    case "md":
      return r === "link" ? "text-base" : `text-base h-42 ${i ? "w-42" : e || "px-22"}`;
    case "lg":
      return r === "link" ? "text-lg" : `text-base h-50 ${i ? "w-50" : e || "px-26"}`;
    case "xl":
      return r === "link" ? "text-xl" : `text-lg h-60 ${i ? "w-60" : e || "px-32"}`;
    default:
      return t || "";
  }
}
function XS(t) {
  const { variant: e, shadow: i, whitespace: r = "whitespace-nowrap" } = t, s = { ...t, border: t.border || "border" };
  let f = [];
  return e === "outline" ? f = KS(s) : e === "text" ? f = qS(s) : e === "flat" || e === "raised" ? f = JS(s) : e === "link" && (f = ZS(s)), [
    ...f,
    i || e === "raised" && "shadow-md",
    r,
    e && "align-middle inline-flex flex-shrink-0 items-center transition-button duration-200",
    "select-none appearance-none no-underline outline-none disabled:pointer-events-none disabled:cursor-default"
  ];
}
function KS({ color: t, border: e }) {
  const i = "disabled:text-disabled disabled:bg-transparent disabled:border-disabled-bg";
  switch (t) {
    case "primary":
      return [
        `text-primary bg-transparent ${e} border-primary/50`,
        "hover:bg-primary/hover hover:border-primary",
        i
      ];
    case "danger":
      return [
        `text-danger bg-transparent ${e} border-danger/50`,
        "hover:bg-danger/4 hover:border-danger",
        i
      ];
    case "paper":
      return [`text bg-paper ${e}`, "hover:bg-hover", i];
    default:
      return [`bg-transparent ${e}`, "hover:bg-hover", i];
  }
}
function qS({ color: t }) {
  const e = "disabled:text-disabled disabled:bg-transparent";
  switch (t) {
    case "primary":
      return [
        "text-primary bg-transparent border-transparent",
        "hover:bg-primary/4",
        e
      ];
    case "danger":
      return [
        "text-danger bg-transparent border-transparent",
        "hover:bg-danger/4",
        e
      ];
    case "white":
      return [
        "text-white bg-transparent border-transparent",
        "hover:bg-white/20",
        "disabled:text-white/70 disabled:bg-transparent"
      ];
    default:
      return ["bg-transparent border-transparent", "hover:bg-hover", e];
  }
}
function ZS({ color: t }) {
  switch (t) {
    case "primary":
      return ["text-primary", "hover:underline", "disabled:text-disabled"];
    case "danger":
      return ["text-danger", "hover:underline", "disabled:text-disabled"];
    default:
      return ["text-main", "hover:underline", "disabled:text-disabled"];
  }
}
function JS({ color: t, border: e }) {
  const i = "disabled:text-disabled disabled:bg-disabled disabled:border-transparent disabled:shadow-none";
  switch (t) {
    case "primary":
      return [
        `text-on-primary bg-primary ${e} border-primary`,
        "hover:bg-primary-dark hover:border-primary-dark",
        i
      ];
    case "danger":
      return [
        `text-white bg-danger ${e} border-danger`,
        "hover:bg-danger/90 hover:border-danger/90",
        i
      ];
    case "chip":
      return [
        `text-main bg-chip ${e} border-chip`,
        "hover:bg-chip/90 hover:border-chip/90",
        i
      ];
    case "paper":
      return [
        `text-main bg-paper ${e} border-paper`,
        "hover:bg-paper/90 hover:border-paper/90",
        i
      ];
    case "white":
      return [
        `text-black bg-white ${e} border-white`,
        "hover:bg-white",
        i
      ];
    default:
      return [`bg ${e} border-background`, "hover:bg-hover", i];
  }
}
function st(t) {
  return t && ((e) => {
    e.currentTarget.contains(e.target) && t(e);
  });
}
const Yt = qe((t, e) => {
  const {
    children: i,
    color: r = null,
    variant: s,
    radius: f,
    shadow: g,
    whitespace: l,
    justify: n = "justify-center",
    className: a,
    href: h,
    form: o,
    border: u,
    elementType: c,
    to: d,
    relative: m,
    replace: p,
    end: v,
    type: b = "button",
    onClick: y,
    onPointerDown: w,
    onPointerUp: _,
    onKeyDown: S,
    ...C
  } = t, k = c || (h ? "a" : "button"), R = k === "a";
  return /* @__PURE__ */ x(k, {
    ref: e,
    form: R ? void 0 : o,
    href: h,
    to: d,
    relative: m,
    type: R ? void 0 : b,
    replace: p,
    end: v,
    onPointerDown: st(w),
    onPointerUp: st(_),
    onClick: st(y),
    onKeyDown: st(S),
    className: ae("focus-visible:ring", XS({
      variant: s,
      color: r,
      border: u,
      whitespace: l
    }), f, n, a),
    ...C,
    children: i
  });
}), Qe = ue.forwardRef(({
  children: t,
  startIcon: e,
  endIcon: i,
  size: r = "sm",
  className: s,
  equalWidth: f = !1,
  radius: g = "rounded",
  variant: l = "text",
  ...n
}, a) => {
  const h = ae("font-semibold", Vc(r, {
    equalWidth: f,
    variant: l
  }), s);
  return /* @__PURE__ */ ie(Yt, {
    className: h,
    ref: a,
    radius: g,
    variant: l,
    ...n,
    children: [e && /* @__PURE__ */ x($u, {
      position: "start",
      icon: e,
      size: r
    }), t, i && /* @__PURE__ */ x($u, {
      position: "end",
      icon: i,
      size: r
    })]
  });
});
function $u({
  icon: t,
  position: e,
  size: i
}) {
  const r = ae("m-auto", {
    "-ml-4 mr-8": e === "start",
    "-mr-4 ml-8": e === "end"
  }, t.props.className);
  return ue.cloneElement(t, {
    className: r,
    size: i
  });
}
var Lp = { exports: {} };
(function(t) {
  (function() {
    var e = Object.assign;
    typeof e != "function" && (e = function() {
      var s = arguments, f = arguments[0];
      if (f == null)
        throw new TypeError("Cannot convert undefined or null to object");
      f = Object(f);
      for (var g = 1; g < s.length; g++)
        if (s[g] && typeof s[g] == "object")
          for (var l in s[g])
            f[l] = s[g][l];
      return f;
    });
    function i(s) {
      var f = s + "", g = f.indexOf("...");
      return g >= 0 && (g < f.indexOf(")") || f.indexOf("arguments") >= 0);
    }
    function r(s, f) {
      f || (f = {});
      var g = f.vargs || i(s), l = /* @__PURE__ */ Object.create(null), n = [], a = [], h, o = /* @__PURE__ */ new WeakMap(), u = function(y, w, _) {
        return setTimeout(function() {
          if (_) {
            w.splice(y, 1), _.splice(y, 1);
            return;
          }
          w instanceof WeakMap ? w.delete(y) : delete w[y];
        }, f.maxAge);
      }, c = f.maxAge > 0 && f.maxAge < 1 / 0 ? u : 0, d = f.equals ? f.equals : function(y, w) {
        return y === w;
      }, m = f.maxArgs, p = f.serializer, v, b;
      return s.length === 1 && !f.equals && !g ? (v = function(y) {
        var w = typeof y;
        if (!p && (w === "object" && y || w === "function")) {
          var _;
          return o.get(y) || (!c || c(y, o), o.set(y, _ = s.call(this, y)), _);
        }
        var S = w === "number" || w === "boolean" || y == null ? y : w === "string" ? JSON.stringify(y) : p(y);
        return l[S] || (!c || c(S, l), l[S] = s.call(this, y));
      }.bind(this), b = 1) : v = function() {
        var y = arguments.length;
        if (!y && h != null)
          return a[h];
        var w = m || y, _;
        for (_ = n.length - 1; _ >= 0; _--)
          if (!(!m && n[_].length !== w)) {
            for (var S = w - 1; S >= 0 && d(n[_][S], arguments[S]); S--)
              if (S === 0)
                return a[_];
          }
        return _ = n.length - (_ + 1), !y && h == null && (h = _), !c || c(_, a, n), a[_] = s.apply(this, n[_] = arguments);
      }.bind(this), v.clear = function() {
        o = /* @__PURE__ */ new WeakMap(), l = /* @__PURE__ */ Object.create(null), n = [], a = [], h = void 0;
      }, v.keys = function() {
        return b ? null : n.slice();
      }, v.values = function() {
        return b ? null : a.slice();
      }, v.keyValues = function() {
        return b ? { primitives: e({}, l), objects: o } : null;
      }, v;
    }
    t.exports = r, typeof window < "u" && (window.nanomemoize = r);
  }).call(qi);
})(Lp);
const Sn = Lp.exports;
function QS({
  children: t,
  label: e,
  index: i
}) {
  const r = Ot();
  return /* @__PURE__ */ ie("div", {
    role: "group",
    className: ae(i !== 0 && "border-t my-4"),
    "aria-labelledby": e ? `be-select-${r}` : void 0,
    children: [e && /* @__PURE__ */ x("div", {
      className: "block uppercase text-muted text-xs px-16 py-10",
      role: "presentation",
      id: `be-select-${r}`,
      "aria-hidden": "true",
      children: e
    }), t]
  });
}
const eC = Sn(
  ({ maxItems: t, children: e, items: i, inputValue: r }) => {
    let s = iC({ children: e, items: i }), f = tC({ collection: s, inputValue: r });
    return t && (s = new Map([...s.entries()].slice(0, t)), f = new Map(
      [...f.entries()].slice(0, t)
    )), { collection: s, filteredCollection: f };
  }
), tC = Sn(
  ({ collection: t, inputValue: e }) => {
    let i = /* @__PURE__ */ new Map();
    const r = e ? `${e}`.toLowerCase().trim() : "";
    if (!r)
      i = t;
    else {
      let s = 0;
      t.forEach((f, g) => {
        (f.item ? JSON.stringify(f.item) : f.textLabel).toLowerCase().trim().includes(r) && i.set(g, { ...f, index: s++ });
      });
    }
    return i;
  }
), iC = Sn(
  ({ children: t, items: e }) => {
    let i;
    e && typeof t == "function" ? i = e.map((g) => t(g)) : i = t;
    const r = /* @__PURE__ */ new Map();
    let s = 0;
    const f = (g, l, n, a) => {
      const h = s++, o = l ? e == null ? void 0 : e[n].items[a] : e == null ? void 0 : e[h];
      r.set(g.props.value, {
        index: h,
        element: g,
        textLabel: rC(g),
        item: o,
        section: l,
        isDisabled: g.props.isDisabled,
        value: g.props.value
      });
    };
    return Pi.forEach(i, (g, l) => {
      !Ht(g) || (g.type === QS ? Pi.forEach(
        g.props.children,
        (n, a) => {
          f(n, g, l, a);
        }
      ) : f(g));
    }), r;
  }
);
function rC(t) {
  var i;
  const e = t.props.children;
  return t.props.textLabel ? t.props.textLabel : e && ((i = e.props) == null ? void 0 : i.defaultMessage) ? e.props.defaultMessage[0].value : `${e}` || "";
}
function kr(t) {
  return t.split("-")[1];
}
function $c(t) {
  return t === "y" ? "height" : "width";
}
function li(t) {
  return t.split("-")[0];
}
function Or(t) {
  return ["top", "bottom"].includes(li(t)) ? "x" : "y";
}
function Hu(t, e, i) {
  let {
    reference: r,
    floating: s
  } = t;
  const f = r.x + r.width / 2 - s.width / 2, g = r.y + r.height / 2 - s.height / 2, l = Or(e), n = $c(l), a = r[n] / 2 - s[n] / 2, h = li(e), o = l === "x";
  let u;
  switch (h) {
    case "top":
      u = {
        x: f,
        y: r.y - s.height
      };
      break;
    case "bottom":
      u = {
        x: f,
        y: r.y + r.height
      };
      break;
    case "right":
      u = {
        x: r.x + r.width,
        y: g
      };
      break;
    case "left":
      u = {
        x: r.x - s.width,
        y: g
      };
      break;
    default:
      u = {
        x: r.x,
        y: r.y
      };
  }
  switch (kr(e)) {
    case "start":
      u[l] -= a * (i && o ? -1 : 1);
      break;
    case "end":
      u[l] += a * (i && o ? -1 : 1);
      break;
  }
  return u;
}
const nC = async (t, e, i) => {
  const {
    placement: r = "bottom",
    strategy: s = "absolute",
    middleware: f = [],
    platform: g
  } = i, l = f.filter(Boolean), n = await (g.isRTL == null ? void 0 : g.isRTL(e));
  let a = await g.getElementRects({
    reference: t,
    floating: e,
    strategy: s
  }), {
    x: h,
    y: o
  } = Hu(a, r, n), u = r, c = {}, d = 0;
  for (let m = 0; m < l.length; m++) {
    const {
      name: p,
      fn: v
    } = l[m], {
      x: b,
      y,
      data: w,
      reset: _
    } = await v({
      x: h,
      y: o,
      initialPlacement: r,
      placement: u,
      strategy: s,
      middlewareData: c,
      rects: a,
      platform: g,
      elements: {
        reference: t,
        floating: e
      }
    });
    if (h = b != null ? b : h, o = y != null ? y : o, c = {
      ...c,
      [p]: {
        ...c[p],
        ...w
      }
    }, _ && d <= 50) {
      d++, typeof _ == "object" && (_.placement && (u = _.placement), _.rects && (a = _.rects === !0 ? await g.getElementRects({
        reference: t,
        floating: e,
        strategy: s
      }) : _.rects), {
        x: h,
        y: o
      } = Hu(a, u, n)), m = -1;
      continue;
    }
  }
  return {
    x: h,
    y: o,
    placement: u,
    strategy: s,
    middlewareData: c
  };
};
function sC(t) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...t
  };
}
function Fp(t) {
  return typeof t != "number" ? sC(t) : {
    top: t,
    right: t,
    bottom: t,
    left: t
  };
}
function ws(t) {
  return {
    ...t,
    top: t.y,
    left: t.x,
    right: t.x + t.width,
    bottom: t.y + t.height
  };
}
async function Hc(t, e) {
  var i;
  e === void 0 && (e = {});
  const {
    x: r,
    y: s,
    platform: f,
    rects: g,
    elements: l,
    strategy: n
  } = t, {
    boundary: a = "clippingAncestors",
    rootBoundary: h = "viewport",
    elementContext: o = "floating",
    altBoundary: u = !1,
    padding: c = 0
  } = e, d = Fp(c), p = l[u ? o === "floating" ? "reference" : "floating" : o], v = ws(await f.getClippingRect({
    element: (i = await (f.isElement == null ? void 0 : f.isElement(p))) == null || i ? p : p.contextElement || await (f.getDocumentElement == null ? void 0 : f.getDocumentElement(l.floating)),
    boundary: a,
    rootBoundary: h,
    strategy: n
  })), b = o === "floating" ? {
    ...g.floating,
    x: r,
    y: s
  } : g.reference, y = await (f.getOffsetParent == null ? void 0 : f.getOffsetParent(l.floating)), w = await (f.isElement == null ? void 0 : f.isElement(y)) ? await (f.getScale == null ? void 0 : f.getScale(y)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, _ = ws(f.convertOffsetParentRelativeRectToViewportRelativeRect ? await f.convertOffsetParentRelativeRectToViewportRelativeRect({
    rect: b,
    offsetParent: y,
    strategy: n
  }) : b);
  return {
    top: (v.top - _.top + d.top) / w.y,
    bottom: (_.bottom - v.bottom + d.bottom) / w.y,
    left: (v.left - _.left + d.left) / w.x,
    right: (_.right - v.right + d.right) / w.x
  };
}
const Pa = Math.min, xi = Math.max;
function Aa(t, e, i) {
  return xi(t, Pa(e, i));
}
const Uu = (t) => ({
  name: "arrow",
  options: t,
  async fn(e) {
    const {
      element: i,
      padding: r = 0
    } = t || {}, {
      x: s,
      y: f,
      placement: g,
      rects: l,
      platform: n,
      elements: a
    } = e;
    if (i == null)
      return {};
    const h = Fp(r), o = {
      x: s,
      y: f
    }, u = Or(g), c = $c(u), d = await n.getDimensions(i), m = u === "y", p = m ? "top" : "left", v = m ? "bottom" : "right", b = m ? "clientHeight" : "clientWidth", y = l.reference[c] + l.reference[u] - o[u] - l.floating[c], w = o[u] - l.reference[u], _ = await (n.getOffsetParent == null ? void 0 : n.getOffsetParent(i));
    let S = _ ? _[b] : 0;
    (!S || !await (n.isElement == null ? void 0 : n.isElement(_))) && (S = a.floating[b] || l.floating[c]);
    const C = y / 2 - w / 2, k = h[p], R = S - d[c] - h[v], B = S / 2 - d[c] / 2 + C, N = Aa(k, B, R), ee = kr(g) != null && B != N && l.reference[c] / 2 - (B < k ? h[p] : h[v]) - d[c] / 2 < 0 ? B < k ? k - B : R - B : 0;
    return {
      [u]: o[u] - ee,
      data: {
        [u]: N,
        centerOffset: B - N
      }
    };
  }
}), oC = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function xs(t) {
  return t.replace(/left|right|bottom|top/g, (e) => oC[e]);
}
function aC(t, e, i) {
  i === void 0 && (i = !1);
  const r = kr(t), s = Or(t), f = $c(s);
  let g = s === "x" ? r === (i ? "end" : "start") ? "right" : "left" : r === "start" ? "bottom" : "top";
  return e.reference[f] > e.floating[f] && (g = xs(g)), {
    main: g,
    cross: xs(g)
  };
}
const cC = {
  start: "end",
  end: "start"
};
function Ma(t) {
  return t.replace(/start|end/g, (e) => cC[e]);
}
function lC(t) {
  const e = xs(t);
  return [Ma(t), e, Ma(e)];
}
function uC(t, e, i) {
  const r = ["left", "right"], s = ["right", "left"], f = ["top", "bottom"], g = ["bottom", "top"];
  switch (t) {
    case "top":
    case "bottom":
      return i ? e ? s : r : e ? r : s;
    case "left":
    case "right":
      return e ? f : g;
    default:
      return [];
  }
}
function hC(t, e, i, r) {
  const s = kr(t);
  let f = uC(li(t), i === "start", r);
  return s && (f = f.map((g) => g + "-" + s), e && (f = f.concat(f.map(Ma)))), f;
}
const fC = function(t) {
  return t === void 0 && (t = {}), {
    name: "flip",
    options: t,
    async fn(e) {
      var i;
      const {
        placement: r,
        middlewareData: s,
        rects: f,
        initialPlacement: g,
        platform: l,
        elements: n
      } = e, {
        mainAxis: a = !0,
        crossAxis: h = !0,
        fallbackPlacements: o,
        fallbackStrategy: u = "bestFit",
        fallbackAxisSideDirection: c = "none",
        flipAlignment: d = !0,
        ...m
      } = t, p = li(r), v = li(g) === g, b = await (l.isRTL == null ? void 0 : l.isRTL(n.floating)), y = o || (v || !d ? [xs(g)] : lC(g));
      !o && c !== "none" && y.push(...hC(g, d, c, b));
      const w = [g, ...y], _ = await Hc(e, m), S = [];
      let C = ((i = s.flip) == null ? void 0 : i.overflows) || [];
      if (a && S.push(_[p]), h) {
        const {
          main: N,
          cross: K
        } = aC(r, f, b);
        S.push(_[N], _[K]);
      }
      if (C = [...C, {
        placement: r,
        overflows: S
      }], !S.every((N) => N <= 0)) {
        var k, R;
        const N = (((k = s.flip) == null ? void 0 : k.index) || 0) + 1, K = w[N];
        if (K)
          return {
            data: {
              index: N,
              overflows: C
            },
            reset: {
              placement: K
            }
          };
        let ee = (R = C.filter((G) => G.overflows[0] <= 0).sort((G, W) => G.overflows[1] - W.overflows[1])[0]) == null ? void 0 : R.placement;
        if (!ee)
          switch (u) {
            case "bestFit": {
              var B;
              const G = (B = C.map((W) => [W.placement, W.overflows.filter((re) => re > 0).reduce((re, ce) => re + ce, 0)]).sort((W, re) => W[1] - re[1])[0]) == null ? void 0 : B[0];
              G && (ee = G);
              break;
            }
            case "initialPlacement":
              ee = g;
              break;
          }
        if (r !== ee)
          return {
            reset: {
              placement: ee
            }
          };
      }
      return {};
    }
  };
};
async function dC(t, e) {
  const {
    placement: i,
    platform: r,
    elements: s
  } = t, f = await (r.isRTL == null ? void 0 : r.isRTL(s.floating)), g = li(i), l = kr(i), n = Or(i) === "x", a = ["left", "top"].includes(g) ? -1 : 1, h = f && n ? -1 : 1, o = typeof e == "function" ? e(t) : e;
  let {
    mainAxis: u,
    crossAxis: c,
    alignmentAxis: d
  } = typeof o == "number" ? {
    mainAxis: o,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...o
  };
  return l && typeof d == "number" && (c = l === "end" ? d * -1 : d), n ? {
    x: c * h,
    y: u * a
  } : {
    x: u * a,
    y: c * h
  };
}
const pC = function(t) {
  return t === void 0 && (t = 0), {
    name: "offset",
    options: t,
    async fn(e) {
      const {
        x: i,
        y: r
      } = e, s = await dC(e, t);
      return {
        x: i + s.x,
        y: r + s.y,
        data: s
      };
    }
  };
};
function gC(t) {
  return t === "x" ? "y" : "x";
}
const mC = function(t) {
  return t === void 0 && (t = {}), {
    name: "shift",
    options: t,
    async fn(e) {
      const {
        x: i,
        y: r,
        placement: s
      } = e, {
        mainAxis: f = !0,
        crossAxis: g = !1,
        limiter: l = {
          fn: (p) => {
            let {
              x: v,
              y: b
            } = p;
            return {
              x: v,
              y: b
            };
          }
        },
        ...n
      } = t, a = {
        x: i,
        y: r
      }, h = await Hc(e, n), o = Or(li(s)), u = gC(o);
      let c = a[o], d = a[u];
      if (f) {
        const p = o === "y" ? "top" : "left", v = o === "y" ? "bottom" : "right", b = c + h[p], y = c - h[v];
        c = Aa(b, c, y);
      }
      if (g) {
        const p = u === "y" ? "top" : "left", v = u === "y" ? "bottom" : "right", b = d + h[p], y = d - h[v];
        d = Aa(b, d, y);
      }
      const m = l.fn({
        ...e,
        [o]: c,
        [u]: d
      });
      return {
        ...m,
        data: {
          x: m.x - i,
          y: m.y - r
        }
      };
    }
  };
}, vC = function(t) {
  return t === void 0 && (t = {}), {
    name: "size",
    options: t,
    async fn(e) {
      const {
        placement: i,
        rects: r,
        platform: s,
        elements: f
      } = e, {
        apply: g = () => {
        },
        ...l
      } = t, n = await Hc(e, l), a = li(i), h = kr(i), u = Or(i) === "x", {
        width: c,
        height: d
      } = r.floating;
      let m, p;
      a === "top" || a === "bottom" ? (m = a, p = h === (await (s.isRTL == null ? void 0 : s.isRTL(f.floating)) ? "start" : "end") ? "left" : "right") : (p = a, m = h === "end" ? "top" : "bottom");
      const v = d - n[m], b = c - n[p], y = !e.middlewareData.shift;
      let w = v, _ = b;
      if (u) {
        const C = c - n.left - n.right;
        _ = h || y ? Pa(b, C) : C;
      } else {
        const C = d - n.top - n.bottom;
        w = h || y ? Pa(v, C) : C;
      }
      if (y && !h) {
        const C = xi(n.left, 0), k = xi(n.right, 0), R = xi(n.top, 0), B = xi(n.bottom, 0);
        u ? _ = c - 2 * (C !== 0 || k !== 0 ? C + k : xi(n.left, n.right)) : w = d - 2 * (R !== 0 || B !== 0 ? R + B : xi(n.top, n.bottom));
      }
      await g({
        ...e,
        availableWidth: _,
        availableHeight: w
      });
      const S = await s.getDimensions(f.floating);
      return c !== S.width || d !== S.height ? {
        reset: {
          rects: !0
        }
      } : {};
    }
  };
};
function ft(t) {
  var e;
  return ((e = t.ownerDocument) == null ? void 0 : e.defaultView) || window;
}
function Et(t) {
  return ft(t).getComputedStyle(t);
}
function zp(t) {
  return t instanceof ft(t).Node;
}
function ui(t) {
  return zp(t) ? (t.nodeName || "").toLowerCase() : "";
}
let Un;
function Bp() {
  if (Un)
    return Un;
  const t = navigator.userAgentData;
  return t && Array.isArray(t.brands) ? (Un = t.brands.map((e) => e.brand + "/" + e.version).join(" "), Un) : navigator.userAgent;
}
function kt(t) {
  return t instanceof ft(t).HTMLElement;
}
function dt(t) {
  return t instanceof ft(t).Element;
}
function Wu(t) {
  if (typeof ShadowRoot > "u")
    return !1;
  const e = ft(t).ShadowRoot;
  return t instanceof e || t instanceof ShadowRoot;
}
function Cn(t) {
  const {
    overflow: e,
    overflowX: i,
    overflowY: r,
    display: s
  } = Et(t);
  return /auto|scroll|overlay|hidden|clip/.test(e + r + i) && !["inline", "contents"].includes(s);
}
function bC(t) {
  return ["table", "td", "th"].includes(ui(t));
}
function Uc(t) {
  const e = /firefox/i.test(Bp()), i = Et(t), r = i.backdropFilter || i.WebkitBackdropFilter;
  return i.transform !== "none" || i.perspective !== "none" || (r ? r !== "none" : !1) || e && i.willChange === "filter" || e && (i.filter ? i.filter !== "none" : !1) || ["transform", "perspective"].some((s) => i.willChange.includes(s)) || ["paint", "layout", "strict", "content"].some((s) => {
    const f = i.contain;
    return f != null ? f.includes(s) : !1;
  });
}
function Wc() {
  return /^((?!chrome|android).)*safari/i.test(Bp());
}
function Gs(t) {
  return ["html", "body", "#document"].includes(ui(t));
}
const Yu = Math.min, Yr = Math.max, _s = Math.round;
function jp(t) {
  const e = Et(t);
  let i = parseFloat(e.width) || 0, r = parseFloat(e.height) || 0;
  const s = kt(t), f = s ? t.offsetWidth : i, g = s ? t.offsetHeight : r, l = _s(i) !== f || _s(r) !== g;
  return l && (i = f, r = g), {
    width: i,
    height: r,
    fallback: l
  };
}
function Np(t) {
  return dt(t) ? t : t.contextElement;
}
const Vp = {
  x: 1,
  y: 1
};
function lr(t) {
  const e = Np(t);
  if (!kt(e))
    return Vp;
  const i = e.getBoundingClientRect(), {
    width: r,
    height: s,
    fallback: f
  } = jp(e);
  let g = (f ? _s(i.width) : i.width) / r, l = (f ? _s(i.height) : i.height) / s;
  return (!g || !Number.isFinite(g)) && (g = 1), (!l || !Number.isFinite(l)) && (l = 1), {
    x: g,
    y: l
  };
}
function Ri(t, e, i, r) {
  var s, f;
  e === void 0 && (e = !1), i === void 0 && (i = !1);
  const g = t.getBoundingClientRect(), l = Np(t);
  let n = Vp;
  e && (r ? dt(r) && (n = lr(r)) : n = lr(t));
  const a = l ? ft(l) : window, h = Wc() && i;
  let o = (g.left + (h && ((s = a.visualViewport) == null ? void 0 : s.offsetLeft) || 0)) / n.x, u = (g.top + (h && ((f = a.visualViewport) == null ? void 0 : f.offsetTop) || 0)) / n.y, c = g.width / n.x, d = g.height / n.y;
  if (l) {
    const m = ft(l), p = r && dt(r) ? ft(r) : r;
    let v = m.frameElement;
    for (; v && r && p !== m; ) {
      const b = lr(v), y = v.getBoundingClientRect(), w = getComputedStyle(v);
      y.x += (v.clientLeft + parseFloat(w.paddingLeft)) * b.x, y.y += (v.clientTop + parseFloat(w.paddingTop)) * b.y, o *= b.x, u *= b.y, c *= b.x, d *= b.y, o += y.x, u += y.y, v = ft(v).frameElement;
    }
  }
  return ws({
    width: c,
    height: d,
    x: o,
    y: u
  });
}
function pi(t) {
  return ((zp(t) ? t.ownerDocument : t.document) || window.document).documentElement;
}
function Xs(t) {
  return dt(t) ? {
    scrollLeft: t.scrollLeft,
    scrollTop: t.scrollTop
  } : {
    scrollLeft: t.pageXOffset,
    scrollTop: t.pageYOffset
  };
}
function yC(t) {
  let {
    rect: e,
    offsetParent: i,
    strategy: r
  } = t;
  const s = kt(i), f = pi(i);
  if (i === f)
    return e;
  let g = {
    scrollLeft: 0,
    scrollTop: 0
  }, l = {
    x: 1,
    y: 1
  };
  const n = {
    x: 0,
    y: 0
  };
  if ((s || !s && r !== "fixed") && ((ui(i) !== "body" || Cn(f)) && (g = Xs(i)), kt(i))) {
    const a = Ri(i);
    l = lr(i), n.x = a.x + i.clientLeft, n.y = a.y + i.clientTop;
  }
  return {
    width: e.width * l.x,
    height: e.height * l.y,
    x: e.x * l.x - g.scrollLeft * l.x + n.x,
    y: e.y * l.y - g.scrollTop * l.y + n.y
  };
}
function $p(t) {
  return Ri(pi(t)).left + Xs(t).scrollLeft;
}
function wC(t) {
  const e = pi(t), i = Xs(t), r = t.ownerDocument.body, s = Yr(e.scrollWidth, e.clientWidth, r.scrollWidth, r.clientWidth), f = Yr(e.scrollHeight, e.clientHeight, r.scrollHeight, r.clientHeight);
  let g = -i.scrollLeft + $p(t);
  const l = -i.scrollTop;
  return Et(r).direction === "rtl" && (g += Yr(e.clientWidth, r.clientWidth) - s), {
    width: s,
    height: f,
    x: g,
    y: l
  };
}
function wr(t) {
  if (ui(t) === "html")
    return t;
  const e = t.assignedSlot || t.parentNode || Wu(t) && t.host || pi(t);
  return Wu(e) ? e.host : e;
}
function Hp(t) {
  const e = wr(t);
  return Gs(e) ? e.ownerDocument.body : kt(e) && Cn(e) ? e : Hp(e);
}
function Gr(t, e) {
  var i;
  e === void 0 && (e = []);
  const r = Hp(t), s = r === ((i = t.ownerDocument) == null ? void 0 : i.body), f = ft(r);
  return s ? e.concat(f, f.visualViewport || [], Cn(r) ? r : []) : e.concat(r, Gr(r));
}
function xC(t, e) {
  const i = ft(t), r = pi(t), s = i.visualViewport;
  let f = r.clientWidth, g = r.clientHeight, l = 0, n = 0;
  if (s) {
    f = s.width, g = s.height;
    const a = Wc();
    (!a || a && e === "fixed") && (l = s.offsetLeft, n = s.offsetTop);
  }
  return {
    width: f,
    height: g,
    x: l,
    y: n
  };
}
function _C(t, e) {
  const i = Ri(t, !0, e === "fixed"), r = i.top + t.clientTop, s = i.left + t.clientLeft, f = kt(t) ? lr(t) : {
    x: 1,
    y: 1
  }, g = t.clientWidth * f.x, l = t.clientHeight * f.y, n = s * f.x, a = r * f.y;
  return {
    width: g,
    height: l,
    x: n,
    y: a
  };
}
function Gu(t, e, i) {
  let r;
  if (e === "viewport")
    r = xC(t, i);
  else if (e === "document")
    r = wC(pi(t));
  else if (dt(e))
    r = _C(e, i);
  else {
    const g = {
      ...e
    };
    if (Wc()) {
      var s, f;
      const l = ft(t);
      g.x -= ((s = l.visualViewport) == null ? void 0 : s.offsetLeft) || 0, g.y -= ((f = l.visualViewport) == null ? void 0 : f.offsetTop) || 0;
    }
    r = g;
  }
  return ws(r);
}
function Up(t, e) {
  const i = wr(t);
  return i === e || !dt(i) || Gs(i) ? !1 : Et(i).position === "fixed" || Up(i, e);
}
function SC(t, e) {
  const i = e.get(t);
  if (i)
    return i;
  let r = Gr(t).filter((l) => dt(l) && ui(l) !== "body"), s = null;
  const f = Et(t).position === "fixed";
  let g = f ? wr(t) : t;
  for (; dt(g) && !Gs(g); ) {
    const l = Et(g), n = Uc(g);
    !n && l.position === "fixed" && (s = null), (f ? !n && !s : !n && l.position === "static" && !!s && ["absolute", "fixed"].includes(s.position) || Cn(g) && !n && Up(t, g)) ? r = r.filter((h) => h !== g) : s = l, g = wr(g);
  }
  return e.set(t, r), r;
}
function CC(t) {
  let {
    element: e,
    boundary: i,
    rootBoundary: r,
    strategy: s
  } = t;
  const g = [...i === "clippingAncestors" ? SC(e, this._c) : [].concat(i), r], l = g[0], n = g.reduce((a, h) => {
    const o = Gu(e, h, s);
    return a.top = Yr(o.top, a.top), a.right = Yu(o.right, a.right), a.bottom = Yu(o.bottom, a.bottom), a.left = Yr(o.left, a.left), a;
  }, Gu(e, l, s));
  return {
    width: n.right - n.left,
    height: n.bottom - n.top,
    x: n.left,
    y: n.top
  };
}
function TC(t) {
  return jp(t);
}
function Xu(t, e) {
  return !kt(t) || Et(t).position === "fixed" ? null : e ? e(t) : t.offsetParent;
}
function EC(t) {
  let e = wr(t);
  for (; kt(e) && !Gs(e); ) {
    if (Uc(e))
      return e;
    e = wr(e);
  }
  return null;
}
function Ku(t, e) {
  const i = ft(t);
  if (!kt(t))
    return i;
  let r = Xu(t, e);
  for (; r && bC(r) && Et(r).position === "static"; )
    r = Xu(r, e);
  return r && (ui(r) === "html" || ui(r) === "body" && Et(r).position === "static" && !Uc(r)) ? i : r || EC(t) || i;
}
function kC(t, e, i) {
  const r = kt(e), s = pi(e), f = Ri(t, !0, i === "fixed", e);
  let g = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = {
    x: 0,
    y: 0
  };
  if (r || !r && i !== "fixed")
    if ((ui(e) !== "body" || Cn(s)) && (g = Xs(e)), kt(e)) {
      const n = Ri(e, !0);
      l.x = n.x + e.clientLeft, l.y = n.y + e.clientTop;
    } else
      s && (l.x = $p(s));
  return {
    x: f.left + g.scrollLeft - l.x,
    y: f.top + g.scrollTop - l.y,
    width: f.width,
    height: f.height
  };
}
const OC = {
  getClippingRect: CC,
  convertOffsetParentRelativeRectToViewportRelativeRect: yC,
  isElement: dt,
  getDimensions: TC,
  getOffsetParent: Ku,
  getDocumentElement: pi,
  getScale: lr,
  async getElementRects(t) {
    let {
      reference: e,
      floating: i,
      strategy: r
    } = t;
    const s = this.getOffsetParent || Ku, f = this.getDimensions;
    return {
      reference: kC(e, await s(i), r),
      floating: {
        x: 0,
        y: 0,
        ...await f(i)
      }
    };
  },
  getClientRects: (t) => Array.from(t.getClientRects()),
  isRTL: (t) => Et(t).direction === "rtl"
};
function PC(t, e, i, r) {
  r === void 0 && (r = {});
  const {
    ancestorScroll: s = !0,
    ancestorResize: f = !0,
    elementResize: g = !0,
    animationFrame: l = !1
  } = r, n = s || f ? [...dt(t) ? Gr(t) : t.contextElement ? Gr(t.contextElement) : [], ...Gr(e)] : [];
  n.forEach((c) => {
    const d = !dt(c) && c.toString().includes("V");
    s && (l ? d : !0) && c.addEventListener("scroll", i, {
      passive: !0
    }), f && c.addEventListener("resize", i);
  });
  let a = null;
  g && (a = new ResizeObserver(() => {
    i();
  }), dt(t) && !l && a.observe(t), !dt(t) && t.contextElement && !l && a.observe(t.contextElement), a.observe(e));
  let h, o = l ? Ri(t) : null;
  l && u();
  function u() {
    const c = Ri(t);
    o && (c.x !== o.x || c.y !== o.y || c.width !== o.width || c.height !== o.height) && i(), o = c, h = requestAnimationFrame(u);
  }
  return i(), () => {
    var c;
    n.forEach((d) => {
      s && d.removeEventListener("scroll", i), f && d.removeEventListener("resize", i);
    }), (c = a) == null || c.disconnect(), a = null, l && cancelAnimationFrame(h);
  };
}
const AC = (t, e, i) => {
  const r = /* @__PURE__ */ new Map(), s = {
    platform: OC,
    ...i
  }, f = {
    ...s.platform,
    _c: r
  };
  return nC(t, e, {
    ...s,
    platform: f
  });
}, MC = (t) => {
  const {
    element: e,
    padding: i
  } = t;
  function r(s) {
    return Object.prototype.hasOwnProperty.call(s, "current");
  }
  return {
    name: "arrow",
    options: t,
    fn(s) {
      return r(e) ? e.current != null ? Uu({
        element: e.current,
        padding: i
      }).fn(s) : {} : e ? Uu({
        element: e,
        padding: i
      }).fn(s) : {};
    }
  };
};
var qn = typeof document < "u" ? pn : Te;
function Ss(t, e) {
  if (t === e)
    return !0;
  if (typeof t != typeof e)
    return !1;
  if (typeof t == "function" && t.toString() === e.toString())
    return !0;
  let i, r, s;
  if (t && e && typeof t == "object") {
    if (Array.isArray(t)) {
      if (i = t.length, i != e.length)
        return !1;
      for (r = i; r-- !== 0; )
        if (!Ss(t[r], e[r]))
          return !1;
      return !0;
    }
    if (s = Object.keys(t), i = s.length, i !== Object.keys(e).length)
      return !1;
    for (r = i; r-- !== 0; )
      if (!Object.prototype.hasOwnProperty.call(e, s[r]))
        return !1;
    for (r = i; r-- !== 0; ) {
      const f = s[r];
      if (!(f === "_owner" && t.$$typeof) && !Ss(t[f], e[f]))
        return !1;
    }
    return !0;
  }
  return t !== t && e !== e;
}
function qu(t) {
  const e = _e.useRef(t);
  return qn(() => {
    e.current = t;
  }), e;
}
function DC(t) {
  t === void 0 && (t = {});
  const {
    placement: e = "bottom",
    strategy: i = "absolute",
    middleware: r = [],
    platform: s,
    whileElementsMounted: f,
    open: g
  } = t, [l, n] = _e.useState({
    x: null,
    y: null,
    strategy: i,
    placement: e,
    middlewareData: {},
    isPositioned: !1
  }), [a, h] = _e.useState(r);
  Ss(a, r) || h(r);
  const o = _e.useRef(null), u = _e.useRef(null), c = _e.useRef(l), d = qu(f), m = qu(s), [p, v] = _e.useState(null), [b, y] = _e.useState(null), w = _e.useCallback((B) => {
    o.current !== B && (o.current = B, v(B));
  }, []), _ = _e.useCallback((B) => {
    u.current !== B && (u.current = B, y(B));
  }, []), S = _e.useCallback(() => {
    if (!o.current || !u.current)
      return;
    const B = {
      placement: e,
      strategy: i,
      middleware: a
    };
    m.current && (B.platform = m.current), AC(o.current, u.current, B).then((N) => {
      const K = {
        ...N,
        isPositioned: !0
      };
      C.current && !Ss(c.current, K) && (c.current = K, Pm.flushSync(() => {
        n(K);
      }));
    });
  }, [a, e, i, m]);
  qn(() => {
    g === !1 && c.current.isPositioned && (c.current.isPositioned = !1, n((B) => ({
      ...B,
      isPositioned: !1
    })));
  }, [g]);
  const C = _e.useRef(!1);
  qn(() => (C.current = !0, () => {
    C.current = !1;
  }), []), qn(() => {
    if (p && b) {
      if (d.current)
        return d.current(p, b, S);
      S();
    }
  }, [p, b, S, d]);
  const k = _e.useMemo(() => ({
    reference: o,
    floating: u,
    setReference: w,
    setFloating: _
  }), [w, _]), R = _e.useMemo(() => ({
    reference: p,
    floating: b
  }), [p, b]);
  return _e.useMemo(() => ({
    ...l,
    update: S,
    refs: k,
    elements: R,
    reference: w,
    floating: _
  }), [l, S, k, R, w, _]);
}
function IC(t) {
  return (e) => {
    t.forEach((i) => {
      typeof i == "function" ? i(e) : i != null && (i.current = e);
    });
  };
}
function Yc({
  floatingWidth: t,
  ref: e,
  disablePositioning: i = !1,
  placement: r = "bottom",
  offset: s = 2,
  showArrow: f = !1,
  maxHeight: g,
  shiftCrossAxis: l = !0,
  fallbackPlacements: n
}) {
  const a = ge(null), h = { placement: r, strategy: "fixed" };
  i || (h.whileElementsMounted = PC, h.middleware = [
    pC(s),
    mC({ padding: 16, crossAxis: l, mainAxis: !0 }),
    fC({
      padding: 16,
      fallbackPlacements: n
    }),
    vC({
      apply({ rects: v, availableHeight: b, availableWidth: y, elements: w }) {
        t === "matchTrigger" && g != null && Object.assign(w.floating.style, {
          width: `${v.reference.width}px`,
          maxWidth: `${y}`,
          maxHeight: `${Math.min(b, g)}px`
        });
      },
      padding: 16
    })
  ], f && h.middleware.push(MC({ element: a })));
  const o = DC(h), u = Ke(
    () => IC([e, o.reference]),
    [o.reference, e]
  ), { x: c, y: d } = o.middlewareData.arrow || {}, m = {
    top: "bottom",
    right: "left",
    bottom: "top",
    left: "right"
  }[o.placement.split("-")[0]], p = {
    left: c,
    top: d,
    right: "",
    bottom: "",
    [m]: "-4px"
  };
  return {
    ...o,
    reference: u,
    arrowRef: a,
    arrowStyle: p
  };
}
function Wp(t, e) {
  const {
    children: i,
    items: r,
    role: s = "listbox",
    virtualFocus: f,
    loopFocus: g = !1,
    onItemSelected: l,
    clearInputOnItemSelection: n,
    blurReferenceOnItemSelection: a,
    floatingWidth: h = "matchTrigger",
    floatingMinWidth: o,
    floatingMaxHeight: u,
    offset: c,
    placement: d,
    showCheckmark: m,
    showEmptyMessage: p,
    maxItems: v,
    isAsync: b
  } = t, y = t.selectionMode || "none", _ = `${Ot()}-listbox`, [S, C] = Ii(
    t.inputValue,
    t.defaultInputValue || "",
    t.onInputValueChange
  ), [k, R] = Me(
    "all"
  ), B = eC({
    children: i,
    items: r,
    inputValue: S,
    maxItems: v
  }), N = k === "all" ? B.collection : B.filteredCollection, K = ge([]), ee = Ke(() => [...N.values()].map(
    (te) => te.isDisabled ? null : te.textLabel
  ), [N]), { selectedValues: G, selectValues: W } = LC(t), [re, ce] = Ii(
    t.isOpen,
    t.defaultIsOpen,
    t.onOpenChange
  ), [le, T] = Me(null), M = Yc({
    floatingWidth: h,
    ref: e,
    placement: d,
    offset: c,
    maxHeight: u != null ? u : 420,
    shiftCrossAxis: !f
  }), { refs: A, floating: D, strategy: V, x: P, y: E } = M, L = y === "none" ? void 0 : N.get(G[0]), j = y === "none" || L == null ? void 0 : L.index, Y = (te) => {
    if (y !== "none") {
      const $ = [...N.values()][te];
      $ && W($.value);
    }
  }, H = Oe(
    (te, $) => {
      var F, U;
      const z = [...N.values()], q = !z.find((se) => !se.isDisabled), J = N.size - 1;
      if ($ == null || !N.size || $ > J || $ < 0 || q) {
        T(null);
        return;
      }
      $ = RC(
        z,
        $,
        g,
        te
      ), T($), f ? (F = K.current[$]) == null || F.scrollIntoView({
        block: "nearest"
      }) : (U = K.current[$]) == null || U.focus();
    },
    [N, f, g]
  ), Z = Oe(
    (te) => {
      C(te.target.value), b || R(te.target.value.trim() ? "filtered" : "all"), te.target.value ? ce(!0) : W("");
    },
    [C, ce, R, W, b]
  );
  return {
    handleItemSelection: (te) => {
      const $ = A.reference.current;
      y !== "none" ? W(te) : $ && "focus" in $ && $.focus(), f && (C(n ? "" : `${te}`), a && $ && "blur" in $ && $.blur()), R("all"), ce(!1), l == null || l(te), T(null);
    },
    onInputChange: Z,
    loopFocus: g,
    floatingWidth: h,
    floatingMinWidth: o,
    floatingMaxHeight: u,
    showCheckmark: m,
    collection: N,
    virtualFocus: f,
    focusItem: H,
    showEmptyMessage: p,
    refs: A,
    reference: M.reference,
    floating: D,
    positionStyle: {
      position: V,
      top: E != null ? E : "",
      left: P != null ? P : ""
    },
    listContent: ee,
    listItemsRef: K,
    listboxId: _,
    role: s,
    state: {
      activeIndex: le,
      setActiveIndex: T,
      selectedIndex: j,
      setSelectedIndex: Y,
      selectionMode: y,
      selectedValues: G,
      selectValues: W,
      inputValue: S,
      setInputValue: C,
      isOpen: re,
      setIsOpen: ce,
      setActiveCollection: R
    }
  };
}
function RC(t, e, i, r) {
  var f;
  const s = t.length - 1;
  for (; (f = t[e]) != null && f.isDisabled; )
    if (r === "increment") {
      if (e++, e >= s)
        if (i)
          e = 0;
        else
          return e - 1;
    } else if (e--, e < 0)
      if (i)
        e = s;
      else
        return e + 1;
  return e;
}
function LC(t) {
  const { selectionMode: e, allowEmptySelection: i } = t, r = e === "single" || e === "multiple", [s, f] = Ii(
    r ? t.selectedValue : void 0,
    r ? t.defaultSelectedValue : void 0,
    r ? t.onSelectionChange : void 0
  ), g = Ke(() => s == null ? [] : Array.isArray(s) ? s : [s], [s]), l = Oe(
    (n) => {
      const a = Array.isArray(n) ? n : [n];
      e === "single" ? f(a[0]) : a.forEach((h) => {
        const o = g.indexOf(h);
        o === -1 ? (g.push(h), f([...g])) : (g.length > 1 || i) && (g.splice(o, 1), f([...g]));
      });
    },
    [i, g, e, f]
  );
  return {
    selectedValues: g,
    selectValues: l
  };
}
const Yp = fi(null);
function Gp() {
  return Fe(Yp);
}
const Da = me(/* @__PURE__ */ x("path", {
  d: "M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"
}), "CheckOutlined"), FC = ue.forwardRef((t, e) => {
  let {
    startIcon: i,
    capitalizeFirst: r,
    children: s,
    description: f,
    endIcon: g,
    endSection: l,
    isDisabled: n,
    isActive: a,
    isSelected: h,
    showCheckmark: o,
    elementType: u = "div",
    ...c
  } = t;
  !i && o && (i = /* @__PURE__ */ x(Da, {
    size: "sm",
    className: ae("text-primary", !h && "invisible")
  }));
  const d = ae("icon-sm rounded overflow-hidden flex-shrink-0", !n && "text-muted"), m = ae(!n && "text-muted");
  return /* @__PURE__ */ ie(u, {
    ...c,
    "aria-disabled": n,
    className: zC(t),
    ref: e,
    children: [i && /* @__PURE__ */ x("div", {
      className: d,
      children: i
    }), /* @__PURE__ */ ie("div", {
      className: ae("mr-auto w-full", r && "first-letter:capitalize"),
      children: [s, f && /* @__PURE__ */ x("div", {
        className: ae("text-xs mt-4 whitespace-normal", n ? "text-disabled" : "text-muted"),
        children: f
      })]
    }), (g || l) && /* @__PURE__ */ x("div", {
      className: g ? d : m,
      children: g || l
    })]
  });
});
function zC({
  className: t,
  isSelected: e,
  isActive: i,
  isDisabled: r,
  showCheckmark: s
}) {
  let f = "";
  return r ? f = "text-disabled pointer-events-none" : e ? i ? f = "bg-primary/focus" : f = "bg-primary/selected hover:bg-primary/focus" : i ? f = "hover:bg-fg-base/15 bg-focus" : f = "hover:bg-hover", ae("w-full select-none outline-none cursor-pointer", "py-8 text-sm truncate flex items-center gap-10", !r && "text-main", s ? "px-8" : "px-20", f, t);
}
function Ks({
  children: t,
  value: e,
  startIcon: i,
  endIcon: r,
  endSection: s,
  description: f,
  capitalizeFirst: g,
  textLabel: l,
  isDisabled: n,
  onSelected: a,
  onClick: h,
  ...o
}) {
  var B;
  const {
    collection: u,
    showCheckmark: c,
    virtualFocus: d,
    listboxId: m,
    role: p,
    listItemsRef: v,
    handleItemSelection: b,
    state: {
      selectedValues: y,
      activeIndex: w,
      setActiveIndex: _
    }
  } = Gp(), S = y.includes(e), C = (B = u.get(e)) == null ? void 0 : B.index, k = w === C;
  if (C == null)
    return null;
  const R = k && !n ? -1 : 0;
  return /* @__PURE__ */ x(FC, {
    ...o,
    onFocus: () => {
      d || _(C);
    },
    onPointerEnter: (N) => {
      _(C), d || N.currentTarget.focus();
    },
    onPointerDown: (N) => {
      d && N.preventDefault();
    },
    onKeyDown: (N) => {
      (N.key === "Enter" || N.key === " ") && (N.preventDefault(), b(e), a == null || a());
    },
    onClick: (N) => {
      b(e), a == null || a(), h == null || h(N);
    },
    ref: (N) => v.current[C] = N,
    id: `${m}-${C}`,
    role: p === "menu" ? "menuitem" : "option",
    tabIndex: d ? void 0 : R,
    "aria-selected": k && S,
    showCheckmark: c,
    isDisabled: n,
    isActive: k,
    isSelected: S,
    startIcon: i,
    description: f,
    endIcon: r,
    endSection: s,
    capitalizeFirst: g,
    "data-value": e,
    children: t
  });
}
const BC = 768;
function jC() {
  return E_() || typeof window > "u" ? !1 : window.screen.width <= BC;
}
const qs = {
  initial: { opacity: 0, y: 5 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: 5 },
  transition: { type: "tween", duration: 0.125 }
};
function Gc() {
  const { width: t, height: e } = I_();
  return {
    "--be-viewport-height": `${e}px`,
    "--be-viewport-width": `${t}px`
  };
}
const NC = ue.createContext(null);
NC.displayName = "PressResponderContext";
let Tn = null, VC = /* @__PURE__ */ new Set(), Zu = !1, Li = !1, Ia = !1;
function Xc(t, e) {
  for (let i of VC)
    i(t, e);
}
function $C(t) {
  return !(t.metaKey || !Sp() && t.altKey || t.ctrlKey || t.key === "Control" || t.key === "Shift" || t.key === "Meta");
}
function Ju(t) {
  Li = !0, $C(t) && (Tn = "keyboard", Xc("keyboard", t));
}
function Yi(t) {
  Tn = "pointer", (t.type === "mousedown" || t.type === "pointerdown") && (Li = !0, Xc("pointer", t));
}
function HC(t) {
  z_(t) && (Li = !0, Tn = "virtual");
}
function UC(t) {
  t.target === window || t.target === document || (!Li && !Ia && (Tn = "virtual", Xc("virtual", t)), Li = !1, Ia = !1);
}
function WC() {
  Li = !1, Ia = !0;
}
function Qu() {
  if (typeof window > "u" || Zu)
    return;
  let t = HTMLElement.prototype.focus;
  HTMLElement.prototype.focus = function() {
    Li = !0, t.apply(this, arguments);
  }, document.addEventListener("keydown", Ju, !0), document.addEventListener("keyup", Ju, !0), document.addEventListener("click", HC, !0), window.addEventListener("focus", UC, !0), window.addEventListener("blur", WC, !1), typeof PointerEvent < "u" ? (document.addEventListener("pointerdown", Yi, !0), document.addEventListener("pointermove", Yi, !0), document.addEventListener("pointerup", Yi, !0)) : (document.addEventListener("mousedown", Yi, !0), document.addEventListener("mousemove", Yi, !0), document.addEventListener("mouseup", Yi, !0)), Zu = !0;
}
typeof document < "u" && (document.readyState !== "loading" ? Qu() : document.addEventListener("DOMContentLoaded", Qu));
function YC() {
  return Tn;
}
function GC(t) {
  if (YC() === "virtual") {
    let e = document.activeElement;
    D_(() => {
      document.activeElement === e && document.contains(t) && Ou(t);
    });
  } else
    Ou(t);
}
function XC(t) {
  if (!(t instanceof HTMLElement) && !(t instanceof SVGElement))
    return !1;
  let { display: e, visibility: i } = t.style, r = e !== "none" && i !== "hidden" && i !== "collapse";
  if (r) {
    const { getComputedStyle: s } = t.ownerDocument.defaultView;
    let { display: f, visibility: g } = s(t);
    r = f !== "none" && g !== "hidden" && g !== "collapse";
  }
  return r;
}
function KC(t, e) {
  return !t.hasAttribute("hidden") && (t.nodeName === "DETAILS" && e && e.nodeName !== "SUMMARY" ? t.hasAttribute("open") : !0);
}
function Xp(t, e) {
  return t.nodeName !== "#comment" && XC(t) && KC(t, e) && (!t.parentElement || Xp(t.parentElement, t));
}
const Ra = /* @__PURE__ */ ue.createContext(null);
let rt = null, ur = /* @__PURE__ */ new Map();
function Zs(t) {
  let { children: e, contain: i, restoreFocus: r, autoFocus: s } = t, f = ge(), g = ge(), l = ge([]), n = Fe(Ra), a = n == null ? void 0 : n.scopeRef;
  ci(() => {
    let o = f.current.nextSibling, u = [];
    for (; o && o !== g.current; )
      u.push(o), o = o.nextSibling;
    l.current = u;
  }, [
    e,
    a
  ]), ci(() => (ur.set(l, a), () => {
    (l === rt || Js(l, rt)) && (!a || ur.has(a)) && (rt = a), ur.delete(l);
  }), [
    l,
    a
  ]), eT(l, i), rT(l, r, i), iT(l, s);
  let h = ZC(l);
  return /* @__PURE__ */ ue.createElement(Ra.Provider, {
    value: {
      scopeRef: l,
      focusManager: h
    }
  }, /* @__PURE__ */ ue.createElement("span", {
    "data-focus-scope-start": !0,
    hidden: !0,
    ref: f
  }), e, /* @__PURE__ */ ue.createElement("span", {
    "data-focus-scope-end": !0,
    hidden: !0,
    ref: g
  }));
}
function qC() {
  var t;
  return (t = Fe(Ra)) === null || t === void 0 ? void 0 : t.focusManager;
}
function ZC(t) {
  return {
    focusNext(e = {}) {
      let i = t.current, { from: r, tabbable: s, wrap: f, accept: g } = e, l = r || document.activeElement, n = i[0].previousElementSibling, a = Jt(ir(i), {
        tabbable: s,
        accept: g
      }, i);
      a.currentNode = Ct(l, i) ? l : n;
      let h = a.nextNode();
      return !h && f && (a.currentNode = n, h = a.nextNode()), h && jt(h, !0), h;
    },
    focusPrevious(e = {}) {
      let i = t.current, { from: r, tabbable: s, wrap: f, accept: g } = e, l = r || document.activeElement, n = i[i.length - 1].nextElementSibling, a = Jt(ir(i), {
        tabbable: s,
        accept: g
      }, i);
      a.currentNode = Ct(l, i) ? l : n;
      let h = a.previousNode();
      return !h && f && (a.currentNode = n, h = a.previousNode()), h && jt(h, !0), h;
    },
    focusFirst(e = {}) {
      let i = t.current, { tabbable: r, accept: s } = e, f = Jt(ir(i), {
        tabbable: r,
        accept: s
      }, i);
      f.currentNode = i[0].previousElementSibling;
      let g = f.nextNode();
      return g && jt(g, !0), g;
    },
    focusLast(e = {}) {
      let i = t.current, { tabbable: r, accept: s } = e, f = Jt(ir(i), {
        tabbable: r,
        accept: s
      }, i);
      f.currentNode = i[i.length - 1].nextElementSibling;
      let g = f.previousNode();
      return g && jt(g, !0), g;
    }
  };
}
const Kc = [
  "input:not([disabled]):not([type=hidden])",
  "select:not([disabled])",
  "textarea:not([disabled])",
  "button:not([disabled])",
  "a[href]",
  "area[href]",
  "summary",
  "iframe",
  "object",
  "embed",
  "audio[controls]",
  "video[controls]",
  "[contenteditable]"
], JC = Kc.join(":not([hidden]),") + ",[tabindex]:not([disabled]):not([hidden])";
Kc.push('[tabindex]:not([tabindex="-1"]):not([disabled])');
const QC = Kc.join(':not([hidden]):not([tabindex="-1"]),');
function ir(t) {
  return t[0].parentElement;
}
function eT(t, e) {
  let i = ge(), r = ge(null);
  ci(() => {
    let s = t.current;
    if (!e) {
      r.current && (cancelAnimationFrame(r.current), r.current = null);
      return;
    }
    let f = (n) => {
      if (n.key !== "Tab" || n.altKey || n.ctrlKey || n.metaKey || t !== rt)
        return;
      let a = document.activeElement, h = t.current;
      if (!Ct(a, h))
        return;
      let o = Jt(ir(h), {
        tabbable: !0
      }, h);
      o.currentNode = a;
      let u = n.shiftKey ? o.previousNode() : o.nextNode();
      u || (o.currentNode = n.shiftKey ? h[h.length - 1].nextElementSibling : h[0].previousElementSibling, u = n.shiftKey ? o.previousNode() : o.nextNode()), n.preventDefault(), u && jt(u, !0);
    }, g = (n) => {
      !rt || Js(rt, t) ? (rt = t, i.current = n.target) : t === rt && !eh(n.target, t) ? i.current ? i.current.focus() : rt && Kp(rt.current) : t === rt && (i.current = n.target);
    }, l = (n) => {
      r.current = requestAnimationFrame(() => {
        t === rt && !eh(document.activeElement, t) && (rt = t, i.current = n.target, i.current.focus());
      });
    };
    return document.addEventListener("keydown", f, !1), document.addEventListener("focusin", g, !1), s.forEach(
      (n) => n.addEventListener("focusin", g, !1)
    ), s.forEach(
      (n) => n.addEventListener("focusout", l, !1)
    ), () => {
      document.removeEventListener("keydown", f, !1), document.removeEventListener("focusin", g, !1), s.forEach(
        (n) => n.removeEventListener("focusin", g, !1)
      ), s.forEach(
        (n) => n.removeEventListener("focusout", l, !1)
      );
    };
  }, [
    t,
    e
  ]), Te(() => () => {
    r.current && cancelAnimationFrame(r.current);
  }, [
    r
  ]);
}
function tT(t) {
  for (let e of ur.keys())
    if (Ct(t, e.current))
      return !0;
  return !1;
}
function Ct(t, e) {
  return e.some(
    (i) => i.contains(t)
  );
}
function eh(t, e) {
  for (let i of ur.keys())
    if ((i === e || Js(e, i)) && Ct(t, i.current))
      return !0;
  return !1;
}
function Js(t, e) {
  let i = ur.get(e);
  return i ? i === t ? !0 : Js(t, i) : !1;
}
function jt(t, e = !1) {
  if (t != null && !e)
    try {
      GC(t);
    } catch {
    }
  else if (t != null)
    try {
      t.focus();
    } catch {
    }
}
function Kp(t) {
  let e = t[0].previousElementSibling, i = Jt(ir(t), {
    tabbable: !0
  }, t);
  i.currentNode = e, jt(i.nextNode());
}
function iT(t, e) {
  const i = ue.useRef(e);
  Te(() => {
    i.current && (rt = t, Ct(document.activeElement, rt.current) || Kp(t.current)), i.current = !1;
  }, []);
}
function rT(t, e, i) {
  const r = ge(typeof document < "u" ? document.activeElement : null);
  ci(() => {
    let s = r.current;
    if (!e)
      return;
    let f = (g) => {
      if (g.key !== "Tab" || g.altKey || g.ctrlKey || g.metaKey)
        return;
      let l = document.activeElement;
      if (!Ct(l, t.current))
        return;
      let n = Jt(document.body, {
        tabbable: !0
      });
      n.currentNode = l;
      let a = g.shiftKey ? n.previousNode() : n.nextNode();
      if ((!document.body.contains(s) || s === document.body) && (s = null), (!a || !Ct(a, t.current)) && s) {
        n.currentNode = s;
        do
          a = g.shiftKey ? n.previousNode() : n.nextNode();
        while (Ct(a, t.current));
        g.preventDefault(), g.stopPropagation(), a ? jt(a, !0) : tT(s) ? jt(s, !0) : l.blur();
      }
    };
    return i || document.addEventListener("keydown", f, !0), () => {
      i || document.removeEventListener("keydown", f, !0), e && s && Ct(document.activeElement, t.current) && requestAnimationFrame(() => {
        document.body.contains(s) && document.activeElement === document.body && jt(s);
      });
    };
  }, [
    t,
    e,
    i
  ]);
}
function Jt(t, e, i) {
  let r = e != null && e.tabbable ? QC : JC, s = document.createTreeWalker(t, NodeFilter.SHOW_ELEMENT, {
    acceptNode(f) {
      var g;
      return !(e == null || (g = e.from) === null || g === void 0) && g.contains(f) ? NodeFilter.FILTER_REJECT : f.matches(r) && Xp(f) && (!i || Ct(f, i)) && (!(e != null && e.accept) || e.accept(f)) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  return e != null && e.from && (s.currentNode = e.from), s;
}
const Zn = qe(({
  children: t,
  style: e,
  autoFocus: i = !1,
  restoreFocus: r = !0,
  isDismissable: s,
  isContextMenu: f,
  isOpen: g,
  onClose: l,
  triggerRef: n,
  arrowRef: a,
  arrowStyle: h,
  onPointerLeave: o,
  onPointerEnter: u
}, c) => {
  const d = Gc(), m = Ni(c), {
    domProps: p
  } = nT({
    isDismissable: s,
    isOpen: g,
    onClose: l,
    triggerRef: n,
    isContextMenu: f
  }, m);
  return /* @__PURE__ */ x(et.div, {
    className: "z-popover isolate",
    role: "presentation",
    ref: m,
    style: {
      ...d,
      ...e,
      position: "fixed"
    },
    ...qs,
    ...Wt(p, {
      onPointerLeave: o,
      onPointerEnter: u
    }),
    children: /* @__PURE__ */ x(Zs, {
      restoreFocus: r,
      autoFocus: i,
      contain: !1,
      children: t
    })
  });
}), Ir = [];
function nT({
  onClose: t,
  isDismissable: e = !0,
  triggerRef: i,
  isContextMenu: r = !1
}, s) {
  const f = ge({
    isPointerDown: !1,
    isContextMenu: r,
    onClose: t
  }), g = f.current;
  g.isContextMenu = r, g.onClose = t;
  const l = Oe((d) => {
    const m = d.target;
    if (m) {
      const p = m.ownerDocument;
      if (!p || !p.documentElement.contains(m))
        return !1;
    }
    return s.current && !s.current.contains(m);
  }, [s]), n = Oe(() => Ir[Ir.length - 1] === s, [s]), a = Oe(() => {
    n() && g.onClose();
  }, [n, g]), h = Oe((d) => {
    var m, p;
    return i.current && "contains" in i.current ? (p = (m = i.current).contains) == null ? void 0 : p.call(m, d) : !1;
  }, [i]), o = Oe((d) => {
    h(d.target) || n() && (d.stopPropagation(), d.preventDefault());
  }, [h, n]), u = Oe((d) => {
    h(d.target) || (n() && (d.stopPropagation(), d.preventDefault()), (!g.isContextMenu || d.button !== 2) && a());
  }, [h, a, g, n]);
  return Te(() => {
    Ir.push(s);
    const d = (b) => {
      l(b) && (o(b), f.current.isPointerDown = !0);
    }, m = (b) => {
      f.current.isPointerDown && l(b) && (f.current.isPointerDown = !1, u(b));
    }, p = (b) => {
      b.preventDefault(), l(b) && a();
    }, v = (b) => {
      if (!i.current)
        return;
      const y = b.target;
      let w;
      i.current instanceof Node ? w = i.current : "contextElement" in i.current && (w = i.current.contextElement), (!(y instanceof Node) || !w || y.contains(w)) && g.onClose();
    };
    return document.addEventListener("pointerdown", d, !0), document.addEventListener("pointerup", m, !0), document.addEventListener("contextmenu", p, !0), document.addEventListener("scroll", v, !0), () => {
      const b = Ir.indexOf(s);
      b >= 0 && Ir.splice(b, 1), document.removeEventListener("pointerdown", d, !0), document.removeEventListener("pointerup", m, !0), document.removeEventListener("contextmenu", p, !0), document.removeEventListener("scroll", v, !0);
    };
  }, [s, l, g, u, o, i, h, a]), {
    domProps: {
      onKeyDown: (d) => {
        d.key === "Escape" && (d.stopPropagation(), d.preventDefault(), a());
      }
    }
  };
}
const sT = {
  initial: { opacity: 0 },
  animate: { opacity: 1 },
  exit: { opacity: 0 }
};
function qc({
  position: t = "absolute",
  className: e,
  isTransparent: i = !1,
  disableInitialTransition: r,
  ...s
}) {
  return /* @__PURE__ */ x(et.div, {
    ...s,
    className: ae(e, !i && "bg-black/30", "w-full h-full inset-0 z-10", t),
    "aria-hidden": !0,
    initial: r ? void 0 : {
      opacity: 0
    },
    animate: {
      opacity: 1
    },
    exit: {
      opacity: 0
    },
    ...sT,
    transition: {
      duration: 0.3
    }
  });
}
const qp = qe(({
  children: t,
  autoFocus: e = !1,
  restoreFocus: i = !0,
  isDismissable: r,
  isOpen: s,
  onClose: f
}, g) => {
  const l = Gc(), n = Ni(g);
  return /* @__PURE__ */ ie("div", {
    className: "isolate z-tray fixed inset-0",
    style: l,
    children: [/* @__PURE__ */ x(qc, {
      onClick: () => {
        r && f();
      }
    }, "tray-underlay"), /* @__PURE__ */ x(et.div, {
      ref: n,
      className: "absolute bottom-0 left-0 right-0 w-full z-20 rounded-t overflow-hidden max-w-375 max-h-tray mx-auto pb-safe-area",
      role: "presentation",
      initial: {
        opacity: 0,
        y: "100%"
      },
      animate: {
        opacity: 1,
        y: 0
      },
      exit: {
        opacity: 0,
        y: "100%"
      },
      transition: {
        type: "tween",
        duration: 0.2
      },
      children: /* @__PURE__ */ x(Zs, {
        restoreFocus: i,
        autoFocus: e,
        contain: !0,
        children: t
      })
    })]
  });
});
function La(t, e) {
  if (t === e)
    return !0;
  if (!t || !e)
    return !1;
  const i = Object.keys(t), r = Object.keys(e), s = i.length;
  if (r.length !== s)
    return !1;
  for (let f = 0; f < s; f++) {
    const g = i[f];
    if (t[g] !== e[g] || !Object.prototype.hasOwnProperty.call(e, g))
      return !1;
  }
  return !0;
}
const Zp = fi(
  null
);
function oT() {
  return Fe(Zp);
}
function Qs() {
  const {
    data: { i18n: t }
  } = oT();
  return {
    locale: t,
    localeCode: (t == null ? void 0 : t.language) || "en",
    lines: t == null ? void 0 : t.lines
  };
}
function Jp(t, {
  message: e,
  values: i
}) {
  const r = e.match(/\[(.+?)]/), s = i == null ? void 0 : i.count;
  if (r && r[1] && !Number.isNaN(s)) {
    const [f, g] = r, l = g.split("|");
    if (!l.length)
      return e;
    const a = aT(t).select(s);
    let h = l.find((u) => u.startsWith(a));
    h || (h = l[0]);
    const o = h.substring(h.indexOf(" ") + 1);
    return e.replace(f, o);
  }
  return e;
}
const aT = Sn((t) => new Intl.PluralRules(t)), ve = Om((t) => {
  const {
    message: e,
    values: i
  } = t, {
    lines: r,
    localeCode: s
  } = Qs();
  let f = (r == null ? void 0 : r[e]) || e;
  if (!i)
    return /* @__PURE__ */ x(Rt, {
      children: f
    });
  f = Jp(s, {
    message: f,
    values: i
  });
  const g = [], l = [];
  if (Object.entries(i).forEach(([n, a]) => {
    typeof a == "function" ? l.push(n) : Ht(a) ? g.push(n) : a != null && (f = f.replace(`:${n}`, `${a}`));
  }), l.length || g.length) {
    const n = [];
    if (l.length) {
      const u = l.join("");
      n.push(`(<[${u}]>.+?<\\/[${u}]>)`);
    }
    if (g.length) {
      const u = g.join("|");
      n.push(`(:(?:${u}))`);
    }
    const a = new RegExp(n.join("|"), "gm"), o = f.split(a).filter(Boolean).map((u, c) => {
      if (u.startsWith("<") && u.endsWith(">")) {
        const d = u.match(/<([a-z]+)>(.+?)<\/([a-z]+)>/);
        if (d) {
          const [, m, p] = d, v = i == null ? void 0 : i[m];
          if (typeof v == "function") {
            const b = v(p);
            return ct(b, {
              key: c
            });
          }
        }
      }
      if (u.startsWith(":")) {
        const d = u.replace(":", ""), m = i == null ? void 0 : i[d];
        if (Ht(m))
          return ct(m, {
            key: c
          });
      }
      return u;
    });
    return /* @__PURE__ */ x(Rt, {
      children: o
    });
  }
  return /* @__PURE__ */ x(Rt, {
    children: f
  });
}, cT);
function cT(t, e) {
  const {
    values: i,
    ...r
  } = t, {
    values: s,
    ...f
  } = e;
  return La(s, i) && La(r, f);
}
function Qp({
  listbox: t,
  children: e,
  isLoading: i,
  mobileOverlay: r = qp,
  ...s
}) {
  const f = jC(), {
    floatingWidth: g,
    floatingMinWidth: l = "min-w-180",
    collection: n,
    showEmptyMessage: a,
    state: {
      isOpen: h,
      setIsOpen: o
    },
    positionStyle: u,
    floating: c,
    refs: d
  } = t, m = f ? r : Zn, p = ae(
    "py-4 text-base sm:text-sm outline-none bg-paper shadow-xl border max-h-inherit overflow-y-auto",
    m === Zn && "rounded",
    m === Zn && g === "auto" ? `max-w-288 ${l}` : ""
  ), v = Ke(() => {
    let b = 0;
    const y = [];
    return [...n.values()].reduce((w, _) => {
      if (!_.section)
        w.push(ct(_.element, {
          key: _.element.key || _.element.props.value
        }));
      else if (!y.includes(_.section)) {
        const S = ct(_.section, {
          key: _.section.key || b,
          index: b
        });
        w.push(S), y.push(_.section), b++;
      }
      return w;
    }, []);
  }, [n]);
  return /* @__PURE__ */ ie(Yp.Provider, {
    value: t,
    children: [e, _t && Za(/* @__PURE__ */ x(Ut, {
      children: h && (v.length > 0 || a) && /* @__PURE__ */ x(m, {
        triggerRef: d.reference,
        restoreFocus: !0,
        isOpen: h,
        onClose: () => {
          o(!1);
        },
        isDismissable: !0,
        style: u,
        ref: c,
        children: /* @__PURE__ */ x(lT, {
          isLoading: i,
          className: p,
          ...s,
          children: v
        })
      })
    }), _t)]
  });
}
function lT({
  className: t,
  children: e,
  isLoading: i,
  ...r
}) {
  const {
    role: s,
    listboxId: f,
    virtualFocus: g,
    focusItem: l,
    state: {
      activeIndex: n,
      setActiveIndex: a
    }
  } = Gp(), h = ge(!0), o = ge(null);
  return Te(() => () => a(null), [a]), Te(() => {
    h.current && (n == null && !g ? requestAnimationFrame(() => {
      var u;
      (u = o.current) == null || u.focus({
        preventScroll: !0
      });
    }) : n != null && requestAnimationFrame(() => {
      l("increment", n);
    })), h.current = !1;
  }, [n, l, g]), /* @__PURE__ */ x("div", {
    tabIndex: -1,
    role: s,
    id: f,
    className: t,
    ref: o,
    ...r,
    children: e.length ? e : /* @__PURE__ */ x(uT, {
      isLoading: i
    })
  });
}
function uT({
  isLoading: t
}) {
  return /* @__PURE__ */ x("div", {
    className: "italic px-8 py-4 text-sm text-muted",
    children: t ? /* @__PURE__ */ x(ve, {
      message: "Loading..."
    }) : /* @__PURE__ */ x(ve, {
      message: "There are no items matching your query"
    })
  });
}
function eg({
  state: { isOpen: t, setIsOpen: e, selectedIndex: i, activeIndex: r },
  loopFocus: s,
  collection: f,
  focusItem: g
}) {
  return { handleTriggerKeyDown: (a) => {
    if (!(t || !a.currentTarget.contains(a.target))) {
      if (a.key === "ArrowDown")
        return a.preventDefault(), e(!0), g("increment", i != null ? i : 0), !0;
      if (a.key === "ArrowUp")
        return a.preventDefault(), e(!0), g(
          "decrement",
          i != null ? i : f.size - 1
        ), !0;
      if (a.key === "Enter" || a.key === "Space")
        return a.preventDefault(), e(!0), g("increment", i != null ? i : 0), !0;
    }
  }, handleListboxKeyboardNavigation: (a) => {
    const h = Math.max(0, f.size - 1);
    if (!(!t || !a.currentTarget.contains(a.target)))
      switch (a.key) {
        case "ArrowDown":
          return a.preventDefault(), r == null ? g("increment", 0) : r >= h ? s && g("increment", 0) : g("increment", r + 1), !0;
        case "ArrowUp":
          return a.preventDefault(), r == null ? g("decrement", h) : r <= 0 ? s && g("decrement", h) : g("decrement", r - 1), !0;
        case "Home":
          return a.preventDefault(), g("increment", 0), !0;
        case "End":
          return a.preventDefault(), g("decrement", h), !0;
        case "Tab":
          return e(!1), !0;
      }
  } };
}
const zo = /* @__PURE__ */ new Map();
function hT(t) {
  const { localeCode: e } = Qs(), i = e + (t ? Object.entries(t).sort((s, f) => s[0] < f[0] ? -1 : 1).join() : "");
  if (zo.has(i))
    return zo.get(i);
  const r = new Intl.Collator(e, t);
  return zo.set(i, r), r;
}
function tg() {
  const t = hT({ usage: "search", sensitivity: "base" }), e = ge({
    search: "",
    timeout: void 0
  }).current, i = (s, f) => {
    let g = f != null ? f : 0;
    for (; g != null; ) {
      const l = s[g], n = l == null ? void 0 : l.slice(0, e.search.length);
      if (n && t.compare(n, e.search) === 0)
        return g;
      if (g < s.length - 1)
        g++;
      else
        return null;
    }
    return null;
  };
  return { findMatchingItem: (s, f, g = 0) => {
    const l = fT(s.key);
    if (!l || s.ctrlKey || s.metaKey)
      return null;
    l === " " && e.search.trim().length > 0 && (s.preventDefault(), s.stopPropagation()), e.search += l;
    let n = i(f, g);
    return n == null && (n = i(f, 0)), clearTimeout(e.timeout), e.timeout = setTimeout(() => {
      e.search = "";
    }, 500), n != null ? n : null;
  } };
}
function fT(t) {
  return t.length === 1 || !/^[A-Z]/i.test(t) ? t : "";
}
function dT(t, { noSSR: e } = { noSSR: !0 }) {
  const i = typeof window < "u" && typeof window.matchMedia == "function", [r, s] = Me(
    e ? () => i ? window.matchMedia(t).matches : !1 : null
  );
  return Te(() => {
    if (!i)
      return;
    const f = window.matchMedia(t), g = () => {
      s(f.matches);
    };
    return f.addEventListener("change", g), e || g(), () => {
      f.removeEventListener("change", g);
    };
  }, [i, t, e]), typeof window > "u" ? null : r;
}
function eo(t) {
  return dT("(max-width: 768px)", t);
}
const pT = qe((t, e) => {
  const {
    children: [i, r],
    floatingWidth: s = "auto"
  } = t, f = Ot(), g = eo(), l = Wp({
    ...t,
    floatingWidth: g ? s : "auto",
    role: "menu",
    loopFocus: !0,
    children: r.props.children
  }, e), {
    state: {
      isOpen: n,
      setIsOpen: a,
      activeIndex: h
    },
    listboxId: o,
    focusItem: u,
    listContent: c,
    reference: d
  } = l, {
    handleTriggerKeyDown: m,
    handleListboxKeyboardNavigation: p
  } = eg(l), {
    findMatchingItem: v
  } = tg();
  return /* @__PURE__ */ x(Qp, {
    listbox: l,
    "aria-labelledby": f,
    onKeyDownCapture: (b) => {
      if (!n)
        return;
      const y = v(b, c, h);
      y && u("increment", y);
    },
    onKeyDown: p,
    children: ct(i, {
      id: f,
      "aria-expanded": n ? "true" : "false",
      "aria-haspopup": "menu",
      "aria-controls": n ? o : void 0,
      ref: d,
      onKeyDown: m,
      onClick: st((b) => {
        var y, w;
        (w = (y = i.props) == null ? void 0 : y.onClick) == null || w.call(y, b), a(!n);
      })
    })
  });
});
function gT({
  children: t
}) {
  return t;
}
function mT({
  item: t,
  button: e
}) {
  return /* @__PURE__ */ ie(pT, {
    children: [e, /* @__PURE__ */ x(gT, {
      children: (t.menuItems || []).map((i) => /* @__PURE__ */ x(Ks, {
        value: i.label,
        onSelected: () => {
          i.action(O().editor);
        },
        children: i.label
      }, i.label))
    })]
  });
}
const De = qe(({
  children: t,
  size: e = "md",
  iconSize: i = e && e.length <= 3 ? e : "md",
  variant: r = "text",
  radius: s = "rounded-full",
  className: f,
  padding: g,
  equalWidth: l = !0,
  ...n
}, a) => {
  const h = ae(Vc(e, {
    padding: g,
    equalWidth: l,
    variant: r
  }), f);
  return /* @__PURE__ */ x(Yt, {
    ...n,
    ref: a,
    radius: s,
    variant: r,
    className: h,
    children: ct(t, {
      size: i
    })
  });
});
function vT({
  icon: t,
  className: e,
  size: i
}) {
  let r;
  return ue.isValidElement(t) ? r = ue.cloneElement(t, {
    className: "svg-iconEl"
  }) : typeof t == "string" ? r = /* @__PURE__ */ x("img", {
    className: "w-font h-font",
    src: t,
    alt: ""
  }) : Array.isArray(t) ? r = ue.createElement(Wb(t), {
    size: i
  }) : r = ue.createElement(t, {
    size: i
  }), /* @__PURE__ */ x("span", {
    className: ae(e, "leading-none"),
    children: r
  });
}
const Zc = ue.memo(vT);
function Fa({
  value: t
}) {
  return t ? typeof t == "string" ? /* @__PURE__ */ x(Rt, {
    children: t
  }) : /* @__PURE__ */ x(ve, {
    ...t
  }) : null;
}
function bT({
  item: t
}) {
  const e = t.label ? /* @__PURE__ */ x(wT, {
    item: t
  }) : /* @__PURE__ */ x(yT, {
    item: t
  });
  return t.menuItems ? /* @__PURE__ */ x(mT, {
    item: t,
    button: e
  }) : ue.cloneElement(e, {
    onClick: () => {
      var i;
      (i = t.action) == null || i.call(t, O().editor);
    }
  });
}
const yT = qe(({
  item: t,
  ...e
}, i) => /* @__PURE__ */ x(De, {
  ref: i,
  radius: "rounded-full",
  size: "sm",
  ...e,
  children: /* @__PURE__ */ x(Zc, {
    icon: t.icon
  })
})), wT = qe(({
  item: t,
  ...e
}, i) => /* @__PURE__ */ x(Qe, {
  ref: i,
  radius: "rounded-full",
  size: "xs",
  color: t.buttonColor || "primary",
  variant: t.buttonVariant || "flat",
  startIcon: t.icon && /* @__PURE__ */ x(Zc, {
    icon: t.icon
  }),
  ...e,
  children: /* @__PURE__ */ x(Fa, {
    value: t.label
  })
}));
function to({
  children: t,
  color: e,
  variant: i,
  radius: r,
  size: s,
  className: f,
  value: g,
  onChange: l,
  multiple: n,
  disabled: a
}) {
  const h = (c) => g === void 0 ? !1 : n ? g.includes(c) : c === g, o = (c) => {
    const d = [...g], m = g.indexOf(c);
    return m > -1 ? d.splice(m, 1) : d.push(c), d;
  }, u = ue.Children.map(t, (c, d) => {
    if (ue.isValidElement(c)) {
      const m = h(c.props.value), p = m ? "primary" : e;
      return ue.cloneElement(c, {
        color: m ? "primary" : e,
        variant: i,
        size: s,
        radius: null,
        disabled: c.props.disabled || a,
        ...c.props,
        onClick: (v) => {
          c.props.onClick && c.props.onClick(v), l && (n ? l == null || l(o(c.props.value)) : l == null || l(c.props.value));
        },
        className: ae(
          c.props.className,
          m ? "z-20" : "z-10",
          xT(d, t, r, p)
        )
      });
    }
  });
  return /* @__PURE__ */ x("div", {
    className: ae(r, "inline-flex isolate", f),
    children: u
  });
}
function xT(t, e, i, r) {
  return t === 0 ? ae(i, "rounded-tr-none rounded-br-none", !r && "border-r-transparent disabled:border-r-transparent") : t === e.length - 1 ? ae(i, "rounded-tl-none rounded-bl-none -ml-1") : ae("rounded-none -ml-1", !r && "border-r-transparent disabled:border-r-transparent");
}
const _T = me(/* @__PURE__ */ x("path", {
  d: "M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"
}), "UndoOutlined"), ST = me(/* @__PURE__ */ x("path", {
  d: "M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"
}), "RedoOutlined");
function CT() {
  const t = oe((i) => i.history.canUndo), e = oe((i) => i.history.canRedo);
  return /* @__PURE__ */ ie(to, {
    variant: "outline",
    children: [/* @__PURE__ */ x(De, {
      equalWidth: !1,
      size: "xs",
      padding: "pl-12 pr-10",
      radius: "rounded-full",
      disabled: !t,
      onClick: () => {
        I().history.undo();
      },
      children: /* @__PURE__ */ x(_T, {})
    }), /* @__PURE__ */ x(De, {
      equalWidth: !1,
      padding: "pl-10 pr-12",
      size: "xs",
      radius: "rounded-full",
      disabled: !e,
      onClick: () => {
        I().history.redo();
      },
      children: /* @__PURE__ */ x(ST, {})
    })]
  });
}
const TT = me(/* @__PURE__ */ x("path", {
  d: "M19 13H5v-2h14v2z"
}), "RemoveOutlined"), ET = me(/* @__PURE__ */ x("path", {
  d: "M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
}), "AddOutlined");
function kT() {
  var i, r, s;
  const t = oe((f) => f.zoom) || 1;
  return ((i = oe((f) => {
    var g, l;
    return (l = (g = f.config.tools) == null ? void 0 : g.zoom) == null ? void 0 : l.allowUserZoom;
  })) != null ? i : !0) ? /* @__PURE__ */ ie("div", {
    className: "flex items-center select-none",
    children: [/* @__PURE__ */ x(De, {
      size: "sm",
      disabled: !((r = I().zoom) != null && r.canZoomOut()),
      onClick: () => {
        I().zoom.zoomOut(I().zoom.step);
      },
      children: /* @__PURE__ */ x(TT, {})
    }), /* @__PURE__ */ ie("div", {
      className: "w-[4ch] text-sm text-center",
      children: [Math.round(t * 100), "%"]
    }), /* @__PURE__ */ x(De, {
      size: "sm",
      disabled: !((s = I().zoom) != null && s.canZoomIn()),
      onClick: () => {
        I().zoom.zoomIn(I().zoom.step);
      },
      children: /* @__PURE__ */ x(ET, {})
    })]
  }) : null;
}
function Bo({
  item: t
}) {
  switch (t.type) {
    case "undoWidget":
      return /* @__PURE__ */ x(CT, {});
    case "zoomWidget":
      return /* @__PURE__ */ x(kT, {});
    case "button":
      return /* @__PURE__ */ x(bT, {
        item: t
      });
    case "image":
      return /* @__PURE__ */ x("img", {
        className: "h-30 object-cover",
        src: gt(t.src),
        alt: ""
      });
    default:
      return null;
  }
}
const hi = me(/* @__PURE__ */ x("path", {
  d: "M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}), "CloseOutlined");
function io() {
  var r;
  let t = oe((s) => {
    var f;
    return ((f = s.config.ui) == null ? void 0 : f.mode) === lc.OVERLAY;
  });
  const { width: e } = oe((s) => s.stageSize), i = e <= 700;
  return i && ((r = O().config.ui) == null ? void 0 : r.forceOverlayModeOnMobile) && (t = !0), { isModal: t, isMobile: i };
}
function OT() {
  var n;
  const {
    isModal: t,
    isMobile: e
  } = io(), i = (n = oe((a) => {
    var h;
    return (h = a.config.ui) == null ? void 0 : h.allowEditorClose;
  })) != null ? n : !0, r = oe((a) => {
    var h, o;
    return (o = (h = a.config.ui) == null ? void 0 : h.menubar) == null ? void 0 : o.items;
  }), {
    left: s,
    center: f,
    right: g
  } = Ke(() => PT(r || [], e), [r, e]), l = t && e && i && /* @__PURE__ */ x(De, {
    size: "sm",
    className: "ml-10",
    onClick: () => {
      O().editor.close();
    },
    children: /* @__PURE__ */ x(hi, {})
  });
  return /* @__PURE__ */ ie(et.div, {
    className: Ip,
    ...Rp,
    children: [/* @__PURE__ */ x("div", {
      className: "mr-auto flex items-center gap-8",
      children: s.map((a, h) => /* @__PURE__ */ x(Bo, {
        item: a
      }, h))
    }), /* @__PURE__ */ x("div", {
      className: "flex items-center gap-10",
      children: f.map((a, h) => /* @__PURE__ */ x(Bo, {
        item: a
      }, h))
    }), /* @__PURE__ */ x("div", {
      className: "ml-auto flex items-center gap-8",
      children: g.map((a, h) => /* @__PURE__ */ x(Bo, {
        item: a
      }, h))
    }), l]
  });
}
function PT(t, e) {
  const i = {
    left: [],
    center: [],
    right: []
  };
  (t || []).filter((s) => !e && !s.mobileOnly || e && !s.desktopOnly).forEach((s) => {
    var f, g, l;
    s.align === "left" ? i.left.push({
      ...s,
      position: (f = s.position) != null ? f : 1
    }) : s.align === "right" ? i.right.push({
      ...s,
      position: (g = s.position) != null ? g : 1
    }) : i.center.push({
      ...s,
      position: (l = s.position) != null ? l : 1
    });
  });
  const r = Object.entries(i).map(([s, f]) => [s, f.sort((g, l) => {
    var n, a;
    return ((n = g.position) != null ? n : 0) - ((a = l.position) != null ? a : 0);
  })]);
  return Object.fromEntries(r);
}
function AT() {
  const t = oe((i) => {
    var r;
    return (r = i.crop.zoneRect) == null ? void 0 : r.width;
  }) || 1, e = oe((i) => {
    var r;
    return (r = i.crop.zoneRect) == null ? void 0 : r.height;
  }) || 1;
  return /* @__PURE__ */ x("div", {
    className: "text-sm",
    children: `${t}x${e}`
  });
}
function MT() {
  const t = oe((e) => e.activeTool);
  return /* @__PURE__ */ ie(et.div, {
    className: Ip,
    ...Rp,
    children: [/* @__PURE__ */ x(DT, {}), IT(t), /* @__PURE__ */ x(RT, {})]
  });
}
function DT() {
  const {
    isMobile: t
  } = io(), e = oe((i) => i.dirty);
  return t ? /* @__PURE__ */ x(De, {
    size: "sm",
    onClick: () => {
      O().cancelChanges();
    },
    children: /* @__PURE__ */ x(hi, {})
  }) : /* @__PURE__ */ x(Qe, {
    variant: "outline",
    size: "xs",
    startIcon: /* @__PURE__ */ x(hi, {}),
    radius: "rounded-full",
    onClick: () => {
      O().cancelChanges();
    },
    children: e ? /* @__PURE__ */ x(ve, {
      message: "Cancel"
    }) : /* @__PURE__ */ x(ve, {
      message: "Close"
    })
  });
}
function IT(t) {
  var i, r, s;
  if (!t)
    return null;
  const e = /* @__PURE__ */ x("div", {
    className: "capitalize text-sm",
    children: /* @__PURE__ */ x(ve, {
      message: t
    })
  });
  switch (t) {
    case Ae.CROP:
      return ((s = (r = (i = O().config.tools) == null ? void 0 : i.crop) == null ? void 0 : r.allowCustomRatio) != null ? s : !0) ? /* @__PURE__ */ x(AT, {}) : e;
    default:
      return e;
  }
}
function RT() {
  const {
    isMobile: t
  } = io(), e = oe((i) => i.dirty);
  return t ? /* @__PURE__ */ x(De, {
    size: "sm",
    disabled: !e,
    onClick: () => {
      O().applyChanges();
    },
    children: /* @__PURE__ */ x(Da, {})
  }) : /* @__PURE__ */ x(Qe, {
    variant: "flat",
    color: "primary",
    size: "xs",
    disabled: !e,
    startIcon: /* @__PURE__ */ x(Da, {}),
    radius: "rounded-full",
    onClick: () => {
      O().applyChanges();
    },
    children: /* @__PURE__ */ x(ve, {
      message: "Apply"
    })
  });
}
function th() {
  const t = oe((e) => e.activeTool);
  return /* @__PURE__ */ x(Ut, {
    initial: !1,
    children: t ? /* @__PURE__ */ x(MT, {}, "activeToolbar") : /* @__PURE__ */ x(OT, {}, "mainToolbar")
  });
}
const LT = {
  newCanvas: ne("Loading Canvas"),
  mainImage: ne("Loading Image"),
  state: ne("Loading State"),
  merge: ne("Processing Image")
};
function FT() {
  const [t, e] = Me(!1);
  return Te(() => {
    oe.subscribe((i) => i.loading, (i) => {
      i && e(i);
    });
  }, []), /* @__PURE__ */ x(Ut, {
    children: t && /* @__PURE__ */ x(et.div, {
      initial: {
        y: "60%",
        opacity: 0
      },
      animate: {
        y: 0,
        opacity: 1
      },
      exit: {
        y: "-60%",
        opacity: 0
      },
      transition: {
        type: "tween",
        duration: 0.3
      },
      onAnimationComplete: () => {
        setTimeout(() => {
          e(!1);
        }, 400);
      },
      className: "absolute z-loading-indicator inset-0 m-auto p-6 w-144 h-32 text-center text-sm bg-paper rounded-full shadow-lg",
      children: /* @__PURE__ */ x(ve, {
        ...LT[t]
      })
    })
  });
}
function zT(t, e, i) {
  return Math.max(e, Math.min(t, i));
}
const Ue = {
  toVector(t, e) {
    return t === void 0 && (t = e), Array.isArray(t) ? t : [t, t];
  },
  add(t, e) {
    return [t[0] + e[0], t[1] + e[1]];
  },
  sub(t, e) {
    return [t[0] - e[0], t[1] - e[1]];
  },
  addTo(t, e) {
    t[0] += e[0], t[1] += e[1];
  },
  subTo(t, e) {
    t[0] -= e[0], t[1] -= e[1];
  }
};
function ih(t, e, i) {
  return e === 0 || Math.abs(e) === 1 / 0 ? Math.pow(t, i * 5) : t * e * i / (e + i * t);
}
function rh(t, e, i, r = 0.15) {
  return r === 0 ? zT(t, e, i) : t < e ? -ih(e - t, i - e, r) + e : t > i ? +ih(t - i, i - e, r) + i : t;
}
function BT(t, [e, i], [r, s]) {
  const [[f, g], [l, n]] = t;
  return [rh(e, f, g, r), rh(i, l, n, s)];
}
function jT(t, e) {
  if (typeof t != "object" || t === null)
    return t;
  var i = t[Symbol.toPrimitive];
  if (i !== void 0) {
    var r = i.call(t, e || "default");
    if (typeof r != "object")
      return r;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (e === "string" ? String : Number)(t);
}
function NT(t) {
  var e = jT(t, "string");
  return typeof e == "symbol" ? e : String(e);
}
function Ze(t, e, i) {
  return e = NT(e), e in t ? Object.defineProperty(t, e, {
    value: i,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : t[e] = i, t;
}
function nh(t, e) {
  var i = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e && (r = r.filter(function(s) {
      return Object.getOwnPropertyDescriptor(t, s).enumerable;
    })), i.push.apply(i, r);
  }
  return i;
}
function ze(t) {
  for (var e = 1; e < arguments.length; e++) {
    var i = arguments[e] != null ? arguments[e] : {};
    e % 2 ? nh(Object(i), !0).forEach(function(r) {
      Ze(t, r, i[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : nh(Object(i)).forEach(function(r) {
      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(i, r));
    });
  }
  return t;
}
const ig = {
  pointer: {
    start: "down",
    change: "move",
    end: "up"
  },
  mouse: {
    start: "down",
    change: "move",
    end: "up"
  },
  touch: {
    start: "start",
    change: "move",
    end: "end"
  },
  gesture: {
    start: "start",
    change: "change",
    end: "end"
  }
};
function sh(t) {
  return t ? t[0].toUpperCase() + t.slice(1) : "";
}
const VT = ["enter", "leave"];
function $T(t = !1, e) {
  return t && !VT.includes(e);
}
function HT(t, e = "", i = !1) {
  const r = ig[t], s = r && r[e] || e;
  return "on" + sh(t) + sh(s) + ($T(i, s) ? "Capture" : "");
}
const UT = ["gotpointercapture", "lostpointercapture"];
function WT(t) {
  let e = t.substring(2).toLowerCase();
  const i = !!~e.indexOf("passive");
  i && (e = e.replace("passive", ""));
  const r = UT.includes(e) ? "capturecapture" : "capture", s = !!~e.indexOf(r);
  return s && (e = e.replace("capture", "")), {
    device: e,
    capture: s,
    passive: i
  };
}
function YT(t, e = "") {
  const i = ig[t], r = i && i[e] || e;
  return t + r;
}
function ro(t) {
  return "touches" in t;
}
function rg(t) {
  return ro(t) ? "touch" : "pointerType" in t ? t.pointerType : "mouse";
}
function GT(t) {
  return Array.from(t.touches).filter((e) => {
    var i, r;
    return e.target === t.currentTarget || ((i = t.currentTarget) === null || i === void 0 || (r = i.contains) === null || r === void 0 ? void 0 : r.call(i, e.target));
  });
}
function XT(t) {
  return t.type === "touchend" || t.type === "touchcancel" ? t.changedTouches : t.targetTouches;
}
function ng(t) {
  return ro(t) ? XT(t)[0] : t;
}
function za(t, e) {
  try {
    const i = e.clientX - t.clientX, r = e.clientY - t.clientY, s = (e.clientX + t.clientX) / 2, f = (e.clientY + t.clientY) / 2, g = Math.hypot(i, r);
    return {
      angle: -(Math.atan2(i, r) * 180) / Math.PI,
      distance: g,
      origin: [s, f]
    };
  } catch {
  }
  return null;
}
function KT(t) {
  return GT(t).map((e) => e.identifier);
}
function oh(t, e) {
  const [i, r] = Array.from(t.touches).filter((s) => e.includes(s.identifier));
  return za(i, r);
}
function jo(t) {
  const e = ng(t);
  return ro(t) ? e.identifier : e.pointerId;
}
function ah(t) {
  const e = ng(t);
  return [e.clientX, e.clientY];
}
const ch = 40, lh = 800;
function qT(t) {
  let {
    deltaX: e,
    deltaY: i,
    deltaMode: r
  } = t;
  return r === 1 ? (e *= ch, i *= ch) : r === 2 && (e *= lh, i *= lh), [e, i];
}
function ZT(t) {
  const e = {};
  if ("buttons" in t && (e.buttons = t.buttons), "shiftKey" in t) {
    const {
      shiftKey: i,
      altKey: r,
      metaKey: s,
      ctrlKey: f
    } = t;
    Object.assign(e, {
      shiftKey: i,
      altKey: r,
      metaKey: s,
      ctrlKey: f
    });
  }
  return e;
}
function Cs(t, ...e) {
  return typeof t == "function" ? t(...e) : t;
}
function JT() {
}
function QT(...t) {
  return t.length === 0 ? JT : t.length === 1 ? t[0] : function() {
    let e;
    for (const i of t)
      e = i.apply(this, arguments) || e;
    return e;
  };
}
function uh(t, e) {
  return Object.assign({}, e, t || {});
}
const e5 = 32;
class sg {
  constructor(e, i, r) {
    this.ctrl = e, this.args = i, this.key = r, this.state || (this.state = {}, this.computeValues([0, 0]), this.computeInitial(), this.init && this.init(), this.reset());
  }
  get state() {
    return this.ctrl.state[this.key];
  }
  set state(e) {
    this.ctrl.state[this.key] = e;
  }
  get shared() {
    return this.ctrl.state.shared;
  }
  get eventStore() {
    return this.ctrl.gestureEventStores[this.key];
  }
  get timeoutStore() {
    return this.ctrl.gestureTimeoutStores[this.key];
  }
  get config() {
    return this.ctrl.config[this.key];
  }
  get sharedConfig() {
    return this.ctrl.config.shared;
  }
  get handler() {
    return this.ctrl.handlers[this.key];
  }
  reset() {
    const {
      state: e,
      shared: i,
      ingKey: r,
      args: s
    } = this;
    i[r] = e._active = e.active = e._blocked = e._force = !1, e._step = [!1, !1], e.intentional = !1, e._movement = [0, 0], e._distance = [0, 0], e._direction = [0, 0], e._delta = [0, 0], e._bounds = [[-1 / 0, 1 / 0], [-1 / 0, 1 / 0]], e.args = s, e.axis = void 0, e.memo = void 0, e.elapsedTime = e.timeDelta = 0, e.direction = [0, 0], e.distance = [0, 0], e.overflow = [0, 0], e._movementBound = [!1, !1], e.velocity = [0, 0], e.movement = [0, 0], e.delta = [0, 0], e.timeStamp = 0;
  }
  start(e) {
    const i = this.state, r = this.config;
    i._active || (this.reset(), this.computeInitial(), i._active = !0, i.target = e.target, i.currentTarget = e.currentTarget, i.lastOffset = r.from ? Cs(r.from, i) : i.offset, i.offset = i.lastOffset, i.startTime = i.timeStamp = e.timeStamp);
  }
  computeValues(e) {
    const i = this.state;
    i._values = e, i.values = this.config.transform(e);
  }
  computeInitial() {
    const e = this.state;
    e._initial = e._values, e.initial = e.values;
  }
  compute(e) {
    const {
      state: i,
      config: r,
      shared: s
    } = this;
    i.args = this.args;
    let f = 0;
    if (e && (i.event = e, r.preventDefault && e.cancelable && i.event.preventDefault(), i.type = e.type, s.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size, s.locked = !!document.pointerLockElement, Object.assign(s, ZT(e)), s.down = s.pressed = s.buttons % 2 === 1 || s.touches > 0, f = e.timeStamp - i.timeStamp, i.timeStamp = e.timeStamp, i.elapsedTime = i.timeStamp - i.startTime), i._active) {
      const S = i._delta.map(Math.abs);
      Ue.addTo(i._distance, S);
    }
    this.axisIntent && this.axisIntent(e);
    const [g, l] = i._movement, [n, a] = r.threshold, {
      _step: h,
      values: o
    } = i;
    if (r.hasCustomTransform ? (h[0] === !1 && (h[0] = Math.abs(g) >= n && o[0]), h[1] === !1 && (h[1] = Math.abs(l) >= a && o[1])) : (h[0] === !1 && (h[0] = Math.abs(g) >= n && Math.sign(g) * n), h[1] === !1 && (h[1] = Math.abs(l) >= a && Math.sign(l) * a)), i.intentional = h[0] !== !1 || h[1] !== !1, !i.intentional)
      return;
    const u = [0, 0];
    if (r.hasCustomTransform) {
      const [S, C] = o;
      u[0] = h[0] !== !1 ? S - h[0] : 0, u[1] = h[1] !== !1 ? C - h[1] : 0;
    } else
      u[0] = h[0] !== !1 ? g - h[0] : 0, u[1] = h[1] !== !1 ? l - h[1] : 0;
    this.restrictToAxis && !i._blocked && this.restrictToAxis(u);
    const c = i.offset, d = i._active && !i._blocked || i.active;
    d && (i.first = i._active && !i.active, i.last = !i._active && i.active, i.active = s[this.ingKey] = i._active, e && (i.first && ("bounds" in r && (i._bounds = Cs(r.bounds, i)), this.setup && this.setup()), i.movement = u, this.computeOffset()));
    const [m, p] = i.offset, [[v, b], [y, w]] = i._bounds;
    i.overflow = [m < v ? -1 : m > b ? 1 : 0, p < y ? -1 : p > w ? 1 : 0], i._movementBound[0] = i.overflow[0] ? i._movementBound[0] === !1 ? i._movement[0] : i._movementBound[0] : !1, i._movementBound[1] = i.overflow[1] ? i._movementBound[1] === !1 ? i._movement[1] : i._movementBound[1] : !1;
    const _ = i._active ? r.rubberband || [0, 0] : [0, 0];
    if (i.offset = BT(i._bounds, i.offset, _), i.delta = Ue.sub(i.offset, c), this.computeMovement(), d && (!i.last || f > e5)) {
      i.delta = Ue.sub(i.offset, c);
      const S = i.delta.map(Math.abs);
      Ue.addTo(i.distance, S), i.direction = i.delta.map(Math.sign), i._direction = i._delta.map(Math.sign), !i.first && f > 0 && (i.velocity = [S[0] / f, S[1] / f], i.timeDelta = f);
    }
  }
  emit() {
    const e = this.state, i = this.shared, r = this.config;
    if (e._active || this.clean(), (e._blocked || !e.intentional) && !e._force && !r.triggerAllEvents)
      return;
    const s = this.handler(ze(ze(ze({}, i), e), {}, {
      [this.aliasKey]: e.values
    }));
    s !== void 0 && (e.memo = s);
  }
  clean() {
    this.eventStore.clean(), this.timeoutStore.clean();
  }
}
function t5([t, e], i) {
  const r = Math.abs(t), s = Math.abs(e);
  if (r > s && r > i)
    return "x";
  if (s > r && s > i)
    return "y";
}
class i5 extends sg {
  constructor(...e) {
    super(...e), Ze(this, "aliasKey", "xy");
  }
  reset() {
    super.reset(), this.state.axis = void 0;
  }
  init() {
    this.state.offset = [0, 0], this.state.lastOffset = [0, 0];
  }
  computeOffset() {
    this.state.offset = Ue.add(this.state.lastOffset, this.state.movement);
  }
  computeMovement() {
    this.state.movement = Ue.sub(this.state.offset, this.state.lastOffset);
  }
  axisIntent(e) {
    const i = this.state, r = this.config;
    if (!i.axis && e) {
      const s = typeof r.axisThreshold == "object" ? r.axisThreshold[rg(e)] : r.axisThreshold;
      i.axis = t5(i._movement, s);
    }
    i._blocked = (r.lockDirection || !!r.axis) && !i.axis || !!r.axis && r.axis !== i.axis;
  }
  restrictToAxis(e) {
    if (this.config.axis || this.config.lockDirection)
      switch (this.state.axis) {
        case "x":
          e[1] = 0;
          break;
        case "y":
          e[0] = 0;
          break;
      }
  }
}
const r5 = (t) => t, hh = 0.15, og = {
  enabled(t = !0) {
    return t;
  },
  eventOptions(t, e, i) {
    return ze(ze({}, i.shared.eventOptions), t);
  },
  preventDefault(t = !1) {
    return t;
  },
  triggerAllEvents(t = !1) {
    return t;
  },
  rubberband(t = 0) {
    switch (t) {
      case !0:
        return [hh, hh];
      case !1:
        return [0, 0];
      default:
        return Ue.toVector(t);
    }
  },
  from(t) {
    if (typeof t == "function")
      return t;
    if (t != null)
      return Ue.toVector(t);
  },
  transform(t, e, i) {
    const r = t || i.shared.transform;
    return this.hasCustomTransform = !!r, r || r5;
  },
  threshold(t) {
    return Ue.toVector(t, 0);
  }
}, n5 = 0, En = ze(ze({}, og), {}, {
  axis(t, e, {
    axis: i
  }) {
    if (this.lockDirection = i === "lock", !this.lockDirection)
      return i;
  },
  axisThreshold(t = n5) {
    return t;
  },
  bounds(t = {}) {
    if (typeof t == "function")
      return (f) => En.bounds(t(f));
    if ("current" in t)
      return () => t.current;
    if (typeof HTMLElement == "function" && t instanceof HTMLElement)
      return t;
    const {
      left: e = -1 / 0,
      right: i = 1 / 0,
      top: r = -1 / 0,
      bottom: s = 1 / 0
    } = t;
    return [[e, i], [r, s]];
  }
}), fh = {
  ArrowRight: (t, e = 1) => [t * e, 0],
  ArrowLeft: (t, e = 1) => [-1 * t * e, 0],
  ArrowUp: (t, e = 1) => [0, -1 * t * e],
  ArrowDown: (t, e = 1) => [0, t * e]
};
class s5 extends i5 {
  constructor(...e) {
    super(...e), Ze(this, "ingKey", "dragging");
  }
  reset() {
    super.reset();
    const e = this.state;
    e._pointerId = void 0, e._pointerActive = !1, e._keyboardActive = !1, e._preventScroll = !1, e._delayed = !1, e.swipe = [0, 0], e.tap = !1, e.canceled = !1, e.cancel = this.cancel.bind(this);
  }
  setup() {
    const e = this.state;
    if (e._bounds instanceof HTMLElement) {
      const i = e._bounds.getBoundingClientRect(), r = e.currentTarget.getBoundingClientRect(), s = {
        left: i.left - r.left + e.offset[0],
        right: i.right - r.right + e.offset[0],
        top: i.top - r.top + e.offset[1],
        bottom: i.bottom - r.bottom + e.offset[1]
      };
      e._bounds = En.bounds(s);
    }
  }
  cancel() {
    const e = this.state;
    e.canceled || (e.canceled = !0, e._active = !1, setTimeout(() => {
      this.compute(), this.emit();
    }, 0));
  }
  setActive() {
    this.state._active = this.state._pointerActive || this.state._keyboardActive;
  }
  clean() {
    this.pointerClean(), this.state._pointerActive = !1, this.state._keyboardActive = !1, super.clean();
  }
  pointerDown(e) {
    const i = this.config, r = this.state;
    if (e.buttons != null && (Array.isArray(i.pointerButtons) ? !i.pointerButtons.includes(e.buttons) : i.pointerButtons !== -1 && i.pointerButtons !== e.buttons))
      return;
    const s = this.ctrl.setEventIds(e);
    i.pointerCapture && e.target.setPointerCapture(e.pointerId), !(s && s.size > 1 && r._pointerActive) && (this.start(e), this.setupPointer(e), r._pointerId = jo(e), r._pointerActive = !0, this.computeValues(ah(e)), this.computeInitial(), i.preventScrollAxis && rg(e) !== "mouse" ? (r._active = !1, this.setupScrollPrevention(e)) : i.delay > 0 ? (this.setupDelayTrigger(e), i.triggerAllEvents && (this.compute(e), this.emit())) : this.startPointerDrag(e));
  }
  startPointerDrag(e) {
    const i = this.state;
    i._active = !0, i._preventScroll = !0, i._delayed = !1, this.compute(e), this.emit();
  }
  pointerMove(e) {
    const i = this.state, r = this.config;
    if (!i._pointerActive || i.type === e.type && e.timeStamp === i.timeStamp)
      return;
    const s = jo(e);
    if (i._pointerId !== void 0 && s !== i._pointerId)
      return;
    const f = ah(e);
    if (document.pointerLockElement === e.target ? i._delta = [e.movementX, e.movementY] : (i._delta = Ue.sub(f, i._values), this.computeValues(f)), Ue.addTo(i._movement, i._delta), this.compute(e), i._delayed && i.intentional) {
      this.timeoutStore.remove("dragDelay"), i.active = !1, this.startPointerDrag(e);
      return;
    }
    if (r.preventScrollAxis && !i._preventScroll)
      if (i.axis)
        if (i.axis === r.preventScrollAxis || r.preventScrollAxis === "xy") {
          i._active = !1, this.clean();
          return;
        } else {
          this.timeoutStore.remove("startPointerDrag"), this.startPointerDrag(e);
          return;
        }
      else
        return;
    this.emit();
  }
  pointerUp(e) {
    this.ctrl.setEventIds(e);
    try {
      this.config.pointerCapture && e.target.hasPointerCapture(e.pointerId) && e.target.releasePointerCapture(e.pointerId);
    } catch {
    }
    const i = this.state, r = this.config;
    if (!i._active || !i._pointerActive)
      return;
    const s = jo(e);
    if (i._pointerId !== void 0 && s !== i._pointerId)
      return;
    this.state._pointerActive = !1, this.setActive(), this.compute(e);
    const [f, g] = i._distance;
    if (i.tap = f <= r.tapsThreshold && g <= r.tapsThreshold, i.tap && r.filterTaps)
      i._force = !0;
    else {
      const [l, n] = i._delta, [a, h] = i._movement, [o, u] = r.swipe.velocity, [c, d] = r.swipe.distance, m = r.swipe.duration;
      if (i.elapsedTime < m) {
        const p = Math.abs(l / i.timeDelta), v = Math.abs(n / i.timeDelta);
        p > o && Math.abs(a) > c && (i.swipe[0] = Math.sign(l)), v > u && Math.abs(h) > d && (i.swipe[1] = Math.sign(n));
      }
    }
    this.emit();
  }
  pointerClick(e) {
    !this.state.tap && e.detail > 0 && (e.preventDefault(), e.stopPropagation());
  }
  setupPointer(e) {
    const i = this.config, r = i.device;
    i.pointerLock && e.currentTarget.requestPointerLock(), i.pointerCapture || (this.eventStore.add(this.sharedConfig.window, r, "change", this.pointerMove.bind(this)), this.eventStore.add(this.sharedConfig.window, r, "end", this.pointerUp.bind(this)), this.eventStore.add(this.sharedConfig.window, r, "cancel", this.pointerUp.bind(this)));
  }
  pointerClean() {
    this.config.pointerLock && document.pointerLockElement === this.state.currentTarget && document.exitPointerLock();
  }
  preventScroll(e) {
    this.state._preventScroll && e.cancelable && e.preventDefault();
  }
  setupScrollPrevention(e) {
    this.state._preventScroll = !1, o5(e);
    const i = this.eventStore.add(this.sharedConfig.window, "touch", "change", this.preventScroll.bind(this), {
      passive: !1
    });
    this.eventStore.add(this.sharedConfig.window, "touch", "end", i), this.eventStore.add(this.sharedConfig.window, "touch", "cancel", i), this.timeoutStore.add("startPointerDrag", this.startPointerDrag.bind(this), this.config.preventScrollDelay, e);
  }
  setupDelayTrigger(e) {
    this.state._delayed = !0, this.timeoutStore.add("dragDelay", () => {
      this.state._step = [0, 0], this.startPointerDrag(e);
    }, this.config.delay);
  }
  keyDown(e) {
    const i = fh[e.key];
    if (i) {
      const r = this.state, s = e.shiftKey ? 10 : e.altKey ? 0.1 : 1;
      this.start(e), r._delta = i(this.config.keyboardDisplacement, s), r._keyboardActive = !0, Ue.addTo(r._movement, r._delta), this.compute(e), this.emit();
    }
  }
  keyUp(e) {
    e.key in fh && (this.state._keyboardActive = !1, this.setActive(), this.compute(e), this.emit());
  }
  bind(e) {
    const i = this.config.device;
    e(i, "start", this.pointerDown.bind(this)), this.config.pointerCapture && (e(i, "change", this.pointerMove.bind(this)), e(i, "end", this.pointerUp.bind(this)), e(i, "cancel", this.pointerUp.bind(this)), e("lostPointerCapture", "", this.pointerUp.bind(this))), this.config.keys && (e("key", "down", this.keyDown.bind(this)), e("key", "up", this.keyUp.bind(this))), this.config.filterTaps && e("click", "", this.pointerClick.bind(this), {
      capture: !0,
      passive: !1
    });
  }
}
function o5(t) {
  "persist" in t && typeof t.persist == "function" && t.persist();
}
const kn = typeof window < "u" && window.document && window.document.createElement;
function a5() {
  return kn && "ontouchstart" in window;
}
function dh() {
  return a5() || kn && window.navigator.maxTouchPoints > 1;
}
function c5() {
  return kn && "onpointerdown" in window;
}
function l5() {
  return kn && "exitPointerLock" in window.document;
}
function u5() {
  try {
    return "constructor" in GestureEvent;
  } catch {
    return !1;
  }
}
const yt = {
  isBrowser: kn,
  gesture: u5(),
  touch: dh(),
  touchscreen: dh(),
  pointer: c5(),
  pointerLock: l5()
}, h5 = 250, f5 = 180, d5 = 0.5, p5 = 50, g5 = 250, m5 = 10, ph = {
  mouse: 0,
  touch: 0,
  pen: 8
}, v5 = ze(ze({}, En), {}, {
  device(t, e, {
    pointer: {
      touch: i = !1,
      lock: r = !1,
      mouse: s = !1
    } = {}
  }) {
    return this.pointerLock = r && yt.pointerLock, yt.touch && i ? "touch" : this.pointerLock ? "mouse" : yt.pointer && !s ? "pointer" : yt.touch ? "touch" : "mouse";
  },
  preventScrollAxis(t, e, {
    preventScroll: i
  }) {
    if (this.preventScrollDelay = typeof i == "number" ? i : i || i === void 0 && t ? h5 : void 0, !(!yt.touchscreen || i === !1))
      return t || (i !== void 0 ? "y" : void 0);
  },
  pointerCapture(t, e, {
    pointer: {
      capture: i = !0,
      buttons: r = 1,
      keys: s = !0
    } = {}
  }) {
    return this.pointerButtons = r, this.keys = s, !this.pointerLock && this.device === "pointer" && i;
  },
  threshold(t, e, {
    filterTaps: i = !1,
    tapsThreshold: r = 3,
    axis: s = void 0
  }) {
    const f = Ue.toVector(t, i ? r : s ? 1 : 0);
    return this.filterTaps = i, this.tapsThreshold = r, f;
  },
  swipe({
    velocity: t = d5,
    distance: e = p5,
    duration: i = g5
  } = {}) {
    return {
      velocity: this.transform(Ue.toVector(t)),
      distance: this.transform(Ue.toVector(e)),
      duration: i
    };
  },
  delay(t = 0) {
    switch (t) {
      case !0:
        return f5;
      case !1:
        return 0;
      default:
        return t;
    }
  },
  axisThreshold(t) {
    return t ? ze(ze({}, ph), t) : ph;
  },
  keyboardDisplacement(t = m5) {
    return t;
  }
});
function b5(t) {
  const [e, i] = t.overflow, [r, s] = t._delta, [f, g] = t._direction;
  (e < 0 && r > 0 && f < 0 || e > 0 && r < 0 && f > 0) && (t._movement[0] = t._movementBound[0]), (i < 0 && s > 0 && g < 0 || i > 0 && s < 0 && g > 0) && (t._movement[1] = t._movementBound[1]);
}
const y5 = 30, w5 = 100;
class x5 extends sg {
  constructor(...e) {
    super(...e), Ze(this, "ingKey", "pinching"), Ze(this, "aliasKey", "da");
  }
  init() {
    this.state.offset = [1, 0], this.state.lastOffset = [1, 0], this.state._pointerEvents = /* @__PURE__ */ new Map();
  }
  reset() {
    super.reset();
    const e = this.state;
    e._touchIds = [], e.canceled = !1, e.cancel = this.cancel.bind(this), e.turns = 0;
  }
  computeOffset() {
    const {
      type: e,
      movement: i,
      lastOffset: r
    } = this.state;
    e === "wheel" ? this.state.offset = Ue.add(i, r) : this.state.offset = [(1 + i[0]) * r[0], i[1] + r[1]];
  }
  computeMovement() {
    const {
      offset: e,
      lastOffset: i
    } = this.state;
    this.state.movement = [e[0] / i[0], e[1] - i[1]];
  }
  axisIntent() {
    const e = this.state, [i, r] = e._movement;
    if (!e.axis) {
      const s = Math.abs(i) * y5 - Math.abs(r);
      s < 0 ? e.axis = "angle" : s > 0 && (e.axis = "scale");
    }
  }
  restrictToAxis(e) {
    this.config.lockDirection && (this.state.axis === "scale" ? e[1] = 0 : this.state.axis === "angle" && (e[0] = 0));
  }
  cancel() {
    const e = this.state;
    e.canceled || setTimeout(() => {
      e.canceled = !0, e._active = !1, this.compute(), this.emit();
    }, 0);
  }
  touchStart(e) {
    this.ctrl.setEventIds(e);
    const i = this.state, r = this.ctrl.touchIds;
    if (i._active && i._touchIds.every((f) => r.has(f)) || r.size < 2)
      return;
    this.start(e), i._touchIds = Array.from(r).slice(0, 2);
    const s = oh(e, i._touchIds);
    !s || this.pinchStart(e, s);
  }
  pointerStart(e) {
    if (e.buttons != null && e.buttons % 2 !== 1)
      return;
    this.ctrl.setEventIds(e), e.target.setPointerCapture(e.pointerId);
    const i = this.state, r = i._pointerEvents, s = this.ctrl.pointerIds;
    if (i._active && Array.from(r.keys()).every((g) => s.has(g)) || (r.size < 2 && r.set(e.pointerId, e), i._pointerEvents.size < 2))
      return;
    this.start(e);
    const f = za(...Array.from(r.values()));
    !f || this.pinchStart(e, f);
  }
  pinchStart(e, i) {
    const r = this.state;
    r.origin = i.origin, this.computeValues([i.distance, i.angle]), this.computeInitial(), this.compute(e), this.emit();
  }
  touchMove(e) {
    if (!this.state._active)
      return;
    const i = oh(e, this.state._touchIds);
    !i || this.pinchMove(e, i);
  }
  pointerMove(e) {
    const i = this.state._pointerEvents;
    if (i.has(e.pointerId) && i.set(e.pointerId, e), !this.state._active)
      return;
    const r = za(...Array.from(i.values()));
    !r || this.pinchMove(e, r);
  }
  pinchMove(e, i) {
    const r = this.state, s = r._values[1], f = i.angle - s;
    let g = 0;
    Math.abs(f) > 270 && (g += Math.sign(f)), this.computeValues([i.distance, i.angle - 360 * g]), r.origin = i.origin, r.turns = g, r._movement = [r._values[0] / r._initial[0] - 1, r._values[1] - r._initial[1]], this.compute(e), this.emit();
  }
  touchEnd(e) {
    this.ctrl.setEventIds(e), !!this.state._active && this.state._touchIds.some((i) => !this.ctrl.touchIds.has(i)) && (this.state._active = !1, this.compute(e), this.emit());
  }
  pointerEnd(e) {
    const i = this.state;
    this.ctrl.setEventIds(e);
    try {
      e.target.releasePointerCapture(e.pointerId);
    } catch {
    }
    i._pointerEvents.has(e.pointerId) && i._pointerEvents.delete(e.pointerId), !!i._active && i._pointerEvents.size < 2 && (i._active = !1, this.compute(e), this.emit());
  }
  gestureStart(e) {
    e.cancelable && e.preventDefault();
    const i = this.state;
    i._active || (this.start(e), this.computeValues([e.scale, e.rotation]), i.origin = [e.clientX, e.clientY], this.compute(e), this.emit());
  }
  gestureMove(e) {
    if (e.cancelable && e.preventDefault(), !this.state._active)
      return;
    const i = this.state;
    this.computeValues([e.scale, e.rotation]), i.origin = [e.clientX, e.clientY];
    const r = i._movement;
    i._movement = [e.scale - 1, e.rotation], i._delta = Ue.sub(i._movement, r), this.compute(e), this.emit();
  }
  gestureEnd(e) {
    !this.state._active || (this.state._active = !1, this.compute(e), this.emit());
  }
  wheel(e) {
    const i = this.config.modifierKey;
    i && !e[i] || (this.state._active ? this.wheelChange(e) : this.wheelStart(e), this.timeoutStore.add("wheelEnd", this.wheelEnd.bind(this)));
  }
  wheelStart(e) {
    this.start(e), this.wheelChange(e);
  }
  wheelChange(e) {
    "uv" in e || e.cancelable && e.preventDefault();
    const r = this.state;
    r._delta = [-qT(e)[1] / w5 * r.offset[0], 0], Ue.addTo(r._movement, r._delta), b5(r), this.state.origin = [e.clientX, e.clientY], this.compute(e), this.emit();
  }
  wheelEnd() {
    !this.state._active || (this.state._active = !1, this.compute(), this.emit());
  }
  bind(e) {
    const i = this.config.device;
    i && (e(i, "start", this[i + "Start"].bind(this)), e(i, "change", this[i + "Move"].bind(this)), e(i, "end", this[i + "End"].bind(this)), e(i, "cancel", this[i + "End"].bind(this))), this.config.pinchOnWheel && e("wheel", "", this.wheel.bind(this), {
      passive: !1
    });
  }
}
const _5 = ze(ze({}, og), {}, {
  device(t, e, {
    shared: i,
    pointer: {
      touch: r = !1
    } = {}
  }) {
    if (i.target && !yt.touch && yt.gesture)
      return "gesture";
    if (yt.touch && r)
      return "touch";
    if (yt.touchscreen) {
      if (yt.pointer)
        return "pointer";
      if (yt.touch)
        return "touch";
    }
  },
  bounds(t, e, {
    scaleBounds: i = {},
    angleBounds: r = {}
  }) {
    const s = (g) => {
      const l = uh(Cs(i, g), {
        min: -1 / 0,
        max: 1 / 0
      });
      return [l.min, l.max];
    }, f = (g) => {
      const l = uh(Cs(r, g), {
        min: -1 / 0,
        max: 1 / 0
      });
      return [l.min, l.max];
    };
    return typeof i != "function" && typeof r != "function" ? [s(), f()] : (g) => [s(g), f(g)];
  },
  threshold(t, e, i) {
    return this.lockDirection = i.axis === "lock", Ue.toVector(t, this.lockDirection ? [0.1, 3] : 0);
  },
  modifierKey(t) {
    return t === void 0 ? "ctrlKey" : t;
  },
  pinchOnWheel(t = !0) {
    return t;
  }
});
ze(ze({}, En), {}, {
  mouseOnly: (t = !0) => t
});
ze(ze({}, En), {}, {
  mouseOnly: (t = !0) => t
});
const Jc = /* @__PURE__ */ new Map(), Ba = /* @__PURE__ */ new Map();
function S5(t) {
  Jc.set(t.key, t.engine), Ba.set(t.key, t.resolver);
}
const C5 = {
  key: "drag",
  engine: s5,
  resolver: v5
}, T5 = {
  key: "pinch",
  engine: x5,
  resolver: _5
};
function E5(t, e) {
  if (t == null)
    return {};
  var i = {}, r = Object.keys(t), s, f;
  for (f = 0; f < r.length; f++)
    s = r[f], !(e.indexOf(s) >= 0) && (i[s] = t[s]);
  return i;
}
function k5(t, e) {
  if (t == null)
    return {};
  var i = E5(t, e), r, s;
  if (Object.getOwnPropertySymbols) {
    var f = Object.getOwnPropertySymbols(t);
    for (s = 0; s < f.length; s++)
      r = f[s], !(e.indexOf(r) >= 0) && (!Object.prototype.propertyIsEnumerable.call(t, r) || (i[r] = t[r]));
  }
  return i;
}
const O5 = {
  target(t) {
    if (t)
      return () => "current" in t ? t.current : t;
  },
  enabled(t = !0) {
    return t;
  },
  window(t = yt.isBrowser ? window : void 0) {
    return t;
  },
  eventOptions({
    passive: t = !0,
    capture: e = !1
  } = {}) {
    return {
      passive: t,
      capture: e
    };
  },
  transform(t) {
    return t;
  }
}, P5 = ["target", "eventOptions", "window", "enabled", "transform"];
function Jn(t = {}, e) {
  const i = {};
  for (const [r, s] of Object.entries(e))
    switch (typeof s) {
      case "function":
        i[r] = s.call(i, t[r], r, t);
        break;
      case "object":
        i[r] = Jn(t[r], s);
        break;
      case "boolean":
        s && (i[r] = t[r]);
        break;
    }
  return i;
}
function A5(t, e, i = {}) {
  const r = t, {
    target: s,
    eventOptions: f,
    window: g,
    enabled: l,
    transform: n
  } = r, a = k5(r, P5);
  if (i.shared = Jn({
    target: s,
    eventOptions: f,
    window: g,
    enabled: l,
    transform: n
  }, O5), e) {
    const h = Ba.get(e);
    i[e] = Jn(ze({
      shared: i.shared
    }, a), h);
  } else
    for (const h in a) {
      const o = Ba.get(h);
      o && (i[h] = Jn(ze({
        shared: i.shared
      }, a[h]), o));
    }
  return i;
}
class ag {
  constructor(e, i) {
    Ze(this, "_listeners", /* @__PURE__ */ new Set()), this._ctrl = e, this._gestureKey = i;
  }
  add(e, i, r, s, f) {
    const g = this._listeners, l = YT(i, r), n = this._gestureKey ? this._ctrl.config[this._gestureKey].eventOptions : {}, a = ze(ze({}, n), f);
    e.addEventListener(l, s, a);
    const h = () => {
      e.removeEventListener(l, s, a), g.delete(h);
    };
    return g.add(h), h;
  }
  clean() {
    this._listeners.forEach((e) => e()), this._listeners.clear();
  }
}
class M5 {
  constructor() {
    Ze(this, "_timeouts", /* @__PURE__ */ new Map());
  }
  add(e, i, r = 140, ...s) {
    this.remove(e), this._timeouts.set(e, window.setTimeout(i, r, ...s));
  }
  remove(e) {
    const i = this._timeouts.get(e);
    i && window.clearTimeout(i);
  }
  clean() {
    this._timeouts.forEach((e) => void window.clearTimeout(e)), this._timeouts.clear();
  }
}
class D5 {
  constructor(e) {
    Ze(this, "gestures", /* @__PURE__ */ new Set()), Ze(this, "_targetEventStore", new ag(this)), Ze(this, "gestureEventStores", {}), Ze(this, "gestureTimeoutStores", {}), Ze(this, "handlers", {}), Ze(this, "config", {}), Ze(this, "pointerIds", /* @__PURE__ */ new Set()), Ze(this, "touchIds", /* @__PURE__ */ new Set()), Ze(this, "state", {
      shared: {
        shiftKey: !1,
        metaKey: !1,
        ctrlKey: !1,
        altKey: !1
      }
    }), I5(this, e);
  }
  setEventIds(e) {
    if (ro(e))
      return this.touchIds = new Set(KT(e)), this.touchIds;
    if ("pointerId" in e)
      return e.type === "pointerup" || e.type === "pointercancel" ? this.pointerIds.delete(e.pointerId) : e.type === "pointerdown" && this.pointerIds.add(e.pointerId), this.pointerIds;
  }
  applyHandlers(e, i) {
    this.handlers = e, this.nativeHandlers = i;
  }
  applyConfig(e, i) {
    this.config = A5(e, i, this.config);
  }
  clean() {
    this._targetEventStore.clean();
    for (const e of this.gestures)
      this.gestureEventStores[e].clean(), this.gestureTimeoutStores[e].clean();
  }
  effect() {
    return this.config.shared.target && this.bind(), () => this._targetEventStore.clean();
  }
  bind(...e) {
    const i = this.config.shared, r = {};
    let s;
    if (!(i.target && (s = i.target(), !s))) {
      if (i.enabled) {
        for (const g of this.gestures) {
          const l = this.config[g], n = gh(r, l.eventOptions, !!s);
          if (l.enabled) {
            const a = Jc.get(g);
            new a(this, e, g).bind(n);
          }
        }
        const f = gh(r, i.eventOptions, !!s);
        for (const g in this.nativeHandlers)
          f(g, "", (l) => this.nativeHandlers[g](ze(ze({}, this.state.shared), {}, {
            event: l,
            args: e
          })), void 0, !0);
      }
      for (const f in r)
        r[f] = QT(...r[f]);
      if (!s)
        return r;
      for (const f in r) {
        const {
          device: g,
          capture: l,
          passive: n
        } = WT(f);
        this._targetEventStore.add(s, g, "", r[f], {
          capture: l,
          passive: n
        });
      }
    }
  }
}
function Gi(t, e) {
  t.gestures.add(e), t.gestureEventStores[e] = new ag(t, e), t.gestureTimeoutStores[e] = new M5();
}
function I5(t, e) {
  e.drag && Gi(t, "drag"), e.wheel && Gi(t, "wheel"), e.scroll && Gi(t, "scroll"), e.move && Gi(t, "move"), e.pinch && Gi(t, "pinch"), e.hover && Gi(t, "hover");
}
const gh = (t, e, i) => (r, s, f, g = {}, l = !1) => {
  var n, a;
  const h = (n = g.capture) !== null && n !== void 0 ? n : e.capture, o = (a = g.passive) !== null && a !== void 0 ? a : e.passive;
  let u = l ? r : HT(r, s, h);
  i && o && (u += "Passive"), t[u] = t[u] || [], t[u].push(f);
}, R5 = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;
function L5(t) {
  const e = {}, i = {}, r = /* @__PURE__ */ new Set();
  for (let s in t)
    R5.test(s) ? (r.add(RegExp.lastMatch), i[s] = t[s]) : e[s] = t[s];
  return [i, e, r];
}
function Xi(t, e, i, r, s, f) {
  if (!t.has(i) || !Jc.has(r))
    return;
  const g = i + "Start", l = i + "End", n = (a) => {
    let h;
    return a.first && g in e && e[g](a), i in e && (h = e[i](a)), a.last && l in e && e[l](a), h;
  };
  s[r] = n, f[r] = f[r] || {};
}
function F5(t, e) {
  const [i, r, s] = L5(t), f = {};
  return Xi(s, i, "onDrag", "drag", f, e), Xi(s, i, "onWheel", "wheel", f, e), Xi(s, i, "onScroll", "scroll", f, e), Xi(s, i, "onPinch", "pinch", f, e), Xi(s, i, "onMove", "move", f, e), Xi(s, i, "onHover", "hover", f, e), {
    handlers: f,
    config: e,
    nativeHandlers: r
  };
}
function z5(t, e = {}, i, r) {
  const s = ue.useMemo(() => new D5(t), []);
  if (s.applyHandlers(t, r), s.applyConfig(e, i), ue.useEffect(s.effect.bind(s)), ue.useEffect(() => s.clean.bind(s), []), e.target === void 0)
    return s.bind.bind(s);
}
function B5(t) {
  return t.forEach(S5), function(i, r) {
    const {
      handlers: s,
      nativeHandlers: f,
      config: g
    } = F5(i, r || {});
    return z5(s, g, void 0, f);
  };
}
function Nt({
  e: t,
  rect: e,
  deltaX: i,
  deltaY: r
}) {
  return {
    rect: e,
    x: t.clientX,
    y: t.clientY,
    deltaX: i != null ? i : 0,
    deltaY: r != null ? r : 0,
    nativeEvent: t
  };
}
function no({
  onMoveStart: t,
  onMove: e,
  onMoveEnd: i,
  minimumMovement: r = 0,
  preventDefault: s,
  stopPropagation: f = !0,
  onPress: g,
  onLongPress: l,
  ...n
}) {
  const h = ge({
    lastPosition: { x: 0, y: 0 },
    started: !1,
    longPressTriggered: !1
  }).current, { addGlobalListener: o, removeGlobalListener: u } = Fc(), c = (v) => {
    !h.el || (t == null ? void 0 : t(v, h.el)) === !1 || (h.originalTouchAction = h.el.style.touchAction, h.el.style.touchAction = "none", h.originalUserSelect = document.documentElement.style.userSelect, document.documentElement.style.userSelect = "none", h.started = !0);
  }, d = (v) => {
    var b;
    if (v.button === 0 && h.id == null) {
      if (h.started = !1, ((b = n.onPointerDown) == null ? void 0 : b.call(n, v)) === !1)
        return;
      f && v.stopPropagation(), s && v.preventDefault(), h.id = v.pointerId, h.el = v.currentTarget, h.lastPosition = { x: v.clientX, y: v.clientY }, l && (h.longPressTimer = setTimeout(() => {
        l(v, h.el), h.longPressTriggered = !0;
      }, 400)), (t || e) && o(window, "pointermove", m, !1), o(window, "pointerup", p, !1), o(window, "pointercancel", p, !1);
    }
  }, m = (v) => {
    if (v.pointerId === h.id) {
      const b = v.clientX - h.lastPosition.x, y = v.clientY - h.lastPosition.y;
      (Math.abs(b) >= r || Math.abs(y) >= r) && !h.started && c(v), h.started && (e == null || e(v, b, y), h.lastPosition = { x: v.clientX, y: v.clientY });
    }
  }, p = (v) => {
    var b;
    if (v.pointerId === h.id) {
      h.longPressTimer && clearTimeout(h.longPressTimer);
      const y = h.longPressTriggered;
      h.longPressTriggered = !1, h.started && (i == null || i(v)), h.el && (v.type !== "pointercancel" && ((b = n.onPointerUp) == null || b.call(n, v, h.el), v.target && h.el.contains(v.target) && (y ? l == null || l(v, h.el) : g == null || g(v, h.el))), document.documentElement.style.userSelect = h.originalUserSelect || "", h.el.style.touchAction = h.originalTouchAction || ""), h.id = void 0, h.started = !1, u(window, "pointermove", m, !1), u(window, "pointerup", p, !1), u(window, "pointercancel", p, !1);
    }
  };
  return {
    domProps: {
      onPointerDown: st(d)
    }
  };
}
function j5(t, e) {
  const i = { ...t };
  i.left = Math.max(0, i.left);
  const r = i.left - t.left;
  r > 0 && (i.width -= r), i.top = Math.max(0, i.top);
  const s = i.top - t.top;
  return s > 0 && (i.height -= s), i.width = Math.min(
    i.width,
    e.width - i.left
  ), i.height = Math.min(
    i.height,
    e.height - i.top
  ), i;
}
function un(t) {
  return {
    left: t.left,
    top: t.top,
    width: t.width,
    height: t.height
  };
}
var pt = /* @__PURE__ */ ((t) => (t.topLeft = "topLeft", t.topRight = "topRight", t.bottomLeft = "bottomLeft", t.bottomRight = "bottomRight", t))(pt || {});
let ke = {};
const mh = (t = {}) => {
  yr(null), ke = t;
};
function cg({
  aspectRatio: t,
  boundaryRef: e,
  boundaryRect: i,
  restrictWithinBoundary: r = !0,
  minWidth: s = 50,
  minHeight: f = 50,
  ...g
}) {
  const l = {
    onMoveStart: (a, h) => {
      var u;
      const o = a.target;
      if (!o.dataset.resizeHandle || _n || (mh({
        currentRect: un(h.getBoundingClientRect()),
        resizeDir: o.dataset.resizeHandle
      }), !ke.currentRect))
        return !1;
      yr("resize"), i ? ke.boundaryRect = i : e != null && e.current && (ke.boundaryRect = un(
        e.current.getBoundingClientRect()
      )), ke.currentRect && ke.boundaryRect && (ke.currentRect.left -= ke.boundaryRect.left, ke.currentRect.top -= ke.boundaryRect.top), ke.initialAspectRatio = ke.currentRect.width / ke.currentRect.height, (u = g.onResizeStart) == null || u.call(g, Nt({ rect: ke.currentRect, e: a }));
    },
    onMove: (a, h, o) => {
      var m;
      if (!ke.resizeDir || !ke.currentRect)
        return;
      const u = t === "initial" ? ke.initialAspectRatio : t, c = N5(ke.currentRect, h, o, u), d = V5(c, s, f, u);
      (m = g.onResize) == null || m.call(
        g,
        Nt({ rect: d, e: a, deltaX: h, deltaY: o })
      ), ke.currentRect = c;
    },
    onMoveEnd: (a) => {
      var h;
      ke.currentRect && ((h = g.onResizeEnd) == null || h.call(g, Nt({ rect: ke.currentRect, e: a }))), mh();
    }
  }, { domProps: n } = no(l);
  return { resizeProps: n };
}
function N5(t, e, i, r) {
  const s = { ...t }, f = { ...t };
  return ke.resizeDir === "topRight" ? (f.width = Math.floor(f.width + e), r ? f.height = Math.floor(f.width / r) : f.height = Math.floor(f.height - i), f.top = Math.floor(f.top + (s.height - f.height))) : ke.resizeDir === "bottomRight" ? (f.width = Math.floor(f.width + e), r ? f.height = Math.floor(f.width / r) : f.height = Math.floor(f.height + i)) : ke.resizeDir === "topLeft" ? (f.width = Math.floor(f.width - e), r ? f.height = Math.floor(f.width / r) : f.height = Math.floor(f.height - i), f.left = Math.floor(f.left + (s.width - f.width)), f.top = Math.floor(f.top + (s.height - f.height))) : ke.resizeDir === "bottomLeft" && (f.width = Math.floor(f.width - e), r ? f.height = Math.floor(f.width / r) : f.height = Math.floor(f.height + i), f.left = Math.floor(f.left + e)), f;
}
function V5(t, e, i, r) {
  const s = ke.resizeDir === "bottomLeft" || ke.resizeDir === "topLeft", f = ke.resizeDir === "topRight" || ke.resizeDir === "topLeft";
  let g = { ...t };
  g.width = Math.max(e, t.width), g.height = Math.max(i, t.height);
  const l = g.width - t.width;
  s && l > 0 && (g.left -= l);
  const n = g.height - t.height;
  if (f && n > 0 && (g.top -= n), ke.boundaryRect && (g = j5(
    g,
    ke.boundaryRect
  )), r) {
    const a = g.width, h = g.height, o = Bc(
      r,
      g.width,
      g.height
    );
    g.width = o.width, g.height = o.height, f && (g.top += h - g.height), s && (g.left += a - g.width);
  }
  return g;
}
function Qt({
  position: t,
  inset: e = !1
}) {
  const i = $5(t, e);
  return /* @__PURE__ */ x("div", {
    "data-resize-handle": t,
    className: `border-white absolute w-20 h-20 ${i}`
  });
}
function $5(t, e) {
  const i = e ? "left-0" : "-left-5", r = e ? "top-0" : "-top-5", s = e ? "bottom-0" : "-bottom-5", f = e ? "right-0" : "-right-5";
  switch (t) {
    case pt.topLeft:
      return `${i} ${r} border-l-4 border-t-4 cursor-nwse-resize`;
    case pt.topRight:
      return `${f} ${r} border-r-4 border-t-4 cursor-nesw-resize`;
    case pt.bottomRight:
      return `${f} ${s} border-r-4 border-b-4 cursor-se-resize`;
    case pt.bottomLeft:
      return `${i} ${s} border-l-4 border-b-4 cursor-sw-resize`;
    default:
      return "";
  }
}
var Nr = /* @__PURE__ */ ((t) => (t.top = "maskTop", t.right = "maskRight", t.bottom = "maskBottom", t.left = "maskLeft", t))(Nr || {});
function Wn({
  position: t,
  refs: e
}) {
  const i = H5(t);
  return /* @__PURE__ */ x("div", {
    className: `cropzone-transition bg-black/50 bottom absolute ${i}`,
    ref: (r) => e.current[t] = r
  });
}
function H5(t) {
  switch (t) {
    case "maskTop":
      return "left-0 top-0";
    case "maskBottom":
      return "bottom-0 left-0";
    default:
      return "";
  }
}
function Yn({
  name: t,
  refs: e
}) {
  const i = ae("cropzone-transition pointer-events-none absolute left-0 top-0 bg-white/50", t.startsWith("lineHor") ? "h-px" : "w-px");
  return /* @__PURE__ */ x("div", {
    className: i,
    ref: (r) => {
      e.current[t] = r;
    }
  });
}
function hn(t, e, i) {
  return Math.min(Math.max(t, e), i);
}
let je = {};
function lg({
  boundaryRef: t,
  boundaryRect: e,
  minimumMovement: i,
  restrictWithinBoundary: r = !0,
  ...s
}) {
  const f = {
    minimumMovement: i,
    onMoveStart: (l, n) => {
      var a;
      if (_n)
        return !1;
      je = {
        currentRect: un(n.getBoundingClientRect())
      }, yr("move"), e ? je.boundaryRect = e : t != null && t.current && (je.boundaryRect = un(
        t.current.getBoundingClientRect()
      )), je.currentRect && je.boundaryRect && (je.currentRect.left -= je.boundaryRect.left, je.currentRect.top -= je.boundaryRect.top), (a = s.onMoveStart) == null || a.call(s, Nt({ rect: je.currentRect, e: l }));
    },
    onMove: (l, n, a) => {
      var u;
      if (!je.currentRect)
        return;
      const h = {
        ...je.currentRect,
        left: je.currentRect.left + n,
        top: je.currentRect.top + a
      }, o = { ...h };
      je.boundaryRect && r && (o.left = hn(
        h.left,
        0,
        je.boundaryRect.width - h.width
      ), o.top = hn(
        h.top,
        0,
        je.boundaryRect.height - h.height
      )), (u = s.onMove) == null || u.call(s, Nt({ rect: o, e: l, deltaX: n, deltaY: a })), je.currentRect = h;
    },
    onMoveEnd: (l) => {
      var n;
      !je.currentRect || ((n = s.onMoveEnd) == null || n.call(s, Nt({ rect: je.currentRect, e: l })), yr(null), je = {});
    }
  }, { domProps: g } = no(f);
  return { moveProps: g };
}
function U5() {
  const t = ge({}), [e, i] = Me(!0), r = oe((h) => h.canvasSize), s = oe((h) => {
    var o, u;
    return (u = (o = h.config.tools) == null ? void 0 : o.crop) == null ? void 0 : u.cropzone;
  }), f = oe((h) => {
    var o, u;
    return (u = (o = h.config.tools) == null ? void 0 : o.crop) == null ? void 0 : u.defaultRatio;
  }) || null, g = oe((h) => h.crop.selectedAspectRatio) || null, {
    moveProps: l
  } = lg({
    boundaryRect: r,
    onMoveStart: () => i(!0),
    onMove: (h) => I().crop.drawZone(h.rect),
    onMoveEnd: () => i(!1)
  }), {
    resizeProps: n
  } = cg({
    boundaryRect: r,
    minHeight: 50,
    minWidth: 50,
    aspectRatio: jc(g),
    onResizeStart: () => i(!0),
    onResize: (h) => I().crop.drawZone(h.rect),
    onResizeEnd: () => i(!1)
  });
  pn(() => {
    I().crop.registerRefs(t), I().crop.resetCropzone(f);
  }, [f, r]);
  const a = ae("cropzone absolute z-cropzone isolate left-0 top-0 w-full h-full overflow-hidden", e && "moving");
  return /* @__PURE__ */ ie("div", {
    className: a,
    onPointerDown: (h) => {
      h.stopPropagation(), h.preventDefault();
    },
    children: [/* @__PURE__ */ ie("div", {
      className: "cropzone-transition border-white/50 absolute z-10 left-0 top-0 border",
      ...Wt(n, l),
      ref: (h) => t.current.innerZone = h,
      children: [!(s != null && s.hideTopLeft) && /* @__PURE__ */ x(Qt, {
        position: pt.topLeft,
        inset: !0
      }), !(s != null && s.hideTopRight) && /* @__PURE__ */ x(Qt, {
        position: pt.topRight,
        inset: !0
      }), !(s != null && s.hideBottomLeft) && /* @__PURE__ */ x(Qt, {
        position: pt.bottomLeft,
        inset: !0
      }), !(s != null && s.hideBottomRight) && /* @__PURE__ */ x(Qt, {
        position: pt.bottomRight,
        inset: !0
      }), /* @__PURE__ */ x(Yn, {
        name: "lineVer1",
        refs: t
      }), /* @__PURE__ */ x(Yn, {
        name: "lineVer2",
        refs: t
      }), /* @__PURE__ */ x(Yn, {
        name: "lineHor1",
        refs: t
      }), /* @__PURE__ */ x(Yn, {
        name: "lineHor2",
        refs: t
      })]
    }), /* @__PURE__ */ x(Wn, {
      refs: t,
      position: Nr.top
    }), /* @__PURE__ */ x(Wn, {
      refs: t,
      position: Nr.left
    }), /* @__PURE__ */ x(Wn, {
      refs: t,
      position: Nr.right
    }), /* @__PURE__ */ x(Wn, {
      refs: t,
      position: Nr.bottom
    })]
  });
}
const W5 = me(/* @__PURE__ */ x("path", {
  d: "M 7 2 C 6.448 2 6 2.448 6 3 C 6 3.552 6.448 4 7 4 L 20 4 L 20 17 C 20 17.552 20.448 18 21 18 C 21.552 18 22 17.552 22 17 L 22 4 C 22 2.895 21.105 2 20 2 L 7 2 z M 4 6 C 2.895 6 2 6.895 2 8 L 2 20 C 2 21.105 2.895 22 4 22 L 16 22 C 17.105 22 18 21.105 18 20 L 18 8 C 18 6.895 17.105 6 16 6 L 4 6 z M 10 10 C 10.552 10 11 10.448 11 11 L 11 13 L 13 13 C 13.552 13 14 13.448 14 14 C 14 14.552 13.552 15 13 15 L 11 15 L 11 17 C 11 17.552 10.552 18 10 18 C 9.448 18 9 17.552 9 17 L 9 15 L 7 15 C 6.448 15 6 14.552 6 14 C 6 13.448 6.448 13 7 13 L 9 13 L 9 11 C 9 10.448 9.448 10 10 10 z"
})), Y5 = me(/* @__PURE__ */ x("path", {
  d: "M 11 3 L 2 21 L 11 21 L 11 3 z M 13 3 L 13 21 L 22 21 L 13 3 z M 9 11.472656 L 9 19 L 5.2363281 19 L 9 11.472656 z"
})), G5 = me(/* @__PURE__ */ x("path", {
  d: "M 16.476562 2.4511719 C 16.392047 2.4657656 16.308531 2.5061719 16.238281 2.5761719 L 14.130859 4.6835938 C 13.956859 4.8575938 13.956859 5.1394531 14.130859 5.3144531 L 16.238281 7.4238281 C 16.519281 7.7048281 17 7.5054219 17 7.1074219 L 17 6 L 20 6 L 20 9 A 1.0001 1.0001 0 1 0 22 9 L 22 6 C 22 4.9069372 21.093063 4 20 4 L 17 4 L 17 2.8925781 C 17 2.5940781 16.730109 2.4073906 16.476562 2.4511719 z M 4 5 C 2.9069372 5 2 5.9069372 2 7 L 2 14 C 2 15.093063 2.9069372 16 4 16 L 7 16 L 7 19 C 7 20.105 7.895 21 9 21 L 16 21 C 17.105 21 18 20.105 18 19 L 18 12 C 18 10.895 17.105 10 16 10 L 13 10 L 13 7 C 13 5.9069372 12.093063 5 11 5 L 4 5 z M 4 7 L 11 7 L 11 14 L 4 14 L 4 7 z"
})), X5 = me(/* @__PURE__ */ x("path", {
  d: "M 10 2 L 9 3 L 3 3 L 3 5 L 21 5 L 21 3 L 15 3 L 14 2 L 10 2 z M 4.3652344 7 L 5.8925781 20.263672 C 6.0245781 21.253672 6.877 22 7.875 22 L 16.123047 22 C 17.121047 22 17.974422 21.254859 18.107422 20.255859 L 19.634766 7 L 4.3652344 7 z"
})), K5 = {
  width: 120,
  height: 30
}, q5 = [{
  name: "Duplicate",
  icon: W5,
  onClick: () => {
    I().objects.duplicate();
  }
}, {
  name: "Flip",
  icon: Y5,
  onClick: () => {
    I().objects.flipHorizontally();
  }
}, {
  name: "Bring to front",
  icon: G5,
  onClick: () => {
    I().objects.bringToFront();
  }
}, {
  name: "Delete",
  icon: X5,
  onClick: () => {
    I().objects.delete();
  }
}], Z5 = ue.forwardRef((t, e) => {
  const r = oe((s) => s.objects.active.isMoving) ? "opacity-0" : "opacity-100";
  return /* @__PURE__ */ x("div", {
    ref: e,
    className: `${r} absolute z-obj-box left-0 top-0 flex items-center text-white bg-controls rounded shadow transition-opacity overflow-hidden`,
    children: q5.map((s) => {
      const f = s.icon;
      return /* @__PURE__ */ x(De, {
        size: "sm",
        className: "w-30 h-30 hover:bg-white/hover",
        radius: "rounded-none",
        onClick: s.onClick,
        children: /* @__PURE__ */ x(f, {})
      }, s.name);
    })
  });
});
function J5(t, e) {
  if (!e)
    return;
  const i = t.angle || 0, r = i > 168 && i < 188 ? -30 : -15, s = O().canvasSize, f = O().stageSize, g = K5, l = s.top - f.top, n = s.left - f.left, a = f.width - (n + s.width), h = f.height - (l + s.height), o = -l, u = -(s.left - f.left), c = s.width - g.width + a, d = s.height - g.height + h, m = t.getBoundingRect();
  let p = m.top - g.height + r, v = m.left + m.width / 2 - g.width / 2;
  p = Math.min(d, Math.max(o, p)), v = Math.min(c, Math.max(u, v)), e.style.transform = `translate(${v}px, ${p}px) rotate(0deg)`;
}
function Q5(t) {
  const e = I().objects.getActive();
  if (!e || !t.rect.angle)
    return;
  const i = ye.fabric.util.radiansToDegrees(t.rect.angle);
  i !== e.angle && I().objects.setValues({ angle: i });
}
function eE(t) {
  const e = t.rect.width / 2, i = t.rect.height / 2;
  I().objects.setValues({
    left: (t.rect.left + e) / O().zoom,
    top: (t.rect.top + i) / O().zoom
  });
}
function tE(t) {
  const e = I().objects.getActive();
  if (!e)
    return;
  const i = {};
  di(e) ? (t.deltaX > 0 || e.getScaledHeight() >= 20 && e.getScaledWidth() >= 20) && (i.fontSize = (e.fontSize || 1) + t.deltaX) : (e.width && (i.scaleX = t.rect.width / O().zoom / e.width), e.height && (i.scaleY = t.rect.height / O().zoom / e.height)), I().objects.setValues(i);
}
function vh(t, e) {
  var o, u, c;
  const i = I().objects.getActive();
  if (!i || !t.current)
    return;
  const r = t.current, s = ye.fabric.util.degreesToRadians((o = i.angle) != null ? o : 0);
  let f = Math.round(i.getScaledWidth() * O().zoom), g = Math.round(i.getScaledHeight() * O().zoom), l = Math.round(((u = i.left) != null ? u : 0) * O().zoom), n = Math.round(((c = i.top) != null ? c : 0) * O().zoom);
  const a = i.originX === "center" ? f / 2 : 0, h = i.originY === "center" ? g / 2 : 0;
  i.padding && (f += i.padding * 2, g += i.padding * 2, l -= i.padding, n -= i.padding), r.style.width = `${f}px`, r.style.height = `${g}px`, r.style.transform = `translate(${l - a}px, ${n - h}px) rotate(${s}rad)`, I().canvas.render(), J5(i, e.current);
}
function iE() {
  var e;
  const t = I().objects.getActive();
  di(t) && (t.enterEditing(), (e = t.hiddenTextarea) == null || e.focus());
}
function rE() {
  return /* @__PURE__ */ x("div", {
    className: "absolute -bottom-20 left-1/2 w-2 h-20 bg-white cursor-default -translate-x-1/2",
    children: /* @__PURE__ */ x("div", {
      "data-rotate-handle": !0,
      className: "w-18 h-18 absolute -bottom-10 -left-8 bg-white rounded-full cursor-move"
    })
  });
}
let Mt = {};
function nE(t) {
  const e = {
    onMoveStart: (r, s) => {
      var a, h;
      if (!r.target.dataset.rotateHandle || _n)
        return !1;
      const g = un(s.getBoundingClientRect());
      if (!g)
        return !1;
      const l = (a = s.style.transform.match(/rotate\((.+?)\)/)) == null ? void 0 : a[1], [n = "0"] = l ? l.split(",") : [];
      yh({
        currentRect: g,
        centerX: g.left + g.width / 2,
        centerY: g.top + g.height / 2,
        startAngle: parseFloat(n)
      }), yr("rotate"), Mt.startAngle = bh(r), (h = t.onRotateStart) == null || h.call(t, Nt({ rect: g, e: r }));
    },
    onMove: (r, s, f) => {
      var l;
      if (!Mt.currentRect)
        return;
      const g = { ...Mt.currentRect };
      g.angle = bh(r), g.left += s, g.top += f, (l = t.onRotate) == null || l.call(t, Nt({ rect: g, e: r, deltaX: s, deltaY: f })), Mt.currentRect = g;
    },
    onMoveEnd: (r) => {
      var s;
      Mt.currentRect && ((s = t.onRotateEnd) == null || s.call(t, Nt({ rect: Mt.currentRect, e: r }))), yh();
    }
  }, { domProps: i } = no(e);
  return { rotateProps: i };
}
function bh(t) {
  const e = {
    x: Mt.centerX || 0,
    y: Mt.centerY || 0
  };
  return Math.atan2(e.y - t.pageY, e.x - t.pageX) - (Mt.startAngle || 0);
}
const yh = (t = {}) => {
  yr(null), Mt = t;
};
function sE() {
  const t = ge(null), e = ge(null), i = oe((u) => u.objects.active.id), r = oe((u) => u.objects.isEditingText), s = oe((u) => u.zoom), f = oE(), g = ge(null), l = Oe(() => {
    g.current ? (clearTimeout(g.current), g.current = null, iE()) : g.current = setTimeout(() => {
      g.current = null;
    }, 300);
  }, []);
  let {
    moveProps: n
  } = lg({
    boundaryRef: O().canvasRef,
    restrictWithinBoundary: !1,
    onMoveEnd: () => {
      O().objects.setActiveIsMoving(!1);
    },
    onMove: (u) => {
      O().objects.setActiveIsMoving(!0), eE(u);
    }
  });
  f.lockMovement && (n = {});
  const {
    resizeProps: a
  } = cg({
    minWidth: 50,
    minHeight: 50,
    aspectRatio: f.unlockAspectRatio ? null : "initial",
    boundaryRef: O().canvasRef,
    restrictWithinBoundary: !1,
    onResizeEnd: () => {
      O().objects.setActiveIsMoving(!1);
    },
    onResize: (u) => {
      O().objects.setActiveIsMoving(!0), tE(u);
    }
  }), {
    rotateProps: h
  } = nE({
    boundaryRef: O().canvasRef,
    onRotateEnd: () => {
      O().objects.setActiveIsMoving(!1);
    },
    onRotate: (u) => {
      O().objects.setActiveIsMoving(!0), Q5(u);
    }
  });
  return Te(() => {
    !he() || O().editor.on("object:modified", (u) => {
      u.sizeOrPositionChanged && vh(t, e);
    });
  }, []), Te(() => {
    vh(t, e);
  }, [i, s, r]), /* @__PURE__ */ ie("div", {
    className: i && !r ? "block" : "hidden",
    children: [/* @__PURE__ */ ie("div", {
      ref: t,
      ...Wt(h, a, n),
      onClick: l,
      className: "absolute z-obj-box border-2 border-white shadow-md cursor-move",
      children: [!f.hideTopLeft && /* @__PURE__ */ x(Qt, {
        position: pt.topLeft
      }), !f.hideTopRight && /* @__PURE__ */ x(Qt, {
        position: pt.topRight
      }), !f.hideBottomLeft && /* @__PURE__ */ x(Qt, {
        position: pt.bottomLeft
      }), !f.hideBottomRight && /* @__PURE__ */ x(Qt, {
        position: pt.bottomRight
      }), !f.hideRotatingPoint && /* @__PURE__ */ x(rE, {})]
    }), /* @__PURE__ */ x(Z5, {
      ref: e
    })]
  });
}
function oE() {
  const t = I().objects.getActive();
  if (!t || !t.name)
    return {};
  const e = O().config.objectControls || {}, i = t.name;
  return {
    ...e.global,
    ...e[i]
  };
}
function aE() {
  const t = oe((i) => i.activeTool === Ae.CROP), e = oe((i) => i.objects.active.id);
  return /* @__PURE__ */ ie("div", {
    children: [t && /* @__PURE__ */ x(U5, {}), e && /* @__PURE__ */ x(sE, {})]
  });
}
const cE = B5([C5, T5]), lE = ue.forwardRef((t, e) => {
  const [i, r] = Me(!1);
  Te(() => oe.subscribe((f) => f.loading, (f) => {
    r(!f);
  }), []);
  const s = {
    visible: {
      opacity: 1,
      transition: {
        duration: 0.35,
        delay: 0.5
      }
    },
    hidden: {
      opacity: 0,
      transition: {
        duration: 0
      }
    }
  };
  return /* @__PURE__ */ x(uE, {
    children: /* @__PURE__ */ ie(et.div, {
      initial: {
        opacity: 0
      },
      variants: s,
      animate: i ? "visible" : "hidden",
      className: "relative m-auto",
      style: {
        backgroundImage: `url(${gt("images/empty-canvas-bg.png")})`
      },
      children: [/* @__PURE__ */ x(aE, {}), /* @__PURE__ */ x("canvas", {
        ref: e
      })]
    })
  });
});
function uE({
  children: t
}) {
  const e = ge(null), i = cE({
    onPinch: (r) => {
      if (!I().zoom.allowUserZoom || !wh(r))
        return r.cancel();
      r.direction[0] === 1 ? I().zoom.zoomIn(0.01) : I().zoom.zoomOut(0.01), r.event.stopPropagation(), r.event.preventDefault();
    },
    onDrag: (r) => {
      if (r.pinching || !wh(r))
        return r.cancel();
      e.current.scrollLeft -= r.delta[0], e.current.scrollTop -= r.delta[1];
    }
  });
  return /* @__PURE__ */ x("div", {
    ref: e,
    className: "flex items-center justify-center w-full h-full overflow-hidden touch-none",
    ...i(),
    children: t
  });
}
function wh(t) {
  return !(he().findTarget(t.event, !1) || he().isDrawingMode);
}
function Qc({
  actionBtn: t,
  children: e,
  className: i
}) {
  return /* @__PURE__ */ ie("div", {
    className: ae(i, "flex gap-16 items-center h-full"),
    children: [t && /* @__PURE__ */ x("div", {
      className: "flex-shrink-0",
      children: t
    }), /* @__PURE__ */ x("div", {
      className: "w-full flex-auto",
      children: e
    }), t && /* @__PURE__ */ x("div", {
      className: "w-96"
    })]
  });
}
function Pr() {
  return (Pr = Object.assign || function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var i = arguments[e];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
    }
    return t;
  }).apply(this, arguments);
}
function so(t, e) {
  if (t == null)
    return {};
  var i, r, s = {}, f = Object.keys(t);
  for (r = 0; r < f.length; r++)
    e.indexOf(i = f[r]) >= 0 || (s[i] = t[i]);
  return s;
}
function fn(t) {
  var e = ge(t), i = ge(function(r) {
    e.current && e.current(r);
  });
  return e.current = t, i.current;
}
var dn = function(t, e, i) {
  return e === void 0 && (e = 0), i === void 0 && (i = 1), t > i ? i : t < e ? e : t;
}, Xr = function(t) {
  return "touches" in t;
}, ja = function(t) {
  return t && t.ownerDocument.defaultView || self;
}, xh = function(t, e, i) {
  var r = t.getBoundingClientRect(), s = Xr(e) ? function(f, g) {
    for (var l = 0; l < f.length; l++)
      if (f[l].identifier === g)
        return f[l];
    return f[0];
  }(e.touches, i) : e;
  return {
    left: dn((s.pageX - (r.left + ja(t).pageXOffset)) / r.width),
    top: dn((s.pageY - (r.top + ja(t).pageYOffset)) / r.height)
  };
}, _h = function(t) {
  !Xr(t) && t.preventDefault();
}, ug = ue.memo(function(t) {
  var e = t.onMove, i = t.onKey, r = so(t, ["onMove", "onKey"]), s = ge(null), f = fn(e), g = fn(i), l = ge(null), n = ge(!1), a = Ke(function() {
    var c = function(p) {
      _h(p), (Xr(p) ? p.touches.length > 0 : p.buttons > 0) && s.current ? f(xh(s.current, p, l.current)) : m(!1);
    }, d = function() {
      return m(!1);
    };
    function m(p) {
      var v = n.current, b = ja(s.current), y = p ? b.addEventListener : b.removeEventListener;
      y(v ? "touchmove" : "mousemove", c), y(v ? "touchend" : "mouseup", d);
    }
    return [function(p) {
      var v = p.nativeEvent, b = s.current;
      if (b && (_h(v), !function(w, _) {
        return _ && !Xr(w);
      }(v, n.current) && b)) {
        if (Xr(v)) {
          n.current = !0;
          var y = v.changedTouches || [];
          y.length && (l.current = y[0].identifier);
        }
        b.focus(), f(xh(b, v, l.current)), m(!0);
      }
    }, function(p) {
      var v = p.which || p.keyCode;
      v < 37 || v > 40 || (p.preventDefault(), g({
        left: v === 39 ? 0.05 : v === 37 ? -0.05 : 0,
        top: v === 40 ? 0.05 : v === 38 ? -0.05 : 0
      }));
    }, m];
  }, [g, f]), h = a[0], o = a[1], u = a[2];
  return Te(function() {
    return u;
  }, [u]), /* @__PURE__ */ x("div", {
    ...Pr({}, r, {
      onTouchStart: h,
      onMouseDown: h,
      className: "react-colorful__interactive",
      ref: s,
      onKeyDown: o,
      tabIndex: 0,
      role: "slider"
    })
  });
}), el = function(t) {
  return t.filter(Boolean).join(" ");
}, hg = function(t) {
  var e = t.color, i = t.left, r = t.top, s = r === void 0 ? 0.5 : r, f = el(["react-colorful__pointer", t.className]);
  return /* @__PURE__ */ x("div", {
    className: f,
    style: {
      top: 100 * s + "%",
      left: 100 * i + "%"
    },
    children: /* @__PURE__ */ x("div", {
      className: "react-colorful__pointer-fill",
      style: {
        backgroundColor: e
      }
    })
  });
}, Xe = function(t, e, i) {
  return e === void 0 && (e = 0), i === void 0 && (i = Math.pow(10, e)), Math.round(i * t) / i;
}, hE = function(t) {
  return mE(Na(t));
}, Na = function(t) {
  return t[0] === "#" && (t = t.substring(1)), t.length < 6 ? {
    r: parseInt(t[0] + t[0], 16),
    g: parseInt(t[1] + t[1], 16),
    b: parseInt(t[2] + t[2], 16),
    a: t.length === 4 ? Xe(parseInt(t[3] + t[3], 16) / 255, 2) : 1
  } : {
    r: parseInt(t.substring(0, 2), 16),
    g: parseInt(t.substring(2, 4), 16),
    b: parseInt(t.substring(4, 6), 16),
    a: t.length === 8 ? Xe(parseInt(t.substring(6, 8), 16) / 255, 2) : 1
  };
}, fE = function(t) {
  return gE(pE(t));
}, dE = function(t) {
  var e = t.s, i = t.v, r = t.a, s = (200 - e) * i / 100;
  return {
    h: Xe(t.h),
    s: Xe(s > 0 && s < 200 ? e * i / 100 / (s <= 100 ? s : 200 - s) * 100 : 0),
    l: Xe(s / 2),
    a: Xe(r, 2)
  };
}, Va = function(t) {
  var e = dE(t);
  return "hsl(" + e.h + ", " + e.s + "%, " + e.l + "%)";
}, pE = function(t) {
  var e = t.h, i = t.s, r = t.v, s = t.a;
  e = e / 360 * 6, i /= 100, r /= 100;
  var f = Math.floor(e), g = r * (1 - i), l = r * (1 - (e - f) * i), n = r * (1 - (1 - e + f) * i), a = f % 6;
  return {
    r: Xe(255 * [r, l, g, g, n, r][a]),
    g: Xe(255 * [n, r, r, l, g, g][a]),
    b: Xe(255 * [g, g, n, r, r, l][a]),
    a: Xe(s, 2)
  };
}, Gn = function(t) {
  var e = t.toString(16);
  return e.length < 2 ? "0" + e : e;
}, gE = function(t) {
  var e = t.r, i = t.g, r = t.b, s = t.a, f = s < 1 ? Gn(Xe(255 * s)) : "";
  return "#" + Gn(e) + Gn(i) + Gn(r) + f;
}, mE = function(t) {
  var e = t.r, i = t.g, r = t.b, s = t.a, f = Math.max(e, i, r), g = f - Math.min(e, i, r), l = g ? f === e ? (i - r) / g : f === i ? 2 + (r - e) / g : 4 + (e - i) / g : 0;
  return {
    h: Xe(60 * (l < 0 ? l + 6 : l)),
    s: Xe(f ? g / f * 100 : 0),
    v: Xe(f / 255 * 100),
    a: s
  };
}, vE = ue.memo(function(t) {
  var e = t.hue, i = t.onChange, r = el(["react-colorful__hue", t.className]);
  return ue.createElement("div", {
    className: r
  }, ue.createElement(ug, {
    onMove: function(s) {
      i({
        h: 360 * s.left
      });
    },
    onKey: function(s) {
      i({
        h: dn(e + 360 * s.left, 0, 360)
      });
    },
    "aria-label": "Hue",
    "aria-valuenow": Xe(e),
    "aria-valuemax": "360",
    "aria-valuemin": "0"
  }, ue.createElement(hg, {
    className: "react-colorful__hue-pointer",
    left: e / 360,
    color: Va({
      h: e,
      s: 100,
      v: 100,
      a: 1
    })
  })));
}), bE = ue.memo(function(t) {
  var e = t.hsva, i = t.onChange, r = {
    backgroundColor: Va({
      h: e.h,
      s: 100,
      v: 100,
      a: 1
    })
  };
  return ue.createElement("div", {
    className: "react-colorful__saturation",
    style: r
  }, ue.createElement(ug, {
    onMove: function(s) {
      i({
        s: 100 * s.left,
        v: 100 - 100 * s.top
      });
    },
    onKey: function(s) {
      i({
        s: dn(e.s + 100 * s.left, 0, 100),
        v: dn(e.v - 100 * s.top, 0, 100)
      });
    },
    "aria-label": "Color",
    "aria-valuetext": "Saturation " + Xe(e.s) + "%, Brightness " + Xe(e.v) + "%"
  }, ue.createElement(hg, {
    className: "react-colorful__saturation-pointer",
    top: 1 - e.v / 100,
    left: e.s / 100,
    color: Va(e)
  })));
}), fg = function(t, e) {
  if (t === e)
    return !0;
  for (var i in t)
    if (t[i] !== e[i])
      return !1;
  return !0;
}, yE = function(t, e) {
  return t.toLowerCase() === e.toLowerCase() || fg(Na(t), Na(e));
};
function wE(t, e, i) {
  var r = fn(i), s = Me(function() {
    return t.toHsva(e);
  }), f = s[0], g = s[1], l = ge({
    color: e,
    hsva: f
  });
  Te(function() {
    if (!t.equal(e, l.current.color)) {
      var a = t.toHsva(e);
      l.current = {
        hsva: a,
        color: e
      }, g(a);
    }
  }, [e, t]), Te(function() {
    var a;
    fg(f, l.current.hsva) || t.equal(a = t.fromHsva(f), l.current.color) || (l.current = {
      hsva: f,
      color: a
    }, r(a));
  }, [f, t, r]);
  var n = Oe(function(a) {
    g(function(h) {
      return Object.assign({}, h, a);
    });
  }, []);
  return [f, n];
}
var xE = typeof window < "u" ? pn : Te, _E = function() {
  return typeof __webpack_nonce__ < "u" ? __webpack_nonce__ : void 0;
}, Sh = /* @__PURE__ */ new Map(), SE = function(t) {
  xE(function() {
    var e = t.current ? t.current.ownerDocument : document;
    if (e !== void 0 && !Sh.has(e)) {
      var i = e.createElement("style");
      i.innerHTML = `.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`, Sh.set(e, i);
      var r = _E();
      r && i.setAttribute("nonce", r), e.head.appendChild(i);
    }
  }, []);
}, CE = function(t) {
  var e = t.className, i = t.colorModel, r = t.color, s = r === void 0 ? i.defaultColor : r, f = t.onChange, g = so(t, ["className", "colorModel", "color", "onChange"]), l = ge(null);
  SE(l);
  var n = wE(i, s, f), a = n[0], h = n[1], o = el(["react-colorful", e]);
  return /* @__PURE__ */ ie("div", {
    ...Pr({}, g, {
      ref: l,
      className: o
    }),
    children: [/* @__PURE__ */ x(bE, {
      hsva: a,
      onChange: h
    }), /* @__PURE__ */ x(vE, {
      hue: a.h,
      onChange: h,
      className: "react-colorful__last-control"
    })]
  });
}, TE = {
  defaultColor: "000",
  toHsva: hE,
  fromHsva: function(t) {
    return fE({
      h: t.h,
      s: t.s,
      v: t.v,
      a: 1
    });
  },
  equal: yE
}, EE = function(t) {
  return /* @__PURE__ */ x(CE, {
    ...Pr({}, t, {
      colorModel: TE
    })
  });
}, kE = /^#?([0-9A-F]{3,8})$/i, OE = function(t) {
  var e = t.color, i = e === void 0 ? "" : e, r = t.onChange, s = t.onBlur, f = t.escape, g = t.validate, l = t.format, n = t.process, a = so(t, ["color", "onChange", "onBlur", "escape", "validate", "format", "process"]), h = Me(function() {
    return f(i);
  }), o = h[0], u = h[1], c = fn(r), d = fn(s), m = Oe(function(v) {
    var b = f(v.target.value);
    u(b), g(b) && c(n ? n(b) : b);
  }, [f, n, g, c]), p = Oe(function(v) {
    g(v.target.value) || u(f(i)), d(v);
  }, [i, f, g, d]);
  return Te(function() {
    u(f(i));
  }, [i, f]), /* @__PURE__ */ x("input", {
    ...Pr({}, a, {
      value: l ? l(o) : o,
      spellCheck: "false",
      onChange: m,
      onBlur: p
    })
  });
}, Ch = function(t) {
  return "#" + t;
}, PE = function(t) {
  var e = t.prefixed, i = t.alpha, r = so(t, ["prefixed", "alpha"]), s = Oe(function(g) {
    return g.replace(/([^0-9A-F]+)/gi, "").substring(0, i ? 8 : 6);
  }, [i]), f = Oe(function(g) {
    return function(l, n) {
      var a = kE.exec(l), h = a ? a[1].length : 0;
      return h === 3 || h === 6 || !!n && h === 4 || !!n && h === 8;
    }(g, i);
  }, [i]);
  return ue.createElement(OE, Pr({}, r, {
    escape: s,
    format: e ? Ch : void 0,
    process: Ch,
    validate: f
  }));
};
function tl(t, e, i) {
  return e in t ? Object.defineProperty(t, e, {
    value: i,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : t[e] = i, t;
}
class AE {
  getStringForLocale(e, i) {
    let r = this.strings[i];
    r || (r = ME(i, this.strings, this.defaultLocale), this.strings[i] = r);
    let s = r[e];
    if (!s)
      throw new Error(`Could not find intl message ${e} in ${i} locale`);
    return s;
  }
  constructor(e, i = "en-US") {
    this.strings = {
      ...e
    }, this.defaultLocale = i;
  }
}
function ME(t, e, i = "en-US") {
  if (e[t])
    return e[t];
  let r = DE(t);
  if (e[r])
    return e[r];
  for (let s in e)
    if (s.startsWith(r + "-"))
      return e[s];
  return e[i];
}
function DE(t) {
  return Intl.Locale ? new Intl.Locale(t).language : t.split("-")[0];
}
let No = /* @__PURE__ */ new Map(), $a = !1;
try {
  $a = new Intl.NumberFormat("de-DE", {
    signDisplay: "exceptZero"
  }).resolvedOptions().signDisplay === "exceptZero";
} catch {
}
let Ts = !1;
try {
  Ts = new Intl.NumberFormat("de-DE", {
    style: "unit",
    unit: "degree"
  }).resolvedOptions().style === "unit";
} catch {
}
const dg = {
  degree: {
    narrow: {
      default: "\xB0",
      "ja-JP": " \u5EA6",
      "zh-TW": "\u5EA6",
      "sl-SI": " \xB0"
    }
  }
};
class oo {
  format(e) {
    let i = "";
    if (!$a && this.options.signDisplay != null ? i = RE(this.numberFormatter, this.options.signDisplay, e) : i = this.numberFormatter.format(e), this.options.style === "unit" && !Ts) {
      var r;
      let { unit: s, unitDisplay: f = "short", locale: g } = this.resolvedOptions(), l = (r = dg[s]) === null || r === void 0 ? void 0 : r[f];
      i += l[g] || l.default;
    }
    return i;
  }
  formatToParts(e) {
    return this.numberFormatter.formatToParts(e);
  }
  formatRange(e, i) {
    if (typeof this.numberFormatter.formatRange == "function")
      return this.numberFormatter.formatRange(e, i);
    if (i < e)
      throw new RangeError("End date must be >= start date");
    return `${this.format(e)} \u2013 ${this.format(i)}`;
  }
  formatRangeToParts(e, i) {
    if (typeof this.numberFormatter.formatRangeToParts == "function")
      return this.numberFormatter.formatRangeToParts(e, i);
    if (i < e)
      throw new RangeError("End date must be >= start date");
    let r = this.numberFormatter.formatToParts(e), s = this.numberFormatter.formatToParts(i);
    return [
      ...r.map((f) => ({
        ...f,
        source: "startRange"
      })),
      {
        type: "literal",
        value: " \u2013 ",
        source: "shared"
      },
      ...s.map((f) => ({
        ...f,
        source: "endRange"
      }))
    ];
  }
  resolvedOptions() {
    let e = this.numberFormatter.resolvedOptions();
    return !$a && this.options.signDisplay != null && (e = {
      ...e,
      signDisplay: this.options.signDisplay
    }), !Ts && this.options.style === "unit" && (e = {
      ...e,
      style: "unit",
      unit: this.options.unit,
      unitDisplay: this.options.unitDisplay
    }), e;
  }
  constructor(e, i = {}) {
    this.numberFormatter = IE(e, i), this.options = i;
  }
}
function IE(t, e = {}) {
  let { numberingSystem: i } = e;
  if (i && t.indexOf("-u-nu-") === -1 && (t = `${t}-u-nu-${i}`), e.style === "unit" && !Ts) {
    var r;
    let { unit: g, unitDisplay: l = "short" } = e;
    if (!g)
      throw new Error('unit option must be provided with style: "unit"');
    if (!(!((r = dg[g]) === null || r === void 0) && r[l]))
      throw new Error(`Unsupported unit ${g} with unitDisplay = ${l}`);
    e = {
      ...e,
      style: "decimal"
    };
  }
  let s = t + (e ? Object.entries(e).sort((g, l) => g[0] < l[0] ? -1 : 1).join() : "");
  if (No.has(s))
    return No.get(s);
  let f = new Intl.NumberFormat(t, e);
  return No.set(s, f), f;
}
function RE(t, e, i) {
  if (e === "auto")
    return t.format(i);
  if (e === "never")
    return t.format(Math.abs(i));
  {
    let r = !1;
    if (e === "always" ? r = i > 0 || Object.is(i, 0) : e === "exceptZero" && (Object.is(i, -0) || Object.is(i, 0) ? i = Math.abs(i) : r = i > 0), r) {
      let s = t.format(-i), f = t.format(i), g = s.replace(f, "").replace(/\u200e|\u061C/, "");
      return [
        ...g
      ].length !== 1 && console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"), s.replace(f, "!!!").replace(g, "+").replace("!!!", f);
    } else
      return t.format(i);
  }
}
function LE(t) {
  return t && t.__esModule ? t.default : t;
}
var pg = {}, gg = {};
gg = {
  alpha: "\u0623\u0644\u0641\u0627",
  blue: "\u0623\u0632\u0631\u0642",
  brightness: "\u0627\u0644\u0633\u0637\u0648\u0639",
  green: "\u0623\u062E\u0636\u0631",
  hue: "\u062F\u0631\u062C\u0629 \u0627\u0644\u0644\u0648\u0646",
  lightness: "\u0627\u0644\u0625\u0636\u0627\u0621\u0629",
  red: "\u0623\u062D\u0645\u0631",
  saturation: "\u0627\u0644\u062A\u0634\u0628\u0639"
};
var mg = {};
mg = {
  alpha: "\u0410\u043B\u0444\u0430",
  blue: "\u0421\u0438\u043D\u044C\u043E",
  brightness: "\u042F\u0440\u043A\u043E\u0441\u0442",
  green: "\u0417\u0435\u043B\u0435\u043D\u043E",
  hue: "\u041E\u0442\u0442\u0435\u043D\u044A\u043A",
  lightness: "\u041B\u0435\u043A\u043E\u0442\u0430",
  red: "\u0427\u0435\u0440\u0432\u0435\u043D\u043E",
  saturation: "\u041D\u0430\u0441\u0438\u0442\u0435\u043D\u043E\u0441\u0442"
};
var vg = {};
vg = {
  alpha: "Alfa",
  blue: "Modr\xE1",
  brightness: "Jas",
  green: "Zelen\xE1",
  hue: "Odst\xEDn",
  lightness: "Sv\u011Btlost",
  red: "\u010Cerven\xE1",
  saturation: "Sytost"
};
var bg = {};
bg = {
  alpha: "Alfa",
  blue: "Bl\xE5",
  brightness: "Lysstyrke",
  green: "Gr\xF8n",
  hue: "Tone",
  lightness: "Lyshed",
  red: "R\xF8d",
  saturation: "Farvem\xE6tning"
};
var yg = {};
yg = {
  alpha: "Alpha",
  blue: "Blau",
  brightness: "Helligkeit",
  green: "Gr\xFCn",
  hue: "Farbton",
  lightness: "Leuchtkraft",
  red: "Rot",
  saturation: "S\xE4ttigung"
};
var wg = {};
wg = {
  alpha: "\u0386\u03BB\u03C6\u03B1",
  blue: "\u039C\u03C0\u03BB\u03B5",
  brightness: "\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",
  green: "\u03A0\u03C1\u03AC\u03C3\u03B9\u03BD\u03BF",
  hue: "\u03A4\u03CC\u03BD\u03BF\u03C2",
  lightness: "\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",
  red: "\u039A\u03CC\u03BA\u03BA\u03B9\u03BD\u03BF",
  saturation: "\u039A\u03BF\u03C1\u03B5\u03C3\u03BC\u03CC\u03C2"
};
var xg = {};
xg = {
  hue: "Hue",
  saturation: "Saturation",
  lightness: "Lightness",
  brightness: "Brightness",
  red: "Red",
  green: "Green",
  blue: "Blue",
  alpha: "Alpha"
};
var _g = {};
_g = {
  alpha: "Alpha",
  blue: "Azul",
  brightness: "Brillo",
  green: "Verde",
  hue: "Tono",
  lightness: "Luminosidad",
  red: "Rojo",
  saturation: "Saturaci\xF3n"
};
var Sg = {};
Sg = {
  alpha: "Alfa",
  blue: "Sinine",
  brightness: "Heledus",
  green: "Roheline",
  hue: "V\xE4rv",
  lightness: "Valgus",
  red: "Punane",
  saturation: "K\xFCllastus"
};
var Cg = {};
Cg = {
  alpha: "Alpha",
  blue: "Sininen",
  brightness: "Kirkkaus",
  green: "Vihre\xE4",
  hue: "S\xE4vy",
  lightness: "Valom\xE4\xE4r\xE4",
  red: "Punainen",
  saturation: "V\xE4rikyll\xE4isyys"
};
var Tg = {};
Tg = {
  alpha: "Alpha",
  blue: "Bleu",
  brightness: "Luminosit\xE9",
  green: "Vert",
  hue: "Teinte",
  lightness: "Luminosit\xE9",
  red: "Rouge",
  saturation: "Saturation"
};
var Eg = {};
Eg = {
  alpha: "\u05D0\u05DC\u05E4\u05D0",
  blue: "\u05DB\u05D7\u05D5\u05DC",
  brightness: "\u05D1\u05D4\u05D9\u05E8\u05D5\u05EA",
  green: "\u05D9\u05E8\u05D5\u05E7",
  hue: "\u05D2\u05D5\u05D5\u05DF",
  lightness: "\u05DB\u05DE\u05D5\u05EA \u05D0\u05D5\u05E8",
  red: "\u05D0\u05D3\u05D5\u05DD",
  saturation: "\u05E8\u05D5\u05D5\u05D9\u05D4"
};
var kg = {};
kg = {
  alpha: "Alfa",
  blue: "Plava",
  brightness: "Svjetlina",
  green: "Zelena",
  hue: "Nijansa",
  lightness: "Osvijetljenost",
  red: "Crvena",
  saturation: "Zasi\u0107enost"
};
var Og = {};
Og = {
  alpha: "Alfa",
  blue: "K\xE9k",
  brightness: "F\xE9nyess\xE9g",
  green: "Z\xF6ld",
  hue: "Sz\xEDn\xE1rnyalat",
  lightness: "Vil\xE1goss\xE1g",
  red: "Piros",
  saturation: "Tel\xEDtetts\xE9g"
};
var Pg = {};
Pg = {
  alpha: "Alfa",
  blue: "Blu",
  brightness: "Luminosit\xE0",
  green: "Verde",
  hue: "Tonalit\xE0",
  lightness: "Luminosit\xE0",
  red: "Rosso",
  saturation: "Saturazione"
};
var Ag = {};
Ag = {
  alpha: "\u30A2\u30EB\u30D5\u30A1",
  blue: "\u9752",
  brightness: "\u660E\u308B\u3055",
  green: "\u7DD1",
  hue: "\u8272\u76F8",
  lightness: "\u660E\u5EA6",
  red: "\u8D64",
  saturation: "\u5F69\u5EA6"
};
var Mg = {};
Mg = {
  alpha: "\uC54C\uD30C",
  blue: "\uD30C\uB791",
  brightness: "\uBA85\uB3C4",
  green: "\uCD08\uB85D",
  hue: "\uC0C9\uC870",
  lightness: "\uBC1D\uAE30",
  red: "\uBE68\uAC15",
  saturation: "\uCC44\uB3C4"
};
var Dg = {};
Dg = {
  alpha: "Alfa",
  blue: "M\u0117lyna",
  brightness: "Ry\u0161kumas",
  green: "\u017Dalia",
  hue: "Atspalvis",
  lightness: "\u0160viesumas",
  red: "Raudona",
  saturation: "\u012Esotinimas"
};
var Ig = {};
Ig = {
  alpha: "Alfa",
  blue: "Zila",
  brightness: "Spilgtums",
  green: "Za\u013Ca",
  hue: "Nokr\u0101sa",
  lightness: "Gai\u0161ums",
  red: "Sarkana",
  saturation: "Pies\u0101tin\u0101jums"
};
var Rg = {};
Rg = {
  alpha: "Alfa",
  blue: "Bl\xE5",
  brightness: "Lysstyrke",
  green: "Gr\xF8nn",
  hue: "Fargetone",
  lightness: "Lyshet",
  red: "R\xF8d",
  saturation: "Metning"
};
var Lg = {};
Lg = {
  alpha: "Alfa",
  blue: "Blauw",
  brightness: "Helderheid",
  green: "Groen",
  hue: "Kleurtoon",
  lightness: "Lichtsterkte",
  red: "Rood",
  saturation: "Verzadiging"
};
var Fg = {};
Fg = {
  alpha: "Alfa",
  blue: "Niebieski",
  brightness: "Jasno\u015B\u0107",
  green: "Zielony",
  hue: "Odcie\u0144",
  lightness: "Jaskrawo\u015B\u0107",
  red: "Czerwony",
  saturation: "Nasycenie"
};
var zg = {};
zg = {
  alpha: "Alfa",
  blue: "Azul",
  brightness: "Brilho",
  green: "Verde",
  hue: "Matiz",
  lightness: "Luminosidade",
  red: "Vermelho",
  saturation: "Satura\xE7\xE3o"
};
var Bg = {};
Bg = {
  alpha: "Alfa",
  blue: "Azul",
  brightness: "Luminosidade",
  green: "Verde",
  hue: "Tonalidade",
  lightness: "Claridade",
  red: "Vermelho",
  saturation: "Satura\xE7\xE3o"
};
var jg = {};
jg = {
  alpha: "Alfa",
  blue: "Albastru",
  brightness: "Luminozitate",
  green: "Verde",
  hue: "Nuan\u021B\u0103",
  lightness: "Luminozitate",
  red: "Ro\u0219u",
  saturation: "Satura\u021Bie"
};
var Ng = {};
Ng = {
  alpha: "\u0410\u043B\u044C\u0444\u0430",
  blue: "\u0421\u0438\u043D\u0438\u0439",
  brightness: "\u042F\u0440\u043A\u043E\u0441\u0442\u044C",
  green: "\u0417\u0435\u043B\u0435\u043D\u044B\u0439",
  hue: "\u041E\u0442\u0442\u0435\u043D\u043E\u043A",
  lightness: "\u041E\u0441\u0432\u0435\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C",
  red: "\u041A\u0440\u0430\u0441\u043D\u044B\u0439",
  saturation: "\u041D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C"
};
var Vg = {};
Vg = {
  alpha: "Alfa",
  blue: "Modr\xE1",
  brightness: "Jas",
  green: "Zelen\xE1",
  hue: "Odtie\u0148",
  lightness: "Svetlos\u0165",
  red: "\u010Cerven\xE1",
  saturation: "S\xFDtos\u0165"
};
var $g = {};
$g = {
  alpha: "Alfa",
  blue: "Modra",
  brightness: "Svetlost",
  green: "Zelena",
  hue: "Barva",
  lightness: "Lahkost",
  red: "Rde\u010Da",
  saturation: "Nasi\u010Denost"
};
var Hg = {};
Hg = {
  alpha: "Alfa",
  blue: "Plava",
  brightness: "Osvetljenost",
  green: "Zelena",
  hue: "Nijansa",
  lightness: "Osvetljenje",
  red: "Crvena",
  saturation: "Zasi\u0107enje"
};
var Ug = {};
Ug = {
  alpha: "Alfa",
  blue: "Bl\xE5tt",
  brightness: "Ljusstyrka",
  green: "Gr\xF6nt",
  hue: "Nyans",
  lightness: "Ljushet",
  red: "R\xF6tt",
  saturation: "M\xE4ttnad"
};
var Wg = {};
Wg = {
  alpha: "Alfa",
  blue: "Mavi",
  brightness: "Parlakl\u0131k",
  green: "Ye\u015Fil",
  hue: "Ton",
  lightness: "Canl\u0131l\u0131k",
  red: "K\u0131rm\u0131z\u0131",
  saturation: "Doygunluk"
};
var Yg = {};
Yg = {
  alpha: "\u0410\u043B\u044C\u0444\u0430",
  blue: "\u0421\u0438\u043D\u0456\u0439",
  brightness: "\u042F\u0441\u043A\u0440\u0430\u0432\u0456\u0441\u0442\u044C",
  green: "\u0417\u0435\u043B\u0435\u043D\u0438\u0439",
  hue: "\u0422\u043E\u043D",
  lightness: "\u041E\u0441\u0432\u0456\u0442\u043B\u0435\u043D\u0456\u0441\u0442\u044C",
  red: "\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439",
  saturation: "\u041D\u0430\u0441\u0438\u0447\u0435\u043D\u0456\u0441\u0442\u044C"
};
var Gg = {};
Gg = {
  alpha: "Alpha",
  blue: "\u84DD\u8272",
  brightness: "\u4EAE\u5EA6",
  green: "\u7EFF\u8272",
  hue: "\u8272\u76F8",
  lightness: "\u660E\u4EAE\u5EA6",
  red: "\u7EA2\u8272",
  saturation: "\u9971\u548C\u5EA6"
};
var Xg = {};
Xg = {
  alpha: "Alpha",
  blue: "\u85CD\u8272",
  brightness: "\u4EAE\u5EA6",
  green: "\u7DA0\u8272",
  hue: "\u8272\u76F8",
  lightness: "\u660E\u4EAE",
  red: "\u7D05\u8272",
  saturation: "\u98FD\u548C\u5EA6"
};
pg = {
  "ar-AE": gg,
  "bg-BG": mg,
  "cs-CZ": vg,
  "da-DK": bg,
  "de-DE": yg,
  "el-GR": wg,
  "en-US": xg,
  "es-ES": _g,
  "et-EE": Sg,
  "fi-FI": Cg,
  "fr-FR": Tg,
  "he-IL": Eg,
  "hr-HR": kg,
  "hu-HU": Og,
  "it-IT": Pg,
  "ja-JP": Ag,
  "ko-KR": Mg,
  "lt-LT": Dg,
  "lv-LV": Ig,
  "nb-NO": Rg,
  "nl-NL": Lg,
  "pl-PL": Fg,
  "pt-BR": zg,
  "pt-PT": Bg,
  "ro-RO": jg,
  "ru-RU": Ng,
  "sk-SK": Vg,
  "sl-SI": $g,
  "sr-SP": Hg,
  "sv-SE": Ug,
  "tr-TR": Wg,
  "uk-UA": Yg,
  "zh-CN": Gg,
  "zh-TW": Xg
};
const FE = new AE(/* @__PURE__ */ LE(pg));
function On(t) {
  let e = ri.parse(t) || ni.parse(t) || si.parse(t);
  if (e)
    return e;
  throw new Error("Invalid color value: " + t);
}
class il {
  toHexInt() {
    return this.toFormat("rgb").toHexInt();
  }
  getChannelValue(e) {
    if (e in this)
      return this[e];
    throw new Error("Unsupported color channel: " + e);
  }
  withChannelValue(e, i) {
    if (e in this) {
      let r = this.clone();
      return r[e] = i, r;
    }
    throw new Error("Unsupported color channel: " + e);
  }
  getChannelName(e, i) {
    return FE.getStringForLocale(e, i);
  }
  getColorSpaceAxes(e) {
    let { xChannel: i, yChannel: r } = e, s = i || this.getColorChannels().find((l) => l !== r), f = r || this.getColorChannels().find((l) => l !== s), g = this.getColorChannels().find((l) => l !== s && l !== f);
    return {
      xChannel: s,
      yChannel: f,
      zChannel: g
    };
  }
}
class ri extends il {
  static parse(e) {
    let i = [];
    if (/^#[\da-f]+$/i.test(e) && [
      4,
      5,
      7,
      9
    ].includes(e.length)) {
      const f = (e.length < 6 ? e.replace(/[^#]/gi, "$&$&") : e).slice(1).split("");
      for (; f.length > 0; )
        i.push(parseInt(f.splice(0, 2).join(""), 16));
      i[3] = i[3] !== void 0 ? i[3] / 255 : void 0;
    }
    const r = e.match(/^rgba?\((.*)\)$/);
    r != null && r[1] && (i = r[1].split(",").map((f) => Number(f.trim())), i = i.map((f, g) => Oi(f, 0, g < 3 ? 255 : 1)));
    var s;
    return i.length < 3 ? void 0 : new ri(i[0], i[1], i[2], (s = i[3]) !== null && s !== void 0 ? s : 1);
  }
  toString(e) {
    switch (e) {
      case "hex":
        return "#" + (this.red.toString(16).padStart(2, "0") + this.green.toString(16).padStart(2, "0") + this.blue.toString(16).padStart(2, "0")).toUpperCase();
      case "hexa":
        return "#" + (this.red.toString(16).padStart(2, "0") + this.green.toString(16).padStart(2, "0") + this.blue.toString(16).padStart(2, "0") + Math.round(this.alpha * 255).toString(16).padStart(2, "0")).toUpperCase();
      case "rgb":
        return `rgb(${this.red}, ${this.green}, ${this.blue})`;
      case "css":
      case "rgba":
        return `rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;
      default:
        return this.toFormat(e).toString(e);
    }
  }
  toFormat(e) {
    switch (e) {
      case "hex":
      case "hexa":
      case "rgb":
      case "rgba":
        return this;
      case "hsb":
      case "hsba":
        return this.toHSB();
      case "hsl":
      case "hsla":
        return this.toHSL();
      default:
        throw new Error("Unsupported color conversion: rgb -> " + e);
    }
  }
  toHexInt() {
    return this.red << 16 | this.green << 8 | this.blue;
  }
  toHSB() {
    const e = this.red / 255, i = this.green / 255, r = this.blue / 255, s = Math.min(e, i, r), f = Math.max(e, i, r), g = f - s, l = f === 0 ? 0 : g / f;
    let n = 0;
    if (g !== 0) {
      switch (f) {
        case e:
          n = (i - r) / g + (i < r ? 6 : 0);
          break;
        case i:
          n = (r - e) / g + 2;
          break;
        case r:
          n = (e - i) / g + 4;
          break;
      }
      n /= 6;
    }
    return new ni($e(n * 360, 2), $e(l * 100, 2), $e(f * 100, 2), this.alpha);
  }
  toHSL() {
    const e = this.red / 255, i = this.green / 255, r = this.blue / 255, s = Math.min(e, i, r), f = Math.max(e, i, r), g = (f + s) / 2, l = f - s;
    let n, a;
    if (l === 0)
      n = a = 0;
    else {
      switch (a = l / (g < 0.5 ? f + s : 2 - f - s), f) {
        case e:
          n = (i - r) / l + (i < r ? 6 : 0);
          break;
        case i:
          n = (r - e) / l + 2;
          break;
        case r:
          n = (e - i) / l + 4;
          break;
      }
      n /= 6;
    }
    return new si($e(n * 360, 2), $e(a * 100, 2), $e(g * 100, 2), this.alpha);
  }
  clone() {
    return new ri(this.red, this.green, this.blue, this.alpha);
  }
  getChannelRange(e) {
    switch (e) {
      case "red":
      case "green":
      case "blue":
        return {
          minValue: 0,
          maxValue: 255,
          step: 1,
          pageSize: 17
        };
      case "alpha":
        return {
          minValue: 0,
          maxValue: 1,
          step: 0.01,
          pageSize: 0.1
        };
      default:
        throw new Error("Unknown color channel: " + e);
    }
  }
  formatChannelValue(e, i) {
    let r, s = this.getChannelValue(e);
    switch (e) {
      case "red":
      case "green":
      case "blue":
        r = {
          style: "decimal"
        };
        break;
      case "alpha":
        r = {
          style: "percent"
        };
        break;
      default:
        throw new Error("Unknown color channel: " + e);
    }
    return new oo(i, r).format(s);
  }
  getColorSpace() {
    return "rgb";
  }
  getColorChannels() {
    return ri.colorChannels;
  }
  constructor(e, i, r, s) {
    super(), this.red = e, this.green = i, this.blue = r, this.alpha = s;
  }
}
tl(ri, "colorChannels", [
  "red",
  "green",
  "blue"
]);
const zE = /hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;
class ni extends il {
  static parse(e) {
    let i;
    if (i = e.match(zE)) {
      var r;
      const [s, f, g, l] = ((r = i[1]) !== null && r !== void 0 ? r : i[2]).split(",").map((n) => Number(n.trim().replace("%", "")));
      return new ni(Kg(s, 360), Oi(f, 0, 100), Oi(g, 0, 100), Oi(l != null ? l : 1, 0, 1));
    }
  }
  toString(e) {
    switch (e) {
      case "css":
        return this.toHSL().toString("css");
      case "hex":
        return this.toRGB().toString("hex");
      case "hexa":
        return this.toRGB().toString("hexa");
      case "hsb":
        return `hsb(${this.hue}, ${$e(this.saturation, 2)}%, ${$e(this.brightness, 2)}%)`;
      case "hsba":
        return `hsba(${this.hue}, ${$e(this.saturation, 2)}%, ${$e(this.brightness, 2)}%, ${this.alpha})`;
      default:
        return this.toFormat(e).toString(e);
    }
  }
  toFormat(e) {
    switch (e) {
      case "hsb":
      case "hsba":
        return this;
      case "hsl":
      case "hsla":
        return this.toHSL();
      case "rgb":
      case "rgba":
        return this.toRGB();
      default:
        throw new Error("Unsupported color conversion: hsb -> " + e);
    }
  }
  toHSL() {
    let e = this.saturation / 100, i = this.brightness / 100, r = i * (1 - e / 2);
    return e = r === 0 || r === 1 ? 0 : (i - r) / Math.min(r, 1 - r), new si($e(this.hue, 2), $e(e * 100, 2), $e(r * 100, 2), this.alpha);
  }
  toRGB() {
    let e = this.hue, i = this.saturation / 100, r = this.brightness / 100, s = (f, g = (f + e / 60) % 6) => r - i * r * Math.max(Math.min(g, 4 - g, 1), 0);
    return new ri(Math.round(s(5) * 255), Math.round(s(3) * 255), Math.round(s(1) * 255), this.alpha);
  }
  clone() {
    return new ni(this.hue, this.saturation, this.brightness, this.alpha);
  }
  getChannelRange(e) {
    switch (e) {
      case "hue":
        return {
          minValue: 0,
          maxValue: 360,
          step: 1,
          pageSize: 15
        };
      case "saturation":
      case "brightness":
        return {
          minValue: 0,
          maxValue: 100,
          step: 1,
          pageSize: 10
        };
      case "alpha":
        return {
          minValue: 0,
          maxValue: 1,
          step: 0.01,
          pageSize: 0.1
        };
      default:
        throw new Error("Unknown color channel: " + e);
    }
  }
  formatChannelValue(e, i) {
    let r, s = this.getChannelValue(e);
    switch (e) {
      case "hue":
        r = {
          style: "unit",
          unit: "degree",
          unitDisplay: "narrow"
        };
        break;
      case "saturation":
      case "brightness":
        r = {
          style: "percent"
        }, s /= 100;
        break;
      case "alpha":
        r = {
          style: "percent"
        };
        break;
      default:
        throw new Error("Unknown color channel: " + e);
    }
    return new oo(i, r).format(s);
  }
  getColorSpace() {
    return "hsb";
  }
  getColorChannels() {
    return ni.colorChannels;
  }
  constructor(e, i, r, s) {
    super(), this.hue = e, this.saturation = i, this.brightness = r, this.alpha = s;
  }
}
tl(ni, "colorChannels", [
  "hue",
  "saturation",
  "brightness"
]);
const BE = /hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;
function Kg(t, e) {
  return (t % e + e) % e;
}
class si extends il {
  static parse(e) {
    let i;
    if (i = e.match(BE)) {
      var r;
      const [s, f, g, l] = ((r = i[1]) !== null && r !== void 0 ? r : i[2]).split(",").map((n) => Number(n.trim().replace("%", "")));
      return new si(Kg(s, 360), Oi(f, 0, 100), Oi(g, 0, 100), Oi(l != null ? l : 1, 0, 1));
    }
  }
  toString(e) {
    switch (e) {
      case "hex":
        return this.toRGB().toString("hex");
      case "hexa":
        return this.toRGB().toString("hexa");
      case "hsl":
        return `hsl(${this.hue}, ${$e(this.saturation, 2)}%, ${$e(this.lightness, 2)}%)`;
      case "css":
      case "hsla":
        return `hsla(${this.hue}, ${$e(this.saturation, 2)}%, ${$e(this.lightness, 2)}%, ${this.alpha})`;
      default:
        return this.toFormat(e).toString(e);
    }
  }
  toFormat(e) {
    switch (e) {
      case "hsl":
      case "hsla":
        return this;
      case "hsb":
      case "hsba":
        return this.toHSB();
      case "rgb":
      case "rgba":
        return this.toRGB();
      default:
        throw new Error("Unsupported color conversion: hsl -> " + e);
    }
  }
  toHSB() {
    let e = this.saturation / 100, i = this.lightness / 100, r = i + e * Math.min(i, 1 - i);
    return e = r === 0 ? 0 : 2 * (1 - i / r), new ni($e(this.hue, 2), $e(e * 100, 2), $e(r * 100, 2), this.alpha);
  }
  toRGB() {
    let e = this.hue, i = this.saturation / 100, r = this.lightness / 100, s = i * Math.min(r, 1 - r), f = (g, l = (g + e / 30) % 12) => r - s * Math.max(Math.min(l - 3, 9 - l, 1), -1);
    return new ri(Math.round(f(0) * 255), Math.round(f(8) * 255), Math.round(f(4) * 255), this.alpha);
  }
  clone() {
    return new si(this.hue, this.saturation, this.lightness, this.alpha);
  }
  getChannelRange(e) {
    switch (e) {
      case "hue":
        return {
          minValue: 0,
          maxValue: 360,
          step: 1,
          pageSize: 15
        };
      case "saturation":
      case "lightness":
        return {
          minValue: 0,
          maxValue: 100,
          step: 1,
          pageSize: 10
        };
      case "alpha":
        return {
          minValue: 0,
          maxValue: 1,
          step: 0.01,
          pageSize: 0.1
        };
      default:
        throw new Error("Unknown color channel: " + e);
    }
  }
  formatChannelValue(e, i) {
    let r, s = this.getChannelValue(e);
    switch (e) {
      case "hue":
        r = {
          style: "unit",
          unit: "degree",
          unitDisplay: "narrow"
        };
        break;
      case "saturation":
      case "lightness":
        r = {
          style: "percent"
        }, s /= 100;
        break;
      case "alpha":
        r = {
          style: "percent"
        };
        break;
      default:
        throw new Error("Unknown color channel: " + e);
    }
    return new oo(i, r).format(s);
  }
  getColorSpace() {
    return "hsl";
  }
  getColorChannels() {
    return si.colorChannels;
  }
  constructor(e, i, r, s) {
    super(), this.hue = e, this.saturation = i, this.lightness = r, this.alpha = s;
  }
}
tl(si, "colorChannels", [
  "hue",
  "saturation",
  "lightness"
]);
On("#ffffff");
On("hsl(0, 100%, 50%)");
const jE = On("#000000"), NE = On("#FFFFFF");
jE.toHexInt();
NE.toHexInt();
function VE({
  onChange: t,
  value: e,
  colors: i
}) {
  const r = i.map((s) => {
    const f = e === s;
    return /* @__PURE__ */ x(Yt, {
      onClick: () => {
        t == null || t(s);
      },
      className: ae("relative block flex-shrink-0 w-26 h-26 border rounded", f && "shadow-md"),
      style: {
        backgroundColor: s
      },
      children: f && /* @__PURE__ */ x("span", {
        className: "absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"
      })
    }, s);
  });
  return /* @__PURE__ */ x("div", {
    className: "flex flex-wrap gap-6",
    children: r
  });
}
function Vi(t = {}) {
  const {
    size: e = "md",
    startAppend: i,
    endAppend: r,
    className: s,
    labelPosition: f,
    labelDisplay: g = "block",
    inputClassName: l,
    inputWrapperClassName: n,
    unstyled: a,
    invalid: h,
    disabled: o,
    background: u = "bg-transparent",
    flexibleHeight: c,
    inputShadow: d = "shadow-sm",
    descriptionPosition: m = "bottom"
  } = { ...t };
  if (a)
    return {
      label: "",
      input: l || "",
      wrapper: s || "",
      inputWrapper: n || "",
      adornment: "",
      append: { size: "", radius: "" },
      size: { font: "", height: "" },
      description: "",
      error: ""
    };
  const p = WE({
    size: t.size,
    flexibleHeight: c
  }), v = i || r, b = h ? "focus:ring-danger/focus focus:border-danger/60" : "focus:ring-primary/focus focus:border-primary/60", y = UE(t);
  return {
    label: ae(
      g,
      "first-letter:capitalize text-left whitespace-nowrap",
      o && "text-disabled",
      p.font,
      f === "side" ? "mr-16" : "mb-4"
    ),
    input: ae(
      "block text-left relative w-full appearance-none transition-shadow text",
      u,
      y.input,
      $E(t),
      !o && `focus:ring ${b} focus:outline-none ${d}`,
      o && "text-disabled cursor-not-allowed",
      l,
      p.font,
      p.height,
      HE(t)
    ),
    adornment: YE(e),
    append: {
      size: Vc(e),
      radius: y.append
    },
    wrapper: ae(s, p.font, {
      "flex items-center": f === "side"
    }),
    inputWrapper: ae(
      "isolate relative",
      n,
      v && "flex items-stretch"
    ),
    size: p,
    description: `text-muted ${m === "bottom" ? "pt-10" : "pb-10"} text-xs`,
    error: "text-danger pt-10 text-xs"
  };
}
function $E({
  startAppend: t,
  endAppend: e,
  inputBorder: i,
  invalid: r
}) {
  if (i)
    return i;
  const s = t || e, f = r ? "border-danger" : "border-divider";
  return s ? t ? `${f} border-y border-r` : `${f} border-y border-l` : `${f} border`;
}
function HE({
  startAdornment: t,
  endAdornment: e,
  inputRadius: i
}) {
  return i === "rounded-full" ? ae(
    t ? "pl-54" : "pl-28",
    e ? "pr-54" : "pr-28"
  ) : ae(
    t ? "pl-46" : "pl-12",
    e ? "pr-46" : "pr-12"
  );
}
function UE(t) {
  const { startAppend: e, endAppend: i, inputRadius: r } = t, s = e || i;
  return r === "rounded-full" ? {
    input: ae(
      !s && "rounded-full",
      e && "rounded-r-full rounded-l-none",
      i && "rounded-l-full rounded-r-none"
    ),
    append: e ? "rounded-l-full" : "rounded-r-full"
  } : {
    input: ae(
      !s && "rounded",
      e && "rounded-r rounded-l-none",
      i && "rounded-l rounded-r-none"
    ),
    append: e ? "rounded-l" : "rounded-r"
  };
}
function WE({ size: t, flexibleHeight: e }) {
  switch (t) {
    case "2xs":
      return { font: "text-xs", height: e ? "min-h-24" : "h-24" };
    case "xs":
      return { font: "text-xs", height: e ? "min-h-30" : "h-30" };
    case "sm":
      return { font: "text-sm", height: e ? "min-h-36" : "h-36" };
    case "lg":
      return {
        font: "text-md md:text-lg",
        height: e ? "min-h-50" : "h-50"
      };
    case "xl":
      return { font: "text-xl", height: e ? "min-h-60" : "h-60" };
    default:
      return { font: "text-sm", height: e ? "min-h-42" : "h-42" };
  }
}
function YE(t) {
  switch (t) {
    case "2xs":
      return "icon-2xs";
    case "xs":
      return "icon-xs";
    case "sm":
      return "icon-sm";
    case "md":
      return "icon-sm";
    case "lg":
      return "icon-lg";
    case "xl":
      return "icon-xl";
    default:
      return "";
  }
}
const GE = [
  {
    color: "rgb(255, 255, 255)",
    name: ne("White")
  },
  {
    color: "rgb(239,245,245)",
    name: ne("Solitude")
  },
  {
    color: "rgb(245,213,174)",
    name: ne("Wheat")
  },
  {
    color: "rgb(253,227,167)",
    name: ne("Cape Honey")
  },
  {
    color: "rgb(242,222,186)",
    name: ne("Milk punch")
  },
  {
    color: "rgb(97,118,75)",
    name: ne("Dingy"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(4, 147, 114)",
    name: ne("Aquamarine"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(222,245,229)",
    name: ne("Cosmic Latte")
  },
  {
    color: "rgb(233,119,119)",
    name: ne("Geraldine"),
    foreground: "rgb(90,14,14)"
  },
  {
    color: "rgb(247,164,164)",
    name: ne("Sundown")
  },
  {
    color: "rgb(30,139,195)",
    name: ne("Pelorous"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(142,68,173)",
    name: ne("Deep Lilac"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(108,74,182)",
    name: ne("Blue marguerite"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(139,126,116)",
    name: ne("Americano"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(0,0,0)",
    name: ne("Black"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(64,66,88)",
    name: ne("Blue zodiac"),
    foreground: "rgb(255, 255, 255)"
  },
  {
    color: "rgb(101,100,124)",
    name: ne("Comet"),
    foreground: "rgb(255, 255, 255)"
  }
], XE = GE.map(({
  color: t
}) => t).slice(0, 14);
function KE({
  defaultValue: t,
  onChange: e,
  colorPresets: i,
  showInput: r
}) {
  const [s, f] = Me(t), g = i || XE, l = Vi({
    size: "sm"
  });
  return /* @__PURE__ */ ie("div", {
    children: [/* @__PURE__ */ x(EE, {
      className: "!w-auto",
      color: s,
      onChange: (n) => {
        e == null || e(n), f(n);
      }
    }), /* @__PURE__ */ ie("div", {
      className: "py-20 px-12",
      children: [g && /* @__PURE__ */ x(VE, {
        colors: g,
        onChange: (n) => {
          if (n) {
            const a = On(n).toString("hex");
            e == null || e(a), f(a);
          }
        },
        value: s
      }), r && /* @__PURE__ */ x("div", {
        className: "pt-20",
        children: /* @__PURE__ */ x(PE, {
          autoComplete: "off",
          role: "textbox",
          autoCorrect: "off",
          spellCheck: "false",
          required: !0,
          "aria-label": "Hex color",
          prefixed: !0,
          className: l.input,
          color: s,
          onChange: (n) => {
            e == null || e(n), f(n);
          }
        })
      })]
    })]
  });
}
const ao = ue.createContext(null);
function qg() {
  return Fe(ao);
}
function $i() {
  const { lines: t, localeCode: e } = Qs();
  return { trans: Oe(
    (r) => qE({ ...r, lines: t, localeCode: e }),
    [t, e]
  ) };
}
const qE = Sn(
  (t) => {
    let { lines: e, message: i, values: r, localeCode: s } = t;
    return i = (e == null ? void 0 : e[i]) || i, r && (i = Jp(s, t), Object.entries(r).forEach(([f, g]) => {
      i = i.replace(`:${f}`, `${g}`);
    })), i;
  },
  { equals: La, callTimeout: 0 }
);
function ZE({
  onDismiss: t
}) {
  const {
    trans: e
  } = $i(), i = () => {
    t && t();
  };
  return /* @__PURE__ */ x("button", {
    className: "sr-only",
    "aria-label": e(ne("Dismiss")),
    tabIndex: -1,
    onClick: i
  });
}
function co(t) {
  const {
    type: e = "modal",
    dialogProps: i,
    ...r
  } = Fe(ao), {
    children: s,
    className: f,
    size: g = "md",
    background: l,
    radius: n = "rounded",
    maxWidth: a = "max-w-dialog",
    ...h
  } = t;
  let o = null;
  (e === "popover" || e === "tray") && (o = /* @__PURE__ */ x(ZE, {
    onDismiss: r.close
  }));
  const u = g === "fullscreenTakeover" || e === "tray", c = ae("mx-auto pointer-events-auto outline-none flex flex-col overflow-hidden", l || "bg-paper", e !== "tray" && JE(g), e === "tray" && "rounded-t", g !== "fullscreenTakeover" && "shadow-2xl border max-h-dialog", !u && `${n} ${a}`, f);
  return /* @__PURE__ */ ie("div", {
    ...Wt({
      role: "dialog",
      tabIndex: -1
    }, i, h),
    style: {
      ...t.style,
      "--be-dialog-padding": "24px"
    },
    "aria-modal": !0,
    className: c,
    children: [Pi.toArray(s).map((d) => {
      var m;
      return Ht(d) ? ct(d, {
        size: (m = d.props.size) != null ? m : g
      }) : d;
    }), o]
  });
}
function JE(t) {
  switch (t) {
    case "2xs":
      return "w-256";
    case "xs":
      return "w-320";
    case "sm":
      return "w-384";
    case "md":
      return "w-440";
    case "lg":
      return "w-620";
    case "xl":
      return "w-780";
    case "2xl":
      return "w-850";
    case "fullscreen":
      return "w-1280";
    case "fullscreenTakeover":
      return "w-full h-full";
    default:
      return t;
  }
}
const rl = me(/* @__PURE__ */ x("path", {
  d: "M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"
}), "KeyboardArrowDownOutlined"), QE = qe(({
  children: t,
  autoFocus: e = !1,
  restoreFocus: i = !0,
  isDismissable: r = !0,
  isOpen: s = !1,
  onClose: f
}, g) => {
  const l = Gc(), n = Ni(g);
  return /* @__PURE__ */ ie("div", {
    className: "isolate z-modal fixed inset-0",
    style: l,
    children: [/* @__PURE__ */ x(qc, {
      onClick: () => {
        r && f();
      }
    }, "modal-underlay"), /* @__PURE__ */ x(et.div, {
      ref: n,
      className: "absolute inset-0 w-full h-full z-20 flex items-center justify-center pointer-events-none",
      role: "presentation",
      initial: {
        opacity: 0,
        scale: 0.7
      },
      animate: {
        opacity: 1,
        scale: 1
      },
      exit: {
        opacity: 0,
        scale: 1
      },
      children: /* @__PURE__ */ x(Zs, {
        restoreFocus: i,
        autoFocus: e,
        contain: !0,
        children: t
      })
    })]
  });
});
function ek({
  x: t,
  y: e
}, i) {
  return {
    getBoundingClientRect() {
      return {
        x: t,
        y: e,
        width: 0,
        height: 0,
        top: e,
        right: t,
        bottom: e,
        left: t
      };
    },
    contextElement: i
  };
}
function lo(t) {
  let {
    children: e,
    type: i,
    disableInitialTransition: r,
    onClose: s,
    isDismissable: f = !0,
    moveFocusToDialog: g = !0,
    returnFocusToTrigger: l = !0,
    triggerOnHover: n = !1,
    currentValue: a,
    triggerOnContextMenu: h = !1
  } = t;
  const o = ge(null), u = h && !t.triggerRef ? o : t.triggerRef, c = ge(a), [d, m] = Ii(t.isOpen, t.defaultIsOpen, t.onOpenChange), {
    dialogTrigger: p,
    dialog: v
  } = tk(e);
  eo() && i === "popover" && (i = "modal");
  const y = ge(null), {
    x: w,
    y: _,
    reference: S,
    floating: C,
    strategy: k,
    refs: R
  } = Yc({
    ...t,
    disablePositioning: i === "modal"
  }), B = i === "popover" ? {
    position: k,
    top: _ != null ? _ : "",
    left: w != null ? w : ""
  } : {}, N = Ot(), K = `${N}-label`, ee = `${N}-description`, G = `${N}-form`, W = Oe((P) => {
    s == null || s(P != null ? P : c.current), m(!1);
  }, [s, m]), re = Oe(() => {
    m(!0), c.current = a;
  }, [a, m]);
  ci(() => {
    (u == null ? void 0 : u.current) && R.reference.current !== u.current && S(u.current);
  }, [S, u == null ? void 0 : u.current, R]);
  const ce = Ke(() => ({
    "aria-labelledby": K,
    "aria-describedby": ee
  }), [K, ee]);
  let le;
  i === "modal" ? le = QE : i === "tray" ? le = qp : le = Zn;
  const T = Ke(() => ({
    dialogProps: ce,
    type: i,
    labelId: K,
    descriptionId: ee,
    isDismissable: f,
    close: W,
    formId: G
  }), [W, ee, ce, G, K, i, f]);
  n = n && i === "popover";
  const M = {
    onPointerEnter: st((P) => {
      re();
    }),
    onPointerLeave: st((P) => {
      y.current = setTimeout(() => {
        W();
      }, 150);
    })
  }, A = {
    onPointerEnter: st((P) => {
      y.current && clearTimeout(y.current);
    }),
    onPointerLeave: st((P) => {
      W();
    })
  }, D = {
    onContextMenu: st((P) => {
      P.preventDefault(), o.current = ek({
        x: P.clientX,
        y: P.clientY
      }, P.currentTarget), re();
    })
  }, V = {
    onClick: st((P) => {
      P.stopPropagation(), d ? W() : re();
    })
  };
  return /* @__PURE__ */ ie(Rt, {
    children: [p && ct(p, Wt({
      ...!u && !h ? {
        ref: S
      } : {},
      ...h ? {} : V,
      ...n ? M : {},
      ...h ? D : {}
    }, {
      ...p.props
    })), _t && Za(/* @__PURE__ */ x(Ut, {
      initial: !r,
      children: d && /* @__PURE__ */ x(ao.Provider, {
        value: T,
        children: /* @__PURE__ */ x(le, {
          ...n ? A : {},
          ref: C,
          triggerRef: R.reference,
          style: B,
          restoreFocus: l,
          autoFocus: g,
          isOpen: d,
          onClose: W,
          isDismissable: f,
          isContextMenu: h,
          children: v
        })
      })
    }), _t)]
  });
}
function tk(t) {
  const e = ue.Children.toArray(t);
  return e && e.length === 2 ? {
    dialogTrigger: e[0],
    dialog: e[1]
  } : {
    dialog: e[0]
  };
}
function Hi(t) {
  const {
    label: e,
    className: i,
    value: r,
    onChange: s,
    size: f,
    width: g = "w-max"
  } = t, l = oe((d) => {
    var m, p;
    return (p = (m = d.config.ui) == null ? void 0 : m.colorPresets) == null ? void 0 : p.items;
  }) || [], n = Vi({
    size: f
  }), [a, h] = Me(r), [o, u] = Me(!1), c = (d) => {
    h(d), s == null || s(d);
  };
  return /* @__PURE__ */ ie("div", {
    className: ae(i, g),
    children: [e && /* @__PURE__ */ x("span", {
      className: n.label,
      children: e
    }), /* @__PURE__ */ ie(lo, {
      type: "popover",
      isOpen: o,
      onOpenChange: u,
      children: [/* @__PURE__ */ ie(Yt, {
        className: ae(n.input, "inline-flex items-center"),
        "aria-label": t["aria-label"],
        children: [/* @__PURE__ */ x("span", {
          className: "block flex-shrink-0 mr-5 border rounded h-2/4 aspect-square",
          style: {
            backgroundColor: a
          }
        }), /* @__PURE__ */ x(ik, {
          isActive: o,
          className: n.adornment
        })]
      }), /* @__PURE__ */ x(co, {
        size: "auto",
        children: /* @__PURE__ */ x(KE, {
          onChange: c,
          defaultValue: a,
          colorPresets: l
        })
      })]
    })]
  });
}
function ik({
  isActive: t,
  className: e
}) {
  return /* @__PURE__ */ x(rl, {
    size: "sm",
    className: `transition-transform ml-auto flex-shrink-0 ${t ? "rotate-180" : "rotate-0"} ${e}`
  });
}
function rk(t) {
  const {
    size: e = "md",
    inline: i,
    label: r,
    showValueLabel: s = !!r,
    className: f,
    width: g = "w-full",
    slider: l,
    children: n,
    trackColor: a = "primary",
    fillColor: h = "primary"
  } = t, {
    domProps: o,
    trackRef: u,
    getThumbPercent: c,
    getThumbValueLabel: d,
    labelId: m,
    groupId: p,
    thumbIds: v,
    isDisabled: b,
    numberFormatter: y,
    minValue: w,
    maxValue: _,
    step: S,
    values: C,
    getValueLabel: k
  } = l;
  let R = "", B = Math.max([...y.format(w)].length, [...y.format(_)].length, [...y.format(S)].length);
  k ? R = k(C[0]) : C.length === 1 ? R = d(0) : C.length === 2 && (R = `${d(0)} \u2013 ${d(1)}`, B = 3 + 2 * Math.max(B, [...y.format(w)].length, [...y.format(_)].length));
  const N = Vi({
    size: e,
    disabled: b,
    labelDisplay: "flex"
  }), K = ae("touch-none", f, g, {
    "flex items-center": i
  });
  return /* @__PURE__ */ ie("div", {
    className: K,
    role: "group",
    id: p,
    children: [(r || s) && /* @__PURE__ */ ie("div", {
      className: ae(N.label, "select-none"),
      children: [r && /* @__PURE__ */ x("label", {
        onClick: () => {
          var ee;
          (ee = document.getElementById(v[0])) == null || ee.focus();
        },
        id: m,
        htmlFor: p,
        children: r
      }), s && /* @__PURE__ */ x("output", {
        htmlFor: v[0],
        className: "ml-auto text-right",
        "aria-live": "off",
        style: B ? {
          width: `${B}ch`,
          minWidth: `${B}ch`
        } : void 0,
        children: R
      })]
    }), /* @__PURE__ */ ie("div", {
      ref: u,
      className: "h-30 relative",
      ...o,
      role: "presentation",
      children: [/* @__PURE__ */ x("div", {
        className: `absolute inset-0 m-auto h-4 rounded ${nk(a, b)}`
      }), /* @__PURE__ */ x("div", {
        className: `absolute inset-0 my-auto h-4 rounded ${sk(h, b)}`,
        style: {
          width: `${c(0) * 100}%`
        }
      }), n]
    })]
  });
}
function nk(t, e) {
  switch (e && (t = "disabled"), t) {
    case "disabled":
      return "bg-slider-disabled/60";
    case "primary":
      return "bg-primary-light";
    case "neutral":
      return "bg-divider";
    default:
      return t;
  }
}
function sk(t, e) {
  switch (e && (t = "disabled"), t) {
    case "disabled":
      return "bg-slider-disabled";
    case "primary":
      return "bg-primary";
    default:
      return t;
  }
}
function Zg(t = {}) {
  const { localeCode: e } = Qs();
  return Ke(
    () => new oo(e, t),
    [e, t]
  );
}
function Jg({
  minValue: t = 0,
  maxValue: e = 100,
  isDisabled: i = !1,
  step: r = 1,
  formatOptions: s,
  onChangeEnd: f,
  onPointerDown: g,
  label: l,
  getValueLabel: n,
  showThumbOnHoverOnly: a,
  thumbSize: h,
  ...o
}) {
  var J;
  const [u, c] = Me(!1), d = Zg(s), { addGlobalListener: m, removeGlobalListener: p } = Fc(), v = ge(null), [b, y] = Ii(
    o.value ? o.value : void 0,
    (J = o.defaultValue) != null ? J : [t],
    o.onChange
  ), w = ge(null);
  w.current = b;
  const [_, S] = Me(
    new Array(b.length).fill(!1)
  ), C = ge(null);
  C.current = _;
  function k(F) {
    return d.format(F);
  }
  const R = (F) => {
    var U;
    return ((U = C.current) == null ? void 0 : U[F]) || !1;
  }, B = (F) => k(b[F]), N = (F) => F === 0 ? t : b[F - 1], K = (F) => F === b.length - 1 ? e : b[F + 1], ee = (F, U) => {
    if (i || !V(F) || !w.current)
      return;
    const se = N(F), be = K(F);
    U = S_(U, se, be, r), w.current = Th(w.current, F, U), y(w.current);
  }, G = (F, U) => {
    var be;
    if (i || !V(F))
      return;
    const se = (be = C.current) == null ? void 0 : be[F];
    C.current = Th(
      C.current || [],
      F,
      U
    ), S(C.current), f && se && !C.current.some(Boolean) && f(w.current || []);
  }, [W, re] = Me(
    void 0
  ), ce = (F) => {
    const U = Math.min(1, (F - t) / (e - t));
    return isNaN(U) ? 0 : U;
  }, le = (F) => ce(w.current[F]), T = (F, U) => {
    ee(F, A(U));
  }, M = (F) => Math.round((F - t) / r) * r + t, A = (F) => {
    const U = F * (e - t) + t;
    return hn(M(U), t, e);
  }, D = ge(
    new Array(b.length).fill(!0)
  ), V = (F) => D.current[F], P = (F, U) => {
    D.current[F] = U;
  }, E = ge(null), L = ge(void 0), j = (F) => {
    if (!(F.pointerType === "mouse" && (F.button !== 0 || F.altKey || F.ctrlKey || F.metaKey)) && (g == null || g(), v.current && !i && b.every((U, se) => !_[se]))) {
      const U = v.current.offsetWidth, se = v.current.getBoundingClientRect().left, de = (F.clientX - se) / U, X = A(de);
      let fe;
      const we = b.findIndex((Ee) => X - Ee < 0);
      if (we === 0)
        fe = we;
      else if (we === -1)
        fe = b.length - 1;
      else {
        const Ee = b[we - 1], Re = b[we];
        Math.abs(Ee - X) < Math.abs(Re - X) ? fe = we - 1 : fe = we;
      }
      fe >= 0 && V(fe) ? (F.preventDefault(), E.current = fe, re(fe), L.current = F.pointerId, G(E.current, !0), ee(fe, X), m(window, "pointerup", Q, !1)) : E.current = null;
    }
  }, Y = ge(null), { domProps: H } = no({
    onPointerDown: j,
    onMoveStart() {
      Y.current = null;
    },
    onMove(F, U) {
      var be;
      const se = ((be = v.current) == null ? void 0 : be.offsetWidth) || 0;
      if (Y.current == null && (Y.current = le(E.current || 0) * se), Y.current += U, E.current != null && v.current) {
        const de = hn(Y.current / se, 0, 1);
        T(E.current, de);
      }
    },
    onMoveEnd() {
      E.current != null && (G(E.current, !1), E.current = null);
    }
  }), Z = Wt(H, {
    onPointerEnter: () => {
      c(!0);
    },
    onPointerLeave: () => {
      c(!1);
    }
  }), Q = (F) => {
    F.pointerId === L.current && (E.current != null && (G(E.current, !1), E.current = null), p(window, "pointerup", Q, !1));
  }, te = Ot(), $ = l ? `${te}-label` : void 0, z = `${te}-group`, q = [...Array(b.length)].map((F, U) => `${te}-thumb-${U}`);
  return {
    domProps: Z,
    trackRef: v,
    isDisabled: i,
    step: r,
    values: b,
    minValue: t,
    maxValue: e,
    focusedThumb: W,
    labelId: $,
    groupId: z,
    thumbIds: q,
    numberFormatter: d,
    getThumbPercent: le,
    getThumbMinValue: N,
    getThumbMaxValue: K,
    getThumbValueLabel: B,
    isThumbDragging: R,
    setThumbValue: ee,
    updateDraggedThumbs: G,
    setThumbEditable: P,
    setFocusedThumb: re,
    getValueLabel: n,
    isPointerOver: u,
    showThumbOnHoverOnly: a,
    thumbSize: h
  };
}
function Th(t, e, i) {
  return t[e] === i ? t : [...t.slice(0, e), i, ...t.slice(e + 1)];
}
function ok({
  index: t,
  slider: e,
  isDisabled: i,
  ariaLabel: r,
  inputRef: s,
  onBlur: f,
  fillColor: g = "primary"
}) {
  const l = Ni(s), {
    addGlobalListener: n,
    removeGlobalListener: a
  } = Fc(), {
    step: h,
    values: o,
    focusedThumb: u,
    labelId: c,
    thumbIds: d,
    isDisabled: m,
    getThumbPercent: p,
    getThumbMinValue: v,
    getThumbMaxValue: b,
    getThumbValueLabel: y,
    setThumbValue: w,
    updateDraggedThumbs: _,
    isThumbDragging: S,
    setThumbEditable: C,
    setFocusedThumb: k,
    isPointerOver: R,
    showThumbOnHoverOnly: B,
    thumbSize: N = "w-18 h-18"
  } = e, K = S(t), ee = o[t];
  C(t, !i);
  const G = i || m, W = Oe(() => {
    l.current && l.current.focus({
      preventScroll: !0
    });
  }, [l]), re = u === t;
  Te(() => {
    re && W();
  }, [re, W]);
  const ce = ge(void 0), le = (M) => {
    M.pointerId === ce.current && (W(), _(t, !1), a(window, "pointerup", le, !1));
  }, T = ae(
    "outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",
    N,
    !G && "shadow-md",
    ak({
      fillColor: g,
      isDisabled: G,
      isDragging: K
    }),
    B && K || R ? "visible" : "invisible"
  );
  return /* @__PURE__ */ x("div", {
    role: "presentation",
    className: T,
    style: {
      left: `${Math.max(p(t) * 100, 0)}%`
    },
    onPointerDown: (M) => {
      M.button !== 0 || M.altKey || M.ctrlKey || M.metaKey || (W(), ce.current = M.pointerId, _(t, !0), n(window, "pointerup", le, !1));
    },
    children: /* @__PURE__ */ x("input", {
      id: d[t],
      onKeyDown: st(() => {
        _(t, !0);
      }),
      onKeyUp: st(() => {
        _(t, !1);
      }),
      ref: l,
      tabIndex: G ? void 0 : 0,
      min: v(t),
      max: b(t),
      step: h,
      value: ee,
      disabled: G,
      "aria-label": r,
      "aria-labelledby": c,
      "aria-orientation": "horizontal",
      "aria-valuetext": y(t),
      onFocus: () => {
        k(t);
      },
      onBlur: (M) => {
        k(void 0), _(t, !1), f == null || f(M);
      },
      onChange: (M) => {
        w(t, parseFloat(M.target.value));
      },
      type: "range",
      className: "sr-only"
    })
  });
}
function ak({
  isDisabled: t,
  isDragging: e,
  fillColor: i
}) {
  return t ? "bg-slider-disabled cursor-default" : i && i !== "primary" ? i : ae("hover:bg-primary-dark", e ? "bg-primary-dark" : "bg-primary");
}
var ck = (t) => t.type === "checkbox", lk = (t) => t instanceof Date, Qg = (t) => t == null;
const uk = (t) => typeof t == "object";
var Ar = (t) => !Qg(t) && !Array.isArray(t) && uk(t) && !lk(t), hk = (t) => Ar(t) && t.target ? ck(t.target) ? t.target.checked : t.target.value : t, fk = (t) => t.substring(0, t.search(/\.\d+(\.|$)/)) || t, dk = (t, e) => t.has(fk(e)), pk = (t) => {
  const e = t.constructor && t.constructor.prototype;
  return Ar(e) && e.hasOwnProperty("isPrototypeOf");
}, gk = typeof window < "u" && typeof window.HTMLElement < "u" && typeof document < "u";
function nl(t) {
  let e;
  const i = Array.isArray(t);
  if (t instanceof Date)
    e = new Date(t);
  else if (t instanceof Set)
    e = new Set(t);
  else if (!(gk && (t instanceof Blob || t instanceof FileList)) && (i || Ar(t)))
    if (e = i ? [] : {}, !Array.isArray(t) && !pk(t))
      e = t;
    else
      for (const r in t)
        e[r] = nl(t[r]);
  else
    return t;
  return e;
}
var em = (t) => Array.isArray(t) ? t.filter(Boolean) : [], Ha = (t) => t === void 0, lt = (t, e, i) => {
  if (!e || !Ar(t))
    return i;
  const r = em(e.split(/[,[\].]+?/)).reduce((s, f) => Qg(s) ? s : s[f], t);
  return Ha(r) || r === t ? Ha(t[e]) ? i : t[e] : r;
};
const Eh = {
  BLUR: "blur",
  FOCUS_OUT: "focusout",
  CHANGE: "change"
}, Ua = {
  onBlur: "onBlur",
  onChange: "onChange",
  onSubmit: "onSubmit",
  onTouched: "onTouched",
  all: "all"
}, mk = ue.createContext(null), sl = () => ue.useContext(mk);
var vk = (t, e, i, r = !0) => {
  const s = {
    defaultValues: e._defaultValues
  };
  for (const f in t)
    Object.defineProperty(s, f, {
      get: () => {
        const g = f;
        return e._proxyFormState[g] !== Ua.all && (e._proxyFormState[g] = !r || Ua.all), i && (i[g] = !0), t[g];
      }
    });
  return s;
}, bk = (t) => Ar(t) && !Object.keys(t).length, yk = (t, e, i, r) => {
  i(t);
  const {
    name: s,
    ...f
  } = t;
  return bk(f) || Object.keys(f).length >= Object.keys(e).length || Object.keys(f).find((g) => e[g] === (!r || Ua.all));
}, wk = (t) => Array.isArray(t) ? t : [t], tm = (t, e, i) => i && e ? t === e : !t || !e || t === e || wk(t).some((r) => r && (r.startsWith(e) || e.startsWith(r)));
function im(t) {
  const e = ue.useRef(t);
  e.current = t, ue.useEffect(() => {
    const i = !t.disabled && e.current.subject && e.current.subject.subscribe({
      next: e.current.next
    });
    return () => {
      i && i.unsubscribe();
    };
  }, [t.disabled]);
}
function xk(t) {
  const e = sl(), {
    control: i = e.control,
    disabled: r,
    name: s,
    exact: f
  } = t || {}, [g, l] = ue.useState(i._formState), n = ue.useRef(!0), a = ue.useRef({
    isDirty: !1,
    isLoading: !1,
    dirtyFields: !1,
    touchedFields: !1,
    isValidating: !1,
    isValid: !1,
    errors: !1
  }), h = ue.useRef(s);
  return h.current = s, im({
    disabled: r,
    next: (o) => n.current && tm(h.current, o.name, f) && yk(o, a.current, i._updateFormState) && l({
      ...i._formState,
      ...o
    }),
    subject: i._subjects.state
  }), ue.useEffect(() => (n.current = !0, a.current.isValid && i._updateValid(!0), () => {
    n.current = !1;
  }), [i]), vk(g, i, a.current, !1);
}
var _k = (t) => typeof t == "string", Sk = (t, e, i, r, s) => _k(t) ? (r && e.watch.add(t), lt(i, t, s)) : Array.isArray(t) ? t.map((f) => (r && e.watch.add(f), lt(i, f))) : (r && (e.watchAll = !0), i);
function Ck(t) {
  const e = sl(), {
    control: i = e.control,
    name: r,
    defaultValue: s,
    disabled: f,
    exact: g
  } = t || {}, l = ue.useRef(r);
  l.current = r, im({
    disabled: f,
    subject: i._subjects.values,
    next: (h) => {
      tm(l.current, h.name, g) && a(nl(Sk(l.current, i._names, h.values || i._formValues, !1, s)));
    }
  });
  const [n, a] = ue.useState(i._getWatch(r, s));
  return ue.useEffect(() => i._removeUnmounted()), n;
}
var Tk = (t) => /^\w*$/.test(t), Ek = (t) => em(t.replace(/["|']|\]/g, "").split(/\.|\[/));
function kh(t, e, i) {
  let r = -1;
  const s = Tk(e) ? [e] : Ek(e), f = s.length, g = f - 1;
  for (; ++r < f; ) {
    const l = s[r];
    let n = i;
    if (r !== g) {
      const a = t[l];
      n = Ar(a) || Array.isArray(a) ? a : isNaN(+s[r + 1]) ? {} : [];
    }
    t[l] = n, t = t[l];
  }
  return t;
}
function kk(t) {
  const e = sl(), {
    name: i,
    control: r = e.control,
    shouldUnregister: s
  } = t, f = dk(r._names.array, i), g = Ck({
    control: r,
    name: i,
    defaultValue: lt(r._formValues, i, lt(r._defaultValues, i, t.defaultValue)),
    exact: !0
  }), l = xk({
    control: r,
    name: i
  }), n = ue.useRef(r.register(i, {
    ...t.rules,
    value: g
  }));
  return ue.useEffect(() => {
    const a = r._options.shouldUnregister || s, h = (o, u) => {
      const c = lt(r._fields, o);
      c && (c._f.mount = u);
    };
    if (h(i, !0), a) {
      const o = nl(lt(r._options.defaultValues, i));
      kh(r._defaultValues, i, o), Ha(lt(r._formValues, i)) && kh(r._formValues, i, o);
    }
    return () => {
      (f ? a && !r._state.action : a) ? r.unregister(i) : h(i, !1);
    };
  }, [i, r, f, s]), {
    field: {
      name: i,
      value: g,
      onChange: ue.useCallback((a) => n.current.onChange({
        target: {
          value: hk(a),
          name: i
        },
        type: Eh.CHANGE
      }), [i]),
      onBlur: ue.useCallback(() => n.current.onBlur({
        target: {
          value: lt(r._formValues, i),
          name: i
        },
        type: Eh.BLUR
      }), [i, r]),
      ref: (a) => {
        const h = lt(r._fields, i);
        h && a && (h._f.ref = {
          focus: () => a.focus(),
          select: () => a.select(),
          setCustomValidity: (o) => a.setCustomValidity(o),
          reportValidity: () => a.reportValidity()
        });
      }
    },
    formState: l,
    fieldState: Object.defineProperties({}, {
      invalid: {
        enumerable: !0,
        get: () => !!lt(l.errors, i)
      },
      isDirty: {
        enumerable: !0,
        get: () => !!lt(l.dirtyFields, i)
      },
      isTouched: {
        enumerable: !0,
        get: () => !!lt(l.touchedFields, i)
      },
      error: {
        enumerable: !0,
        get: () => lt(l.errors, i)
      }
    })
  };
}
function Ui({
  inputRef: t,
  onBlur: e,
  ...i
}) {
  const {
    onChange: r,
    onChangeEnd: s,
    value: f,
    defaultValue: g,
    ...l
  } = i, n = {
    ...l,
    value: f != null ? [f] : void 0,
    defaultValue: g != null ? [g] : void 0,
    onChange: (h) => {
      r == null || r(h[0]);
    },
    onChangeEnd: (h) => {
      s == null || s(h[0]);
    }
  }, a = Jg(n);
  return /* @__PURE__ */ x(rk, {
    ...n,
    slider: a,
    children: /* @__PURE__ */ x(ok, {
      fillColor: i.fillColor,
      index: 0,
      slider: a,
      inputRef: t,
      onBlur: e
    })
  });
}
function Wa({
  children: t,
  direction: e,
  className: i,
  position: r = e === "start" ? "left-0" : "right-0"
}) {
  return t ? /* @__PURE__ */ x("div", {
    className: ae("absolute h-full min-w-42 flex items-center justify-center top-0 text-muted z-10", r, i),
    children: t
  }) : null;
}
function Ok(t) {
  const e = { ...t };
  return Object.keys(e).forEach((i) => {
    (e[i] == null || e[i] === "") && delete e[i];
  }), e;
}
const rm = ue.forwardRef((t, e) => {
  const {
    children: i,
    description: r,
    errorMessage: s,
    descriptionProps: f = {},
    errorMessageProps: g = {},
    startAdornment: l,
    endAdornment: n,
    adornmentPosition: a,
    startAppend: h,
    endAppend: o,
    fieldClassNames: u,
    disabled: c,
    wrapperProps: d
  } = t;
  return /* @__PURE__ */ ie("div", {
    className: u.wrapper,
    ref: e,
    ...d,
    children: [/* @__PURE__ */ x(Pk, {
      ...t
    }), /* @__PURE__ */ ie("div", {
      className: u.inputWrapper,
      children: [/* @__PURE__ */ x(Wa, {
        direction: "start",
        className: u.adornment,
        position: a,
        children: l
      }), h && /* @__PURE__ */ x(Oh, {
        style: u.append,
        disabled: c,
        children: h
      }), i, o && /* @__PURE__ */ x(Oh, {
        style: u.append,
        disabled: c,
        children: o
      }), /* @__PURE__ */ x(Wa, {
        direction: "end",
        className: u.adornment,
        position: a,
        children: n
      })]
    }), r && !s && /* @__PURE__ */ x("div", {
      className: u.description,
      ...f,
      children: r
    }), s && /* @__PURE__ */ x("div", {
      className: u.error,
      ...g,
      children: s
    })]
  });
});
function Pk({
  labelElementType: t,
  fieldClassNames: e,
  labelProps: i,
  label: r,
  labelSuffix: s,
  required: f
}) {
  if (!r)
    return null;
  const l = /* @__PURE__ */ ie(t || "label", {
    className: e.label,
    ...i,
    children: [r, f && /* @__PURE__ */ x("span", {
      className: "text-danger",
      children: " *"
    })]
  });
  return s ? /* @__PURE__ */ ie("div", {
    className: "flex items-center gap-14 w-full",
    children: [l, /* @__PURE__ */ x("div", {
      className: "ml-auto mb-4 text-muted text-xs",
      children: s
    })]
  }) : l;
}
function Oh({
  children: t,
  style: e,
  disabled: i
}) {
  return ue.cloneElement(t, {
    ...t.props,
    disabled: t.props.disabled || i,
    ...Ok(e)
  });
}
function ol({ autoFocus: t, autoSelectText: e }, i) {
  const r = ge(t);
  Te(() => {
    var s;
    r.current && i.current && ((s = i.current) == null || s.focus(), e && i.current.nodeName.toLowerCase() === "input" && requestAnimationFrame(() => {
      i.current.select();
    })), r.current = !1;
  }, [i, e]);
}
function nm(t) {
  const {
    focusRef: e,
    labelElementType: i = "label",
    label: r,
    labelSuffix: s,
    autoFocus: f,
    autoSelectText: g,
    labelPosition: l,
    descriptionPosition: n,
    size: a,
    errorMessage: h,
    description: o,
    flexibleHeight: u,
    startAdornment: c,
    endAdornment: d,
    startAppend: m,
    adornmentPosition: p,
    endAppend: v,
    className: b,
    inputClassName: y,
    inputWrapperClassName: w,
    unstyled: _,
    background: S,
    invalid: C,
    disabled: k,
    id: R,
    inputRadius: B,
    inputBorder: N,
    inputShadow: K,
    ...ee
  } = t;
  ol(t, e);
  const G = Ot(), W = R || G, re = `${W}-label`, ce = `${W}-description`, le = `${W}-error`, T = {
    id: re,
    htmlFor: i === "label" ? W : void 0
  }, M = {
    id: ce
  }, A = {
    id: le
  }, V = {
    "aria-label": !t.label && !t["aria-label"] && t.placeholder ? t.placeholder : t["aria-label"],
    "aria-invalid": C || void 0,
    id: W,
    disabled: k,
    ...ee
  }, P = [];
  r && P.push(T.id), V["aria-labelledby"] && P.push(V["aria-labelledby"]), V["aria-labelledby"] = P.length ? P.join(" ") : void 0;
  const E = [];
  return o && E.push(M.id), h && E.push(A.id), V["aria-describedby"] && E.push(V["aria-describedby"]), V["aria-describedby"] = E.length ? E.join(" ") : void 0, {
    fieldProps: {
      errorMessageProps: A,
      descriptionProps: M,
      labelProps: T,
      disabled: k,
      label: r,
      labelSuffix: s,
      autoFocus: f,
      autoSelectText: g,
      labelPosition: l,
      descriptionPosition: n,
      size: a,
      errorMessage: h,
      description: o,
      flexibleHeight: u,
      startAdornment: c,
      endAdornment: d,
      startAppend: m,
      adornmentPosition: p,
      endAppend: v,
      className: b,
      inputClassName: y,
      inputWrapperClassName: w,
      unstyled: _,
      background: S,
      invalid: C
    },
    inputProps: V
  };
}
const al = ue.forwardRef((t, e) => {
  const {
    hideCaret: i,
    placeholder: r = /* @__PURE__ */ x(ve, {
      message: "Select an option..."
    }),
    selectedValue: s,
    onItemSelected: f,
    onOpenChange: g,
    onInputValueChange: l,
    onSelectionChange: n,
    selectionMode: a,
    minWidth: h = "min-w-128",
    children: o,
    ...u
  } = t, c = eo(), d = Wp({
    ...t,
    floatingWidth: c ? "auto" : "matchTrigger",
    selectionMode: "single",
    role: "listbox"
  }, e), {
    state: {
      selectedValues: m,
      isOpen: p,
      setIsOpen: v,
      activeIndex: b,
      setSelectedIndex: y
    },
    focusItem: w,
    listboxId: _,
    reference: S,
    refs: C,
    listContent: k
  } = d, {
    fieldProps: R,
    inputProps: B
  } = nm({
    ...u,
    focusRef: C.reference
  }), N = d.collection.get(m[0]), K = N ? /* @__PURE__ */ ie("span", {
    className: "flex items-center gap-10",
    children: [N.element.props.startIcon, /* @__PURE__ */ x("span", {
      className: "whitespace-nowrap overflow-hidden overflow-ellipsis",
      children: N.element.props.children
    })]
  }) : /* @__PURE__ */ x("span", {
    className: "italic",
    children: r
  }), ee = Vi({
    ...t,
    endAdornment: !0
  }), {
    handleTriggerKeyDown: G,
    handleListboxKeyboardNavigation: W
  } = eg(d), {
    findMatchingItem: re
  } = tg(), ce = (T) => {
    if (!p)
      return;
    const M = re(T, k, b);
    M != null && w("increment", M);
  }, le = (T) => {
    if (p)
      return;
    const M = re(T, k, b);
    M != null && y(M);
  };
  return /* @__PURE__ */ x(Qp, {
    listbox: d,
    onKeyDownCapture: ce,
    onKeyDown: W,
    children: /* @__PURE__ */ x(rm, {
      fieldClassNames: ee,
      ...R,
      children: /* @__PURE__ */ ie("button", {
        ...B,
        type: "button",
        "data-selected-value": N == null ? void 0 : N.value,
        "aria-expanded": p ? "true" : "false",
        "aria-haspopup": "listbox",
        "aria-controls": p ? _ : void 0,
        ref: S,
        onKeyDown: G,
        onKeyDownCapture: le,
        disabled: u.disabled,
        onClick: () => {
          v(!p);
        },
        className: ae(ee.input, !R.unstyled && h),
        children: [K, !i && /* @__PURE__ */ x(Wa, {
          direction: "end",
          children: /* @__PURE__ */ x(rl, {
            className: ee.adornment
          })
        })]
      })
    })
  });
});
function Ak() {
  const t = oe((g) => g.filter.selected);
  if (!t)
    return null;
  const e = I().filter.getByName(t).options, i = (g, l) => {
    var n;
    (n = I().filter) == null || n.applyValue(t, g, l), O().setDirty(!0);
  }, r = I().canvas.getMainImage().filters, s = I().filter.findFilterIndex(t, r), f = r == null ? void 0 : r[s];
  if (e) {
    const g = Object.entries(e).map(([l, n]) => {
      let a;
      const h = f ? f[l] : n.current;
      return n.type === "slider" ? a = /* @__PURE__ */ x(Ui, {
        label: /* @__PURE__ */ x("span", {
          className: "capitalize",
          children: /* @__PURE__ */ x(ve, {
            ...Fo[l]
          })
        }),
        minValue: n.min,
        maxValue: n.max,
        step: n.step,
        defaultValue: h,
        formatOptions: {
          style: "percent"
        },
        size: "sm",
        onChange: (o) => {
          i(l, o);
        }
      }) : n.type === "colorPicker" ? a = /* @__PURE__ */ x(Hi, {
        label: /* @__PURE__ */ x(ve, {
          ...Fo[l]
        }),
        size: "sm",
        width: "w-full",
        value: h,
        onChange: (o) => {
          i(l, o);
        }
      }) : n.type === "select" && (a = /* @__PURE__ */ x(al, {
        selectionMode: "single",
        size: "sm",
        label: /* @__PURE__ */ x(ve, {
          ...Fo[l]
        }),
        defaultValue: h,
        onSelectionChange: (o) => {
          i(l, o);
        },
        children: n.available.map((o) => /* @__PURE__ */ x(Ks, {
          value: o.key,
          children: /* @__PURE__ */ x("span", {
            className: "capitalize",
            children: /* @__PURE__ */ x(ve, {
              message: o.key
            })
          })
        }, o.key))
      })), /* @__PURE__ */ x("div", {
        className: "pb-10",
        children: a
      }, l);
    });
    return /* @__PURE__ */ x(Qc, {
      children: /* @__PURE__ */ x("div", {
        className: "max-w-240 pt-10 mx-auto",
        children: g
      })
    });
  }
  return null;
}
function Mk() {
  const t = oe((r) => r.frame.active), e = (t == null ? void 0 : t.mode) === "basic", i = Oe((r) => `${r}%`, []);
  return /* @__PURE__ */ x(Qc, {
    className: "pb-18 pt-6",
    children: /* @__PURE__ */ ie("div", {
      className: "max-w-288 m-auto",
      children: [e && /* @__PURE__ */ x(Hi, {
        className: "mb-20",
        width: "w-full",
        size: "sm",
        label: /* @__PURE__ */ x(ve, {
          message: "Color"
        }),
        value: I().frame.builder.defaultColor,
        onChange: (r) => {
          I().frame.active.changeColor(r);
        }
      }), /* @__PURE__ */ x(Ui, {
        size: "sm",
        label: /* @__PURE__ */ x(ve, {
          message: "Size"
        }),
        step: 1,
        minValue: I().frame.active.getMinSize(),
        maxValue: I().frame.active.getMaxSize(),
        defaultValue: I().frame.active.currentSizeInPercent,
        getValueLabel: i,
        onChange: (r) => {
          I().frame.resize(r);
        }
      })]
    })
  });
}
const Pn = ue.createContext(null);
function Dk() {
  const {
    tabsRef: t,
    selectedTab: e
  } = Fe(Pn), [i, r] = Me({
    width: void 0,
    transform: void 0,
    className: void 0
  });
  return ci(() => {
    if (e != null && t.current) {
      const s = t.current[e];
      if (!s)
        return;
      r((f) => ({
        width: `${s.offsetWidth}px`,
        transform: `translateX(${s.offsetLeft}px)`,
        className: f.width === void 0 ? "" : "transition-all"
      }));
    }
  }, [r, e, t]), /* @__PURE__ */ x("div", {
    className: ae("absolute bottom-0 left-0 h-2 bg-primary", i.className),
    role: "presentation",
    style: {
      width: i.width,
      transform: i.transform
    }
  });
}
function Ik({
  children: t,
  center: e,
  expand: i,
  className: r
}) {
  const s = Pi.toArray(t);
  return /* @__PURE__ */ x(Zs, {
    children: /* @__PURE__ */ ie("div", {
      className: ae(
        "flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",
        r
      ),
      role: "tablist",
      "aria-orientation": "horizontal",
      children: [s.map((f, g) => Ht(f) ? ct(f, {
        index: g,
        className: ae(f.props.className, i && "flex-auto", e && g === 0 && "ml-auto", e && g === s.length - 1 && "mr-auto")
      }) : null), /* @__PURE__ */ x(Dk, {})]
    })
  });
}
function Rk(t) {
  const {
    size: e = "md",
    children: i,
    className: r,
    isLazy: s,
    overflow: f = "overflow-hidden"
  } = t, g = ge([]), l = Ot(), [n, a] = Ii(t.selectedTab, t.defaultSelectedTab || 0, t.onTabChange), h = Ke(() => ({
    selectedTab: n,
    setSelectedTab: a,
    tabsRef: g,
    size: e,
    isLazy: s,
    id: l
  }), [n, l, s, a, e]);
  return /* @__PURE__ */ x(Pn.Provider, {
    value: h,
    children: /* @__PURE__ */ x("div", {
      className: ae(r, f, "max-w-full"),
      children: i
    })
  });
}
const Lk = me(/* @__PURE__ */ x("path", {
  d: "M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"
}), "FormatUnderlinedOutlined"), Fk = me(/* @__PURE__ */ x("path", {
  d: "M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"
}), "FormatStrikethroughOutlined"), zk = me(/* @__PURE__ */ x("path", {
  d: "M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"
}), "FormatItalicOutlined"), Bk = me(/* @__PURE__ */ x("path", {
  d: "M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"
}), "FormatAlignRightOutlined"), jk = me(/* @__PURE__ */ x("path", {
  d: "M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"
}), "FormatAlignLeftOutlined"), Nk = me(/* @__PURE__ */ x("path", {
  d: "M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"
}), "FormatAlignCenterOutlined"), Fi = qe(({
  inputElementType: t = "input",
  flexibleHeight: e,
  inputRef: i,
  inputTestId: r,
  ...s
}, f) => {
  const g = Ni(i), {
    fieldProps: l,
    inputProps: n
  } = nm({
    ...s,
    focusRef: g
  }), a = t === "textarea", h = a ? "textarea" : "input", o = Vi({
    ...s,
    flexibleHeight: e || t === "textarea"
  });
  return t === "textarea" && !s.unstyled && (o.input = `${o.input} py-12`), /* @__PURE__ */ x(rm, {
    ref: f,
    fieldClassNames: o,
    ...l,
    children: /* @__PURE__ */ x(h, {
      "data-testid": r,
      ref: g,
      ...n,
      rows: a ? n.rows || 4 : void 0,
      className: o.input
    })
  });
});
ue.forwardRef(({
  name: t,
  ...e
}, i) => {
  const {
    field: {
      onChange: r,
      onBlur: s,
      value: f = "",
      ref: g
    },
    fieldState: {
      invalid: l,
      error: n
    }
  } = kk({
    name: t
  }), a = {
    onChange: r,
    onBlur: s,
    value: f == null ? "" : f,
    invalid: l,
    errorMessage: n == null ? void 0 : n.message,
    inputRef: g,
    name: t
  };
  return /* @__PURE__ */ x(Fi, {
    ref: i,
    ...Wt(a, e)
  });
});
function Vk() {
  return /* @__PURE__ */ ie("div", {
    className: "flex gap-20 justify-center",
    children: [/* @__PURE__ */ x($k, {}), /* @__PURE__ */ x(Hk, {}), /* @__PURE__ */ x(Uk, {})]
  });
}
function $k() {
  var i;
  const t = (i = oe((r) => r.objects.active.editableProps.fontSize)) != null ? i : 40, {
    trans: e
  } = $i();
  return /* @__PURE__ */ x(Fi, {
    type: "number",
    size: "xs",
    "aria-label": e({
      message: "Font Size"
    }),
    min: 1,
    max: 300,
    className: "w-64 flex-shrink-0",
    value: t,
    onChange: (r) => {
      I().objects.setValues({
        fontSize: r.target.valueAsNumber
      }), O().setDirty(!0);
    }
  });
}
function Hk() {
  const t = oe((f) => f.objects.active.editableProps.fontStyle), e = oe((f) => f.objects.active.editableProps.underline), i = oe((f) => f.objects.active.editableProps.linethrough), [r, s] = Me([t, e && "underline", i && "linethrough"]);
  return /* @__PURE__ */ ie(to, {
    size: "xs",
    variant: "outline",
    radius: "rounded",
    value: r,
    multiple: !0,
    onChange: (f) => {
      s(f), I().objects.setValues({
        underline: f.includes("underline"),
        linethrough: f.includes("linethrough"),
        fontStyle: f.includes("italic") ? "italic" : ""
      }), O().setDirty(!0);
    },
    children: [/* @__PURE__ */ x(De, {
      value: "underline",
      children: /* @__PURE__ */ x(Lk, {})
    }), /* @__PURE__ */ x(De, {
      value: "linethrough",
      children: /* @__PURE__ */ x(Fk, {})
    }), /* @__PURE__ */ x(De, {
      value: "italic",
      children: /* @__PURE__ */ x(zk, {})
    })]
  });
}
function Uk() {
  const t = oe((e) => e.objects.active.editableProps.textAlign);
  return /* @__PURE__ */ ie(to, {
    size: "xs",
    variant: "outline",
    radius: "rounded",
    value: t,
    onChange: (e) => {
      I().objects.setValues({
        textAlign: e
      }), O().setDirty(!0);
    },
    children: [/* @__PURE__ */ x(De, {
      value: "left",
      children: /* @__PURE__ */ x(jk, {})
    }), /* @__PURE__ */ x(De, {
      value: "center",
      children: /* @__PURE__ */ x(Nk, {})
    }), /* @__PURE__ */ x(De, {
      value: "right",
      children: /* @__PURE__ */ x(Bk, {})
    })]
  });
}
function Wk({
  children: t,
  className: e
}) {
  const {
    selectedTab: i,
    isLazy: r
  } = Fe(Pn), s = Pi.toArray(t).filter((g) => !!g);
  let f;
  if (r) {
    const g = s[i];
    f = Ht(g) ? ct(s[i], {
      index: i
    }) : null;
  } else
    f = s.map((g, l) => {
      if (Ht(g)) {
        const n = l === i;
        return ct(g, {
          index: l,
          "aria-hidden": !n,
          className: n ? g.props.className : ae(g.props.className, "hidden")
        });
      }
      return null;
    });
  return /* @__PURE__ */ x("div", {
    className: e,
    children: f
  });
}
function vi({
  className: t,
  children: e,
  index: i,
  ...r
}) {
  const {
    id: s
  } = Fe(Pn), [f, g] = Me(0), l = ge(null);
  return ci(() => {
    if (l != null && l.current) {
      const n = () => {
        const h = Jt(l.current, {
          tabbable: !0
        });
        g(h.nextNode() ? void 0 : 0);
      };
      n();
      const a = new MutationObserver(n);
      return a.observe(l.current, {
        subtree: !0,
        childList: !0,
        attributes: !0,
        attributeFilter: ["tabIndex", "disabled"]
      }), () => {
        a.disconnect();
      };
    }
  }, [l]), /* @__PURE__ */ x("div", {
    tabIndex: f,
    ref: l,
    id: `${s}-${i}-tabpanel`,
    "aria-labelledby": `${s}-${i}-tab`,
    className: ae(t, "focus-visible:outline-primary-light"),
    role: "tabpanel",
    ...r,
    children: e
  });
}
const Ph = [
  {
    type: "linear",
    coords: {
      x1: -80,
      y1: 0,
      x2: 80,
      y2: 0
    },
    colorStops: [
      { color: "#ffe47b", offset: 0 },
      { color: "rgb(111,154,211)", offset: 1 }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: 0,
      y1: -120,
      x2: 0,
      y2: 120
    },
    colorStops: [
      { color: "#ff4040", offset: 0 },
      { color: "#e6399b", offset: 1 }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: -90,
      y1: -90,
      x2: 90,
      y2: 90
    },
    colorStops: [
      { offset: 0, color: "rgb(166,111,213)" },
      { offset: 0.5, color: "rgba(106, 72, 215, 0.5)" },
      { offset: 1, color: "#200772" }
    ]
  },
  {
    type: "radial",
    coords: {
      r1: 100,
      r2: 10,
      x1: 0,
      y1: 0,
      x2: 0,
      y2: 0
    },
    colorStops: [
      { offset: 0, color: "#FF4F4F" },
      { offset: 1, color: "rgb(255, 239, 64)" }
    ]
  },
  {
    type: "radial",
    coords: {
      r1: 100,
      r2: 10,
      x1: 0,
      y1: 0,
      x2: 20,
      y2: 20
    },
    colorStops: [
      { offset: 0, color: "#ffe47b" },
      { offset: 0.5, color: "rgb(111,154,211)" },
      { offset: 1, color: "rgb(166,111,213)" }
    ]
  },
  {
    type: "radial",
    coords: {
      r1: 50,
      r2: 80,
      x1: 45,
      y1: 45,
      x2: 52,
      y2: 50
    },
    colorStops: [
      { offset: 0, color: "rgb(155, 237, 0)" },
      { offset: 1, color: "rgba(0, 164, 128,0.4)" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: -90,
      y1: -90,
      x2: 90,
      y2: 90
    },
    colorStops: [
      { offset: 0, color: "#9ecb2d" },
      { offset: 0.5, color: "#72aa00" },
      { offset: 1, color: "#bfd255" }
    ]
  },
  {
    type: "radial",
    coords: {
      r1: 100,
      r2: 50,
      x1: 30,
      y1: 0,
      x2: 0,
      y2: 0
    },
    colorStops: [
      { offset: 0, color: "#aebcbf" },
      { offset: 1, color: "#0a0809" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: -80,
      y1: 0,
      x2: 80,
      y2: 0
    },
    colorStops: [
      { offset: 0, color: "#ffffff" },
      { offset: 1, color: "#f6f6f6" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: 0,
      y1: -120,
      x2: 0,
      y2: 120
    },
    colorStops: [
      { offset: 0, color: "#fefcea" },
      { offset: 1, color: "#f1da36" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: -90,
      y1: -90,
      x2: 90,
      y2: 90
    },
    colorStops: [
      { offset: 0, color: "rgb(166,111,213)" },
      { offset: 0.5, color: "rgba(106, 72, 215, 0.5)" },
      { offset: 1, color: "#ff1a00" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: 0,
      y1: -120,
      x2: 0,
      y2: 120
    },
    colorStops: [
      { offset: 0, color: "#b7deed" },
      { offset: 1, color: "#21b4e2" }
    ]
  },
  {
    type: "linear",
    coords: {
      x1: -80,
      y1: 100,
      x2: 80,
      y2: -100
    },
    colorStops: [
      { offset: 0, color: "#ffe47b" },
      { offset: 1, color: "rgb(111,154,211)" }
    ]
  }
], Yk = me(/* @__PURE__ */ x("path", {
  d: "M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3 3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"
}), "TextureOutlined"), Gk = me(/* @__PURE__ */ x("path", {
  d: "M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"
}), "GradientOutlined"), Xk = me(/* @__PURE__ */ x("path", {
  d: "M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"
}), "AddPhotoAlternateOutlined");
function Ah({
  property: t
}) {
  const {
    trans: e
  } = $i(), i = oe((r) => r.objects.active.editableProps[t]);
  return /* @__PURE__ */ ie("div", {
    className: "flex items-center justify-center gap-14",
    children: [/* @__PURE__ */ x(Hi, {
      className: "flex-shrink-0",
      size: "xs",
      "aria-label": e({
        message: "Color"
      }),
      value: typeof i == "string" ? i : uc.fill,
      onChange: (r) => {
        I().objects.setValues({
          [t]: r
        }), O().setDirty(!0);
      }
    }), /* @__PURE__ */ x(Mh, {
      type: "gradient",
      property: t
    }), /* @__PURE__ */ x(Mh, {
      type: "texture",
      property: t
    })]
  });
}
function Mh({
  type: t,
  property: e
}) {
  const i = t === "texture" ? /* @__PURE__ */ x(Yk, {}) : /* @__PURE__ */ x(Gk, {});
  return /* @__PURE__ */ x(Rt, {
    children: /* @__PURE__ */ ie(lo, {
      type: "popover",
      children: [/* @__PURE__ */ x(Qe, {
        className: "flex-shrink-0",
        id: `${t}-panel-trigger`,
        variant: "outline",
        size: "xs",
        startIcon: i,
        endIcon: /* @__PURE__ */ x(rl, {}),
        children: /* @__PURE__ */ x("span", {
          className: "capitalize",
          children: t === "gradient" ? /* @__PURE__ */ x(ve, {
            message: "Gradient"
          }) : /* @__PURE__ */ x(ve, {
            message: "Texture"
          })
        })
      }), /* @__PURE__ */ x(co, {
        size: "auto",
        children: /* @__PURE__ */ x("div", {
          className: "grid gap-8 grid-cols-5-min-content p-10 bg-paper rounded shadow-md",
          children: /* @__PURE__ */ x(Kk, {
            property: e,
            type: t
          })
        })
      })]
    })
  });
}
function Kk({
  type: t,
  property: e
}) {
  const {
    close: i
  } = qg(), r = Array.from(Array(t === "gradient" ? Ph.length : 28).keys()), s = "w-56 h-56 bg border shadow-sm hover:scale-110", f = r.map((g) => {
    const l = gt(`images/${t}s/${g}.png`);
    return /* @__PURE__ */ x(Yt, {
      radius: "rounded",
      className: s,
      style: {
        backgroundImage: `url(${l})`
      },
      "aria-label": `Select ${t} #${g}`,
      onClick: async () => {
        i();
        const n = t === "gradient" ? new ye.fabric.Gradient(Ph[g]) : await sm(l);
        I().objects.setValues({
          [e]: n
        }), O().setDirty(!0);
      }
    }, g);
  });
  return t === "texture" && f.unshift(/* @__PURE__ */ x(qk, {
    property: e,
    className: s
  }, "upload-btn")), /* @__PURE__ */ x(Rt, {
    children: f
  });
}
function qk({
  className: t,
  property: e
}) {
  const {
    close: i
  } = qg();
  return /* @__PURE__ */ x(Yt, {
    radius: "rounded",
    className: t,
    "aria-label": "Upload an image",
    onClick: async () => {
      const r = await I().import.openUploadWindow();
      if (i(), r) {
        const s = await sm(await r.data);
        I().objects.setValues({
          [e]: s
        });
      }
    },
    children: /* @__PURE__ */ x(Xk, {
      className: "icon-md"
    })
  });
}
function sm(t) {
  return new Promise((e) => {
    ye.fabric.util.loadImage(t, (i) => {
      const r = new ye.fabric.Pattern({
        source: i,
        repeat: "repeat"
      });
      e(r);
    });
  });
}
function Zk() {
  const t = oe((e) => e.objects.active.editableProps.opacity);
  return /* @__PURE__ */ x(Ui, {
    className: "max-w-240 w-full mx-auto",
    "aria-label": "Opacity",
    value: t,
    minValue: 0.1,
    step: 0.1,
    maxValue: 1,
    onChange: (e) => {
      I().objects.setValues({
        opacity: e
      }), O().setDirty(!0);
    }
  });
}
function Jk() {
  const {
    trans: t
  } = $i(), e = oe((r) => r.objects.active.editableProps.stroke), i = oe((r) => r.objects.active.editableProps.strokeWidth);
  return /* @__PURE__ */ ie("div", {
    className: "flex items-center gap-40",
    children: [/* @__PURE__ */ x(Hi, {
      className: "ml-auto flex-shrink-0",
      size: "xs",
      value: e,
      "aria-label": t({
        message: "Outline Color"
      }),
      onChange: (r) => {
        I().objects.setValues({
          stroke: r
        }), O().setDirty(!0);
      }
    }), /* @__PURE__ */ x(Ui, {
      "aria-label": "Outline Width",
      className: "max-w-240 mr-auto flex-shrink-0",
      value: i,
      onChange: (r) => {
        I().objects.setValues({
          strokeWidth: r
        }), O().setDirty(!0);
      }
    })]
  });
}
const Qk = me(/* @__PURE__ */ x("path", {
  d: "M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"
}), "ImageOutlined");
function eO() {
  return /* @__PURE__ */ x("div", {
    className: "flex justify-center",
    children: /* @__PURE__ */ x(Qe, {
      type: "button",
      variant: "outline",
      size: "xs",
      startIcon: /* @__PURE__ */ x(Qk, {}),
      radius: "rounded-full",
      onClick: async () => {
        const t = await I().import.openUploadWindow();
        if (t) {
          const e = I().objects.getActive();
          if (e && "setSrc" in e) {
            const i = await t.data;
            e.setSrc(i, () => {
              kp({
                src: i
              }), I().canvas.render();
            });
          }
        }
      },
      children: /* @__PURE__ */ x(ve, {
        message: "Replace Image"
      })
    })
  });
}
const om = {
  color: "rgba(0, 0, 0, 0.6)",
  blur: 3,
  offsetX: -1,
  offsetY: 0
};
function tO() {
  const {
    trans: t
  } = $i(), e = oe((i) => i.objects.active.editableProps.shadow) || om;
  return /* @__PURE__ */ ie("div", {
    className: "flex items-center gap-40",
    children: [/* @__PURE__ */ x(Hi, {
      className: "ml-auto flex-shrink-0",
      value: e.color,
      size: "xs",
      "aria-label": t({
        message: "Shadow Color"
      }),
      onChange: (i) => {
        I().objects.setValues({
          shadow: Dh({
            color: i
          })
        }), O().setDirty(!0);
      }
    }), /* @__PURE__ */ x(Ui, {
      "aria-label": "Shadow Blur",
      className: "max-w-240 mr-auto flex-shrink-0",
      defaultValue: e.blur,
      onChange: (i) => {
        I().objects.setValues({
          shadow: Dh({
            blur: i
          })
        }), O().setDirty(!0);
      }
    })]
  });
}
function Dh(t) {
  var i;
  const e = (i = I().objects.getActive()) == null ? void 0 : i.shadow;
  return e ? (Object.entries(t).forEach(([r, s]) => {
    e[r] = s;
  }), e) : new ye.fabric.Shadow({
    ...om,
    ...t
  });
}
function bi({
  index: t,
  className: e,
  isDisabled: i,
  children: r,
  padding: s,
  elementType: f = "button",
  to: g,
  relative: l
}) {
  const {
    selectedTab: n,
    setSelectedTab: a,
    tabsRef: h,
    size: o = "md",
    id: u
  } = Fe(Pn), c = t === n, d = qC(), m = s || (o === "sm" ? "px-12" : "px-18"), p = ae("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors", "focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap min-w-min", iO({
    isDisabled: i,
    isSelected: c
  }), e, o === "md" && `${m} h-48`, o === "sm" && `${m} h-32`, !i && "cursor-pointer"), v = (w) => {
    switch (w.key) {
      case "ArrowLeft":
        d.focusPrevious();
        break;
      case "ArrowRight":
        d.focusNext();
        break;
      case "Home":
        d.focusFirst();
        break;
      case "End":
        d.focusLast();
        break;
    }
  }, b = c ? 0 : -1;
  return /* @__PURE__ */ x(f, {
    disabled: i,
    id: `${u}-${t}-tab`,
    "aria-controls": `${u}-${t}-tabpanel`,
    type: "button",
    role: "tab",
    "aria-selected": c,
    tabIndex: i ? void 0 : b,
    onKeyDown: v,
    onClick: () => {
      a(t);
    },
    to: g,
    relative: l,
    className: p,
    ref: (w) => {
      h.current && w && (h.current[t] = w);
    },
    children: r
  });
}
function iO({
  isDisabled: t,
  isSelected: e
}) {
  return t ? "text-disabled cursor-default" : e ? "text-primary" : "text-muted hover:text-main";
}
function am() {
  const t = oe((e) => e.objects.active);
  return /* @__PURE__ */ ie(Rk, {
    size: "sm",
    className: "pb-18 pt-6",
    children: [/* @__PURE__ */ ie(Ik, {
      center: !0,
      children: [t.isText && /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Font"
        })
      }), !t.isImage && /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Color"
        })
      }), !t.isImage && /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Background"
        })
      }), t.isImage && /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Image"
        })
      }), /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Opacity"
        })
      }), /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Outline"
        })
      }), /* @__PURE__ */ x(bi, {
        children: /* @__PURE__ */ x(ve, {
          message: "Shadow"
        })
      })]
    }), /* @__PURE__ */ ie(Wk, {
      className: "pt-16 h-50",
      children: [t.isText && /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(Vk, {})
      }, "font"), !t.isImage && /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(Ah, {
          property: "fill"
        })
      }), !t.isImage && /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(Ah, {
          property: "backgroundColor"
        })
      }), t.isImage && /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(eO, {})
      }), /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(Zk, {})
      }), /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(Jk, {})
      }), /* @__PURE__ */ x(vi, {
        children: /* @__PURE__ */ x(tO, {})
      })]
    })]
  });
}
function rO() {
  const e = !eo() && /* @__PURE__ */ x(Qe, {
    size: "sm",
    color: "primary",
    variant: "outline",
    onClick: () => {
      I().text.add(), O().setDirty(!0);
    },
    children: /* @__PURE__ */ x(ve, {
      message: "New Text"
    })
  });
  return /* @__PURE__ */ x(Qc, {
    actionBtn: e,
    children: /* @__PURE__ */ x(am, {})
  });
}
const nO = me(/* @__PURE__ */ x("path", {
  d: "m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"
}), "ArrowDownwardOutlined"), Ih = 500, It = {};
let Rr = !1, zt = null, yi = null;
const Rh = (t) => {
  var e;
  for (const i in It)
    i !== t && ((e = It[i]) == null || e.call(It, !0), delete It[i]);
}, sO = qe(({
  children: t,
  label: e,
  placement: i = "top",
  offset: r = 10,
  variant: s = "neutral",
  delay: f = 1500,
  isDisabled: g,
  ...l
}, n) => {
  const {
    x: a,
    y: h,
    reference: o,
    floating: u,
    strategy: c,
    arrowRef: d,
    arrowStyle: m
  } = Yc({
    placement: i,
    offset: r,
    ref: n,
    showArrow: !0
  }), [p, v] = Me(!1), b = Ot(), y = ge(), w = () => {
    clearTimeout(y.current), y.current = void 0, Rh(b), It[b] = _, Rr = !0, v(!0), zt && (clearTimeout(zt), zt = null), yi && (clearTimeout(yi), yi = null);
  }, _ = Oe((k) => {
    k ? (clearTimeout(y.current), y.current = void 0, v(!1)) : y.current || (y.current = setTimeout(() => {
      y.current = void 0, v(!1);
    }, Ih)), zt && (clearTimeout(zt), zt = null), Rr && (yi && clearTimeout(yi), yi = setTimeout(() => {
      delete It[b], yi = null, Rr = !1;
    }, Ih));
  }, [b]), S = () => {
    Rh(b), It[b] = _, !p && !zt && !Rr ? zt = setTimeout(() => {
      zt = null, Rr = !0, w();
    }, f) : p || w();
  }, C = (k) => {
    !k && f > 0 && !y.current ? S() : w();
  };
  return Te(() => () => {
    clearTimeout(y.current), It[b] && delete It[b];
  }, [b]), Te(() => {
    const k = (R) => {
      R.key === "Escape" && _(!0);
    };
    if (p)
      return document.addEventListener("keydown", k, !0), () => {
        document.removeEventListener("keydown", k, !0);
      };
  }, [p, _]), /* @__PURE__ */ ie(Rt, {
    children: [ct(
      t,
      Wt({
        "aria-describedby": p ? b : void 0,
        ref: o,
        onPointerEnter: (k) => {
          k.pointerType === "mouse" && C();
        },
        onFocus: (k) => {
          k.target.matches(":focus-visible") && C(!0);
        },
        onPointerLeave: (k) => {
          k.pointerType === "mouse" && _();
        },
        onPointerDown: () => {
          _(!0);
        },
        onBlur: () => {
          _();
        }
      }, l)
    ), _t && Za(/* @__PURE__ */ x(Ut, {
      children: p && /* @__PURE__ */ ie(et.div, {
        ...qs,
        ref: u,
        id: b,
        role: "tooltip",
        onPointerEnter: () => {
          C(!0);
        },
        onPointerLeave: () => {
          _();
        },
        className: ae("rounded shadow px-8 py-4 text-xs break-words max-w-240 my-4 z-tooltip text-white", s === "positive" && "bg-positive", s === "danger" && "bg-danger", s === "neutral" && "bg-toast"),
        style: {
          position: c,
          top: h != null ? h : "",
          left: a != null ? a : ""
        },
        children: [/* @__PURE__ */ x("div", {
          ref: d,
          className: "absolute w-8 h-8 rotate-45 bg-inherit",
          style: m
        }), e]
      })
    }), _t)]
  });
});
function oO() {
  const t = oe((f) => f.activeToolOverlay), e = oe((f) => f.objects.active.id), i = aO(t, e), [r, s] = Me(!0);
  return /* @__PURE__ */ ie("div", {
    className: "relative z-tool-overlay text-sm",
    children: [i && /* @__PURE__ */ x("div", {
      className: ae("absolute right-16 text-muted z-50 transition-all", !r && "rotate-180", r ? "-top-144" : "-top-40"),
      children: /* @__PURE__ */ x(sO, {
        label: r ? /* @__PURE__ */ x(ve, {
          message: "Hide options"
        }) : /* @__PURE__ */ x(ve, {
          message: "Show options"
        }),
        children: /* @__PURE__ */ x(De, {
          variant: "outline",
          radius: "rounded-lg",
          size: "xs",
          onClick: () => {
            s(!r);
          },
          children: /* @__PURE__ */ x(nO, {})
        })
      })
    }), /* @__PURE__ */ x(Ut, {
      children: i && r && /* @__PURE__ */ x(et.div, {
        initial: {
          y: 0,
          opacity: 0
        },
        animate: {
          y: "-100%",
          opacity: 1
        },
        exit: {
          y: 0,
          opacity: 0
        },
        transition: {
          type: "tween",
          duration: 0.15
        },
        className: "absolute inset-x-0 gap-16 px-5vw bg bg-opacity-95 border-t",
        children: i
      }, "tool-controls-overlay")
    })]
  });
}
function aO(t, e) {
  switch (t) {
    case wt.Filter:
      return /* @__PURE__ */ x(Ak, {});
    case wt.Frame:
      return /* @__PURE__ */ x(Mk, {});
    case wt.Text:
      return e && /* @__PURE__ */ x(rO, {});
    case wt.ActiveObject:
      return e && /* @__PURE__ */ x(am, {});
    default:
      return null;
  }
}
const Ya = me(/* @__PURE__ */ x("path", {
  d: "M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"
}), "CancelOutlined");
function cO({
  filter: t
}) {
  const e = oe((g) => g.filter.applied.includes(t)), i = I().filter.hasOptions(t), r = ae("block flex-shrink-0 rounded", {
    "text-primary border-primary": e
  }), s = iS[t], f = /* @__PURE__ */ ie(Rt, {
    children: [/* @__PURE__ */ ie("div", {
      className: "relative",
      children: [/* @__PURE__ */ x(lO, {
        filter: t
      }), e && /* @__PURE__ */ x(uO, {
        filter: t,
        hasOptions: i
      })]
    }), /* @__PURE__ */ x("div", {
      className: "mt-4 text-center text-xs capitalize",
      children: s ? /* @__PURE__ */ x(ve, {
        ...s
      }) : t
    })]
  });
  return e && i ? /* @__PURE__ */ x("div", {
    className: r,
    children: f
  }) : /* @__PURE__ */ x(Yt, {
    className: r,
    onClick: () => {
      e ? I().filter.remove(t) : I().filter.apply(t);
    },
    children: f
  });
}
function lO({
  filter: t
}) {
  const e = oe((r) => r.filter.selected === t), i = ae("m-auto w-96 h-56 border rounded object-cover", {
    shadow: e
  });
  return /* @__PURE__ */ x("img", {
    src: gt(`images/filter/${t}.jpg`),
    className: i,
    alt: ""
  });
}
function uO({
  filter: t,
  hasOptions: e
}) {
  return /* @__PURE__ */ ie("div", {
    className: "flex items-center justify-center bg-background/70 absolute inset-0 border-2 border-primary rounded",
    children: [e ? /* @__PURE__ */ x(De, {
      color: "primary",
      size: "md",
      onClick: () => {
        I().filter.remove(t);
      },
      children: /* @__PURE__ */ x(Ya, {})
    }) : /* @__PURE__ */ x(Ya, {
      className: "svg-icon icon-md"
    }), e && /* @__PURE__ */ x(hO, {
      filter: t,
      hasOptions: e
    })]
  });
}
function hO({
  filter: t,
  hasOptions: e
}) {
  return /* @__PURE__ */ x(De, {
    color: "primary",
    size: "md",
    onClick: () => {
      O().activeToolOverlay === wt.Filter && O().filter.selected === t ? O().setActiveTool(O().activeTool, null) : O().filter.select(t, e);
    },
    children: /* @__PURE__ */ x(Vf, {})
  });
}
const Wi = qe(({
  children: t,
  className: e,
  gap: i = "gap-10"
}, r) => {
  const s = ue.Children.map(t, (f, g) => ue.isValidElement(f) ? ue.cloneElement(f, {
    isFirst: g === 0,
    isLast: ue.Children.count(t) === g + 1
  }) : f);
  return /* @__PURE__ */ x("div", {
    ref: r,
    className: ae("tiny-scrollbar pb-4 overflow-x-auto relative flex items-center", i, e),
    children: s
  });
});
function Vt({
  isFirst: t,
  isLast: e,
  children: i,
  className: r
}) {
  const s = ae(r, "flex-shrink-0", {
    "ml-auto": t,
    "mr-auto": e
  });
  return /* @__PURE__ */ x("div", {
    className: s,
    children: i
  });
}
function fO() {
  const t = oe((i) => {
    var r, s;
    return (s = (r = i.config.tools) == null ? void 0 : r.filter) == null ? void 0 : s.items;
  }) || [];
  Te(() => {
    I().filter.syncState();
  }, []);
  const e = t.map((i) => /* @__PURE__ */ x(Vt, {
    children: /* @__PURE__ */ x(cO, {
      filter: i
    })
  }, i));
  return /* @__PURE__ */ x(Wi, {
    children: e
  });
}
const dO = me(/* @__PURE__ */ x("path", {
  d: "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"
}), "LockOutlined"), pO = me(/* @__PURE__ */ x("path", {
  d: "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"
}), "LockOpenOutlined"), gO = me(/* @__PURE__ */ x("path", {
  d: "M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"
}), "CheckBoxOutlineBlankOutlined"), mO = me(/* @__PURE__ */ x("path", {
  d: "M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
}), "CheckBox"), Lh = me(/* @__PURE__ */ x("path", {
  d: "M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"
}), "CheckBox"), vO = qe((t, e) => {
  const {
    size: i = "md",
    children: r,
    className: s,
    icon: f,
    checkedIcon: g,
    disabled: l,
    isIndeterminate: n,
    errorMessage: a,
    invalid: h,
    orientation: o = "horizontal",
    onChange: u,
    autoFocus: c,
    required: d,
    value: m,
    name: p,
    inputTestId: v
  } = t, b = Vi({
    ...t,
    label: r
  }), y = f || gO, w = g || (n ? Lh : mO), _ = Ni(e);
  ol({
    autoFocus: c
  }, _), Te(() => {
    _.current && (_.current.indeterminate = n || !1);
  });
  const [S, C] = Ii(t.checked, t.defaultChecked || !1), k = Oe((K) => {
    u == null || u(K), C(K.target.checked);
  }, [u, C]), R = ae("select-none", s, h && "text-danger", !h && l && "text-disabled");
  let B, N = h ? "text-danger" : null;
  return n ? (B = Lh, N = N || "text-primary") : S ? (B = w, N = N || "text-primary") : (B = y, N = N || "text-muted"), /* @__PURE__ */ ie("div", {
    children: [/* @__PURE__ */ x("label", {
      className: R,
      children: /* @__PURE__ */ ie("div", {
        className: ae("relative flex items-center", o === "vertical" && "flex-col flex-col-reverse"),
        children: [/* @__PURE__ */ x("input", {
          className: "focus-visible:ring ring-inset transition-shadow outline-none absolute left-0 top-0 w-24 h-24 rounded appearance-none",
          type: "checkbox",
          "aria-checked": n ? "mixed" : S,
          "aria-invalid": h || void 0,
          onChange: k,
          ref: _,
          required: d,
          disabled: l,
          value: m,
          name: p,
          "data-testid": v
        }), /* @__PURE__ */ x(B, {
          size: i,
          className: ae("pointer-events-none", l ? "text-disabled" : N)
        }), r && /* @__PURE__ */ x("div", {
          className: ae("first-letter:capitalize", b.size.font, o === "vertical" ? "mb-6" : "ml-6"),
          children: r
        })]
      })
    }), a && /* @__PURE__ */ x("div", {
      className: b.error,
      children: a
    })]
  });
});
function bO() {
  const {
    trans: t
  } = $i(), {
    minWidth: e = 50,
    minHeight: i = 50,
    maxHeight: r = 2400,
    maxWidth: s = 2400
  } = oe((o) => {
    var u;
    return (u = o.config.tools) == null ? void 0 : u.resize;
  }) || {}, f = oe((o) => o.original), g = oe((o) => o.resize.formValue);
  Te(() => {
    O().resize.setFormValue({
      ...f
    });
  }, [f]), Te(() => {
    O().setDirty(!0);
  }, []);
  const l = (o) => {
    const u = {
      ...g,
      width: o
    };
    g.maintainAspect && (u.height = ys(o, g.usePercentages)), O().resize.setFormValue(u);
  }, n = (o) => {
    const u = {
      ...g,
      height: o
    };
    o && g.maintainAspect && (u.width = ka(o, g.usePercentages)), O().resize.setFormValue(u);
  }, a = (o) => {
    const u = {
      ...g,
      maintainAspect: o
    };
    o && (u.height = ys(u.width, u.usePercentages)), O().resize.setFormValue(u);
  };
  return /* @__PURE__ */ ie("form", {
    className: "flex items-center justify-center gap-16 w-full",
    onSubmit: (o) => {
      o.preventDefault(), O().applyChanges();
    },
    children: [/* @__PURE__ */ x(Fi, {
      type: "number",
      min: e,
      max: s,
      size: "sm",
      className: "w-full max-w-112",
      label: /* @__PURE__ */ x(ve, {
        message: "Width"
      }),
      value: g.width,
      onChange: (o) => {
        l(o.target.valueAsNumber);
      }
    }), /* @__PURE__ */ x("div", {
      className: "mt-24",
      children: /* @__PURE__ */ x(vO, {
        size: "md",
        checked: g.maintainAspect,
        onChange: (o) => {
          a(!g.maintainAspect);
        },
        "aria-label": t({
          message: "Maintain aspect ratio"
        }),
        checkedIcon: dO,
        icon: pO
      })
    }), /* @__PURE__ */ x(Fi, {
      type: "number",
      min: i,
      max: r,
      size: "sm",
      className: "w-full max-w-112",
      label: /* @__PURE__ */ x(ve, {
        message: "Height"
      }),
      value: g.height,
      onChange: (o) => {
        n(o.target.valueAsNumber);
      }
    }), /* @__PURE__ */ x("button", {
      type: "submit",
      className: "hidden",
      children: /* @__PURE__ */ x(ve, {
        message: "Resize"
      })
    })]
  });
}
function yO() {
  var s;
  const t = oe((f) => {
    var g, l;
    return (l = (g = f.config.tools) == null ? void 0 : g.crop) == null ? void 0 : l.presets;
  }) || [], e = oe((f) => f.crop.selectedAspectRatio), i = (s = oe((f) => {
    var g, l;
    return (l = (g = f.config.tools) == null ? void 0 : g.crop) == null ? void 0 : l.allowCustomRatio;
  })) != null ? s : !0, r = t.filter((f) => f.ratio || !f.ratio && i).map((f) => /* @__PURE__ */ x(Vt, {
    children: /* @__PURE__ */ ie(Yt, {
      onClick: () => I().crop.resetCropzone(f.ratio),
      className: "flex flex-col items-center justify-between cursor-pointer h-56",
      children: [/* @__PURE__ */ x(wO, {
        preset: f,
        selectedRatio: e
      }), /* @__PURE__ */ x(xO, {
        preset: f,
        selectedRatio: e
      })]
    })
  }, f.ratio || f.name));
  return /* @__PURE__ */ x(Wi, {
    gap: "gap-18",
    children: r
  });
}
function wO({
  preset: t,
  selectedRatio: e
}) {
  let i = 40, r = 30;
  if (t.ratio) {
    const f = jc(t.ratio);
    ({
      width: i,
      height: r
    } = Bc(f, i, r));
  }
  const s = ae("border-2", {
    "border-dotted": t.ratio === null,
    "border-primary": e === t.ratio
  });
  return /* @__PURE__ */ x("div", {
    style: {
      width: `${i}px`,
      height: `${r}px`
    },
    className: s
  });
}
function xO({
  preset: t,
  selectedRatio: e
}) {
  const i = ae("mt-4 text-center text-xs", {
    "text-primary": e === t.ratio
  });
  return /* @__PURE__ */ x("div", {
    className: i,
    children: t.name || t.ratio
  });
}
const Fh = me(/* @__PURE__ */ x("path", {
  d: "M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"
}), "FlipOutlined");
function _O() {
  return /* @__PURE__ */ ie("div", {
    children: [/* @__PURE__ */ x(De, {
      size: "sm",
      onClick: () => {
        I().transform.flip("vertical"), O().setDirty(!0);
      },
      children: /* @__PURE__ */ x(Fh, {})
    }), /* @__PURE__ */ x(De, {
      size: "sm",
      onClick: () => {
        I().transform.flip("horizontal"), O().setDirty(!0);
      },
      children: /* @__PURE__ */ x(Fh, {
        className: "rotate-90"
      })
    })]
  });
}
const SO = me(/* @__PURE__ */ x("path", {
  d: "M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"
}), "RotateLeftOutlined"), CO = me(/* @__PURE__ */ x("path", {
  d: "M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"
}), "RotateRightOutlined");
function TO() {
  return /* @__PURE__ */ ie("div", {
    children: [/* @__PURE__ */ x(De, {
      size: "sm",
      onClick: () => {
        I().transform.rotateLeft(), O().setDirty(!0);
      },
      children: /* @__PURE__ */ x(SO, {})
    }), /* @__PURE__ */ x(De, {
      size: "sm",
      onClick: () => {
        I().transform.rotateRight(), O().setDirty(!0);
      },
      children: /* @__PURE__ */ x(CO, {})
    })]
  });
}
function EO() {
  return /* @__PURE__ */ ie("div", {
    className: "flex items-center justify-center gap-16",
    children: [/* @__PURE__ */ x(_O, {}), /* @__PURE__ */ x(kO, {}), /* @__PURE__ */ x(TO, {})]
  });
}
function kO() {
  const t = ge(null), {
    domProps: e,
    groupId: i,
    thumbIds: r,
    trackRef: s,
    getThumbValueLabel: f
  } = Jg({
    minValue: -45,
    maxValue: 45,
    step: 1,
    defaultValue: [O().crop.straightenAngle],
    onChange: (g) => {
      const l = g[0];
      I().transform.straighten(l), O().crop.setTransformAngle(l), O().setDirty(!0), t.current.style.transform = `translateX(${l}px)`;
    }
  });
  return /* @__PURE__ */ x("div", {
    id: i,
    role: "group",
    className: "flex-auto flex-shrink-0 max-w-320 touch-none isolate",
    children: /* @__PURE__ */ ie("div", {
      ...e,
      ref: s,
      className: "h-36 relative",
      children: [/* @__PURE__ */ ie("output", {
        htmlFor: r[0],
        "aria-live": "off",
        className: "absolute left-1/2 top-1/2 w-40 text-center bg -translate-x-1/2 -translate-y-1/2 z-10",
        children: [f(0), "\xB0"]
      }), /* @__PURE__ */ x(OO, {
        ref: t
      })]
    })
  });
}
const OO = ue.forwardRef((t, e) => {
  const i = [...Array(80).keys()], r = i.map((s) => /* @__PURE__ */ x("circle", {
    cx: 2 + s * 10,
    cy: "20",
    r: s % 5 ? 0.75 : 2
  }, s));
  return /* @__PURE__ */ x("div", {
    className: "relative h-full cursor-pointer overflow-hidden",
    children: /* @__PURE__ */ x("svg", {
      ref: e,
      style: {
        width: i.length * 10
      },
      className: "absolute -left-80 h-full fill-current",
      xmlns: "http://www.w3.org/2000/svg",
      "aria-hidden": "true",
      focusable: "false",
      children: r
    })
  });
});
function PO() {
  return Te(() => (O().setDirty(!0), I().frame.active.hide(), () => {
    I().frame.active.show();
  }), []), /* @__PURE__ */ ie("div", {
    className: "pb-16",
    children: [/* @__PURE__ */ x("div", {
      className: "mb-10",
      children: /* @__PURE__ */ x(EO, {})
    }), /* @__PURE__ */ x(yO, {})]
  });
}
const AO = me(/* @__PURE__ */ x("path", {
  d: "M 16 6 C 12.484375 6 9.273438 7.070313 6.90625 8.84375 C 4.539063 10.617188 3 13.15625 3 16 C 3 18.84375 4.539063 21.382813 6.90625 23.15625 C 9.273438 24.929688 12.484375 26 16 26 C 19.515625 26 22.726563 24.929688 25.09375 23.15625 C 27.460938 21.382813 29 18.84375 29 16 C 29 13.15625 27.460938 10.617188 25.09375 8.84375 C 22.726563 7.070313 19.515625 6 16 6 Z M 16 8 C 19.109375 8 21.898438 8.957031 23.875 10.4375 C 25.851563 11.917969 27 13.875 27 16 C 27 18.125 25.851563 20.082031 23.875 21.5625 C 21.898438 23.042969 19.109375 24 16 24 C 12.890625 24 10.101563 23.042969 8.125 21.5625 C 6.148438 20.082031 5 18.125 5 16 C 5 13.875 6.148438 11.917969 8.125 10.4375 C 10.101563 8.957031 12.890625 8 16 8 Z "
})), MO = me(/* @__PURE__ */ x("path", {
  d: "M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z "
})), DO = me(/* @__PURE__ */ x("path", {
  d: "M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 24 L 5 24 Z "
})), IO = me(/* @__PURE__ */ x("path", {
  d: "M 16 4.90625 L 15.125 6.40625 L 4.71875 24.5 L 3.875 26 L 28.125 26 L 27.28125 24.5 L 16.875 6.40625 Z M 16 8.9375 L 24.65625 24 L 7.34375 24 Z "
}));
function RO() {
  const e = (oe((i) => {
    var r, s;
    return (s = (r = i.config.tools) == null ? void 0 : r.shapes) == null ? void 0 : s.items;
  }) || []).map((i) => /* @__PURE__ */ x(Vt, {
    children: /* @__PURE__ */ x(De, {
      variant: "outline",
      radius: "rounded-2xl",
      size: "xl",
      onClick: () => {
        I().shape.addBasicShape(i.name), O().setDirty(!0);
      },
      children: /* @__PURE__ */ x(LO, {
        shape: i
      })
    })
  }, i.name));
  return /* @__PURE__ */ x(Wi, {
    children: e
  });
}
function LO({
  shape: t
}) {
  var e;
  return t.type === "Path" ? /* @__PURE__ */ x("svg", {
    className: "m-auto w-36 h-36",
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 -100 512 700",
    children: /* @__PURE__ */ x("path", {
      className: "fill-transparent stroke-current",
      d: (e = t.options) == null ? void 0 : e.path,
      strokeWidth: 25
    })
  }) : ue.cloneElement(FO[t.name], {
    className: "w-30 h-30"
  });
}
const FO = {
  circle: /* @__PURE__ */ x(MO, {
    viewBox: "0 0 32 32"
  }),
  square: /* @__PURE__ */ x(DO, {
    viewBox: "0 0 32 32"
  }),
  triangle: /* @__PURE__ */ x(IO, {
    viewBox: "0 0 32 32"
  }),
  ellipse: /* @__PURE__ */ x(AO, {
    viewBox: "0 0 32 32"
  })
};
/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Es() {
  return Es = Object.assign ? Object.assign.bind() : function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var i = arguments[e];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
    }
    return t;
  }, Es.apply(this, arguments);
}
/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ks() {
  return ks = Object.assign ? Object.assign.bind() : function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var i = arguments[e];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
    }
    return t;
  }, ks.apply(this, arguments);
}
/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Ki(t, e, i) {
  var r, s = (r = i.initialDeps) != null ? r : [], f;
  return function() {
    var g;
    i.key && i.debug != null && i.debug() && (g = Date.now());
    var l = t(), n = l.length !== s.length || l.some(function(d, m) {
      return s[m] !== d;
    });
    if (!n)
      return f;
    s = l;
    var a;
    if (i.key && i.debug != null && i.debug() && (a = Date.now()), f = e.apply(void 0, l), i.key && i.debug != null && i.debug()) {
      var h = Math.round((Date.now() - g) * 100) / 100, o = Math.round((Date.now() - a) * 100) / 100, u = o / 16, c = function(m, p) {
        for (m = String(m); m.length < p; )
          m = " " + m;
        return m;
      };
      console.info("%c\u23F1 " + c(o, 5) + " /" + c(h, 5) + " ms", `
            font-size: .6rem;
            font-weight: bold;
            color: hsl(` + Math.max(0, Math.min(120 - 120 * u, 120)) + "deg 100% 31%);", i == null ? void 0 : i.key);
    }
    return i == null || i.onChange == null || i.onChange(f), f;
  };
}
function Vo(t, e) {
  if (t === void 0)
    throw new Error("Unexpected undefined" + (e ? ": " + e : ""));
  return t;
}
var zO = function(e, i) {
  return Math.abs(e - i) < 1;
};
/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var BO = function(e) {
  return e;
}, jO = function(e) {
  for (var i = Math.max(e.startIndex - e.overscan, 0), r = Math.min(e.endIndex + e.overscan, e.count - 1), s = [], f = i; f <= r; f++)
    s.push(f);
  return s;
}, NO = function(e, i) {
  var r = e.scrollElement;
  if (!!r) {
    var s = function(l) {
      var n = l.width, a = l.height;
      i({
        width: Math.round(n),
        height: Math.round(a)
      });
    };
    s(r.getBoundingClientRect());
    var f = new ResizeObserver(function(g) {
      var l = g[0];
      if (l != null && l.borderBoxSize) {
        var n = l.borderBoxSize[0];
        if (n) {
          s({
            width: n.inlineSize,
            height: n.blockSize
          });
          return;
        }
      }
      s(r.getBoundingClientRect());
    });
    return f.observe(r, {
      box: "border-box"
    }), function() {
      f.unobserve(r);
    };
  }
}, VO = function(e, i) {
  var r = e.scrollElement;
  if (!!r) {
    var s = function() {
      i(r[e.options.horizontal ? "scrollLeft" : "scrollTop"]);
    };
    return s(), r.addEventListener("scroll", s, {
      passive: !0
    }), function() {
      r.removeEventListener("scroll", s);
    };
  }
}, $O = function(e, i, r) {
  if (i != null && i.borderBoxSize) {
    var s = i.borderBoxSize[0];
    if (s) {
      var f = Math.round(s[r.options.horizontal ? "inlineSize" : "blockSize"]);
      return f;
    }
  }
  return Math.round(e.getBoundingClientRect()[r.options.horizontal ? "width" : "height"]);
}, HO = function(e, i, r) {
  var s, f, g = i.adjustments, l = g === void 0 ? 0 : g, n = i.behavior, a = e + l;
  (s = r.scrollElement) == null || s.scrollTo == null || s.scrollTo((f = {}, f[r.options.horizontal ? "left" : "top"] = a, f.behavior = n, f));
}, UO = function(e) {
  var i = this;
  this.unsubs = [], this.scrollElement = null, this.isScrolling = !1, this.isScrollingTimeoutId = null, this.scrollToIndexTimeoutId = null, this.measurementsCache = [], this.itemSizeCache = /* @__PURE__ */ new Map(), this.pendingMeasuredCacheIndexes = [], this.scrollDirection = null, this.scrollAdjustments = 0, this.measureElementCache = /* @__PURE__ */ new Map(), this.observer = function() {
    var r = null, s = function() {
      return r || (typeof ResizeObserver < "u" ? r = new ResizeObserver(function(g) {
        g.forEach(function(l) {
          i._measureElement(l.target, l);
        });
      }) : null);
    };
    return {
      disconnect: function() {
        var g;
        return (g = s()) == null ? void 0 : g.disconnect();
      },
      observe: function(g) {
        var l;
        return (l = s()) == null ? void 0 : l.observe(g, {
          box: "border-box"
        });
      },
      unobserve: function(g) {
        var l;
        return (l = s()) == null ? void 0 : l.unobserve(g);
      }
    };
  }(), this.range = {
    startIndex: 0,
    endIndex: 0
  }, this.setOptions = function(r) {
    Object.entries(r).forEach(function(s) {
      var f = s[0], g = s[1];
      typeof g > "u" && delete r[f];
    }), i.options = ks({
      debug: !1,
      initialOffset: 0,
      overscan: 1,
      paddingStart: 0,
      paddingEnd: 0,
      scrollPaddingStart: 0,
      scrollPaddingEnd: 0,
      horizontal: !1,
      getItemKey: BO,
      rangeExtractor: jO,
      onChange: function() {
      },
      measureElement: $O,
      initialRect: {
        width: 0,
        height: 0
      },
      scrollMargin: 0,
      scrollingDelay: 150,
      indexAttribute: "data-index",
      initialMeasurementsCache: [],
      lanes: 1
    }, r);
  }, this.notify = function() {
    i.options.onChange == null || i.options.onChange(i);
  }, this.cleanup = function() {
    i.unsubs.filter(Boolean).forEach(function(r) {
      return r();
    }), i.unsubs = [], i.scrollElement = null;
  }, this._didMount = function() {
    return i.measureElementCache.forEach(i.observer.observe), function() {
      i.observer.disconnect(), i.cleanup();
    };
  }, this._willUpdate = function() {
    var r = i.options.getScrollElement();
    i.scrollElement !== r && (i.cleanup(), i.scrollElement = r, i._scrollToOffset(i.scrollOffset, {
      adjustments: void 0,
      behavior: void 0
    }), i.unsubs.push(i.options.observeElementRect(i, function(s) {
      var f = i.scrollRect;
      i.scrollRect = s, (i.options.horizontal ? s.width !== f.width : s.height !== f.height) && i.maybeNotify();
    })), i.unsubs.push(i.options.observeElementOffset(i, function(s) {
      i.scrollAdjustments = 0, i.scrollOffset !== s && (i.isScrollingTimeoutId !== null && (clearTimeout(i.isScrollingTimeoutId), i.isScrollingTimeoutId = null), i.isScrolling = !0, i.scrollDirection = i.scrollOffset < s ? "forward" : "backward", i.scrollOffset = s, i.maybeNotify(), i.isScrollingTimeoutId = setTimeout(function() {
        i.isScrollingTimeoutId = null, i.isScrolling = !1, i.scrollDirection = null, i.maybeNotify();
      }, i.options.scrollingDelay));
    })));
  }, this.getSize = function() {
    return i.scrollRect[i.options.horizontal ? "width" : "height"];
  }, this.memoOptions = Ki(function() {
    return [i.options.count, i.options.paddingStart, i.options.scrollMargin, i.options.getItemKey];
  }, function(r, s, f, g) {
    return i.pendingMeasuredCacheIndexes = [], {
      count: r,
      paddingStart: s,
      scrollMargin: f,
      getItemKey: g
    };
  }, {
    key: !1
  }), this.getFurthestMeasurement = function(r, s) {
    for (var f = /* @__PURE__ */ new Map(), g = /* @__PURE__ */ new Map(), l = s - 1; l >= 0; l--) {
      var n = r[l];
      if (!f.has(n.lane)) {
        var a = g.get(n.lane);
        if (a == null || n.end > a.end ? g.set(n.lane, n) : n.end < a.end && f.set(n.lane, !0), f.size === i.options.lanes)
          break;
      }
    }
    return g.size === i.options.lanes ? Array.from(g.values()).sort(function(h, o) {
      return h.end - o.end;
    })[0] : void 0;
  }, this.getMeasurements = Ki(function() {
    return [i.memoOptions(), i.itemSizeCache];
  }, function(r, s) {
    var f = r.count, g = r.paddingStart, l = r.scrollMargin, n = r.getItemKey, a = i.pendingMeasuredCacheIndexes.length > 0 ? Math.min.apply(Math, i.pendingMeasuredCacheIndexes) : 0;
    i.pendingMeasuredCacheIndexes = [];
    for (var h = i.measurementsCache.slice(0, a), o = a; o < f; o++) {
      var u = n(o), c = i.options.lanes === 1 ? h[o - 1] : i.getFurthestMeasurement(h, o), d = c ? c.end : g + l, m = s.get(u), p = typeof m == "number" ? m : i.options.estimateSize(o), v = d + p, b = c ? c.lane : o % i.options.lanes;
      h[o] = {
        index: o,
        start: d,
        size: p,
        end: v,
        key: u,
        lane: b
      };
    }
    return i.measurementsCache = h, h;
  }, {
    key: !1,
    debug: function() {
      return i.options.debug;
    }
  }), this.calculateRange = Ki(function() {
    return [i.getMeasurements(), i.getSize(), i.scrollOffset];
  }, function(r, s, f) {
    return i.range = WO({
      measurements: r,
      outerSize: s,
      scrollOffset: f
    });
  }, {
    key: !1,
    debug: function() {
      return i.options.debug;
    }
  }), this.maybeNotify = Ki(function() {
    var r = i.calculateRange();
    return [r.startIndex, r.endIndex, i.isScrolling];
  }, function() {
    i.notify();
  }, {
    key: !1,
    debug: function() {
      return i.options.debug;
    },
    initialDeps: [this.range.startIndex, this.range.endIndex, this.isScrolling]
  }), this.getIndexes = Ki(function() {
    return [i.options.rangeExtractor, i.calculateRange(), i.options.overscan, i.options.count];
  }, function(r, s, f, g) {
    return r(ks({}, s, {
      overscan: f,
      count: g
    }));
  }, {
    key: !1,
    debug: function() {
      return i.options.debug;
    }
  }), this.indexFromElement = function(r) {
    var s = i.options.indexAttribute, f = r.getAttribute(s);
    return f ? parseInt(f, 10) : (console.warn("Missing attribute name '" + s + "={index}' on measured element."), -1);
  }, this._measureElement = function(r, s) {
    var f, g = i.indexFromElement(r), l = i.measurementsCache[g];
    if (!!l) {
      var n = i.measureElementCache.get(l.key);
      if (!r.isConnected) {
        i.observer.unobserve(r), r === n && i.measureElementCache.delete(l.key);
        return;
      }
      n !== r && (n && i.observer.unobserve(n), i.observer.observe(r), i.measureElementCache.set(l.key, r));
      var a = i.options.measureElement(r, s, i), h = (f = i.itemSizeCache.get(l.key)) != null ? f : l.size, o = a - h;
      o !== 0 && (l.start < i.scrollOffset && i._scrollToOffset(i.scrollOffset, {
        adjustments: i.scrollAdjustments += o,
        behavior: void 0
      }), i.pendingMeasuredCacheIndexes.push(g), i.itemSizeCache = new Map(i.itemSizeCache.set(l.key, a)), i.notify());
    }
  }, this.measureElement = function(r) {
    !r || i._measureElement(r, void 0);
  }, this.getVirtualItems = Ki(function() {
    return [i.getIndexes(), i.getMeasurements()];
  }, function(r, s) {
    for (var f = [], g = 0, l = r.length; g < l; g++) {
      var n = r[g], a = s[n];
      f.push(a);
    }
    return f;
  }, {
    key: !1,
    debug: function() {
      return i.options.debug;
    }
  }), this.getVirtualItemForOffset = function(r) {
    var s = i.getMeasurements();
    return Vo(s[cm(0, s.length - 1, function(f) {
      return Vo(s[f]).start;
    }, r)]);
  }, this.getOffsetForAlignment = function(r, s) {
    var f = i.getSize();
    s === "auto" && (r <= i.scrollOffset ? s = "start" : r >= i.scrollOffset + f ? s = "end" : s = "start"), s === "start" ? r = r : s === "end" ? r = r - f : s === "center" && (r = r - f / 2);
    var g = i.options.horizontal ? "scrollWidth" : "scrollHeight", l = i.scrollElement ? "document" in i.scrollElement ? i.scrollElement.document.documentElement[g] : i.scrollElement[g] : 0, n = l - i.getSize();
    return Math.max(Math.min(n, r), 0);
  }, this.getOffsetForIndex = function(r, s) {
    s === void 0 && (s = "auto"), r = Math.max(0, Math.min(r, i.options.count - 1));
    var f = Vo(i.getMeasurements()[r]);
    if (s === "auto")
      if (f.end >= i.scrollOffset + i.getSize() - i.options.scrollPaddingEnd)
        s = "end";
      else if (f.start <= i.scrollOffset + i.options.scrollPaddingStart)
        s = "start";
      else
        return [i.scrollOffset, s];
    var g = s === "end" ? f.end + i.options.scrollPaddingEnd : f.start - i.options.scrollPaddingStart;
    return [i.getOffsetForAlignment(g, s), s];
  }, this.isDynamicMode = function() {
    return i.measureElementCache.size > 0;
  }, this.cancelScrollToIndex = function() {
    i.scrollToIndexTimeoutId !== null && (clearTimeout(i.scrollToIndexTimeoutId), i.scrollToIndexTimeoutId = null);
  }, this.scrollToOffset = function(r, s) {
    var f = s === void 0 ? {} : s, g = f.align, l = g === void 0 ? "start" : g, n = f.behavior;
    i.cancelScrollToIndex(), n === "smooth" && i.isDynamicMode() && console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."), i._scrollToOffset(i.getOffsetForAlignment(r, l), {
      adjustments: void 0,
      behavior: n
    });
  }, this.scrollToIndex = function(r, s) {
    var f = s === void 0 ? {} : s, g = f.align, l = g === void 0 ? "auto" : g, n = f.behavior;
    r = Math.max(0, Math.min(r, i.options.count - 1)), i.cancelScrollToIndex(), n === "smooth" && i.isDynamicMode() && console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");
    var a = i.getOffsetForIndex(r, l), h = a[0], o = a[1];
    i._scrollToOffset(h, {
      adjustments: void 0,
      behavior: n
    }), n !== "smooth" && i.isDynamicMode() && (i.scrollToIndexTimeoutId = setTimeout(function() {
      i.scrollToIndexTimeoutId = null;
      var u = i.measureElementCache.has(i.options.getItemKey(r));
      if (u) {
        var c = i.getOffsetForIndex(r, o), d = c[0];
        zO(d, i.scrollOffset) || i.scrollToIndex(r, {
          align: o,
          behavior: n
        });
      } else
        i.scrollToIndex(r, {
          align: o,
          behavior: n
        });
    }));
  }, this.scrollBy = function(r, s) {
    var f = s === void 0 ? {} : s, g = f.behavior;
    i.cancelScrollToIndex(), g === "smooth" && i.isDynamicMode() && console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."), i._scrollToOffset(i.scrollOffset + r, {
      adjustments: void 0,
      behavior: g
    });
  }, this.getTotalSize = function() {
    var r;
    return (((r = i.getMeasurements()[i.options.count - 1]) == null ? void 0 : r.end) || i.options.paddingStart) - i.options.scrollMargin + i.options.paddingEnd;
  }, this._scrollToOffset = function(r, s) {
    var f = s.adjustments, g = s.behavior;
    i.options.scrollToFn(r, {
      behavior: g,
      adjustments: f
    }, i);
  }, this.measure = function() {
    i.itemSizeCache = /* @__PURE__ */ new Map(), i.notify();
  }, this.setOptions(e), this.scrollRect = this.options.initialRect, this.scrollOffset = this.options.initialOffset, this.measurementsCache = this.options.initialMeasurementsCache, this.measurementsCache.forEach(function(r) {
    i.itemSizeCache.set(r.key, r.size);
  }), this.maybeNotify();
}, cm = function(e, i, r, s) {
  for (; e <= i; ) {
    var f = (e + i) / 2 | 0, g = r(f);
    if (g < s)
      e = f + 1;
    else if (g > s)
      i = f - 1;
    else
      return f;
  }
  return e > 0 ? e - 1 : 0;
};
function WO(t) {
  for (var e = t.measurements, i = t.outerSize, r = t.scrollOffset, s = e.length - 1, f = function(a) {
    return e[a].start;
  }, g = cm(0, s, f, r), l = g; l < s && e[l].end < r + i; )
    l++;
  return {
    startIndex: g,
    endIndex: l
  };
}
/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var YO = typeof document < "u" ? _e.useLayoutEffect : _e.useEffect;
function GO(t) {
  var e = _e.useReducer(function() {
    return {};
  }, {})[1], i = Es({}, t, {
    onChange: function(g) {
      e(), t.onChange == null || t.onChange(g);
    }
  }), r = _e.useState(function() {
    return new UO(i);
  }), s = r[0];
  return s.setOptions(i), _e.useEffect(function() {
    return s._didMount();
  }, []), YO(function() {
    return s._willUpdate();
  }), s;
}
function XO(t) {
  return GO(Es({
    observeElementRect: NO,
    observeElementOffset: VO,
    scrollToFn: HO
  }, t));
}
function lm() {
  const t = oe((e) => {
    var i;
    return (i = e.config.ui) == null ? void 0 : i.activeTheme;
  });
  return oe(
    (e) => {
      var i;
      return (((i = e.config.ui) == null ? void 0 : i.themes) || []).find((r) => r.name === t);
    }
  );
}
function KO({
  category: t
}) {
  const e = lm(), i = t.name, r = t.list ? t.list : Array.from(Array(t.items).keys()), s = ge(null), f = XO({
    horizontal: !0,
    count: r.length,
    getScrollElement: () => s.current,
    estimateSize: Oe(() => 52, []),
    overscan: 5
  });
  return Te(() => {
    f.scrollToIndex(0);
  }, [i]), /* @__PURE__ */ x(Rt, {
    children: /* @__PURE__ */ x("div", {
      ref: s,
      className: "tiny-scrollbar overflow-x-auto overflow-y-hidden",
      style: {
        height: "52px"
      },
      children: /* @__PURE__ */ x("div", {
        className: "h-full relative mx-auto",
        style: {
          width: `${f.getTotalSize()}px`
        },
        children: f.getVirtualItems().map((g) => {
          const l = `${r[g.index]}`;
          return /* @__PURE__ */ x("div", {
            className: "absolute top-0 left-0 h-full",
            style: {
              width: `${g.size}px`,
              transform: `translateX(${g.start}px)`
            },
            children: /* @__PURE__ */ x(Qe, {
              variant: "outline",
              radius: "rounded-xl",
              size: "md",
              equalWidth: !0,
              onClick: async () => {
                await I().shape.addSticker(t.name, l), O().setDirty(!0);
              },
              children: /* @__PURE__ */ x("img", {
                className: ae("m-auto m-auto w-28 h-28", t.invertPreview && (e == null ? void 0 : e.isDark) && "invert"),
                src: Oa(t, l),
                alt: l
              })
            })
          }, g.index);
        })
      })
    })
  });
}
function qO() {
  const t = oe((s) => {
    var f, g;
    return (g = (f = s.config.tools) == null ? void 0 : f.stickers) == null ? void 0 : g.items;
  }) || [], [e, i] = Me(t[0]), r = t.map((s) => {
    const f = e === s, g = Vb[s.name];
    return /* @__PURE__ */ x(Qe, {
      size: "xs",
      color: f ? "primary" : null,
      value: s,
      children: /* @__PURE__ */ x("span", {
        className: "capitalize",
        children: g ? /* @__PURE__ */ x(ve, {
          ...g
        }) : s.name
      })
    }, s.name);
  });
  return /* @__PURE__ */ ie("div", {
    className: "h-92",
    children: [/* @__PURE__ */ x(to, {
      value: e,
      onChange: (s) => i(s),
      className: "mb-10 w-full justify-center",
      variant: "outline",
      radius: "rounded-full",
      children: r
    }), e && /* @__PURE__ */ x(KO, {
      category: e
    })]
  });
}
function ZO() {
  const t = oe((r) => {
    var s, f;
    return (f = (s = r.config.tools) == null ? void 0 : s.frame) == null ? void 0 : f.items;
  }) || [], e = oe((r) => r.frame.active);
  Te(() => {
    O().frame.active && O().frame.showOptionsPanel();
  }, []);
  const i = t.map((r) => {
    const s = gt(`images/frames/${r.name}/thumbnail.png`), f = (e == null ? void 0 : e.name) === r.name;
    return /* @__PURE__ */ x(Vt, {
      children: /* @__PURE__ */ ie("button", {
        type: "button",
        className: `border-2 overflow-hidden relative rounded border cursor-pointer ${f ? "border-primary" : ""}`,
        onClick: () => {
          O().setDirty(!0), f ? I().frame.remove() : I().frame.add(r.name);
        },
        children: [f && /* @__PURE__ */ x(JO, {}), /* @__PURE__ */ x("img", {
          draggable: "false",
          className: "w-64 h-64",
          src: s,
          alt: r.name
        })]
      })
    }, r.name);
  });
  return /* @__PURE__ */ x(Wi, {
    children: i
  });
}
function JO() {
  return /* @__PURE__ */ x("span", {
    className: "bg-background/70 absolute inset-0 text-primary",
    children: /* @__PURE__ */ x(Ya, {
      className: "svg-icon icon-md absolute inset-0 block m-auto"
    })
  });
}
function QO() {
  const t = oe((i) => {
    var r, s;
    return (s = (r = i.config.tools) == null ? void 0 : r.text) == null ? void 0 : s.items;
  });
  Te(() => {
    t && Pp(t, {
      prefixSrc: gt,
      id: "photalius-fonts"
    }).catch(() => {
    });
  }, [t]), Te(() => {
    I().text.selectOrAddText() && O().setDirty(!0);
  }, []);
  const e = (t || []).map((i) => /* @__PURE__ */ x(Vt, {
    children: /* @__PURE__ */ x(eP, {
      fontConfig: i
    })
  }, i.family));
  return /* @__PURE__ */ x(Wi, {
    className: "pt-6",
    children: e
  });
}
function eP({
  fontConfig: t
}) {
  var r;
  const e = oe((s) => s.objects.active.editableProps.fontFamily), i = ae("block px-6 w-110 h-68 text-sm bg border rounded-2xl", {
    "border-primary": e === t.family,
    "text-primary": e === t.family
  });
  return /* @__PURE__ */ x("button", {
    type: "button",
    className: i,
    style: {
      fontFamily: t.family,
      fontWeight: ((r = t.descriptors) == null ? void 0 : r.weight) || "normal"
    },
    onClick: async () => {
      I().text.selectOrAddText(), O().setDirty(!0), I().objects.setValues({
        fontFamily: t.family
      });
    },
    children: t.family
  });
}
const tP = me(/* @__PURE__ */ x("path", {
  d: "M290.7 57.4L57.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H288h9.4H512c17.7 0 32-14.3 32-32s-14.3-32-32-32H387.9L518.6 285.3c25-25 25-65.5 0-90.5L381.3 57.4c-25-25-65.5-25-90.5 0zM297.4 416H288l-105.4 0-80-80L227.3 211.3 364.7 348.7 297.4 416z"
}), "EraserFA", "0 0 576 512");
function iP() {
  return Te(() => (I().draw.enable(), () => {
    I().draw.disable();
  }), []), /* @__PURE__ */ ie(Wi, {
    gap: "gap-16",
    className: "justify-center",
    children: [/* @__PURE__ */ x(Vt, {
      children: /* @__PURE__ */ x(Hi, {
        size: "sm",
        label: /* @__PURE__ */ x(ve, {
          message: "Brush Color"
        }),
        value: I().draw.currentBrush.color,
        onChange: (t) => {
          I().draw.setBrushColor(t);
        }
      })
    }), /* @__PURE__ */ x(Vt, {
      children: /* @__PURE__ */ x(nP, {})
    }), /* @__PURE__ */ x(Vt, {
      children: /* @__PURE__ */ x(rP, {})
    })]
  });
}
function rP() {
  const t = oe((r) => {
    var s, f;
    return (f = (s = r.config.tools) == null ? void 0 : s.draw) == null ? void 0 : f.brushSizes;
  }) || [], [e, i] = Me(I().draw.currentBrush.width);
  return /* @__PURE__ */ x(al, {
    selectionMode: "single",
    selectedValue: e,
    onSelectionChange: (r) => {
      i(r), I().draw.setBrushSize(r);
    },
    size: "sm",
    label: /* @__PURE__ */ x(ve, {
      message: "Brush Size"
    }),
    children: t.map((r) => /* @__PURE__ */ x(Ks, {
      value: r,
      children: /* @__PURE__ */ ie("div", {
        className: "flex items-center",
        children: [/* @__PURE__ */ x("div", {
          className: "flex-shrink-0 mr-8 border-[3px] rounded-full",
          style: {
            width: `${r}px`,
            height: `${r}px`
          }
        }), r]
      })
    }, r))
  });
}
function nP() {
  const t = oe((s) => {
    var f, g;
    return (g = (f = s.config.tools) == null ? void 0 : f.draw) == null ? void 0 : g.brushTypes;
  }) || [], e = lm(), [i, r] = Me(I().draw.currentBrush.type);
  return /* @__PURE__ */ x(al, {
    selectionMode: "single",
    selectedValue: i,
    onSelectionChange: (s) => {
      r(s), I().draw.setBrushType(s);
    },
    size: "sm",
    label: /* @__PURE__ */ x(ve, {
      message: "Brush Type"
    }),
    children: t.map((s) => /* @__PURE__ */ x(Ks, {
      value: s,
      children: /* @__PURE__ */ ie("div", {
        className: "flex items-center",
        children: [s === "EraserBrush" ? /* @__PURE__ */ x(tP, {
          className: "mr-8"
        }) : /* @__PURE__ */ x("img", {
          className: "flex-shrink-0 mr-8 w-24 h-24",
          src: sP(s, e == null ? void 0 : e.isDark),
          alt: ""
        }), /* @__PURE__ */ x(ve, {
          message: s.replace(/([A-Z])/g, " $1")
        })]
      })
    }, s))
  });
}
function sP(t, e = !1) {
  const i = t.replace("Brush", "").toLowerCase();
  return gt(`images/brushes/${e ? "white" : "black"}/${i}.png`);
}
function oP() {
  const {
    trans: t
  } = $i(), e = oe((i) => i.corners.radius);
  return Te(() => (O().setDirty(!0), I().corners.showPreview(), () => I().corners.hidePreview()), []), /* @__PURE__ */ x("div", {
    className: "max-w-320 mx-auto",
    children: /* @__PURE__ */ x(Ui, {
      minValue: 1,
      maxValue: 300,
      label: t({
        message: "Radius"
      }),
      getValueLabel: (i) => `${i}px`,
      onChange: (i) => {
        I().corners.updatePreview(i), O().corners.setRadius(i);
      },
      value: e
    })
  });
}
const um = {
  initial: { y: "130%", opacity: 0 },
  animate: { y: 0, opacity: 1 },
  exit: {
    y: "130%",
    opacity: 0,
    left: 0,
    position: "absolute",
    overflowY: "hidden"
  },
  transition: { type: "tween", duration: 0.15 }
};
function aP({
  activeTool: t
}) {
  const e = cP(t);
  return /* @__PURE__ */ x(et.div, {
    className: "relative h-full w-full text-sm bg select-none overflow-hidden",
    ...um,
    children: e
  });
}
function cP(t) {
  switch (t) {
    case Ae.FILTER:
      return /* @__PURE__ */ x(fO, {});
    case Ae.RESIZE:
      return /* @__PURE__ */ x(bO, {});
    case Ae.CROP:
      return /* @__PURE__ */ x(PO, {});
    case Ae.DRAW:
      return /* @__PURE__ */ x(iP, {});
    case Ae.TEXT:
      return /* @__PURE__ */ x(QO, {});
    case Ae.SHAPES:
      return /* @__PURE__ */ x(RO, {});
    case Ae.STICKERS:
      return /* @__PURE__ */ x(qO, {});
    case Ae.FRAME:
      return /* @__PURE__ */ x(ZO, {});
    case Ae.CORNERS:
      return /* @__PURE__ */ x(oP, {});
    default:
      return null;
  }
}
function zh({
  className: t
}) {
  const e = oe((i) => i.activeTool);
  return /* @__PURE__ */ x("nav", {
    className: ae("z-navbar min-h-86 flex-shrink-0 px-16 relative overflow-hidden", t),
    children: /* @__PURE__ */ x(Ut, {
      initial: !1,
      children: e ? /* @__PURE__ */ x(aP, {
        activeTool: e
      }, "tool-controls") : /* @__PURE__ */ x(lP, {}, "nav-items")
    })
  });
}
function lP() {
  const t = oe((e) => {
    var i, r;
    return (r = (i = e.config.ui) == null ? void 0 : i.nav) == null ? void 0 : r.items;
  }) || [];
  return /* @__PURE__ */ x(et.div, {
    className: "w-full h-full bg-inherit",
    ...um,
    children: /* @__PURE__ */ x(Wi, {
      children: t.map((e) => /* @__PURE__ */ x(Vt, {
        children: /* @__PURE__ */ x(uP, {
          item: e
        })
      }, e.name))
    })
  });
}
function uP({
  item: t
}) {
  const e = () => {
    typeof t.action == "string" ? bc(t.action) : typeof t.action == "function" && t.action(O().editor);
  }, i = sy[t.name];
  return /* @__PURE__ */ ie(Yt, {
    variant: "outline",
    color: "paper",
    className: "flex-col flex-shrink-0 w-68 h-68",
    radius: "rounded-2xl",
    onClick: e,
    children: [/* @__PURE__ */ x("div", {
      className: "mb-1",
      children: /* @__PURE__ */ x(Zc, {
        className: "icon-md",
        icon: t.icon
      })
    }), /* @__PURE__ */ x("div", {
      className: "mt-6 text-xs capitalize max-w-[90%] overflow-hidden overflow-ellipsis",
      children: i ? /* @__PURE__ */ x(ve, {
        ...i
      }) : t.name
    })]
  });
}
function hP() {
  const t = oe((i) => i.history.items), e = oe((i) => i.history.pointer);
  return /* @__PURE__ */ ie(et.div, {
    ...qs,
    className: "absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",
    children: [/* @__PURE__ */ ie("div", {
      className: "px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",
      children: [/* @__PURE__ */ x(ve, {
        message: "History"
      }), /* @__PURE__ */ x(De, {
        size: "xs",
        className: "ml-auto flex-shrink-0",
        onClick: () => {
          O().togglePanel("history", !1);
        },
        children: /* @__PURE__ */ x(hi, {})
      })]
    }), /* @__PURE__ */ x("div", {
      className: "p-10",
      children: t.map((i) => {
        const r = i.id === t[e].id, s = Kt[i.name], f = s.icon && ue.createElement(s.icon, {
          className: "icon-sm"
        });
        return /* @__PURE__ */ x(Qe, {
          onClick: () => {
            r || I().history.load(i);
          },
          variant: "outline",
          color: r ? "primary" : null,
          size: "sm",
          className: ae("w-full mb-8", r && "pointer-events-none"),
          justify: "justify-start",
          startIcon: f,
          children: /* @__PURE__ */ x(ve, {
            ...s.name
          })
        }, i.id);
      })
    })]
  });
}
function fP(t) {
  const {
    children: e,
    className: i,
    color: r,
    onDismiss: s,
    leftAdornment: f,
    rightAdornment: g,
    hideDismissButton: l = !1,
    size: n,
    showDivider: a,
    titleTextSize: h = n === "xs" ? "text-xs" : "text-sm",
    closeButtonSize: o = n === "xs" ? "xs" : "sm"
  } = t, {
    labelId: u,
    isDismissable: c,
    close: d
  } = Fe(ao);
  return /* @__PURE__ */ ie("div", {
    className: ae(i, "flex items-center justify-between gap-10 flex-shrink-0", a && "border-b", dP(t), r || "text-main"),
    children: [f, /* @__PURE__ */ x("h3", {
      id: u,
      className: ae(i, h, "font-semibold leading-5 opacity-90"),
      children: e
    }), g, c && !l && /* @__PURE__ */ x(De, {
      "aria-label": "Dismiss",
      onClick: () => {
        s ? s() : d();
      },
      size: o,
      className: ae("text-muted ml-auto -mr-8", g && "sr-only"),
      children: /* @__PURE__ */ x(hi, {})
    })]
  });
}
function dP({
  size: t,
  padding: e
}) {
  if (e)
    return e;
  switch (t) {
    case "2xs":
    case "xs":
      return "px-14 py-4";
    case "sm":
      return "px-18 py-4";
    default:
      return "px-24 py-6";
  }
}
const hm = qe((t, e) => {
  const {
    children: i,
    className: r,
    padding: s,
    size: f,
    ...g
  } = t;
  return /* @__PURE__ */ x("div", {
    ...g,
    ref: e,
    className: ae(r, pP(t), "overflow-y-auto overflow-x-hidden text-sm flex-auto"),
    children: i
  });
});
function pP({
  size: t,
  padding: e
}) {
  if (e)
    return e;
  switch (t) {
    case "xs":
      return "p-14";
    case "sm":
      return "p-18";
    default:
      return "px-24 py-20";
  }
}
function gP() {
  const t = oe((e) => e.openPanels.newImage);
  return /* @__PURE__ */ x(lo, {
    isOpen: t,
    disableInitialTransition: !0,
    type: "modal",
    isDismissable: !1,
    children: /* @__PURE__ */ x(mP, {})
  });
}
function mP() {
  const [t, e] = Me("default");
  return /* @__PURE__ */ ie(co, {
    className: "text-center max-w-max",
    size: "auto",
    children: [/* @__PURE__ */ x(fP, {
      padding: "px-24 pt-24 pb-12",
      showDivider: !1,
      children: /* @__PURE__ */ x(ve, {
        message: "Open a photo or design to get started"
      })
    }), /* @__PURE__ */ x(hm, {
      children: t === "default" ? /* @__PURE__ */ x(vP, {
        setActivePanel: e
      }) : /* @__PURE__ */ x(yP, {
        setActivePanel: e
      })
    })]
  });
}
function vP({
  setActivePanel: t
}) {
  return /* @__PURE__ */ ie(rs, {
    children: [/* @__PURE__ */ x(Qe, {
      className: "mr-20",
      size: "sm",
      variant: "raised",
      color: "primary",
      onClick: () => {
        I().import.uploadAndReplaceMainImage();
      },
      children: /* @__PURE__ */ x(ve, {
        message: "Open Photo"
      })
    }), /* @__PURE__ */ x(Qe, {
      variant: "outline",
      size: "sm",
      color: "primary",
      onClick: () => {
        t("newCanvas");
      },
      children: /* @__PURE__ */ x(ve, {
        message: "Create New"
      })
    }), /* @__PURE__ */ x(bP, {})]
  });
}
function bP() {
  const t = oe((e) => {
    var i, r;
    return (r = (i = e.config.ui) == null ? void 0 : i.openImageDialog) == null ? void 0 : r.sampleImages;
  });
  return t != null && t.length ? /* @__PURE__ */ ie(rs, {
    children: [/* @__PURE__ */ ie("div", {
      className: "relative py-20",
      children: [/* @__PURE__ */ x("hr", {
        className: "absolute h-1 border-none bg-divider w-full top inset-0 m-auto"
      }), /* @__PURE__ */ x("span", {
        className: "text-sm bg-paper px-6 relative",
        children: /* @__PURE__ */ x(ve, {
          message: "or use sample"
        })
      })]
    }), /* @__PURE__ */ x("ul", {
      className: "flex items-center gap-16",
      children: t.map((e) => /* @__PURE__ */ x("li", {
        className: "shrink-0",
        children: /* @__PURE__ */ x("button", {
          type: "button",
          onClick: async () => {
            typeof e.action == "function" ? e.action() : e.url.endsWith(".json") ? (await zs(gt(e.url)), O().togglePanel("newImage", !1)) : (await I().import.openBackgroundImage(gt(e.url)), O().togglePanel("newImage", !1));
          },
          children: /* @__PURE__ */ x("img", {
            className: "w-80 h-80 rounded overflow-hidden transition-shadow hover:shadow-md",
            src: gt(e.thumbnail),
            alt: ""
          })
        })
      }, e.url || e.thumbnail))
    })]
  }) : null;
}
function yP({
  setActivePanel: t
}) {
  const [e, i] = Me({
    width: 800,
    height: 600,
    bgColor: "transparent"
  });
  return /* @__PURE__ */ ie("form", {
    onSubmit: (r) => {
      r.preventDefault();
      const {
        width: s,
        height: f,
        bgColor: g
      } = e;
      s && f && (O().setConfig({
        blankCanvasSize: {
          width: s,
          height: f
        }
      }), I().canvas.openNew(s, f, g), O().togglePanel("newImage", !1), I().history.addInitial());
    },
    children: [/* @__PURE__ */ x(Fi, {
      type: "number",
      label: /* @__PURE__ */ x(ve, {
        message: "Width"
      }),
      value: e.width,
      min: 1,
      required: !0,
      className: "mb-16",
      onChange: (r) => {
        i({
          ...e,
          width: r.target.valueAsNumber
        });
      }
    }), /* @__PURE__ */ x(Fi, {
      type: "number",
      label: /* @__PURE__ */ x(ve, {
        message: "Height"
      }),
      value: e.height,
      min: 1,
      required: !0,
      className: "mb-16",
      onChange: (r) => {
        i({
          ...e,
          height: r.target.valueAsNumber
        });
      }
    }), /* @__PURE__ */ x(Hi, {
      onChange: (r) => {
        i({
          ...e,
          bgColor: r
        });
      },
      className: "mb-16",
      value: e.bgColor,
      label: /* @__PURE__ */ x(ve, {
        message: "Background color"
      })
    }), /* @__PURE__ */ ie("div", {
      className: "text-right",
      children: [/* @__PURE__ */ x(Qe, {
        size: "sm",
        variant: "text",
        className: "mr-10",
        onClick: () => {
          t("default");
        },
        children: /* @__PURE__ */ x(ve, {
          message: "Cancel"
        })
      }), /* @__PURE__ */ x(Qe, {
        size: "sm",
        type: "submit",
        variant: "raised",
        color: "primary",
        children: /* @__PURE__ */ x(ve, {
          message: "Create"
        })
      })]
    })]
  });
}
const wP = qe((t, e) => {
  const i = Vi(t), {
    label: r,
    children: s,
    size: f,
    className: g,
    orientation: l = "horizontal",
    disabled: n,
    required: a,
    invalid: h,
    errorMessage: o,
    description: u
  } = t, c = {}, d = Ot(), m = t.name || d;
  return /* @__PURE__ */ ie("fieldset", {
    "aria-describedby": u ? `${d}-description` : void 0,
    ref: e,
    className: ae("text-left", g),
    children: [r && /* @__PURE__ */ x("legend", {
      className: i.label,
      ...c,
      children: r
    }), /* @__PURE__ */ x("div", {
      className: ae("flex", r ? "mt-6" : "mt-0", l === "vertical" ? "flex-col gap-10" : "flex-row gap-16"),
      children: Pi.map(s, (p) => {
        if (Ht(p))
          return ct(p, {
            name: m,
            size: f,
            invalid: p.props.invalid || h || void 0,
            disabled: p.props.disabled || n,
            required: p.props.required || a
          });
      })
    }), u && !o && /* @__PURE__ */ x("div", {
      className: i.description,
      id: `${d}-description`,
      children: u
    }), o && /* @__PURE__ */ x("div", {
      className: i.error,
      children: o
    })]
  });
}), $o = qe((t, e) => {
  const {
    children: i,
    autoFocus: r,
    size: s,
    invalid: f,
    isFirst: g,
    ...l
  } = t, n = Ni(e);
  ol({
    autoFocus: r
  }, n);
  const a = xP(s);
  return /* @__PURE__ */ ie("label", {
    className: ae("inline-flex gap-8 select-none items-center whitespace-nowrap align-middle", a.label, t.disabled && "text-disabled pointer-events-none", t.invalid && "text-danger"),
    children: [/* @__PURE__ */ x("input", {
      type: "radio",
      className: ae("focus-visible:ring outline-none", "rounded-full transition-button border-2 appearance-none", "border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark", "before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark", "before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200", "checked:before:scale-[.65] checked:before:opacity-100", a.circle),
      ref: n,
      ...l
    }), i && /* @__PURE__ */ x("span", {
      children: i
    })]
  });
});
function xP(t) {
  switch (t) {
    case "xs":
      return {
        circle: "h-12 w-12",
        label: "text-xs"
      };
    case "sm":
      return {
        circle: "h-16 w-16",
        label: "text-sm"
      };
    case "lg":
      return {
        circle: "h-24 w-24",
        label: "text-lg"
      };
    default:
      return {
        circle: "h-20 w-20",
        label: "text-base"
      };
  }
}
function _P() {
  const t = oe((e) => e.openPanels.export);
  return /* @__PURE__ */ x(lo, {
    isOpen: t,
    onOpenChange: (e) => {
      e || O().togglePanel("export", !1);
    },
    type: "modal",
    children: /* @__PURE__ */ x(SP, {})
  });
}
function SP() {
  const [t, e] = Me(() => {
    var i, r, s, f, g, l;
    return {
      filename: ((r = (i = O().config.tools) == null ? void 0 : i.export) == null ? void 0 : r.defaultName) || "image",
      format: ((f = (s = O().config.tools) == null ? void 0 : s.export) == null ? void 0 : f.defaultFormat) || "jpeg",
      quality: ((l = (g = O().config.tools) == null ? void 0 : g.export) == null ? void 0 : l.defaultQuality) || 0.8
    };
  });
  return /* @__PURE__ */ x(co, {
    className: "text-center max-w-max",
    size: "auto",
    children: /* @__PURE__ */ x(hm, {
      children: /* @__PURE__ */ ie("form", {
        onSubmit: (i) => {
          i.preventDefault(), I().export.save(t.filename, t.format, t.quality), O().togglePanel("export", !1);
        },
        children: [/* @__PURE__ */ x(Fi, {
          required: !0,
          size: "sm",
          label: /* @__PURE__ */ x(ve, {
            message: "Save As"
          }),
          value: t.filename,
          onChange: (i) => {
            e({
              ...t,
              filename: i.target.value
            });
          }
        }), /* @__PURE__ */ ie(wP, {
          size: "sm",
          className: "my-20",
          "aria-label": "Image format",
          children: [/* @__PURE__ */ x($o, {
            value: "jpeg",
            checked: t.format === "jpeg",
            onChange: (i) => {
              e({
                ...t,
                format: i.target.value
              });
            },
            children: "JPEG"
          }), /* @__PURE__ */ x($o, {
            value: "png",
            checked: t.format === "png",
            onChange: (i) => {
              e({
                ...t,
                format: i.target.value
              });
            },
            children: "PNG"
          }), /* @__PURE__ */ x($o, {
            value: "json",
            checked: t.format === "json",
            onChange: (i) => {
              e({
                ...t,
                format: i.target.value
              });
            },
            children: "JSON"
          })]
        }), /* @__PURE__ */ x(Ui, {
          size: "sm",
          minValue: 0.1,
          step: 0.1,
          maxValue: 1,
          value: t.quality,
          onChange: (i) => {
            e({
              ...t,
              quality: i
            });
          },
          formatOptions: {
            style: "percent"
          },
          label: /* @__PURE__ */ x(ve, {
            message: "Quality"
          })
        }), /* @__PURE__ */ x(Qe, {
          variant: "raised",
          color: "primary",
          type: "submit",
          className: "mt-20 w-full",
          size: "sm",
          children: /* @__PURE__ */ x(ve, {
            message: "Save"
          })
        })]
      })
    })
  });
}
function CP() {
  const t = oe((i) => i.objects.all), e = oe((i) => i.objects.active.id);
  return /* @__PURE__ */ ie(et.div, {
    ...qs,
    className: "absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",
    children: [/* @__PURE__ */ ie("div", {
      className: "px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",
      children: [/* @__PURE__ */ x(ve, {
        message: "Objects"
      }), /* @__PURE__ */ x(De, {
        size: "xs",
        className: "ml-auto flex-shrink-0",
        onClick: () => {
          O().togglePanel("objects", !1);
        },
        children: /* @__PURE__ */ x(hi, {})
      })]
    }), /* @__PURE__ */ x("div", {
      className: "p-8",
      children: t.map((i) => {
        const r = i.id === e, s = i.name, f = y1[s], g = f.icon && ue.createElement(f.icon, {
          className: "icon-sm"
        });
        return /* @__PURE__ */ x(Qe, {
          onClick: () => {
            r || !i.selectable || I().objects.select(i.id);
          },
          variant: "outline",
          color: r ? "primary" : null,
          size: "sm",
          className: ae("w-full mb-8", (r || !i.selectable) && "pointer-events-none"),
          justify: "justify-start",
          startIcon: g,
          children: /* @__PURE__ */ x(ve, {
            ...f.name
          })
        }, i.id);
      })
    })]
  });
}
function TP() {
  const t = oe((i) => i.openPanels.history), e = oe((i) => i.openPanels.objects);
  return /* @__PURE__ */ ie("div", {
    className: "z-modal",
    children: [/* @__PURE__ */ ie(Ut, {
      children: [t && /* @__PURE__ */ x(hP, {}, "historyPanel"), e && /* @__PURE__ */ x(CP, {}, "objListPanel")]
    }), /* @__PURE__ */ x(gP, {}), /* @__PURE__ */ x(_P, {})]
  });
}
/**
 * @remix-run/router v1.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Ga() {
  return Ga = Object.assign ? Object.assign.bind() : function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var i = arguments[e];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
    }
    return t;
  }, Ga.apply(this, arguments);
}
var Bh;
(function(t) {
  t.Pop = "POP", t.Push = "PUSH", t.Replace = "REPLACE";
})(Bh || (Bh = {}));
function $t(t, e) {
  if (t === !1 || t === null || typeof t > "u")
    throw new Error(e);
}
function jh(t) {
  let {
    pathname: e = "/",
    search: i = "",
    hash: r = ""
  } = t;
  return i && i !== "?" && (e += i.charAt(0) === "?" ? i : "?" + i), r && r !== "#" && (e += r.charAt(0) === "#" ? r : "#" + r), e;
}
function fm(t) {
  let e = {};
  if (t) {
    let i = t.indexOf("#");
    i >= 0 && (e.hash = t.substr(i), t = t.substr(0, i));
    let r = t.indexOf("?");
    r >= 0 && (e.search = t.substr(r), t = t.substr(0, r)), t && (e.pathname = t);
  }
  return e;
}
var Nh;
(function(t) {
  t.data = "data", t.deferred = "deferred", t.redirect = "redirect", t.error = "error";
})(Nh || (Nh = {}));
function EP(t, e) {
  if (e === "/")
    return t;
  if (!t.toLowerCase().startsWith(e.toLowerCase()))
    return null;
  let i = e.endsWith("/") ? e.length - 1 : e.length, r = t.charAt(i);
  return r && r !== "/" ? null : t.slice(i) || "/";
}
function kP(t, e) {
  e === void 0 && (e = "/");
  let {
    pathname: i,
    search: r = "",
    hash: s = ""
  } = typeof t == "string" ? fm(t) : t;
  return {
    pathname: i ? i.startsWith("/") ? i : OP(i, e) : e,
    search: PP(r),
    hash: AP(s)
  };
}
function OP(t, e) {
  let i = e.replace(/\/+$/, "").split("/");
  return t.split("/").forEach((s) => {
    s === ".." ? i.length > 1 && i.pop() : s !== "." && i.push(s);
  }), i.length > 1 ? i.join("/") : "/";
}
function Ho(t, e, i, r) {
  return "Cannot include a '" + t + "' character in a manually specified " + ("`to." + e + "` field [" + JSON.stringify(r) + "].  Please separate it out to the ") + ("`to." + i + "` field. Alternatively you may provide the full path as ") + 'a string in <Link to="..."> and the router will parse it for you.';
}
function dm(t) {
  return t.filter((e, i) => i === 0 || e.route.path && e.route.path.length > 0);
}
function pm(t, e, i, r) {
  r === void 0 && (r = !1);
  let s;
  typeof t == "string" ? s = fm(t) : (s = Ga({}, t), $t(!s.pathname || !s.pathname.includes("?"), Ho("?", "pathname", "search", s)), $t(!s.pathname || !s.pathname.includes("#"), Ho("#", "pathname", "hash", s)), $t(!s.search || !s.search.includes("#"), Ho("#", "search", "hash", s)));
  let f = t === "" || s.pathname === "", g = f ? "/" : s.pathname, l;
  if (r || g == null)
    l = i;
  else {
    let o = e.length - 1;
    if (g.startsWith("..")) {
      let u = g.split("/");
      for (; u[0] === ".."; )
        u.shift(), o -= 1;
      s.pathname = u.join("/");
    }
    l = o >= 0 ? e[o] : "/";
  }
  let n = kP(s, l), a = g && g !== "/" && g.endsWith("/"), h = (f || g === ".") && i.endsWith("/");
  return !n.pathname.endsWith("/") && (a || h) && (n.pathname += "/"), n;
}
const gm = (t) => t.join("/").replace(/\/\/+/g, "/"), PP = (t) => !t || t === "?" ? "" : t.startsWith("?") ? t : "?" + t, AP = (t) => !t || t === "#" ? "" : t.startsWith("#") ? t : "#" + t, MP = ["post", "put", "patch", "delete"];
[...MP];
/**
 * React Router v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Xa() {
  return Xa = Object.assign ? Object.assign.bind() : function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var i = arguments[e];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
    }
    return t;
  }, Xa.apply(this, arguments);
}
const mm = /* @__PURE__ */ _e.createContext(null), uo = /* @__PURE__ */ _e.createContext(null), vm = /* @__PURE__ */ _e.createContext(null), ho = /* @__PURE__ */ _e.createContext({
  outlet: null,
  matches: [],
  isDataRoute: !1
});
function DP(t, e) {
  let {
    relative: i
  } = e === void 0 ? {} : e;
  cl() || $t(!1);
  let {
    basename: r,
    navigator: s
  } = _e.useContext(uo), {
    hash: f,
    pathname: g,
    search: l
  } = ym(t, {
    relative: i
  }), n = g;
  return r !== "/" && (n = g === "/" ? r : gm([r, g])), s.createHref({
    pathname: n,
    search: l,
    hash: f
  });
}
function cl() {
  return _e.useContext(vm) != null;
}
function ll() {
  return cl() || $t(!1), _e.useContext(vm).location;
}
function bm(t) {
  _e.useContext(uo).static || _e.useLayoutEffect(t);
}
function IP() {
  let {
    isDataRoute: t
  } = _e.useContext(ho);
  return t ? BP() : RP();
}
function RP() {
  cl() || $t(!1);
  let t = _e.useContext(mm), {
    basename: e,
    navigator: i
  } = _e.useContext(uo), {
    matches: r
  } = _e.useContext(ho), {
    pathname: s
  } = ll(), f = JSON.stringify(dm(r).map((n) => n.pathnameBase)), g = _e.useRef(!1);
  return bm(() => {
    g.current = !0;
  }), _e.useCallback(function(n, a) {
    if (a === void 0 && (a = {}), !g.current)
      return;
    if (typeof n == "number") {
      i.go(n);
      return;
    }
    let h = pm(n, JSON.parse(f), s, a.relative === "path");
    t == null && e !== "/" && (h.pathname = h.pathname === "/" ? e : gm([e, h.pathname])), (a.replace ? i.replace : i.push)(h, a.state, a);
  }, [e, i, f, s, t]);
}
function ym(t, e) {
  let {
    relative: i
  } = e === void 0 ? {} : e, {
    matches: r
  } = _e.useContext(ho), {
    pathname: s
  } = ll(), f = JSON.stringify(dm(r).map((g) => g.pathnameBase));
  return _e.useMemo(() => pm(t, JSON.parse(f), s, i === "path"), [t, f, s, i]);
}
var Ka;
(function(t) {
  t.UseBlocker = "useBlocker", t.UseRevalidator = "useRevalidator", t.UseNavigateStable = "useNavigate";
})(Ka || (Ka = {}));
var qa;
(function(t) {
  t.UseBlocker = "useBlocker", t.UseLoaderData = "useLoaderData", t.UseActionData = "useActionData", t.UseRouteError = "useRouteError", t.UseNavigation = "useNavigation", t.UseRouteLoaderData = "useRouteLoaderData", t.UseMatches = "useMatches", t.UseRevalidator = "useRevalidator", t.UseNavigateStable = "useNavigate", t.UseRouteId = "useRouteId";
})(qa || (qa = {}));
function LP(t) {
  let e = _e.useContext(mm);
  return e || $t(!1), e;
}
function FP(t) {
  let e = _e.useContext(ho);
  return e || $t(!1), e;
}
function zP(t) {
  let e = FP(), i = e.matches[e.matches.length - 1];
  return i.route.id || $t(!1), i.route.id;
}
function BP() {
  let {
    router: t
  } = LP(Ka.UseNavigateStable), e = zP(qa.UseNavigateStable), i = _e.useRef(!1);
  return bm(() => {
    i.current = !0;
  }), _e.useCallback(function(s, f) {
    f === void 0 && (f = {}), i.current && (typeof s == "number" ? t.navigate(s) : t.navigate(s, Xa({
      fromRouteId: e
    }, f)));
  }, [t, e]);
}
var Vh;
(function(t) {
  t[t.pending = 0] = "pending", t[t.success = 1] = "success", t[t.error = 2] = "error";
})(Vh || (Vh = {}));
new Promise(() => {
});
/**
 * React Router DOM v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function jP(t, e) {
  if (t == null)
    return {};
  var i = {}, r = Object.keys(t), s, f;
  for (f = 0; f < r.length; f++)
    s = r[f], !(e.indexOf(s) >= 0) && (i[s] = t[s]);
  return i;
}
function NP(t) {
  return !!(t.metaKey || t.altKey || t.ctrlKey || t.shiftKey);
}
function VP(t, e) {
  return t.button === 0 && (!e || e === "_self") && !NP(t);
}
const $P = ["onClick", "relative", "reloadDocument", "replace", "state", "target", "to", "preventScrollReset"], HP = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u", UP = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, WP = /* @__PURE__ */ _e.forwardRef(function(e, i) {
  let {
    onClick: r,
    relative: s,
    reloadDocument: f,
    replace: g,
    state: l,
    target: n,
    to: a,
    preventScrollReset: h
  } = e, o = jP(e, $P), {
    basename: u
  } = _e.useContext(uo), c, d = !1;
  if (typeof a == "string" && UP.test(a) && (c = a, HP))
    try {
      let b = new URL(window.location.href), y = a.startsWith("//") ? new URL(b.protocol + a) : new URL(a), w = EP(y.pathname, u);
      y.origin === b.origin && w != null ? a = w + y.search + y.hash : d = !0;
    } catch {
    }
  let m = DP(a, {
    relative: s
  }), p = YP(a, {
    replace: g,
    state: l,
    target: n,
    preventScrollReset: h,
    relative: s
  });
  function v(b) {
    r && r(b), b.defaultPrevented || p(b);
  }
  return /* @__PURE__ */ x("a", {
    ...o,
    href: c || m,
    onClick: d || f ? r : v,
    ref: i,
    target: n
  });
});
var $h;
(function(t) {
  t.UseScrollRestoration = "useScrollRestoration", t.UseSubmitImpl = "useSubmitImpl", t.UseFetcher = "useFetcher";
})($h || ($h = {}));
var Hh;
(function(t) {
  t.UseFetchers = "useFetchers", t.UseScrollRestoration = "useScrollRestoration";
})(Hh || (Hh = {}));
function YP(t, e) {
  let {
    target: i,
    replace: r,
    state: s,
    preventScrollReset: f,
    relative: g
  } = e === void 0 ? {} : e, l = IP(), n = ll(), a = ym(t, {
    relative: g
  });
  return _e.useCallback((h) => {
    if (VP(h, i)) {
      h.preventDefault();
      let o = r !== void 0 ? r : jh(n) === jh(a);
      l(t, {
        replace: o,
        state: s,
        preventScrollReset: f,
        relative: g
      });
    }
  }, [n, l, a, r, s, i, t, f, g]);
}
const GP = me(/* @__PURE__ */ x("path", {
  d: "M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"
}), "ErrorOutlineOutlined"), XP = me(/* @__PURE__ */ x("path", {
  d: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"
}), "CheckCircleOutlined"), KP = ue.forwardRef((t, e) => {
  let {
    value: i = 0,
    minValue: r = 0,
    maxValue: s = 100,
    size: f = "md",
    isIndeterminate: g = !1,
    className: l,
    position: n = "relative",
    trackColor: a,
    fillColor: h = "border-primary",
    ...o
  } = t;
  i = hn(i, r, s);
  const u = qP(f), c = (i - r) / (s - r), d = Zg({
    style: "percent"
  });
  let m = "";
  !g && !m && (m = d.format(c));
  const p = {}, v = {};
  if (!g) {
    const b = (i - r) / (s - r) * 100;
    let y;
    b > 0 && b <= 50 ? (y = -180 + b / 50 * 180, p.transform = `rotate(${y}deg)`, v.transform = "rotate(-180deg)") : b > 50 && (y = -180 + (b - 50) / 50 * 180, p.transform = "rotate(0deg)", v.transform = `rotate(${y}deg)`);
  }
  return /* @__PURE__ */ ie("div", {
    ...o,
    "aria-valuenow": g ? void 0 : i,
    "aria-valuemin": r,
    "aria-valuemax": s,
    "aria-valuetext": g ? void 0 : m,
    role: "progressbar",
    ref: e,
    className: ae("progress-circle", n, u, g && "indeterminate", l),
    children: [/* @__PURE__ */ x("div", {
      className: ae(u, a, "border-4 rounded-full")
    }), /* @__PURE__ */ ie("div", {
      className: ae("fills absolute w-full h-full top-0 left-0", g && "progress-circle-fills-animate"),
      children: [/* @__PURE__ */ x(Uh, {
        circleSize: u,
        subMaskStyle: p,
        isIndeterminate: g,
        className: "rotate-180",
        fillColor: h,
        subMaskClassName: ae(g && "progress-circle-fill-submask-1-animate")
      }), /* @__PURE__ */ x(Uh, {
        circleSize: u,
        subMaskStyle: v,
        isIndeterminate: g,
        fillColor: h,
        subMaskClassName: ae(g && "progress-circle-fill-submask-2-animate")
      })]
    })]
  });
});
function Uh({
  subMaskStyle: t,
  subMaskClassName: e,
  className: i,
  circleSize: r,
  isIndeterminate: s,
  fillColor: f
}) {
  return /* @__PURE__ */ x("div", {
    className: ae("w-1/2 h-full origin-[100%] absolute overflow-hidden", i),
    children: /* @__PURE__ */ x("div", {
      className: ae("w-full h-full origin-[100%] overflow-hidden rotate-180", !s && "transition-transform duration-100", e),
      style: t,
      children: /* @__PURE__ */ x("div", {
        className: ae(r, f, "rounded-full border-4")
      })
    })
  });
}
function qP(t) {
  switch (t) {
    case "sm":
      return "w-24 h-24";
    case "md":
      return "w-32 h-32";
    case "lg":
      return "w-42 h-42";
    default:
      return t;
  }
}
const ZP = {
  opacity: 0,
  y: 50,
  scale: 0.3
}, JP = {
  opacity: 1,
  y: 0,
  scale: 1
}, QP = {
  opacity: 0,
  scale: 0.5
};
function e4() {
  const t = hd((e) => e.toasts);
  return /* @__PURE__ */ x("div", {
    className: "relative pointer-events-none",
    children: /* @__PURE__ */ x(Ut, {
      initial: !1,
      children: t.map((e) => /* @__PURE__ */ x("div", {
        className: ae("fixed mx-auto p-20 z-toast", e.position === "bottom-center" ? "left-0 right-0 bottom-0" : "right-0 bottom-0"),
        children: /* @__PURE__ */ ie(et.div, {
          initial: e.disableEnterAnimation ? void 0 : ZP,
          animate: e.disableEnterAnimation ? void 0 : JP,
          exit: e.disableExitAnimation ? void 0 : QP,
          className: ae("flex items-center gap-10 min-w-288 max-w-500 shadow-lg w-min rounded-lg pl-16 pr-6 py-6 text-sm pointer-events-auto max-h-100 bg-paper text-main bg-paper border mx-auto min-h-50"),
          onPointerEnter: () => {
            var i;
            return (i = e.timer) == null ? void 0 : i.pause();
          },
          onPointerLeave: () => {
            var i;
            return (i = e.timer) == null ? void 0 : i.resume();
          },
          role: "alert",
          "aria-live": e.type === "danger" ? "assertive" : "polite",
          children: [e.type === "danger" && /* @__PURE__ */ x(GP, {
            className: "text-danger flex-shrink-0",
            size: "md"
          }), e.type === "loading" && /* @__PURE__ */ x(KP, {
            size: "sm",
            className: "flex-shrink-0",
            isIndeterminate: !0
          }), e.type === "positive" && /* @__PURE__ */ x(XP, {
            className: "text-positive flex-shrink-0",
            size: "md"
          }), /* @__PURE__ */ x("div", {
            className: "overflow-hidden overflow-ellipsis w-max mr-auto",
            "data-testid": "toast-message",
            children: /* @__PURE__ */ x(Fa, {
              value: e.message
            })
          }), e.action && /* @__PURE__ */ x(Qe, {
            variant: "text",
            color: "primary",
            size: "sm",
            className: "flex-shrink-0",
            onFocus: () => {
              var i;
              return (i = e.timer) == null ? void 0 : i.pause();
            },
            onBlur: () => {
              var i;
              return (i = e.timer) == null ? void 0 : i.resume();
            },
            onClick: () => vr().remove(e.id),
            elementType: WP,
            to: e.action.action,
            children: /* @__PURE__ */ x(Fa, {
              value: e.action.label
            })
          }), e.type !== "loading" && /* @__PURE__ */ x(De, {
            onFocus: () => {
              var i;
              return (i = e.timer) == null ? void 0 : i.pause();
            },
            onBlur: () => {
              var i;
              return (i = e.timer) == null ? void 0 : i.resume();
            },
            type: "button",
            className: "flex-shrink-0",
            onClick: () => {
              vr().remove(e.id);
            },
            size: "sm",
            children: /* @__PURE__ */ x(hi, {})
          })]
        })
      }, e.id))
    })
  });
}
function Wh(t) {
  return Sp() ? t.metaKey : t.ctrlKey;
}
function t4(t) {
  switch (t.key) {
    case "z":
      Wh(t) && (t.preventDefault(), t.stopPropagation(), t.shiftKey ? I().history.redo() : I().history.undo());
      break;
    case "ArrowUp":
      t.preventDefault(), t.stopPropagation(), I().objects.move("up");
      break;
    case "ArrowRight":
      t.preventDefault(), t.stopPropagation(), I().objects.move("right");
      break;
    case "ArrowDown":
      t.preventDefault(), t.stopPropagation(), I().objects.move("down");
      break;
    case "ArrowLeft":
      t.preventDefault(), t.stopPropagation(), I().objects.move("left");
      break;
    case "Delete":
      t.preventDefault(), t.stopPropagation(), I().objects.delete();
      break;
    case "v":
      Wh(t) && (t.preventDefault(), t.stopPropagation(), i4());
      break;
  }
}
async function i4() {
  try {
    const t = await navigator.clipboard.read();
    for (const e of t)
      for (const i of e.types)
        if (i.startsWith("image/")) {
          const r = await e.getType(i), s = new FileReader();
          s.onload = (f) => {
            var g;
            (g = f.target) != null && g.result && I().import.addImageFromData(f.target.result);
          }, s.readAsDataURL(r);
          return;
        }
  } catch (t) {
    console.error(t);
  }
}
const r4 = /* @__PURE__ */ new Map(), Uo = /* @__PURE__ */ new Map(), Yh = {
  status: "inactive"
};
async function* n4(t) {
  for (const e of t.items)
    if (e.kind === "file")
      if (typeof e.webkitGetAsEntry == "function") {
        const i = e.webkitGetAsEntry();
        if (!i)
          continue;
        if (i.isFile) {
          if (i.name === ".DS_Store")
            continue;
          yield new ln(e.getAsFile(), i.fullPath);
        } else
          i.isDirectory && (yield* wm(i));
      } else {
        const i = e.getAsFile();
        if (!i || i.name === ".DS_Store")
          continue;
        yield new ln(i, e.fullPath);
      }
}
async function* wm(t) {
  const e = t.createReader();
  let i;
  do {
    i = await new Promise((r, s) => {
      e.readEntries(r, s);
    });
    for (const r of i)
      if (r.isFile) {
        if (r.name === ".DS_Store")
          continue;
        const s = await s4(r);
        yield new ln(s, r.fullPath);
      } else
        r.isDirectory && (yield* wm(r));
  } while (i.length > 0);
}
function s4(t) {
  return new Promise((e, i) => t.file(e, i));
}
async function o4(t) {
  const e = [];
  for await (const i of t)
    e.push(i);
  return e;
}
const a4 = 400;
function c4({
  id: t,
  disabled: e,
  ref: i,
  ...r
}) {
  const s = ge({
    dragOverElements: /* @__PURE__ */ new Set(),
    dropActivateTimer: void 0
  }).current, f = ge(r);
  f.current = r, pn(() => (Uo.set(t, {
    ...Uo.get(t),
    disabled: e,
    id: t,
    ref: i
  }), () => {
    Uo.delete(t);
  }), [t, f, e, i]);
  const g = (u) => {
    var m;
    const c = f.current, d = c.allowDragEventsFromItself || i.current !== ((m = u.ref) == null ? void 0 : m.current);
    return !!((u == null ? void 0 : u.type) && d && c.types.includes(u.type) && (!c.acceptsDrop || c.acceptsDrop(u)));
  }, l = (u) => {
    var d, m;
    const c = Lr(u);
    c && ((m = (d = f.current).onDragLeave) == null || m.call(d, c));
  };
  return {
    droppableProps: e ? {} : {
      onDragOver: (u) => {
        var d, m;
        u.preventDefault(), u.stopPropagation();
        const c = Lr(u);
        c && g(c) && ((m = (d = f.current).onDragOver) == null || m.call(d, c, u));
      },
      onDragEnter: (u) => {
        var d, m;
        if (u.stopPropagation(), s.dragOverElements.add(u.target), s.dragOverElements.size > 1)
          return;
        const c = Lr(u);
        c && g(c) && ((m = (d = f.current).onDragEnter) == null || m.call(d, c), clearTimeout(s.dropActivateTimer), typeof f.current.onDropActivate == "function" && (s.dropActivateTimer = setTimeout(() => {
          var p, v;
          c && ((v = (p = f.current).onDropActivate) == null || v.call(p, c));
        }, a4)));
      },
      onDragLeave: (u) => {
        u.stopPropagation(), s.dragOverElements.delete(u.target);
        for (const d of s.dragOverElements)
          u.currentTarget.contains(d) || s.dragOverElements.delete(d);
        if (s.dragOverElements.size > 0)
          return;
        const c = Lr(u);
        c && g(c) && (l(u), clearTimeout(s.dropActivateTimer));
      },
      onDrop: async (u) => {
        var d, m, p, v;
        u.preventDefault(), u.stopPropagation(), s.dragOverElements.clear(), l(u), clearTimeout(s.dropActivateTimer);
        const c = Lr(u);
        c && ((m = (d = f.current).onDragLeave) == null || m.call(d, c), g(c) && ((v = (p = f.current).onDrop) == null || v.call(p, c)));
      }
    }
  };
}
function Lr(t) {
  if (Yh.dragTargetId != null)
    return r4.get(Yh.dragTargetId);
  if (t.dataTransfer.types.includes("Files"))
    return {
      type: "nativeFile",
      el: null,
      ref: null,
      getData: () => o4(n4(t.dataTransfer))
    };
}
function l4({
  children: t
}) {
  const e = oe((r) => r.bootstrapData), i = Ke(() => ({
    data: e,
    setBootstrapData: () => {
    },
    mergeBootstrapData: () => {
    },
    invalidateBootstrapData: () => {
    }
  }), [e]);
  return /* @__PURE__ */ x(Zp.Provider, {
    value: i,
    children: t
  });
}
function u4() {
  var d, m, p, v;
  const t = (d = oe((b) => {
    var y;
    return (y = b.config.ui) == null ? void 0 : y.visible;
  })) != null ? d : !0, e = (m = oe((b) => {
    var y, w;
    return (w = (y = b.config.ui) == null ? void 0 : y.nav) == null ? void 0 : w.position;
  })) != null ? m : "bottom", i = (p = oe((b) => {
    var y, w;
    return (w = (y = b.config.ui) == null ? void 0 : y.menubar) == null ? void 0 : w.position;
  })) != null ? p : "top", r = (v = oe((b) => {
    var y;
    return (y = b.config.ui) == null ? void 0 : y.allowEditorClose;
  })) != null ? v : !0, s = ge(null), f = ge(null), {
    isModal: g,
    isMobile: l
  } = io(), n = Oe(async (b) => {
    var w, _, S;
    if (O().activeTool || O().dirty || b.type !== "nativeFile")
      return;
    const y = await b.getData();
    !I().import.fileIsValid(y[0]) || ((S = (_ = (w = O().config.tools) == null ? void 0 : w.import) == null ? void 0 : _.openDroppedImageAsBackground) != null && S ? await I().import.openBackgroundImage(y[0]) : await I().import.openUploadedFile(y[0]));
  }, []), {
    droppableProps: a
  } = c4({
    id: "photalius-root",
    ref: f,
    types: ["nativeFile"],
    onDrop: n
  });
  Te(() => {
    var w, _;
    O().fabric || (oe.setState({
      canvasRef: s
    }), GS(s.current), (w = O().config.ui) != null && w.defaultTool && O().setActiveTool((_ = O().config.ui) == null ? void 0 : _.defaultTool, null), I().canvas.loadInitialContent().then(() => {
      var S, C;
      (C = (S = O().config).onLoad) == null || C.call(S, O().editor);
    }));
    const b = Nu(f, () => {
      O().setStageSize(Vu(f.current));
    }), y = Nu(s, () => {
      O().setCanvasSize(Vu(s.current));
    });
    return () => {
      b(), y();
    };
  }, [f]);
  const h = {
    visible: {
      opacity: 1,
      scale: 1,
      display: "flex"
    },
    hidden: {
      opacity: 0,
      transitionEnd: {
        display: "none"
      }
    }
  }, o = ae("photalius-root flex flex-col overflow-hidden bg-background text-main no-tap-highlight w-full h-full", {
    relative: !g,
    "fixed inset-0 w-full h-full z-20": g,
    "shadow-lg border rounded-md m-auto max-h-[calc(100vh-90px)] max-w-[calc(100vw-90px)]": g && !l
  });
  return /* @__PURE__ */ x(x_, {
    features: __,
    strict: !0,
    children: /* @__PURE__ */ ie(l4, {
      children: [g && t && !l && r && /* @__PURE__ */ x(De, {
        className: "z-20 fixed right-2 top-2 text-white",
        size: "lg",
        onClick: () => {
          O().editor.close();
        },
        children: /* @__PURE__ */ x(hi, {})
      }), g && t && /* @__PURE__ */ x(qc, {
        position: "fixed",
        disableInitialTransition: !0
      }), /* @__PURE__ */ ie(et.div, {
        initial: !1,
        variants: h,
        animate: t ? "visible" : "hidden",
        className: o,
        children: [i === "top" && /* @__PURE__ */ x(th, {}), e === "top" && /* @__PURE__ */ x(zh, {
          className: "pt-14"
        }), /* @__PURE__ */ ie("main", {
          className: "relative flex-auto my-20 overflow-hidden outline-none",
          tabIndex: -1,
          ...Wt(a, {
            onKeyDownCapture: t4
          }),
          ref: f,
          children: [/* @__PURE__ */ x(FT, {}), /* @__PURE__ */ x(lE, {
            ref: s
          })]
        }), /* @__PURE__ */ x(oO, {}), e === "bottom" && /* @__PURE__ */ x(zh, {}), i === "bottom" && /* @__PURE__ */ x(th, {}), /* @__PURE__ */ x(TP, {}), /* @__PURE__ */ x(e4, {})]
      })]
    })
  });
}
(function() {
  fabric.Object.ENLIVEN_PROPS.push("eraser");
  var t = fabric.Object.prototype._drawClipPath, e = fabric.Object.prototype.needsItsOwnCache, i = fabric.Object.prototype.toObject, r = fabric.Object.prototype.getSvgCommons, s = fabric.Object.prototype._createBaseClipPathSVGMarkup, f = fabric.Object.prototype._createBaseSVGMarkup;
  fabric.Object.prototype.cacheProperties.push("eraser"), fabric.Object.prototype.stateProperties.push("eraser"), fabric.util.object.extend(fabric.Object.prototype, {
    erasable: !0,
    eraser: void 0,
    needsItsOwnCache: function() {
      return e.call(this) || !!this.eraser;
    },
    _drawClipPath: function(n, a) {
      if (t.call(this, n, a), this.eraser) {
        var h = this._getNonTransformedDimensions();
        this.eraser.isType("eraser") && this.eraser.set({
          width: h.x,
          height: h.y
        }), t.call(this, n, this.eraser);
      }
    },
    toObject: function(n) {
      var a = i.call(this, ["erasable"].concat(n));
      return this.eraser && !this.eraser.excludeFromExport && (a.eraser = this.eraser.toObject(n)), a;
    },
    getSvgCommons: function() {
      return r.call(this) + (this.eraser ? 'mask="url(#' + this.eraser.clipPathId + ')" ' : "");
    },
    _createEraserSVGMarkup: function(n) {
      return this.eraser ? (this.eraser.clipPathId = "MASK_" + fabric.Object.__uid++, [
        '<mask id="',
        this.eraser.clipPathId,
        '" >',
        this.eraser.toSVG(n),
        "</mask>",
        `
`
      ].join("")) : "";
    },
    _createBaseClipPathSVGMarkup: function(n, a) {
      return [
        this._createEraserSVGMarkup(a && a.reviver),
        s.call(this, n, a)
      ].join("");
    },
    _createBaseSVGMarkup: function(n, a) {
      return [
        this._createEraserSVGMarkup(a && a.reviver),
        f.call(this, n, a)
      ].join("");
    }
  });
  var g = fabric.Group.prototype._restoreObjectsState;
  fabric.util.object.extend(fabric.Group.prototype, {
    _addEraserPathToObjects: function(n) {
      this._objects.forEach(function(a) {
        fabric.EraserBrush.prototype._addPathToObjectEraser.call(
          fabric.EraserBrush.prototype,
          a,
          n
        );
      });
    },
    applyEraserToObjects: function() {
      var n = this, a = this.eraser;
      if (a) {
        delete this.eraser;
        var h = n.calcTransformMatrix();
        a.clone(function(o) {
          var u = n.clipPath;
          o.getObjects("path").forEach(function(c) {
            var d = fabric.util.multiplyTransformMatrices(
              h,
              c.calcTransformMatrix()
            );
            fabric.util.applyTransformToObject(c, d), u ? u.clone(function(m) {
              var p = fabric.EraserBrush.prototype.applyClipPathToPath.call(
                fabric.EraserBrush.prototype,
                c,
                m,
                h
              );
              n._addEraserPathToObjects(p);
            }, ["absolutePositioned", "inverted"]) : n._addEraserPathToObjects(c);
          });
        });
      }
    },
    _restoreObjectsState: function() {
      return this.erasable === !0 && this.applyEraserToObjects(), g.call(this);
    }
  }), fabric.Eraser = fabric.util.createClass(fabric.Group, {
    type: "eraser",
    originX: "center",
    originY: "center",
    drawObject: function(n) {
      n.save(), n.fillStyle = "black", n.fillRect(-this.width / 2, -this.height / 2, this.width, this.height), n.restore(), this.callSuper("drawObject", n);
    },
    _getBounds: function() {
    },
    _toSVG: function(n) {
      var a = ["<g ", "COMMON_PARTS", ` >
`], h = -this.width / 2, o = -this.height / 2, u = [
        "<rect ",
        'fill="white" ',
        'x="',
        h,
        '" y="',
        o,
        '" width="',
        this.width,
        '" height="',
        this.height,
        `" />
`
      ].join("");
      a.push("		", u);
      for (var c = 0, d = this._objects.length; c < d; c++)
        a.push("		", this._objects[c].toSVG(n));
      return a.push(`</g>
`), a;
    }
  }), fabric.Eraser.fromObject = function(n, a) {
    var h = n.objects;
    fabric.util.enlivenObjects(h, function(o) {
      var u = fabric.util.object.clone(n, !0);
      delete u.objects, fabric.util.enlivenObjectEnlivables(n, u, function() {
        a && a(new fabric.Eraser(o, u, !0));
      });
    });
  };
  var l = fabric.Canvas.prototype._renderOverlay;
  fabric.util.object.extend(fabric.Canvas.prototype, {
    isErasing: function() {
      return this.isDrawingMode && this.freeDrawingBrush && this.freeDrawingBrush.type === "eraser" && this.freeDrawingBrush._isErasing;
    },
    _renderOverlay: function(n) {
      l.call(this, n), this.isErasing() && !this.freeDrawingBrush.inverted && this.freeDrawingBrush._render();
    }
  }), fabric.EraserBrush = fabric.util.createClass(
    fabric.PencilBrush,
    {
      type: "eraser",
      inverted: !1,
      _isErasing: !1,
      _isErasable: function(n) {
        return n.erasable !== !1;
      },
      _prepareCollectionTraversal: function(n, a, h) {
        n.forEachObject(function(o) {
          o.forEachObject && o.erasable === "deep" ? this._prepareCollectionTraversal(o, a, h) : !this.inverted && o.erasable && o.visible ? (o.visible = !1, n.dirty = !0, h.visibility.push(o), h.collection.push(n)) : this.inverted && o.visible && (o.erasable && o.eraser ? (o.eraser.inverted = !0, o.dirty = !0, n.dirty = !0, h.eraser.push(o), h.collection.push(n)) : (o.visible = !1, n.dirty = !0, h.visibility.push(o), h.collection.push(n)));
        }, this);
      },
      preparePattern: function() {
        this._patternCanvas || (this._patternCanvas = fabric.util.createCanvasElement());
        var n = this._patternCanvas;
        n.width = this.canvas.width, n.height = this.canvas.height;
        var a = n.getContext("2d");
        if (this.canvas._isRetinaScaling()) {
          var h = this.canvas.getRetinaScaling();
          this.canvas.__initRetinaScaling(h, n, a);
        }
        var o = this.canvas.backgroundImage, u = o && this._isErasable(o), c = this.canvas.overlayImage, d = c && this._isErasable(c);
        if (!this.inverted && (o && !u || !!this.canvas.backgroundColor))
          u && (this.canvas.backgroundImage = void 0), this.canvas._renderBackground(a), u && (this.canvas.backgroundImage = o);
        else if (this.inverted && o && u) {
          var m = this.canvas.backgroundColor;
          this.canvas.backgroundColor = void 0, this.canvas._renderBackground(a), this.canvas.backgroundColor = m;
        }
        a.save(), a.transform.apply(a, this.canvas.viewportTransform);
        var p = { visibility: [], eraser: [], collection: [] };
        if (this._prepareCollectionTraversal(this.canvas, a, p), this.canvas._renderObjects(a, this.canvas._objects), p.visibility.forEach(function(v) {
          v.visible = !0;
        }), p.eraser.forEach(function(v) {
          v.eraser.inverted = !1, v.dirty = !0;
        }), p.collection.forEach(function(v) {
          v.dirty = !0;
        }), a.restore(), !this.inverted && (c && !d || !!this.canvas.overlayColor))
          d && (this.canvas.overlayImage = void 0), l.call(this.canvas, a), d && (this.canvas.overlayImage = c);
        else if (this.inverted && c && d) {
          var m = this.canvas.overlayColor;
          this.canvas.overlayColor = void 0, l.call(this.canvas, a), this.canvas.overlayColor = m;
        }
      },
      _setBrushStyles: function(n) {
        this.callSuper("_setBrushStyles", n), n.strokeStyle = "black";
      },
      _saveAndTransform: function(n) {
        this.callSuper("_saveAndTransform", n), this._setBrushStyles(n), n.globalCompositeOperation = n === this.canvas.getContext() ? "destination-out" : "source-over";
      },
      needsFullRender: function() {
        return !0;
      },
      onMouseDown: function(n, a) {
        !this.canvas._isMainEvent(a.e) || (this._prepareForDrawing(n), this._captureDrawingPath(n), this.preparePattern(), this._isErasing = !0, this.canvas.fire("erasing:start"), this._render());
      },
      _render: function() {
        var n;
        this.inverted || (n = this.canvas.getContext(), this.callSuper("_render", n)), n = this.canvas.contextTop, this.canvas.clearContext(n), this.callSuper("_render", n), n.save();
        var a = this.canvas.getRetinaScaling(), h = 1 / a;
        n.scale(h, h), n.globalCompositeOperation = "source-in", n.drawImage(this._patternCanvas, 0, 0), n.restore();
      },
      createPath: function(n) {
        var a = this.callSuper("createPath", n);
        return a.globalCompositeOperation = this.inverted ? "source-over" : "destination-out", a.stroke = this.inverted ? "white" : "black", a;
      },
      applyClipPathToPath: function(n, a, h) {
        var o = fabric.util.invertTransform(n.calcTransformMatrix()), u = a.calcTransformMatrix(), c = a.absolutePositioned ? o : fabric.util.multiplyTransformMatrices(
          o,
          h
        );
        return a.absolutePositioned = !1, fabric.util.applyTransformToObject(
          a,
          fabric.util.multiplyTransformMatrices(
            c,
            u
          )
        ), n.clipPath = n.clipPath ? fabric.util.mergeClipPaths(a, n.clipPath) : a, n;
      },
      clonePathWithClipPath: function(n, a, h) {
        var o = a.calcTransformMatrix(), u = a.clipPath, c = this;
        n.clone(function(d) {
          u.clone(function(m) {
            h(c.applyClipPathToPath(d, m, o));
          }, ["absolutePositioned", "inverted"]);
        });
      },
      _addPathToObjectEraser: function(n, a) {
        var h = this;
        if (n.forEachObject && n.erasable === "deep") {
          var o = n._objects.filter(function(c) {
            return c.erasable;
          });
          o.length > 0 && n.clipPath ? this.clonePathWithClipPath(a, n, function(c) {
            o.forEach(function(d) {
              h._addPathToObjectEraser(d, c);
            });
          }) : o.length > 0 && o.forEach(function(c) {
            h._addPathToObjectEraser(c, a);
          });
          return;
        }
        var u = n.eraser;
        u || (u = new fabric.Eraser(), n.eraser = u), a.clone(function(c) {
          var d = fabric.util.multiplyTransformMatrices(
            fabric.util.invertTransform(
              n.calcTransformMatrix()
            ),
            c.calcTransformMatrix()
          );
          fabric.util.applyTransformToObject(c, d), u.addWithUpdate(c), n.set("dirty", !0), n.fire("erasing:end", {
            path: c
          }), n.group && Array.isArray(h.__subTargets) && h.__subTargets.push(n);
        });
      },
      applyEraserToCanvas: function(n) {
        var a = this.canvas, h = {};
        return [
          "backgroundImage",
          "overlayImage"
        ].forEach(function(o) {
          var u = a[o];
          u && u.erasable && (this._addPathToObjectEraser(u, n), h[o] = u);
        }, this), h;
      },
      _finalizeAndAddPath: function() {
        var n = this.canvas.contextTop, a = this.canvas;
        n.closePath(), this.decimate && (this._points = this.decimatePoints(this._points, this.decimate)), a.clearContext(a.contextTop), this._isErasing = !1;
        var h = this._points && this._points.length > 1 ? this.convertPointsToSVGPath(this._points) : null;
        if (!h || this._isEmptySVGPath(h)) {
          a.fire("erasing:end"), a.requestRenderAll();
          return;
        }
        var o = this.createPath(h);
        o.setCoords(), a.fire("before:path:created", { path: o });
        var u = this.applyEraserToCanvas(o), c = this;
        this.__subTargets = [];
        var d = [];
        a.forEachObject(function(m) {
          m.erasable && m.intersectsWithObject(o, !0, !0) && (c._addPathToObjectEraser(m, o), d.push(m));
        }), a.fire("erasing:end", {
          path: o,
          targets: d,
          subTargets: this.__subTargets,
          drawables: u
        }), delete this.__subTargets, a.requestRenderAll(), this._resetShadow(), a.fire("path:created", { path: o });
      }
    }
  );
})();
Yo.enableBoundaryChecking(!1);
const ul = class {
  constructor(e) {
    Se(this, "tools", {});
    Se(this, "fabric", null);
    if (e.sentryDsn && Pb({
      dsn: e.sentryDsn
    }), Mm(ew), !e.selector)
      throw new Error('Photalius required "selector" option.');
    const i = document.querySelector(e.selector);
    if (!i)
      return;
    i.classList.add("pi"), Z1(i), this.setConfig(e), oe.setState({
      editor: this
    }), fd(i).render(/* @__PURE__ */ x(ue.StrictMode, {
      children: /* @__PURE__ */ x(u4, {})
    }));
  }
  get state() {
    return O();
  }
  get defaultConfig() {
    return ul.defaultConfig;
  }
  open(e = {}) {
    return new Promise(async (i) => {
      var r;
      Object.keys(e).length ? await this.resetEditor({
        ...Jf(e, {
          ui: {
            visible: !0
          },
          image: e.image || O().config.image,
          state: e.state || O().config.state,
          blankCanvasSize: e.blankCanvasSize || O().config.blankCanvasSize
        })
      }) : (r = O().config.ui) != null && r.visible || await O().setConfig({
        ui: {
          visible: !0
        }
      }), i();
    });
  }
  close() {
    var e, i, r;
    !((e = O().config.ui) != null && e.visible) || (this.setConfig({
      ui: {
        visible: !1
      }
    }), (r = (i = O().config).onClose) == null || r.call(i));
  }
  setConfig(e) {
    O().setConfig(e);
  }
  uploadAndAddImage() {
    return I().import.uploadAndAddImage();
  }
  uploadAndReplaceMainImage() {
    return I().import.uploadAndReplaceMainImage();
  }
  uploadAndOpenStateFile() {
    return I().import.uploadAndOpenStateFile();
  }
  newCanvas(e, i, r) {
    return I().canvas.openNew(e, i, r);
  }
  getState(e) {
    return JSON.stringify(us(e));
  }
  setState(e) {
    return I().import.loadState(e);
  }
  async setStateFromUrl(e) {
    const i = await zs(e);
    return I().import.loadState(i);
  }
  openTool(e) {
    bc(e);
  }
  applyChanges() {
    O().applyChanges();
  }
  cancelChanges() {
    O().cancelChanges();
  }
  async resetEditor(e) {
    await pa(e), await I().canvas.loadInitialContent();
  }
  togglePanel(e, i) {
    e === "objects" && O().togglePanel("history", !1), e === "history" && O().togglePanel("objects", !1), O().togglePanel(e, i);
  }
  on(e, i) {
    var r;
    (r = this.fabric) == null || r.on(e, i);
  }
  isDirty() {
    return O().dirty;
  }
  get(e) {
    return this.tools[e];
  }
  notify(e) {
    return Cr(e);
  }
  static init(e) {
    return new Promise((i) => {
      const r = e.onLoad;
      e.onLoad = (s) => {
        r == null || r(s), i(s);
      }, new this(e);
    });
  }
};
let Xn = ul;
Se(Xn, "defaultConfig", Hf), Se(Xn, "version", yy);
export {
  Xn as Photalius
};
//# sourceMappingURL=photalius.es.js.map
